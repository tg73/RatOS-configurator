(()=>{var e={};e.id=2601,e.ids=[2601,1866],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},38316:e=>{"use strict";e.exports=require("zod")},39491:e=>{"use strict";e.exports=require("assert")},50852:e=>{"use strict";e.exports=require("async_hooks")},14300:e=>{"use strict";e.exports=require("buffer")},32081:e=>{"use strict";e.exports=require("child_process")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},73292:e=>{"use strict";e.exports=require("fs/promises")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},98188:e=>{"use strict";e.exports=require("module")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},4074:e=>{"use strict";e.exports=require("perf_hooks")},85477:e=>{"use strict";e.exports=require("punycode")},14521:e=>{"use strict";e.exports=require("readline")},12781:e=>{"use strict";e.exports=require("stream")},71576:e=>{"use strict";e.exports=require("string_decoder")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},26144:e=>{"use strict";e.exports=require("vm")},71267:e=>{"use strict";e.exports=require("worker_threads")},59796:e=>{"use strict";e.exports=require("zlib")},93972:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>d,pages:()=>c,routeModule:()=>p,tree:()=>u});var n=r(30584),a=r(72023),s=r(16443),i=r.n(s),o=r(32055),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let u=["",{children:["analysis",{children:["macros",{children:["[id]",{children:["recordings",{children:["[runId]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,13772)),"/home/runner/work/RatOS-configurator/RatOS-configurator/src/app/analysis/macros/[id]/recordings/[runId]/page.tsx"]}]},{}]},{}]},{}]},{loading:[()=>Promise.resolve().then(r.bind(r,73493)),"/home/runner/work/RatOS-configurator/RatOS-configurator/src/app/analysis/macros/loading.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,47318)),"/home/runner/work/RatOS-configurator/RatOS-configurator/src/app/analysis/layout.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,11988)),"/home/runner/work/RatOS-configurator/RatOS-configurator/src/app/analysis/loading.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,33374))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,69113)),"/home/runner/work/RatOS-configurator/RatOS-configurator/src/app/layout.tsx"],template:[()=>Promise.resolve().then(r.bind(r,4278)),"/home/runner/work/RatOS-configurator/RatOS-configurator/src/app/template.tsx"],error:[()=>Promise.resolve().then(r.bind(r,43086)),"/home/runner/work/RatOS-configurator/RatOS-configurator/src/app/error.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,43962)),"/home/runner/work/RatOS-configurator/RatOS-configurator/src/app/loading.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,10540,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,33374))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/home/runner/work/RatOS-configurator/RatOS-configurator/src/app/analysis/macros/[id]/recordings/[runId]/page.tsx"],d="/analysis/macros/[id]/recordings/[runId]/page",m={require:r,loadChunk:()=>Promise.resolve()},p=new n.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/analysis/macros/[id]/recordings/[runId]/page",pathname:"/analysis/macros/[id]/recordings/[runId]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},45097:(e,t,r)=>{Promise.resolve().then(r.bind(r,45195)),Promise.resolve().then(r.bind(r,41891))},45195:(e,t,r)=>{"use strict";r.r(t),r.d(t,{MacroRun:()=>MacroRun});var n,a=r(96603),s=r(27334),i=r(51495),o=r(63147),l=r(73057),u=r(88304),c=r(32012),d=r.n(c);!function(e){e.Line="line",e.Mountain="mountain"}(n||(n={}));let animateYAxis=(e,t)=>{let r=e.yAxes.getById(s.ck);if(r){r.autoRange=o.EAutoRange.Never;let e=Math.max(...t.map(e=>Math.max(...e.psd.total.estimates)));(r.visibleRange.max<e||r.visibleRange.max>5*e)&&r.animateVisibleRange(new o.NumberRange(Math.min(...t.map(e=>e.psd.total.powerRange.min)),e).growBy(new o.NumberRange(0,.2)),500,o.easing.inOutCirc)}},setupChart=(e,t)=>{let r=!1;if(2===t.length){r=!0;for(let e=0;e<t[0].psd.total.frequencies.length;e++)Math.abs(t[0].psd.total.frequencies[e]-t[1].psd.total.frequencies[e])>1&&(r=!1)}if(r){let r=new o.FastBandRenderableSeries(e.webAssemblyContext2D,{dataSeries:new o.XyyDataSeries(e.webAssemblyContext2D,{containsNaN:!1,isSorted:!0,xValues:t[0].psd.total.frequencies,yValues:t[0].psd.total.estimates,y1Values:t[1].psd.total.estimates}),fill:l.DN[t[1].color??"sky"][600]+22,fillY1:l.DN[t[0].color??"rose"][600]+22,stroke:l.DN[t[0].color??"rose"][400],strokeY1:l.DN[t[1].color??"sky"][400],strokeThickness:4,yAxisId:s.ck});r.rolloverModifierProps.tooltipColor=t[0].color??"zinc",r.rolloverModifierProps.tooltipTitle=t[0].name+" Power",r.rolloverModifierProps1.tooltipColor=t[1].color??"zinc",r.rolloverModifierProps1.tooltipTitle=t[1].name+" Power",r.animation=new o.WaveAnimation({duration:500,delay:200,ease:o.easing.inOutQuad}),e.renderableSeries.add(r)}else t.forEach(t=>{let r="line"===t.type?o.FastLineRenderableSeries:o.FastMountainRenderableSeries,n=new r(e.webAssemblyContext2D,{id:t.sequenceId,dataSeries:new o.XyDataSeries(e.webAssemblyContext2D,{containsNaN:!1,isSorted:!0,xValues:t.psd.total.frequencies,yValues:t.psd.total.estimates}),stroke:l.DN[t.color??"brand"][400],fill:l.DN[t.color??"brand"][600]+11,strokeThickness:4,yAxisId:s.ck});n.rolloverModifierProps.tooltipColor=t.color??"zinc",n.rolloverModifierProps.tooltipTitle=t.name+" Power",n.animation=new o.WaveAnimation({duration:500,delay:200,ease:o.easing.inOutQuad}),e.renderableSeries.add(n)});e.chartModifiers.add(new o.RolloverModifier({showRolloverLine:!0,showTooltip:!1,yAxisId:s.ck})),e.chartModifiers.add(new o.CursorModifier({crosshairStroke:l.DN.sky[400],crosshairStrokeThickness:1,showXLine:!0,showYLine:!0,tooltipLegendTemplate:s.to,tooltipLegendOffsetX:16,tooltipLegendOffsetY:16,yAxisId:s.ck,showTooltip:!1,axisLabelFill:l.DN.zinc[900],axisLabelStroke:l.DN.zinc[100]})),animateYAxis(e,t)};var m=r(83926);let useBeltTensionState=()=>{let[e,t]=(0,i.useState)(null),[r,n]=(0,i.useState)(null),[a,s]=(0,i.useState)(null);return{sequencePair:e,setSequencePair:t,peakPairingResults:r,setPeakPairingResults:n,mechanicalHealth:a,setMechanicalHealth:s}},initBeltTensionChartAnnotations=async(e,t,r,n=1e3)=>{if(null==t||null==r||null==e)return;let[a,i]=t,{pairedPeaks:l,unpairedPeaks1:u,unpairedPeaks2:c}=r,d=.1*Math.max(e.yAxes.getById(s.ck)?.visibleRange.max,a.psd.total.powerRange.max,i.psd.total.powerRange.max),m=l.flatMap(([t,r],a)=>{if(null==e.annotations.getById(String.fromCharCode(65+a)+"-peak-1")&&null==e.annotations.getById(String.fromCharCode(65+a)+"-peak-2")){let i=t.freq,l=t.amplitude,u=r.freq,c=r.amplitude,m=new o.CustomAnnotation({id:String.fromCharCode(65+a)+"-peak-1",xCoordinateMode:o.ECoordinateMode.DataValue,yCoordinateMode:o.ECoordinateMode.DataValue,yAxisId:s.ck,x1:i,y1:l+d,opacity:0,verticalAnchorPoint:o.EVerticalAnchorPoint.Bottom,horizontalAnchorPoint:o.EHorizontalAnchorPoint.Center,svgString:`
					<svg height="50" width="100" xmlns="http://www.w3.org/2000/svg">
						<g transform="translate(11.5,2)">
							<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-corner-left-down"><polyline points="14 15 9 20 4 15"/><path d="M20 4h-7a4 4 0 0 0-4 4v12"/></svg>
						</g>
						<text x="48" y="8" dominant-baseline="middle" text-anchor="middle" stroke-width="2" paint-order="stroke" stroke="black" fill="currentColor" font-size="14px">${String.fromCharCode(65+a)}1</text>
					</svg>`});e.annotations.add(m);let p=new o.CustomAnnotation({id:String.fromCharCode(65+a)+"-peak-2",xCoordinateMode:o.ECoordinateMode.DataValue,yCoordinateMode:o.ECoordinateMode.DataValue,yAxisId:s.ck,x1:u,y1:c+d,opacity:0,verticalAnchorPoint:o.EVerticalAnchorPoint.Bottom,horizontalAnchorPoint:o.EHorizontalAnchorPoint.Center,svgString:`
					<svg height="50" width="100" xmlns="http://www.w3.org/2000/svg">
						<g transform="translate(11.5,2)">
							<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-corner-left-down"><polyline points="14 15 9 20 4 15"/><path d="M20 4h-7a4 4 0 0 0-4 4v12"/></svg>
						</g>
						<text x="48" y="8" dominant-baseline="middle" text-anchor="middle" stroke-width="2" paint-order="stroke" stroke="black" fill="currentColor" font-size="14px">${String.fromCharCode(65+a)}2</text>
					</svg>`});return e.annotations.add(p),[new Promise(t=>{let r=new o.GenericAnimation({from:{opacity:0,y1:l+d},to:{opacity:1,y1:l},duration:200,delay:n+200*a,ease:o.easing.outCubic,onAnimate:(e,t,r)=>{m.opacity=o.DoubleAnimator.interpolate(e.opacity,t.opacity,r),m.y1=o.DoubleAnimator.interpolate(e.y1,t.y1,r)},onCompleted:t});e.addAnimation(r)}),new Promise(t=>{let r=new o.GenericAnimation({from:{opacity:0,y1:c+d},to:{opacity:1,y1:c},duration:200,delay:n+200*a,ease:o.easing.outCubic,onAnimate:(e,t,r)=>{p.opacity=o.DoubleAnimator.interpolate(e.opacity,t.opacity,r),p.y1=o.DoubleAnimator.interpolate(e.y1,t.y1,r)},onCompleted:t});e.addAnimation(r)})]}}).concat(u.concat(c).map((t,r)=>{let a=t.freq,i=t.amplitude;if(null!=e.annotations.getById("unpaired-peak-"+r))return Promise.resolve();let u=new o.CustomAnnotation({id:"unpaired-peak-"+r,xCoordinateMode:o.ECoordinateMode.DataValue,yCoordinateMode:o.ECoordinateMode.DataValue,yAxisId:s.ck,x1:a,y1:i+d,opacity:0,verticalAnchorPoint:o.EVerticalAnchorPoint.Bottom,horizontalAnchorPoint:o.EHorizontalAnchorPoint.Right,svgString:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" class="stroke-red-600" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>'});return e.annotations.add(u),new Promise(t=>{let a=new o.GenericAnimation({from:{opacity:0,y1:i+d},to:{opacity:1,y1:i},duration:200,delay:n+200*l.length+200*r,ease:o.easing.outCubic,onAnimate:(e,t,r)=>{u.opacity=o.DoubleAnimator.interpolate(e.opacity,t.opacity,r),u.y1=o.DoubleAnimator.interpolate(e.y1,t.y1,r)},onCompleted:t});e.addAnimation(a)})}));return await Promise.all(m)},removeBeltTensionChartAnnotations=async(e,t=0,r=0)=>{if(null==e)return;let n=t,a=e.yAxes.getById(s.ck)?.visibleRange.max*.1,i=[];for(;null!=e.annotations.getById(String.fromCharCode(65+n)+"-peak-1");){let t=e.annotations.getById(String.fromCharCode(65+n)+"-peak-1"),r=e.annotations.getById(String.fromCharCode(65+n)+"-peak-2");n++,null!=t&&i.push(new Promise(r=>{let n=new o.GenericAnimation({from:{opacity:t.opacity,y1:t.y1},to:{opacity:0,y1:t.y1-a},duration:500,ease:o.easing.inOutCirc,onAnimate:(e,r,n)=>{t.opacity=o.DoubleAnimator.interpolate(e.opacity,r.opacity,n),t.y1=o.DoubleAnimator.interpolate(e.y1,r.y1,n)},onCompleted:()=>{e.annotations.remove(t),r()}});e.addAnimation(n)})),null!=r&&i.push(new Promise(t=>{let n=new o.GenericAnimation({from:{opacity:r.opacity,y1:r.y1},to:{opacity:0,y1:r.y1-a},duration:500,ease:o.easing.inOutCirc,onAnimate:(e,t,n)=>{r.opacity=o.DoubleAnimator.interpolate(e.opacity,t.opacity,n),r.y1=o.DoubleAnimator.interpolate(e.y1,t.y1,n)},onCompleted:()=>{e.annotations.remove(r),t()}});e.addAnimation(n)}))}let l=r;for(;null!=e.annotations.getById("unpaired-peak-"+l);){let t=e.annotations.getById("unpaired-peak-"+l);l++,null!=t&&i.push(new Promise(r=>{let n=new o.GenericAnimation({from:{opacity:t.opacity,y1:t.y1},to:{opacity:0,y1:t.y1-a},duration:500,ease:o.easing.inOutCirc,onAnimate:(e,r,n)=>{t.opacity=o.DoubleAnimator.interpolate(e.opacity,r.opacity,n),t.y1=o.DoubleAnimator.interpolate(e.y1,r.y1,n)},onCompleted:()=>{e.annotations.remove(t),r()}});e.addAnimation(n)}))}return await Promise.all(i)},updateBeltTensionChartAnnotations=async(e,t,r)=>{if(null==t||null==r||null==e)return await removeBeltTensionChartAnnotations(e);let{pairedPeaks:n,unpairedPeaks1:a,unpairedPeaks2:s}=r,i=0,l=0,u=n.flatMap(async([t,r],n)=>{let a=t.freq,s=t.amplitude,l=r.freq,u=r.amplitude,c=e.annotations.getById(String.fromCharCode(65+n)+"-peak-1"),d=e.annotations.getById(String.fromCharCode(65+n)+"-peak-2");return null==c||null==d?[Promise.resolve()]:(i++,[new Promise(t=>{let r=new o.GenericAnimation({from:{x1:c.x1,y1:c.y1},to:{x1:a,y1:s},duration:500,ease:o.easing.inOutCirc,onAnimate:(e,t,r)=>{c.x1=o.DoubleAnimator.interpolate(e.x1,t.x1,r),c.y1=o.DoubleAnimator.interpolate(e.y1,t.y1,r)},onCompleted:t});e.addAnimation(r)}),new Promise(t=>{let r=new o.GenericAnimation({from:{x1:d.x1,y1:d.y1},to:{x1:l,y1:u},duration:500,ease:o.easing.inOutCirc,onAnimate:(e,t,r)=>{d.x1=o.DoubleAnimator.interpolate(e.x1,t.x1,r),d.y1=o.DoubleAnimator.interpolate(e.y1,t.y1,r)},onCompleted:t});e.addAnimation(r)})])}).concat(a.concat(s).flatMap(async(t,r)=>{let n=t.freq,a=t.amplitude,s=e.annotations.getById("unpaired-peak-"+r);return null==s?[Promise.resolve()]:(l++,[new Promise(t=>{let r=new o.GenericAnimation({from:{x1:s.x1,y1:s.y1},to:{x1:n,y1:a},duration:500,ease:o.easing.inOutCirc,onAnimate:(e,t,r)=>{s.x1=o.DoubleAnimator.interpolate(e.x1,t.x1,r),s.y1=o.DoubleAnimator.interpolate(e.y1,t.y1,r)},onCompleted:t});e.addAnimation(r)})])}));return await Promise.all([removeBeltTensionChartAnnotations(e,i,l),...u])},useInputShapersState=()=>{let[e,t]=(0,i.useState)(null),[r,n]=(0,i.useState)([]),[a,s]=(0,i.useState)(null);return{shapers:r,setShapers:n,recommendedShaper:a,setRecommendedShaper:s,sequenceId:e,setSequenceId:t}},initSeriesSubcomponents=(e,t)=>{if(null==e)return null;let r=e.renderableSeries.asArray().find(e=>e.id===t.sequenceId);for(let n of(null!=r&&(r.rolloverModifierProps.tooltipTitle=t.name+" (Total)"),["x","y","z"]))if(null==e.renderableSeries.getById(t.sequenceId+"-sub-"+n)){let r="x"===n?"red":"y"===n?"yellow":"blue",a=new o.FastLineRenderableSeries(e.webAssemblyContext2D,{id:t.sequenceId+"-sub-"+n,dataSeries:new o.XyDataSeries(e.webAssemblyContext2D,{containsNaN:!1,isSorted:!0,xValues:t.psd[n].frequencies,yValues:t.psd[n].estimates}),stroke:l.DN[r][400],strokeThickness:2,yAxisId:s.ck});a.rolloverModifierProps.tooltipTitle=t.name+" Power",a.rolloverModifierProps.tooltipColor=r,a.animation=new o.WaveAnimation({duration:1e3,ease:o.easing.inOutCubic,fadeEffect:!0}),e.renderableSeries.add(a)}},updateSeriesSubcomponents=(e,t)=>{if(null==e)return null;let r=e.renderableSeries.asArray().find(e=>e.id===t.sequenceId);for(let n of(null!=r&&(r.rolloverModifierProps.tooltipTitle=t.name+" (Total)"),["x","y","z"])){let r=e.renderableSeries.getById(t.sequenceId+"-sub-"+n);if(null==r)continue;let a=new o.XyDataSeries(e.webAssemblyContext2D,{containsNaN:!1,isSorted:!0,xValues:t.psd[n].frequencies,yValues:t.psd[n].estimates});e.addDeletable(a),r.enqueueAnimation(new o.LineAnimation({duration:500,ease:o.easing.inOutCirc,dataSeries:a}))}},useSeriesSubcomponentsChart=()=>{let[e,t]=(0,i.useState)([]);return{subcomponentSeries:e,setSubcomponentSeries:t}},useInputShaperChart=(e,t,r,n)=>{let a=(0,i.useRef)(r);a.current=r;let u=(0,i.useRef)(n);u.current=n;let c=(0,i.useRef)(r),p=(0,i.useRef)(n),f=(0,i.useCallback)((e,r=[])=>{if(null!=u.current&&null==e.renderableSeries.getById("recommended-shaper")){let r=new o.FastMountainRenderableSeries(e.webAssemblyContext2D,{id:"recommended-shaper",dataSeries:new o.XyDataSeries(e.webAssemblyContext2D,{containsNaN:!1,isSorted:!0,xValues:t.psd.total.frequencies,yValues:u.current.psd}),stroke:l.DN[u.current.color][400],fill:l.DN[u.current.color][600]+11,strokeThickness:4,yAxisId:s.ck});r.rolloverModifierProps.tooltipTitle=u.current.name.toLocaleUpperCase()+" @ "+Math.round(100*u.current.freq)/100+"Hz",r.rolloverModifierProps.tooltipColor=u.current.color,r.animation=new o.WaveAnimation({duration:1e3,ease:o.easing.inOutCirc,fadeEffect:!0}),e.renderableSeries.add(r)}a.current?.forEach((n,a)=>{if(null==e||r.includes(n.name)||null!=e.renderableSeries.getById(n.name))return;let i=new o.FastLineRenderableSeries(e.webAssemblyContext2D,{id:n.name,dataSeries:new o.XyDataSeries(e.webAssemblyContext2D,{containsNaN:!1,isSorted:!0,xValues:t.psd.total.frequencies,yValues:n.vals}),stroke:l.DN[n.color][400],strokeThickness:n.name===u.current?.name?5:2,strokeDashArray:n.name===u.current?.name?[10,5,2,5]:[3,5],yAxisId:s.Np});i.rolloverModifierProps.showRollover=!1,i.animation=new o.WaveAnimation({duration:1e3,ease:o.easing.inOutCubic,fadeEffect:!0}),e.renderableSeries.add(i)}),c.current=a.current},[t]),h=(0,i.useCallback)(async a=>{if(null!=a){if(!0===e&&(r?.length??0)>0&&(!1===d()(r,c.current)||n&&(!1===d()(n,p.current)||null==p.current))){if((c.current?.length??0)>0){let e=[];a.renderableSeries.asArray().filter(e=>e.yAxisId===s.Np).forEach(n=>{if(null==a)return;let s=r?.find(e=>e.name===n.id),i=c.current?.find(e=>e.name===n.id);if(s&&i&&!d()(s.vals,i.vals)||u.current?.name===n.id&&p.current?.name!=n.id){let e=new o.XyDataSeries(a.webAssemblyContext2D,{containsNaN:!1,isSorted:!0});if(a.addDeletable(e),null==s){e.appendRange(t.psd.total.frequencies,Array(n.dataSeries.count()).fill(0)),a.addDeletable(e),n.enqueueAnimation(new o.LineAnimation({duration:500,ease:o.easing.inOutCirc,fadeEffect:!0,reverse:!0,dataSeries:e,onCompleted:()=>{a?.renderableSeries.remove(n,!0)}}));return}n.isRunningAnimation||(e.appendRange(t.psd.total.frequencies,s.vals),n.enqueueAnimation(new o.LineAnimation({duration:500,ease:o.easing.inOutCirc,dataSeries:e,styles:{strokeThickness:n.id===u.current?.name?5:2}})))}e.push(n.id)}),f(a,e)}else f(a)}else r?.length===0&&(c.current?.length??0)>0&&a.renderableSeries.asArray().filter(e=>e.yAxisId===s.Np||"recommended-shaper"===e.id).forEach(e=>{if(null==a||e.isRunningAnimation)return;let r=new o.XyDataSeries(a.webAssemblyContext2D,{containsNaN:!1,isSorted:!0});if(a.addDeletable(r),null==e.dataSeries){(0,m.j)().warn(e.id,"dataSeries is null");return}r.appendRange(t.psd.total.frequencies,Array(e.dataSeries.count()).fill(0)),e.enqueueAnimation(new o.LineAnimation({duration:500,fadeEffect:!0,reverse:!0,ease:o.easing.inOutCirc,dataSeries:r,onCompleted:()=>{a?.renderableSeries.remove(e,!0)}}))});p.current=n,c.current=r}},[e,r,n,f,t.psd.total.frequencies]);return{updateInputShapers:h,initializeInputShapers:f,shapers:r,prevShapers:c}};o.SciChartSurface.configure({wasmUrl:"/configure/scichart2d.wasm",dataUrl:"/configure/scichart2d.data"});let MacroRunChart=e=>{let{sequenceSeries:t,shapers:r,recommendedShaper:n,chart:c,prevShapers:m,subcomponentSeries:p}=e,[f,h]=(0,i.useState)(!1),x=(0,i.useRef)(f);x.current=f;let g=(0,i.useRef)(Promise.resolve()),y=(0,i.useRef)(p);y.current=p;let S=(0,i.useRef)(t),{updateInputShapers:b,initializeInputShapers:w}=useInputShaperChart((r?.length??0)>0,t[0],r??[],n),A=(0,i.useCallback)(e=>{if(null==c.surface.current)return;let t=e.filter(e=>p.includes(e.sequenceId));if(0===S.current.length){setupChart(c.surface.current,e),w(c.surface.current),t.forEach(e=>{initSeriesSubcomponents(c.surface.current,e)});return}h(!0);let r=[];if(e.length===S.current.length){e.forEach((t,n)=>{let a=c.surface.current?.renderableSeries.get(n);if(a){if(null==c.surface.current)throw Error("Missing chart surface");let i=a.dataSeries.count();if((0,s.jh)(a.dataSeries)){let s=e[n+1];if(i>t.psd.total.frequencies.length){let e=Array(i-t.psd.total.frequencies.length).fill(0),r=Array(i-t.psd.total.estimates.length).fill(0);t.psd.total.frequencies.unshift(...e),t.psd.total.estimates.unshift(...r),s.psd.total.frequencies.unshift(...e),s.psd.total.estimates.unshift(...r)}i<t.psd.total.frequencies.length&&(t.psd.total.frequencies=t.psd.total.frequencies.slice(0,i),t.psd.total.estimates=t.psd.total.estimates.slice(0,i),s.psd.total.frequencies=s.psd.total.frequencies.slice(0,i),s.psd.total.estimates=s.psd.total.estimates.slice(0,i));let l=new o.XyyDataSeries(c.surface.current.webAssemblyContext2D,{containsNaN:!1,isSorted:!0});l.appendRange(t.psd.total.frequencies,t.psd.total.estimates,s.psd.total.estimates),c.surface.current.addDeletable(l),a.rolloverModifierProps.tooltipColor=t.color??"zinc",a.rolloverModifierProps.tooltipTitle=t.name+" Power",a.rolloverModifierProps1.tooltipColor=s.color??"zinc",a.rolloverModifierProps1.tooltipTitle=s.name+" Power",r.push(new Promise(e=>{a.runAnimation(new o.BandAnimation({duration:500,ease:o.easing.inOutCirc,dataSeries:l,onCompleted:e}))}))}if((0,s.Mg)(a.dataSeries)){if(i>t.psd.total.frequencies.length){let e=Array(i-t.psd.total.frequencies.length).fill(0),r=Array(i-t.psd.total.estimates.length).fill(0);t.psd.total.frequencies.unshift(...e),t.psd.total.estimates.unshift(...r)}i<t.psd.total.frequencies.length&&(t.psd.total.frequencies=t.psd.total.frequencies.slice(0,i),t.psd.total.estimates=t.psd.total.estimates.slice(0,i));let e=new o.XyDataSeries(c.surface.current.webAssemblyContext2D,{containsNaN:!1,isSorted:!0});e.appendRange(t.psd.total.frequencies,t.psd.total.estimates),c.surface.current.addDeletable(e),a.rolloverModifierProps.tooltipColor=t.color??"zinc",a.rolloverModifierProps.tooltipTitle=t.name+" Power",r.push(new Promise(r=>{a.runAnimation(new o.MountainAnimation({duration:500,ease:o.easing.inOutCirc,dataSeries:e,onCompleted:r,styles:{stroke:l.DN[t.color??"zinc"][400]}}))}))}}}),b(c.surface.current),t.forEach(e=>{updateSeriesSubcomponents(c.surface.current,e)}),animateYAxis(c.surface.current,e),g.current=Promise.all(r);return}if(e.length!==S.current.length){c.surface.current?.renderableSeries.asArray().forEach(e=>{if(e){if(null==c.surface.current)throw Error("Missing chart surface");let t=e.dataSeries.count(),n=e.dataSeries.getNativeXValues(),a=[];for(let e=0;e<n.size();e++)a.push(n.get(e));if(s.jh(e.dataSeries)){let n=new o.XyyDataSeries(c.surface.current.webAssemblyContext2D,{containsNaN:!1,isSorted:!0});n.appendRange(a,Array(t).fill(0),Array(t).fill(0)),c.surface.current.addDeletable(n),r.push(new Promise(t=>{e.runAnimation(new o.BandAnimation({duration:500,fadeEffect:!0,reverse:!0,ease:o.easing.inOutCirc,dataSeries:n,onCompleted:()=>{c.surface.current?.renderableSeries.remove(e),t()}}))}))}if(s.Mg(e.dataSeries)){let n=new o.XyDataSeries(c.surface.current.webAssemblyContext2D,{containsNaN:!1,isSorted:!0});n.appendRange(a,Array(t).fill(0)),c.surface.current.addDeletable(n),r.push(new Promise(t=>{e.runAnimation(new o.LineAnimation({duration:500,ease:o.easing.inOutCirc,dataSeries:n,fadeEffect:!0,reverse:!0,onCompleted:()=>{c.surface.current?.renderableSeries.remove(e),t()}}))}))}}}),g.current=Promise.all(r).then(()=>new Promise(t=>{c.surface.current&&(c.surface.current?.renderableSeries.clear(),c.surface.current?.chartModifiers.clear(),setupChart(c.surface.current,e)),t()}));return}},[c.surface,w,p,b]);return(0,i.useEffect)(()=>{0!=t.length&&!1===d()(t,S.current)?(c.surface.current&&A(t),S.current=t):c.surface.current&&b(c.surface.current)},[c.surface,w,m,t,r,p,A,b]),(0,i.useEffect)(()=>{p.length&&c.surface.current&&(x.current?g.current.then(()=>{y.current.forEach(e=>{t.filter(e=>y.current.includes(e.sequenceId)).forEach(e=>{initSeriesSubcomponents(c.surface.current,e)})})}):y.current.forEach(e=>{t.filter(e=>y.current.includes(e.sequenceId)).forEach(e=>{initSeriesSubcomponents(c.surface.current,e)})}))},[c.surface,t,p]),a.jsx(u.iB,{...c.forwardProps,className:"flex-1 bg-zinc-900/50"})};var p=r(43435),f=r(76461),h=r(10291),x=r(91295),g=r(46573),y=r(89317),S=r(50519),b=r(73367),w=r(47994),A=r(32519),C=r(88509),k=r(61418),v=r(69550),P=r(368);let M=i.forwardRef(({className:e,value:t,...r},n)=>a.jsx(v.fC,{ref:n,className:(0,P.cn)("relative h-2 w-full overflow-hidden rounded-full bg-lime-400/20",e),...r,children:a.jsx(v.z$,{className:"h-full w-full flex-1 bg-lime-400 transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));(0,P.h)(M,v.fC.displayName);var j=r(78438),q=r(74783),N=r(24240),D=r(42928);let R=1,InputShapers=e=>{let{recordings:t,sequenceId:n,currentRunId:s,setRecommendedShaper:o,setShapers:u,shapers:c,recommendedShaper:d}=e,[p,f]=(0,i.useState)(!1),[h,x]=(0,i.useState)(0),g=(0,i.useRef)(null),y=(0,i.useRef)(null),[S,b]=(0,i.useState)(!1),w=null!=n?t.find(t=>t.sequenceId===e.sequenceId):null;return(0,i.useEffect)(()=>{u([]),o(null)},[s,o,u]),(0,i.useEffect)(()=>(g.current=new Worker(new URL(r.p+r.u(2881),r.b)),g.current.onmessage=e=>{let t=e.data;if("findBestShaper"===t.type&&t.jobId===y.current){performance.mark("findBestShaperEnd");let e=performance.measure("findBestShaper","findBestShaperStart","findBestShaperEnd");(0,m.j)().info(e,"Best shaper found in "+e.duration+" ms");let r=0;for(let t of C.$l){let n=performance.measure("fitShaper-"+t.name,{start:e.startTime,end:"fitShaper-"+t.name});(0,m.j)().info(n,"Fitting "+t.name+" took "+(n.duration-r)+" ms"),r=n.duration}u(t.shapers.filter(Boolean)),o(t.result),f(!1)}if("fitShaper"===t.type&&t.jobId===y.current&&(performance.mark("fitShaper-"+t.result?.name),null!=t.result)){let e=t.result;u(t=>[...t.filter(t=>t.name!=e.name),e])}"findBestShaperProgress"===t.type&&t.jobId===y.current&&x(t.progress),"jobCancelled"===t.type&&t.id===y.current&&(f(!1),x(0),u([]),y.current=null)},b(!0),()=>{b(!1),g.current?.terminate()}),[o,u]),(0,i.useEffect)(()=>{if(null!=w&&S){let e=R++;return y.current=e,f(e),x(0),performance.mark("findBestShaperStart"),g.current?.postMessage({id:e,type:"findBestShaper",calibrationData:w.psd.total,scv:w.scv}),()=>{g.current?.postMessage({type:"cancelJob",id:e}),f(!1)}}u([]),o(null)},[w,S,u,o]),(0,a.jsxs)("div",{children:[a.jsx(j.i,{containerClassName:"overflow-hidden",children:(p||c.length>0)&&(0,a.jsxs)(q.iA,{className:"rounded-none",containerClassName:"rounded-none",children:[a.jsx(q.xD,{children:(0,a.jsxs)(q.SC,{className:"text-xs",children:[a.jsx(q.ss,{className:"",children:"Shaper"}),a.jsx(q.ss,{className:"",children:"Freq."}),a.jsx(q.ss,{className:"text-right",children:a.jsx("div",{className:"flex justify-end",children:"Vibr."})}),a.jsx(q.ss,{className:"text-right",children:a.jsx("div",{className:"flex justify-end",children:"Smooth."})}),a.jsx(q.ss,{className:"text-right",children:a.jsx("div",{className:"flex justify-end",children:"Rec. Accel."})})]})}),a.jsx(q.RM,{children:c.map(e=>(0,a.jsxs)(q.SC,{style:{color:l.DN[e.color][400]},className:(0,k.dV)("text-xs",d?.name===e.name&&"font-bold"),children:[(0,a.jsxs)(q.pj,{className:"whitespace-nowrap text-nowrap",children:[a.jsx(D.Z,{className:"inline-block size-5",strokeWidth:e.name===d?.name?"4":"2",strokeDasharray:e.name===d?.name?"7, 6.5":"3, 5",strokeLinecap:"square"})," ",e.name.toLocaleUpperCase()]}),(0,a.jsxs)(q.pj,{children:[(Math.round(100*e.freq)/100).toFixed(2),"hz"]}),(0,a.jsxs)(q.pj,{className:"text-right",children:[(100*e.vibrs).toFixed(2),"%"]}),a.jsx(q.pj,{className:"text-right",children:e.smoothing.toFixed(2)}),(0,a.jsxs)(q.pj,{className:"whitespace-nowrap text-nowrap text-right",children:[Math.round(e.maxAccel)," mm/s",a.jsx("sup",{children:"2"})]})]},e.name))})]})}),p?(0,a.jsxs)("div",{className:"mt-0 block space-y-3 p-3 text-xs text-muted-foreground",children:[a.jsx(N.$,{className:"mr-1 inline-block size-4",noMargin:!0,strokeWidth:4})," Calculating input shapers (",(100*h).toFixed(2),"%)...",a.jsx(M,{value:100*h})]}):null!=d&&(0,a.jsxs)("div",{className:"mt-0 block space-y-3 p-3 text-xs text-muted-foreground",children:[d.name.toLocaleUpperCase()," is recommended at ",d.freq.toFixed(2),"Hz. Resulting in a resonance reduction of ",(100-d.vibrs).toFixed(2),"%. Recommended maximum acceleration before noticeable smoothing is ",Math.round(d.maxAccel)," mm/s",a.jsx("sup",{children:"2"})]})]})};var I=r(41866);let detectPeaks=(e,t,r,n)=>{let a=new o.XyMovingAverageFilter(new o.XyDataSeries(e.webAssemblyContext2D,{containsNaN:!1,isSorted:!0,xValues:t.frequencies,yValues:t.estimates}),{length:3,isSorted:!0,containsNaN:!1}),i=a.getNativeYValues(),l=[];n&&e.renderableSeries.add(new o.FastLineRenderableSeries(e.webAssemblyContext2D,{dataSeries:a,yAxisId:s.ck,stroke:n,strokeThickness:5,strokeDashArray:[5,5]}));let u=t.frequencies[1]-t.frequencies[0],c=Math.ceil(10/u);isFinite(c)||(c=10);let d=[];for(let e=1;e<i.size();e++){let n=i.get(e-1),a=i.get(e),s=i.get(e+1);if(n<a&&a>s&&a>r){let r=e;Array(c).fill(0).forEach((n,a)=>{let s=e-a;s>0&&s<t.estimates.length&&t.estimates[s]>t.estimates[r]&&t.estimates[s-1]<t.estimates[s]&&t.estimates[s+1]<t.estimates[s]&&(r=s)}),-1===d.indexOf(r)&&(d.push(r),l.push({freq:t.frequencies[r],amplitude:t.estimates[r]}))}}return l},pairPeaks=(e,t)=>{let r=[],n=e.slice(),a=t.slice(),s=[];for(let r of e)for(let e of t)s.push(Math.abs(r.freq-e.freq));s.sort((e,t)=>e-t);let i=(0,I.XL)(s,50),o=(0,I.XL)(s,75)-(0,I.XL)(s,25),l=i+1.5*o;l=Math.min(l,10);let u=0;for(;n.length>0&&a.length>0&&u<n.length*a.length;){u++;let e=l+1,t=null;for(let r of n)for(let n of a){let a=Math.abs(r.freq-n.freq);a<e&&(e=a,t=[r,n])}t&&(r.push(t),n.splice(n.indexOf(t[0]),1),a.splice(a.indexOf(t[1]),1))}return{pairedPeaks:r,unpairedPeaks1:n,unpairedPeaks2:a}},padSignal=(e,t)=>e.length>=t?e:[...e,...Array(t-e.length).fill(0)],BeltTensionComparison=e=>{let{sequencePair:t,chart:r,setPeakPairingResults:n,setMechanicalHealth:s,peakPairingResults:o,mechanicalHealth:l}=e,u=(0,i.useRef)(null),[c,m]=(0,i.useState)(null),p=(0,i.useRef)(null),f=(0,i.useCallback)(e=>{m(e.id)},[]);return(0,i.useEffect)(()=>{r.onInitialize(f)},[r,r.onInitialize,f]),(0,i.useEffect)(()=>{if(r.isInitialized){if(null!=t&&2===t.length&&null!=r.surface.current){let e=.12*Math.max(t[0].psd.total.powerRange.max,t[1].psd.total.powerRange.max),a=detectPeaks(r.surface.current,t[0].psd.total,e),i=detectPeaks(r.surface.current,t[1].psd.total,e),o=pairPeaks(a,i),l=function(e,t){let r=Math.max(e.psd.estimates.length,t.psd.estimates.length),n=padSignal(e.psd.estimates,r),a=padSignal(t.psd.estimates,r),s=100*(0,I.d6)(n,a),i=e.unpairedPeaks.length+t.unpairedPeaks.length,o=e.pairedPeaks.length,l=e.unpairedPeaks.concat(t.unpairedPeaks),u=Math.max(e.psd.powerRange.max,t.psd.powerRange.max),c=s;o>=2&&(c*=2/o),o<2&&(c*=o/2);let d=0;if(i>0){for(let e of l)d+=e.amplitude/u*30;c-=d}return{mhi:c=Math.max(0,Math.min(c,100)),label:function(e){let t=Math.max(0,Math.min(e,100));for(let[e,r,n]of[[90,100,"Excellent mechanical health"],[70,90,"Good mechanical health"],[55,70,"Acceptable mechanical health"],[45,55,"Potential signs of overtensioning"],[30,45,"Potential signs of mechanical issues or overtensioning"],[15,30,"Very likely mechanical issues"],[0,15,"Mechanical issues detected"]])if(t>=e&&t<=r)return n;return"Unknown mechanical health"}(c)}}({pairedPeaks:o.pairedPeaks,unpairedPeaks:o.unpairedPeaks1,psd:t[0].psd.total},{pairedPeaks:o.pairedPeaks,unpairedPeaks:o.unpairedPeaks2,psd:t[1].psd.total});n(o),s(l),c!==u.current?(initBeltTensionChartAnnotations(r.surface.current,t,o),u.current=c,p.current=o):d()(p.current,o)||(updateBeltTensionChartAnnotations(r.surface.current,t,o).then(()=>initBeltTensionChartAnnotations(r.surface.current,t,o,0)),p.current=o)}else null==t&&null!=u.current&&(n(null),s(null),updateBeltTensionChartAnnotations(r.surface.current,null,null),u.current=null)}},[t,s,r.surface,n,r.isInitialized,c]),a.jsx(j.i,{containerClassName:"overflow-hidden",children:o&&t&&(0,a.jsxs)("div",{children:[(0,a.jsxs)(q.iA,{className:"rounded-none",containerClassName:"rounded-none",children:[a.jsx(q.xD,{children:(0,a.jsxs)(q.SC,{className:"text-xs",children:[a.jsx(q.ss,{className:"",children:"Pair"}),a.jsx(q.ss,{className:"text-right",children:a.jsx("div",{className:"flex justify-end",children:"Freq. Delta"})}),a.jsx(q.ss,{className:"text-right",children:a.jsx("div",{className:"flex justify-end",children:"Ampl. Delta"})})]})}),a.jsx(q.RM,{children:o.pairedPeaks.map((e,t)=>(0,a.jsxs)(q.SC,{className:(0,k.dV)("text-xs"),children:[(0,a.jsxs)(q.pj,{className:"whitespace-nowrap text-nowrap",children:["Peaks ",String.fromCharCode(65+t)]}),(0,a.jsxs)(q.pj,{className:"text-right",children:[(Math.round(10*Math.abs(e[0].freq-e[1].freq))/10).toFixed(1),"hz"]}),(0,a.jsxs)(q.pj,{className:"text-right",children:[(Math.abs(e[0].amplitude-e[1].amplitude)/Math.max(e[0].amplitude,e[1].amplitude)*100).toFixed(1),"%"]})]},e[0].freq+e[1].freq))})]}),(0,a.jsxs)("div",{className:"mt-0 grid grid-cols-2 gap-3 p-3",children:[(0,a.jsxs)("div",{children:[a.jsx(b.ll,{className:"text-sm",children:"Estimated Similarity"}),(0,a.jsxs)(b.SZ,{className:"text-xs",children:[l?.mhi.toFixed(1),"%"]})]}),(0,a.jsxs)("div",{children:[a.jsx(b.ll,{className:"text-sm",children:"Status"}),a.jsx(b.SZ,{className:"text-xs",children:l?.label})]}),(0,a.jsxs)("div",{className:"col-span-full",children:[a.jsx(b.ll,{className:"text-sm",children:"Unpaired Peaks"}),(0,a.jsxs)(b.SZ,{className:"text-xs",children:[o.unpairedPeaks1.length," on ",t[0].name]}),(0,a.jsxs)(b.SZ,{className:"text-xs",children:[o.unpairedPeaks2.length," on ",t[1].name]})]})]})]})})};S.Zr.defaultLocale="en-GB";let E=S.ou.local().locale,MacroRun=({id:e,runId:t})=>{let[r,o]=(0,i.useState)(t),[l]=f.SX.analysis.findMacro.useSuspenseQuery({id:e}),[u]=f.SX.analysis.getRunRecordings.useSuspenseQuery({runId:r,macroId:e},{keepPreviousData:!0}),c=useInputShapersState(),m=useSeriesSubcomponentsChart(),C=useBeltTensionState(),[{next:k,previous:v}]=f.SX.analysis.getNextAndPreviousRunRecordingIds.useSuspenseQuery({macroId:e,runId:r},{keepPreviousData:!0});(0,y.useHotkeys)("left",()=>{null!=v&&o(v)},[v]),(0,y.useHotkeys)("right",()=>{null!=k&&o(k)},[k]);let P=(0,i.useMemo)(()=>{let e=S.ou.fromMillis(u.result[0].startTimeStamp),t=S.ou.fromMillis(u.result[u.result.length-1].endTimeStamp),r=e.equals(t)?e.toFormat("yyyy-MM-dd HH:mm"):`${e.toFormat("yyyy-MM-dd HH:mm")} - ${t.toFormat("HH:mm")}`,n=S.ou.fromMillis(u.result[0].startTimeStamp).setLocale(E).toLocaleString({dateStyle:"long",timeStyle:"short"}),s=S.nL.fromMillis(u.result[u.result.length-1].endTimeStamp-u.result[0].startTimeStamp).shiftTo("minutes","seconds").toHuman({unitDisplay:"short",maximumSignificantDigits:2});return(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{title:r,className:"min-w-0 truncate",children:n}),a.jsx("div",{className:"min-w-0 truncate opacity-80",children:s})]})},[u]),M=(0,i.useMemo)(()=>u.result.flatMap(e=>{let t=l.sequences.find(t=>t.id===e.sequenceId);return t?.recording?{sequenceId:t.id,color:t?.recording?.color??"lime",name:e.name,psd:e.psd,type:n.Mountain}:null}).filter(Boolean),[u,l]),j=(0,i.useCallback)(e=>{setupChart(e,M)},[M]),q=(0,A.Q8)(s.OH,j),{setSubcomponentSeries:N}=m,{setSequenceId:D}=c,{setSequencePair:R}=C,I=(0,i.useRef)(C.sequencePair);return I.current=C.sequencePair,(0,i.useEffect)(()=>{if(1===u.result.length){let e=u.result[0].sequenceId;D(e),N(t=>t.filter(t=>t!==e).concat([e]))}else N([]),D(null)},[u.result,D,N]),(0,i.useEffect)(()=>{let e=[M[0],M[1]];2!==u.result.length||2!==M.length||d()(I.current,e)?d()(I.current,e)||R(null):R(e)},[u.result.length,M,R]),(0,p.Ty)("Analysis",(0,i.useCallback)(e=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(e.MenubarMenu,{children:[a.jsx(e.MenubarTrigger,{className:"cursor-pointer",asChild:!0,children:(0,a.jsxs)("span",{onClick:()=>window.history.back(),children:[a.jsx(e.MenubarIcon,{Icon:h.Z}),a.jsx("span",{className:"hidden lg:inline",children:"Back"})]})}),a.jsx(e.MenubarContent,{className:"hidden"})]}),(0,a.jsxs)(e.MenubarMenu,{children:[a.jsx(e.MenubarTrigger,{asChild:!0,disabled:null==v,children:(0,a.jsxs)("span",{onClick:()=>null!=v&&o(v),children:[a.jsx(e.MenubarIcon,{Icon:x.Z}),a.jsx("span",{className:"hidden lg:inline",children:"Previous recording"})]})}),a.jsx(e.MenubarContent,{className:"hidden"})]}),(0,a.jsxs)(e.MenubarMenu,{children:[a.jsx(e.MenubarTrigger,{asChild:!0,disabled:null==k,children:(0,a.jsxs)("span",{onClick:()=>null!=k&&o(k),children:[a.jsx(e.MenubarIcon,{Icon:g.Z}),a.jsx("span",{className:"hidden lg:inline",children:"Next recording"})]})}),a.jsx(e.MenubarContent,{className:"hidden"})]})]}),[k,v,o])),(0,a.jsxs)("div",{className:"relative flex flex-1",children:[a.jsx(MacroRunChart,{sequenceSeries:M,chart:q,shapers:c.shapers,recommendedShaper:c.recommendedShaper,subcomponentSeries:m.subcomponentSeries}),(0,a.jsxs)(w.Card,{className:"absolute right-4 top-4 w-[420px]",children:[(0,a.jsxs)(b.Ol,{className:"flex flex-row items-center gap-2 space-y-0 p-3 @sm:p-3",children:[a.jsx(b.ll,{className:"flex-1",children:l.name}),a.jsx(b.SZ,{className:"m-0 text-right text-xs",children:P})]}),a.jsx(BeltTensionComparison,{chart:q,...C}),1===u.result.length&&a.jsx(InputShapers,{currentRunId:r,...c,recordings:u.result})]})]})}},41866:(e,t,r)=>{"use strict";r.d(t,{P0:()=>sumArray,XL:()=>calculatePercentile,d6:()=>pearsonCorrelation});let sumArray=e=>e.reduce((e,t)=>e+t,0),meanArray=e=>sumArray(e)/e.length;function pearsonCorrelation(e,t){if(e.length!==t.length)throw Error("Input arrays must have the same length.");let r=e.length,n=meanArray(e),a=meanArray(t),s=0,i=0,o=0;for(let l=0;l<r;l++){let r=e[l]-n,u=t[l]-a;s+=r*u,i+=r*r,o+=u*u}let l=Math.sqrt(i)*Math.sqrt(o);return 0===l?0:s/l}function calculatePercentile(e,t){e.sort((e,t)=>e-t);let r=t/100*(e.length-1),n=Math.floor(r),a=Math.ceil(r);return n===a?e[n]:e[n]+(e[a]-e[n])*(r-n)}},13772:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Page});var n=r(8632);r(80051);var a=r(3747),s=r(33362),i=r(97175);let o=(0,i.createProxy)(String.raw`/home/runner/work/RatOS-configurator/RatOS-configurator/src/app/analysis/macros/[id]/recordings/[runId]/macro-run.tsx`),{__esModule:l,$$typeof:u}=o;o.default;let c=o.MacroRun;function Page({params:e}){return n.jsx("div",{className:"flex h-full @container",children:n.jsx(a.r,{fallback:n.jsx(s.default,{}),children:n.jsx(c,{...e})})})}},73493:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Loading});var n=r(8632),a=r(23805);function Loading(){return n.jsx(a.I,{})}},33374:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var n=r(11169);let __WEBPACK_DEFAULT_EXPORT__=e=>{let t=(0,n.fillMetadataSegment)("/configure",e.params,"icon.svg");return[{type:"image/svg+xml",sizes:"any",url:t+"?5e41e7184acee859"}]}}};var t=require("../../../../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[7013,2689,8989,2828,1169,5005,8909,4620,6851,5417,519,2013,5222,7340,2017,2251,9751,2041,3709,8328,8509,4783,1014,3362],()=>__webpack_exec__(93972));module.exports=r})();