{"version":3,"file":"static/chunks/726.33386206929ecf4c.js","mappings":"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AG,GACAG,GACAG,GACAS,GACAH,GACAM,GACAG,GACAG,GACAQ,GACAK,GACA5jB,GACA+jB,GACAE,GACAY,GACAV,GACAK,GACAU,GACA/kB,GACAolB,GACAG,GACAU,GACAG,GACAW,GACAzQ,GACA+Q,GACAE,GACAW,GACAthB,GACA8hB,GACAO,GACAG,GACAY,GACAI,GACAE,GACAE,GACAE,GACA3jB,GACA8jB,GACAG,GACAG,GACAG,GACA97B,EACAm8B,GACAQ,GACAc,GACAG,GACAI,GACAQ,GACAW,GACAG,GACAgB,GACAS,GACAS,GACAG,GACAG,GACAG,GACAE,GACAG,GACAhuB,GACAwyB,GACAK,GACAiB,GACA/Q,GACAoL,GACAM,GACAwB,GACAE,GACAU,GACAc,GACAM,GACAE,GACAG,GACAsC,GACAliB,GACAqiB,GACAG,GACAE,GACAzE,GACAiF,GACAqB,GACA//B,GACAugC,GACAI,GACA5S,GACJ,CAEI,GAAA3jD,EAAA62D,GAAA,EAAcD,ECzVlB;;;;;;;;;;;;;;;CAeA","sources":["webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/flags_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/adapter_info.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/buffer_manager.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/texture_manager.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/shader_util.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/webgpu_program.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/webgpu_util.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/backend_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/base.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/binary_op_util.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/unary_op_util.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/activation_util.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/matmul_packed_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/matmul_reduce_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/matmul_small_output_size_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/matmul_splitK_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/fill_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Fill.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Reshape.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/BatchMatMul_impl.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/_FusedMatMul.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/binary_op_complex_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/binary_op_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Identity.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Complex.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/unary_op_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernel_utils/kernel_funcs_utils.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernel_utils/shared.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Abs.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Acos.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Acosh.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Add.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/addn_packed_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/AddN.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/transpose_shared_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/transpose_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Transpose.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/reduce_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernel_utils/reduce.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/All.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Any.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/argminmax_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/ArgMax.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/ArgMin.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Asin.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Asinh.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Atan.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Atan2.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Atanh.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/pool_filtersizeone_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/pool_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Max.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Mean.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Pool_impl.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/AvgPool.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/AvgPool3D.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/avg_pool_backprop_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/AvgPool3DGrad.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/AvgPoolGrad.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/BatchMatMul.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/slice_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Slice.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/BatchToSpaceND.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/bincount_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Bincount.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/broadcast_args_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/BroadcastArgs.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/NotEqual.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Real.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernel_utils/int.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Cast.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Ceil.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/clip_vec4_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/clip_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/ClipByValue.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/complex_abs_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/ComplexAbs.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/concat_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Imag.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Concat_impl.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Concat.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/conv2d_mm_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/conv2d_naive_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/im2col_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Conv2D_impl.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Conv2D.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/conv_backprop_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Conv2DBackpropFilter.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/conv_backprop_mm_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Conv2DBackpropInput.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/conv3d_naive_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Conv3D.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Conv3DBackpropFilterV2.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Conv3DBackpropInputV2.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Cos.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Cosh.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/crop_and_resize_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/CropAndResize.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/cum_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Cum_impl.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Cumprod.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Cumsum.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/DenseBincount.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/depth_to_space_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/DepthToSpace.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/depthwise_conv2d_nchw_shared_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/depthwise_conv2d_vec4_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/depthwise_conv2d_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/DepthwiseConv2dNative.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/conv_backprop_depthwise_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/DepthwiseConv2dNativeBackpropFilter.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/DepthwiseConv2dNativeBackpropInput.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/diag_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Diag.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/dilation_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Dilation2D.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/dilation_backprop_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Dilation2DBackpropFilter.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Dilation2DBackpropInput.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/draw_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Draw.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Multiply.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Sum.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Einsum.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Elu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/EluGrad.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Equal.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Erf.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Exp.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/ExpandDims.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Expm1.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/fft_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/FFT_impl.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/FFT.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/flip_left_right_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/FlipLeftRight.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Floor.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/FloorDiv.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/from_pixels_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/FromPixels.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/batchnorm_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/FusedBatchNorm.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/FusedConv2D.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/FusedDepthwiseConv2D.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/gather_nd_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/GatherNd.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/gather_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/GatherV2.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Greater.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/GreaterEqual.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/IFFT.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/IsFinite.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/IsInf.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/IsNaN.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/LeakyRelu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Less.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/LessEqual.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/lin_space_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/LinSpace.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Log.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Log1p.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/LogicalAnd.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/LogicalNot.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/LogicalOr.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/lrn_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/LRN.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/lrn_grad_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/LRNGrad.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Maximum.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/MaxPool.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/MaxPool3D.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/max_pool_backprop_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/MaxPool3DGrad.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/MaxPoolGrad.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/MaxPoolWithArgmax.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Min.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Minimum.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/mirror_pad_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/MirrorPad.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Mod.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/multinomial_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/softmax_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Softmax.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Multinomial.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Neg.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/NonMaxSuppressionV3.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/NonMaxSuppressionV5.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/onehot_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/OneHot.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/ZerosLike.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/OnesLike.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Pack.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/pad_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/PadV2.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Pow.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Prelu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Prod.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Range.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/RealDiv.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Reciprocal.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Relu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Relu6.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/resize_bilinear_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/ResizeBilinear.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/resize_bilinear_backprop_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/ResizeBilinearGrad.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/resize_nearest_neighbor_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/ResizeNearestNeighbor.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/resize_nearest_neighbor_backprop_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/ResizeNearestNeighborGrad.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/reverse_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Reverse.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/rotate_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/RotateWithOffset.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Round.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Rsqrt.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/scatter_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/ScatterNd.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/search_sorted_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/SearchSorted.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/select_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Select.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Selu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Sigmoid.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Sign.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Sin.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Sinh.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Softplus.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/space_to_batchND_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/SpaceToBatchND.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/sparse_segment_reduce_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernel_utils/sparse_segment_reduce.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/SparseSegmentMean.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/SparseSegmentSum.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/tile_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Tile.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/SparseToDense.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/SplitV.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Sqrt.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Square.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/SquaredDifference.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Step.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/strided_slice_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/StridedSlice.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/StringNGrams.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Sub.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Tan.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Tanh.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/TensorScatterUpdate.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/top_k_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/TopK.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/transform_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Transform.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/Unpack.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/unsorted_segment_sum_webgpu.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/kernels/UnsortedSegmentSum.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/register_all_kernels.js","webpack://_N_E/./node_modules/.pnpm/@tensorflow+tfjs-backend-webgpu@4.20.0_@tensorflow+tfjs-core@4.20.0_encoding@0.1.13_/node_modules/@tensorflow/tfjs-backend-webgpu/dist/index.js","webpack://_N_E/<anon>"],"sourcesContent":["/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { env } from '@tensorflow/tfjs-core';\nconst ENV = env();\n/** The batched dispatching calls size in the device queue. */\nENV.registerFlag('WEBGPU_DEFERRED_SUBMIT_BATCH_SIZE', () => 15);\n/**\n * Whether we forward execution to the CPU backend if tensors are small and\n * reside on the CPU.\n */\nENV.registerFlag('WEBGPU_CPU_FORWARD', () => true);\n/**\n * This flag is used to test different types of matmul programs.\n *\n * See MatMulProgramType in webgpu_util.ts for a list of available values.\n */\nENV.registerFlag('WEBGPU_MATMUL_PROGRAM_TYPE', () => -1);\n/**\n * Whether to use conv2dTranspose_naive which directly implement the\n * conv2dTranspose logic rather than using a matmul to simulate.\n */\nENV.registerFlag('WEBGPU_USE_NAIVE_CONV2D_TRANSPOSE', () => true);\n/**\n * Whether we use low power GPU. Otherwise, a high performance GPU will be\n * requested.\n */\nENV.registerFlag('WEBGPU_USE_LOW_POWER_GPU', () => false);\n/**\n * Threshold for input tensor size that determines whether WebGPU backend will\n * delegate computation to CPU.\n *\n * Default value is 1000.\n */\nENV.registerFlag('WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD', () => 1000);\n/**\n * Whether to use a dummy canvas to make profiling tools like PIX work with\n * TFJS webgpu backend.\n */\nENV.registerFlag('WEBGPU_USE_PROFILE_TOOL', () => false);\n/**\n * Whether to use import API.\n */\nENV.registerFlag('WEBGPU_IMPORT_EXTERNAL_TEXTURE', () => true);\n/**\n * Whether to use conv2dNaive for debugging.\n */\nENV.registerFlag('WEBGPU_USE_NAIVE_CONV2D_DEBUG', () => false);\n/**\n * Threshold to increase dispatched workgroups for matmul. If too few workgroups\n * are dispatched, it means the hardware may be in low occupancy.\n * -1 means it's not set by the user. A default strategy will be applied.\n */\nENV.registerFlag('WEBGPU_THRESHOLD_TO_INCREASE_WORKGROUPS_FOR_MATMUL', () => -1);\n/**\n * Whether we will run im2col as a separate shader for convolution.\n */\nENV.registerFlag('WEBGPU_CONV_SEPARATE_IM2COL_SHADER', () => false);\n/**\n * A string used to match shader key. If any matches, print the related shader.\n * Seperated by comma. 'all' to print all. 'binary' to print binary(add, mul,\n * etc.). 'unary,conv2d' to print both unary and conv2d.\n */\nENV.registerFlag('WEBGPU_PRINT_SHADER', () => '');\n/** Experimental flag, whether enter compile only phase. */\nENV.registerFlag('WEBGPU_ENGINE_COMPILE_ONLY', () => false);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmxhZ3Nfd2ViZ3B1LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMvZmxhZ3Nfd2ViZ3B1LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sRUFBQyxHQUFHLEVBQUMsTUFBTSx1QkFBdUIsQ0FBQztBQUUxQyxNQUFNLEdBQUcsR0FBRyxHQUFHLEVBQUUsQ0FBQztBQUVsQiw4REFBOEQ7QUFDOUQsR0FBRyxDQUFDLFlBQVksQ0FBQyxtQ0FBbUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQztBQUVoRTs7O0dBR0c7QUFDSCxHQUFHLENBQUMsWUFBWSxDQUFDLG9CQUFvQixFQUFFLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDO0FBRW5EOzs7O0dBSUc7QUFDSCxHQUFHLENBQUMsWUFBWSxDQUFDLDRCQUE0QixFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFFekQ7OztHQUdHO0FBQ0gsR0FBRyxDQUFDLFlBQVksQ0FBQyxtQ0FBbUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUVsRTs7O0dBR0c7QUFDSCxHQUFHLENBQUMsWUFBWSxDQUFDLDBCQUEwQixFQUFFLEdBQUcsRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBRTFEOzs7OztHQUtHO0FBQ0gsR0FBRyxDQUFDLFlBQVksQ0FBQyxtQ0FBbUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUVsRTs7O0dBR0c7QUFDSCxHQUFHLENBQUMsWUFBWSxDQUFDLHlCQUF5QixFQUFFLEdBQUcsRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBRXpEOztHQUVHO0FBQ0gsR0FBRyxDQUFDLFlBQVksQ0FBQyxnQ0FBZ0MsRUFBRSxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUUvRDs7R0FFRztBQUNILEdBQUcsQ0FBQyxZQUFZLENBQUMsK0JBQStCLEVBQUUsR0FBRyxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUM7QUFFL0Q7Ozs7R0FJRztBQUNILEdBQUcsQ0FBQyxZQUFZLENBQ1osb0RBQW9ELEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUVwRTs7R0FFRztBQUNILEdBQUcsQ0FBQyxZQUFZLENBQUMsb0NBQW9DLEVBQUUsR0FBRyxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUM7QUFFcEU7Ozs7R0FJRztBQUNILEdBQUcsQ0FBQyxZQUFZLENBQUMscUJBQXFCLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7QUFFbEQsMkRBQTJEO0FBQzNELEdBQUcsQ0FBQyxZQUFZLENBQUMsNEJBQTRCLEVBQUUsR0FBRyxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7ZW52fSBmcm9tICdAdGVuc29yZmxvdy90ZmpzLWNvcmUnO1xuXG5jb25zdCBFTlYgPSBlbnYoKTtcblxuLyoqIFRoZSBiYXRjaGVkIGRpc3BhdGNoaW5nIGNhbGxzIHNpemUgaW4gdGhlIGRldmljZSBxdWV1ZS4gKi9cbkVOVi5yZWdpc3RlckZsYWcoJ1dFQkdQVV9ERUZFUlJFRF9TVUJNSVRfQkFUQ0hfU0laRScsICgpID0+IDE1KTtcblxuLyoqXG4gKiBXaGV0aGVyIHdlIGZvcndhcmQgZXhlY3V0aW9uIHRvIHRoZSBDUFUgYmFja2VuZCBpZiB0ZW5zb3JzIGFyZSBzbWFsbCBhbmRcbiAqIHJlc2lkZSBvbiB0aGUgQ1BVLlxuICovXG5FTlYucmVnaXN0ZXJGbGFnKCdXRUJHUFVfQ1BVX0ZPUldBUkQnLCAoKSA9PiB0cnVlKTtcblxuLyoqXG4gKiBUaGlzIGZsYWcgaXMgdXNlZCB0byB0ZXN0IGRpZmZlcmVudCB0eXBlcyBvZiBtYXRtdWwgcHJvZ3JhbXMuXG4gKlxuICogU2VlIE1hdE11bFByb2dyYW1UeXBlIGluIHdlYmdwdV91dGlsLnRzIGZvciBhIGxpc3Qgb2YgYXZhaWxhYmxlIHZhbHVlcy5cbiAqL1xuRU5WLnJlZ2lzdGVyRmxhZygnV0VCR1BVX01BVE1VTF9QUk9HUkFNX1RZUEUnLCAoKSA9PiAtMSk7XG5cbi8qKlxuICogV2hldGhlciB0byB1c2UgY29udjJkVHJhbnNwb3NlX25haXZlIHdoaWNoIGRpcmVjdGx5IGltcGxlbWVudCB0aGVcbiAqIGNvbnYyZFRyYW5zcG9zZSBsb2dpYyByYXRoZXIgdGhhbiB1c2luZyBhIG1hdG11bCB0byBzaW11bGF0ZS5cbiAqL1xuRU5WLnJlZ2lzdGVyRmxhZygnV0VCR1BVX1VTRV9OQUlWRV9DT05WMkRfVFJBTlNQT1NFJywgKCkgPT4gdHJ1ZSk7XG5cbi8qKlxuICogV2hldGhlciB3ZSB1c2UgbG93IHBvd2VyIEdQVS4gT3RoZXJ3aXNlLCBhIGhpZ2ggcGVyZm9ybWFuY2UgR1BVIHdpbGwgYmVcbiAqIHJlcXVlc3RlZC5cbiAqL1xuRU5WLnJlZ2lzdGVyRmxhZygnV0VCR1BVX1VTRV9MT1dfUE9XRVJfR1BVJywgKCkgPT4gZmFsc2UpO1xuXG4vKipcbiAqIFRocmVzaG9sZCBmb3IgaW5wdXQgdGVuc29yIHNpemUgdGhhdCBkZXRlcm1pbmVzIHdoZXRoZXIgV2ViR1BVIGJhY2tlbmQgd2lsbFxuICogZGVsZWdhdGUgY29tcHV0YXRpb24gdG8gQ1BVLlxuICpcbiAqIERlZmF1bHQgdmFsdWUgaXMgMTAwMC5cbiAqL1xuRU5WLnJlZ2lzdGVyRmxhZygnV0VCR1BVX0NQVV9IQU5ET0ZGX1NJWkVfVEhSRVNIT0xEJywgKCkgPT4gMTAwMCk7XG5cbi8qKlxuICogV2hldGhlciB0byB1c2UgYSBkdW1teSBjYW52YXMgdG8gbWFrZSBwcm9maWxpbmcgdG9vbHMgbGlrZSBQSVggd29yayB3aXRoXG4gKiBURkpTIHdlYmdwdSBiYWNrZW5kLlxuICovXG5FTlYucmVnaXN0ZXJGbGFnKCdXRUJHUFVfVVNFX1BST0ZJTEVfVE9PTCcsICgpID0+IGZhbHNlKTtcblxuLyoqXG4gKiBXaGV0aGVyIHRvIHVzZSBpbXBvcnQgQVBJLlxuICovXG5FTlYucmVnaXN0ZXJGbGFnKCdXRUJHUFVfSU1QT1JUX0VYVEVSTkFMX1RFWFRVUkUnLCAoKSA9PiB0cnVlKTtcblxuLyoqXG4gKiBXaGV0aGVyIHRvIHVzZSBjb252MmROYWl2ZSBmb3IgZGVidWdnaW5nLlxuICovXG5FTlYucmVnaXN0ZXJGbGFnKCdXRUJHUFVfVVNFX05BSVZFX0NPTlYyRF9ERUJVRycsICgpID0+IGZhbHNlKTtcblxuLyoqXG4gKiBUaHJlc2hvbGQgdG8gaW5jcmVhc2UgZGlzcGF0Y2hlZCB3b3JrZ3JvdXBzIGZvciBtYXRtdWwuIElmIHRvbyBmZXcgd29ya2dyb3Vwc1xuICogYXJlIGRpc3BhdGNoZWQsIGl0IG1lYW5zIHRoZSBoYXJkd2FyZSBtYXkgYmUgaW4gbG93IG9jY3VwYW5jeS5cbiAqIC0xIG1lYW5zIGl0J3Mgbm90IHNldCBieSB0aGUgdXNlci4gQSBkZWZhdWx0IHN0cmF0ZWd5IHdpbGwgYmUgYXBwbGllZC5cbiAqL1xuRU5WLnJlZ2lzdGVyRmxhZyhcbiAgICAnV0VCR1BVX1RIUkVTSE9MRF9UT19JTkNSRUFTRV9XT1JLR1JPVVBTX0ZPUl9NQVRNVUwnLCAoKSA9PiAtMSk7XG5cbi8qKlxuICogV2hldGhlciB3ZSB3aWxsIHJ1biBpbTJjb2wgYXMgYSBzZXBhcmF0ZSBzaGFkZXIgZm9yIGNvbnZvbHV0aW9uLlxuICovXG5FTlYucmVnaXN0ZXJGbGFnKCdXRUJHUFVfQ09OVl9TRVBBUkFURV9JTTJDT0xfU0hBREVSJywgKCkgPT4gZmFsc2UpO1xuXG4vKipcbiAqIEEgc3RyaW5nIHVzZWQgdG8gbWF0Y2ggc2hhZGVyIGtleS4gSWYgYW55IG1hdGNoZXMsIHByaW50IHRoZSByZWxhdGVkIHNoYWRlci5cbiAqIFNlcGVyYXRlZCBieSBjb21tYS4gJ2FsbCcgdG8gcHJpbnQgYWxsLiAnYmluYXJ5JyB0byBwcmludCBiaW5hcnkoYWRkLCBtdWwsXG4gKiBldGMuKS4gJ3VuYXJ5LGNvbnYyZCcgdG8gcHJpbnQgYm90aCB1bmFyeSBhbmQgY29udjJkLlxuICovXG5FTlYucmVnaXN0ZXJGbGFnKCdXRUJHUFVfUFJJTlRfU0hBREVSJywgKCkgPT4gJycpO1xuXG4vKiogRXhwZXJpbWVudGFsIGZsYWcsIHdoZXRoZXIgZW50ZXIgY29tcGlsZSBvbmx5IHBoYXNlLiAqL1xuRU5WLnJlZ2lzdGVyRmxhZygnV0VCR1BVX0VOR0lORV9DT01QSUxFX09OTFknLCAoKSA9PiBmYWxzZSk7XG4iXX0=","/**\n * @license\n * Copyright 2022 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nexport class AdapterInfo {\n    constructor(adapterInfo) {\n        if (adapterInfo) {\n            this.vendor = adapterInfo.vendor;\n            this.architecture = adapterInfo.architecture;\n            this.intelGPUGeneration = this.getIntelGPUGeneration();\n        }\n    }\n    getIntelGPUGeneration() {\n        if (this.isIntel()) {\n            if (this.architecture.startsWith('gen')) {\n                return Number(this.architecture.match(/\\d+/));\n            }\n            else if (this.architecture.startsWith('xe')) {\n                return 12;\n            }\n        }\n        return 0;\n    }\n    isIntel() {\n        return this.vendor === 'intel';\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWRhcHRlcl9pbmZvLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMvYWRhcHRlcl9pbmZvLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE1BQU0sT0FBTyxXQUFXO0lBS3RCLFlBQVksV0FBMkI7UUFDckMsSUFBSSxXQUFXLEVBQUU7WUFDZixJQUFJLENBQUMsTUFBTSxHQUFHLFdBQVcsQ0FBQyxNQUFNLENBQUM7WUFDakMsSUFBSSxDQUFDLFlBQVksR0FBRyxXQUFXLENBQUMsWUFBWSxDQUFDO1lBQzdDLElBQUksQ0FBQyxrQkFBa0IsR0FBRyxJQUFJLENBQUMscUJBQXFCLEVBQUUsQ0FBQztTQUN4RDtJQUNILENBQUM7SUFFTyxxQkFBcUI7UUFDM0IsSUFBSSxJQUFJLENBQUMsT0FBTyxFQUFFLEVBQUU7WUFDbEIsSUFBSSxJQUFJLENBQUMsWUFBWSxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsRUFBRTtnQkFDdkMsT0FBTyxNQUFNLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQzthQUMvQztpQkFBTSxJQUFJLElBQUksQ0FBQyxZQUFZLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxFQUFFO2dCQUM3QyxPQUFPLEVBQUUsQ0FBQzthQUNYO1NBQ0Y7UUFDRCxPQUFPLENBQUMsQ0FBQztJQUNYLENBQUM7SUFFRCxPQUFPO1FBQ0wsT0FBTyxJQUFJLENBQUMsTUFBTSxLQUFLLE9BQU8sQ0FBQztJQUNqQyxDQUFDO0NBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmV4cG9ydCBjbGFzcyBBZGFwdGVySW5mbyB7XG4gIHByaXZhdGUgdmVuZG9yOiBzdHJpbmc7XG4gIHByaXZhdGUgYXJjaGl0ZWN0dXJlOiBzdHJpbmc7XG4gIHB1YmxpYyBpbnRlbEdQVUdlbmVyYXRpb246IG51bWJlcjtcblxuICBjb25zdHJ1Y3RvcihhZGFwdGVySW5mbzogR1BVQWRhcHRlckluZm8pIHtcbiAgICBpZiAoYWRhcHRlckluZm8pIHtcbiAgICAgIHRoaXMudmVuZG9yID0gYWRhcHRlckluZm8udmVuZG9yO1xuICAgICAgdGhpcy5hcmNoaXRlY3R1cmUgPSBhZGFwdGVySW5mby5hcmNoaXRlY3R1cmU7XG4gICAgICB0aGlzLmludGVsR1BVR2VuZXJhdGlvbiA9IHRoaXMuZ2V0SW50ZWxHUFVHZW5lcmF0aW9uKCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBnZXRJbnRlbEdQVUdlbmVyYXRpb24oKSB7XG4gICAgaWYgKHRoaXMuaXNJbnRlbCgpKSB7XG4gICAgICBpZiAodGhpcy5hcmNoaXRlY3R1cmUuc3RhcnRzV2l0aCgnZ2VuJykpIHtcbiAgICAgICAgcmV0dXJuIE51bWJlcih0aGlzLmFyY2hpdGVjdHVyZS5tYXRjaCgvXFxkKy8pKTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5hcmNoaXRlY3R1cmUuc3RhcnRzV2l0aCgneGUnKSkge1xuICAgICAgICByZXR1cm4gMTI7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAwO1xuICB9XG5cbiAgaXNJbnRlbCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy52ZW5kb3IgPT09ICdpbnRlbCc7XG4gIH1cbn1cbiJdfQ==","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nexport class BufferManager {\n    constructor(device) {\n        this.device = device;\n        this.numUsedBuffers = 0;\n        this.numFreeBuffers = 0;\n        this.freeBuffers = new Map();\n        this.usedBuffers = new Map();\n        this.numBytesUsed = 0;\n        this.numBytesAllocated = 0;\n    }\n    acquireBuffer(size, usage, mappedAtCreation = false, reuse = true) {\n        let buffer;\n        const key = getBufferKey(size, usage);\n        if (reuse) {\n            if (!this.freeBuffers.has(key)) {\n                this.freeBuffers.set(key, []);\n            }\n            if (this.freeBuffers.get(key).length > 0) {\n                buffer = this.freeBuffers.get(key).pop();\n                this.numFreeBuffers--;\n            }\n            else {\n                buffer = this.device.createBuffer({ size, usage, mappedAtCreation });\n                this.numBytesAllocated += size;\n            }\n        }\n        else {\n            buffer = this.device.createBuffer({ size, usage, mappedAtCreation });\n            this.numBytesAllocated += size;\n        }\n        if (!this.usedBuffers.has(key)) {\n            this.usedBuffers.set(key, []);\n        }\n        this.usedBuffers.get(key).push(buffer);\n        this.numUsedBuffers++;\n        this.numBytesUsed += size;\n        return buffer;\n    }\n    releaseBuffer(buffer, reuse = true) {\n        if (this.freeBuffers.size === 0) {\n            return;\n        }\n        const size = buffer.size;\n        const usage = buffer.usage;\n        const key = getBufferKey(size, usage);\n        const bufferArray = this.usedBuffers.get(key);\n        const index = bufferArray.indexOf(buffer);\n        if (index < 0) {\n            throw new Error('Cannot find the buffer in buffer manager');\n        }\n        bufferArray[index] = bufferArray[bufferArray.length - 1];\n        bufferArray.pop();\n        this.numUsedBuffers--;\n        this.numBytesUsed -= size;\n        if (reuse) {\n            this.freeBuffers.get(key).push(buffer);\n            this.numFreeBuffers++;\n        }\n        else {\n            buffer.destroy();\n            this.numBytesAllocated -= size;\n        }\n    }\n    getNumUsedBuffers() {\n        return this.numUsedBuffers;\n    }\n    getNumFreeBuffers() {\n        return this.numFreeBuffers;\n    }\n    dispose() {\n        this.freeBuffers.forEach((buffers, key) => {\n            buffers.forEach(buffer => {\n                buffer.destroy();\n            });\n        });\n        this.usedBuffers.forEach((buffers, key) => {\n            buffers.forEach(buffer => {\n                buffer.destroy();\n            });\n        });\n        this.freeBuffers = new Map();\n        this.usedBuffers = new Map();\n        this.numUsedBuffers = 0;\n        this.numFreeBuffers = 0;\n        this.numBytesUsed = 0;\n        this.numBytesAllocated = 0;\n    }\n}\nfunction getBufferKey(size, usage) {\n    return `${size}_${usage}`;\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnVmZmVyX21hbmFnZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9idWZmZXJfbWFuYWdlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxNQUFNLE9BQU8sYUFBYTtJQVN4QixZQUFvQixNQUFpQjtRQUFqQixXQUFNLEdBQU4sTUFBTSxDQUFXO1FBUjdCLG1CQUFjLEdBQUcsQ0FBQyxDQUFDO1FBQ25CLG1CQUFjLEdBQUcsQ0FBQyxDQUFDO1FBQ25CLGdCQUFXLEdBQTZCLElBQUksR0FBRyxFQUFFLENBQUM7UUFDbEQsZ0JBQVcsR0FBNkIsSUFBSSxHQUFHLEVBQUUsQ0FBQztRQUVuRCxpQkFBWSxHQUFHLENBQUMsQ0FBQztRQUNqQixzQkFBaUIsR0FBRyxDQUFDLENBQUM7SUFFVyxDQUFDO0lBRXpDLGFBQWEsQ0FDVCxJQUFZLEVBQUUsS0FBMEIsRUFBRSxnQkFBZ0IsR0FBRyxLQUFLLEVBQ2xFLEtBQUssR0FBRyxJQUFJO1FBQ2QsSUFBSSxNQUFNLENBQUM7UUFDWCxNQUFNLEdBQUcsR0FBRyxZQUFZLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQyxDQUFDO1FBRXRDLElBQUksS0FBSyxFQUFFO1lBQ1QsSUFBSSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxFQUFFO2dCQUM5QixJQUFJLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsRUFBRSxDQUFDLENBQUM7YUFDL0I7WUFFRCxJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7Z0JBQ3hDLE1BQU0sR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQztnQkFDekMsSUFBSSxDQUFD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QUFHLEVBQUUsRUFBRTtZQUN4QyxPQUFPLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxFQUFFO2dCQUN2QixNQUFNLENBQUMsT0FBTyxFQUFFLENBQUM7WUFDbkIsQ0FBQyxDQUFDLENBQUM7UUFDTCxDQUFDLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxHQUFHLEVBQUUsQ0FBQztRQUM3QixJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksR0FBRyxFQUFFLENBQUM7UUFDN0IsSUFBSSxDQUFDLGNBQWMsR0FBRyxDQUFDLENBQUM7UUFDeEIsSUFBSSxDQUFDLGNBQWMsR0FBRyxDQUFDLENBQUM7UUFDeEIsSUFBSSxDQUFDLFlBQVksR0FBRyxDQUFDLENBQUM7UUFDdEIsSUFBSSxDQUFDLGlCQUFpQixHQUFHLENBQUMsQ0FBQztJQUM3QixDQUFDO0NBQ0Y7QUFFRCxTQUFTLFlBQVksQ0FBQyxJQUFZLEVBQUUsS0FBMEI7SUFDNUQsT0FBTyxHQUFHLElBQUksSUFBSSxLQUFLLEVBQUUsQ0FBQztBQUM1QixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5leHBvcnQgY2xhc3MgQnVmZmVyTWFuYWdlciB7XG4gIHByaXZhdGUgbnVtVXNlZEJ1ZmZlcnMgPSAwO1xuICBwcml2YXRlIG51bUZyZWVCdWZmZXJzID0gMDtcbiAgcHJpdmF0ZSBmcmVlQnVmZmVyczogTWFwPHN0cmluZywgR1BVQnVmZmVyW10+ID0gbmV3IE1hcCgpO1xuICBwcml2YXRlIHVzZWRCdWZmZXJzOiBNYXA8c3RyaW5nLCBHUFVCdWZmZXJbXT4gPSBuZXcgTWFwKCk7XG5cbiAgcHVibGljIG51bUJ5dGVzVXNlZCA9IDA7XG4gIHB1YmxpYyBudW1CeXRlc0FsbG9jYXRlZCA9IDA7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBkZXZpY2U6IEdQVURldmljZSkge31cblxuICBhY3F1aXJlQnVmZmVyKFxuICAgICAgc2l6ZTogbnVtYmVyLCB1c2FnZTogR1BVQnVmZmVyVXNhZ2VGbGFncywgbWFwcGVkQXRDcmVhdGlvbiA9IGZhbHNlLFxuICAgICAgcmV1c2UgPSB0cnVlKSB7XG4gICAgbGV0IGJ1ZmZlcjtcbiAgICBjb25zdCBrZXkgPSBnZXRCdWZmZXJLZXkoc2l6ZSwgdXNhZ2UpO1xuXG4gICAgaWYgKHJldXNlKSB7XG4gICAgICBpZiAoIXRoaXMuZnJlZUJ1ZmZlcnMuaGFzKGtleSkpIHtcbiAgICAgICAgdGhpcy5mcmVlQnVmZmVycy5zZXQoa2V5LCBbXSk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmZyZWVCdWZmZXJzLmdldChrZXkpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgYnVmZmVyID0gdGhpcy5mcmVlQnVmZmVycy5nZXQoa2V5KS5wb3AoKTtcbiAgICAgICAgdGhpcy5udW1GcmVlQnVmZmVycy0tO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYnVmZmVyID0gdGhpcy5kZXZpY2UuY3JlYXRlQnVmZmVyKHtzaXplLCB1c2FnZSwgbWFwcGVkQXRDcmVhdGlvbn0pO1xuICAgICAgICB0aGlzLm51bUJ5dGVzQWxsb2NhdGVkICs9IHNpemU7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGJ1ZmZlciA9IHRoaXMuZGV2aWNlLmNyZWF0ZUJ1ZmZlcih7c2l6ZSwgdXNhZ2UsIG1hcHBlZEF0Q3JlYXRpb259KTtcbiAgICAgIHRoaXMubnVtQnl0ZXNBbGxvY2F0ZWQgKz0gc2l6ZTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMudXNlZEJ1ZmZlcnMuaGFzKGtleSkpIHtcbiAgICAgIHRoaXMudXNlZEJ1ZmZlcnMuc2V0KGtleSwgW10pO1xuICAgIH1cbiAgICB0aGlzLnVzZWRCdWZmZXJzLmdldChrZXkpLnB1c2goYnVmZmVyKTtcbiAgICB0aGlzLm51bVVzZWRCdWZmZXJzKys7XG4gICAgdGhpcy5udW1CeXRlc1VzZWQgKz0gc2l6ZTtcblxuICAgIHJldHVybiBidWZmZXI7XG4gIH1cblxuICByZWxlYXNlQnVmZmVyKGJ1ZmZlcjogR1BVQnVmZmVyLCByZXVzZSA9IHRydWUpIHtcbiAgICBpZiAodGhpcy5mcmVlQnVmZmVycy5zaXplID09PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qgc2l6ZSA9IGJ1ZmZlci5zaXplO1xuICAgIGNvbnN0IHVzYWdlID0gYnVmZmVyLnVzYWdlO1xuXG4gICAgY29uc3Qga2V5ID0gZ2V0QnVmZmVyS2V5KHNpemUsIHVzYWdlKTtcbiAgICBjb25zdCBidWZmZXJBcnJheSA9IHRoaXMudXNlZEJ1ZmZlcnMuZ2V0KGtleSk7XG4gICAgY29uc3QgaW5kZXggPSBidWZmZXJBcnJheS5pbmRleE9mKGJ1ZmZlcik7XG4gICAgaWYgKGluZGV4IDwgMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgZmluZCB0aGUgYnVmZmVyIGluIGJ1ZmZlciBtYW5hZ2VyJyk7XG4gICAgfVxuICAgIGJ1ZmZlckFycmF5W2luZGV4XSA9IGJ1ZmZlckFycmF5W2J1ZmZlckFycmF5Lmxlbmd0aCAtIDFdO1xuICAgIGJ1ZmZlckFycmF5LnBvcCgpO1xuICAgIHRoaXMubnVtVXNlZEJ1ZmZlcnMtLTtcbiAgICB0aGlzLm51bUJ5dGVzVXNlZCAtPSBzaXplO1xuXG4gICAgaWYgKHJldXNlKSB7XG4gICAgICB0aGlzLmZyZWVCdWZmZXJzLmdldChrZXkpLnB1c2goYnVmZmVyKTtcbiAgICAgIHRoaXMubnVtRnJlZUJ1ZmZlcnMrKztcbiAgICB9IGVsc2Uge1xuICAgICAgYnVmZmVyLmRlc3Ryb3koKTtcbiAgICAgIHRoaXMubnVtQnl0ZXNBbGxvY2F0ZWQgLT0gc2l6ZTtcbiAgICB9XG4gIH1cblxuICBnZXROdW1Vc2VkQnVmZmVycygpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLm51bVVzZWRCdWZmZXJzO1xuICB9XG5cbiAgZ2V0TnVtRnJlZUJ1ZmZlcnMoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5udW1GcmVlQnVmZmVycztcbiAgfVxuXG4gIGRpc3Bvc2UoKSB7XG4gICAgdGhpcy5mcmVlQnVmZmVycy5mb3JFYWNoKChidWZmZXJzLCBrZXkpID0+IHtcbiAgICAgIGJ1ZmZlcnMuZm9yRWFjaChidWZmZXIgPT4ge1xuICAgICAgICBidWZmZXIuZGVzdHJveSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnVzZWRCdWZmZXJzLmZvckVhY2goKGJ1ZmZlcnMsIGtleSkgPT4ge1xuICAgICAgYnVmZmVycy5mb3JFYWNoKGJ1ZmZlciA9PiB7XG4gICAgICAgIGJ1ZmZlci5kZXN0cm95KCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHRoaXMuZnJlZUJ1ZmZlcnMgPSBuZXcgTWFwKCk7XG4gICAgdGhpcy51c2VkQnVmZmVycyA9IG5ldyBNYXAoKTtcbiAgICB0aGlzLm51bVVzZWRCdWZmZXJzID0gMDtcbiAgICB0aGlzLm51bUZyZWVCdWZmZXJzID0gMDtcbiAgICB0aGlzLm51bUJ5dGVzVXNlZCA9IDA7XG4gICAgdGhpcy5udW1CeXRlc0FsbG9jYXRlZCA9IDA7XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0QnVmZmVyS2V5KHNpemU6IG51bWJlciwgdXNhZ2U6IEdQVUJ1ZmZlclVzYWdlRmxhZ3MpIHtcbiAgcmV0dXJuIGAke3NpemV9XyR7dXNhZ2V9YDtcbn1cbiJdfQ==","/**\n * @license\n * Copyright 2022 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nexport class TextureManager {\n    constructor(device) {\n        this.device = device;\n        this.numUsedTextures = 0;\n        this.numFreeTextures = 0;\n        this.freeTextures = new Map();\n        this.usedTextures = new Map();\n        this.numBytesUsed = 0;\n        this.numBytesAllocated = 0;\n    }\n    acquireTexture(width, height, format, usage) {\n        const bytesPerElement = getBytesPerElement(format);\n        const byteSize = width * height * bytesPerElement;\n        const key = getTextureKey(width, height, format, usage);\n        if (!this.freeTextures.has(key)) {\n            this.freeTextures.set(key, []);\n        }\n        if (!this.usedTextures.has(key)) {\n            this.usedTextures.set(key, []);\n        }\n        this.numBytesUsed += byteSize;\n        this.numUsedTextures++;\n        if (this.freeTextures.get(key).length > 0) {\n            this.numFreeTextures--;\n            const newTexture = this.freeTextures.get(key).shift();\n            this.usedTextures.get(key).push(newTexture);\n            return newTexture;\n        }\n        this.numBytesAllocated += byteSize;\n        const newTexture = this.device.createTexture({\n            size: [width, height],\n            format,\n            usage,\n        });\n        this.usedTextures.get(key).push(newTexture);\n        return newTexture;\n    }\n    releaseTexture(texture) {\n        if (this.freeTextures.size === 0) {\n            return;\n        }\n        const width = texture.width;\n        const height = texture.height;\n        const format = texture.format;\n        const usage = texture.usage;\n        const key = getTextureKey(width, height, format, usage);\n        if (!this.freeTextures.has(key)) {\n            this.freeTextures.set(key, []);\n        }\n        this.freeTextures.get(key).push(texture);\n        this.numFreeTextures++;\n        this.numUsedTextures--;\n        const textureList = this.usedTextures.get(key);\n        const textureIndex = textureList.indexOf(texture);\n        if (textureIndex < 0) {\n            throw new Error('Cannot release a texture that was never provided by this ' +\n                'texture manager');\n        }\n        textureList.splice(textureIndex, 1);\n        const bytesPerElement = getBytesPerElement(format);\n        const byteSize = width * height * bytesPerElement;\n        this.numBytesUsed -= byteSize;\n    }\n    getNumUsedTextures() {\n        return this.numUsedTextures;\n    }\n    getNumFreeTextures() {\n        return this.numFreeTextures;\n    }\n    dispose() {\n        this.freeTextures.forEach((textures, key) => {\n            textures.forEach(texture => {\n                texture.destroy();\n            });\n        });\n        this.usedTextures.forEach((textures, key) => {\n            textures.forEach(texture => {\n                texture.destroy();\n            });\n        });\n        this.freeTextures = new Map();\n        this.usedTextures = new Map();\n        this.numUsedTextures = 0;\n        this.numFreeTextures = 0;\n        this.numBytesUsed = 0;\n        this.numBytesAllocated = 0;\n    }\n}\nfunction getTextureKey(width, height, format, usage) {\n    return `${width}_${height}_${format}_${usage}`;\n}\nfunction getBytesPerElement(format) {\n    if (format === 'rgba8unorm') {\n        return 16;\n    }\n    else {\n        throw new Error(`${format} is not supported!`);\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGV4dHVyZV9tYW5hZ2VyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMvdGV4dHVyZV9tYW5hZ2VyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE1BQU0sT0FBTyxjQUFjO0lBU3pCLFlBQW9CLE1BQWlCO1FBQWpCLFdBQU0sR0FBTixNQUFNLENBQVc7UUFSN0Isb0JBQWUsR0FBRyxDQUFDLENBQUM7UUFDcEIsb0JBQWUsR0FBRyxDQUFDLENBQUM7UUFDcEIsaUJBQVksR0FBOEIsSUFBSSxHQUFHLEVBQUUsQ0FBQztRQUNwRCxpQkFBWSxHQUE4QixJQUFJLEdBQUcsRUFBRSxDQUFDO1FBRXJELGlCQUFZLEdBQUcsQ0FBQyxDQUFDO1FBQ2pCLHNCQUFpQixHQUFHLENBQUMsQ0FBQztJQUVXLENBQUM7SUFFekMsY0FBYyxDQUNWLEtBQWEsRUFBRSxNQUFjLEVBQUUsTUFBd0IsRUFDdkQsS0FBMkI7UUFDN0IsTUFBTSxlQUFlLEdBQUcsa0JBQWtCLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDbkQsTUFBTSxRQUFRLEdBQUcsS0FBSyxHQUFHLE1BQU0sR0FBRyxlQUFlLENBQUM7UUFDbEQsTUFBTSxHQUFHLEdBQUcsYUFBYSxDQUFDLEtBQUssRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLEtBQUssQ0FBQyxDQUFDO1FBQ3hELElBQUksQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsRUFBRTtZQUMvQixJQUFJLENBQUMsWUFBWSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsRUFBRSxDQUFDLENBQUM7U0FDaEM7UUFFRCxJQUFJLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEVBQUU7WUFDL0IsSUFBSSxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLEVB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aWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmV4cG9ydCBjbGFzcyBUZXh0dXJlTWFuYWdlciB7XG4gIHByaXZhdGUgbnVtVXNlZFRleHR1cmVzID0gMDtcbiAgcHJpdmF0ZSBudW1GcmVlVGV4dHVyZXMgPSAwO1xuICBwcml2YXRlIGZyZWVUZXh0dXJlczogTWFwPHN0cmluZywgR1BVVGV4dHVyZVtdPiA9IG5ldyBNYXAoKTtcbiAgcHJpdmF0ZSB1c2VkVGV4dHVyZXM6IE1hcDxzdHJpbmcsIEdQVVRleHR1cmVbXT4gPSBuZXcgTWFwKCk7XG5cbiAgcHVibGljIG51bUJ5dGVzVXNlZCA9IDA7XG4gIHB1YmxpYyBudW1CeXRlc0FsbG9jYXRlZCA9IDA7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBkZXZpY2U6IEdQVURldmljZSkge31cblxuICBhY3F1aXJlVGV4dHVyZShcbiAgICAgIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyLCBmb3JtYXQ6IEdQVVRleHR1cmVGb3JtYXQsXG4gICAgICB1c2FnZTogR1BVVGV4dHVyZVVzYWdlRmxhZ3MpIHtcbiAgICBjb25zdCBieXRlc1BlckVsZW1lbnQgPSBnZXRCeXRlc1BlckVsZW1lbnQoZm9ybWF0KTtcbiAgICBjb25zdCBieXRlU2l6ZSA9IHdpZHRoICogaGVpZ2h0ICogYnl0ZXNQZXJFbGVtZW50O1xuICAgIGNvbnN0IGtleSA9IGdldFRleHR1cmVLZXkod2lkdGgsIGhlaWdodCwgZm9ybWF0LCB1c2FnZSk7XG4gICAgaWYgKCF0aGlzLmZyZWVUZXh0dXJlcy5oYXMoa2V5KSkge1xuICAgICAgdGhpcy5mcmVlVGV4dHVyZXMuc2V0KGtleSwgW10pO1xuICAgIH1cblxuICAgIGlmICghdGhpcy51c2VkVGV4dHVyZXMuaGFzKGtleSkpIHtcbiAgICAgIHRoaXMudXNlZFRleHR1cmVzLnNldChrZXksIFtdKTtcbiAgICB9XG5cbiAgICB0aGlzLm51bUJ5dGVzVXNlZCArPSBieXRlU2l6ZTtcbiAgICB0aGlzLm51bVVzZWRUZXh0dXJlcysrO1xuXG4gICAgaWYgKHRoaXMuZnJlZVRleHR1cmVzLmdldChrZXkpLmxlbmd0aCA+IDApIHtcbiAgICAgIHRoaXMubnVtRnJlZVRleHR1cmVzLS07XG5cbiAgICAgIGNvbnN0IG5ld1RleHR1cmUgPSB0aGlzLmZyZWVUZXh0dXJlcy5nZXQoa2V5KS5zaGlmdCgpO1xuICAgICAgdGhpcy51c2VkVGV4dHVyZXMuZ2V0KGtleSkucHVzaChuZXdUZXh0dXJlKTtcbiAgICAgIHJldHVybiBuZXdUZXh0dXJlO1xuICAgIH1cblxuICAgIHRoaXMubnVtQnl0ZXNBbGxvY2F0ZWQgKz0gYnl0ZVNpemU7XG5cbiAgICBjb25zdCBuZXdUZXh0dXJlID0gdGhpcy5kZXZpY2UuY3JlYXRlVGV4dHVyZSh7XG4gICAgICBzaXplOiBbd2lkdGgsIGhlaWdodF0sXG4gICAgICBmb3JtYXQsXG4gICAgICB1c2FnZSxcbiAgICB9KTtcbiAgICB0aGlzLnVzZWRUZXh0dXJlcy5nZXQoa2V5KS5wdXNoKG5ld1RleHR1cmUpO1xuXG4gICAgcmV0dXJuIG5ld1RleHR1cmU7XG4gIH1cblxuICByZWxlYXNlVGV4dHVyZSh0ZXh0dXJlOiBHUFVUZXh0dXJlKSB7XG4gICAgaWYgKHRoaXMuZnJlZVRleHR1cmVzLnNpemUgPT09IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB3aWR0aCA9IHRleHR1cmUud2lkdGg7XG4gICAgY29uc3QgaGVpZ2h0ID0gdGV4dHVyZS5oZWlnaHQ7XG4gICAgY29uc3QgZm9ybWF0ID0gdGV4dHVyZS5mb3JtYXQ7XG4gICAgY29uc3QgdXNhZ2UgPSB0ZXh0dXJlLnVzYWdlO1xuXG4gICAgY29uc3Qga2V5ID0gZ2V0VGV4dHVyZUtleSh3aWR0aCwgaGVpZ2h0LCBmb3JtYXQsIHVzYWdlKTtcbiAgICBpZiAoIXRoaXMuZnJlZVRleHR1cmVzLmhhcyhrZXkpKSB7XG4gICAgICB0aGlzLmZyZWVUZXh0dXJlcy5zZXQoa2V5LCBbXSk7XG4gICAgfVxuXG4gICAgdGhpcy5mcmVlVGV4dHVyZXMuZ2V0KGtleSkucHVzaCh0ZXh0dXJlKTtcbiAgICB0aGlzLm51bUZyZWVUZXh0dXJlcysrO1xuICAgIHRoaXMubnVtVXNlZFRleHR1cmVzLS07XG5cbiAgICBjb25zdCB0ZXh0dXJlTGlzdCA9IHRoaXMudXNlZFRleHR1cmVzLmdldChrZXkpO1xuICAgIGNvbnN0IHRleHR1cmVJbmRleCA9IHRleHR1cmVMaXN0LmluZGV4T2YodGV4dHVyZSk7XG4gICAgaWYgKHRleHR1cmVJbmRleCA8IDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAnQ2Fubm90IHJlbGVhc2UgYSB0ZXh0dXJlIHRoYXQgd2FzIG5ldmVyIHByb3ZpZGVkIGJ5IHRoaXMgJyArXG4gICAgICAgICAgJ3RleHR1cmUgbWFuYWdlcicpO1xuICAgIH1cbiAgICB0ZXh0dXJlTGlzdC5zcGxpY2UodGV4dHVyZUluZGV4LCAxKTtcbiAgICBjb25zdCBieXRlc1BlckVsZW1lbnQgPSBnZXRCeXRlc1BlckVsZW1lbnQoZm9ybWF0KTtcbiAgICBjb25zdCBieXRlU2l6ZSA9IHdpZHRoICogaGVpZ2h0ICogYnl0ZXNQZXJFbGVtZW50O1xuICAgIHRoaXMubnVtQnl0ZXNVc2VkIC09IGJ5dGVTaXplO1xuICB9XG5cbiAgZ2V0TnVtVXNlZFRleHR1cmVzKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMubnVtVXNlZFRleHR1cmVzO1xuICB9XG5cbiAgZ2V0TnVtRnJlZVRleHR1cmVzKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMubnVtRnJlZVRleHR1cmVzO1xuICB9XG5cbiAgZGlzcG9zZSgpIHtcbiAgICB0aGlzLmZyZWVUZXh0dXJlcy5mb3JFYWNoKCh0ZXh0dXJlcywga2V5KSA9PiB7XG4gICAgICB0ZXh0dXJlcy5mb3JFYWNoKHRleHR1cmUgPT4ge1xuICAgICAgICB0ZXh0dXJlLmRlc3Ryb3koKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgdGhpcy51c2VkVGV4dHVyZXMuZm9yRWFjaCgodGV4dHVyZXMsIGtleSkgPT4ge1xuICAgICAgdGV4dHVyZXMuZm9yRWFjaCh0ZXh0dXJlID0+IHtcbiAgICAgICAgdGV4dHVyZS5kZXN0cm95KCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHRoaXMuZnJlZVRleHR1cmVzID0gbmV3IE1hcCgpO1xuICAgIHRoaXMudXNlZFRleHR1cmVzID0gbmV3IE1hcCgpO1xuICAgIHRoaXMubnVtVXNlZFRleHR1cmVzID0gMDtcbiAgICB0aGlzLm51bUZyZWVUZXh0dXJlcyA9IDA7XG4gICAgdGhpcy5udW1CeXRlc1VzZWQgPSAwO1xuICAgIHRoaXMubnVtQnl0ZXNBbGxvY2F0ZWQgPSAwO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdldFRleHR1cmVLZXkoXG4gICAgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIsIGZvcm1hdDogR1BVVGV4dHVyZUZvcm1hdCxcbiAgICB1c2FnZTogR1BVVGV4dHVyZVVzYWdlRmxhZ3MpIHtcbiAgcmV0dXJuIGAke3dpZHRofV8ke2hlaWdodH1fJHtmb3JtYXR9XyR7dXNhZ2V9YDtcbn1cblxuZnVuY3Rpb24gZ2V0Qnl0ZXNQZXJFbGVtZW50KGZvcm1hdDogR1BVVGV4dHVyZUZvcm1hdCkge1xuICBpZiAoZm9ybWF0ID09PSAncmdiYTh1bm9ybScpIHtcbiAgICByZXR1cm4gMTY7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGAke2Zvcm1hdH0gaXMgbm90IHN1cHBvcnRlZCFgKTtcbiAgfVxufVxuIl19","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n// Generates WGSL that computes strides.\nexport function symbolicallyComputeStrides(indicesArr, variableName) {\n    if (Math.max(...indicesArr) > 5) {\n        throw new Error('Cannot symbolically compute strides for rank > 6 tensor.');\n    }\n    const numCoords = indicesArr.length;\n    const indicesStr = 'xyzwuv';\n    const shape = indicesArr.map(d => `${variableName}.${indicesStr[d]}`);\n    const strides = new Array(numCoords - 1);\n    strides[numCoords - 2] = shape[numCoords - 1];\n    for (let i = numCoords - 3; i >= 0; --i) {\n        strides[i] = `(${strides[i + 1]} * ${shape[i + 1]})`;\n    }\n    return strides;\n}\nexport const atomicAddSnippet = (ptr, v, type) => {\n    if (type === 'int32') {\n        return `atomicAdd(${ptr}, bitcast<i32>(${v}));`;\n    }\n    else {\n        // atomicAdd only supports uint/int type. For float, we use\n        // atomicCompareExchangeWeak to simulate.\n        return `\n          {\n            var oldValue = 0;\n            loop {\n              let newValueF32 = bitcast<f32>(oldValue) + (${v});\n              let newValue = bitcast<i32>(newValueF32);\n              let res = atomicCompareExchangeWeak(${ptr}, oldValue, newValue);\n              if res.exchanged {\n                break;\n              }\n              oldValue = res.old_value;\n            }\n          }`;\n    }\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2hhZGVyX3V0aWwuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9zaGFkZXJfdXRpbC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCx3Q0FBd0M7QUFDeEMsTUFBTSxVQUFVLDBCQUEwQixDQUN0QyxVQUFvQixFQUFFLFlBQW9CO0lBQzVDLElBQUksSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLFVBQVUsQ0FBQyxHQUFHLENBQUMsRUFBRTtRQUMvQixNQUFNLElBQUksS0FBSyxDQUFDLDBEQUEwRCxDQUFDLENBQUM7S0FDN0U7SUFFRCxNQUFNLFNBQVMsR0FBRyxVQUFVLENBQUMsTUFBTSxDQUFDO0lBQ3BDLE1BQU0sVUFBVSxHQUFHLFFBQVEsQ0FBQztJQUM1QixNQUFNLEtBQUssR0FBRyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxZQUFZLElBQUksVUFBVSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUN0RSxNQUFNLE9BQU8sR0FBRyxJQUFJLEtBQUssQ0FBQyxTQUFTLEdBQUcsQ0FBQyxDQUFDLENBQUM7SUFDekMsT0FBTyxDQUFDLFNBQVMsR0FBRyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsU0FBUyxHQUFHLENBQUMsQ0FBQyxDQUFDO0lBQzlDLEtBQUssSUFBSSxDQUFDLEdBQUcsU0FBUyxHQUFHLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFO1FBQ3ZDLE9BQU8sQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLE9BQU8sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sS0FBSyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDO0tBQ3REO0lBRUQsT0FBTyxPQUFPLENBQUM7QUFDakIsQ0FBQztBQUVELE1BQU0sQ0FBQyxNQUFNLGdCQUFnQixHQUN6QixDQUFDLEdBQVcsRUFBRSxDQUFTLEVBQUUsSUFBdUIsRUFBRSxFQUFFO0lBQ2xELElBQUksSUFBSSxLQUFLLE9BQU8sRUFBRTtRQUNwQixPQUFPLGFBQWEsR0FBRyxrQkFBa0IsQ0FBQyxLQUFLLENBQUM7S0FDakQ7U0FBTTtRQUNMLDJEQUEyRDtRQUMzRCx5Q0FBeUM7UUFDekMsT0FBTzs7Ozs0REFJNkMsQ0FBQzs7b0RBRVQsR0FBRzs7Ozs7O1lBTTNDLENBQUM7S0FDTjtBQUNILENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuLy8gR2VuZXJhdGVzIFdHU0wgdGhhdCBjb21wdXRlcyBzdHJpZGVzLlxuZXhwb3J0IGZ1bmN0aW9uIHN5bWJvbGljYWxseUNvbXB1dGVTdHJpZGVzKFxuICAgIGluZGljZXNBcnI6IG51bWJlcltdLCB2YXJpYWJsZU5hbWU6IHN0cmluZyk6IHN0cmluZ1tdIHtcbiAgaWYgKE1hdGgubWF4KC4uLmluZGljZXNBcnIpID4gNSkge1xuICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IHN5bWJvbGljYWxseSBjb21wdXRlIHN0cmlkZXMgZm9yIHJhbmsgPiA2IHRlbnNvci4nKTtcbiAgfVxuXG4gIGNvbnN0IG51bUNvb3JkcyA9IGluZGljZXNBcnIubGVuZ3RoO1xuICBjb25zdCBpbmRpY2VzU3RyID0gJ3h5end1dic7XG4gIGNvbnN0IHNoYXBlID0gaW5kaWNlc0Fyci5tYXAoZCA9PiBgJHt2YXJpYWJsZU5hbWV9LiR7aW5kaWNlc1N0cltkXX1gKTtcbiAgY29uc3Qgc3RyaWRlcyA9IG5ldyBBcnJheShudW1Db29yZHMgLSAxKTtcbiAgc3RyaWRlc1tudW1Db29yZHMgLSAyXSA9IHNoYXBlW251bUNvb3JkcyAtIDFdO1xuICBmb3IgKGxldCBpID0gbnVtQ29vcmRzIC0gMzsgaSA+PSAwOyAtLWkpIHtcbiAgICBzdHJpZGVzW2ldID0gYCgke3N0cmlkZXNbaSArIDFdfSAqICR7c2hhcGVbaSArIDFdfSlgO1xuICB9XG5cbiAgcmV0dXJuIHN0cmlkZXM7XG59XG5cbmV4cG9ydCBjb25zdCBhdG9taWNBZGRTbmlwcGV0ID1cbiAgICAocHRyOiBzdHJpbmcsIHY6IHN0cmluZywgdHlwZTogJ2ludDMyJ3wnZmxvYXQzMicpID0+IHtcbiAgICAgIGlmICh0eXBlID09PSAnaW50MzInKSB7XG4gICAgICAgIHJldHVybiBgYXRvbWljQWRkKCR7cHRyfSwgYml0Y2FzdDxpMzI+KCR7dn0pKTtgO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gYXRvbWljQWRkIG9ubHkgc3VwcG9ydHMgdWludC9pbnQgdHlwZS4gRm9yIGZsb2F0LCB3ZSB1c2VcbiAgICAgICAgLy8gYXRvbWljQ29tcGFyZUV4Y2hhbmdlV2VhayB0byBzaW11bGF0ZS5cbiAgICAgICAgcmV0dXJuIGBcbiAgICAgICAgICB7XG4gICAgICAgICAgICB2YXIgb2xkVmFsdWUgPSAwO1xuICAgICAgICAgICAgbG9vcCB7XG4gICAgICAgICAgICAgIGxldCBuZXdWYWx1ZUYzMiA9IGJpdGNhc3Q8ZjMyPihvbGRWYWx1ZSkgKyAoJHt2fSk7XG4gICAgICAgICAgICAgIGxldCBuZXdWYWx1ZSA9IGJpdGNhc3Q8aTMyPihuZXdWYWx1ZUYzMik7XG4gICAgICAgICAgICAgIGxldCByZXMgPSBhdG9taWNDb21wYXJlRXhjaGFuZ2VXZWFrKCR7cHRyfSwgb2xkVmFsdWUsIG5ld1ZhbHVlKTtcbiAgICAgICAgICAgICAgaWYgcmVzLmV4Y2hhbmdlZCB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgb2xkVmFsdWUgPSByZXMub2xkX3ZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1gO1xuICAgICAgfVxuICAgIH07XG4iXX0=","/**\n * @license\n * Copyright 2022 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { backend_util, env, util } from '@tensorflow/tfjs-core';\nimport { symbolicallyComputeStrides } from './shader_util';\nexport var PixelsOpType;\n(function (PixelsOpType) {\n    PixelsOpType[PixelsOpType[\"FROM_PIXELS\"] = 0] = \"FROM_PIXELS\";\n    PixelsOpType[PixelsOpType[\"DRAW\"] = 1] = \"DRAW\";\n})(PixelsOpType || (PixelsOpType = {}));\nexport const compileProgram = (device, program, inputsData, output, parallelCompilation) => {\n    const outputData = { dtype: output.dtype, shape: output.shape };\n    const source = makeShader(inputsData, outputData, program);\n    const module = device.createShaderModule({ code: source, label: program.constructor.name });\n    let printShaderString = env().get('WEBGPU_PRINT_SHADER');\n    if (printShaderString !== '') {\n        printShaderString = printShaderString.toLowerCase();\n        const printShaderArray = printShaderString.split(',');\n        if (printShaderString === 'all' ||\n            printShaderArray.some(item => program.shaderKey.toLowerCase().includes(item))) {\n            console.group(program.shaderKey);\n            console.debug(source);\n            console.groupEnd();\n        }\n    }\n    if (parallelCompilation) {\n        return device.createComputePipelineAsync({\n            compute: { module, entryPoint: '_start' },\n            label: program.constructor.name,\n            layout: 'auto'\n        });\n    }\n    else {\n        return device.createComputePipeline({\n            compute: { module, entryPoint: '_start' },\n            label: program.constructor.name,\n            layout: 'auto'\n        });\n    }\n};\nexport const typeSnippet = (component, type = 'f32') => {\n    switch (component) {\n        case 1:\n            return `${type}`;\n        case 2:\n            return `vec2<${type}>`;\n        case 3:\n            return `vec3<${type}>`;\n        case 4:\n            return `vec4<${type}>`;\n        default:\n            throw new Error(`${component}-component ${type} is not supported.`);\n    }\n};\nexport function getCoordsDataType(rank) {\n    if (rank <= 1) {\n        return 'i32';\n    }\n    else if (rank === 2) {\n        return `vec2<i32>`;\n    }\n    else if (rank === 3) {\n        return `vec3<i32>`;\n    }\n    else if (rank === 4) {\n        return `vec4<i32>`;\n    }\n    else if (rank === 5) {\n        return `vec5`;\n    }\n    else if (rank === 6) {\n        return `vec6`;\n    }\n    else {\n        throw Error(`GPU for rank ${rank} is not yet supported`);\n    }\n}\nexport function getCoordsXYZ(index) {\n    if (index === 0) {\n        return 'x';\n    }\n    else if (index === 1) {\n        return 'y';\n    }\n    else if (index === 2) {\n        return 'z';\n    }\n    else if (index === 3) {\n        return 'w';\n    }\n    else if (index === 4) {\n        return 'u';\n    }\n    else if (index === 5) {\n        return 'v';\n    }\n    else {\n        throw Error(`Index ${index} is not yet supported`);\n    }\n}\nexport function getMainHeaderString(...params) {\n    let snippet;\n    switch (params.length) {\n        case 0:\n            snippet = `\n        fn main()\n      `;\n            break;\n        case 1:\n            snippet = `\n        fn main(${params[0]} : i32)\n      `;\n            break;\n        default:\n            throw Error('Unreachable');\n    }\n    return snippet;\n}\nexport function getStartHeaderString(useGlobalIndex, program) {\n    let snippet;\n    snippet = `\n     ${getWorkgroupSizeString(program)}\n      fn _start(@builtin(local_invocation_id) LocalId : vec3<u32>,\n                @builtin(global_invocation_id) GlobalId : vec3<u32>,\n                @builtin(local_invocation_index) LocalIndex: u32,\n                @builtin(workgroup_id) WorkgroupId : vec3<u32>,\n                @builtin(num_workgroups) NumWorkgroups : vec3<u32>) {\n        localId = LocalId;\n        localIndex = LocalIndex;\n        globalId = GlobalId;\n        numWorkgroups = NumWorkgroups;\n        workgroupId = WorkgroupId;\n        ${useGlobalIndex ? `main(getGlobalIndex());` : `main();`};\n      }\n    `;\n    return snippet;\n}\nexport function getWorkgroupSizeString(program) {\n    return `\n  @compute @workgroup_size(${program.workgroupSize[0]}, ${program.workgroupSize[1]}, ${program.workgroupSize[2]})\n`;\n}\nfunction makeShader(inputInfo, outputData, program) {\n    const prefixSnippets = [];\n    const flatWorkgroupSize = program.workgroupSize[0] *\n        program.workgroupSize[1] * program.workgroupSize[2];\n    program.outputComponent =\n        program.outputComponent ? program.outputComponent : 1;\n    prefixSnippets.push(`\n\n      var<private> localId: vec3<u32>;\n      var<private> localIndex: u32;\n      var<private> globalId: vec3<u32>;\n      var<private> numWorkgroups: vec3<u32>;\n      var<private> workgroupId: vec3<u32>;\n\n      // Only used when the y/z dimension of workgroup size is 1.\n      fn getGlobalIndex() -> i32 {\n        ${isFlatDispatch(program) ?\n        `  return i32(globalId.x);` :\n        `  return i32((workgroupId.z * numWorkgroups.x * numWorkgroups.y +\n                workgroupId.y * numWorkgroups.x + workgroupId.x) * ${flatWorkgroupSize}u +\n                localIndex);\n        `}\n      }\n    `);\n    if (program.pixelsOpType != null) {\n        const inoutSnippet = program.pixelsOpType === PixelsOpType.FROM_PIXELS ?\n            `@group(0) @binding(0) var<storage, read_write> result: array<${dataTypeToGPUType(outputData.dtype, program.outputComponent)}>;` :\n            `@group(0) @binding(1) var<storage, read> inBuf : array<${dataTypeToGPUType(inputInfo[0].dtype, program.outputComponent)}>;`;\n        const outShapeStridesType = outputData.shape.length === 3 ? 'vec2<i32>' : 'i32';\n        prefixSnippets.push(`\n        struct Uniform {\n          outShapeStrides : ${outShapeStridesType},\n          size            : i32,\n          numChannels     : i32,\n          alpha           : f32,\n        };\n\n        ${inoutSnippet}\n        @group(0) @binding(2) var<uniform> uniforms: Uniform;\n      `);\n        const useGlobalIndex = isFlatDispatchLayout(program);\n        return [\n            commonSnippet,\n            prefixSnippets.join('\\n'),\n            getCoordsFromIndexSnippet(outputData.shape),\n            program.getUserCode(),\n            getStartHeaderString(useGlobalIndex, program),\n        ].join('\\n');\n    }\n    let stridesLength;\n    let stridesDataType;\n    let uniformDeclaration = 'struct Uniforms { NAN : f32, INFINITY : f32, ';\n    program.variableNames.forEach((x, i) => {\n        const perDataType = getCoordsDataType(inputInfo[i].shape.length);\n        uniformDeclaration +=\n            `${x.charAt(0).toLowerCase() + x.slice(1)}Shape : ${perDataType}, `;\n        stridesLength = inputInfo[i].shape.length - 1;\n        stridesDataType = getCoordsDataType(stridesLength);\n        uniformDeclaration +=\n            `${x.charAt(0).toLowerCase() + x.slice(1)}ShapeStrides: ${stridesDataType}, `;\n    });\n    const outputDataType = getCoordsDataType(outputData.shape.length);\n    uniformDeclaration += `outShape : ${outputDataType}, `;\n    stridesLength = outputData.shape.length - 1;\n    stridesDataType = getCoordsDataType(stridesLength);\n    uniformDeclaration += `\n         outShapeStrides: ${stridesDataType}, `;\n    if (program.size) {\n        uniformDeclaration += 'size : i32, ';\n    }\n    if (program.uniforms) {\n        uniformDeclaration += program.uniforms;\n    }\n    uniformDeclaration += '};';\n    uniformDeclaration = insertAlignment(uniformDeclaration);\n    prefixSnippets.push(uniformDeclaration);\n    // Output buffer.\n    if (program.atomic) {\n        prefixSnippets.push(`\n      @group(0) @binding(0) var<storage, read_write> result: array<atomic<i32>>;\n    `);\n    }\n    else {\n        prefixSnippets.push(`\n      @group(0) @binding(0) var<storage, read_write> result: array<${dataTypeToGPUType(outputData.dtype, program.outputComponent)}>;\n    `);\n    }\n    program.variableNames.forEach((x, i) => {\n        prefixSnippets.push(`\n      @group(0) @binding(${1 + i}) var<storage, read> ${x}: array<${program.variableComponents ?\n            dataTypeToGPUType(inputInfo[i].dtype, program.variableComponents[i]) :\n            dataTypeToGPUType(inputInfo[i].dtype, program.outputComponent)}>;\n        `);\n    });\n    if (uniformDeclaration !== '') {\n        prefixSnippets.push(`\n      @group(0) @binding(${1 + program.variableNames.length}) var<uniform> uniforms: Uniforms;\n      `);\n    }\n    const coordsSnippet = getOutputCoordsSnippet(outputData.shape, program.dispatchLayout);\n    const sources = [\n        commonSnippet, prefixSnippets.join('\\n') + isInfSnippet,\n        getCoordsFromIndexSnippet(outputData.shape), coordsSnippet,\n        getOutputIndexFromCoordsSnippet(outputData.shape.length)\n    ];\n    if (!program.atomic) {\n        sources.push(setOutputSnippet(outputData.shape, outputData.dtype, program.outputComponent));\n    }\n    program.variableNames.forEach((x, i) => {\n        sources.push(`${getCoordsFromIndexSnippet(inputInfo[i].shape, x)}`);\n    });\n    const inputSnippet = inputInfo\n        .map((x, i) => getInputSnippet(x, outputData.shape, program.variableComponents ? program.variableComponents[i] :\n        program.outputComponent, program.dispatchLayout.x.length === outputData.shape.length))\n        .join('\\n');\n    sources.push(inputSnippet);\n    sources.push(program.getUserCode());\n    const useGlobalIndex = isFlatDispatchLayout(program);\n    sources.push(getStartHeaderString(useGlobalIndex, program));\n    const source = sources.join('\\n');\n    return source;\n}\nexport function makeShaderKey(program, inputsData, output) {\n    let key = program.shaderKey;\n    if (program.pixelsOpType != null) {\n        return key;\n    }\n    const shapes = [];\n    const types = [];\n    inputsData.forEach(element => {\n        shapes.push(element.shape);\n        types.push(element.dtype);\n    });\n    shapes.push(output.shape);\n    types.push(output.dtype);\n    const broadcastDims = inputsData.map(d => backend_util.getBroadcastDims(d.shape, output.shape));\n    const inputShapesEqualsOutShape = inputsData.map(d => util.arraysEqual(d.shape, output.shape)).join('_');\n    const broadcastDimsKey = broadcastDims.map(d => d.join('_')).join(';');\n    const flatDispatchString = isFlatDispatch(program) ? 'flatDispatch' : '';\n    key += '_' + (program.workgroupSize ? program.workgroupSize.join(',') : '') +\n        shapes.map(shape => shape.length).join(',') + types.join(',') +\n        program.variableNames.join(',') + broadcastDimsKey +\n        inputShapesEqualsOutShape + flatDispatchString;\n    return key;\n}\nconst commonSnippet = `\n  struct vec5 {x: i32, y: i32, z: i32, w: i32, u: i32};\n  struct vec6 {x: i32, y: i32, z: i32, w: i32, u: i32, v: i32};\n\n  // Checks whether coordinates lie within the bounds of the shape.\n  fn coordsInBounds2D(coord : vec2<i32>, shape : vec2<i32>) -> bool {\n    return all(coord >= vec2<i32>(0)) && all(coord < shape);\n  }\n  fn coordsInBounds3D(coord : vec3<i32>, shape : vec3<i32>) -> bool {\n    return all(coord >= vec3<i32>(0)) && all(coord < shape);\n  }\n  fn coordsInBounds4D(coord : vec4<i32>, shape : vec4<i32>) -> bool {\n    return all(coord >= vec4<i32>(0)) && all(coord < shape);\n  }\n\n  fn getIndexFromCoords1D(coord : i32, shape : i32) -> i32 {\n    return coord;\n  }\n  fn getIndexFromCoords2D(coords : vec2<i32>, shape : vec2<i32>) -> i32 {\n    return dot(coords, vec2<i32>(shape.y, 1));\n  }\n  fn getIndexFromCoords3D(coords : vec3<i32>, shape : vec3<i32>) -> i32 {\n    return dot(coords, vec3<i32>(shape.y * shape.z, shape.z, 1));\n  }\n  fn getIndexFromCoords4D(coords : vec4<i32>, shape : vec4<i32>) -> i32 {\n    return dot(coords, vec4<i32>(\n        shape.y * shape.z * shape.w, shape.z * shape.w, shape.w, 1));\n  }\n  fn getIndexFromCoords5D(coords : vec5, shape : vec5) -> i32 {\n    let shapeStrides: vec5 = vec5(shape.y * shape.z * shape.w * shape.u, shape.z * shape.w * shape.u, shape.w * shape.u, shape.u, 1);\n    return coords.x*shapeStrides.x + coords.y*shapeStrides.y + coords.z*shapeStrides.z + coords.w*shapeStrides.w + coords.u*shapeStrides.u;\n  }\n  fn getIndexFromCoords6D(coords : vec6, shape : vec6) -> i32 {\n    let shapeStrides: vec6 = vec6(shape.y * shape.z * shape.w * shape.u * shape.v, shape.z * shape.w * shape.u * shape.v, shape.w * shape.u * shape.v, shape.u * shape.v, shape.v, 1);\n    return coords.x*shapeStrides.x + coords.y*shapeStrides.y + coords.z*shapeStrides.z + coords.w*shapeStrides.w + coords.u*shapeStrides.u + coords.v*shapeStrides.v;\n  }\n\n  // NaN defination in IEEE 754-1985 is :\n  //   - sign = either 0 or 1.\n  //   - biased exponent = all 1 bits.\n  //   - fraction = anything except all 0 bits (since all 0 bits represents infinity).\n  // https://en.wikipedia.org/wiki/IEEE_754-1985#Representation_of_non-numbers\n  fn isnan(val: f32) -> bool {\n    let floatToUint: u32 = bitcast<u32>(val);\n    return (floatToUint & 0x7fffffffu) > 0x7f800000u;\n  }\n  fn isnanVec4(val : vec4<f32>) -> vec4<bool> {\n    let floatToUint: vec4<u32> = bitcast<vec4<u32>>(val);\n    return (floatToUint & vec4<u32>(0x7fffffffu)) > vec4<u32>(0x7f800000u);\n  }\n`;\nconst isInfSnippet = `\n  fn isinf(val: f32) -> bool {\n    return abs(val) == uniforms.INFINITY;\n  }\n`;\n/**\n * Derives logical coordinates from a flat index. Performs integer division\n * with each stride and decrements the index until the index equals the final\n * dimension coordinate.\n */\nexport function getCoordsFromIndexSnippet(shape, name = '') {\n    const rank = shape.length;\n    const funcName = name !== '' ?\n        `get${name.charAt(0).toUpperCase() + name.slice(1)}CoordsFromIndex` :\n        'getCoordsFromIndex';\n    const stridesName = name !== '' ?\n        `${name.charAt(0).toLowerCase() + name.slice(1)}ShapeStrides` :\n        `outShapeStrides`;\n    if (rank <= 1) {\n        return `fn ${funcName}(index : i32) -> i32 { return index; }`;\n    }\n    const strides = util.computeStrides(shape);\n    const dtype = getCoordsDataType(rank);\n    const coords = [];\n    for (let i = 0; i < rank; i++) {\n        coords.push(`d${i}`);\n    }\n    if (strides.length === 1) {\n        return `    fn ${funcName}(index : i32) -> vec2<i32> {\n      let d0 = index / uniforms.${stridesName}; let d1 = index - d0 * uniforms.${stridesName};\n      return vec2<i32>(d0, d1);\n    }`;\n    }\n    let snippet;\n    snippet = 'var index2 = index;' +\n        strides\n            .map((_, i) => {\n            const line1 = `let ${coords[i]} = index2 / uniforms.${stridesName}.${getCoordsXYZ(i)}`;\n            const line2 = i === strides.length - 1 ?\n                `let ${coords[i + 1]} = index2 - ${coords[i]} * uniforms.${stridesName}.${getCoordsXYZ(i)}` :\n                `index2 = index2 - ${coords[i]} * uniforms.${stridesName}.${getCoordsXYZ(i)}`;\n            return `${line1}; ${line2};`;\n        })\n            .join('');\n    return `\n    fn ${funcName}(index : i32) -> ${dtype} {\n      ${snippet}\n      return ${dtype}(${coords.join(',')});\n    }\n  `;\n}\nfunction getInputAtCoordsSnippet(inputInfo, component) {\n    const texName = inputInfo.name;\n    const rank = inputInfo.shape.length;\n    const type = getCoordsDataType(rank);\n    const funcName = 'get' + texName.charAt(0).toUpperCase() + texName.slice(1);\n    const dims = ['d0', 'd1', 'd2', 'd3', 'd4', 'd5'].slice(0, rank);\n    const inputs = dims.map(d => `${d} : i32`).join(', ');\n    if (rank < 1) {\n        return `\n      fn ${funcName}() -> ${typeSnippet(component)} {\n        return ${typeSnippet(component)}(${texName}[0]);\n      }\n    `;\n    }\n    const shapeStr = `uniforms.${texName.charAt(0).toLowerCase() + texName.slice(1)}Shape`;\n    let rankStr = `${rank}D`;\n    if (rank === 0) {\n        rankStr = '1D';\n    }\n    return `\n    fn ${funcName}(${inputs}) -> ${typeSnippet(component)} {\n      return ${typeSnippet(component)}(${texName}[getIndexFromCoords${rankStr}(${type}(${dims.join(',')}),\n        ${shapeStr})${component === 1 ? '' : ` / ${component}`}]);\n    }\n   `;\n}\nfunction getInputByOutputSnippet(inputInfo, outShape, component, isFlatDispatchLayout) {\n    const texName = inputInfo.name;\n    const texFuncSnippet = texName.charAt(0).toUpperCase() + texName.slice(1);\n    const funcName = 'get' + texFuncSnippet + 'ByOutput';\n    const inRank = inputInfo.shape.length;\n    const outRank = outShape.length;\n    const type = getCoordsDataType(outRank);\n    // If the inShape equals the outShape and the dispatch layout is flat, we can\n    // directly use |gl_GlobalInvocationID.x| as the index and don't need coords\n    // conversion between these two shapes.\n    if (util.arraysEqual(inputInfo.shape, outShape) && isFlatDispatchLayout) {\n        return `\n    fn ${funcName}Index(globalIndex : i32) -> ${typeSnippet(component)} {\n      return ${typeSnippet(component)}(${texName}[globalIndex]);\n    }\n\n    fn ${funcName}Coords(coords : ${type}) -> ${typeSnippet(component)} {\n      return ${typeSnippet(component)}(${texName}[${outRank > 1 ? 'getOutputIndexFromCoords(coords)' :\n            'coords'}${component === 1 ? '' : ` / ${component}`}]);\n    }\n    `;\n    }\n    const broadcastDims = backend_util.getBroadcastDims(inputInfo.shape, outShape);\n    const rankDiff = outRank - inRank;\n    let coordsSnippet = '';\n    if (inRank === 0) {\n        return `\n    fn ${funcName}Index(globalIndex : i32) -> ${typeSnippet(component)}{\n      return get${texFuncSnippet}();\n    }\n\n    fn ${funcName}Coords(coords : ${type}) -> ${typeSnippet(component)}{\n      return get${texFuncSnippet}();\n    }\n  `;\n    }\n    else {\n        if (outRank < 2 && broadcastDims.length >= 1) {\n            coordsSnippet = 'coords = 0;';\n        }\n        else {\n            coordsSnippet =\n                broadcastDims.map(d => `coords.${getCoordsXYZ(d + rankDiff)} = 0;`)\n                    .join('\\n');\n        }\n    }\n    let unpackedCoordsSnippet = '';\n    if (outRank < 2 && inRank > 0) {\n        unpackedCoordsSnippet = 'coords';\n    }\n    else {\n        if (outRank > 1) {\n            const coordsType = getCoordsDataType(inRank);\n            const coordsValues = inputInfo.shape.map((s, i) => `coords.${getCoordsXYZ(i + rankDiff)}`)\n                .join(', ');\n            unpackedCoordsSnippet = `${coordsType}(${coordsValues})`;\n        }\n        else {\n            unpackedCoordsSnippet = 'coords';\n        }\n    }\n    const shapeStr = `uniforms.${texName.charAt(0).toLowerCase() + texName.slice(1)}Shape`;\n    const rankStr = `${inRank}D`;\n    return `\n  fn ${funcName}Index(globalIndex : i32) -> ${typeSnippet(component)} {\n    var coords = getCoordsFromIndex(globalIndex);\n    ${coordsSnippet}\n    return ${typeSnippet(component)}(${texName}[getIndexFromCoords${rankStr}(${unpackedCoordsSnippet}, ${shapeStr})${component === 1 ? '' : ` / ${component}`}]);\n  }\n\n  fn ${funcName}Coords(coordsIn : ${type}) -> ${typeSnippet(component)} {\n    var coords = coordsIn;\n    ${coordsSnippet}\n    return ${typeSnippet(component)}(${texName}[getIndexFromCoords${rankStr}(${unpackedCoordsSnippet}, ${shapeStr})${component === 1 ? '' : ` / ${component}`}]);\n  }\n`;\n}\nfunction getInputSnippet(inputInfo, outShape, component, isFlatDispatchLayout) {\n    let res = getInputAtCoordsSnippet(inputInfo, component);\n    const inShape = inputInfo.shape;\n    if (inShape.length <= outShape.length) {\n        res += getInputByOutputSnippet(inputInfo, outShape, component, isFlatDispatchLayout);\n    }\n    return res;\n}\n/**\n * Generates getOutputCoords() function that computes output coordinates\n * from dispatch geometry to reduce arithmetic.\n */\nfunction getOutputCoordsSnippet(outShape, dispatchLayout) {\n    const { x, y = [], z = [] } = dispatchLayout;\n    const outRank = outShape.length;\n    const rank = x.length + y.length + z.length;\n    // getOutputCoords is only meaningful when the output rank is same with\n    // dispatch layout rank.\n    if (rank !== outRank) {\n        return '';\n    }\n    if (x.length === outRank) {\n        const dtype = getCoordsDataType(outRank);\n        const snippet = `fn getOutputCoords() -> ${dtype}{\n    let globalIndex = getGlobalIndex();\n    return getCoordsFromIndex(globalIndex);\n  }\n  `;\n        return snippet;\n    }\n    let gatherDimensionsStr = '';\n    const dims = [x, y, z];\n    for (let i = 0; i < dims.length; i++) {\n        const arr = dims[i];\n        if (arr.length === 0) {\n            continue;\n        }\n        if (arr.length === 1) {\n            gatherDimensionsStr += `let d${arr[0]} = i32(globalId[${i}]);`;\n        }\n        else {\n            const strides = symbolicallyComputeStrides(arr, 'uniforms.outShape');\n            gatherDimensionsStr += `var index${i} = i32(globalId[${i}]);`;\n            for (let j = 0; j < strides.length; j++) {\n                gatherDimensionsStr += `let d${arr[j]} = index${i} / ${strides[j]};`;\n                if (j === strides.length - 1) {\n                    gatherDimensionsStr += `let d${arr[j + 1]} = ` +\n                        `index${i} - d${arr[j]} * ${strides[j]};`;\n                }\n                else {\n                    gatherDimensionsStr +=\n                        `index${i} = index${i} - d${arr[j]} * ${strides[j]};`;\n                }\n            }\n        }\n    }\n    const dimensions = [];\n    for (let i = 0; i < rank; i++) {\n        dimensions.push(`d${i}`);\n    }\n    const dtype = getCoordsDataType(rank);\n    let snippet = `fn getOutputCoords() -> ${dtype} {\n  ${gatherDimensionsStr}\n`;\n    if (dimensions.length === 0) {\n        snippet += `return ${dtype}(0); }`;\n    }\n    else {\n        snippet += `return ${dtype}(${dimensions.join(',')}); }`;\n    }\n    return snippet;\n}\nfunction getOutputIndexFromCoordsSnippet(outRank) {\n    let snippet = '';\n    switch (outRank) {\n        case 0:\n        case 1:\n            snippet += `\n        fn getOutputIndexFromCoords(coords : i32) -> i32 {\n          return coords;\n        }\n        `;\n            break;\n        case 2:\n            snippet += `\n        fn getOutputIndexFromCoords(coords : vec2<i32>) -> i32 {\n          return dot(coords, vec2<i32>(uniforms.outShapeStrides, 1));\n        }\n        `;\n            break;\n        case 3:\n            snippet += `\n        fn getOutputIndexFromCoords(coords : vec3<i32>) -> i32 {\n          return dot(coords, vec3<i32>(uniforms.outShapeStrides.x, uniforms.outShapeStrides.y, 1));\n        }\n        `;\n            break;\n        case 4:\n            snippet += `\n        fn getOutputIndexFromCoords(coords : vec4<i32>) -> i32 {\n          return dot(coords, vec4<i32>(\n            uniforms.outShapeStrides.x, uniforms.outShapeStrides.y, uniforms.outShapeStrides.z, 1));\n        }\n        `;\n            break;\n        case 5:\n            snippet += `\n        fn getOutputIndexFromCoords(coords : vec5) -> i32 {\n          return coords.x * uniforms.outShapeStrides.x +\n              coords.y * uniforms.outShapeStrides.y +\n              coords.z * uniforms.outShapeStrides.z +\n              coords.w * uniforms.outShapeStrides.w +\n              coords.u;\n        }\n        `;\n            break;\n        case 6:\n            snippet += `\n        fn getOutputIndexFromCoords(coords : vec6) -> i32 {\n          return coords.x * uniforms.outShapeStrides.x +\n              coords.y * uniforms.outShapeStrides.y +\n              coords.z * uniforms.outShapeStrides.z +\n              coords.w * uniforms.outShapeStrides.w +\n              coords.u * uniforms.outShapeStrides.u +\n              coords.v;\n        }\n        `;\n            break;\n        default:\n            util.assert(false, () => `Unsupported ${outRank}D shape`);\n            break;\n    }\n    return snippet;\n}\nfunction isFlatDispatch(program) {\n    return program.dispatch[1] === 1 && program.dispatch[2] === 1;\n}\nexport function dataTypeToGPUType(type, component = 1) {\n    if (type === 'float32') {\n        return typeSnippet(component, 'f32');\n    }\n    else if (type === 'int32' || type === 'bool') {\n        return typeSnippet(component, 'i32');\n    }\n    throw new Error(`type ${type} is not supported.`);\n}\nfunction setOutputSnippet(outShape, outBufferType, component) {\n    const outRank = outShape.length;\n    const gpuType = dataTypeToGPUType(outBufferType, component);\n    let snippet = `fn setOutputAtIndex(flatIndex : i32, value : ${typeSnippet(component)}) {\n      result[flatIndex] = ${gpuType}(value);\n    }\n\n    fn setOutputAtIndexI32(flatIndex : i32, value : ${typeSnippet(component, 'i32')}) {\n      result[flatIndex] = ${gpuType}(value);\n    }\n    `;\n    if (outRank >= 2) {\n        const dims = ['d0', 'd1', 'd2', 'd3', 'd4', 'd5'].slice(0, outRank);\n        const type = getCoordsDataType(outRank);\n        snippet += `\n      fn setOutputAtCoords(${dims.map(d => `${d} : i32`).join(', ')}, value : ${typeSnippet(component)}) {\n        let flatIndex = getOutputIndexFromCoords(${type}(${dims.join(', ')}));\n        setOutputAtIndex(flatIndex${component === 1 ? '' : ` / ${component}`}, value);\n      }\n      fn setOutputAtCoordsI32(${dims.map(d => `${d} : i32`).join(', ')}, value : ${typeSnippet(component, 'i32')}) {\n        let flatIndex = getOutputIndexFromCoords(${type}(${dims.join(', ')}));\n        setOutputAtIndexI32(flatIndex${component === 1 ? '' : ` / ${component}`}, value);\n      }\n    `;\n    }\n    return snippet;\n}\nfunction insertAlignment(uniformShader) {\n    // insert alignment when current pattern is vec5 or vec6\n    const curInsertRe = /(\\w+)\\s*:\\s*vec(5|6)/g;\n    uniformShader = uniformShader.replace(curInsertRe, (match) => {\n        return '@align(16) ' + match;\n    });\n    // insert alignment when previous pattern is vec5 or vec6\n    const preInsertRe = /vec(5|6)\\s*,\\s*(\\w+)/g;\n    uniformShader = uniformShader.replace(preInsertRe, (_, p1, p2) => {\n        return `vec${p1}, @align(16) ${p2}`;\n    });\n    return uniformShader;\n}\nfunction isFlatDispatchLayout(program) {\n    if (program.dispatchLayout.hasOwnProperty('y') &&\n        program.dispatchLayout.y.length !== 0) {\n        return false;\n    }\n    if (program.dispatchLayout.hasOwnProperty('z') &&\n        program.dispatchLayout.z.length !== 0) {\n        return false;\n    }\n    return true;\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2ViZ3B1X3Byb2dyYW0uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy93ZWJncHVfcHJvZ3JhbS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQUMsWUFBWSxFQUF5QixHQUFHLEVBQW9CLElBQUksRUFBQyxNQUFNLHVCQUF1QixDQUFDO0FBRXZHLE9BQU8sRUFBQywwQkFBMEIsRUFBQyxNQUFNLGVBQWUsQ0FBQztBQUV6RCxNQUFNLENBQU4sSUFBWSxZQUdYO0FBSEQsV0FBWSxZQUFZO0lBQ3RCLDZEQUFXLENBQUE7SUFDWCwrQ0FBSSxDQUFBO0FBQ04sQ0FBQyxFQUhXLFlBQVksS0FBWixZQUFZLFFBR3ZCO0FBb0NELE1BQU0sQ0FBQyxNQUFNLGNBQWMsR0FDdkIsQ0FBQyxNQUFpQixFQUFFLE9BQXNCLEVBQUUsVUFBdUIsRUFDbEUsTUFBa0IsRUFBRSxtQkFBNEIsRUFDckIsRUFBRTtJQUM1QixNQUFNLFVBQVUsR0FBRyxFQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsS0FBSyxFQUFFLEtBQUssRUFBRSxNQUFNLENBQUMsS0FBSyxFQUFDLENBQUM7SUFDOUQsTUFBTSxNQUFNLEdBQUcsVUFBVSxDQUFDLFVBQVUsRUFBRSxVQUFVLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDM0QsTUFBTSxNQUFNLEdBQUcsTUFBTSxDQUFDLGtCQUFrQixDQUNwQyxFQUFDLElBQUksRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLE9BQU8sQ0FBQyxXQUFXLENBQUMsSUFBSSxFQUFDLENBQUMsQ0FBQztJQUVyRCxJQUFJLGlCQUFpQixHQUFHLEdBQUcsRUFBRSxDQUFDLEdBQUcsQ0FBQyxxQkFBcUIsQ0FBVyxDQUFDO0lBQ25FLElBQUksaUJBQWlCLEtBQUssRUFBRSxFQUFFO1FBQzVCLGlCQUFpQixHQUFHLGlCQUFpQixDQUFDLFdBQVcsRUFBRSxDQUFDO1FBQ3BELE1BQU0sZ0JBQWdCLEdBQUcsaUJBQWlCLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ3RELElBQUksaUJBQWlCLEtBQUssS0FBSztZQUMzQixnQkFBZ0IsQ0FBQyxJQUFJLENBQ2pCLElBQUksQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRTtZQUMvRCxPQUFPLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUNqQyxPQUFPLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQ3RCLE9BQU8sQ0FBQyxRQUFRLEVBQUUsQ0FBQztTQUNwQjtLQUNGO0lBRUQsSUFBSSxtQkFBbUIsRUFBRTtRQUN2QixPQUFPLE1BQU0sQ0FBQywwQkFBMEIsQ0FBQztZQUN2QyxPQUFPLEVBQUUsRUFBQyxNQUFNLEVBQUUsVUFBVSxFQUFFLFFBQVEsRUFBQztZQUN2QyxLQUFLLEVBQUUsT0FBTyxDQUFDLFdBQVcsQ0FBQyxJQUFJO1lBQy9CLE1BQU0sRUFBRSxNQUFNO1NBQ2YsQ0FBQyxDQUFDO0tBQ0o7U0FBTTtRQUNMLE9BQU8sTUFBTSxDQUFDLHFCQUFxQixDQUFDO1lBQ2xDLE9BQU8sRUFBRSxFQUFDLE1BQU0sRUFBRSxVQUFVLEVBQUUsUUFBUSxFQUFDO1lBQ3ZDLEtBQUssRUFBRSxPQUFPLENBQUMsV0FBVyxDQUFDLElBQUk7WUFDL0IsTUFBTSxFQUFFLE1BQU07U0FDZixDQUFDLENBQUM7S0FDSjtBQUNILENBQUMsQ0FBQztBQUVOLE1BQU0sQ0FBQyxNQUFNLFdBQVcsR0FBRyxDQUFDLFNBQWlCLEVBQUUsSUFBSSxHQUFHLEtBQUssRUFBRSxFQUFFO0lBQzdELFFBQVEsU0FBUyxFQUFFO1FBQ2pCLEtBQUssQ0FBQztZQUNKLE9BQU8sR0FBRyxJQUFJLEVBQUUsQ0FBQztRQUNuQixLQUFLLENBQUM7WUFDSixPQUFPLFFBQVEsSUFBSSxHQUFHLENBQUM7UUFDekIsS0FBSyxDQUFDO1lBQ0osT0FBTyxRQUFRLElBQUksR0FBRyxDQUFDO1FBQ3pCLEtBQUssQ0FBQztZQUNKLE9BQU8sUUFBUSxJQUFJLEdBQUcsQ0FBQztRQUN6QjtZQUNFLE1BQU0sSUFBSSxLQUFLLENBQUMsR0FBRyxTQUFTLGNBQWMsSUFBSSxvQkFBb0IsQ0FBQyxDQUFDO0tBQ3ZFO0FBQ0gsQ0FBQyxDQUFDO0FBRUYsTUFBTSxVQUFVLGlCQUFpQixDQUFDLElBQVk7SUFDNUMsSUFBSSxJQUFJLElBQUksQ0FBQyxFQUFFO1FBQ2IsT0FBTyxLQUFLLENBQUM7S0FDZDtTQUFNLElBQUksSUFBSSxLQUFLLENBQUMsRUFBRTtRQUNyQixPQUFPLFdBQVcsQ0FBQztLQUNwQjtTQUFNLElBQUksSUFBSSxLQUFLLENBQUMsRUFBRTtRQUNyQixPQUFPLFdBQVcsQ0FBQztLQUNwQjtTQUFNLElBQUksSUFBSSxLQUFLLENBQUMsRUFBRTtRQUNyQixPQUFPLFdBQVcsQ0FBQztLQUNwQjtTQUFNLElBQUksSUFBSSxLQUFLLENBQUMsRUFBRTtRQUNyQixPQUFPLE1BQU0sQ0FBQztLQUNmO1NBQU0sSUFBSSxJQUFJLEtBQUssQ0FBQyxFQUFFO1FBQ3JCLE9BQU8sTUFBTSxDQUFDO0tBQ2Y7U0FBTTtRQUNMLE1BQU0sS0FBSyxDQUFDLGdCQUFnQixJQUFJLHVCQUF1QixDQUFDLENBQUM7S0FDMUQ7QUFDSCxDQUFDO0FBRUQsTUFBTSxVQUFVLFlBQVksQ0FBQyxLQUFhO0lBQ3hDLElBQUksS0FBSyxLQUFLLENBQUMsRUFBRTtRQUNmLE9BQU8sR0FBRyxDQUFDO0tBQ1o7U0FBTSxJQUFJLEtBQUssS0FBSyxDQUFDLEVBQUU7UUFDdEIsT0FBTyxHQUFHLENBQUM7S0FDWjtTQUFNLElBQUksS0FBSyxLQUFLLENBQUMsRUFBRTtRQUN0QixPQUFPLEdBQUcsQ0FBQztLQUNaO1NBQU0sSUFBSSxLQUFLLEtBQUssQ0FBQyxFQUFFO1FBQ3RCLE9BQU8sR0FBRyxDQUFDO0tBQ1o7U0FBTSxJQUFJLEtBQUssS0FBSyxDQUFDLEVBQUU7UUFDdEIsT0FBTyxHQUFHLENBQUM7S0FDWjtTQUFNLElBQUksS0FBSyxLQUFLLENBQUMsRUFBRTtRQUN0QixPQUFPLEdBQUcsQ0FBQztLQUNaO1NBQU07UUFDTCxNQUFNLEtBQUssQ0FBQyxTQUFTLEtBQUssdUJBQXVCLENBQUMsQ0FBQztLQUNwRDtBQUNILENBQUM7QUFJRCxNQUFNLFVBQVUsbUJBQW1CLENBQUMsR0FBRyxNQUFnQjtJQUNyRCxJQUFJLE9BQWUsQ0FBQztJQUNwQixRQUFRLE1BQU0sQ0FBQyxNQUFNLEVBQUU7UUFDckIsS0FBSyxDQUFDO1lBQ0osT0FBTyxHQUFHOztPQUVULENBQUM7WUFDRixNQUFNO1FBQ1IsS0FBSyxDQUFDO1lBQ0osT0FBTyxHQUFHO2tCQUNFLE1BQU0sQ0FBQyxDQUFDLENBQUM7T0FDcEIsQ0FBQztZQUNGLE1BQU07UUFDUjtZQUNFLE1BQU0sS0FBSyxDQUFDLGFBQWEsQ0FBQyxDQUFDO0tBQzlCO0lBQ0QsT0FBTyxPQUFPLENBQUM7QUFDakIsQ0FBQztBQUVELE1BQU0sVUFBVSxvQkFBb0IsQ0FDaEMsY0FBdUIsRUFBRSxPQUFzQjtJQUNqRCxJQUFJLE9BQWUsQ0FBQztJQUNwQixPQUFPLEdBQUc7T0FDTCxzQkFBc0IsQ0FBQyxPQUFPLENBQUM7Ozs7Ozs7Ozs7O1VBVzVCLGNBQWMsQ0FBQyxDQUFDLENBQUMseUJBQXlCLENBQUMsQ0FBQyxDQUFDLFNBQVM7O0tBRTNELENBQUM7SUFDSixPQUFPLE9BQU8sQ0FBQztBQUNqQixDQUFDO0FBRUQsTUFBTSxVQUFVLHNCQUFzQixDQUFDLE9BQXNCO0lBQzNELE9BQU87NkJBQ29CLE9BQU8sQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLEtBQy9DLE9BQU8sQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLEtBQUssT0FBTyxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUM7Q0FDMUQsQ0FBQztBQUNGLENBQUM7QUFFRCxTQUFTLFVBQVUsQ0FDZixTQUFzQixFQUFFLFVBQThDLEVBQ3RFLE9BQXNCO0lBQ3hCLE1BQU0sY0FBYyxHQUFhLEVBQUUsQ0FBQztJQUNwQyxNQUFNLGlCQUFpQixHQUFHLE9BQU8sQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDO1FBQzlDLE9BQU8sQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLEdBQUcsT0FBTyxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUN4RCxPQUFPLENBQUMsZUFBZTtRQUNuQixPQUFPLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDMUQsY0FBYyxDQUFDLElBQUksQ0FBQzs7Ozs7Ozs7OztVQVdoQixjQUFjLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztRQUNyQiwyQkFBMkIsQ0FBQyxDQUFDO1FBQzdCO3FFQUVJLGlCQUFpQjs7U0FFdEI7O0tBRUosQ0FBQyxDQUFDO0lBRUwsSUFBSSxPQUFPLENBQUMsWUFBWSxJQUFJLElBQUksRUFBRTtRQUNoQyxNQUFNLFlBQVksR0FBRyxPQUFPLENBQUMsWUFBWSxLQUFLLFlBQVksQ0FBQyxXQUFXLENBQUMsQ0FBQztZQUNwRSxnRUFDSSxpQkFBaUIsQ0FBQyxVQUFVLENBQUMsS0FBSyxFQUFFLE9BQU8sQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDdEUsMERBQ0ksaUJBQWlCLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBRSxPQUFPLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQztRQUMzRSxNQUFNLG1CQUFtQixHQUNyQixVQUFVLENBQUMsS0FBSyxDQUFDLE1BQU0sS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDO1FBQ3hELGNBQWMsQ0FBQyxJQUFJLENBQUM7OzhCQUVNLG1CQUFtQjs7Ozs7O1VBTXZDLFlBQVk7O09BRWYsQ0FBQyxDQUFDO1FBQ0wsTUFBTSxjQUFjLEdBQUcsb0JBQW9CLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDckQsT0FBTztZQUNMLGFBQWE7WUFDYixjQUFjLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQztZQUN6Qix5QkFBeUIsQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDO1lBQzNDLE9BQU8sQ0FBQyxXQUFXLEVBQUU7WUFDckIsb0JBQW9CLENBQUMsY0FBYyxFQUFFLE9BQU8sQ0FBQztTQUM5QyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztLQUNkO0lBRUQsSUFBSSxhQUFxQixDQUFDO0lBQzFCLElBQUksZUFBdUIsQ0FBQztJQUM1QixJQUFJLGtCQUFrQixHQUFHLCtDQUErQyxDQUFDO0lBQ3pFLE9BQU8sQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFO1FBQ3JDLE1BQU0sV0FBVyxHQUFHLGlCQUFpQixDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDakUsa0JBQWtCO1lBQ2QsR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLFdBQVcsRUFBRSxHQUFHLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLFdBQVcsV0FBVyxJQUFJLENBQUM7UUFDeEUsYUFBYSxHQUFHLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztRQUM5QyxlQUFlLEdBQUcsaUJBQWlCLENBQUMsYUFBYSxDQUFDLENBQUM7UUFDbkQsa0JBQWtCO1lBQ2QsR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLFdBQVcsRUFBRSxHQUFHLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLGlCQUNyQyxlQUFlLElBQUksQ0FBQztJQUM5QixDQUFDLENBQUMsQ0FBQztJQUNILE1BQU0sY0FBYyxHQUFHLGlCQUFpQixDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDbEUsa0JBQWtCLElBQUksY0FBYyxjQUFjLElBQUksQ0FBQztJQUN2RCxhQUFhLEdBQUcsVUFBVSxDQUFDLEtBQUssQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO0lBQzVDLGVBQWUsR0FBRyxpQkFBaUIsQ0FBQyxhQUFhLENBQUMsQ0FBQztJQUNuRCxrQkFBa0IsSUFBSTs0QkFDSSxlQUFlLElBQUksQ0FBQztJQUU5QyxJQUFJLE9BQU8sQ0FBQyxJQUFJLEVBQUU7UUFDaEIsa0JBQWtCLElBQUksY0FBYyxDQUFDO0tBQ3RDO0lBRUQsSUFBSSxPQUFPLENBQUMsUUFBUSxFQUFFO1FBQ3BCLGtCQUFrQixJQUFJLE9BQU8sQ0FBQyxRQUFRLENBQUM7S0FDeEM7SUFDRCxrQkFBa0IsSUFBSSxJQUFJLENBQUM7SUFDM0Isa0JBQWtCLEdBQUcsZUFBZSxDQUFDLGtCQUFrQixDQUFDLENBQUM7SUFFekQsY0FBYyxDQUFDLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBRXhDLGlCQUFpQjtJQUNqQixJQUFJLE9BQU8sQ0FBQyxNQUFNLEVBQUU7UUFDbEIsY0FBYyxDQUFDLElBQUksQ0FBQzs7S0FFbkIsQ0FBQyxDQUFDO0tBQ0o7U0FBTTtRQUNMLGNBQWMsQ0FBQyxJQUFJLENBQUM7cUVBRWhCLGlCQUFpQixDQUFDLFVBQVUsQ0FBQyxLQUFLLEVBQUUsT0FBTyxDQUFDLGVBQWUsQ0FBQztLQUMvRCxDQUFDLENBQUM7S0FDSjtJQUNELE9BQU8sQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFO1FBQ3JDLGNBQWMsQ0FBQyxJQUFJLENBQUM7MkJBQ0csQ0FBQyxHQUFHLENBQUMsd0JBQXdCLENBQUMsV0FDakQsT0FBTyxDQUFDLGtCQUFrQixDQUFDLENBQUM7WUFDeEIsaUJBQWlCLENBQ2IsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBRSxPQUFPLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3hELGlCQUFpQixDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLEVBQUUsT0FBTyxDQUFDLGVBQWUsQ0FBQztTQUNqRSxDQUFDLENBQUM7SUFDVCxDQUFDLENBQUMsQ0FBQztJQUVILElBQUksa0JBQWtCLEtBQUssRUFBRSxFQUFFO1FBQzdCLGNBQWMsQ0FBQyxJQUFJLENBQUM7MkJBRWhCLENBQUMsR0FBRyxPQUFPLENBQUMsYUFBYSxDQUFDLE1BQU07T0FDakMsQ0FBQyxDQUFDO0tBQ047SUFFRCxNQUFNLGFBQWEsR0FDZixzQkFBc0IsQ0FBQyxVQUFVLENBQUMsS0FBSyxFQUFFLE9BQU8sQ0FBQyxjQUFjLENBQUMsQ0FBQztJQUVyRSxNQUFNLE9BQU8sR0FBRztRQUNkLGFBQWEsRUFBRSxjQUFjLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLFlBQVk7UUFDdkQseUJBQXlCLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxFQUFFLGFBQWE7UUFDMUQsK0JBQStCLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUM7S0FDekQsQ0FBQztJQUNGLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxFQUFFO1FBQ25CLE9BQU8sQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQ3pCLFVBQVUsQ0FBQyxLQUFLLEVBQUUsVUFBVSxDQUFDLEtBQUssRUFBRSxPQUFPLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQztLQUNuRTtJQUVELE9BQU8sQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFO1FBQ3JDLE9BQU8sQ0FBQyxJQUFJLENBQUMsR0FBRyx5QkFBeUIsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUN0RSxDQUFDLENBQUMsQ0FBQztJQUVILE1BQU0sWUFBWSxHQUNkLFNBQVM7U0FDSixHQUFHLENBQ0EsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxlQUFlLENBQ3JCLENBQUMsRUFBRSxVQUFVLENBQUMsS0FBSyxFQUNuQixPQUFPLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQy9CLE9BQU8sQ0FBQyxlQUFlLEVBQ3BELE9BQU8sQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLE1BQU0sS0FBSyxVQUFVLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1NBQ3BFLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNwQixPQUFPLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDO0lBQzNCLE9BQU8sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLFdBQVcsRUFBRSxDQUFDLENBQUM7SUFDcEMsTUFBTSxjQUFjLEdBQUcsb0JBQW9CLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDckQsT0FBTyxDQUFDLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxjQUFjLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQztJQUM1RCxNQUFNLE1BQU0sR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ2xDLE9BQU8sTUFBTSxDQUFDO0FBQ2hCLENBQUM7QUFFRCxNQUFNLFVBQVUsYUFBYSxDQUN6QixPQUFzQixFQUFFLFVBQXVCLEVBQy9DLE1BQWtCO0lBQ3BCLElBQUksR0FBRyxHQUFHLE9BQU8sQ0FBQyxTQUFTLENBQUM7SUFDNUIsSUFBSSxPQUFPLENBQUMsWUFBWSxJQUFJLElBQUksRUFBRTtRQUNoQyxPQUFPLEdBQUcsQ0FBQztLQUNaO0lBRUQsTUFBTSxNQUFNLEdBQWUsRUFBRSxDQUFDO0lBQzlCLE1BQU0sS0FBSyxHQUE2QixFQUFFLENBQUM7SUFDM0MsVUFBVSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsRUFBRTtRQUMzQixNQUFNLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUMzQixLQUFLLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUM1QixDQUFDLENBQUMsQ0FBQztJQUNILE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQzFCLEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBRXpCLE1BQU0sYUFBYSxHQUNmLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxZQUFZLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztJQUM5RSxNQUFNLHlCQUF5QixHQUMzQixVQUFVLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUMzRSxNQUFNLGdCQUFnQixHQUFHLGFBQWEsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBRXZFLE1BQU0sa0JBQWtCLEdBQUcsY0FBYyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztJQUV6RSxHQUFHLElBQUksR0FBRyxHQUFHLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztRQUN2RSxNQUFNLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQztRQUM3RCxPQUFPLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxnQkFBZ0I7UUFDbEQseUJBQXlCLEdBQUcsa0JBQWtCLENBQUM7SUFFbkQsT0FBTyxHQUFHLENBQUM7QUFDYixDQUFDO0FBRUQsTUFBTSxhQUFhLEdBQUc7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0NBa0RyQixDQUFDO0FBRUYsTUFBTSxZQUFZLEdBQUc7Ozs7Q0FJcEIsQ0FBQztBQU1GOzs7O0dBSUc7QUFDSCxNQUFNLFVBQVUseUJBQXlCLENBQUMsS0FBZSxFQUFFLElBQUksR0FBRyxFQUFFO0lBQ2xFLE1BQU0sSUFBSSxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUM7SUFDMUIsTUFBTSxRQUFRLEdBQUcsSUFBSSxLQUFLLEVBQUUsQ0FBQyxDQUFDO1FBQzFCLE1BQU0sSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxXQUFXLEVBQUUsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO1FBQ3JFLG9CQUFvQixDQUFDO0lBQ3pCLE1BQU0sV0FBVyxHQUFHLElBQUksS0FBSyxFQUFFLENBQUMsQ0FBQztRQUM3QixHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsV0FBVyxFQUFFLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsY0FBYyxDQUFDLENBQUM7UUFDL0QsaUJBQWlCLENBQUM7SUFFdEIsSUFBSSxJQUFJLElBQUksQ0FBQyxFQUFFO1FBQ2IsT0FBTyxNQUFNLFFBQVEsd0NBQXdDLENBQUM7S0FDL0Q7SUFFRCxNQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQzNDLE1BQU0sS0FBSyxHQUFHLGlCQUFpQixDQUFDLElBQUksQ0FBQyxDQUFDO0lBRXRDLE1BQU0sTUFBTSxHQUFhLEVBQUUsQ0FBQztJQUM1QixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxFQUFFLENBQUMsRUFBRSxFQUFFO1FBQzdCLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0tBQ3RCO0lBRUQsSUFBSSxPQUFPLENBQUMsTUFBTSxLQUFLLENBQUMsRUFBRTtRQUN4QixPQUFPLFVBQVUsUUFBUTtrQ0FFckIsV0FBVyxvQ0FBb0MsV0FBVzs7TUFFNUQsQ0FBQztLQUNKO0lBQ0QsSUFBSSxPQUFPLENBQUM7SUFDWixPQUFPLEdBQUcscUJBQXFCO1FBQzNCLE9BQU87YUFDRixHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDWixNQUFNLEtBQUssR0FBRyxPQUFPLE1BQU0sQ0FBQyxDQUFDLENBQUMsd0JBQzFCLFdBQVcsSUFBSSxZQUFZLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztZQUNyQyxNQUFNLEtBQUssR0FBRyxDQUFDLEtBQUssT0FBTyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQztnQkFDcEMsT0FBTyxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxlQUFlLE1BQU0sQ0FBQyxDQUFDLENBQUMsZUFDeEMsV0FBVyxJQUFJLFlBQVksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7Z0JBQ3RDLHFCQUFxQixNQUFNLENBQUMsQ0FBQyxDQUFDLGVBQWUsV0FBVyxJQUNwRCxZQUFZLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztZQUMxQixPQUFPLEdBQUcsS0FBSyxLQUFLLEtBQUssR0FBRyxDQUFDO1FBQy9CLENBQUMsQ0FBQzthQUNELElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUVsQixPQUFPO1NBQ0EsUUFBUSxvQkFBb0IsS0FBSztRQUNsQyxPQUFPO2VBQ0EsS0FBSyxJQUFJLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDOztHQUVyQyxDQUFDO0FBQ0osQ0FBQztBQUVELFNBQVMsdUJBQXVCLENBQzVCLFNBQW9CLEVBQUUsU0FBaUI7SUFDekMsTUFBTSxPQUFPLEdBQUcsU0FBUyxDQUFDLElBQUksQ0FBQztJQUMvQixNQUFNLElBQUksR0FBRyxTQUFTLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQztJQUNwQyxNQUFNLElBQUksR0FBRyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNyQyxNQUFNLFFBQVEsR0FBRyxLQUFLLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxXQUFXLEVBQUUsR0FBRyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzVFLE1BQU0sSUFBSSxHQUFHLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQ2pFLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBRXRELElBQUksSUFBSSxHQUFHLENBQUMsRUFBRTtRQUNaLE9BQU87V0FDQSxRQUFRLFNBQVMsV0FBVyxDQUFDLFNBQVMsQ0FBQztpQkFDakMsV0FBVyxDQUFDLFNBQVMsQ0FBQyxJQUFJLE9BQU87O0tBRTdDLENBQUM7S0FDSDtJQUVELE1BQU0sUUFBUSxHQUNWLFlBQVksT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxXQUFXLEVBQUUsR0FBRyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUM7SUFDMUUsSUFBSSxPQUFPLEdBQUcsR0FBRyxJQUFJLEdBQUcsQ0FBQztJQUN6QixJQUFJLElBQUksS0FBSyxDQUFDLEVBQUU7UUFDZCxPQUFPLEdBQUcsSUFBSSxDQUFDO0tBQ2hCO0lBRUQsT0FBTztTQUNBLFFBQVEsSUFBSSxNQUFNLFFBQVEsV0FBVyxDQUFDLFNBQVMsQ0FBQztlQUMxQyxXQUFXLENBQUMsU0FBUyxDQUFDLElBQUksT0FBTyxzQkFDMUMsT0FBTyxJQUFJLElBQUksSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQztVQUM3QixRQUFRLElBQUksU0FBUyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxNQUFNLFNBQVMsRUFBRTs7SUFFMUQsQ0FBQztBQUNMLENBQUM7QUFFRCxTQUFTLHVCQUF1QixDQUM1QixTQUFvQixFQUFFLFFBQWtCLEVBQUUsU0FBaUIsRUFDM0Qsb0JBQTZCO0lBQy9CLE1BQU0sT0FBTyxHQUFHLFNBQVMsQ0FBQyxJQUFJLENBQUM7SUFDL0IsTUFBTSxjQUFjLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxXQUFXLEVBQUUsR0FBRyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBRTFFLE1BQU0sUUFBUSxHQUFHLEtBQUssR0FBRyxjQUFjLEdBQUcsVUFBVSxDQUFDO0lBRXJELE1BQU0sTUFBTSxHQUFHLFNBQVMsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDO0lBQ3RDLE1BQU0sT0FBTyxHQUFHLFFBQVEsQ0FBQyxNQUFNLENBQUM7SUFDaEMsTUFBTSxJQUFJLEdBQUcsaUJBQWlCLENBQUMsT0FBTyxDQUFDLENBQUM7SUFFeEMsNkVBQTZFO0lBQzdFLDRFQUE0RTtJQUM1RSx1Q0FBdUM7SUFDdkMsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLFNBQVMsQ0FBQyxLQUFLLEVBQUUsUUFBUSxDQUFDLElBQUksb0JBQW9CLEVBQUU7UUFDdkUsT0FBTztTQUNGLFFBQVEsK0JBQStCLFdBQVcsQ0FBQyxTQUFTLENBQUM7ZUFDdkQsV0FBVyxDQUFDLFNBQVMsQ0FBQyxJQUFJLE9BQU87OztTQUd2QyxRQUFRLG1CQUFtQixJQUFJLFFBQVEsV0FBVyxDQUFDLFNBQVMsQ0FBQztlQUN2RCxXQUFXLENBQUMsU0FBUyxDQUFDLElBQUksT0FBTyxJQUN4QyxPQUFPLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxrQ0FBa0MsQ0FBQyxDQUFDO1lBQ3BDLFFBQVEsR0FBRyxTQUFTLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLE1BQU0sU0FBUyxFQUFFOztLQUVwRSxDQUFDO0tBQ0g7SUFFRCxNQUFNLGFBQWEsR0FDZixZQUFZLENBQUMsZ0JBQWdCLENBQUMsU0FBUyxDQUFDLEtBQUssRUFBRSxRQUFRLENBQUMsQ0FBQztJQUM3RCxNQUFNLFFBQVEsR0FBRyxPQUFPLEdBQUcsTUFBTSxDQUFDO0lBRWxDLElBQUksYUFBYSxHQUFHLEVBQUUsQ0FBQztJQUV2QixJQUFJLE1BQU0sS0FBSyxDQUFDLEVBQUU7UUFDaEIsT0FBTztTQUNGLFFBQVEsK0JBQStCLFdBQVcsQ0FBQyxTQUFTLENBQUM7a0JBQ3BELGNBQWM7OztTQUd2QixRQUFRLG1CQUFtQixJQUFJLFFBQVEsV0FBVyxDQUFDLFNBQVMsQ0FBQztrQkFDcEQsY0FBYzs7R0FFN0IsQ0FBQztLQUNEO1NBQU07UUFDTCxJQUFJLE9BQU8sR0FBRyxDQUFDLElBQUksYUFBYSxDQUFDLE1BQU0sSUFBSSxDQUFDLEVBQUU7WUFDNUMsYUFBYSxHQUFHLGFBQWEsQ0FBQztTQUMvQjthQUFNO1lBQ0wsYUFBYTtnQkFDVCxhQUFhLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsVUFBVSxZQUFZLENBQUMsQ0FBQyxHQUFHLFFBQVEsQ0FBQyxPQUFPLENBQUM7cUJBQzlELElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztTQUNyQjtLQUNGO0lBRUQsSUFBSSxxQkFBcUIsR0FBRyxFQUFFLENBQUM7SUFDL0IsSUFBSSxPQUFPLEdBQUcsQ0FBQyxJQUFJLE1BQU0sR0FBRyxDQUFDLEVBQUU7UUFDN0IscUJBQXFCLEdBQUcsUUFBUSxDQUFDO0tBQ2xDO1NBQU07UUFDTCxJQUFJLE9BQU8sR0FBRyxDQUFDLEVBQUU7WUFDZixNQUFNLFVBQVUsR0FBRyxpQkFBaUIsQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUM3QyxNQUFNLFlBQVksR0FDZCxTQUFTLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLFVBQVUsWUFBWSxDQUFDLENBQUMsR0FBRyxRQUFRLENBQUMsRUFBRSxDQUFDO2lCQUNoRSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDcEIscUJBQXFCLEdBQUcsR0FBRyxVQUFVLElBQUksWUFBWSxHQUFHLENBQUM7U0FDMUQ7YUFBTTtZQUNMLHFCQUFxQixHQUFHLFFBQVEsQ0FBQztTQUNsQztLQUNGO0lBRUQsTUFBTSxRQUFRLEdBQ1YsWUFBWSxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLFdBQVcsRUFBRSxHQUFHLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQztJQUMxRSxNQUFNLE9BQU8sR0FBRyxHQUFHLE1BQU0sR0FBRyxDQUFDO0lBRTdCLE9BQU87T0FDRixRQUFRLCtCQUErQixXQUFXLENBQUMsU0FBUyxDQUFDOztNQUU5RCxhQUFhO2FBQ04sV0FBVyxDQUFDLFNBQVMsQ0FBQyxJQUFJLE9BQU8sc0JBQXNCLE9BQU8sSUFDckUscUJBQXFCLEtBQUssUUFBUSxJQUNsQyxTQUFTLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLE1BQU0sU0FBUyxFQUFFOzs7T0FHdkMsUUFBUSxxQkFBcUIsSUFBSSxRQUFRLFdBQVcsQ0FBQyxTQUFTLENBQUM7O01BRWhFLGFBQWE7YUFDTixXQUFXLENBQUMsU0FBUyxDQUFDLElBQUksT0FBTyxzQkFBc0IsT0FBTyxJQUNyRSxxQkFBcUIsS0FBSyxRQUFRLElBQ2xDLFNBQVMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsTUFBTSxTQUFTLEVBQUU7O0NBRTdDLENBQUM7QUFDRixDQUFDO0FBRUQsU0FBUyxlQUFlLENBQ3BCLFNBQW9CLEVBQUUsUUFBa0IsRUFBRSxTQUFpQixFQUMzRCxvQkFBNkI7SUFDL0IsSUFBSSxHQUFHLEdBQUcsdUJBQXVCLENBQUMsU0FBUyxFQUFFLFNBQVMsQ0FBQyxDQUFDO0lBRXhELE1BQU0sT0FBTyxHQUFHLFNBQVMsQ0FBQyxLQUFLLENBQUM7SUFDaEMsSUFBSSxPQUFPLENBQUMsTUFBTSxJQUFJLFFBQVEsQ0FBQyxNQUFNLEVBQUU7UUFDckMsR0FBRyxJQUFJLHVCQUF1QixDQUMxQixTQUFTLEVBQUUsUUFBUSxFQUFFLFNBQVMsRUFBRSxvQkFBb0IsQ0FBQyxDQUFDO0tBQzNEO0lBRUQsT0FBTyxHQUFHLENBQUM7QUFDYixDQUFDO0FBRUQ7OztHQUdHO0FBQ0gsU0FBUyxzQkFBc0IsQ0FDM0IsUUFBa0IsRUFDbEIsY0FBeUQ7SUFDM0QsTUFBTSxFQUFDLENBQUMsRUFBRSxDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUMsR0FBRyxFQUFFLEVBQUMsR0FBRyxjQUFjLENBQUM7SUFFM0MsTUFBTSxPQUFPLEdBQUcsUUFBUSxDQUFDLE1BQU0sQ0FBQztJQUNoQyxNQUFNLElBQUksR0FBRyxDQUFDLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQztJQUM1Qyx1RUFBdUU7SUFDdkUsd0JBQXdCO0lBQ3hCLElBQUksSUFBSSxLQUFLLE9BQU8sRUFBRTtRQUNwQixPQUFPLEVBQUUsQ0FBQztLQUNYO0lBRUQsSUFBSSxDQUFDLENBQUMsTUFBTSxLQUFLLE9BQU8sRUFBRTtRQUN4QixNQUFNLEtBQUssR0FBRyxpQkFBaUIsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUN6QyxNQUFNLE9BQU8sR0FBRywyQkFBMkIsS0FBSzs7OztHQUlqRCxDQUFDO1FBQ0EsT0FBTyxPQUFPLENBQUM7S0FDaEI7SUFFRCxJQUFJLG1CQUFtQixHQUFHLEVBQUUsQ0FBQztJQUM3QixNQUFNLElBQUksR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFFdkIsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7UUFDcEMsTUFBTSxHQUFHLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRXBCLElBQUksR0FBRyxDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUU7WUFDcEIsU0FBUztTQUNWO1FBRUQsSUFBSSxHQUFHLENBQUMsTUFBTSxLQUFLLENBQUMsRUFBRTtZQUNwQixtQkFBbUIsSUFBSSxRQUFRLEdBQUcsQ0FBQyxDQUFDLENBQUMsbUJBQW1CLENBQUMsS0FBSyxDQUFDO1NBQ2hFO2FBQU07WUFDTCxNQUFNLE9BQU8sR0FBRywwQkFBMEIsQ0FBQyxHQUFHLEVBQUUsbUJBQW1CLENBQUMsQ0FBQztZQUNyRSxtQkFBbUIsSUFBSSxZQUFZLENBQUMsbUJBQW1CLENBQUMsS0FBSyxDQUFDO1lBQzlELEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxPQUFPLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO2dCQUN2QyxtQkFBbUIsSUFBSSxRQUFRLEdBQUcsQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLE1BQU0sT0FBTyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUM7Z0JBRXJFLElBQUksQ0FBQyxLQUFLLE9BQU8sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO29CQUM1QixtQkFBbUIsSUFBSSxRQUFRLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEtBQUs7d0JBQzFDLFFBQVEsQ0FBQyxPQUFPLEdBQUcsQ0FBQyxDQUFDLENBQUMsTUFBTSxPQUFPLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQztpQkFDL0M7cUJBQU07b0JBQ0wsbUJBQW1CO3dCQUNmLFFBQVEsQ0FBQyxXQUFXLENBQUMsT0FBTyxHQUFHLENBQUMsQ0FBQyxDQUFDLE1BQU0sT0FBTyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUM7aUJBQzNEO2FBQ0Y7U0FDRjtLQUNGO0lBRUQsTUFBTSxVQUFVLEdBQUcsRUFBRSxDQUFDO0lBQ3RCLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLEVBQUUsQ0FBQyxFQUFFLEVBQUU7UUFDN0IsVUFBVSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7S0FDMUI7SUFFRCxNQUFNLEtBQUssR0FBRyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUN0QyxJQUFJLE9BQU8sR0FBRywyQkFBMkIsS0FBSztJQUM1QyxtQkFBbUI7Q0FDdEIsQ0FBQztJQUNBLElBQUksVUFBVSxDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUU7UUFDM0IsT0FBTyxJQUFJLFVBQVUsS0FBSyxRQUFRLENBQUM7S0FDcEM7U0FBTTtRQUNMLE9BQU8sSUFBSSxVQUFVLEtBQUssSUFBSSxVQUFVLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUM7S0FDMUQ7SUFFRCxPQUFPLE9BQU8sQ0FBQztBQUNqQixDQUFDO0FBRUQsU0FBUywrQkFBK0IsQ0FBQyxPQUFlO0lBQ3RELElBQUksT0FBTyxHQUFHLEVBQUUsQ0FBQztJQUNqQixRQUFRLE9BQU8sRUFBRTtRQUNmLEtBQUssQ0FBQyxDQUFDO1FBQ1AsS0FBSyxDQUFDO1lBQ0osT0FBTyxJQUFJOzs7O1NBSVIsQ0FBQztZQUNKLE1BQU07UUFDUixLQUFLLENBQUM7WUFDSixPQUFPLElBQUk7Ozs7U0FJUixDQUFDO1lBQ0osTUFBTTtRQUNSLEtBQUssQ0FBQztZQUNKLE9BQU8sSUFBSTs7OztTQUlSLENBQUM7WUFDSixNQUFNO1FBQ1IsS0FBSyxDQUFDO1lBQ0osT0FBTyxJQUFJOzs7OztTQUtSLENBQUM7WUFDSixNQUFNO1FBQ1IsS0FBSyxDQUFDO1lBQ0osT0FBTyxJQUFJOzs7Ozs7OztTQVFSLENBQUM7WUFDSixNQUFNO1FBQ1IsS0FBSyxDQUFDO1lBQ0osT0FBTyxJQUFJOzs7Ozs7Ozs7U0FTUixDQUFDO1lBQ0osTUFBTTtRQUNSO1lBQ0UsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsR0FBRyxFQUFFLENBQUMsZUFBZSxPQUFPLFNBQVMsQ0FBQyxDQUFDO1lBQzFELE1BQU07S0FDVDtJQUNELE9BQU8sT0FBTyxDQUFDO0FBQ2pCLENBQUM7QUFFRCxTQUFTLGNBQWMsQ0FBQyxPQUFzQjtJQUM1QyxPQUFPLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQ2hFLENBQUM7QUFFRCxNQUFNLFVBQVUsaUJBQWlCLENBQUMsSUFBYyxFQUFFLFNBQVMsR0FBRyxDQUFDO0lBQzdELElBQUksSUFBSSxLQUFLLFNBQVMsRUFBRTtRQUN0QixPQUFPLFdBQVcsQ0FBQyxTQUFTLEVBQUUsS0FBSyxDQUFDLENBQUM7S0FDdEM7U0FBTSxJQUFJLElBQUksS0FBSyxPQUFPLElBQUksSUFBSSxLQUFLLE1BQU0sRUFBRTtRQUM5QyxPQUFPLFdBQVcsQ0FBQyxTQUFTLEVBQUUsS0FBSyxDQUFDLENBQUM7S0FDdEM7SUFDRCxNQUFNLElBQUksS0FBSyxDQUFDLFFBQVEsSUFBSSxvQkFBb0IsQ0FBQyxDQUFDO0FBQ3BELENBQUM7QUFFRCxTQUFTLGdCQUFnQixDQUNyQixRQUFrQixFQUFFLGFBQXVCLEVBQUUsU0FBaUI7SUFDaEUsTUFBTSxPQUFPLEdBQUcsUUFBUSxDQUFDLE1BQU0sQ0FBQztJQUNoQyxNQUFNLE9BQU8sR0FBRyxpQkFBaUIsQ0FBQyxhQUFhLEVBQUUsU0FBUyxDQUFDLENBQUM7SUFDNUQsSUFBSSxPQUFPLEdBQ1AsZ0RBQWdELFdBQVcsQ0FBQyxTQUFTLENBQUM7NEJBQ2hELE9BQU87OztzREFJekIsV0FBVyxDQUFDLFNBQVMsRUFBRSxLQUFLLENBQUM7NEJBQ1gsT0FBTzs7S0FFOUIsQ0FBQztJQUNKLElBQUksT0FBTyxJQUFJLENBQUMsRUFBRTtRQUNoQixNQUFNLElBQUksR0FBRyxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxPQUFPLENBQUMsQ0FBQztRQUNwRSxNQUFNLElBQUksR0FBRyxpQkFBaUIsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUV4QyxPQUFPLElBQUk7NkJBQ2MsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLGFBQzNELFdBQVcsQ0FBQyxTQUFTLENBQUM7bURBQ3FCLElBQUksSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQztvQ0FFbEUsU0FBUyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxNQUFNLFNBQVMsRUFBRTs7Z0NBR3hDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxhQUN0QyxXQUFXLENBQUMsU0FBUyxFQUFFLEtBQUssQ0FBQzttREFDYyxJQUFJLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUM7dUNBRWxFLFNBQVMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsTUFBTSxTQUFTLEVBQUU7O0tBRTNDLENBQUM7S0FDSDtJQUVELE9BQU8sT0FBTyxDQUFDO0FBQ2pCLENBQUM7QUFFRCxTQUFTLGVBQWUsQ0FBQyxhQUFxQjtJQUM1Qyx3REFBd0Q7SUFDeEQsTUFBTSxXQUFXLEdBQUcsdUJBQXVCLENBQUM7SUFDNUMsYUFBYSxHQUFHLGFBQWEsQ0FBQyxPQUFPLENBQUMsV0FBVyxFQUFFLENBQUMsS0FBSyxFQUFFLEVBQUU7UUFDM0QsT0FBTyxhQUFhLEdBQUcsS0FBSyxDQUFDO0lBQy9CLENBQUMsQ0FBQyxDQUFDO0lBRUgseURBQXlEO0lBQ3pELE1BQU0sV0FBVyxHQUFHLHVCQUF1QixDQUFDO0lBQzVDLGFBQWEsR0FBRyxhQUFhLENBQUMsT0FBTyxDQUFDLFdBQVcsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUU7UUFDL0QsT0FBTyxNQUFNLEVBQUUsZ0JBQWdCLEVBQUUsRUFBRSxDQUFDO0lBQ3RDLENBQUMsQ0FBQyxDQUFDO0lBQ0gsT0FBTyxhQUFhLENBQUM7QUFDdkIsQ0FBQztBQUNELFNBQVMsb0JBQW9CLENBQUMsT0FBc0I7SUFDbEQsSUFBSSxPQUFPLENBQUMsY0FBYyxDQUFDLGNBQWMsQ0FBQyxHQUFHLENBQUM7UUFDMUMsT0FBTyxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsTUFBTSxLQUFLLENBQUMsRUFBRTtRQUN6QyxPQUFPLEtBQUssQ0FBQztLQUNkO0lBQ0QsSUFBSSxPQUFPLENBQUMsY0FBYyxDQUFDLGNBQWMsQ0FBQyxHQUFHLENBQUM7UUFDMUMsT0FBTyxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsTUFBTSxLQUFLLENBQUMsRUFBRTtRQUN6QyxPQUFPLEtBQUssQ0FBQztLQUNkO0lBQ0QsT0FBTyxJQUFJLENBQUM7QUFDZCxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge2JhY2tlbmRfdXRpbCwgRGF0YVR5cGUsIERhdGFUeXBlTWFwLCBlbnYsIFJhbmssIFRlbnNvckluZm8sIHV0aWx9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7c3ltYm9saWNhbGx5Q29tcHV0ZVN0cmlkZXN9IGZyb20gJy4vc2hhZGVyX3V0aWwnO1xuXG5leHBvcnQgZW51bSBQaXhlbHNPcFR5cGUge1xuICBGUk9NX1BJWEVMUyxcbiAgRFJBV1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFdlYkdQVVByb2dyYW0ge1xuICAvLyBXaGV0aGVyIHRvIHVzZSBhdG9taWMgYnVpbHQtaW4gZnVuY3Rpb25zLlxuICBhdG9taWM/OiBib29sZWFuO1xuICAvLyBkaXNwYXRjaCBzcGVjaWZpZXMgZ2VvbWV0cnkgb2YgdGhyZWFkIGdyb3VwcyAtIGRlcml2ZWQgZnJvbSBkaXNwYXRjaExheW91dC5cbiAgZGlzcGF0Y2g6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXTtcbiAgLy8gZGlzcGF0Y2hMYXlvdXQgZW51bWVyYXRlcyBob3cgdGVuc29yIGRpbWVuc2lvbnMgYXJlIGRpc3RyaWJ1dGVkIGFtb25nXG4gIC8vIGRpc3BhdGNoIHgseSx6IGRpbWVuc2lvbnMuXG4gIGRpc3BhdGNoTGF5b3V0OiB7eDogbnVtYmVyW10sIHk/OiBudW1iZXJbXSwgej86IG51bWJlcltdfTtcbiAgLy8gQnkgZGVmYXVsdCwgdGhlIG91dHB1dCBkYXRhIGNvbXBvbmVudCBpcyAxLlxuICBvdXRwdXRDb21wb25lbnQ/OiBudW1iZXI7XG4gIG91dHB1dFNoYXBlOiBudW1iZXJbXTtcbiAgcGl4ZWxzT3BUeXBlPzogUGl4ZWxzT3BUeXBlO1xuICAvLyBUaGUgdW5pcXVlIGtleSB0byBkaXN0aW5ndWlzaCBkaWZmZXJlbnQgc2hhZGVyIHNvdXJjZSBjb2RlLlxuICBzaGFkZXJLZXk6IHN0cmluZztcbiAgLy8gV2hldGhlciB0byB1c2Ugb3V0cHV0IHNpemUgZm9yIGJvdW5kcyBjaGVja2luZy5cbiAgc2l6ZT86IGJvb2xlYW47XG4gIHVuaWZvcm1zPzogc3RyaW5nO1xuICB2YXJpYWJsZU5hbWVzOiBzdHJpbmdbXTtcbiAgLy8gRGVzY3JpYmUgZWFjaCB2YXJpYWJsZSdzIGNvbXBvbmVudCBhbmQgbXVzdCBoYXZlIG9uZS1vbmUgbWFwcGluZyB3aXRoXG4gIC8vIHZhcmlhYmxlTmFtZXMuIElmIG5vdCBzZXQsIGFsbCB2YXJpYWJsZXMgY29tcG9uZW50IHdpbGwgYmUgc2FtZSB3aXRoIG91dHB1dFxuICAvLyBjb21wb25lbnQgbWVtYmVyLlxuICB2YXJpYWJsZUNvbXBvbmVudHM/OiBudW1iZXJbXTtcbiAgLy8gd29ya2dyb3VwU2l6ZS54ICogd29ya2dyb3VwU2l6ZS55ICogd29ya2dyb3VwU2l6ZS56ID0gdGhlIG51bWJlciBvZiB0aHJlYWRzXG4gIC8vIGluIGEgdGhyZWFkIGdyb3VwLiBJbmRpdmlkdWFsIGRpbWVuc2lvbnMgZGV0ZXJtaW5lcyB0aHJlYWQgbGF5b3V0IHdpdGhpblxuICAvLyB0aGUgZ3JvdXAuXG4gIHdvcmtncm91cFNpemU6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXTtcbiAgLy8gU2l6ZSBvZiByZWdpc3RlciBjYWNoZSBpbiBvbmUgZGltZW5zaW9uIChhc3N1bWVzIHNxdWFyZSBjYWNoZSkuXG4gIC8vIEVhY2ggdGhyZWFkIHdyaXRlcyB0byB3b3JrUGVyVGhyZWFkICogd29ya1BlclRocmVhZCBsb2NhdGlvbnMgaW4gdGhlIG91dHB1dFxuICAvLyBidWZmZXIuXG4gIHdvcmtQZXJUaHJlYWQ/OiBudW1iZXI7XG4gIHBpcGVsaW5lPzogR1BVQ29tcHV0ZVBpcGVsaW5lfFByb21pc2U8R1BVQ29tcHV0ZVBpcGVsaW5lPjtcbiAgZ2V0VXNlckNvZGU6ICgpID0+IHN0cmluZztcbn1cblxuZXhwb3J0IGNvbnN0IGNvbXBpbGVQcm9ncmFtID1cbiAgICAoZGV2aWNlOiBHUFVEZXZpY2UsIHByb2dyYW06IFdlYkdQVVByb2dyYW0sIGlucHV0c0RhdGE6IElucHV0SW5mb1tdLFxuICAgICBvdXRwdXQ6IFRlbnNvckluZm8sIHBhcmFsbGVsQ29tcGlsYXRpb246IGJvb2xlYW4pOiBHUFVDb21wdXRlUGlwZWxpbmV8XG4gICAgUHJvbWlzZTxHUFVDb21wdXRlUGlwZWxpbmU+ID0+IHtcbiAgICAgIGNvbnN0IG91dHB1dERhdGEgPSB7ZHR5cGU6IG91dHB1dC5kdHlwZSwgc2hhcGU6IG91dHB1dC5zaGFwZX07XG4gICAgICBjb25zdCBzb3VyY2UgPSBtYWtlU2hhZGVyKGlucHV0c0RhdGEsIG91dHB1dERhdGEsIHByb2dyYW0pO1xuICAgICAgY29uc3QgbW9kdWxlID0gZGV2aWNlLmNyZWF0ZVNoYWRlck1vZHVsZShcbiAgICAgICAgICB7Y29kZTogc291cmNlLCBsYWJlbDogcHJvZ3JhbS5jb25zdHJ1Y3Rvci5uYW1lfSk7XG5cbiAgICAgIGxldCBwcmludFNoYWRlclN0cmluZyA9IGVudigpLmdldCgnV0VCR1BVX1BSSU5UX1NIQURFUicpIGFzIHN0cmluZztcbiAgICAgIGlmIChwcmludFNoYWRlclN0cmluZyAhPT0gJycpIHtcbiAgICAgICAgcHJpbnRTaGFkZXJTdHJpbmcgPSBwcmludFNoYWRlclN0cmluZy50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBjb25zdCBwcmludFNoYWRlckFycmF5ID0gcHJpbnRTaGFkZXJTdHJpbmcuc3BsaXQoJywnKTtcbiAgICAgICAgaWYgKHByaW50U2hhZGVyU3RyaW5nID09PSAnYWxsJyB8fFxuICAgICAgICAgICAgcHJpbnRTaGFkZXJBcnJheS5zb21lKFxuICAgICAgICAgICAgICAgIGl0ZW0gPT4gcHJvZ3JhbS5zaGFkZXJLZXkudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhpdGVtKSkpIHtcbiAgICAgICAgICBjb25zb2xlLmdyb3VwKHByb2dyYW0uc2hhZGVyS2V5KTtcbiAgICAgICAgICBjb25zb2xlLmRlYnVnKHNvdXJjZSk7XG4gICAgICAgICAgY29uc29sZS5ncm91cEVuZCgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChwYXJhbGxlbENvbXBpbGF0aW9uKSB7XG4gICAgICAgIHJldHVybiBkZXZpY2UuY3JlYXRlQ29tcHV0ZVBpcGVsaW5lQXN5bmMoe1xuICAgICAgICAgIGNvbXB1dGU6IHttb2R1bGUsIGVudHJ5UG9pbnQ6ICdfc3RhcnQnfSxcbiAgICAgICAgICBsYWJlbDogcHJvZ3JhbS5jb25zdHJ1Y3Rvci5uYW1lLFxuICAgICAgICAgIGxheW91dDogJ2F1dG8nXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGRldmljZS5jcmVhdGVDb21wdXRlUGlwZWxpbmUoe1xuICAgICAgICAgIGNvbXB1dGU6IHttb2R1bGUsIGVudHJ5UG9pbnQ6ICdfc3RhcnQnfSxcbiAgICAgICAgICBsYWJlbDogcHJvZ3JhbS5jb25zdHJ1Y3Rvci5uYW1lLFxuICAgICAgICAgIGxheW91dDogJ2F1dG8nXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG5cbmV4cG9ydCBjb25zdCB0eXBlU25pcHBldCA9IChjb21wb25lbnQ6IG51bWJlciwgdHlwZSA9ICdmMzInKSA9PiB7XG4gIHN3aXRjaCAoY29tcG9uZW50KSB7XG4gICAgY2FzZSAxOlxuICAgICAgcmV0dXJuIGAke3R5cGV9YDtcbiAgICBjYXNlIDI6XG4gICAgICByZXR1cm4gYHZlYzI8JHt0eXBlfT5gO1xuICAgIGNhc2UgMzpcbiAgICAgIHJldHVybiBgdmVjMzwke3R5cGV9PmA7XG4gICAgY2FzZSA0OlxuICAgICAgcmV0dXJuIGB2ZWM0PCR7dHlwZX0+YDtcbiAgICBkZWZhdWx0OlxuICAgICAgdGhyb3cgbmV3IEVycm9yKGAke2NvbXBvbmVudH0tY29tcG9uZW50ICR7dHlwZX0gaXMgbm90IHN1cHBvcnRlZC5gKTtcbiAgfVxufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldENvb3Jkc0RhdGFUeXBlKHJhbms6IG51bWJlcik6IHN0cmluZyB7XG4gIGlmIChyYW5rIDw9IDEpIHtcbiAgICByZXR1cm4gJ2kzMic7XG4gIH0gZWxzZSBpZiAocmFuayA9PT0gMikge1xuICAgIHJldHVybiBgdmVjMjxpMzI+YDtcbiAgfSBlbHNlIGlmIChyYW5rID09PSAzKSB7XG4gICAgcmV0dXJuIGB2ZWMzPGkzMj5gO1xuICB9IGVsc2UgaWYgKHJhbmsgPT09IDQpIHtcbiAgICByZXR1cm4gYHZlYzQ8aTMyPmA7XG4gIH0gZWxzZSBpZiAocmFuayA9PT0gNSkge1xuICAgIHJldHVybiBgdmVjNWA7XG4gIH0gZWxzZSBpZiAocmFuayA9PT0gNikge1xuICAgIHJldHVybiBgdmVjNmA7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgRXJyb3IoYEdQVSBmb3IgcmFuayAke3Jhbmt9IGlzIG5vdCB5ZXQgc3VwcG9ydGVkYCk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldENvb3Jkc1hZWihpbmRleDogbnVtYmVyKTogc3RyaW5nIHtcbiAgaWYgKGluZGV4ID09PSAwKSB7XG4gICAgcmV0dXJuICd4JztcbiAgfSBlbHNlIGlmIChpbmRleCA9PT0gMSkge1xuICAgIHJldHVybiAneSc7XG4gIH0gZWxzZSBpZiAoaW5kZXggPT09IDIpIHtcbiAgICByZXR1cm4gJ3onO1xuICB9IGVsc2UgaWYgKGluZGV4ID09PSAzKSB7XG4gICAgcmV0dXJuICd3JztcbiAgfSBlbHNlIGlmIChpbmRleCA9PT0gNCkge1xuICAgIHJldHVybiAndSc7XG4gIH0gZWxzZSBpZiAoaW5kZXggPT09IDUpIHtcbiAgICByZXR1cm4gJ3YnO1xuICB9IGVsc2Uge1xuICAgIHRocm93IEVycm9yKGBJbmRleCAke2luZGV4fSBpcyBub3QgeWV0IHN1cHBvcnRlZGApO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRNYWluSGVhZGVyU3RyaW5nKCk6IHN0cmluZztcbmV4cG9ydCBmdW5jdGlvbiBnZXRNYWluSGVhZGVyU3RyaW5nKGluZGV4OiBzdHJpbmcpOiBzdHJpbmc7XG5leHBvcnQgZnVuY3Rpb24gZ2V0TWFpbkhlYWRlclN0cmluZyguLi5wYXJhbXM6IHN0cmluZ1tdKTogc3RyaW5nIHtcbiAgbGV0IHNuaXBwZXQ6IHN0cmluZztcbiAgc3dpdGNoIChwYXJhbXMubGVuZ3RoKSB7XG4gICAgY2FzZSAwOlxuICAgICAgc25pcHBldCA9IGBcbiAgICAgICAgZm4gbWFpbigpXG4gICAgICBgO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAxOlxuICAgICAgc25pcHBldCA9IGBcbiAgICAgICAgZm4gbWFpbigke3BhcmFtc1swXX0gOiBpMzIpXG4gICAgICBgO1xuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIHRocm93IEVycm9yKCdVbnJlYWNoYWJsZScpO1xuICB9XG4gIHJldHVybiBzbmlwcGV0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0U3RhcnRIZWFkZXJTdHJpbmcoXG4gICAgdXNlR2xvYmFsSW5kZXg6IGJvb2xlYW4sIHByb2dyYW06IFdlYkdQVVByb2dyYW0pOiBzdHJpbmcge1xuICBsZXQgc25pcHBldDogc3RyaW5nO1xuICBzbmlwcGV0ID0gYFxuICAgICAke2dldFdvcmtncm91cFNpemVTdHJpbmcocHJvZ3JhbSl9XG4gICAgICBmbiBfc3RhcnQoQGJ1aWx0aW4obG9jYWxfaW52b2NhdGlvbl9pZCkgTG9jYWxJZCA6IHZlYzM8dTMyPixcbiAgICAgICAgICAgICAgICBAYnVpbHRpbihnbG9iYWxfaW52b2NhdGlvbl9pZCkgR2xvYmFsSWQgOiB2ZWMzPHUzMj4sXG4gICAgICAgICAgICAgICAgQGJ1aWx0aW4obG9jYWxfaW52b2NhdGlvbl9pbmRleCkgTG9jYWxJbmRleDogdTMyLFxuICAgICAgICAgICAgICAgIEBidWlsdGluKHdvcmtncm91cF9pZCkgV29ya2dyb3VwSWQgOiB2ZWMzPHUzMj4sXG4gICAgICAgICAgICAgICAgQGJ1aWx0aW4obnVtX3dvcmtncm91cHMpIE51bVdvcmtncm91cHMgOiB2ZWMzPHUzMj4pIHtcbiAgICAgICAgbG9jYWxJZCA9IExvY2FsSWQ7XG4gICAgICAgIGxvY2FsSW5kZXggPSBMb2NhbEluZGV4O1xuICAgICAgICBnbG9iYWxJZCA9IEdsb2JhbElkO1xuICAgICAgICBudW1Xb3JrZ3JvdXBzID0gTnVtV29ya2dyb3VwcztcbiAgICAgICAgd29ya2dyb3VwSWQgPSBXb3JrZ3JvdXBJZDtcbiAgICAgICAgJHt1c2VHbG9iYWxJbmRleCA/IGBtYWluKGdldEdsb2JhbEluZGV4KCkpO2AgOiBgbWFpbigpO2B9O1xuICAgICAgfVxuICAgIGA7XG4gIHJldHVybiBzbmlwcGV0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0V29ya2dyb3VwU2l6ZVN0cmluZyhwcm9ncmFtOiBXZWJHUFVQcm9ncmFtKTogc3RyaW5nIHtcbiAgcmV0dXJuIGBcbiAgQGNvbXB1dGUgQHdvcmtncm91cF9zaXplKCR7cHJvZ3JhbS53b3JrZ3JvdXBTaXplWzBdfSwgJHtcbiAgICAgIHByb2dyYW0ud29ya2dyb3VwU2l6ZVsxXX0sICR7cHJvZ3JhbS53b3JrZ3JvdXBTaXplWzJdfSlcbmA7XG59XG5cbmZ1bmN0aW9uIG1ha2VTaGFkZXIoXG4gICAgaW5wdXRJbmZvOiBJbnB1dEluZm9bXSwgb3V0cHV0RGF0YToge2R0eXBlOiBEYXRhVHlwZSwgc2hhcGU6IG51bWJlcltdfSxcbiAgICBwcm9ncmFtOiBXZWJHUFVQcm9ncmFtKTogc3RyaW5nIHtcbiAgY29uc3QgcHJlZml4U25pcHBldHM6IHN0cmluZ1tdID0gW107XG4gIGNvbnN0IGZsYXRXb3JrZ3JvdXBTaXplID0gcHJvZ3JhbS53b3JrZ3JvdXBTaXplWzBdICpcbiAgICAgIHByb2dyYW0ud29ya2dyb3VwU2l6ZVsxXSAqIHByb2dyYW0ud29ya2dyb3VwU2l6ZVsyXTtcbiAgcHJvZ3JhbS5vdXRwdXRDb21wb25lbnQgPVxuICAgICAgcHJvZ3JhbS5vdXRwdXRDb21wb25lbnQgPyBwcm9ncmFtLm91dHB1dENvbXBvbmVudCA6IDE7XG4gIHByZWZpeFNuaXBwZXRzLnB1c2goYFxuXG4gICAgICB2YXI8cHJpdmF0ZT4gbG9jYWxJZDogdmVjMzx1MzI+O1xuICAgICAgdmFyPHByaXZhdGU+IGxvY2FsSW5kZXg6IHUzMjtcbiAgICAgIHZhcjxwcml2YXRlPiBnbG9iYWxJZDogdmVjMzx1MzI+O1xuICAgICAgdmFyPHByaXZhdGU+IG51bVdvcmtncm91cHM6IHZlYzM8dTMyPjtcbiAgICAgIHZhcjxwcml2YXRlPiB3b3JrZ3JvdXBJZDogdmVjMzx1MzI+O1xuXG4gICAgICAvLyBPbmx5IHVzZWQgd2hlbiB0aGUgeS96IGRpbWVuc2lvbiBvZiB3b3JrZ3JvdXAgc2l6ZSBpcyAxLlxuICAgICAgZm4gZ2V0R2xvYmFsSW5kZXgoKSAtPiBpMzIge1xuICAgICAgICAke1xuICAgICAgaXNGbGF0RGlzcGF0Y2gocHJvZ3JhbSkgP1xuICAgICAgICAgIGAgIHJldHVybiBpMzIoZ2xvYmFsSWQueCk7YCA6XG4gICAgICAgICAgYCAgcmV0dXJuIGkzMigod29ya2dyb3VwSWQueiAqIG51bVdvcmtncm91cHMueCAqIG51bVdvcmtncm91cHMueSArXG4gICAgICAgICAgICAgICAgd29ya2dyb3VwSWQueSAqIG51bVdvcmtncm91cHMueCArIHdvcmtncm91cElkLngpICogJHtcbiAgICAgICAgICAgICAgZmxhdFdvcmtncm91cFNpemV9dSArXG4gICAgICAgICAgICAgICAgbG9jYWxJbmRleCk7XG4gICAgICAgIGB9XG4gICAgICB9XG4gICAgYCk7XG5cbiAgaWYgKHByb2dyYW0ucGl4ZWxzT3BUeXBlICE9IG51bGwpIHtcbiAgICBjb25zdCBpbm91dFNuaXBwZXQgPSBwcm9ncmFtLnBpeGVsc09wVHlwZSA9PT0gUGl4ZWxzT3BUeXBlLkZST01fUElYRUxTID9cbiAgICAgICAgYEBncm91cCgwKSBAYmluZGluZygwKSB2YXI8c3RvcmFnZSwgcmVhZF93cml0ZT4gcmVzdWx0OiBhcnJheTwke1xuICAgICAgICAgICAgZGF0YVR5cGVUb0dQVVR5cGUob3V0cHV0RGF0YS5kdHlwZSwgcHJvZ3JhbS5vdXRwdXRDb21wb25lbnQpfT47YCA6XG4gICAgICAgIGBAZ3JvdXAoMCkgQGJpbmRpbmcoMSkgdmFyPHN0b3JhZ2UsIHJlYWQ+IGluQnVmIDogYXJyYXk8JHtcbiAgICAgICAgICAgIGRhdGFUeXBlVG9HUFVUeXBlKGlucHV0SW5mb1swXS5kdHlwZSwgcHJvZ3JhbS5vdXRwdXRDb21wb25lbnQpfT47YDtcbiAgICBjb25zdCBvdXRTaGFwZVN0cmlkZXNUeXBlID1cbiAgICAgICAgb3V0cHV0RGF0YS5zaGFwZS5sZW5ndGggPT09IDMgPyAndmVjMjxpMzI+JyA6ICdpMzInO1xuICAgIHByZWZpeFNuaXBwZXRzLnB1c2goYFxuICAgICAgICBzdHJ1Y3QgVW5pZm9ybSB7XG4gICAgICAgICAgb3V0U2hhcGVTdHJpZGVzIDogJHtvdXRTaGFwZVN0cmlkZXNUeXBlfSxcbiAgICAgICAgICBzaXplICAgICAgICAgICAgOiBpMzIsXG4gICAgICAgICAgbnVtQ2hhbm5lbHMgICAgIDogaTMyLFxuICAgICAgICAgIGFscGhhICAgICAgICAgICA6IGYzMixcbiAgICAgICAgfTtcblxuICAgICAgICAke2lub3V0U25pcHBldH1cbiAgICAgICAgQGdyb3VwKDApIEBiaW5kaW5nKDIpIHZhcjx1bmlmb3JtPiB1bmlmb3JtczogVW5pZm9ybTtcbiAgICAgIGApO1xuICAgIGNvbnN0IHVzZUdsb2JhbEluZGV4ID0gaXNGbGF0RGlzcGF0Y2hMYXlvdXQocHJvZ3JhbSk7XG4gICAgcmV0dXJuIFtcbiAgICAgIGNvbW1vblNuaXBwZXQsXG4gICAgICBwcmVmaXhTbmlwcGV0cy5qb2luKCdcXG4nKSxcbiAgICAgIGdldENvb3Jkc0Zyb21JbmRleFNuaXBwZXQob3V0cHV0RGF0YS5zaGFwZSksXG4gICAgICBwcm9ncmFtLmdldFVzZXJDb2RlKCksXG4gICAgICBnZXRTdGFydEhlYWRlclN0cmluZyh1c2VHbG9iYWxJbmRleCwgcHJvZ3JhbSksXG4gICAgXS5qb2luKCdcXG4nKTtcbiAgfVxuXG4gIGxldCBzdHJpZGVzTGVuZ3RoOiBudW1iZXI7XG4gIGxldCBzdHJpZGVzRGF0YVR5cGU6IHN0cmluZztcbiAgbGV0IHVuaWZvcm1EZWNsYXJhdGlvbiA9ICdzdHJ1Y3QgVW5pZm9ybXMgeyBOQU4gOiBmMzIsIElORklOSVRZIDogZjMyLCAnO1xuICBwcm9ncmFtLnZhcmlhYmxlTmFtZXMuZm9yRWFjaCgoeCwgaSkgPT4ge1xuICAgIGNvbnN0IHBlckRhdGFUeXBlID0gZ2V0Q29vcmRzRGF0YVR5cGUoaW5wdXRJbmZvW2ldLnNoYXBlLmxlbmd0aCk7XG4gICAgdW5pZm9ybURlY2xhcmF0aW9uICs9XG4gICAgICAgIGAke3guY2hhckF0KDApLnRvTG93ZXJDYXNlKCkgKyB4LnNsaWNlKDEpfVNoYXBlIDogJHtwZXJEYXRhVHlwZX0sIGA7XG4gICAgc3RyaWRlc0xlbmd0aCA9IGlucHV0SW5mb1tpXS5zaGFwZS5sZW5ndGggLSAxO1xuICAgIHN0cmlkZXNEYXRhVHlwZSA9IGdldENvb3Jkc0RhdGFUeXBlKHN0cmlkZXNMZW5ndGgpO1xuICAgIHVuaWZvcm1EZWNsYXJhdGlvbiArPVxuICAgICAgICBgJHt4LmNoYXJBdCgwKS50b0xvd2VyQ2FzZSgpICsgeC5zbGljZSgxKX1TaGFwZVN0cmlkZXM6ICR7XG4gICAgICAgICAgICBzdHJpZGVzRGF0YVR5cGV9LCBgO1xuICB9KTtcbiAgY29uc3Qgb3V0cHV0RGF0YVR5cGUgPSBnZXRDb29yZHNEYXRhVHlwZShvdXRwdXREYXRhLnNoYXBlLmxlbmd0aCk7XG4gIHVuaWZvcm1EZWNsYXJhdGlvbiArPSBgb3V0U2hhcGUgOiAke291dHB1dERhdGFUeXBlfSwgYDtcbiAgc3RyaWRlc0xlbmd0aCA9IG91dHB1dERhdGEuc2hhcGUubGVuZ3RoIC0gMTtcbiAgc3RyaWRlc0RhdGFUeXBlID0gZ2V0Q29vcmRzRGF0YVR5cGUoc3RyaWRlc0xlbmd0aCk7XG4gIHVuaWZvcm1EZWNsYXJhdGlvbiArPSBgXG4gICAgICAgICBvdXRTaGFwZVN0cmlkZXM6ICR7c3RyaWRlc0RhdGFUeXBlfSwgYDtcblxuICBpZiAocHJvZ3JhbS5zaXplKSB7XG4gICAgdW5pZm9ybURlY2xhcmF0aW9uICs9ICdzaXplIDogaTMyLCAnO1xuICB9XG5cbiAgaWYgKHByb2dyYW0udW5pZm9ybXMpIHtcbiAgICB1bmlmb3JtRGVjbGFyYXRpb24gKz0gcHJvZ3JhbS51bmlmb3JtcztcbiAgfVxuICB1bmlmb3JtRGVjbGFyYXRpb24gKz0gJ307JztcbiAgdW5pZm9ybURlY2xhcmF0aW9uID0gaW5zZXJ0QWxpZ25tZW50KHVuaWZvcm1EZWNsYXJhdGlvbik7XG5cbiAgcHJlZml4U25pcHBldHMucHVzaCh1bmlmb3JtRGVjbGFyYXRpb24pO1xuXG4gIC8vIE91dHB1dCBidWZmZXIuXG4gIGlmIChwcm9ncmFtLmF0b21pYykge1xuICAgIHByZWZpeFNuaXBwZXRzLnB1c2goYFxuICAgICAgQGdyb3VwKDApIEBiaW5kaW5nKDApIHZhcjxzdG9yYWdlLCByZWFkX3dyaXRlPiByZXN1bHQ6IGFycmF5PGF0b21pYzxpMzI+PjtcbiAgICBgKTtcbiAgfSBlbHNlIHtcbiAgICBwcmVmaXhTbmlwcGV0cy5wdXNoKGBcbiAgICAgIEBncm91cCgwKSBAYmluZGluZygwKSB2YXI8c3RvcmFnZSwgcmVhZF93cml0ZT4gcmVzdWx0OiBhcnJheTwke1xuICAgICAgICBkYXRhVHlwZVRvR1BVVHlwZShvdXRwdXREYXRhLmR0eXBlLCBwcm9ncmFtLm91dHB1dENvbXBvbmVudCl9PjtcbiAgICBgKTtcbiAgfVxuICBwcm9ncmFtLnZhcmlhYmxlTmFtZXMuZm9yRWFjaCgoeCwgaSkgPT4ge1xuICAgIHByZWZpeFNuaXBwZXRzLnB1c2goYFxuICAgICAgQGdyb3VwKDApIEBiaW5kaW5nKCR7MSArIGl9KSB2YXI8c3RvcmFnZSwgcmVhZD4gJHt4fTogYXJyYXk8JHtcbiAgICAgICAgcHJvZ3JhbS52YXJpYWJsZUNvbXBvbmVudHMgP1xuICAgICAgICAgICAgZGF0YVR5cGVUb0dQVVR5cGUoXG4gICAgICAgICAgICAgICAgaW5wdXRJbmZvW2ldLmR0eXBlLCBwcm9ncmFtLnZhcmlhYmxlQ29tcG9uZW50c1tpXSkgOlxuICAgICAgICAgICAgZGF0YVR5cGVUb0dQVVR5cGUoaW5wdXRJbmZvW2ldLmR0eXBlLCBwcm9ncmFtLm91dHB1dENvbXBvbmVudCl9PjtcbiAgICAgICAgYCk7XG4gIH0pO1xuXG4gIGlmICh1bmlmb3JtRGVjbGFyYXRpb24gIT09ICcnKSB7XG4gICAgcHJlZml4U25pcHBldHMucHVzaChgXG4gICAgICBAZ3JvdXAoMCkgQGJpbmRpbmcoJHtcbiAgICAgICAgMSArIHByb2dyYW0udmFyaWFibGVOYW1lcy5sZW5ndGh9KSB2YXI8dW5pZm9ybT4gdW5pZm9ybXM6IFVuaWZvcm1zO1xuICAgICAgYCk7XG4gIH1cblxuICBjb25zdCBjb29yZHNTbmlwcGV0ID1cbiAgICAgIGdldE91dHB1dENvb3Jkc1NuaXBwZXQob3V0cHV0RGF0YS5zaGFwZSwgcHJvZ3JhbS5kaXNwYXRjaExheW91dCk7XG5cbiAgY29uc3Qgc291cmNlcyA9IFtcbiAgICBjb21tb25TbmlwcGV0LCBwcmVmaXhTbmlwcGV0cy5qb2luKCdcXG4nKSArIGlzSW5mU25pcHBldCxcbiAgICBnZXRDb29yZHNGcm9tSW5kZXhTbmlwcGV0KG91dHB1dERhdGEuc2hhcGUpLCBjb29yZHNTbmlwcGV0LFxuICAgIGdldE91dHB1dEluZGV4RnJvbUNvb3Jkc1NuaXBwZXQob3V0cHV0RGF0YS5zaGFwZS5sZW5ndGgpXG4gIF07XG4gIGlmICghcHJvZ3JhbS5hdG9taWMpIHtcbiAgICBzb3VyY2VzLnB1c2goc2V0T3V0cHV0U25pcHBldChcbiAgICAgICAgb3V0cHV0RGF0YS5zaGFwZSwgb3V0cHV0RGF0YS5kdHlwZSwgcHJvZ3JhbS5vdXRwdXRDb21wb25lbnQpKTtcbiAgfVxuXG4gIHByb2dyYW0udmFyaWFibGVOYW1lcy5mb3JFYWNoKCh4LCBpKSA9PiB7XG4gICAgc291cmNlcy5wdXNoKGAke2dldENvb3Jkc0Zyb21JbmRleFNuaXBwZXQoaW5wdXRJbmZvW2ldLnNoYXBlLCB4KX1gKTtcbiAgfSk7XG5cbiAgY29uc3QgaW5wdXRTbmlwcGV0ID1cbiAgICAgIGlucHV0SW5mb1xuICAgICAgICAgIC5tYXAoXG4gICAgICAgICAgICAgICh4LCBpKSA9PiBnZXRJbnB1dFNuaXBwZXQoXG4gICAgICAgICAgICAgICAgICB4LCBvdXRwdXREYXRhLnNoYXBlLFxuICAgICAgICAgICAgICAgICAgcHJvZ3JhbS52YXJpYWJsZUNvbXBvbmVudHMgPyBwcm9ncmFtLnZhcmlhYmxlQ29tcG9uZW50c1tpXSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyYW0ub3V0cHV0Q29tcG9uZW50LFxuICAgICAgICAgICAgICAgICAgcHJvZ3JhbS5kaXNwYXRjaExheW91dC54Lmxlbmd0aCA9PT0gb3V0cHV0RGF0YS5zaGFwZS5sZW5ndGgpKVxuICAgICAgICAgIC5qb2luKCdcXG4nKTtcbiAgc291cmNlcy5wdXNoKGlucHV0U25pcHBldCk7XG4gIHNvdXJjZXMucHVzaChwcm9ncmFtLmdldFVzZXJDb2RlKCkpO1xuICBjb25zdCB1c2VHbG9iYWxJbmRleCA9IGlzRmxhdERpc3BhdGNoTGF5b3V0KHByb2dyYW0pO1xuICBzb3VyY2VzLnB1c2goZ2V0U3RhcnRIZWFkZXJTdHJpbmcodXNlR2xvYmFsSW5kZXgsIHByb2dyYW0pKTtcbiAgY29uc3Qgc291cmNlID0gc291cmNlcy5qb2luKCdcXG4nKTtcbiAgcmV0dXJuIHNvdXJjZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VTaGFkZXJLZXk8UiBleHRlbmRzIFJhbms+KFxuICAgIHByb2dyYW06IFdlYkdQVVByb2dyYW0sIGlucHV0c0RhdGE6IElucHV0SW5mb1tdLFxuICAgIG91dHB1dDogVGVuc29ySW5mbyk6IHN0cmluZyB7XG4gIGxldCBrZXkgPSBwcm9ncmFtLnNoYWRlcktleTtcbiAgaWYgKHByb2dyYW0ucGl4ZWxzT3BUeXBlICE9IG51bGwpIHtcbiAgICByZXR1cm4ga2V5O1xuICB9XG5cbiAgY29uc3Qgc2hhcGVzOiBudW1iZXJbXVtdID0gW107XG4gIGNvbnN0IHR5cGVzOiBBcnJheTxrZXlvZiBEYXRhVHlwZU1hcD4gPSBbXTtcbiAgaW5wdXRzRGF0YS5mb3JFYWNoKGVsZW1lbnQgPT4ge1xuICAgIHNoYXBlcy5wdXNoKGVsZW1lbnQuc2hhcGUpO1xuICAgIHR5cGVzLnB1c2goZWxlbWVudC5kdHlwZSk7XG4gIH0pO1xuICBzaGFwZXMucHVzaChvdXRwdXQuc2hhcGUpO1xuICB0eXBlcy5wdXNoKG91dHB1dC5kdHlwZSk7XG5cbiAgY29uc3QgYnJvYWRjYXN0RGltcyA9XG4gICAgICBpbnB1dHNEYXRhLm1hcChkID0+IGJhY2tlbmRfdXRpbC5nZXRCcm9hZGNhc3REaW1zKGQuc2hhcGUsIG91dHB1dC5zaGFwZSkpO1xuICBjb25zdCBpbnB1dFNoYXBlc0VxdWFsc091dFNoYXBlID1cbiAgICAgIGlucHV0c0RhdGEubWFwKGQgPT4gdXRpbC5hcnJheXNFcXVhbChkLnNoYXBlLCBvdXRwdXQuc2hhcGUpKS5qb2luKCdfJyk7XG4gIGNvbnN0IGJyb2FkY2FzdERpbXNLZXkgPSBicm9hZGNhc3REaW1zLm1hcChkID0+IGQuam9pbignXycpKS5qb2luKCc7Jyk7XG5cbiAgY29uc3QgZmxhdERpc3BhdGNoU3RyaW5nID0gaXNGbGF0RGlzcGF0Y2gocHJvZ3JhbSkgPyAnZmxhdERpc3BhdGNoJyA6ICcnO1xuXG4gIGtleSArPSAnXycgKyAocHJvZ3JhbS53b3JrZ3JvdXBTaXplID8gcHJvZ3JhbS53b3JrZ3JvdXBTaXplLmpvaW4oJywnKSA6ICcnKSArXG4gICAgICBzaGFwZXMubWFwKHNoYXBlID0+IHNoYXBlLmxlbmd0aCkuam9pbignLCcpICsgdHlwZXMuam9pbignLCcpICtcbiAgICAgIHByb2dyYW0udmFyaWFibGVOYW1lcy5qb2luKCcsJykgKyBicm9hZGNhc3REaW1zS2V5ICtcbiAgICAgIGlucHV0U2hhcGVzRXF1YWxzT3V0U2hhcGUgKyBmbGF0RGlzcGF0Y2hTdHJpbmc7XG5cbiAgcmV0dXJuIGtleTtcbn1cblxuY29uc3QgY29tbW9uU25pcHBldCA9IGBcbiAgc3RydWN0IHZlYzUge3g6IGkzMiwgeTogaTMyLCB6OiBpMzIsIHc6IGkzMiwgdTogaTMyfTtcbiAgc3RydWN0IHZlYzYge3g6IGkzMiwgeTogaTMyLCB6OiBpMzIsIHc6IGkzMiwgdTogaTMyLCB2OiBpMzJ9O1xuXG4gIC8vIENoZWNrcyB3aGV0aGVyIGNvb3JkaW5hdGVzIGxpZSB3aXRoaW4gdGhlIGJvdW5kcyBvZiB0aGUgc2hhcGUuXG4gIGZuIGNvb3Jkc0luQm91bmRzMkQoY29vcmQgOiB2ZWMyPGkzMj4sIHNoYXBlIDogdmVjMjxpMzI+KSAtPiBib29sIHtcbiAgICByZXR1cm4gYWxsKGNvb3JkID49IHZlYzI8aTMyPigwKSkgJiYgYWxsKGNvb3JkIDwgc2hhcGUpO1xuICB9XG4gIGZuIGNvb3Jkc0luQm91bmRzM0QoY29vcmQgOiB2ZWMzPGkzMj4sIHNoYXBlIDogdmVjMzxpMzI+KSAtPiBib29sIHtcbiAgICByZXR1cm4gYWxsKGNvb3JkID49IHZlYzM8aTMyPigwKSkgJiYgYWxsKGNvb3JkIDwgc2hhcGUpO1xuICB9XG4gIGZuIGNvb3Jkc0luQm91bmRzNEQoY29vcmQgOiB2ZWM0PGkzMj4sIHNoYXBlIDogdmVjNDxpMzI+KSAtPiBib29sIHtcbiAgICByZXR1cm4gYWxsKGNvb3JkID49IHZlYzQ8aTMyPigwKSkgJiYgYWxsKGNvb3JkIDwgc2hhcGUpO1xuICB9XG5cbiAgZm4gZ2V0SW5kZXhGcm9tQ29vcmRzMUQoY29vcmQgOiBpMzIsIHNoYXBlIDogaTMyKSAtPiBpMzIge1xuICAgIHJldHVybiBjb29yZDtcbiAgfVxuICBmbiBnZXRJbmRleEZyb21Db29yZHMyRChjb29yZHMgOiB2ZWMyPGkzMj4sIHNoYXBlIDogdmVjMjxpMzI+KSAtPiBpMzIge1xuICAgIHJldHVybiBkb3QoY29vcmRzLCB2ZWMyPGkzMj4oc2hhcGUueSwgMSkpO1xuICB9XG4gIGZuIGdldEluZGV4RnJvbUNvb3JkczNEKGNvb3JkcyA6IHZlYzM8aTMyPiwgc2hhcGUgOiB2ZWMzPGkzMj4pIC0+IGkzMiB7XG4gICAgcmV0dXJuIGRvdChjb29yZHMsIHZlYzM8aTMyPihzaGFwZS55ICogc2hhcGUueiwgc2hhcGUueiwgMSkpO1xuICB9XG4gIGZuIGdldEluZGV4RnJvbUNvb3JkczREKGNvb3JkcyA6IHZlYzQ8aTMyPiwgc2hhcGUgOiB2ZWM0PGkzMj4pIC0+IGkzMiB7XG4gICAgcmV0dXJuIGRvdChjb29yZHMsIHZlYzQ8aTMyPihcbiAgICAgICAgc2hhcGUueSAqIHNoYXBlLnogKiBzaGFwZS53LCBzaGFwZS56ICogc2hhcGUudywgc2hhcGUudywgMSkpO1xuICB9XG4gIGZuIGdldEluZGV4RnJvbUNvb3JkczVEKGNvb3JkcyA6IHZlYzUsIHNoYXBlIDogdmVjNSkgLT4gaTMyIHtcbiAgICBsZXQgc2hhcGVTdHJpZGVzOiB2ZWM1ID0gdmVjNShzaGFwZS55ICogc2hhcGUueiAqIHNoYXBlLncgKiBzaGFwZS51LCBzaGFwZS56ICogc2hhcGUudyAqIHNoYXBlLnUsIHNoYXBlLncgKiBzaGFwZS51LCBzaGFwZS51LCAxKTtcbiAgICByZXR1cm4gY29vcmRzLngqc2hhcGVTdHJpZGVzLnggKyBjb29yZHMueSpzaGFwZVN0cmlkZXMueSArIGNvb3Jkcy56KnNoYXBlU3RyaWRlcy56ICsgY29vcmRzLncqc2hhcGVTdHJpZGVzLncgKyBjb29yZHMudSpzaGFwZVN0cmlkZXMudTtcbiAgfVxuICBmbiBnZXRJbmRleEZyb21Db29yZHM2RChjb29yZHMgOiB2ZWM2LCBzaGFwZSA6IHZlYzYpIC0+IGkzMiB7XG4gICAgbGV0IHNoYXBlU3RyaWRlczogdmVjNiA9IHZlYzYoc2hhcGUueSAqIHNoYXBlLnogKiBzaGFwZS53ICogc2hhcGUudSAqIHNoYXBlLnYsIHNoYXBlLnogKiBzaGFwZS53ICogc2hhcGUudSAqIHNoYXBlLnYsIHNoYXBlLncgKiBzaGFwZS51ICogc2hhcGUudiwgc2hhcGUudSAqIHNoYXBlLnYsIHNoYXBlLnYsIDEpO1xuICAgIHJldHVybiBjb29yZHMueCpzaGFwZVN0cmlkZXMueCArIGNvb3Jkcy55KnNoYXBlU3RyaWRlcy55ICsgY29vcmRzLnoqc2hhcGVTdHJpZGVzLnogKyBjb29yZHMudypzaGFwZVN0cmlkZXMudyArIGNvb3Jkcy51KnNoYXBlU3RyaWRlcy51ICsgY29vcmRzLnYqc2hhcGVTdHJpZGVzLnY7XG4gIH1cblxuICAvLyBOYU4gZGVmaW5hdGlvbiBpbiBJRUVFIDc1NC0xOTg1IGlzIDpcbiAgLy8gICAtIHNpZ24gPSBlaXRoZXIgMCBvciAxLlxuICAvLyAgIC0gYmlhc2VkIGV4cG9uZW50ID0gYWxsIDEgYml0cy5cbiAgLy8gICAtIGZyYWN0aW9uID0gYW55dGhpbmcgZXhjZXB0IGFsbCAwIGJpdHMgKHNpbmNlIGFsbCAwIGJpdHMgcmVwcmVzZW50cyBpbmZpbml0eSkuXG4gIC8vIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0lFRUVfNzU0LTE5ODUjUmVwcmVzZW50YXRpb25fb2Zfbm9uLW51bWJlcnNcbiAgZm4gaXNuYW4odmFsOiBmMzIpIC0+IGJvb2wge1xuICAgIGxldCBmbG9hdFRvVWludDogdTMyID0gYml0Y2FzdDx1MzI+KHZhbCk7XG4gICAgcmV0dXJuIChmbG9hdFRvVWludCAmIDB4N2ZmZmZmZmZ1KSA+IDB4N2Y4MDAwMDB1O1xuICB9XG4gIGZuIGlzbmFuVmVjNCh2YWwgOiB2ZWM0PGYzMj4pIC0+IHZlYzQ8Ym9vbD4ge1xuICAgIGxldCBmbG9hdFRvVWludDogdmVjNDx1MzI+ID0gYml0Y2FzdDx2ZWM0PHUzMj4+KHZhbCk7XG4gICAgcmV0dXJuIChmbG9hdFRvVWludCAmIHZlYzQ8dTMyPigweDdmZmZmZmZmdSkpID4gdmVjNDx1MzI+KDB4N2Y4MDAwMDB1KTtcbiAgfVxuYDtcblxuY29uc3QgaXNJbmZTbmlwcGV0ID0gYFxuICBmbiBpc2luZih2YWw6IGYzMikgLT4gYm9vbCB7XG4gICAgcmV0dXJuIGFicyh2YWwpID09IHVuaWZvcm1zLklORklOSVRZO1xuICB9XG5gO1xuXG50eXBlIElucHV0SW5mbyA9IHtcbiAgZHR5cGU6IERhdGFUeXBlOyBzaGFwZTogbnVtYmVyW107IG5hbWU6IHN0cmluZztcbn07XG5cbi8qKlxuICogRGVyaXZlcyBsb2dpY2FsIGNvb3JkaW5hdGVzIGZyb20gYSBmbGF0IGluZGV4LiBQZXJmb3JtcyBpbnRlZ2VyIGRpdmlzaW9uXG4gKiB3aXRoIGVhY2ggc3RyaWRlIGFuZCBkZWNyZW1lbnRzIHRoZSBpbmRleCB1bnRpbCB0aGUgaW5kZXggZXF1YWxzIHRoZSBmaW5hbFxuICogZGltZW5zaW9uIGNvb3JkaW5hdGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb29yZHNGcm9tSW5kZXhTbmlwcGV0KHNoYXBlOiBudW1iZXJbXSwgbmFtZSA9ICcnKTogc3RyaW5nIHtcbiAgY29uc3QgcmFuayA9IHNoYXBlLmxlbmd0aDtcbiAgY29uc3QgZnVuY05hbWUgPSBuYW1lICE9PSAnJyA/XG4gICAgICBgZ2V0JHtuYW1lLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgbmFtZS5zbGljZSgxKX1Db29yZHNGcm9tSW5kZXhgIDpcbiAgICAgICdnZXRDb29yZHNGcm9tSW5kZXgnO1xuICBjb25zdCBzdHJpZGVzTmFtZSA9IG5hbWUgIT09ICcnID9cbiAgICAgIGAke25hbWUuY2hhckF0KDApLnRvTG93ZXJDYXNlKCkgKyBuYW1lLnNsaWNlKDEpfVNoYXBlU3RyaWRlc2AgOlxuICAgICAgYG91dFNoYXBlU3RyaWRlc2A7XG5cbiAgaWYgKHJhbmsgPD0gMSkge1xuICAgIHJldHVybiBgZm4gJHtmdW5jTmFtZX0oaW5kZXggOiBpMzIpIC0+IGkzMiB7IHJldHVybiBpbmRleDsgfWA7XG4gIH1cblxuICBjb25zdCBzdHJpZGVzID0gdXRpbC5jb21wdXRlU3RyaWRlcyhzaGFwZSk7XG4gIGNvbnN0IGR0eXBlID0gZ2V0Q29vcmRzRGF0YVR5cGUocmFuayk7XG5cbiAgY29uc3QgY29vcmRzOiBzdHJpbmdbXSA9IFtdO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHJhbms7IGkrKykge1xuICAgIGNvb3Jkcy5wdXNoKGBkJHtpfWApO1xuICB9XG5cbiAgaWYgKHN0cmlkZXMubGVuZ3RoID09PSAxKSB7XG4gICAgcmV0dXJuIGAgICAgZm4gJHtmdW5jTmFtZX0oaW5kZXggOiBpMzIpIC0+IHZlYzI8aTMyPiB7XG4gICAgICBsZXQgZDAgPSBpbmRleCAvIHVuaWZvcm1zLiR7XG4gICAgICAgIHN0cmlkZXNOYW1lfTsgbGV0IGQxID0gaW5kZXggLSBkMCAqIHVuaWZvcm1zLiR7c3RyaWRlc05hbWV9O1xuICAgICAgcmV0dXJuIHZlYzI8aTMyPihkMCwgZDEpO1xuICAgIH1gO1xuICB9XG4gIGxldCBzbmlwcGV0O1xuICBzbmlwcGV0ID0gJ3ZhciBpbmRleDIgPSBpbmRleDsnICtcbiAgICAgIHN0cmlkZXNcbiAgICAgICAgICAubWFwKChfLCBpKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBsaW5lMSA9IGBsZXQgJHtjb29yZHNbaV19ID0gaW5kZXgyIC8gdW5pZm9ybXMuJHtcbiAgICAgICAgICAgICAgICBzdHJpZGVzTmFtZX0uJHtnZXRDb29yZHNYWVooaSl9YDtcbiAgICAgICAgICAgIGNvbnN0IGxpbmUyID0gaSA9PT0gc3RyaWRlcy5sZW5ndGggLSAxID9cbiAgICAgICAgICAgICAgICBgbGV0ICR7Y29vcmRzW2kgKyAxXX0gPSBpbmRleDIgLSAke2Nvb3Jkc1tpXX0gKiB1bmlmb3Jtcy4ke1xuICAgICAgICAgICAgICAgICAgICBzdHJpZGVzTmFtZX0uJHtnZXRDb29yZHNYWVooaSl9YCA6XG4gICAgICAgICAgICAgICAgYGluZGV4MiA9IGluZGV4MiAtICR7Y29vcmRzW2ldfSAqIHVuaWZvcm1zLiR7c3RyaWRlc05hbWV9LiR7XG4gICAgICAgICAgICAgICAgICAgIGdldENvb3Jkc1hZWihpKX1gO1xuICAgICAgICAgICAgcmV0dXJuIGAke2xpbmUxfTsgJHtsaW5lMn07YDtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5qb2luKCcnKTtcblxuICByZXR1cm4gYFxuICAgIGZuICR7ZnVuY05hbWV9KGluZGV4IDogaTMyKSAtPiAke2R0eXBlfSB7XG4gICAgICAke3NuaXBwZXR9XG4gICAgICByZXR1cm4gJHtkdHlwZX0oJHtjb29yZHMuam9pbignLCcpfSk7XG4gICAgfVxuICBgO1xufVxuXG5mdW5jdGlvbiBnZXRJbnB1dEF0Q29vcmRzU25pcHBldChcbiAgICBpbnB1dEluZm86IElucHV0SW5mbywgY29tcG9uZW50OiBudW1iZXIpOiBzdHJpbmcge1xuICBjb25zdCB0ZXhOYW1lID0gaW5wdXRJbmZvLm5hbWU7XG4gIGNvbnN0IHJhbmsgPSBpbnB1dEluZm8uc2hhcGUubGVuZ3RoO1xuICBjb25zdCB0eXBlID0gZ2V0Q29vcmRzRGF0YVR5cGUocmFuayk7XG4gIGNvbnN0IGZ1bmNOYW1lID0gJ2dldCcgKyB0ZXhOYW1lLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgdGV4TmFtZS5zbGljZSgxKTtcbiAgY29uc3QgZGltcyA9IFsnZDAnLCAnZDEnLCAnZDInLCAnZDMnLCAnZDQnLCAnZDUnXS5zbGljZSgwLCByYW5rKTtcbiAgY29uc3QgaW5wdXRzID0gZGltcy5tYXAoZCA9PiBgJHtkfSA6IGkzMmApLmpvaW4oJywgJyk7XG5cbiAgaWYgKHJhbmsgPCAxKSB7XG4gICAgcmV0dXJuIGBcbiAgICAgIGZuICR7ZnVuY05hbWV9KCkgLT4gJHt0eXBlU25pcHBldChjb21wb25lbnQpfSB7XG4gICAgICAgIHJldHVybiAke3R5cGVTbmlwcGV0KGNvbXBvbmVudCl9KCR7dGV4TmFtZX1bMF0pO1xuICAgICAgfVxuICAgIGA7XG4gIH1cblxuICBjb25zdCBzaGFwZVN0ciA9XG4gICAgICBgdW5pZm9ybXMuJHt0ZXhOYW1lLmNoYXJBdCgwKS50b0xvd2VyQ2FzZSgpICsgdGV4TmFtZS5zbGljZSgxKX1TaGFwZWA7XG4gIGxldCByYW5rU3RyID0gYCR7cmFua31EYDtcbiAgaWYgKHJhbmsgPT09IDApIHtcbiAgICByYW5rU3RyID0gJzFEJztcbiAgfVxuXG4gIHJldHVybiBgXG4gICAgZm4gJHtmdW5jTmFtZX0oJHtpbnB1dHN9KSAtPiAke3R5cGVTbmlwcGV0KGNvbXBvbmVudCl9IHtcbiAgICAgIHJldHVybiAke3R5cGVTbmlwcGV0KGNvbXBvbmVudCl9KCR7dGV4TmFtZX1bZ2V0SW5kZXhGcm9tQ29vcmRzJHtcbiAgICAgIHJhbmtTdHJ9KCR7dHlwZX0oJHtkaW1zLmpvaW4oJywnKX0pLFxuICAgICAgICAke3NoYXBlU3RyfSkke2NvbXBvbmVudCA9PT0gMSA/ICcnIDogYCAvICR7Y29tcG9uZW50fWB9XSk7XG4gICAgfVxuICAgYDtcbn1cblxuZnVuY3Rpb24gZ2V0SW5wdXRCeU91dHB1dFNuaXBwZXQoXG4gICAgaW5wdXRJbmZvOiBJbnB1dEluZm8sIG91dFNoYXBlOiBudW1iZXJbXSwgY29tcG9uZW50OiBudW1iZXIsXG4gICAgaXNGbGF0RGlzcGF0Y2hMYXlvdXQ6IGJvb2xlYW4pOiBzdHJpbmcge1xuICBjb25zdCB0ZXhOYW1lID0gaW5wdXRJbmZvLm5hbWU7XG4gIGNvbnN0IHRleEZ1bmNTbmlwcGV0ID0gdGV4TmFtZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHRleE5hbWUuc2xpY2UoMSk7XG5cbiAgY29uc3QgZnVuY05hbWUgPSAnZ2V0JyArIHRleEZ1bmNTbmlwcGV0ICsgJ0J5T3V0cHV0JztcblxuICBjb25zdCBpblJhbmsgPSBpbnB1dEluZm8uc2hhcGUubGVuZ3RoO1xuICBjb25zdCBvdXRSYW5rID0gb3V0U2hhcGUubGVuZ3RoO1xuICBjb25zdCB0eXBlID0gZ2V0Q29vcmRzRGF0YVR5cGUob3V0UmFuayk7XG5cbiAgLy8gSWYgdGhlIGluU2hhcGUgZXF1YWxzIHRoZSBvdXRTaGFwZSBhbmQgdGhlIGRpc3BhdGNoIGxheW91dCBpcyBmbGF0LCB3ZSBjYW5cbiAgLy8gZGlyZWN0bHkgdXNlIHxnbF9HbG9iYWxJbnZvY2F0aW9uSUQueHwgYXMgdGhlIGluZGV4IGFuZCBkb24ndCBuZWVkIGNvb3Jkc1xuICAvLyBjb252ZXJzaW9uIGJldHdlZW4gdGhlc2UgdHdvIHNoYXBlcy5cbiAgaWYgKHV0aWwuYXJyYXlzRXF1YWwoaW5wdXRJbmZvLnNoYXBlLCBvdXRTaGFwZSkgJiYgaXNGbGF0RGlzcGF0Y2hMYXlvdXQpIHtcbiAgICByZXR1cm4gYFxuICAgIGZuICR7ZnVuY05hbWV9SW5kZXgoZ2xvYmFsSW5kZXggOiBpMzIpIC0+ICR7dHlwZVNuaXBwZXQoY29tcG9uZW50KX0ge1xuICAgICAgcmV0dXJuICR7dHlwZVNuaXBwZXQoY29tcG9uZW50KX0oJHt0ZXhOYW1lfVtnbG9iYWxJbmRleF0pO1xuICAgIH1cblxuICAgIGZuICR7ZnVuY05hbWV9Q29vcmRzKGNvb3JkcyA6ICR7dHlwZX0pIC0+ICR7dHlwZVNuaXBwZXQoY29tcG9uZW50KX0ge1xuICAgICAgcmV0dXJuICR7dHlwZVNuaXBwZXQoY29tcG9uZW50KX0oJHt0ZXhOYW1lfVske1xuICAgICAgICBvdXRSYW5rID4gMSA/ICdnZXRPdXRwdXRJbmRleEZyb21Db29yZHMoY29vcmRzKScgOlxuICAgICAgICAgICAgICAgICAgICAgICdjb29yZHMnfSR7Y29tcG9uZW50ID09PSAxID8gJycgOiBgIC8gJHtjb21wb25lbnR9YH1dKTtcbiAgICB9XG4gICAgYDtcbiAgfVxuXG4gIGNvbnN0IGJyb2FkY2FzdERpbXMgPVxuICAgICAgYmFja2VuZF91dGlsLmdldEJyb2FkY2FzdERpbXMoaW5wdXRJbmZvLnNoYXBlLCBvdXRTaGFwZSk7XG4gIGNvbnN0IHJhbmtEaWZmID0gb3V0UmFuayAtIGluUmFuaztcblxuICBsZXQgY29vcmRzU25pcHBldCA9ICcnO1xuXG4gIGlmIChpblJhbmsgPT09IDApIHtcbiAgICByZXR1cm4gYFxuICAgIGZuICR7ZnVuY05hbWV9SW5kZXgoZ2xvYmFsSW5kZXggOiBpMzIpIC0+ICR7dHlwZVNuaXBwZXQoY29tcG9uZW50KX17XG4gICAgICByZXR1cm4gZ2V0JHt0ZXhGdW5jU25pcHBldH0oKTtcbiAgICB9XG5cbiAgICBmbiAke2Z1bmNOYW1lfUNvb3Jkcyhjb29yZHMgOiAke3R5cGV9KSAtPiAke3R5cGVTbmlwcGV0KGNvbXBvbmVudCl9e1xuICAgICAgcmV0dXJuIGdldCR7dGV4RnVuY1NuaXBwZXR9KCk7XG4gICAgfVxuICBgO1xuICB9IGVsc2Uge1xuICAgIGlmIChvdXRSYW5rIDwgMiAmJiBicm9hZGNhc3REaW1zLmxlbmd0aCA+PSAxKSB7XG4gICAgICBjb29yZHNTbmlwcGV0ID0gJ2Nvb3JkcyA9IDA7JztcbiAgICB9IGVsc2Uge1xuICAgICAgY29vcmRzU25pcHBldCA9XG4gICAgICAgICAgYnJvYWRjYXN0RGltcy5tYXAoZCA9PiBgY29vcmRzLiR7Z2V0Q29vcmRzWFlaKGQgKyByYW5rRGlmZil9ID0gMDtgKVxuICAgICAgICAgICAgICAuam9pbignXFxuJyk7XG4gICAgfVxuICB9XG5cbiAgbGV0IHVucGFja2VkQ29vcmRzU25pcHBldCA9ICcnO1xuICBpZiAob3V0UmFuayA8IDIgJiYgaW5SYW5rID4gMCkge1xuICAgIHVucGFja2VkQ29vcmRzU25pcHBldCA9ICdjb29yZHMnO1xuICB9IGVsc2Uge1xuICAgIGlmIChvdXRSYW5rID4gMSkge1xuICAgICAgY29uc3QgY29vcmRzVHlwZSA9IGdldENvb3Jkc0RhdGFUeXBlKGluUmFuayk7XG4gICAgICBjb25zdCBjb29yZHNWYWx1ZXMgPVxuICAgICAgICAgIGlucHV0SW5mby5zaGFwZS5tYXAoKHMsIGkpID0+IGBjb29yZHMuJHtnZXRDb29yZHNYWVooaSArIHJhbmtEaWZmKX1gKVxuICAgICAgICAgICAgICAuam9pbignLCAnKTtcbiAgICAgIHVucGFja2VkQ29vcmRzU25pcHBldCA9IGAke2Nvb3Jkc1R5cGV9KCR7Y29vcmRzVmFsdWVzfSlgO1xuICAgIH0gZWxzZSB7XG4gICAgICB1bnBhY2tlZENvb3Jkc1NuaXBwZXQgPSAnY29vcmRzJztcbiAgICB9XG4gIH1cblxuICBjb25zdCBzaGFwZVN0ciA9XG4gICAgICBgdW5pZm9ybXMuJHt0ZXhOYW1lLmNoYXJBdCgwKS50b0xvd2VyQ2FzZSgpICsgdGV4TmFtZS5zbGljZSgxKX1TaGFwZWA7XG4gIGNvbnN0IHJhbmtTdHIgPSBgJHtpblJhbmt9RGA7XG5cbiAgcmV0dXJuIGBcbiAgZm4gJHtmdW5jTmFtZX1JbmRleChnbG9iYWxJbmRleCA6IGkzMikgLT4gJHt0eXBlU25pcHBldChjb21wb25lbnQpfSB7XG4gICAgdmFyIGNvb3JkcyA9IGdldENvb3Jkc0Zyb21JbmRleChnbG9iYWxJbmRleCk7XG4gICAgJHtjb29yZHNTbmlwcGV0fVxuICAgIHJldHVybiAke3R5cGVTbmlwcGV0KGNvbXBvbmVudCl9KCR7dGV4TmFtZX1bZ2V0SW5kZXhGcm9tQ29vcmRzJHtyYW5rU3RyfSgke1xuICAgICAgdW5wYWNrZWRDb29yZHNTbmlwcGV0fSwgJHtzaGFwZVN0cn0pJHtcbiAgICAgIGNvbXBvbmVudCA9PT0gMSA/ICcnIDogYCAvICR7Y29tcG9uZW50fWB9XSk7XG4gIH1cblxuICBmbiAke2Z1bmNOYW1lfUNvb3Jkcyhjb29yZHNJbiA6ICR7dHlwZX0pIC0+ICR7dHlwZVNuaXBwZXQoY29tcG9uZW50KX0ge1xuICAgIHZhciBjb29yZHMgPSBjb29yZHNJbjtcbiAgICAke2Nvb3Jkc1NuaXBwZXR9XG4gICAgcmV0dXJuICR7dHlwZVNuaXBwZXQoY29tcG9uZW50KX0oJHt0ZXhOYW1lfVtnZXRJbmRleEZyb21Db29yZHMke3JhbmtTdHJ9KCR7XG4gICAgICB1bnBhY2tlZENvb3Jkc1NuaXBwZXR9LCAke3NoYXBlU3RyfSkke1xuICAgICAgY29tcG9uZW50ID09PSAxID8gJycgOiBgIC8gJHtjb21wb25lbnR9YH1dKTtcbiAgfVxuYDtcbn1cblxuZnVuY3Rpb24gZ2V0SW5wdXRTbmlwcGV0KFxuICAgIGlucHV0SW5mbzogSW5wdXRJbmZvLCBvdXRTaGFwZTogbnVtYmVyW10sIGNvbXBvbmVudDogbnVtYmVyLFxuICAgIGlzRmxhdERpc3BhdGNoTGF5b3V0OiBib29sZWFuKTogc3RyaW5nIHtcbiAgbGV0IHJlcyA9IGdldElucHV0QXRDb29yZHNTbmlwcGV0KGlucHV0SW5mbywgY29tcG9uZW50KTtcblxuICBjb25zdCBpblNoYXBlID0gaW5wdXRJbmZvLnNoYXBlO1xuICBpZiAoaW5TaGFwZS5sZW5ndGggPD0gb3V0U2hhcGUubGVuZ3RoKSB7XG4gICAgcmVzICs9IGdldElucHV0QnlPdXRwdXRTbmlwcGV0KFxuICAgICAgICBpbnB1dEluZm8sIG91dFNoYXBlLCBjb21wb25lbnQsIGlzRmxhdERpc3BhdGNoTGF5b3V0KTtcbiAgfVxuXG4gIHJldHVybiByZXM7XG59XG5cbi8qKlxuICogR2VuZXJhdGVzIGdldE91dHB1dENvb3JkcygpIGZ1bmN0aW9uIHRoYXQgY29tcHV0ZXMgb3V0cHV0IGNvb3JkaW5hdGVzXG4gKiBmcm9tIGRpc3BhdGNoIGdlb21ldHJ5IHRvIHJlZHVjZSBhcml0aG1ldGljLlxuICovXG5mdW5jdGlvbiBnZXRPdXRwdXRDb29yZHNTbmlwcGV0KFxuICAgIG91dFNoYXBlOiBudW1iZXJbXSxcbiAgICBkaXNwYXRjaExheW91dDoge3g6IG51bWJlcltdLCB5PzogbnVtYmVyW10sIHo/OiBudW1iZXJbXX0pOiBzdHJpbmcge1xuICBjb25zdCB7eCwgeSA9IFtdLCB6ID0gW119ID0gZGlzcGF0Y2hMYXlvdXQ7XG5cbiAgY29uc3Qgb3V0UmFuayA9IG91dFNoYXBlLmxlbmd0aDtcbiAgY29uc3QgcmFuayA9IHgubGVuZ3RoICsgeS5sZW5ndGggKyB6Lmxlbmd0aDtcbiAgLy8gZ2V0T3V0cHV0Q29vcmRzIGlzIG9ubHkgbWVhbmluZ2Z1bCB3aGVuIHRoZSBvdXRwdXQgcmFuayBpcyBzYW1lIHdpdGhcbiAgLy8gZGlzcGF0Y2ggbGF5b3V0IHJhbmsuXG4gIGlmIChyYW5rICE9PSBvdXRSYW5rKSB7XG4gICAgcmV0dXJuICcnO1xuICB9XG5cbiAgaWYgKHgubGVuZ3RoID09PSBvdXRSYW5rKSB7XG4gICAgY29uc3QgZHR5cGUgPSBnZXRDb29yZHNEYXRhVHlwZShvdXRSYW5rKTtcbiAgICBjb25zdCBzbmlwcGV0ID0gYGZuIGdldE91dHB1dENvb3JkcygpIC0+ICR7ZHR5cGV9e1xuICAgIGxldCBnbG9iYWxJbmRleCA9IGdldEdsb2JhbEluZGV4KCk7XG4gICAgcmV0dXJuIGdldENvb3Jkc0Zyb21JbmRleChnbG9iYWxJbmRleCk7XG4gIH1cbiAgYDtcbiAgICByZXR1cm4gc25pcHBldDtcbiAgfVxuXG4gIGxldCBnYXRoZXJEaW1lbnNpb25zU3RyID0gJyc7XG4gIGNvbnN0IGRpbXMgPSBbeCwgeSwgel07XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBkaW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgYXJyID0gZGltc1tpXTtcblxuICAgIGlmIChhcnIubGVuZ3RoID09PSAwKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICBpZiAoYXJyLmxlbmd0aCA9PT0gMSkge1xuICAgICAgZ2F0aGVyRGltZW5zaW9uc1N0ciArPSBgbGV0IGQke2FyclswXX0gPSBpMzIoZ2xvYmFsSWRbJHtpfV0pO2A7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHN0cmlkZXMgPSBzeW1ib2xpY2FsbHlDb21wdXRlU3RyaWRlcyhhcnIsICd1bmlmb3Jtcy5vdXRTaGFwZScpO1xuICAgICAgZ2F0aGVyRGltZW5zaW9uc1N0ciArPSBgdmFyIGluZGV4JHtpfSA9IGkzMihnbG9iYWxJZFske2l9XSk7YDtcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgc3RyaWRlcy5sZW5ndGg7IGorKykge1xuICAgICAgICBnYXRoZXJEaW1lbnNpb25zU3RyICs9IGBsZXQgZCR7YXJyW2pdfSA9IGluZGV4JHtpfSAvICR7c3RyaWRlc1tqXX07YDtcblxuICAgICAgICBpZiAoaiA9PT0gc3RyaWRlcy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgZ2F0aGVyRGltZW5zaW9uc1N0ciArPSBgbGV0IGQke2FycltqICsgMV19ID0gYCArXG4gICAgICAgICAgICAgIGBpbmRleCR7aX0gLSBkJHthcnJbal19ICogJHtzdHJpZGVzW2pdfTtgO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGdhdGhlckRpbWVuc2lvbnNTdHIgKz1cbiAgICAgICAgICAgICAgYGluZGV4JHtpfSA9IGluZGV4JHtpfSAtIGQke2FycltqXX0gKiAke3N0cmlkZXNbal19O2A7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBjb25zdCBkaW1lbnNpb25zID0gW107XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgcmFuazsgaSsrKSB7XG4gICAgZGltZW5zaW9ucy5wdXNoKGBkJHtpfWApO1xuICB9XG5cbiAgY29uc3QgZHR5cGUgPSBnZXRDb29yZHNEYXRhVHlwZShyYW5rKTtcbiAgbGV0IHNuaXBwZXQgPSBgZm4gZ2V0T3V0cHV0Q29vcmRzKCkgLT4gJHtkdHlwZX0ge1xuICAke2dhdGhlckRpbWVuc2lvbnNTdHJ9XG5gO1xuICBpZiAoZGltZW5zaW9ucy5sZW5ndGggPT09IDApIHtcbiAgICBzbmlwcGV0ICs9IGByZXR1cm4gJHtkdHlwZX0oMCk7IH1gO1xuICB9IGVsc2Uge1xuICAgIHNuaXBwZXQgKz0gYHJldHVybiAke2R0eXBlfSgke2RpbWVuc2lvbnMuam9pbignLCcpfSk7IH1gO1xuICB9XG5cbiAgcmV0dXJuIHNuaXBwZXQ7XG59XG5cbmZ1bmN0aW9uIGdldE91dHB1dEluZGV4RnJvbUNvb3Jkc1NuaXBwZXQob3V0UmFuazogbnVtYmVyKSB7XG4gIGxldCBzbmlwcGV0ID0gJyc7XG4gIHN3aXRjaCAob3V0UmFuaykge1xuICAgIGNhc2UgMDpcbiAgICBjYXNlIDE6XG4gICAgICBzbmlwcGV0ICs9IGBcbiAgICAgICAgZm4gZ2V0T3V0cHV0SW5kZXhGcm9tQ29vcmRzKGNvb3JkcyA6IGkzMikgLT4gaTMyIHtcbiAgICAgICAgICByZXR1cm4gY29vcmRzO1xuICAgICAgICB9XG4gICAgICAgIGA7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDI6XG4gICAgICBzbmlwcGV0ICs9IGBcbiAgICAgICAgZm4gZ2V0T3V0cHV0SW5kZXhGcm9tQ29vcmRzKGNvb3JkcyA6IHZlYzI8aTMyPikgLT4gaTMyIHtcbiAgICAgICAgICByZXR1cm4gZG90KGNvb3JkcywgdmVjMjxpMzI+KHVuaWZvcm1zLm91dFNoYXBlU3RyaWRlcywgMSkpO1xuICAgICAgICB9XG4gICAgICAgIGA7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDM6XG4gICAgICBzbmlwcGV0ICs9IGBcbiAgICAgICAgZm4gZ2V0T3V0cHV0SW5kZXhGcm9tQ29vcmRzKGNvb3JkcyA6IHZlYzM8aTMyPikgLT4gaTMyIHtcbiAgICAgICAgICByZXR1cm4gZG90KGNvb3JkcywgdmVjMzxpMzI+KHVuaWZvcm1zLm91dFNoYXBlU3RyaWRlcy54LCB1bmlmb3Jtcy5vdXRTaGFwZVN0cmlkZXMueSwgMSkpO1xuICAgICAgICB9XG4gICAgICAgIGA7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDQ6XG4gICAgICBzbmlwcGV0ICs9IGBcbiAgICAgICAgZm4gZ2V0T3V0cHV0SW5kZXhGcm9tQ29vcmRzKGNvb3JkcyA6IHZlYzQ8aTMyPikgLT4gaTMyIHtcbiAgICAgICAgICByZXR1cm4gZG90KGNvb3JkcywgdmVjNDxpMzI+KFxuICAgICAgICAgICAgdW5pZm9ybXMub3V0U2hhcGVTdHJpZGVzLngsIHVuaWZvcm1zLm91dFNoYXBlU3RyaWRlcy55LCB1bmlmb3Jtcy5vdXRTaGFwZVN0cmlkZXMueiwgMSkpO1xuICAgICAgICB9XG4gICAgICAgIGA7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDU6XG4gICAgICBzbmlwcGV0ICs9IGBcbiAgICAgICAgZm4gZ2V0T3V0cHV0SW5kZXhGcm9tQ29vcmRzKGNvb3JkcyA6IHZlYzUpIC0+IGkzMiB7XG4gICAgICAgICAgcmV0dXJuIGNvb3Jkcy54ICogdW5pZm9ybXMub3V0U2hhcGVTdHJpZGVzLnggK1xuICAgICAgICAgICAgICBjb29yZHMueSAqIHVuaWZvcm1zLm91dFNoYXBlU3RyaWRlcy55ICtcbiAgICAgICAgICAgICAgY29vcmRzLnogKiB1bmlmb3Jtcy5vdXRTaGFwZVN0cmlkZXMueiArXG4gICAgICAgICAgICAgIGNvb3Jkcy53ICogdW5pZm9ybXMub3V0U2hhcGVTdHJpZGVzLncgK1xuICAgICAgICAgICAgICBjb29yZHMudTtcbiAgICAgICAgfVxuICAgICAgICBgO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSA2OlxuICAgICAgc25pcHBldCArPSBgXG4gICAgICAgIGZuIGdldE91dHB1dEluZGV4RnJvbUNvb3Jkcyhjb29yZHMgOiB2ZWM2KSAtPiBpMzIge1xuICAgICAgICAgIHJldHVybiBjb29yZHMueCAqIHVuaWZvcm1zLm91dFNoYXBlU3RyaWRlcy54ICtcbiAgICAgICAgICAgICAgY29vcmRzLnkgKiB1bmlmb3Jtcy5vdXRTaGFwZVN0cmlkZXMueSArXG4gICAgICAgICAgICAgIGNvb3Jkcy56ICogdW5pZm9ybXMub3V0U2hhcGVTdHJpZGVzLnogK1xuICAgICAgICAgICAgICBjb29yZHMudyAqIHVuaWZvcm1zLm91dFNoYXBlU3RyaWRlcy53ICtcbiAgICAgICAgICAgICAgY29vcmRzLnUgKiB1bmlmb3Jtcy5vdXRTaGFwZVN0cmlkZXMudSArXG4gICAgICAgICAgICAgIGNvb3Jkcy52O1xuICAgICAgICB9XG4gICAgICAgIGA7XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgdXRpbC5hc3NlcnQoZmFsc2UsICgpID0+IGBVbnN1cHBvcnRlZCAke291dFJhbmt9RCBzaGFwZWApO1xuICAgICAgYnJlYWs7XG4gIH1cbiAgcmV0dXJuIHNuaXBwZXQ7XG59XG5cbmZ1bmN0aW9uIGlzRmxhdERpc3BhdGNoKHByb2dyYW06IFdlYkdQVVByb2dyYW0pOiBib29sZWFuIHtcbiAgcmV0dXJuIHByb2dyYW0uZGlzcGF0Y2hbMV0gPT09IDEgJiYgcHJvZ3JhbS5kaXNwYXRjaFsyXSA9PT0gMTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRhdGFUeXBlVG9HUFVUeXBlKHR5cGU6IERhdGFUeXBlLCBjb21wb25lbnQgPSAxKSB7XG4gIGlmICh0eXBlID09PSAnZmxvYXQzMicpIHtcbiAgICByZXR1cm4gdHlwZVNuaXBwZXQoY29tcG9uZW50LCAnZjMyJyk7XG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gJ2ludDMyJyB8fCB0eXBlID09PSAnYm9vbCcpIHtcbiAgICByZXR1cm4gdHlwZVNuaXBwZXQoY29tcG9uZW50LCAnaTMyJyk7XG4gIH1cbiAgdGhyb3cgbmV3IEVycm9yKGB0eXBlICR7dHlwZX0gaXMgbm90IHN1cHBvcnRlZC5gKTtcbn1cblxuZnVuY3Rpb24gc2V0T3V0cHV0U25pcHBldChcbiAgICBvdXRTaGFwZTogbnVtYmVyW10sIG91dEJ1ZmZlclR5cGU6IERhdGFUeXBlLCBjb21wb25lbnQ6IG51bWJlcik6IHN0cmluZyB7XG4gIGNvbnN0IG91dFJhbmsgPSBvdXRTaGFwZS5sZW5ndGg7XG4gIGNvbnN0IGdwdVR5cGUgPSBkYXRhVHlwZVRvR1BVVHlwZShvdXRCdWZmZXJUeXBlLCBjb21wb25lbnQpO1xuICBsZXQgc25pcHBldCA9XG4gICAgICBgZm4gc2V0T3V0cHV0QXRJbmRleChmbGF0SW5kZXggOiBpMzIsIHZhbHVlIDogJHt0eXBlU25pcHBldChjb21wb25lbnQpfSkge1xuICAgICAgcmVzdWx0W2ZsYXRJbmRleF0gPSAke2dwdVR5cGV9KHZhbHVlKTtcbiAgICB9XG5cbiAgICBmbiBzZXRPdXRwdXRBdEluZGV4STMyKGZsYXRJbmRleCA6IGkzMiwgdmFsdWUgOiAke1xuICAgICAgICAgIHR5cGVTbmlwcGV0KGNvbXBvbmVudCwgJ2kzMicpfSkge1xuICAgICAgcmVzdWx0W2ZsYXRJbmRleF0gPSAke2dwdVR5cGV9KHZhbHVlKTtcbiAgICB9XG4gICAgYDtcbiAgaWYgKG91dFJhbmsgPj0gMikge1xuICAgIGNvbnN0IGRpbXMgPSBbJ2QwJywgJ2QxJywgJ2QyJywgJ2QzJywgJ2Q0JywgJ2Q1J10uc2xpY2UoMCwgb3V0UmFuayk7XG4gICAgY29uc3QgdHlwZSA9IGdldENvb3Jkc0RhdGFUeXBlKG91dFJhbmspO1xuXG4gICAgc25pcHBldCArPSBgXG4gICAgICBmbiBzZXRPdXRwdXRBdENvb3Jkcygke2RpbXMubWFwKGQgPT4gYCR7ZH0gOiBpMzJgKS5qb2luKCcsICcpfSwgdmFsdWUgOiAke1xuICAgICAgICB0eXBlU25pcHBldChjb21wb25lbnQpfSkge1xuICAgICAgICBsZXQgZmxhdEluZGV4ID0gZ2V0T3V0cHV0SW5kZXhGcm9tQ29vcmRzKCR7dHlwZX0oJHtkaW1zLmpvaW4oJywgJyl9KSk7XG4gICAgICAgIHNldE91dHB1dEF0SW5kZXgoZmxhdEluZGV4JHtcbiAgICAgICAgY29tcG9uZW50ID09PSAxID8gJycgOiBgIC8gJHtjb21wb25lbnR9YH0sIHZhbHVlKTtcbiAgICAgIH1cbiAgICAgIGZuIHNldE91dHB1dEF0Q29vcmRzSTMyKCR7XG4gICAgICAgIGRpbXMubWFwKGQgPT4gYCR7ZH0gOiBpMzJgKS5qb2luKCcsICcpfSwgdmFsdWUgOiAke1xuICAgICAgICB0eXBlU25pcHBldChjb21wb25lbnQsICdpMzInKX0pIHtcbiAgICAgICAgbGV0IGZsYXRJbmRleCA9IGdldE91dHB1dEluZGV4RnJvbUNvb3Jkcygke3R5cGV9KCR7ZGltcy5qb2luKCcsICcpfSkpO1xuICAgICAgICBzZXRPdXRwdXRBdEluZGV4STMyKGZsYXRJbmRleCR7XG4gICAgICAgIGNvbXBvbmVudCA9PT0gMSA/ICcnIDogYCAvICR7Y29tcG9uZW50fWB9LCB2YWx1ZSk7XG4gICAgICB9XG4gICAgYDtcbiAgfVxuXG4gIHJldHVybiBzbmlwcGV0O1xufVxuXG5mdW5jdGlvbiBpbnNlcnRBbGlnbm1lbnQodW5pZm9ybVNoYWRlcjogc3RyaW5nKSB7XG4gIC8vIGluc2VydCBhbGlnbm1lbnQgd2hlbiBjdXJyZW50IHBhdHRlcm4gaXMgdmVjNSBvciB2ZWM2XG4gIGNvbnN0IGN1ckluc2VydFJlID0gLyhcXHcrKVxccyo6XFxzKnZlYyg1fDYpL2c7XG4gIHVuaWZvcm1TaGFkZXIgPSB1bmlmb3JtU2hhZGVyLnJlcGxhY2UoY3VySW5zZXJ0UmUsIChtYXRjaCkgPT4ge1xuICAgIHJldHVybiAnQGFsaWduKDE2KSAnICsgbWF0Y2g7XG4gIH0pO1xuXG4gIC8vIGluc2VydCBhbGlnbm1lbnQgd2hlbiBwcmV2aW91cyBwYXR0ZXJuIGlzIHZlYzUgb3IgdmVjNlxuICBjb25zdCBwcmVJbnNlcnRSZSA9IC92ZWMoNXw2KVxccyosXFxzKihcXHcrKS9nO1xuICB1bmlmb3JtU2hhZGVyID0gdW5pZm9ybVNoYWRlci5yZXBsYWNlKHByZUluc2VydFJlLCAoXywgcDEsIHAyKSA9PiB7XG4gICAgcmV0dXJuIGB2ZWMke3AxfSwgQGFsaWduKDE2KSAke3AyfWA7XG4gIH0pO1xuICByZXR1cm4gdW5pZm9ybVNoYWRlcjtcbn1cbmZ1bmN0aW9uIGlzRmxhdERpc3BhdGNoTGF5b3V0KHByb2dyYW06IFdlYkdQVVByb2dyYW0pOiBib29sZWFuIHtcbiAgaWYgKHByb2dyYW0uZGlzcGF0Y2hMYXlvdXQuaGFzT3duUHJvcGVydHkoJ3knKSAmJlxuICAgICAgcHJvZ3JhbS5kaXNwYXRjaExheW91dC55Lmxlbmd0aCAhPT0gMCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAocHJvZ3JhbS5kaXNwYXRjaExheW91dC5oYXNPd25Qcm9wZXJ0eSgneicpICYmXG4gICAgICBwcm9ncmFtLmRpc3BhdGNoTGF5b3V0LnoubGVuZ3RoICE9PSAwKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiB0cnVlO1xufVxuIl19","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { util } from '@tensorflow/tfjs-core';\nconst arrayProduct = (arr) => {\n    let product = 1;\n    for (let i = 0; i < arr.length; i++) {\n        product *= arr[i];\n    }\n    return product;\n};\nexport function tilesFitEvenlyIntoShape(tileSize, shape) {\n    if (tileSize.length !== shape.length) {\n        throw new Error(`Cannot compute whether rank ${tileSize.length}` +\n            ` tiles fit evenly into rank ${shape.length} shape` +\n            ` - ranks must match.`);\n    }\n    return shape.every((dim, dimIdx) => dim % tileSize[dimIdx] === 0);\n}\n// Computes dispatch geometry based on layout of output dimensions and\n// workgroupSize.\nexport function computeDispatch(layout, outputShape, workgroupSize = [1, 1, 1], elementsPerThread = [1, 1, 1]) {\n    const [dispatchX, dispatchY, dispatchZ] = [\n        Math.ceil(arrayProduct(layout.x.map(d => outputShape[d])) /\n            (workgroupSize[0] * elementsPerThread[0])),\n        layout.y ? Math.ceil(arrayProduct(layout.y.map(d => outputShape[d])) /\n            (workgroupSize[1] * elementsPerThread[1])) :\n            1,\n        layout.z ? Math.ceil(arrayProduct(layout.z.map(d => outputShape[d])) /\n            (workgroupSize[2] * elementsPerThread[2])) :\n            1\n    ];\n    return [dispatchX, dispatchY, dispatchZ];\n}\nexport function computeWorkgroupInfoForMatMul(dimAOuter, dimInner, dimBOuter, transposeA = false) {\n    // These are experimental values. Usually, we need to adjust the work group\n    // size based on the input shapes to improve the EU occupancy.\n    // TODO: WebGPU limits the maximum allowed shared memory size as 16K. To make\n    // sure it doesn't exceed this limitations. Temporarily reduce the work group\n    // size to [8, 8, 1] and the work per thread size is [4, 4, 1]. But we should\n    // revisit it and find the balance between work group size and work per thread\n    // size.\n    const workgroupSize = [8, 8, 1];\n    const elementsPerThread = [4, 4, 1];\n    if (!transposeA) {\n        if (dimAOuter <= 8) {\n            elementsPerThread[1] = 1;\n        }\n        if (dimInner <= 16 && dimBOuter <= 16) {\n            workgroupSize[0] = 4;\n        }\n    }\n    return { workgroupSize, elementsPerThread };\n}\nexport function computeWorkgroupSizeForConv2d(layout, outputShape, isVec4 = false) {\n    if (isVec4) {\n        return [8, 8, 1];\n    }\n    const dim0 = arrayProduct(layout.x.map(d => outputShape[d]));\n    const dim1 = arrayProduct(layout.y.map(d => outputShape[d]));\n    // TODO(jiajia.qin@intel.com): More fine tune based on outputShape.\n    // These are experimental values. Usually, we need to adjust the work group\n    // size based on the output shape. For example, when one dimension is smaller\n    // than 4, it will be wasteful if we assign a larger size for this dimension,\n    // which results lots of threads doing useless work and reduces parallelism\n    // of hardware threads. But it is always a balance between work group size\n    // and shared memory. If one dimension is too small, such as 1, shared memory\n    // will won't be fully utilized.\n    if (dim0 <= 4) {\n        return [4, 16, 1];\n    }\n    if (dim1 <= 4) {\n        return [16, 4, 1];\n    }\n    return [16, 16, 1];\n}\nexport function computeWorkPerThreadForConv2d(layout, outputShape, isVec4 = false) {\n    if (isVec4) {\n        return [4, 4, 1];\n    }\n    const dim0 = arrayProduct(layout.x.map(d => outputShape[d]));\n    const dim1 = arrayProduct(layout.y.map(d => outputShape[d]));\n    // TODO(jiajia.qin@intel.com): More fine tune based on outputShape.\n    // The following conditions correspond to the values set in\n    // computeWorkgroupSizeForConv2d.\n    if (dim0 <= 4) {\n        return [1, 2, 1];\n    }\n    if (dim1 <= 4) {\n        return [2, 1, 1];\n    }\n    return [2, 2, 1];\n}\nexport function flatDispatchLayout(shape) {\n    return { x: shape.map((d, i) => i) };\n}\nexport function GPUBytesPerElement(dtype) {\n    if (dtype === 'float32' || dtype === 'int32' || dtype === 'bool' ||\n        dtype === 'string') {\n        return 4;\n    }\n    else if (dtype === 'complex64') {\n        return 8;\n    }\n    else {\n        throw new Error(`Unknown dtype ${dtype}`);\n    }\n}\nexport function isWebGPUSupported() {\n    return !!(typeof globalThis !== 'undefined' && (globalThis.navigator)\n        && (globalThis.navigator.gpu));\n}\nexport function assertNotComplex(tensor, opName) {\n    if (!Array.isArray(tensor)) {\n        tensor = [tensor];\n    }\n    tensor.forEach(t => {\n        if (t != null) {\n            util.assert(t.dtype !== 'complex64', () => `${opName} does not support complex64 tensors ` +\n                'in the WebGPU backend.');\n        }\n    });\n}\nexport var MatMulProgramType;\n(function (MatMulProgramType) {\n    MatMulProgramType[MatMulProgramType[\"MatMulReduceProgram\"] = 0] = \"MatMulReduceProgram\";\n    MatMulProgramType[MatMulProgramType[\"MatMulSplitKProgram\"] = 1] = \"MatMulSplitKProgram\";\n    MatMulProgramType[MatMulProgramType[\"MatMulSmallOutputSizeProgram\"] = 2] = \"MatMulSmallOutputSizeProgram\";\n    MatMulProgramType[MatMulProgramType[\"MatMulPackedProgram\"] = 3] = \"MatMulPackedProgram\";\n    MatMulProgramType[MatMulProgramType[\"MatMulMax\"] = 4] = \"MatMulMax\";\n})(MatMulProgramType || (MatMulProgramType = {}));\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2ViZ3B1X3V0aWwuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy93ZWJncHVfdXRpbC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFDSCxPQUFPLEVBQXVCLElBQUksRUFBQyxNQUFNLHVCQUF1QixDQUFDO0FBRWpFLE1BQU0sWUFBWSxHQUFHLENBQUMsR0FBYSxFQUFFLEVBQUU7SUFDckMsSUFBSSxPQUFPLEdBQUcsQ0FBQyxDQUFDO0lBQ2hCLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxHQUFHLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO1FBQ25DLE9BQU8sSUFBSSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7S0FDbkI7SUFDRCxPQUFPLE9BQU8sQ0FBQztBQUNqQixDQUFDLENBQUM7QUFFRixNQUFNLFVBQVUsdUJBQXVCLENBQ25DLFFBQWtCLEVBQUUsS0FBZTtJQUNyQyxJQUFJLFFBQVEsQ0FBQyxNQUFNLEtBQUssS0FBSyxDQUFDLE1BQU0sRUFBRTtRQUNwQyxNQUFNLElBQUksS0FBSyxDQUNYLCtCQUErQixRQUFRLENBQUMsTUFBTSxFQUFFO1lBQ2hELCtCQUErQixLQUFLLENBQUMsTUFBTSxRQUFRO1lBQ25ELHNCQUFzQixDQUFDLENBQUM7S0FDN0I7SUFDRCxPQUFPLEtBQUssQ0FBQyxLQUFLLENBQ2QsQ0FBQyxHQUFXLEVBQUUsTUFBYyxFQUFFLEVBQUUsQ0FBQyxHQUFHLEdBQUcsUUFBUSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO0FBQ3JFLENBQUM7QUFFRCxzRUFBc0U7QUFDdEUsaUJBQWlCO0FBQ2pCLE1BQU0sVUFBVSxlQUFlLENBQzNCLE1BQWlELEVBQUUsV0FBcUIsRUFDeEUsZ0JBQTBDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMs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QU0sc0NBQXNDO2dCQUNqRCx3QkFBd0IsQ0FBQyxDQUFDO1NBQ25DO0lBQ0gsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDO0FBRUQsTUFBTSxDQUFOLElBQVksaUJBTVg7QUFORCxXQUFZLGlCQUFpQjtJQUMzQix1RkFBbUIsQ0FBQTtJQUNuQix1RkFBbUIsQ0FBQTtJQUNuQix5R0FBNEIsQ0FBQTtJQUM1Qix1RkFBbUIsQ0FBQTtJQUNuQixtRUFBUyxDQUFBO0FBQ1gsQ0FBQyxFQU5XLGlCQUFpQixLQUFqQixpQkFBaUIsUUFNNUIiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5pbXBvcnQge0RhdGFUeXBlLCBUZW5zb3JJbmZvLCB1dGlsfSBmcm9tICdAdGVuc29yZmxvdy90ZmpzLWNvcmUnO1xuXG5jb25zdCBhcnJheVByb2R1Y3QgPSAoYXJyOiBudW1iZXJbXSkgPT4ge1xuICBsZXQgcHJvZHVjdCA9IDE7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgcHJvZHVjdCAqPSBhcnJbaV07XG4gIH1cbiAgcmV0dXJuIHByb2R1Y3Q7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gdGlsZXNGaXRFdmVubHlJbnRvU2hhcGUoXG4gICAgdGlsZVNpemU6IG51bWJlcltdLCBzaGFwZTogbnVtYmVyW10pOiBib29sZWFuIHtcbiAgaWYgKHRpbGVTaXplLmxlbmd0aCAhPT0gc2hhcGUubGVuZ3RoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgQ2Fubm90IGNvbXB1dGUgd2hldGhlciByYW5rICR7dGlsZVNpemUubGVuZ3RofWAgK1xuICAgICAgICBgIHRpbGVzIGZpdCBldmVubHkgaW50byByYW5rICR7c2hhcGUubGVuZ3RofSBzaGFwZWAgK1xuICAgICAgICBgIC0gcmFua3MgbXVzdCBtYXRjaC5gKTtcbiAgfVxuICByZXR1cm4gc2hhcGUuZXZlcnkoXG4gICAgICAoZGltOiBudW1iZXIsIGRpbUlkeDogbnVtYmVyKSA9PiBkaW0gJSB0aWxlU2l6ZVtkaW1JZHhdID09PSAwKTtcbn1cblxuLy8gQ29tcHV0ZXMgZGlzcGF0Y2ggZ2VvbWV0cnkgYmFzZWQgb24gbGF5b3V0IG9mIG91dHB1dCBkaW1lbnNpb25zIGFuZFxuLy8gd29ya2dyb3VwU2l6ZS5cbmV4cG9ydCBmdW5jdGlvbiBjb21wdXRlRGlzcGF0Y2goXG4gICAgbGF5b3V0OiB7eDogbnVtYmVyW10sIHk/OiBudW1iZXJbXSwgej86IG51bWJlcltdfSwgb3V0cHV0U2hhcGU6IG51bWJlcltdLFxuICAgIHdvcmtncm91cFNpemU6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXSA9IFsxLCAxLCAxXSxcbiAgICBlbGVtZW50c1BlclRocmVhZDogW251bWJlciwgbnVtYmVyLCBudW1iZXJdID1cbiAgICAgICAgWzEsIDEsIDFdKTogW251bWJlciwgbnVtYmVyLCBudW1iZXJdIHtcbiAgY29uc3QgW2Rpc3BhdGNoWCwgZGlzcGF0Y2hZLCBkaXNwYXRjaFpdID0gW1xuICAgIE1hdGguY2VpbChcbiAgICAgICAgYXJyYXlQcm9kdWN0KGxheW91dC54Lm1hcChkID0+IG91dHB1dFNoYXBlW2RdKSkgL1xuICAgICAgICAod29ya2dyb3VwU2l6ZVswXSAqIGVsZW1lbnRzUGVyVGhyZWFkWzBdKSksXG4gICAgbGF5b3V0LnkgPyBNYXRoLmNlaWwoXG4gICAgICAgICAgICAgICAgICAgYXJyYXlQcm9kdWN0KGxheW91dC55Lm1hcChkID0+IG91dHB1dFNoYXBlW2RdKSkgL1xuICAgICAgICAgICAgICAgICAgICh3b3JrZ3JvdXBTaXplWzFdICogZWxlbWVudHNQZXJUaHJlYWRbMV0pKSA6XG4gICAgICAgICAgICAgICAxLFxuICAgIGxheW91dC56ID8gTWF0aC5jZWlsKFxuICAgICAgICAgICAgICAgICAgIGFycmF5UHJvZHVjdChsYXlvdXQuei5tYXAoZCA9PiBvdXRwdXRTaGFwZVtkXSkpIC9cbiAgICAgICAgICAgICAgICAgICAod29ya2dyb3VwU2l6ZVsyXSAqIGVsZW1lbnRzUGVyVGhyZWFkWzJdKSkgOlxuICAgICAgICAgICAgICAgMVxuICBdO1xuICByZXR1cm4gW2Rpc3BhdGNoWCwgZGlzcGF0Y2hZLCBkaXNwYXRjaFpdO1xufVxuXG5leHBvcnQgdHlwZSBXb3JrZ3JvdXBJbmZvID0ge1xuICB3b3JrZ3JvdXBTaXplOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl0sXG4gIGVsZW1lbnRzUGVyVGhyZWFkOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl0sXG59O1xuXG5leHBvcnQgZnVuY3Rpb24gY29tcHV0ZVdvcmtncm91cEluZm9Gb3JNYXRNdWwoXG4gICAgZGltQU91dGVyOiBudW1iZXIsIGRpbUlubmVyOiBudW1iZXIsIGRpbUJPdXRlcjogbnVtYmVyLFxuICAgIHRyYW5zcG9zZUEgPSBmYWxzZSk6IFdvcmtncm91cEluZm8ge1xuICAvLyBUaGVzZSBhcmUgZXhwZXJpbWVudGFsIHZhbHVlcy4gVXN1YWxseSwgd2UgbmVlZCB0byBhZGp1c3QgdGhlIHdvcmsgZ3JvdXBcbiAgLy8gc2l6ZSBiYXNlZCBvbiB0aGUgaW5wdXQgc2hhcGVzIHRvIGltcHJvdmUgdGhlIEVVIG9jY3VwYW5jeS5cbiAgLy8gVE9ETzogV2ViR1BVIGxpbWl0cyB0aGUgbWF4aW11bSBhbGxvd2VkIHNoYXJlZCBtZW1vcnkgc2l6ZSBhcyAxNksuIFRvIG1ha2VcbiAgLy8gc3VyZSBpdCBkb2Vzbid0IGV4Y2VlZCB0aGlzIGxpbWl0YXRpb25zLiBUZW1wb3JhcmlseSByZWR1Y2UgdGhlIHdvcmsgZ3JvdXBcbiAgLy8gc2l6ZSB0byBbOCwgOCwgMV0gYW5kIHRoZSB3b3JrIHBlciB0aHJlYWQgc2l6ZSBpcyBbNCwgNCwgMV0uIEJ1dCB3ZSBzaG91bGRcbiAgLy8gcmV2aXNpdCBpdCBhbmQgZmluZCB0aGUgYmFsYW5jZSBiZXR3ZWVuIHdvcmsgZ3JvdXAgc2l6ZSBhbmQgd29yayBwZXIgdGhyZWFkXG4gIC8vIHNpemUuXG4gIGNvbnN0IHdvcmtncm91cFNpemU6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXSA9IFs4LCA4LCAxXTtcbiAgY29uc3QgZWxlbWVudHNQZXJUaHJlYWQ6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXSA9IFs0LCA0LCAxXTtcblxuICBpZiAoIXRyYW5zcG9zZUEpIHtcbiAgICBpZiAoZGltQU91dGVyIDw9IDgpIHtcbiAgICAgIGVsZW1lbnRzUGVyVGhyZWFkWzFdID0gMTtcbiAgICB9XG5cbiAgICBpZiAoZGltSW5uZXIgPD0gMTYgJiYgZGltQk91dGVyIDw9IDE2KSB7XG4gICAgICB3b3JrZ3JvdXBTaXplWzBdID0gNDtcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge3dvcmtncm91cFNpemUsIGVsZW1lbnRzUGVyVGhyZWFkfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbXB1dGVXb3JrZ3JvdXBTaXplRm9yQ29udjJkKFxuICAgIGxheW91dDoge3g6IG51bWJlcltdLCB5PzogbnVtYmVyW10sIHo/OiBudW1iZXJbXX0sIG91dHB1dFNoYXBlOiBudW1iZXJbXSxcbiAgICBpc1ZlYzQgPSBmYWxzZSk6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXSB7XG4gIGlmIChpc1ZlYzQpIHtcbiAgICByZXR1cm4gWzgsIDgsIDFdO1xuICB9XG5cbiAgY29uc3QgZGltMCA9IGFycmF5UHJvZHVjdChsYXlvdXQueC5tYXAoZCA9PiBvdXRwdXRTaGFwZVtkXSkpO1xuICBjb25zdCBkaW0xID0gYXJyYXlQcm9kdWN0KGxheW91dC55Lm1hcChkID0+IG91dHB1dFNoYXBlW2RdKSk7XG4gIC8vIFRPRE8oamlhamlhLnFpbkBpbnRlbC5jb20pOiBNb3JlIGZpbmUgdHVuZSBiYXNlZCBvbiBvdXRwdXRTaGFwZS5cbiAgLy8gVGhlc2UgYXJlIGV4cGVyaW1lbnRhbCB2YWx1ZXMuIFVzdWFsbHksIHdlIG5lZWQgdG8gYWRqdXN0IHRoZSB3b3JrIGdyb3VwXG4gIC8vIHNpemUgYmFzZWQgb24gdGhlIG91dHB1dCBzaGFwZS4gRm9yIGV4YW1wbGUsIHdoZW4gb25lIGRpbWVuc2lvbiBpcyBzbWFsbGVyXG4gIC8vIHRoYW4gNCwgaXQgd2lsbCBiZSB3YXN0ZWZ1bCBpZiB3ZSBhc3NpZ24gYSBsYXJnZXIgc2l6ZSBmb3IgdGhpcyBkaW1lbnNpb24sXG4gIC8vIHdoaWNoIHJlc3VsdHMgbG90cyBvZiB0aHJlYWRzIGRvaW5nIHVzZWxlc3Mgd29yayBhbmQgcmVkdWNlcyBwYXJhbGxlbGlzbVxuICAvLyBvZiBoYXJkd2FyZSB0aHJlYWRzLiBCdXQgaXQgaXMgYWx3YXlzIGEgYmFsYW5jZSBiZXR3ZWVuIHdvcmsgZ3JvdXAgc2l6ZVxuICAvLyBhbmQgc2hhcmVkIG1lbW9yeS4gSWYgb25lIGRpbWVuc2lvbiBpcyB0b28gc21hbGwsIHN1Y2ggYXMgMSwgc2hhcmVkIG1lbW9yeVxuICAvLyB3aWxsIHdvbid0IGJlIGZ1bGx5IHV0aWxpemVkLlxuICBpZiAoZGltMCA8PSA0KSB7XG4gICAgcmV0dXJuIFs0LCAxNiwgMV07XG4gIH1cbiAgaWYgKGRpbTEgPD0gNCkge1xuICAgIHJldHVybiBbMTYsIDQsIDFdO1xuICB9XG5cbiAgcmV0dXJuIFsxNiwgMTYsIDFdO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY29tcHV0ZVdvcmtQZXJUaHJlYWRGb3JDb252MmQoXG4gICAgbGF5b3V0OiB7eDogbnVtYmVyW10sIHk/OiBudW1iZXJbXSwgej86IG51bWJlcltdfSwgb3V0cHV0U2hhcGU6IG51bWJlcltdLFxuICAgIGlzVmVjNCA9IGZhbHNlKTogW251bWJlciwgbnVtYmVyLCBudW1iZXJdIHtcbiAgaWYgKGlzVmVjNCkge1xuICAgIHJldHVybiBbNCwgNCwgMV07XG4gIH1cblxuICBjb25zdCBkaW0wID0gYXJyYXlQcm9kdWN0KGxheW91dC54Lm1hcChkID0+IG91dHB1dFNoYXBlW2RdKSk7XG4gIGNvbnN0IGRpbTEgPSBhcnJheVByb2R1Y3QobGF5b3V0LnkubWFwKGQgPT4gb3V0cHV0U2hhcGVbZF0pKTtcbiAgLy8gVE9ETyhqaWFqaWEucWluQGludGVsLmNvbSk6IE1vcmUgZmluZSB0dW5lIGJhc2VkIG9uIG91dHB1dFNoYXBlLlxuICAvLyBUaGUgZm9sbG93aW5nIGNvbmRpdGlvbnMgY29ycmVzcG9uZCB0byB0aGUgdmFsdWVzIHNldCBpblxuICAvLyBjb21wdXRlV29ya2dyb3VwU2l6ZUZvckNvbnYyZC5cbiAgaWYgKGRpbTAgPD0gNCkge1xuICAgIHJldHVybiBbMSwgMiwgMV07XG4gIH1cbiAgaWYgKGRpbTEgPD0gNCkge1xuICAgIHJldHVybiBbMiwgMSwgMV07XG4gIH1cblxuICByZXR1cm4gWzIsIDIsIDFdO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZmxhdERpc3BhdGNoTGF5b3V0KHNoYXBlOiBudW1iZXJbXSkge1xuICByZXR1cm4ge3g6IHNoYXBlLm1hcCgoZCwgaSkgPT4gaSl9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gR1BVQnl0ZXNQZXJFbGVtZW50KGR0eXBlOiBEYXRhVHlwZSk6IG51bWJlciB7XG4gIGlmIChkdHlwZSA9PT0gJ2Zsb2F0MzInIHx8IGR0eXBlID09PSAnaW50MzInIHx8IGR0eXBlID09PSAnYm9vbCcgfHxcbiAgICAgIGR0eXBlID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiA0O1xuICB9IGVsc2UgaWYgKGR0eXBlID09PSAnY29tcGxleDY0Jykge1xuICAgIHJldHVybiA4O1xuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBkdHlwZSAke2R0eXBlfWApO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1dlYkdQVVN1cHBvcnRlZCgpOiBib29sZWFuIHtcbiAgcmV0dXJuICEhKHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyAmJiAoZ2xvYmFsVGhpcy5uYXZpZ2F0b3IpXG4gICAgJiYgKGdsb2JhbFRoaXMubmF2aWdhdG9yLmdwdSkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0Tm90Q29tcGxleChcbiAgICB0ZW5zb3I6IFRlbnNvckluZm98VGVuc29ySW5mb1tdLCBvcE5hbWU6IHN0cmluZyk6IHZvaWQge1xuICBpZiAoIUFycmF5LmlzQXJyYXkodGVuc29yKSkge1xuICAgIHRlbnNvciA9IFt0ZW5zb3JdO1xuICB9XG4gIHRlbnNvci5mb3JFYWNoKHQgPT4ge1xuICAgIGlmICh0ICE9IG51bGwpIHtcbiAgICAgIHV0aWwuYXNzZXJ0KFxuICAgICAgICAgIHQuZHR5cGUgIT09ICdjb21wbGV4NjQnLFxuICAgICAgICAgICgpID0+IGAke29wTmFtZX0gZG9lcyBub3Qgc3VwcG9ydCBjb21wbGV4NjQgdGVuc29ycyBgICtcbiAgICAgICAgICAgICAgJ2luIHRoZSBXZWJHUFUgYmFja2VuZC4nKTtcbiAgICB9XG4gIH0pO1xufVxuXG5leHBvcnQgZW51bSBNYXRNdWxQcm9ncmFtVHlwZSB7XG4gIE1hdE11bFJlZHVjZVByb2dyYW0sXG4gIE1hdE11bFNwbGl0S1Byb2dyYW0sXG4gIE1hdE11bFNtYWxsT3V0cHV0U2l6ZVByb2dyYW0sXG4gIE1hdE11bFBhY2tlZFByb2dyYW0sXG4gIE1hdE11bE1heFxufVxuIl19","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport './flags_webgpu';\nimport { backend_util, buffer, DataStorage, engine, env, KernelBackend, util } from '@tensorflow/tfjs-core';\nimport { AdapterInfo } from './adapter_info';\nimport { BufferManager } from './buffer_manager';\nimport { TextureManager } from './texture_manager';\nimport * as webgpu_program from './webgpu_program';\nimport * as webgpu_util from './webgpu_util';\n// Empirically determined constant used to determine size threshold for handing\n// off execution to the CPU.\nconst CPU_HANDOFF_SIZE_THRESHOLD = env().getNumber('WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD');\n// Reshape dispatch, not to exceed device limits.\nconst reshapeDispatch = (device, program) => {\n    const MAX_COMPUTE_PER_DIMENSION_DISPATCH_SIZE = device.limits.maxComputeWorkgroupsPerDimension;\n    const layout = program['dispatchLayout'];\n    const dispatch = program['dispatch'];\n    if (dispatch.every((d) => d <= MAX_COMPUTE_PER_DIMENSION_DISPATCH_SIZE)) {\n        return dispatch;\n    }\n    util.assert(dispatch[0] > MAX_COMPUTE_PER_DIMENSION_DISPATCH_SIZE &&\n        layout.y === undefined && layout.z === undefined, () => 'Dispatch size exceeds WebGPU limits in Y or Z dimension.');\n    let dispatchAverage = Math.ceil(Math.sqrt(dispatch[0]));\n    if (dispatchAverage > MAX_COMPUTE_PER_DIMENSION_DISPATCH_SIZE) {\n        dispatchAverage = Math.ceil(Math.cbrt(dispatch[0]));\n        util.assert(dispatchAverage <= MAX_COMPUTE_PER_DIMENSION_DISPATCH_SIZE, () => 'Total dispatch size exceeds WebGPU maximum.');\n        return [dispatchAverage, dispatchAverage, dispatchAverage];\n    }\n    else {\n        return [dispatchAverage, dispatchAverage, 1];\n    }\n};\nclass WebGPUBackend extends KernelBackend {\n    nextDataId() {\n        return WebGPUBackend.nextDataId++;\n    }\n    constructor(device, adapterInfo) {\n        super();\n        this.commandQueueOwnedIds = new WeakSet();\n        this.dispatchCountInPass = 0;\n        this.disposed = false;\n        this.downloadWaitMs = 0;\n        this.tensorDataPendingDisposal = [];\n        this.queryResolveBuffer = null;\n        this.querySet = null;\n        this.querySetCount = 2;\n        this.stagingPendingDisposal = [];\n        this.uniformPendingDisposal = [];\n        this.uploadWaitMs = 0;\n        this.hasReadSyncWarned = false;\n        this.hasTimestampQueryWarned = false;\n        if (!webgpu_util.isWebGPUSupported()) {\n            throw new Error('WebGPU is not supported on this device');\n        }\n        this.pipelineCache = {};\n        this.device = device;\n        this.queue = device.queue;\n        this.commandEncoder = null;\n        this.computePassEncoder = null;\n        this.adapterInfo = new AdapterInfo(adapterInfo);\n        this.supportTimestampQuery = this.device.features.has('timestamp-query');\n        this.thresholdToIncreaseWorkgroups =\n            this.adapterInfo.intelGPUGeneration >= 12 ? 16 : 8;\n        this.bufferManager = new BufferManager(this.device);\n        this.textureManager = new TextureManager(this.device);\n        this.tensorMap = new DataStorage(this, engine());\n        // Profiling tools like PIX needs this dummy canvas to\n        // trigger capturing a frame.\n        if (env().getBool('WEBGPU_USE_PROFILE_TOOL')) {\n            this.dummyCanvas = document.createElement('canvas');\n            this.dummyCanvas.width = 1;\n            this.dummyCanvas.height = 1;\n            this.dummyContext = this.dummyCanvas.getContext('webgpu');\n            this.dummyContext.configure({\n                device,\n                format: 'bgra8unorm',\n            });\n            document.body.appendChild(this.dummyCanvas);\n        }\n    }\n    floatPrecision() {\n        return 32;\n    }\n    /**\n     * Dispose the memory if the dataId has 0 refCount. Return true if the memory\n     * is released or delayed in this backend, false if there are still\n     * references.\n     * @param dataId\n     * @oaram force Optional, remove the data regardless of refCount\n     */\n    disposeData(dataId, force = false) {\n        // No-op if already disposed.\n        if (!this.tensorMap.has(dataId)) {\n            return true;\n        }\n        const tensorData = this.tensorMap.get(dataId);\n        if (force) {\n            tensorData.refCount = 0;\n        }\n        else {\n            tensorData.refCount--;\n        }\n        if (tensorData.refCount > 0) {\n            return false;\n        }\n        if (tensorData.complexTensorInfos != null) {\n            this.disposeData(tensorData.complexTensorInfos.real.dataId);\n            this.disposeData(tensorData.complexTensorInfos.imag.dataId);\n        }\n        if (this.commandQueueOwnedIds.has(dataId)) {\n            this.tensorDataPendingDisposal.push(dataId);\n            return true;\n        }\n        this.releaseResource(dataId);\n        this.tensorMap.delete(dataId);\n        return true;\n    }\n    memory() {\n        return {\n            numBytesInGPU: this.bufferManager.numBytesUsed,\n            numBytesAllocatedInGPU: this.bufferManager.numBytesAllocated,\n            unreliable: false\n        };\n    }\n    releaseResource(dataId) {\n        const tensorData = this.tensorMap.get(dataId);\n        if (!tensorData || !tensorData.resource) {\n            return;\n        }\n        // If tensor's resource is from external, do not release.\n        if (tensorData.external) {\n            tensorData.resource = null;\n            return;\n        }\n        if (tensorData.resource instanceof GPUBuffer) {\n            this.bufferManager.releaseBuffer(tensorData.resource);\n        }\n        else if (tensorData.resource instanceof GPUTexture) {\n            this.textureManager.releaseTexture(tensorData.resource);\n        }\n        tensorData.resource = null;\n    }\n    /** Return refCount of a `TensorData`. */\n    refCount(dataId) {\n        if (this.tensorMap.has(dataId)) {\n            const tensorData = this.tensorMap.get(dataId);\n            return tensorData.refCount;\n        }\n        return 0;\n    }\n    /** Increase refCount of a `TensorData`. */\n    incRef(dataId) {\n        const tensorData = this.tensorMap.get(dataId);\n        tensorData.refCount++;\n    }\n    /** Decrease refCount of a `TensorData`. */\n    decRef(dataId) {\n        if (this.tensorMap.has(dataId)) {\n            const tensorData = this.tensorMap.get(dataId);\n            tensorData.refCount--;\n        }\n    }\n    write(values, shape, dtype) {\n        if (dtype === 'complex64' && values != null) {\n            throw new Error(`Cannot write to a complex64 dtype. ` +\n                `Please use tf.complex(real, imag).`);\n        }\n        const dataId = { id: this.nextDataId() };\n        this.tensorMap.set(dataId, { dtype, shape, values, refCount: 1 });\n        return dataId;\n    }\n    move(dataId, values, shape, dtype, refCount) {\n        if (dtype === 'complex64') {\n            throw new Error(`Cannot write to a complex64 dtype. ` +\n                `Please use tf.complex(real, imag).`);\n        }\n        this.tensorMap.set(dataId, { dtype, shape, values, refCount });\n    }\n    submitQueue() {\n        this.queue.submit([this.commandEncoder.finish()]);\n        this.commandEncoder = null;\n        this.dispatchCountInPass = 0;\n        this.commandQueueOwnedIds = new WeakSet();\n        this.tensorDataPendingDisposal.forEach(d => {\n            this.releaseResource(d);\n            this.tensorMap.delete(d);\n        });\n        this.uniformPendingDisposal.forEach(b => this.bufferManager.releaseBuffer(b));\n        this.stagingPendingDisposal.forEach(b => this.bufferManager.releaseBuffer(b, false));\n        this.tensorDataPendingDisposal = [];\n        this.uniformPendingDisposal = [];\n        this.stagingPendingDisposal = [];\n    }\n    ensureCommandEncoderReady() {\n        if (!this.commandEncoder) {\n            this.commandEncoder = this.device.createCommandEncoder();\n        }\n    }\n    endComputePassEncoder() {\n        if (this.computePassEncoder) {\n            this.computePassEncoder.end();\n            this.computePassEncoder = null;\n        }\n    }\n    // Check if parallel compilation is done.\n    async checkCompileCompletionAsync() {\n        let pipelines;\n        try {\n            pipelines = await Promise.all(Object.values(this.pipelineCache));\n        }\n        catch (e) {\n            // TODO: Add test case to catch this exception.\n            throw new Error(e.message);\n        }\n        Object.keys(this.pipelineCache).map((key, i) => {\n            this.pipelineCache[key] = pipelines[i];\n        });\n    }\n    async getBufferData(buffer) {\n        if (env().getBool('WEBGPU_ENGINE_COMPILE_ONLY')) {\n            console.warn('The data may be invalid since WEBGPU_ENGINE_COMPILE_ONLY is true, this can only be called when WEBGPU_ENGINE_COMPILE_ONLY is false');\n            return null;\n        }\n        const size = buffer.size;\n        const stagingBuffer = this.bufferManager.acquireBuffer(size, GPUBufferUsage.COPY_DST | GPUBufferUsage.MAP_READ);\n        this.ensureCommandEncoderReady();\n        this.endComputePassEncoder();\n        this.commandEncoder.copyBufferToBuffer(buffer, 0, stagingBuffer, 0, size);\n        this.submitQueue();\n        await stagingBuffer.mapAsync(GPUMapMode.READ);\n        const values = stagingBuffer.getMappedRange().slice(0);\n        stagingBuffer.unmap();\n        if (stagingBuffer != null) {\n            this.bufferManager.releaseBuffer(stagingBuffer);\n        }\n        // Need to get texture from swapChain to enable profiling tool\n        // to capture a frame\n        if (env().getBool('WEBGPU_USE_PROFILE_TOOL')) {\n            util.assert(this.dummyContext !== undefined, () => `Fail to get context for profiling tool`);\n            this.dummyContext.getCurrentTexture();\n        }\n        return values;\n    }\n    convertAndCacheOnCPU(dataId, data) {\n        const tensorData = this.tensorMap.get(dataId);\n        tensorData.values = data;\n        return tensorData.values;\n    }\n    readSync(dataId) {\n        const tensorData = this.tensorMap.get(dataId);\n        const { values, complexTensorInfos } = tensorData;\n        if (values != null || tensorData.dtype === 'string') {\n            return values;\n        }\n        if (tensorData.dtype === 'complex64') {\n            const realValues = this.readSync(complexTensorInfos.real.dataId);\n            const imagValues = this.readSync(complexTensorInfos.imag.dataId);\n            const complexVals = util.convertBackendValuesAndArrayBuffer(backend_util.mergeRealAndImagArrays(realValues, imagValues).buffer, 'float32');\n            this.convertAndCacheOnCPU(dataId, complexVals);\n            return complexVals;\n        }\n        if (!this.hasReadSyncWarned) {\n            this.hasReadSyncWarned = true;\n            console.warn(`The performance of synchronously reading data from GPU to CPU is ` +\n                `poor on the webgpu backend, please use asynchronous APIs instead.`);\n        }\n        const alphaModes = ['opaque', 'premultiplied'];\n        const buffer = tensorData.resource;\n        const bufferSize = buffer.size;\n        util.assert(bufferSize % 4 === 0, () => 'Because there is 4 bytes for ' +\n            'one pixel, buffer size must be multiple of 4.');\n        const pixelsSize = bufferSize / 4;\n        const valsGPU = new ArrayBuffer(bufferSize);\n        // TODO: adjust the reading window size according the `bufferSize`.\n        const canvasWidth = 256, canvasHeight = 256;\n        const stagingDeviceStorage = alphaModes.map(_ => new OffscreenCanvas(canvasWidth, canvasHeight));\n        const stagingHostStorage = new OffscreenCanvas(canvasWidth, canvasHeight);\n        this.endComputePassEncoder();\n        stagingDeviceStorage\n            .map((storage, index) => {\n            const context = storage.getContext('webgpu');\n            // TODO: use rgba8unorm format when this format is supported on Mac.\n            // https://bugs.chromium.org/p/chromium/issues/detail?id=1298618\n            context.configure({\n                device: this.device,\n                format: 'bgra8unorm',\n                usage: GPUTextureUsage.COPY_DST,\n                alphaMode: alphaModes[index],\n            });\n            return context.getCurrentTexture();\n        })\n            .map((texture, index) => {\n            const bytesPerRow = canvasWidth * 4;\n            const readDataGPUToCPU = (width, height, offset) => {\n                this.ensureCommandEncoderReady();\n                this.commandEncoder.copyBufferToTexture({\n                    buffer,\n                    bytesPerRow,\n                    offset,\n                }, {\n                    texture,\n                }, {\n                    width,\n                    height,\n                });\n                this.submitQueue();\n                const context = stagingHostStorage.getContext('2d', {\n                    willReadFrequently: true,\n                });\n                context.clearRect(0, 0, width, height);\n                context.drawImage(stagingDeviceStorage[index], 0, 0);\n                const stagingValues = context.getImageData(0, 0, width, height).data;\n                const alphaMode = alphaModes[index];\n                const span = new Uint8ClampedArray(valsGPU, offset, width * height * 4);\n                for (let k = 0; k < span.length; k += 4) {\n                    if (alphaMode === 'premultiplied') {\n                        span[k + 3] = stagingValues[k + 3];\n                    }\n                    else {\n                        const value = stagingValues[k];\n                        span[k] = stagingValues[k + 2];\n                        span[k + 1] = stagingValues[k + 1];\n                        span[k + 2] = value;\n                    }\n                }\n            };\n            const fullyReadCount = Math.floor(pixelsSize / (canvasWidth * canvasHeight));\n            let width = canvasWidth, height = canvasHeight, offset = 0;\n            for (let i = 0; i < fullyReadCount; i++) {\n                // Read the buffer data, which fully fill the whole canvas.\n                readDataGPUToCPU(width, height, offset);\n                offset += canvasWidth * canvasHeight * 4;\n            }\n            const remainSize = pixelsSize % (canvasWidth * canvasHeight);\n            height = Math.floor(remainSize / canvasWidth);\n            if (height > 0) {\n                // Read the buffer data, which fully fill certain rows of canvas.\n                readDataGPUToCPU(width, height, offset);\n                offset += height * (canvasWidth * 4);\n            }\n            width = remainSize % canvasWidth;\n            if (width > 0) {\n                // Read the buffer data, which not fully fill one row of canvas.\n                readDataGPUToCPU(width, 1, offset);\n            }\n        });\n        const vals = util.convertBackendValuesAndArrayBuffer(valsGPU, tensorData.dtype);\n        this.convertAndCacheOnCPU(dataId, vals);\n        return vals;\n    }\n    async read(dataId) {\n        if (!this.tensorMap.has(dataId)) {\n            throw new Error(`Tensor ${dataId} was not registered!`);\n        }\n        const tensorData = this.tensorMap.get(dataId);\n        const { values } = tensorData;\n        if (values != null) {\n            return values;\n        }\n        // Download the values from the GPU.\n        let vals;\n        if (tensorData.dtype === 'complex64') {\n            const ps = await Promise.all([\n                this.read(tensorData.complexTensorInfos.real.dataId),\n                this.read(tensorData.complexTensorInfos.imag.dataId)\n            ]);\n            const realValues = ps[0];\n            const imagValues = ps[1];\n            vals = backend_util.mergeRealAndImagArrays(realValues, imagValues);\n        }\n        else {\n            const data = await this.getBufferData(tensorData.resource);\n            vals = util.convertBackendValuesAndArrayBuffer(data, tensorData.dtype);\n        }\n        this.convertAndCacheOnCPU(dataId, vals);\n        return vals;\n    }\n    // The source GPUBuffer and destination GPUBuffer have the same size and\n    // usage.\n    copyBuffer(srcBuffer) {\n        const size = srcBuffer.size;\n        const usage = srcBuffer.usage;\n        const dstBuffer = this.bufferManager.acquireBuffer(size, usage);\n        this.ensureCommandEncoderReady();\n        this.endComputePassEncoder();\n        this.commandEncoder.copyBufferToBuffer(srcBuffer, 0, dstBuffer, 0, size);\n        this.submitQueue();\n        return dstBuffer;\n    }\n    /**\n     * Create a TF.js tensor out of an existing WebGPU buffer.\n     */\n    createTensorFromGPUData(webGPUData, shape, dtype) {\n        let buffer = webGPUData.buffer;\n        if (dtype === 'complex64') {\n            throw new Error(`Cannot write to a complex64 dtype. `);\n        }\n        const dataId = { id: this.nextDataId() };\n        this.tensorMap.set(dataId, {\n            dtype,\n            shape,\n            values: null,\n            refCount: 1,\n            external: webGPUData.zeroCopy\n        });\n        const tensorData = this.tensorMap.get(dataId);\n        const size = webgpu_util.GPUBytesPerElement(tensorData.dtype) *\n            util.sizeFromShape(tensorData.shape);\n        if (webGPUData.buffer.size < size) {\n            throw new Error(`GPUBuffer size(${webGPUData.buffer.size}) is smaller than tensor size(${size})!`);\n        }\n        else if ((webGPUData.buffer.usage &\n            (GPUBufferUsage.STORAGE | GPUBufferUsage.COPY_SRC)) !==\n            (GPUBufferUsage.STORAGE | GPUBufferUsage.COPY_SRC)) {\n            throw new Error('GPUBuffer.usage should include GPUBufferUsage.STORAGE | GPUBufferUsage.COPY_SRC!');\n        }\n        // Do buffer copy by default.\n        if (webGPUData.zeroCopy !== true) {\n            buffer = this.copyBuffer(buffer);\n        }\n        tensorData.resource = buffer;\n        return engine().makeTensorFromDataId(dataId, shape, dtype, this);\n    }\n    /**\n     * Read tensor to a new GPUBuffer.\n     * @param dataId The source tensor.\n     */\n    readToGPU(dataId) {\n        const srcTensorData = this.tensorMap.get(dataId);\n        const { values, dtype, shape, resource } = srcTensorData;\n        if (dtype === 'complex64') {\n            throw new Error('Does not support reading buffer for complex64 dtype.');\n        }\n        if (resource == null) {\n            if (values != null) {\n                throw new Error('Data is not on GPU but on CPU.');\n            }\n            else {\n                throw new Error('There is no data on GPU or CPU.');\n            }\n        }\n        const srcBuffer = resource;\n        const size = srcBuffer.size;\n        const usage = srcBuffer.usage;\n        const buffer = this.bufferManager.acquireBuffer(size, usage);\n        this.ensureCommandEncoderReady();\n        this.endComputePassEncoder();\n        this.commandEncoder.copyBufferToBuffer(resource, 0, buffer, 0, size);\n        this.submitQueue();\n        const tensorInfo = this.makeTensorInfo(shape, dtype);\n        // Make engine track this tensor, so that we can dispose it later.\n        const tensorRef = engine().makeTensorFromTensorInfo(tensorInfo);\n        const tensorData = this.tensorMap.get(tensorInfo.dataId);\n        tensorData.resource = buffer;\n        return { tensorRef, buffer };\n    }\n    bufferSync(t) {\n        const data = this.readSync(t.dataId);\n        if (t.dtype === 'string') {\n            try {\n                // Decode the bytes into string.\n                const strings = data.map(d => util.decodeString(d));\n                return buffer(t.shape, t.dtype, strings);\n            }\n            catch (_a) {\n                throw new Error('Failed to decode encoded string bytes into utf-8');\n            }\n        }\n        return buffer(t.shape, t.dtype, data);\n    }\n    async time(f) {\n        if (!this.supportTimestampQuery && !this.hasTimestampQueryWarned) {\n            console.warn(`This device doesn't support timestamp-query extension. ` +\n                `Start Chrome browser with flag ` +\n                `--enable-dawn-features=allow_unsafe_apis to try it again. ` +\n                `Otherwise, zero will be shown for the kernel time when profiling ` +\n                `mode is enabled.`);\n            this.hasTimestampQueryWarned = true;\n        }\n        const oldActiveTimers = this.activeTimers;\n        const newActiveTimers = [];\n        let outerMostTime = false;\n        if (this.programTimersStack == null) {\n            this.programTimersStack = newActiveTimers;\n            outerMostTime = true;\n        }\n        else {\n            this.activeTimers.push(newActiveTimers);\n        }\n        this.activeTimers = newActiveTimers;\n        f();\n        const flattenedActiveTimerQueries = util.flatten(this.activeTimers.map((d) => d.query))\n            .filter(d => d != null);\n        const flattenedActiveTimerNames = util.flatten(this.activeTimers.map((d) => d.name))\n            .filter(d => d != null);\n        this.activeTimers = oldActiveTimers;\n        if (outerMostTime) {\n            this.programTimersStack = null;\n        }\n        const res = {\n            uploadWaitMs: this.uploadWaitMs,\n            downloadWaitMs: this.downloadWaitMs,\n            kernelMs: null,\n            wallMs: null\n        };\n        const kernelMs = await Promise.all(flattenedActiveTimerQueries);\n        res['kernelMs'] = util.sum(kernelMs);\n        res['getExtraProfileInfo'] = () => kernelMs.map((d, i) => ({ name: flattenedActiveTimerNames[i], ms: d }))\n            .map(d => `${d.name}: ${d.ms}`)\n            .join(', ');\n        this.uploadWaitMs = 0;\n        this.downloadWaitMs = 0;\n        return res;\n    }\n    makeTensorInfo(shape, dtype, values) {\n        if (dtype === 'string' && values != null && values.length > 0 &&\n            util.isString(values[0])) {\n            values = values.map(d => util.encodeString(d));\n        }\n        const dataId = this.write(values, shape, dtype);\n        return { dataId, shape, dtype };\n    }\n    tensorToBinding(tensor) {\n        if (!tensor) {\n            return null;\n        }\n        const tensorData = this.tensorMap.get(tensor.dataId);\n        const resource = tensorData.resource;\n        if (resource instanceof GPUBuffer) {\n            return { buffer: resource };\n        }\n        if (resource instanceof GPUTexture) {\n            return resource.createView();\n        }\n        // GPUExternalTexture\n        return resource;\n    }\n    uploadToGPU(dataId) {\n        const tensorData = this.tensorMap.get(dataId);\n        // Already on the GPU.\n        if (tensorData.resource != null) {\n            return;\n        }\n        const size = webgpu_util.GPUBytesPerElement(tensorData.dtype) *\n            util.sizeFromShape(tensorData.shape);\n        let buffer;\n        const usage = GPUBufferUsage.STORAGE | GPUBufferUsage.COPY_SRC |\n            GPUBufferUsage.COPY_DST;\n        if (tensorData.values) {\n            buffer = this.bufferManager.acquireBuffer(size, usage, true);\n            if (buffer.mapState === 'unmapped') {\n                const stagingBuffer = this.bufferManager.acquireBuffer(size, GPUBufferUsage.MAP_WRITE | GPUBufferUsage.COPY_SRC, true, false);\n                const arrayBuffer = stagingBuffer.getMappedRange();\n                if (tensorData.dtype === 'int32' || tensorData.dtype === 'bool') {\n                    new Int32Array(arrayBuffer).set(tensorData.values);\n                }\n                else {\n                    new Float32Array(arrayBuffer).set(tensorData.values);\n                }\n                stagingBuffer.unmap();\n                this.ensureCommandEncoderReady();\n                this.endComputePassEncoder();\n                this.commandEncoder.copyBufferToBuffer(stagingBuffer, 0, buffer, 0, size);\n                this.stagingPendingDisposal.push(stagingBuffer);\n            }\n            else {\n                const arrayBuffer = buffer.getMappedRange();\n                if (tensorData.dtype === 'int32' || tensorData.dtype === 'bool') {\n                    new Int32Array(arrayBuffer).set(tensorData.values);\n                }\n                else {\n                    new Float32Array(arrayBuffer).set(tensorData.values);\n                }\n                buffer.unmap();\n            }\n            // Once uploaded, don't store the values on cpu.\n            tensorData.values = null;\n        }\n        else {\n            buffer = this.bufferManager.acquireBuffer(size, usage);\n        }\n        tensorData.resource = buffer;\n    }\n    makeUniforms(programUniform) {\n        let currentOffset = 0;\n        let preLength = 0;\n        const offsets = [];\n        let maxAlignmentOfField = 1;\n        programUniform.forEach((d) => {\n            if (d.data.length === 0) {\n                d.data = [1];\n            }\n            // https://www.w3.org/TR/WGSL/#alignof\n            let baseAlignment;\n            switch (d.data.length) {\n                case 1:\n                    baseAlignment = 4;\n                    break;\n                case 2:\n                    baseAlignment = 8;\n                    break;\n                case 3:\n                    baseAlignment = 16;\n                    break;\n                case 4:\n                    baseAlignment = 16;\n                    break;\n                case 5:\n                    baseAlignment = 16;\n                    break;\n                case 6:\n                    baseAlignment = 16;\n                    break;\n                default:\n                    util.assert(false, () => `Unsupported ${d.data.length}D shape`);\n            }\n            if (preLength === 5 || preLength === 6) {\n                baseAlignment = 16;\n            }\n            if (baseAlignment > maxAlignmentOfField) {\n                maxAlignmentOfField = baseAlignment;\n            }\n            currentOffset = Math.ceil(currentOffset / baseAlignment) * baseAlignment;\n            preLength = d.data.length;\n            offsets.push(currentOffset);\n            currentOffset += d.data.length * 4;\n        });\n        currentOffset =\n            Math.ceil(currentOffset / maxAlignmentOfField) * maxAlignmentOfField;\n        const arrayBuffer = new ArrayBuffer(currentOffset);\n        programUniform.forEach((d, i) => {\n            const offset = offsets[i];\n            if (d.type === 'int32') {\n                new Int32Array(arrayBuffer, offset, d.data.length).set(d.data);\n            }\n            else if (d.type === 'uint32') {\n                new Uint32Array(arrayBuffer, offset, d.data.length).set(d.data);\n            }\n            else {\n                new Float32Array(arrayBuffer, offset, d.data.length).set(d.data);\n            }\n        });\n        const uniformBuffer = this.bufferManager.acquireBuffer(currentOffset, GPUBufferUsage.COPY_DST | GPUBufferUsage.UNIFORM);\n        this.queue.writeBuffer(uniformBuffer, 0, arrayBuffer, 0, currentOffset);\n        this.uniformPendingDisposal.push(uniformBuffer);\n        return { offset: 0, size: currentOffset, buffer: uniformBuffer };\n    }\n    runWebGPUProgram(program, inputs, outputDtype, programDefinedUniform, output) {\n        if (!output) {\n            output = this.makeTensorInfo(program.outputShape, outputDtype);\n        }\n        if (util.sizeFromShape(output.shape) === 0) {\n            // Short-circuit the computation since the result is empty (has 0 in its\n            // shape).\n            this.tensorMap.get(output.dataId).values =\n                util.getTypedArrayFromDType(output.dtype, 0);\n            return output;\n        }\n        this.uploadToGPU(output.dataId);\n        program.dispatch = reshapeDispatch(this.device, program);\n        const inputsData = inputs.map((input, i) => {\n            if (input.dtype === 'complex64') {\n                throw new Error(`GPGPUProgram does not support complex64 input. For complex64 ` +\n                    `dtypes, please separate the program into real and imaginary ` +\n                    `parts.`);\n            }\n            this.uploadToGPU(input.dataId);\n            return {\n                // Returning dtype from tensorMap because it reflects dtype\n                // of underlying buffer, rather than abstract dtype.\n                dtype: this.tensorMap.get(input.dataId).dtype,\n                shape: input.shape,\n                name: program.variableNames[i]\n            };\n        });\n        program.shaderKey =\n            webgpu_program.makeShaderKey(program, inputsData, output);\n        const parallelCompilation = env().getBool('WEBGPU_ENGINE_COMPILE_ONLY');\n        if (!(program.shaderKey in this.pipelineCache)) {\n            this.pipelineCache[program.shaderKey] = webgpu_program.compileProgram(this.device, program, inputsData, output, parallelCompilation);\n        }\n        program.pipeline = this.pipelineCache[program.shaderKey];\n        if (!parallelCompilation) {\n            this.recordAndSubmit(program, output, inputs, programDefinedUniform);\n        }\n        return output;\n    }\n    recordAndSubmit(program, output, inputs, programDefinedUniform) {\n        if (program.pipeline instanceof Promise) {\n            throw new Error('Please call checkCompileCompletionAsync to ensure parallel compilation is done!');\n        }\n        // There are six kinds of uniforms: NAN, INFINITY, shapes, shape strides,\n        // program size, program defined uniforms.\n        let programUniform = [];\n        let bufferShapes = [];\n        const uniformsType = 'int32';\n        if (program.pixelsOpType == null) {\n            programUniform.push({ type: 'float32', data: [NaN] }, { type: 'float32', data: [Infinity] });\n            bufferShapes = inputs.concat(output).map(d => d.shape);\n            const uniformsType = 'int32';\n            bufferShapes.map(d => {\n                programUniform.push({ type: uniformsType, data: d });\n                const strides = util.computeStrides(d);\n                programUniform.push({ type: uniformsType, data: strides });\n            });\n        }\n        else {\n            const strides = util.computeStrides(output.shape);\n            programUniform.push({ type: uniformsType, data: strides });\n        }\n        if (program.size) {\n            const size = util.sizeFromShape(program.outputShape);\n            programUniform.push({\n                type: uniformsType,\n                data: [program.outputComponent ? size / program.outputComponent : size]\n            });\n        }\n        if (programDefinedUniform) {\n            programUniform = [...programUniform, ...programDefinedUniform];\n        }\n        const bindings = [\n            this.tensorToBinding(output), ...inputs.map(t => this.tensorToBinding(t)),\n            this.makeUniforms(programUniform)\n        ];\n        inputs.forEach(input => {\n            this.commandQueueOwnedIds.add(input.dataId);\n        });\n        this.commandQueueOwnedIds.add(output.dataId);\n        const bindGroup = this.device.createBindGroup({\n            layout: program.pipeline.getBindGroupLayout(0),\n            entries: bindings.map((b, i) => ({ binding: i, resource: b })),\n        });\n        const shouldTimeProgram = this.activeTimers != null;\n        this.ensureCommandEncoderReady();\n        const computePassDescriptor = {};\n        if (shouldTimeProgram && this.supportTimestampQuery) {\n            this.endComputePassEncoder();\n            if (this.querySet == null) {\n                this.querySet = this.device.createQuerySet({\n                    type: 'timestamp',\n                    count: this.querySetCount,\n                });\n            }\n            computePassDescriptor.timestampWrites = {\n                querySet: this.querySet,\n                beginningOfPassWriteIndex: 0,\n                endOfPassWriteIndex: 1,\n            };\n            this.computePassEncoder =\n                this.commandEncoder.beginComputePass(computePassDescriptor);\n        }\n        else if (!this.computePassEncoder) {\n            this.computePassEncoder =\n                this.commandEncoder.beginComputePass(computePassDescriptor);\n        }\n        this.computePassEncoder.setPipeline(program.pipeline);\n        this.computePassEncoder.setBindGroup(0, bindGroup);\n        this.computePassEncoder.dispatchWorkgroups(program.dispatch[0], program.dispatch[1], program.dispatch[2]);\n        this.dispatchCountInPass++;\n        if (shouldTimeProgram ||\n            env().get('WEBGPU_DEFERRED_SUBMIT_BATCH_SIZE') <= this.dispatchCountInPass ||\n            program.pixelsOpType === webgpu_program.PixelsOpType.DRAW) {\n            this.endComputePassEncoder();\n            if (shouldTimeProgram) {\n                this.activeTimers.push({ name: program.constructor.name, query: this.getQueryTime() });\n            }\n            else {\n                this.submitQueue();\n            }\n        }\n    }\n    async getQueryTime() {\n        if (!this.supportTimestampQuery) {\n            return 0;\n        }\n        if (this.queryResolveBuffer == null) {\n            this.queryResolveBuffer = this.bufferManager.acquireBuffer(this.querySetCount * 8, GPUBufferUsage.COPY_SRC | GPUBufferUsage.COPY_DST |\n                GPUBufferUsage.QUERY_RESOLVE);\n        }\n        this.commandEncoder.resolveQuerySet(this.querySet, 0, this.querySetCount, this.queryResolveBuffer, 0);\n        const queryStagingBuffer = this.bufferManager.acquireBuffer(this.querySetCount * 8, GPUBufferUsage.MAP_READ | GPUBufferUsage.COPY_DST);\n        this.commandEncoder.copyBufferToBuffer(this.queryResolveBuffer, 0, queryStagingBuffer, 0, this.querySetCount * 8);\n        this.submitQueue();\n        await queryStagingBuffer.mapAsync(GPUMapMode.READ);\n        const arrayBuffer = new BigUint64Array(queryStagingBuffer.getMappedRange());\n        const time = Number(arrayBuffer[1] - arrayBuffer[0]) / 1000000;\n        queryStagingBuffer.unmap();\n        this.bufferManager.releaseBuffer(queryStagingBuffer);\n        return time;\n    }\n    shouldExecuteOnCPU(inputs, sizeThreshold = CPU_HANDOFF_SIZE_THRESHOLD) {\n        return env().getBool('WEBGPU_CPU_FORWARD') &&\n            inputs.every(input => this.tensorMap.get(input.dataId).resource == null &&\n                util.sizeFromShape(input.shape) < sizeThreshold);\n    }\n    numDataIds() {\n        return this.tensorMap.numDataIds() - this.tensorDataPendingDisposal.length;\n    }\n    dispose() {\n        if (this.disposed) {\n            return;\n        }\n        if (this.querySet != null) {\n            this.querySet.destroy();\n        }\n        this.bufferManager.dispose();\n        this.textureManager.dispose();\n        this.disposed = true;\n    }\n}\nWebGPUBackend.nextDataId = 0;\nexport { WebGPUBackend };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmFja2VuZF93ZWJncHUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9iYWNrZW5kX3dlYmdwdS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLGdCQUFnQixDQUFDO0FBRXhCLE9BQU8sRUFBQyxZQUFZLEVBQWlCLE1BQU0sRUFBRSxXQUFXLEVBQVksTUFBTSxFQUFFLEdBQUcsRUFBVyxhQUFhLEVBQTRGLElBQUksRUFBYSxNQUFNLHVCQUF1QixDQUFDO0FBRWxQLE9BQU8sRUFBQyxXQUFXLEVBQUMsTUFBTSxnQkFBZ0IsQ0FBQztBQUMzQyxPQUFPLEVBQUMsYUFBYSxFQUFDLE1BQU0sa0JBQWtCLENBQUM7QUFDL0MsT0FBTyxFQUFDLGNBQWMsRUFBQyxNQUFNLG1CQUFtQixDQUFDO0FBQ2pELE9BQU8sS0FBSyxjQUFjLE1BQU0sa0JBQWtCLENBQUM7QUFDbkQsT0FBTyxLQUFLLFdBQVcsTUFBTSxlQUFlLENBQUM7QUF1QzdDLCtFQUErRTtBQUMvRSw0QkFBNEI7QUFDNUIsTUFBTSwwQkFBMEIsR0FDNUIsR0FBRyxFQUFFLENBQUMsU0FBUyxDQUFDLG1DQUFtQyxDQUFDLENBQUM7QUFFekQsaURBQWlEO0FBQ2pELE1BQU0sZUFBZSxHQUNqQixDQUFDLE1BQWlCLEVBQ2pCLE9BQXFDLEVBQTRCLEVBQUU7SUFDbEUsTUFBTSx1Q0FBdUMsR0FDekMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxnQ0FBZ0MsQ0FBQztJQUNuRCxNQUFNLE1BQU0sR0FBRyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztJQUN6QyxNQUFNLFFBQVEsR0FBRyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUM7SUFDckMsSUFBSSxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLElBQUksdUNBQXVDLENBQUMsRUFBRTtR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QUMsT0FBTyxFQUFFLENBQUM7UUFDN0IsSUFBSSxDQUFDLGNBQWMsQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUM5QixJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQztJQUN2QixDQUFDOztBQXQ2QmMsd0JBQVUsR0FBRyxDQUFDLEFBQUosQ0FBSztTQW5CbkIsYUFBYSIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0ICcuL2ZsYWdzX3dlYmdwdSc7XG5cbmltcG9ydCB7YmFja2VuZF91dGlsLCBCYWNrZW5kVmFsdWVzLCBidWZmZXIsIERhdGFTdG9yYWdlLCBEYXRhVHlwZSwgZW5naW5lLCBlbnYsIEdQVURhdGEsIEtlcm5lbEJhY2tlbmQsIFJhbmssIFJlY3Vyc2l2ZUFycmF5LCBTaGFwZU1hcCwgVGVuc29yLCBUZW5zb3JCdWZmZXIsIFRlbnNvckluZm8sIFRpbWluZ0luZm8sIFR5cGVkQXJyYXksIHV0aWwsIFdlYkdQVURhdGF9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7QWRhcHRlckluZm99IGZyb20gJy4vYWRhcHRlcl9pbmZvJztcbmltcG9ydCB7QnVmZmVyTWFuYWdlcn0gZnJvbSAnLi9idWZmZXJfbWFuYWdlcic7XG5pbXBvcnQge1RleHR1cmVNYW5hZ2VyfSBmcm9tICcuL3RleHR1cmVfbWFuYWdlcic7XG5pbXBvcnQgKiBhcyB3ZWJncHVfcHJvZ3JhbSBmcm9tICcuL3dlYmdwdV9wcm9ncmFtJztcbmltcG9ydCAqIGFzIHdlYmdwdV91dGlsIGZyb20gJy4vd2ViZ3B1X3V0aWwnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFdlYkdQVU1lbW9yeUluZm8gZXh0ZW5kcyBiYWNrZW5kX3V0aWwuTWVtb3J5SW5mbyB7XG4gIG51bUJ5dGVzSW5HUFU6IG51bWJlcjtcbiAgbnVtQnl0ZXNBbGxvY2F0ZWRJbkdQVTogbnVtYmVyO1xuICB1bnJlbGlhYmxlOiBib29sZWFuO1xufVxuXG50eXBlIFRlbnNvckRhdGEgPSB7XG4gIHZhbHVlczogQmFja2VuZFZhbHVlcyxcbiAgZHR5cGU6IERhdGFUeXBlLFxuICBzaGFwZTogbnVtYmVyW10sXG4gIHJlZkNvdW50OiBudW1iZXIsXG4gIHJlc291cmNlPzogR1BVQnVmZmVyfEdQVVRleHR1cmV8R1BVRXh0ZXJuYWxUZXh0dXJlLFxuICAvLyBleHRlcm5hbCBpcyB0cnVlIG1lYW5zIHdlIHVzZSB0aGUgcmVzb3VyY2UgcHJvdmlkZWQgYnkgdXNlcnMgZGlyZWN0bHlcbiAgLy8gKHdpdGhvdXQgYSBjb3B5KSwgc28gdXNlcnMgc2hvdWxkIGJlIHJlc3BvbnNpYmxlIGZvciBpdHMgcmVsZWFzZS5cbiAgZXh0ZXJuYWw/OiBib29sZWFuLFxuICAvLyBGb3IgY29tcGxleCBudW1iZXJzLCB0aGUgcmVhbCBhbmQgaW1hZ2luYXJ5IHBhcnRzIGFyZSBzdG9yZWQgYXMgdGhlaXIgb3duXG4gIC8vIGluZGl2aWR1YWwgdGVuc29ycywgd2l0aCBhIHBhcmVudCBqb2luaW5nIHRoZSB0d28gd2l0aCB0aGVcbiAgLy8gY29tcGxleFRlbnNvckluZm9zIGZpZWxkLlxuICBjb21wbGV4VGVuc29ySW5mb3M/OiB7cmVhbDogVGVuc29ySW5mbywgaW1hZzogVGVuc29ySW5mb31cbn07XG5cbmludGVyZmFjZSBEYXRhSWQge31cblxuZXhwb3J0IHR5cGUgV2ViR1BVS2VybmVsSW5mbyA9IHtcbiAgbmFtZTogc3RyaW5nLFxuICBxdWVyeTogUHJvbWlzZTxudW1iZXI+LFxufTtcblxuZXhwb3J0IHR5cGUgVGltZXJOb2RlID0gUmVjdXJzaXZlQXJyYXk8V2ViR1BVS2VybmVsSW5mbz58V2ViR1BVS2VybmVsSW5mbztcblxuZXhwb3J0IGludGVyZmFjZSBXZWJHUFVUaW1pbmdJbmZvIGV4dGVuZHMgVGltaW5nSW5mbyB7XG4gIHVwbG9hZFdhaXRNczogbnVtYmVyO1xuICBkb3dubG9hZFdhaXRNczogbnVtYmVyO1xufVxuXG50eXBlIFByb2dyYW1Vbmlmb3JtID0gQXJyYXk8e3R5cGU6IHN0cmluZzsgZGF0YTogbnVtYmVyW119PjtcblxuLy8gRW1waXJpY2FsbHkgZGV0ZXJtaW5lZCBjb25zdGFudCB1c2VkIHRvIGRldGVybWluZSBzaXplIHRocmVzaG9sZCBmb3IgaGFuZGluZ1xuLy8gb2ZmIGV4ZWN1dGlvbiB0byB0aGUgQ1BVLlxuY29uc3QgQ1BVX0hBTkRPRkZfU0laRV9USFJFU0hPTEQgPVxuICAgIGVudigpLmdldE51bWJlcignV0VCR1BVX0NQVV9IQU5ET0ZGX1NJWkVfVEhSRVNIT0xEJyk7XG5cbi8vIFJlc2hhcGUgZGlzcGF0Y2gsIG5vdCB0byBleGNlZWQgZGV2aWNlIGxpbWl0cy5cbmNvbnN0IHJlc2hhcGVEaXNwYXRjaCA9XG4gICAgKGRldmljZTogR1BVRGV2aWNlLFxuICAgICBwcm9ncmFtOiB3ZWJncHVfcHJvZ3JhbS5XZWJHUFVQcm9ncmFtKTogW251bWJlciwgbnVtYmVyLCBudW1iZXJdID0+IHtcbiAgICAgIGNvbnN0IE1BWF9DT01QVVRFX1BFUl9ESU1FTlNJT05fRElTUEFUQ0hfU0laRSA9XG4gICAgICAgICAgZGV2aWNlLmxpbWl0cy5tYXhDb21wdXRlV29ya2dyb3Vwc1BlckRpbWVuc2lvbjtcbiAgICAgIGNvbnN0IGxheW91dCA9IHByb2dyYW1bJ2Rpc3BhdGNoTGF5b3V0J107XG4gICAgICBjb25zdCBkaXNwYXRjaCA9IHByb2dyYW1bJ2Rpc3BhdGNoJ107XG4gICAgICBpZiAoZGlzcGF0Y2guZXZlcnkoKGQpID0+IGQgPD0gTUFYX0NPTVBVVEVfUEVSX0RJTUVOU0lPTl9ESVNQQVRDSF9TSVpFKSkge1xuICAgICAgICByZXR1cm4gZGlzcGF0Y2g7XG4gICAgICB9XG5cbiAgICAgIHV0aWwuYXNzZXJ0KFxuICAgICAgICAgIGRpc3BhdGNoWzBdID4gTUFYX0NPTVBVVEVfUEVSX0RJTUVOU0lPTl9ESVNQQVRDSF9TSVpFICYmXG4gICAgICAgICAgICAgIGxheW91dC55ID09PSB1bmRlZmluZWQgJiYgbGF5b3V0LnogPT09IHVuZGVmaW5lZCxcbiAgICAgICAgICAoKSA9PiAnRGlzcGF0Y2ggc2l6ZSBleGNlZWRzIFdlYkdQVSBsaW1pdHMgaW4gWSBvciBaIGRpbWVuc2lvbi4nKTtcblxuICAgICAgbGV0IGRpc3BhdGNoQXZlcmFnZSA9IE1hdGguY2VpbChNYXRoLnNxcnQoZGlzcGF0Y2hbMF0pKTtcbiAgICAgIGlmIChkaXNwYXRjaEF2ZXJhZ2UgPiBNQVhfQ09NUFVURV9QRVJfRElNRU5TSU9OX0RJU1BBVENIX1NJWkUpIHtcbiAgICAgICAgZGlzcGF0Y2hBdmVyYWdlID0gTWF0aC5jZWlsKE1hdGguY2JydChkaXNwYXRjaFswXSkpO1xuICAgICAgICB1dGlsLmFzc2VydChcbiAgICAgICAgICAgIGRpc3BhdGNoQXZlcmFnZSA8PSBNQVhfQ09NUFVURV9QRVJfRElNRU5TSU9OX0RJU1BBVENIX1NJWkUsXG4gICAgICAgICAgICAoKSA9PiAnVG90YWwgZGlzcGF0Y2ggc2l6ZSBleGNlZWRzIFdlYkdQVSBtYXhpbXVtLicpO1xuICAgICAgICByZXR1cm4gW2Rpc3BhdGNoQXZlcmFnZSwgZGlzcGF0Y2hBdmVyYWdlLCBkaXNwYXRjaEF2ZXJhZ2VdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFtkaXNwYXRjaEF2ZXJhZ2UsIGRpc3BhdGNoQXZlcmFnZSwgMV07XG4gICAgICB9XG4gICAgfTtcblxuZXhwb3J0IGNsYXNzIFdlYkdQVUJhY2tlbmQgZXh0ZW5kcyBLZXJuZWxCYWNrZW5kIHtcbiAgYnVmZmVyTWFuYWdlcjogQnVmZmVyTWFuYWdlcjtcbiAgYWRhcHRlckluZm86IEFkYXB0ZXJJbmZvO1xuICBkZXZpY2U6IEdQVURldmljZTtcbiAgcXVldWU6IEdQVVF1ZXVlO1xuICB0ZW5zb3JNYXA6IERhdGFTdG9yYWdlPFRlbnNvckRhdGE+O1xuICB0ZXh0dXJlTWFuYWdlcjogVGV4dHVyZU1hbmFnZXI7XG4gIHRocmVzaG9sZFRvSW5jcmVhc2VXb3JrZ3JvdXBzOiBudW1iZXI7XG5cbiAgcHJpdmF0ZSBhY3RpdmVUaW1lcnM6IFRpbWVyTm9kZVtdO1xuICBwcml2YXRlIGNvbW1hbmRFbmNvZGVyOiBHUFVDb21tYW5kRW5jb2RlcjtcbiAgcHJpdmF0ZSBjb21wdXRlUGFzc0VuY29kZXI6IEdQVUNvbXB1dGVQYXNzRW5jb2RlcjtcbiAgcHJpdmF0ZSBjb21tYW5kUXVldWVPd25lZElkcyA9IG5ldyBXZWFrU2V0PERhdGFJZD4oKTtcbiAgcHJpdmF0ZSBkaXNwYXRjaENvdW50SW5QYXNzID0gMDtcbiAgcHJpdmF0ZSBkaXNwb3NlZCA9IGZhbHNlO1xuICBwcml2YXRlIGRvd25sb2FkV2FpdE1zID0gMDtcbiAgcHJpdmF0ZSBkdW1teUNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQ7XG4gIHByaXZhdGUgZHVtbXlDb250ZXh0OiBHUFVDYW52YXNDb250ZXh0O1xuICBwcml2YXRlIHRlbnNvckRhdGFQZW5kaW5nRGlzcG9zYWw6IERhdGFJZFtdID0gW107XG4gIHByaXZhdGUgc3RhdGljIG5leHREYXRhSWQgPSAwO1xuICBwcml2YXRlIHBpcGVsaW5lQ2FjaGU6XG4gICAgICB7W2tleTogc3RyaW5nXTogR1BVQ29tcHV0ZVBpcGVsaW5lfFByb21pc2U8R1BVQ29tcHV0ZVBpcGVsaW5lPn07XG4gIHByaXZhdGUgcHJvZ3JhbVRpbWVyc1N0YWNrOiBUaW1lck5vZGVbXTtcbiAgcHJpdmF0ZSBxdWVyeVJlc29sdmVCdWZmZXI6IEdQVUJ1ZmZlciA9IG51bGw7XG4gIHByaXZhdGUgcXVlcnlTZXQ6IEdQVVF1ZXJ5U2V0ID0gbnVsbDtcbiAgcHJpdmF0ZSBxdWVyeVNldENvdW50ID0gMjtcbiAgcHJpdmF0ZSBzdGFnaW5nUGVuZGluZ0Rpc3Bvc2FsOiBHUFVCdWZmZXJbXSA9IFtdO1xuICBwcml2YXRlIHN1cHBvcnRUaW1lc3RhbXBRdWVyeTogYm9vbGVhbjtcbiAgcHJpdmF0ZSB1bmlmb3JtUGVuZGluZ0Rpc3Bvc2FsOiBHUFVCdWZmZXJbXSA9IFtdO1xuICBwcml2YXRlIHVwbG9hZFdhaXRNcyA9IDA7XG4gIHByaXZhdGUgaGFzUmVhZFN5bmNXYXJuZWQgPSBmYWxzZTtcbiAgcHJpdmF0ZSBoYXNUaW1lc3RhbXBRdWVyeVdhcm5lZCA9IGZhbHNlO1xuXG4gIHByaXZhdGUgbmV4dERhdGFJZCgpOiBudW1iZXIge1xuICAgIHJldHVybiBXZWJHUFVCYWNrZW5kLm5leHREYXRhSWQrKztcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKGRldmljZTogR1BVRGV2aWNlLCBhZGFwdGVySW5mbz86IEdQVUFkYXB0ZXJJbmZvKSB7XG4gICAgc3VwZXIoKTtcbiAgICBpZiAoIXdlYmdwdV91dGlsLmlzV2ViR1BVU3VwcG9ydGVkKCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignV2ViR1BVIGlzIG5vdCBzdXBwb3J0ZWQgb24gdGhpcyBkZXZpY2UnKTtcbiAgICB9XG4gICAgdGhpcy5waXBlbGluZUNhY2hlID0ge307XG4gICAgdGhpcy5kZXZpY2UgPSBkZXZpY2U7XG4gICAgdGhpcy5xdWV1ZSA9IGRldmljZS5xdWV1ZTtcbiAgICB0aGlzLmNvbW1hbmRFbmNvZGVyID0gbnVsbDtcbiAgICB0aGlzLmNvbXB1dGVQYXNzRW5jb2RlciA9IG51bGw7XG4gICAgdGhpcy5hZGFwdGVySW5mbyA9IG5ldyBBZGFwdGVySW5mbyhhZGFwdGVySW5mbyk7XG4gICAgdGhpcy5zdXBwb3J0VGltZXN0YW1wUXVlcnkgPSB0aGlzLmRldmljZS5mZWF0dXJlcy5oYXMoJ3RpbWVzdGFtcC1xdWVyeScpO1xuICAgIHRoaXMudGhyZXNob2xkVG9JbmNyZWFzZVdvcmtncm91cHMgPVxuICAgICAgICB0aGlzLmFkYXB0ZXJJbmZvLmludGVsR1BVR2VuZXJhdGlvbiA+PSAxMiA/IDE2IDogODtcblxuICAgIHRoaXMuYnVmZmVyTWFuYWdlciA9IG5ldyBCdWZmZXJNYW5hZ2VyKHRoaXMuZGV2aWNlKTtcbiAgICB0aGlzLnRleHR1cmVNYW5hZ2VyID0gbmV3IFRleHR1cmVNYW5hZ2VyKHRoaXMuZGV2aWNlKTtcbiAgICB0aGlzLnRlbnNvck1hcCA9IG5ldyBEYXRhU3RvcmFnZSh0aGlzLCBlbmdpbmUoKSk7XG5cbiAgICAvLyBQcm9maWxpbmcgdG9vbHMgbGlrZSBQSVggbmVlZHMgdGhpcyBkdW1teSBjYW52YXMgdG9cbiAgICAvLyB0cmlnZ2VyIGNhcHR1cmluZyBhIGZyYW1lLlxuICAgIGlmIChlbnYoKS5nZXRCb29sKCdXRUJHUFVfVVNFX1BST0ZJTEVfVE9PTCcpKSB7XG4gICAgICB0aGlzLmR1bW15Q2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgICB0aGlzLmR1bW15Q2FudmFzLndpZHRoID0gMTtcbiAgICAgIHRoaXMuZHVtbXlDYW52YXMuaGVpZ2h0ID0gMTtcblxuICAgICAgdGhpcy5kdW1teUNvbnRleHQgPSB0aGlzLmR1bW15Q2FudmFzLmdldENvbnRleHQoJ3dlYmdwdScpO1xuICAgICAgdGhpcy5kdW1teUNvbnRleHQuY29uZmlndXJlKHtcbiAgICAgICAgZGV2aWNlLFxuICAgICAgICBmb3JtYXQ6ICdiZ3JhOHVub3JtJyxcbiAgICAgIH0pO1xuXG4gICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuZHVtbXlDYW52YXMpO1xuICAgIH1cbiAgfVxuXG4gIG92ZXJyaWRlIGZsb2F0UHJlY2lzaW9uKCk6IDMyIHtcbiAgICByZXR1cm4gMzI7XG4gIH1cblxuICAvKipcbiAgICogRGlzcG9zZSB0aGUgbWVtb3J5IGlmIHRoZSBkYXRhSWQgaGFzIDAgcmVmQ291bnQuIFJldHVybiB0cnVlIGlmIHRoZSBtZW1vcnlcbiAgICogaXMgcmVsZWFzZWQgb3IgZGVsYXllZCBpbiB0aGlzIGJhY2tlbmQsIGZhbHNlIGlmIHRoZXJlIGFyZSBzdGlsbFxuICAgKiByZWZlcmVuY2VzLlxuICAgKiBAcGFyYW0gZGF0YUlkXG4gICAqIEBvYXJhbSBmb3JjZSBPcHRpb25hbCwgcmVtb3ZlIHRoZSBkYXRhIHJlZ2FyZGxlc3Mgb2YgcmVmQ291bnRcbiAgICovXG4gIG92ZXJyaWRlIGRpc3Bvc2VEYXRhKGRhdGFJZDogRGF0YUlkLCBmb3JjZSA9IGZhbHNlKTogYm9vbGVhbiB7XG4gICAgLy8gTm8tb3AgaWYgYWxyZWFkeSBkaXNwb3NlZC5cbiAgICBpZiAoIXRoaXMudGVuc29yTWFwLmhhcyhkYXRhSWQpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBjb25zdCB0ZW5zb3JEYXRhID0gdGhpcy50ZW5zb3JNYXAuZ2V0KGRhdGFJZCk7XG4gICAgaWYgKGZvcmNlKSB7XG4gICAgICB0ZW5zb3JEYXRhLnJlZkNvdW50ID0gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGVuc29yRGF0YS5yZWZDb3VudC0tO1xuICAgIH1cblxuICAgIGlmICh0ZW5zb3JEYXRhLnJlZkNvdW50ID4gMCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmICh0ZW5zb3JEYXRhLmNvbXBsZXhUZW5zb3JJbmZvcyAhPSBudWxsKSB7XG4gICAgICB0aGlzLmRpc3Bvc2VEYXRhKHRlbnNvckRhdGEuY29tcGxleFRlbnNvckluZm9zLnJlYWwuZGF0YUlkKTtcbiAgICAgIHRoaXMuZGlzcG9zZURhdGEodGVuc29yRGF0YS5jb21wbGV4VGVuc29ySW5mb3MuaW1hZy5kYXRhSWQpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmNvbW1hbmRRdWV1ZU93bmVkSWRzLmhhcyhkYXRhSWQpKSB7XG4gICAgICB0aGlzLnRlbnNvckRhdGFQZW5kaW5nRGlzcG9zYWwucHVzaChkYXRhSWQpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgdGhpcy5yZWxlYXNlUmVzb3VyY2UoZGF0YUlkKTtcbiAgICB0aGlzLnRlbnNvck1hcC5kZWxldGUoZGF0YUlkKTtcblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgb3ZlcnJpZGUgbWVtb3J5KCk6IFdlYkdQVU1lbW9yeUluZm8ge1xuICAgIHJldHVybiB7XG4gICAgICBudW1CeXRlc0luR1BVOiB0aGlzLmJ1ZmZlck1hbmFnZXIubnVtQnl0ZXNVc2VkLFxuICAgICAgbnVtQnl0ZXNBbGxvY2F0ZWRJbkdQVTogdGhpcy5idWZmZXJNYW5hZ2VyLm51bUJ5dGVzQWxsb2NhdGVkLFxuICAgICAgdW5yZWxpYWJsZTogZmFsc2VcbiAgICB9IGFzIFdlYkdQVU1lbW9yeUluZm87XG4gIH1cblxuICBwcml2YXRlIHJlbGVhc2VSZXNvdXJjZShkYXRhSWQ6IERhdGFJZCkge1xuICAgIGNvbnN0IHRlbnNvckRhdGEgPSB0aGlzLnRlbnNvck1hcC5nZXQoZGF0YUlkKTtcbiAgICBpZiAoIXRlbnNvckRhdGEgfHwgIXRlbnNvckRhdGEucmVzb3VyY2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBJZiB0ZW5zb3IncyByZXNvdXJjZSBpcyBmcm9tIGV4dGVybmFsLCBkbyBub3QgcmVsZWFzZS5cbiAgICBpZiAodGVuc29yRGF0YS5leHRlcm5hbCkge1xuICAgICAgdGVuc29yRGF0YS5yZXNvdXJjZSA9IG51bGw7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0ZW5zb3JEYXRhLnJlc291cmNlIGluc3RhbmNlb2YgR1BVQnVmZmVyKSB7XG4gICAgICB0aGlzLmJ1ZmZlck1hbmFnZXIucmVsZWFzZUJ1ZmZlcih0ZW5zb3JEYXRhLnJlc291cmNlKTtcbiAgICB9IGVsc2UgaWYgKHRlbnNvckRhdGEucmVzb3VyY2UgaW5zdGFuY2VvZiBHUFVUZXh0dXJlKSB7XG4gICAgICB0aGlzLnRleHR1cmVNYW5hZ2VyLnJlbGVhc2VUZXh0dXJlKHRlbnNvckRhdGEucmVzb3VyY2UpO1xuICAgIH1cbiAgICB0ZW5zb3JEYXRhLnJlc291cmNlID0gbnVsbDtcbiAgfVxuXG4gIC8qKiBSZXR1cm4gcmVmQ291bnQgb2YgYSBgVGVuc29yRGF0YWAuICovXG4gIG92ZXJyaWRlIHJlZkNvdW50KGRhdGFJZDogRGF0YUlkKTogbnVtYmVyIHtcbiAgICBpZiAodGhpcy50ZW5zb3JNYXAuaGFzKGRhdGFJZCkpIHtcbiAgICAgIGNvbnN0IHRlbnNvckRhdGEgPSB0aGlzLnRlbnNvck1hcC5nZXQoZGF0YUlkKTtcbiAgICAgIHJldHVybiB0ZW5zb3JEYXRhLnJlZkNvdW50O1xuICAgIH1cbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIC8qKiBJbmNyZWFzZSByZWZDb3VudCBvZiBhIGBUZW5zb3JEYXRhYC4gKi9cbiAgb3ZlcnJpZGUgaW5jUmVmKGRhdGFJZDogRGF0YUlkKTogdm9pZCB7XG4gICAgY29uc3QgdGVuc29yRGF0YSA9IHRoaXMudGVuc29yTWFwLmdldChkYXRhSWQpO1xuICAgIHRlbnNvckRhdGEucmVmQ291bnQrKztcbiAgfVxuXG4gIC8qKiBEZWNyZWFzZSByZWZDb3VudCBvZiBhIGBUZW5zb3JEYXRhYC4gKi9cbiAgZGVjUmVmKGRhdGFJZDogRGF0YUlkKTogdm9pZCB7XG4gICAgaWYgKHRoaXMudGVuc29yTWFwLmhhcyhkYXRhSWQpKSB7XG4gICAgICBjb25zdCB0ZW5zb3JEYXRhID0gdGhpcy50ZW5zb3JNYXAuZ2V0KGRhdGFJZCk7XG4gICAgICB0ZW5zb3JEYXRhLnJlZkNvdW50LS07XG4gICAgfVxuICB9XG5cbiAgb3ZlcnJpZGUgd3JpdGUodmFsdWVzOiBCYWNrZW5kVmFsdWVzLCBzaGFwZTogbnVtYmVyW10sIGR0eXBlOiBEYXRhVHlwZSk6XG4gICAgICBEYXRhSWQge1xuICAgIGlmIChkdHlwZSA9PT0gJ2NvbXBsZXg2NCcgJiYgdmFsdWVzICE9IG51bGwpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBgQ2Fubm90IHdyaXRlIHRvIGEgY29tcGxleDY0IGR0eXBlLiBgICtcbiAgICAgICAgICBgUGxlYXNlIHVzZSB0Zi5jb21wbGV4KHJlYWwsIGltYWcpLmApO1xuICAgIH1cbiAgICBjb25zdCBkYXRhSWQgPSB7aWQ6IHRoaXMubmV4dERhdGFJZCgpfTtcbiAgICB0aGlzLnRlbnNvck1hcC5zZXQoZGF0YUlkLCB7ZHR5cGUsIHNoYXBlLCB2YWx1ZXMsIHJlZkNvdW50OiAxfSk7XG4gICAgcmV0dXJuIGRhdGFJZDtcbiAgfVxuXG4gIG92ZXJyaWRlIG1vdmUoXG4gICAgICBkYXRhSWQ6IERhdGFJZCwgdmFsdWVzOiBCYWNrZW5kVmFsdWVzLCBzaGFwZTogbnVtYmVyW10sIGR0eXBlOiBEYXRhVHlwZSxcbiAgICAgIHJlZkNvdW50OiBudW1iZXIpOiB2b2lkIHtcbiAgICBpZiAoZHR5cGUgPT09ICdjb21wbGV4NjQnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgYENhbm5vdCB3cml0ZSB0byBhIGNvbXBsZXg2NCBkdHlwZS4gYCArXG4gICAgICAgICAgYFBsZWFzZSB1c2UgdGYuY29tcGxleChyZWFsLCBpbWFnKS5gKTtcbiAgICB9XG4gICAgdGhpcy50ZW5zb3JNYXAuc2V0KGRhdGFJZCwge2R0eXBlLCBzaGFwZSwgdmFsdWVzLCByZWZDb3VudH0pO1xuICB9XG5cbiAgc3VibWl0UXVldWUoKSB7XG4gICAgdGhpcy5xdWV1ZS5zdWJtaXQoW3RoaXMuY29tbWFuZEVuY29kZXIuZmluaXNoKCldKTtcbiAgICB0aGlzLmNvbW1hbmRFbmNvZGVyID0gbnVsbDtcbiAgICB0aGlzLmRpc3BhdGNoQ291bnRJblBhc3MgPSAwO1xuXG4gICAgdGhpcy5jb21tYW5kUXVldWVPd25lZElkcyA9IG5ldyBXZWFrU2V0PERhdGFJZD4oKTtcblxuICAgIHRoaXMudGVuc29yRGF0YVBlbmRpbmdEaXNwb3NhbC5mb3JFYWNoKGQgPT4ge1xuICAgICAgdGhpcy5yZWxlYXNlUmVzb3VyY2UoZCk7XG4gICAgICB0aGlzLnRlbnNvck1hcC5kZWxldGUoZCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnVuaWZvcm1QZW5kaW5nRGlzcG9zYWwuZm9yRWFjaChcbiAgICAgICAgYiA9PiB0aGlzLmJ1ZmZlck1hbmFnZXIucmVsZWFzZUJ1ZmZlcihiKSk7XG4gICAgdGhpcy5zdGFnaW5nUGVuZGluZ0Rpc3Bvc2FsLmZvckVhY2goXG4gICAgICAgIGIgPT4gdGhpcy5idWZmZXJNYW5hZ2VyLnJlbGVhc2VCdWZmZXIoYiwgZmFsc2UpKTtcblxuICAgIHRoaXMudGVuc29yRGF0YVBlbmRpbmdEaXNwb3NhbCA9IFtdO1xuICAgIHRoaXMudW5pZm9ybVBlbmRpbmdEaXNwb3NhbCA9IFtdO1xuICAgIHRoaXMuc3RhZ2luZ1BlbmRpbmdEaXNwb3NhbCA9IFtdO1xuICB9XG5cbiAgZW5zdXJlQ29tbWFuZEVuY29kZXJSZWFkeSgpIHtcbiAgICBpZiAoIXRoaXMuY29tbWFuZEVuY29kZXIpIHtcbiAgICAgIHRoaXMuY29tbWFuZEVuY29kZXIgPSB0aGlzLmRldmljZS5jcmVhdGVDb21tYW5kRW5jb2RlcigpO1xuICAgIH1cbiAgfVxuXG4gIGVuZENvbXB1dGVQYXNzRW5jb2RlcigpIHtcbiAgICBpZiAodGhpcy5jb21wdXRlUGFzc0VuY29kZXIpIHtcbiAgICAgIHRoaXMuY29tcHV0ZVBhc3NFbmNvZGVyLmVuZCgpO1xuICAgICAgdGhpcy5jb21wdXRlUGFzc0VuY29kZXIgPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIC8vIENoZWNrIGlmIHBhcmFsbGVsIGNvbXBpbGF0aW9uIGlzIGRvbmUuXG4gIGFzeW5jIGNoZWNrQ29tcGlsZUNvbXBsZXRpb25Bc3luYygpIHtcbiAgICBsZXQgcGlwZWxpbmVzOiBHUFVDb21wdXRlUGlwZWxpbmVbXTtcbiAgICB0cnkge1xuICAgICAgcGlwZWxpbmVzID0gYXdhaXQgUHJvbWlzZS5hbGwoT2JqZWN0LnZhbHVlcyh0aGlzLnBpcGVsaW5lQ2FjaGUpKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAvLyBUT0RPOiBBZGQgdGVzdCBjYXNlIHRvIGNhdGNoIHRoaXMgZXhjZXB0aW9uLlxuICAgICAgdGhyb3cgbmV3IEVycm9yKGUubWVzc2FnZSk7XG4gICAgfVxuICAgIE9iamVjdC5rZXlzKHRoaXMucGlwZWxpbmVDYWNoZSkubWFwKChrZXksIGkpID0+IHtcbiAgICAgIHRoaXMucGlwZWxpbmVDYWNoZVtrZXldID0gcGlwZWxpbmVzW2ldO1xuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGdldEJ1ZmZlckRhdGEoYnVmZmVyOiBHUFVCdWZmZXIpOiBQcm9taXNlPEFycmF5QnVmZmVyPiB7XG4gICAgaWYgKGVudigpLmdldEJvb2woJ1dFQkdQVV9FTkdJTkVfQ09NUElMRV9PTkxZJykpIHtcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICAnVGhlIGRhdGEgbWF5IGJlIGludmFsaWQgc2luY2UgV0VCR1BVX0VOR0lORV9DT01QSUxFX09OTFkgaXMgdHJ1ZSwgdGhpcyBjYW4gb25seSBiZSBjYWxsZWQgd2hlbiBXRUJHUFVfRU5HSU5FX0NPTVBJTEVfT05MWSBpcyBmYWxzZScpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IHNpemUgPSBidWZmZXIuc2l6ZTtcbiAgICBjb25zdCBzdGFnaW5nQnVmZmVyID0gdGhpcy5idWZmZXJNYW5hZ2VyLmFjcXVpcmVCdWZmZXIoXG4gICAgICAgIHNpemUsIEdQVUJ1ZmZlclVzYWdlLkNPUFlfRFNUIHwgR1BVQnVmZmVyVXNhZ2UuTUFQX1JFQUQpO1xuICAgIHRoaXMuZW5zdXJlQ29tbWFuZEVuY29kZXJSZWFkeSgpO1xuICAgIHRoaXMuZW5kQ29tcHV0ZVBhc3NFbmNvZGVyKCk7XG4gICAgdGhpcy5jb21tYW5kRW5jb2Rlci5jb3B5QnVmZmVyVG9CdWZmZXIoYnVmZmVyLCAwLCBzdGFnaW5nQnVmZmVyLCAwLCBzaXplKTtcbiAgICB0aGlzLnN1Ym1pdFF1ZXVlKCk7XG5cbiAgICBhd2FpdCBzdGFnaW5nQnVmZmVyLm1hcEFzeW5jKEdQVU1hcE1vZGUuUkVBRCk7XG4gICAgY29uc3QgdmFsdWVzID0gc3RhZ2luZ0J1ZmZlci5nZXRNYXBwZWRSYW5nZSgpLnNsaWNlKDApO1xuXG4gICAgc3RhZ2luZ0J1ZmZlci51bm1hcCgpO1xuICAgIGlmIChzdGFnaW5nQnVmZmVyICE9IG51bGwpIHtcbiAgICAgIHRoaXMuYnVmZmVyTWFuYWdlci5yZWxlYXNlQnVmZmVyKHN0YWdpbmdCdWZmZXIpO1xuICAgIH1cblxuICAgIC8vIE5lZWQgdG8gZ2V0IHRleHR1cmUgZnJvbSBzd2FwQ2hhaW4gdG8gZW5hYmxlIHByb2ZpbGluZyB0b29sXG4gICAgLy8gdG8gY2FwdHVyZSBhIGZyYW1lXG4gICAgaWYgKGVudigpLmdldEJvb2woJ1dFQkdQVV9VU0VfUFJPRklMRV9UT09MJykpIHtcbiAgICAgIHV0aWwuYXNzZXJ0KFxuICAgICAgICAgIHRoaXMuZHVtbXlDb250ZXh0ICE9PSB1bmRlZmluZWQsXG4gICAgICAgICAgKCkgPT4gYEZhaWwgdG8gZ2V0IGNvbnRleHQgZm9yIHByb2ZpbGluZyB0b29sYCk7XG4gICAgICB0aGlzLmR1bW15Q29udGV4dC5nZXRDdXJyZW50VGV4dHVyZSgpO1xuICAgIH1cblxuICAgIHJldHVybiB2YWx1ZXM7XG4gIH1cblxuICBwcml2YXRlIGNvbnZlcnRBbmRDYWNoZU9uQ1BVKGRhdGFJZDogRGF0YUlkLCBkYXRhOiBCYWNrZW5kVmFsdWVzKTpcbiAgICAgIEJhY2tlbmRWYWx1ZXMge1xuICAgIGNvbnN0IHRlbnNvckRhdGEgPSB0aGlzLnRlbnNvck1hcC5nZXQoZGF0YUlkKTtcbiAgICB0ZW5zb3JEYXRhLnZhbHVlcyA9IGRhdGE7XG4gICAgcmV0dXJuIHRlbnNvckRhdGEudmFsdWVzO1xuICB9XG5cbiAgb3ZlcnJpZGUgcmVhZFN5bmMoZGF0YUlkOiBvYmplY3QpOiBCYWNrZW5kVmFsdWVzIHtcbiAgICBjb25zdCB0ZW5zb3JEYXRhID0gdGhpcy50ZW5zb3JNYXAuZ2V0KGRhdGFJZCk7XG4gICAgY29uc3Qge3ZhbHVlcywgY29tcGxleFRlbnNvckluZm9zfSA9IHRlbnNvckRhdGE7XG5cbiAgICBpZiAodmFsdWVzICE9IG51bGwgfHwgdGVuc29yRGF0YS5kdHlwZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHJldHVybiB2YWx1ZXM7XG4gICAgfVxuXG4gICAgaWYgKHRlbnNvckRhdGEuZHR5cGUgPT09ICdjb21wbGV4NjQnKSB7XG4gICAgICBjb25zdCByZWFsVmFsdWVzID1cbiAgICAgICAgICB0aGlzLnJlYWRTeW5jKGNvbXBsZXhUZW5zb3JJbmZvcy5yZWFsLmRhdGFJZCkgYXMgRmxvYXQzMkFycmF5O1xuICAgICAgY29uc3QgaW1hZ1ZhbHVlcyA9XG4gICAgICAgICAgdGhpcy5yZWFkU3luYyhjb21wbGV4VGVuc29ySW5mb3MuaW1hZy5kYXRhSWQpIGFzIEZsb2F0MzJBcnJheTtcbiAgICAgIGNvbnN0IGNvbXBsZXhWYWxzID0gdXRpbC5jb252ZXJ0QmFja2VuZFZhbHVlc0FuZEFycmF5QnVmZmVyKFxuICAgICAgICAgIGJhY2tlbmRfdXRpbC5tZXJnZVJlYWxBbmRJbWFnQXJyYXlzKHJlYWxWYWx1ZXMsIGltYWdWYWx1ZXMpLmJ1ZmZlcixcbiAgICAgICAgICAnZmxvYXQzMicpO1xuICAgICAgdGhpcy5jb252ZXJ0QW5kQ2FjaGVPbkNQVShkYXRhSWQsIGNvbXBsZXhWYWxzKTtcbiAgICAgIHJldHVybiBjb21wbGV4VmFscztcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuaGFzUmVhZFN5bmNXYXJuZWQpIHtcbiAgICAgIHRoaXMuaGFzUmVhZFN5bmNXYXJuZWQgPSB0cnVlO1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgIGBUaGUgcGVyZm9ybWFuY2Ugb2Ygc3luY2hyb25vdXNseSByZWFkaW5nIGRhdGEgZnJvbSBHUFUgdG8gQ1BVIGlzIGAgK1xuICAgICAgICAgIGBwb29yIG9uIHRoZSB3ZWJncHUgYmFja2VuZCwgcGxlYXNlIHVzZSBhc3luY2hyb25vdXMgQVBJcyBpbnN0ZWFkLmApO1xuICAgIH1cblxuICAgIGNvbnN0IGFscGhhTW9kZXM6IEdQVUNhbnZhc0FscGhhTW9kZVtdID0gWydvcGFxdWUnLCAncHJlbXVsdGlwbGllZCddO1xuXG4gICAgY29uc3QgYnVmZmVyID0gdGVuc29yRGF0YS5yZXNvdXJjZSBhcyBHUFVCdWZmZXI7XG4gICAgY29uc3QgYnVmZmVyU2l6ZSA9IGJ1ZmZlci5zaXplO1xuICAgIHV0aWwuYXNzZXJ0KFxuICAgICAgICBidWZmZXJTaXplICUgNCA9PT0gMCxcbiAgICAgICAgKCkgPT4gJ0JlY2F1c2UgdGhlcmUgaXMgNCBieXRlcyBmb3IgJyArXG4gICAgICAgICAgICAnb25lIHBpeGVsLCBidWZmZXIgc2l6ZSBtdXN0IGJlIG11bHRpcGxlIG9mIDQuJyk7XG4gICAgY29uc3QgcGl4ZWxzU2l6ZSA9IGJ1ZmZlclNpemUgLyA0O1xuICAgIGNvbnN0IHZhbHNHUFUgPSBuZXcgQXJyYXlCdWZmZXIoYnVmZmVyU2l6ZSk7XG4gICAgLy8gVE9ETzogYWRqdXN0IHRoZSByZWFkaW5nIHdpbmRvdyBzaXplIGFjY29yZGluZyB0aGUgYGJ1ZmZlclNpemVgLlxuICAgIGNvbnN0IGNhbnZhc1dpZHRoID0gMjU2LCBjYW52YXNIZWlnaHQgPSAyNTY7XG4gICAgY29uc3Qgc3RhZ2luZ0RldmljZVN0b3JhZ2U6IE9mZnNjcmVlbkNhbnZhc1tdID1cbiAgICAgICAgYWxwaGFNb2Rlcy5tYXAoXyA9PiBuZXcgT2Zmc2NyZWVuQ2FudmFzKGNhbnZhc1dpZHRoLCBjYW52YXNIZWlnaHQpKTtcbiAgICBjb25zdCBzdGFnaW5nSG9zdFN0b3JhZ2UgPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKGNhbnZhc1dpZHRoLCBjYW52YXNIZWlnaHQpO1xuXG4gICAgdGhpcy5lbmRDb21wdXRlUGFzc0VuY29kZXIoKTtcbiAgICBzdGFnaW5nRGV2aWNlU3RvcmFnZVxuICAgICAgICAubWFwKChzdG9yYWdlLCBpbmRleCkgPT4ge1xuICAgICAgICAgIGNvbnN0IGNvbnRleHQgPSBzdG9yYWdlLmdldENvbnRleHQoJ3dlYmdwdScpO1xuICAgICAgICAgIC8vIFRPRE86IHVzZSByZ2JhOHVub3JtIGZvcm1hdCB3aGVuIHRoaXMgZm9ybWF0IGlzIHN1cHBvcnRlZCBvbiBNYWMuXG4gICAgICAgICAgLy8gaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9MTI5ODYxOFxuICAgICAgICAgIGNvbnRleHQuY29uZmlndXJlKHtcbiAgICAgICAgICAgIGRldmljZTogdGhpcy5kZXZpY2UsXG4gICAgICAgICAgICBmb3JtYXQ6ICdiZ3JhOHVub3JtJyxcbiAgICAgICAgICAgIHVzYWdlOiBHUFVUZXh0dXJlVXNhZ2UuQ09QWV9EU1QsXG4gICAgICAgICAgICBhbHBoYU1vZGU6IGFscGhhTW9kZXNbaW5kZXhdLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJldHVybiBjb250ZXh0LmdldEN1cnJlbnRUZXh0dXJlKCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5tYXAoKHRleHR1cmUsIGluZGV4KSA9PiB7XG4gICAgICAgICAgY29uc3QgYnl0ZXNQZXJSb3cgPSBjYW52YXNXaWR0aCAqIDQ7XG4gICAgICAgICAgY29uc3QgcmVhZERhdGFHUFVUb0NQVSA9XG4gICAgICAgICAgICAgICh3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlciwgb2Zmc2V0OiBudW1iZXIpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmVuc3VyZUNvbW1hbmRFbmNvZGVyUmVhZHkoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbW1hbmRFbmNvZGVyLmNvcHlCdWZmZXJUb1RleHR1cmUoXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICBidWZmZXIsXG4gICAgICAgICAgICAgICAgICAgICAgYnl0ZXNQZXJSb3csXG4gICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0LFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgdGV4dHVyZSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgIHdpZHRoLFxuICAgICAgICAgICAgICAgICAgICAgIGhlaWdodCxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zdWJtaXRRdWV1ZSgpO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgY29udGV4dCA9IHN0YWdpbmdIb3N0U3RvcmFnZS5nZXRDb250ZXh0KCcyZCcsIHtcbiAgICAgICAgICAgICAgICAgIHdpbGxSZWFkRnJlcXVlbnRseTogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb250ZXh0LmNsZWFyUmVjdCgwLCAwLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgICAgICAgICBjb250ZXh0LmRyYXdJbWFnZShzdGFnaW5nRGV2aWNlU3RvcmFnZVtpbmRleF0sIDAsIDApO1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0YWdpbmdWYWx1ZXMgPVxuICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmdldEltYWdlRGF0YSgwLCAwLCB3aWR0aCwgaGVpZ2h0KS5kYXRhO1xuICAgICAgICAgICAgICAgIGNvbnN0IGFscGhhTW9kZSA9IGFscGhhTW9kZXNbaW5kZXhdO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNwYW4gPVxuICAgICAgICAgICAgICAgICAgICBuZXcgVWludDhDbGFtcGVkQXJyYXkodmFsc0dQVSwgb2Zmc2V0LCB3aWR0aCAqIGhlaWdodCAqIDQpO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgc3Bhbi5sZW5ndGg7IGsgKz0gNCkge1xuICAgICAgICAgICAgICAgICAgaWYgKGFscGhhTW9kZSA9PT0gJ3ByZW11bHRpcGxpZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHNwYW5bayArIDNdID0gc3RhZ2luZ1ZhbHVlc1trICsgM107XG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHN0YWdpbmdWYWx1ZXNba107XG4gICAgICAgICAgICAgICAgICAgIHNwYW5ba10gPSBzdGFnaW5nVmFsdWVzW2sgKyAyXTtcbiAgICAgICAgICAgICAgICAgICAgc3BhbltrICsgMV0gPSBzdGFnaW5nVmFsdWVzW2sgKyAxXTtcbiAgICAgICAgICAgICAgICAgICAgc3BhbltrICsgMl0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICBjb25zdCBmdWxseVJlYWRDb3VudCA9XG4gICAgICAgICAgICAgIE1hdGguZmxvb3IocGl4ZWxzU2l6ZSAvIChjYW52YXNXaWR0aCAqIGNhbnZhc0hlaWdodCkpO1xuICAgICAgICAgIGxldCB3aWR0aCA9IGNhbnZhc1dpZHRoLCBoZWlnaHQgPSBjYW52YXNIZWlnaHQsIG9mZnNldCA9IDA7XG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmdWxseVJlYWRDb3VudDsgaSsrKSB7XG4gICAgICAgICAgICAvLyBSZWFkIHRoZSBidWZmZXIgZGF0YSwgd2hpY2ggZnVsbHkgZmlsbCB0aGUgd2hvbGUgY2FudmFzLlxuICAgICAgICAgICAgcmVhZERhdGFHUFVUb0NQVSh3aWR0aCwgaGVpZ2h0LCBvZmZzZXQpO1xuICAgICAgICAgICAgb2Zmc2V0ICs9IGNhbnZhc1dpZHRoICogY2FudmFzSGVpZ2h0ICogNDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb25zdCByZW1haW5TaXplID0gcGl4ZWxzU2l6ZSAlIChjYW52YXNXaWR0aCAqIGNhbnZhc0hlaWdodCk7XG4gICAgICAgICAgaGVpZ2h0ID0gTWF0aC5mbG9vcihyZW1haW5TaXplIC8gY2FudmFzV2lkdGgpO1xuICAgICAgICAgIGlmIChoZWlnaHQgPiAwKSB7XG4gICAgICAgICAgICAvLyBSZWFkIHRoZSBidWZmZXIgZGF0YSwgd2hpY2ggZnVsbHkgZmlsbCBjZXJ0YWluIHJvd3Mgb2YgY2FudmFzLlxuICAgICAgICAgICAgcmVhZERhdGFHUFVUb0NQVSh3aWR0aCwgaGVpZ2h0LCBvZmZzZXQpO1xuICAgICAgICAgICAgb2Zmc2V0ICs9IGhlaWdodCAqIChjYW52YXNXaWR0aCAqIDQpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHdpZHRoID0gcmVtYWluU2l6ZSAlIGNhbnZhc1dpZHRoO1xuICAgICAgICAgIGlmICh3aWR0aCA+IDApIHtcbiAgICAgICAgICAgIC8vIFJlYWQgdGhlIGJ1ZmZlciBkYXRhLCB3aGljaCBub3QgZnVsbHkgZmlsbCBvbmUgcm93IG9mIGNhbnZhcy5cbiAgICAgICAgICAgIHJlYWREYXRhR1BVVG9DUFUod2lkdGgsIDEsIG9mZnNldCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgIGNvbnN0IHZhbHMgPVxuICAgICAgICB1dGlsLmNvbnZlcnRCYWNrZW5kVmFsdWVzQW5kQXJyYXlCdWZmZXIodmFsc0dQVSwgdGVuc29yRGF0YS5kdHlwZSk7XG4gICAgdGhpcy5jb252ZXJ0QW5kQ2FjaGVPbkNQVShkYXRhSWQsIHZhbHMpO1xuICAgIHJldHVybiB2YWxzO1xuICB9XG5cbiAgb3ZlcnJpZGUgYXN5bmMgcmVhZChkYXRhSWQ6IG9iamVjdCk6IFByb21pc2U8QmFja2VuZFZhbHVlcz4ge1xuICAgIGlmICghdGhpcy50ZW5zb3JNYXAuaGFzKGRhdGFJZCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVGVuc29yICR7ZGF0YUlkfSB3YXMgbm90IHJlZ2lzdGVyZWQhYCk7XG4gICAgfVxuICAgIGNvbnN0IHRlbnNvckRhdGEgPSB0aGlzLnRlbnNvck1hcC5nZXQoZGF0YUlkKTtcblxuICAgIGNvbnN0IHt2YWx1ZXN9ID0gdGVuc29yRGF0YTtcblxuICAgIGlmICh2YWx1ZXMgIT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHZhbHVlcztcbiAgICB9XG5cbiAgICAvLyBEb3dubG9hZCB0aGUgdmFsdWVzIGZyb20gdGhlIEdQVS5cbiAgICBsZXQgdmFsczogQmFja2VuZFZhbHVlcztcbiAgICBpZiAodGVuc29yRGF0YS5kdHlwZSA9PT0gJ2NvbXBsZXg2NCcpIHtcbiAgICAgIGNvbnN0IHBzID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICB0aGlzLnJlYWQodGVuc29yRGF0YS5jb21wbGV4VGVuc29ySW5mb3MucmVhbC5kYXRhSWQpLFxuICAgICAgICB0aGlzLnJlYWQodGVuc29yRGF0YS5jb21wbGV4VGVuc29ySW5mb3MuaW1hZy5kYXRhSWQpXG4gICAgICBdKTtcblxuICAgICAgY29uc3QgcmVhbFZhbHVlcyA9IHBzWzBdO1xuICAgICAgY29uc3QgaW1hZ1ZhbHVlcyA9IHBzWzFdO1xuICAgICAgdmFscyA9IGJhY2tlbmRfdXRpbC5tZXJnZVJlYWxBbmRJbWFnQXJyYXlzKFxuICAgICAgICAgIHJlYWxWYWx1ZXMgYXMgRmxvYXQzMkFycmF5LCBpbWFnVmFsdWVzIGFzIEZsb2F0MzJBcnJheSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLmdldEJ1ZmZlckRhdGEodGVuc29yRGF0YS5yZXNvdXJjZSBhcyBHUFVCdWZmZXIpO1xuICAgICAgdmFscyA9IHV0aWwuY29udmVydEJhY2tlbmRWYWx1ZXNBbmRBcnJheUJ1ZmZlcihkYXRhLCB0ZW5zb3JEYXRhLmR0eXBlKTtcbiAgICB9XG4gICAgdGhpcy5jb252ZXJ0QW5kQ2FjaGVPbkNQVShkYXRhSWQsIHZhbHMpO1xuICAgIHJldHVybiB2YWxzO1xuICB9XG5cbiAgLy8gVGhlIHNvdXJjZSBHUFVCdWZmZXIgYW5kIGRlc3RpbmF0aW9uIEdQVUJ1ZmZlciBoYXZlIHRoZSBzYW1lIHNpemUgYW5kXG4gIC8vIHVzYWdlLlxuICBwcml2YXRlIGNvcHlCdWZmZXIoc3JjQnVmZmVyOiBHUFVCdWZmZXIpIHtcbiAgICBjb25zdCBzaXplID0gc3JjQnVmZmVyLnNpemU7XG4gICAgY29uc3QgdXNhZ2UgPSBzcmNCdWZmZXIudXNhZ2U7XG4gICAgY29uc3QgZHN0QnVmZmVyID0gdGhpcy5idWZmZXJNYW5hZ2VyLmFjcXVpcmVCdWZmZXIoc2l6ZSwgdXNhZ2UpO1xuICAgIHRoaXMuZW5zdXJlQ29tbWFuZEVuY29kZXJSZWFkeSgpO1xuICAgIHRoaXMuZW5kQ29tcHV0ZVBhc3NFbmNvZGVyKCk7XG4gICAgdGhpcy5jb21tYW5kRW5jb2Rlci5jb3B5QnVmZmVyVG9CdWZmZXIoc3JjQnVmZmVyLCAwLCBkc3RCdWZmZXIsIDAsIHNpemUpO1xuICAgIHRoaXMuc3VibWl0UXVldWUoKTtcbiAgICByZXR1cm4gZHN0QnVmZmVyO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIFRGLmpzIHRlbnNvciBvdXQgb2YgYW4gZXhpc3RpbmcgV2ViR1BVIGJ1ZmZlci5cbiAgICovXG4gIG92ZXJyaWRlIGNyZWF0ZVRlbnNvckZyb21HUFVEYXRhKFxuICAgICAgd2ViR1BVRGF0YTogV2ViR1BVRGF0YSwgc2hhcGU6IG51bWJlcltdLCBkdHlwZTogRGF0YVR5cGUpOiBUZW5zb3Ige1xuICAgIGxldCBidWZmZXIgPSB3ZWJHUFVEYXRhLmJ1ZmZlcjtcbiAgICBpZiAoZHR5cGUgPT09ICdjb21wbGV4NjQnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCB3cml0ZSB0byBhIGNvbXBsZXg2NCBkdHlwZS4gYCk7XG4gICAgfVxuICAgIGNvbnN0IGRhdGFJZCA9IHtpZDogdGhpcy5uZXh0RGF0YUlkKCl9O1xuICAgIHRoaXMudGVuc29yTWFwLnNldChkYXRhSWQsIHtcbiAgICAgIGR0eXBlLFxuICAgICAgc2hhcGUsXG4gICAgICB2YWx1ZXM6IG51bGwsXG4gICAgICByZWZDb3VudDogMSxcbiAgICAgIGV4dGVybmFsOiB3ZWJHUFVEYXRhLnplcm9Db3B5XG4gICAgfSk7XG4gICAgY29uc3QgdGVuc29yRGF0YSA9IHRoaXMudGVuc29yTWFwLmdldChkYXRhSWQpO1xuICAgIGNvbnN0IHNpemUgPSB3ZWJncHVfdXRpbC5HUFVCeXRlc1BlckVsZW1lbnQodGVuc29yRGF0YS5kdHlwZSkgKlxuICAgICAgICB1dGlsLnNpemVGcm9tU2hhcGUodGVuc29yRGF0YS5zaGFwZSk7XG4gICAgaWYgKHdlYkdQVURhdGEuYnVmZmVyLnNpemUgPCBzaXplKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEdQVUJ1ZmZlciBzaXplKCR7XG4gICAgICAgICAgd2ViR1BVRGF0YS5idWZmZXIuc2l6ZX0pIGlzIHNtYWxsZXIgdGhhbiB0ZW5zb3Igc2l6ZSgke3NpemV9KSFgKTtcbiAgICB9IGVsc2UgaWYgKFxuICAgICAgICAod2ViR1BVRGF0YS5idWZmZXIudXNhZ2UgJlxuICAgICAgICAgKEdQVUJ1ZmZlclVzYWdlLlNUT1JBR0UgfCBHUFVCdWZmZXJVc2FnZS5DT1BZX1NSQykpICE9PVxuICAgICAgICAoR1BVQnVmZmVyVXNhZ2UuU1RPUkFHRSB8IEdQVUJ1ZmZlclVzYWdlLkNPUFlfU1JDKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICdHUFVCdWZmZXIudXNhZ2Ugc2hvdWxkIGluY2x1ZGUgR1BVQnVmZmVyVXNhZ2UuU1RPUkFHRSB8IEdQVUJ1ZmZlclVzYWdlLkNPUFlfU1JDIScpO1xuICAgIH1cblxuICAgIC8vIERvIGJ1ZmZlciBjb3B5IGJ5IGRlZmF1bHQuXG4gICAgaWYgKHdlYkdQVURhdGEuemVyb0NvcHkgIT09IHRydWUpIHtcbiAgICAgIGJ1ZmZlciA9IHRoaXMuY29weUJ1ZmZlcihidWZmZXIpO1xuICAgIH1cbiAgICB0ZW5zb3JEYXRhLnJlc291cmNlID0gYnVmZmVyO1xuICAgIHJldHVybiBlbmdpbmUoKS5tYWtlVGVuc29yRnJvbURhdGFJZChkYXRhSWQsIHNoYXBlLCBkdHlwZSwgdGhpcyk7XG4gIH1cblxuICAvKipcbiAgICogUmVhZCB0ZW5zb3IgdG8gYSBuZXcgR1BVQnVmZmVyLlxuICAgKiBAcGFyYW0gZGF0YUlkIFRoZSBzb3VyY2UgdGVuc29yLlxuICAgKi9cbiAgb3ZlcnJpZGUgcmVhZFRvR1BVKGRhdGFJZDogRGF0YUlkKTogR1BVRGF0YSB7XG4gICAgY29uc3Qgc3JjVGVuc29yRGF0YSA9IHRoaXMudGVuc29yTWFwLmdldChkYXRhSWQpO1xuICAgIGNvbnN0IHt2YWx1ZXMsIGR0eXBlLCBzaGFwZSwgcmVzb3VyY2V9ID0gc3JjVGVuc29yRGF0YTtcblxuICAgIGlmIChkdHlwZSA9PT0gJ2NvbXBsZXg2NCcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRG9lcyBub3Qgc3VwcG9ydCByZWFkaW5nIGJ1ZmZlciBmb3IgY29tcGxleDY0IGR0eXBlLicpO1xuICAgIH1cblxuICAgIGlmIChyZXNvdXJjZSA9PSBudWxsKSB7XG4gICAgICBpZiAodmFsdWVzICE9IG51bGwpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdEYXRhIGlzIG5vdCBvbiBHUFUgYnV0IG9uIENQVS4nKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlcmUgaXMgbm8gZGF0YSBvbiBHUFUgb3IgQ1BVLicpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHNyY0J1ZmZlciA9IHJlc291cmNlIGFzIEdQVUJ1ZmZlcjtcbiAgICBjb25zdCBzaXplID0gc3JjQnVmZmVyLnNpemU7XG4gICAgY29uc3QgdXNhZ2UgPSBzcmNCdWZmZXIudXNhZ2U7XG4gICAgY29uc3QgYnVmZmVyID0gdGhpcy5idWZmZXJNYW5hZ2VyLmFjcXVpcmVCdWZmZXIoc2l6ZSwgdXNhZ2UpO1xuICAgIHRoaXMuZW5zdXJlQ29tbWFuZEVuY29kZXJSZWFkeSgpO1xuICAgIHRoaXMuZW5kQ29tcHV0ZVBhc3NFbmNvZGVyKCk7XG4gICAgdGhpcy5jb21tYW5kRW5jb2Rlci5jb3B5QnVmZmVyVG9CdWZmZXIoXG4gICAgICAgIHJlc291cmNlIGFzIEdQVUJ1ZmZlciwgMCwgYnVmZmVyLCAwLCBzaXplKTtcbiAgICB0aGlzLnN1Ym1pdFF1ZXVlKCk7XG5cbiAgICBjb25zdCB0ZW5zb3JJbmZvID0gdGhpcy5tYWtlVGVuc29ySW5mbyhzaGFwZSwgZHR5cGUpO1xuICAgIC8vIE1ha2UgZW5naW5lIHRyYWNrIHRoaXMgdGVuc29yLCBzbyB0aGF0IHdlIGNhbiBkaXNwb3NlIGl0IGxhdGVyLlxuICAgIGNvbnN0IHRlbnNvclJlZiA9IGVuZ2luZSgpLm1ha2VUZW5zb3JGcm9tVGVuc29ySW5mbyh0ZW5zb3JJbmZvKTtcblxuICAgIGNvbnN0IHRlbnNvckRhdGEgPSB0aGlzLnRlbnNvck1hcC5nZXQodGVuc29ySW5mby5kYXRhSWQpO1xuICAgIHRlbnNvckRhdGEucmVzb3VyY2UgPSBidWZmZXI7XG5cbiAgICByZXR1cm4ge3RlbnNvclJlZiwgYnVmZmVyfTtcbiAgfVxuXG4gIGJ1ZmZlclN5bmM8UiBleHRlbmRzIFJhbmssIEQgZXh0ZW5kcyBEYXRhVHlwZT4odDogVGVuc29ySW5mbyk6XG4gICAgICBUZW5zb3JCdWZmZXI8UiwgRD4ge1xuICAgIGNvbnN0IGRhdGEgPSB0aGlzLnJlYWRTeW5jKHQuZGF0YUlkKTtcbiAgICBpZiAodC5kdHlwZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIERlY29kZSB0aGUgYnl0ZXMgaW50byBzdHJpbmcuXG4gICAgICAgIGNvbnN0IHN0cmluZ3MgPSAoZGF0YSBhcyBVaW50OEFycmF5W10pLm1hcChkID0+IHV0aWwuZGVjb2RlU3RyaW5nKGQpKTtcbiAgICAgICAgcmV0dXJuIGJ1ZmZlcih0LnNoYXBlIGFzIFNoYXBlTWFwW1JdLCB0LmR0eXBlLCBzdHJpbmdzKSBhc1xuICAgICAgICAgICAgVGVuc29yQnVmZmVyPFIsIEQ+O1xuICAgICAgfSBjYXRjaCB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGRlY29kZSBlbmNvZGVkIHN0cmluZyBieXRlcyBpbnRvIHV0Zi04Jyk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBidWZmZXIodC5zaGFwZSBhcyBTaGFwZU1hcFtSXSwgdC5kdHlwZSwgZGF0YSBhcyBUeXBlZEFycmF5KSBhc1xuICAgICAgICBUZW5zb3JCdWZmZXI8UiwgRD47XG4gIH1cblxuICBvdmVycmlkZSBhc3luYyB0aW1lKGY6ICgpID0+IHZvaWQpOiBQcm9taXNlPFdlYkdQVVRpbWluZ0luZm8+IHtcbiAgICBpZiAoIXRoaXMuc3VwcG9ydFRpbWVzdGFtcFF1ZXJ5ICYmICF0aGlzLmhhc1RpbWVzdGFtcFF1ZXJ5V2FybmVkKSB7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgYFRoaXMgZGV2aWNlIGRvZXNuJ3Qgc3VwcG9ydCB0aW1lc3RhbXAtcXVlcnkgZXh0ZW5zaW9uLiBgICtcbiAgICAgICAgICBgU3RhcnQgQ2hyb21lIGJyb3dzZXIgd2l0aCBmbGFnIGAgK1xuICAgICAgICAgIGAtLWVuYWJsZS1kYXduLWZlYXR1cmVzPWFsbG93X3Vuc2FmZV9hcGlzIHRvIHRyeSBpdCBhZ2Fpbi4gYCArXG4gICAgICAgICAgYE90aGVyd2lzZSwgemVybyB3aWxsIGJlIHNob3duIGZvciB0aGUga2VybmVsIHRpbWUgd2hlbiBwcm9maWxpbmcgYCArXG4gICAgICAgICAgYG1vZGUgaXMgZW5hYmxlZC5gKTtcbiAgICAgIHRoaXMuaGFzVGltZXN0YW1wUXVlcnlXYXJuZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIGNvbnN0IG9sZEFjdGl2ZVRpbWVycyA9IHRoaXMuYWN0aXZlVGltZXJzO1xuICAgIGNvbnN0IG5ld0FjdGl2ZVRpbWVyczogVGltZXJOb2RlW10gPSBbXTtcblxuICAgIGxldCBvdXRlck1vc3RUaW1lID0gZmFsc2U7XG4gICAgaWYgKHRoaXMucHJvZ3JhbVRpbWVyc1N0YWNrID09IG51bGwpIHtcbiAgICAgIHRoaXMucHJvZ3JhbVRpbWVyc1N0YWNrID0gbmV3QWN0aXZlVGltZXJzO1xuICAgICAgb3V0ZXJNb3N0VGltZSA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuYWN0aXZlVGltZXJzLnB1c2gobmV3QWN0aXZlVGltZXJzKTtcbiAgICB9XG4gICAgdGhpcy5hY3RpdmVUaW1lcnMgPSBuZXdBY3RpdmVUaW1lcnM7XG5cbiAgICBmKCk7XG5cbiAgICBjb25zdCBmbGF0dGVuZWRBY3RpdmVUaW1lclF1ZXJpZXMgPVxuICAgICAgICB1dGlsLmZsYXR0ZW4odGhpcy5hY3RpdmVUaW1lcnMubWFwKChkOiBXZWJHUFVLZXJuZWxJbmZvKSA9PiBkLnF1ZXJ5KSlcbiAgICAgICAgICAgIC5maWx0ZXIoZCA9PiBkICE9IG51bGwpO1xuICAgIGNvbnN0IGZsYXR0ZW5lZEFjdGl2ZVRpbWVyTmFtZXMgPVxuICAgICAgICB1dGlsLmZsYXR0ZW4odGhpcy5hY3RpdmVUaW1lcnMubWFwKChkOiBXZWJHUFVLZXJuZWxJbmZvKSA9PiBkLm5hbWUpKVxuICAgICAgICAgICAgLmZpbHRlcihkID0+IGQgIT0gbnVsbCk7XG5cbiAgICB0aGlzLmFjdGl2ZVRpbWVycyA9IG9sZEFjdGl2ZVRpbWVycztcblxuICAgIGlmIChvdXRlck1vc3RUaW1lKSB7XG4gICAgICB0aGlzLnByb2dyYW1UaW1lcnNTdGFjayA9IG51bGw7XG4gICAgfVxuICAgIGNvbnN0IHJlczogV2ViR1BVVGltaW5nSW5mbyA9IHtcbiAgICAgIHVwbG9hZFdhaXRNczogdGhpcy51cGxvYWRXYWl0TXMsXG4gICAgICBkb3dubG9hZFdhaXRNczogdGhpcy5kb3dubG9hZFdhaXRNcyxcbiAgICAgIGtlcm5lbE1zOiBudWxsLFxuICAgICAgd2FsbE1zOiBudWxsXG4gICAgfTtcblxuICAgIGNvbnN0IGtlcm5lbE1zID0gYXdhaXQgUHJvbWlzZS5hbGwoZmxhdHRlbmVkQWN0aXZlVGltZXJRdWVyaWVzKTtcbiAgICByZXNbJ2tlcm5lbE1zJ10gPSB1dGlsLnN1bShrZXJuZWxNcyk7XG4gICAgcmVzWydnZXRFeHRyYVByb2ZpbGVJbmZvJ10gPSAoKSA9PlxuICAgICAgICBrZXJuZWxNcy5tYXAoKGQsIGkpID0+ICh7bmFtZTogZmxhdHRlbmVkQWN0aXZlVGltZXJOYW1lc1tpXSwgbXM6IGR9KSlcbiAgICAgICAgICAgIC5tYXAoZCA9PiBgJHtkLm5hbWV9OiAke2QubXN9YClcbiAgICAgICAgICAgIC5qb2luKCcsICcpO1xuICAgIHRoaXMudXBsb2FkV2FpdE1zID0gMDtcbiAgICB0aGlzLmRvd25sb2FkV2FpdE1zID0gMDtcbiAgICByZXR1cm4gcmVzO1xuICB9XG5cbiAgbWFrZVRlbnNvckluZm8oXG4gICAgICBzaGFwZTogbnVtYmVyW10sIGR0eXBlOiBEYXRhVHlwZSxcbiAgICAgIHZhbHVlcz86IEJhY2tlbmRWYWx1ZXN8c3RyaW5nW10pOiBUZW5zb3JJbmZvIHtcbiAgICBpZiAoZHR5cGUgPT09ICdzdHJpbmcnICYmIHZhbHVlcyAhPSBudWxsICYmIHZhbHVlcy5sZW5ndGggPiAwICYmXG4gICAgICAgIHV0aWwuaXNTdHJpbmcodmFsdWVzWzBdKSkge1xuICAgICAgdmFsdWVzID0gKHZhbHVlcyBhcyB1bmtub3duIGFzIHN0cmluZ1tdKS5tYXAoZCA9PiB1dGlsLmVuY29kZVN0cmluZyhkKSk7XG4gICAgfVxuICAgIGNvbnN0IGRhdGFJZCA9IHRoaXMud3JpdGUodmFsdWVzIGFzIEJhY2tlbmRWYWx1ZXMsIHNoYXBlLCBkdHlwZSk7XG4gICAgcmV0dXJuIHtkYXRhSWQsIHNoYXBlLCBkdHlwZX07XG4gIH1cblxuICBwcml2YXRlIHRlbnNvclRvQmluZGluZyh0ZW5zb3I/OiBUZW5zb3JJbmZvKTogR1BVQmluZGluZ1Jlc291cmNlIHtcbiAgICBpZiAoIXRlbnNvcikge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3QgdGVuc29yRGF0YSA9IHRoaXMudGVuc29yTWFwLmdldCh0ZW5zb3IuZGF0YUlkKTtcbiAgICBjb25zdCByZXNvdXJjZSA9IHRlbnNvckRhdGEucmVzb3VyY2U7XG5cbiAgICBpZiAocmVzb3VyY2UgaW5zdGFuY2VvZiBHUFVCdWZmZXIpIHtcbiAgICAgIHJldHVybiB7YnVmZmVyOiByZXNvdXJjZX07XG4gICAgfVxuICAgIGlmIChyZXNvdXJjZSBpbnN0YW5jZW9mIEdQVVRleHR1cmUpIHtcbiAgICAgIHJldHVybiByZXNvdXJjZS5jcmVhdGVWaWV3KCk7XG4gICAgfVxuICAgIC8vIEdQVUV4dGVybmFsVGV4dHVyZVxuICAgIHJldHVybiByZXNvdXJjZTtcbiAgfVxuXG4gIHVwbG9hZFRvR1BVKGRhdGFJZDogRGF0YUlkKTogdm9pZCB7XG4gICAgY29uc3QgdGVuc29yRGF0YSA9IHRoaXMudGVuc29yTWFwLmdldChkYXRhSWQpO1xuICAgIC8vIEFscmVhZHkgb24gdGhlIEdQVS5cbiAgICBpZiAodGVuc29yRGF0YS5yZXNvdXJjZSAhPSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qgc2l6ZSA9IHdlYmdwdV91dGlsLkdQVUJ5dGVzUGVyRWxlbWVudCh0ZW5zb3JEYXRhLmR0eXBlKSAqXG4gICAgICAgIHV0aWwuc2l6ZUZyb21TaGFwZSh0ZW5zb3JEYXRhLnNoYXBlKTtcbiAgICBsZXQgYnVmZmVyO1xuICAgIGNvbnN0IHVzYWdlID0gR1BVQnVmZmVyVXNhZ2UuU1RPUkFHRSB8IEdQVUJ1ZmZlclVzYWdlLkNPUFlfU1JDIHxcbiAgICAgICAgR1BVQnVmZmVyVXNhZ2UuQ09QWV9EU1Q7XG4gICAgaWYgKHRlbnNvckRhdGEudmFsdWVzKSB7XG4gICAgICBidWZmZXIgPSB0aGlzLmJ1ZmZlck1hbmFnZXIuYWNxdWlyZUJ1ZmZlcihzaXplLCB1c2FnZSwgdHJ1ZSk7XG4gICAgICBpZiAoYnVmZmVyLm1hcFN0YXRlID09PSAndW5tYXBwZWQnKSB7XG4gICAgICAgIGNvbnN0IHN0YWdpbmdCdWZmZXIgPSB0aGlzLmJ1ZmZlck1hbmFnZXIuYWNxdWlyZUJ1ZmZlcihcbiAgICAgICAgICAgIHNpemUsIEdQVUJ1ZmZlclVzYWdlLk1BUF9XUklURSB8IEdQVUJ1ZmZlclVzYWdlLkNPUFlfU1JDLCB0cnVlLFxuICAgICAgICAgICAgZmFsc2UpO1xuICAgICAgICBjb25zdCBhcnJheUJ1ZmZlciA9IHN0YWdpbmdCdWZmZXIuZ2V0TWFwcGVkUmFuZ2UoKTtcbiAgICAgICAgaWYgKHRlbnNvckRhdGEuZHR5cGUgPT09ICdpbnQzMicgfHwgdGVuc29yRGF0YS5kdHlwZSA9PT0gJ2Jvb2wnKSB7XG4gICAgICAgICAgbmV3IEludDMyQXJyYXkoYXJyYXlCdWZmZXIpLnNldCh0ZW5zb3JEYXRhLnZhbHVlcyBhcyBUeXBlZEFycmF5KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZXcgRmxvYXQzMkFycmF5KGFycmF5QnVmZmVyKS5zZXQodGVuc29yRGF0YS52YWx1ZXMgYXMgRmxvYXQzMkFycmF5KTtcbiAgICAgICAgfVxuICAgICAgICBzdGFnaW5nQnVmZmVyLnVubWFwKCk7XG4gICAgICAgIHRoaXMuZW5zdXJlQ29tbWFuZEVuY29kZXJSZWFkeSgpO1xuICAgICAgICB0aGlzLmVuZENvbXB1dGVQYXNzRW5jb2RlcigpO1xuICAgICAgICB0aGlzLmNvbW1hbmRFbmNvZGVyLmNvcHlCdWZmZXJUb0J1ZmZlcihcbiAgICAgICAgICAgIHN0YWdpbmdCdWZmZXIsIDAsIGJ1ZmZlciwgMCwgc2l6ZSk7XG5cbiAgICAgICAgdGhpcy5zdGFnaW5nUGVuZGluZ0Rpc3Bvc2FsLnB1c2goc3RhZ2luZ0J1ZmZlcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBhcnJheUJ1ZmZlciA9IGJ1ZmZlci5nZXRNYXBwZWRSYW5nZSgpO1xuICAgICAgICBpZiAodGVuc29yRGF0YS5kdHlwZSA9PT0gJ2ludDMyJyB8fCB0ZW5zb3JEYXRhLmR0eXBlID09PSAnYm9vbCcpIHtcbiAgICAgICAgICBuZXcgSW50MzJBcnJheShhcnJheUJ1ZmZlcikuc2V0KHRlbnNvckRhdGEudmFsdWVzIGFzIFR5cGVkQXJyYXkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5ldyBGbG9hdDMyQXJyYXkoYXJyYXlCdWZmZXIpLnNldCh0ZW5zb3JEYXRhLnZhbHVlcyBhcyBGbG9hdDMyQXJyYXkpO1xuICAgICAgICB9XG4gICAgICAgIGJ1ZmZlci51bm1hcCgpO1xuICAgICAgfVxuXG4gICAgICAvLyBPbmNlIHVwbG9hZGVkLCBkb24ndCBzdG9yZSB0aGUgdmFsdWVzIG9uIGNwdS5cbiAgICAgIHRlbnNvckRhdGEudmFsdWVzID0gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgYnVmZmVyID0gdGhpcy5idWZmZXJNYW5hZ2VyLmFjcXVpcmVCdWZmZXIoc2l6ZSwgdXNhZ2UpO1xuICAgIH1cbiAgICB0ZW5zb3JEYXRhLnJlc291cmNlID0gYnVmZmVyO1xuICB9XG5cbiAgcHJpdmF0ZSBtYWtlVW5pZm9ybXMocHJvZ3JhbVVuaWZvcm06IFByb2dyYW1Vbmlmb3JtKTogR1BVQmluZGluZ1Jlc291cmNlIHtcbiAgICBsZXQgY3VycmVudE9mZnNldCA9IDA7XG4gICAgbGV0IHByZUxlbmd0aCA9IDA7XG4gICAgY29uc3Qgb2Zmc2V0czogbnVtYmVyW10gPSBbXTtcbiAgICBsZXQgbWF4QWxpZ25tZW50T2ZGaWVsZCA9IDE7XG4gICAgcHJvZ3JhbVVuaWZvcm0uZm9yRWFjaCgoZCkgPT4ge1xuICAgICAgaWYgKGQuZGF0YS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgZC5kYXRhID0gWzFdO1xuICAgICAgfVxuICAgICAgLy8gaHR0cHM6Ly93d3cudzMub3JnL1RSL1dHU0wvI2FsaWdub2ZcbiAgICAgIGxldCBiYXNlQWxpZ25tZW50OiBudW1iZXI7XG4gICAgICBzd2l0Y2ggKGQuZGF0YS5sZW5ndGgpIHtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgIGJhc2VBbGlnbm1lbnQgPSA0O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgYmFzZUFsaWdubWVudCA9IDg7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICBiYXNlQWxpZ25tZW50ID0gMTY7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgNDpcbiAgICAgICAgICBiYXNlQWxpZ25tZW50ID0gMTY7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgNTpcbiAgICAgICAgICBiYXNlQWxpZ25tZW50ID0gMTY7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgNjpcbiAgICAgICAgICBiYXNlQWxpZ25tZW50ID0gMTY7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgdXRpbC5hc3NlcnQoZmFsc2UsICgpID0+IGBVbnN1cHBvcnRlZCAke2QuZGF0YS5sZW5ndGh9RCBzaGFwZWApO1xuICAgICAgfVxuXG4gICAgICBpZiAocHJlTGVuZ3RoID09PSA1IHx8IHByZUxlbmd0aCA9PT0gNikge1xuICAgICAgICBiYXNlQWxpZ25tZW50ID0gMTY7XG4gICAgICB9XG4gICAgICBpZiAoYmFzZUFsaWdubWVudCA+IG1heEFsaWdubWVudE9mRmllbGQpIHtcbiAgICAgICAgbWF4QWxpZ25tZW50T2ZGaWVsZCA9IGJhc2VBbGlnbm1lbnQ7XG4gICAgICB9XG4gICAgICBjdXJyZW50T2Zmc2V0ID0gTWF0aC5jZWlsKGN1cnJlbnRPZmZzZXQgLyBiYXNlQWxpZ25tZW50KSAqIGJhc2VBbGlnbm1lbnQ7XG4gICAgICBwcmVMZW5ndGggPSBkLmRhdGEubGVuZ3RoO1xuICAgICAgb2Zmc2V0cy5wdXNoKGN1cnJlbnRPZmZzZXQpO1xuICAgICAgY3VycmVudE9mZnNldCArPSBkLmRhdGEubGVuZ3RoICogNDtcbiAgICB9KTtcblxuICAgIGN1cnJlbnRPZmZzZXQgPVxuICAgICAgICBNYXRoLmNlaWwoY3VycmVudE9mZnNldCAvIG1heEFsaWdubWVudE9mRmllbGQpICogbWF4QWxpZ25tZW50T2ZGaWVsZDtcbiAgICBjb25zdCBhcnJheUJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcihjdXJyZW50T2Zmc2V0KTtcbiAgICBwcm9ncmFtVW5pZm9ybS5mb3JFYWNoKChkLCBpKSA9PiB7XG4gICAgICBjb25zdCBvZmZzZXQgPSBvZmZzZXRzW2ldO1xuICAgICAgaWYgKGQudHlwZSA9PT0gJ2ludDMyJykge1xuICAgICAgICBuZXcgSW50MzJBcnJheShhcnJheUJ1ZmZlciwgb2Zmc2V0LCBkLmRhdGEubGVuZ3RoKS5zZXQoZC5kYXRhKTtcbiAgICAgIH0gZWxzZSBpZiAoZC50eXBlID09PSAndWludDMyJykge1xuICAgICAgICBuZXcgVWludDMyQXJyYXkoYXJyYXlCdWZmZXIsIG9mZnNldCwgZC5kYXRhLmxlbmd0aCkuc2V0KGQuZGF0YSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXcgRmxvYXQzMkFycmF5KGFycmF5QnVmZmVyLCBvZmZzZXQsIGQuZGF0YS5sZW5ndGgpLnNldChkLmRhdGEpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgY29uc3QgdW5pZm9ybUJ1ZmZlciA9IHRoaXMuYnVmZmVyTWFuYWdlci5hY3F1aXJlQnVmZmVyKFxuICAgICAgICBjdXJyZW50T2Zmc2V0LCBHUFVCdWZmZXJVc2FnZS5DT1BZX0RTVCB8IEdQVUJ1ZmZlclVzYWdlLlVOSUZPUk0pO1xuICAgIHRoaXMucXVldWUud3JpdGVCdWZmZXIodW5pZm9ybUJ1ZmZlciwgMCwgYXJyYXlCdWZmZXIsIDAsIGN1cnJlbnRPZmZzZXQpO1xuICAgIHRoaXMudW5pZm9ybVBlbmRpbmdEaXNwb3NhbC5wdXNoKHVuaWZvcm1CdWZmZXIpO1xuXG4gICAgcmV0dXJuIHtvZmZzZXQ6IDAsIHNpemU6IGN1cnJlbnRPZmZzZXQsIGJ1ZmZlcjogdW5pZm9ybUJ1ZmZlcn07XG4gIH1cblxuICBwdWJsaWMgcnVuV2ViR1BVUHJvZ3JhbShcbiAgICAgIHByb2dyYW06IHdlYmdwdV9wcm9ncmFtLldlYkdQVVByb2dyYW0sIGlucHV0czogVGVuc29ySW5mb1tdLFxuICAgICAgb3V0cHV0RHR5cGU6IERhdGFUeXBlLCBwcm9ncmFtRGVmaW5lZFVuaWZvcm0/OiBQcm9ncmFtVW5pZm9ybSxcbiAgICAgIG91dHB1dD86IFRlbnNvckluZm8pOiBUZW5zb3JJbmZvIHtcbiAgICBpZiAoIW91dHB1dCkge1xuICAgICAgb3V0cHV0ID0gdGhpcy5tYWtlVGVuc29ySW5mbyhwcm9ncmFtLm91dHB1dFNoYXBlLCBvdXRwdXREdHlwZSk7XG4gICAgfVxuICAgIGlmICh1dGlsLnNpemVGcm9tU2hhcGUob3V0cHV0LnNoYXBlKSA9PT0gMCkge1xuICAgICAgLy8gU2hvcnQtY2lyY3VpdCB0aGUgY29tcHV0YXRpb24gc2luY2UgdGhlIHJlc3VsdCBpcyBlbXB0eSAoaGFzIDAgaW4gaXRzXG4gICAgICAvLyBzaGFwZSkuXG4gICAgICB0aGlzLnRlbnNvck1hcC5nZXQob3V0cHV0LmRhdGFJZCkudmFsdWVzID1cbiAgICAgICAgICB1dGlsLmdldFR5cGVkQXJyYXlGcm9tRFR5cGUob3V0cHV0LmR0eXBlIGFzICdmbG9hdDMyJywgMCk7XG4gICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH1cbiAgICB0aGlzLnVwbG9hZFRvR1BVKG91dHB1dC5kYXRhSWQpO1xuICAgIHByb2dyYW0uZGlzcGF0Y2ggPSByZXNoYXBlRGlzcGF0Y2godGhpcy5kZXZpY2UsIHByb2dyYW0pO1xuXG4gICAgY29uc3QgaW5wdXRzRGF0YSA9IGlucHV0cy5tYXAoKGlucHV0OiBUZW5zb3JJbmZvLCBpOiBudW1iZXIpID0+IHtcbiAgICAgIGlmIChpbnB1dC5kdHlwZSA9PT0gJ2NvbXBsZXg2NCcpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgYEdQR1BVUHJvZ3JhbSBkb2VzIG5vdCBzdXBwb3J0IGNvbXBsZXg2NCBpbnB1dC4gRm9yIGNvbXBsZXg2NCBgICtcbiAgICAgICAgICAgIGBkdHlwZXMsIHBsZWFzZSBzZXBhcmF0ZSB0aGUgcHJvZ3JhbSBpbnRvIHJlYWwgYW5kIGltYWdpbmFyeSBgICtcbiAgICAgICAgICAgIGBwYXJ0cy5gKTtcbiAgICAgIH1cbiAgICAgIHRoaXMudXBsb2FkVG9HUFUoaW5wdXQuZGF0YUlkKTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLy8gUmV0dXJuaW5nIGR0eXBlIGZyb20gdGVuc29yTWFwIGJlY2F1c2UgaXQgcmVmbGVjdHMgZHR5cGVcbiAgICAgICAgLy8gb2YgdW5kZXJseWluZyBidWZmZXIsIHJhdGhlciB0aGFuIGFic3RyYWN0IGR0eXBlLlxuICAgICAgICBkdHlwZTogdGhpcy50ZW5zb3JNYXAuZ2V0KGlucHV0LmRhdGFJZCkuZHR5cGUsXG4gICAgICAgIHNoYXBlOiBpbnB1dC5zaGFwZSxcbiAgICAgICAgbmFtZTogcHJvZ3JhbS52YXJpYWJsZU5hbWVzW2ldXG4gICAgICB9O1xuICAgIH0pO1xuXG4gICAgcHJvZ3JhbS5zaGFkZXJLZXkgPVxuICAgICAgICB3ZWJncHVfcHJvZ3JhbS5tYWtlU2hhZGVyS2V5KHByb2dyYW0sIGlucHV0c0RhdGEsIG91dHB1dCk7XG5cbiAgICBjb25zdCBwYXJhbGxlbENvbXBpbGF0aW9uID0gZW52KCkuZ2V0Qm9vbCgnV0VCR1BVX0VOR0lORV9DT01QSUxFX09OTFknKTtcbiAgICBpZiAoIShwcm9ncmFtLnNoYWRlcktleSBpbiB0aGlzLnBpcGVsaW5lQ2FjaGUpKSB7XG4gICAgICB0aGlzLnBpcGVsaW5lQ2FjaGVbcHJvZ3JhbS5zaGFkZXJLZXldID0gd2ViZ3B1X3Byb2dyYW0uY29tcGlsZVByb2dyYW0oXG4gICAgICAgICAgdGhpcy5kZXZpY2UsIHByb2dyYW0sIGlucHV0c0RhdGEsIG91dHB1dCwgcGFyYWxsZWxDb21waWxhdGlvbik7XG4gICAgfVxuICAgIHByb2dyYW0ucGlwZWxpbmUgPSB0aGlzLnBpcGVsaW5lQ2FjaGVbcHJvZ3JhbS5zaGFkZXJLZXldO1xuXG4gICAgaWYgKCFwYXJhbGxlbENvbXBpbGF0aW9uKSB7XG4gICAgICB0aGlzLnJlY29yZEFuZFN1Ym1pdChwcm9ncmFtLCBvdXRwdXQsIGlucHV0cywgcHJvZ3JhbURlZmluZWRVbmlmb3JtKTtcbiAgICB9XG4gICAgcmV0dXJuIG91dHB1dDtcbiAgfVxuXG4gIHByaXZhdGUgcmVjb3JkQW5kU3VibWl0KFxuICAgICAgcHJvZ3JhbTogd2ViZ3B1X3Byb2dyYW0uV2ViR1BVUHJvZ3JhbSwgb3V0cHV0OiBUZW5zb3JJbmZvLFxuICAgICAgaW5wdXRzOiBUZW5zb3JJbmZvW10sIHByb2dyYW1EZWZpbmVkVW5pZm9ybT86IFByb2dyYW1Vbmlmb3JtKSB7XG4gICAgaWYgKHByb2dyYW0ucGlwZWxpbmUgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgJ1BsZWFzZSBjYWxsIGNoZWNrQ29tcGlsZUNvbXBsZXRpb25Bc3luYyB0byBlbnN1cmUgcGFyYWxsZWwgY29tcGlsYXRpb24gaXMgZG9uZSEnKTtcbiAgICB9XG4gICAgLy8gVGhlcmUgYXJlIHNpeCBraW5kcyBvZiB1bmlmb3JtczogTkFOLCBJTkZJTklUWSwgc2hhcGVzLCBzaGFwZSBzdHJpZGVzLFxuICAgIC8vIHByb2dyYW0gc2l6ZSwgcHJvZ3JhbSBkZWZpbmVkIHVuaWZvcm1zLlxuICAgIGxldCBwcm9ncmFtVW5pZm9ybTogUHJvZ3JhbVVuaWZvcm0gPSBbXTtcbiAgICBsZXQgYnVmZmVyU2hhcGVzOiBudW1iZXJbXVtdID0gW107XG4gICAgY29uc3QgdW5pZm9ybXNUeXBlID0gJ2ludDMyJztcbiAgICBpZiAocHJvZ3JhbS5waXhlbHNPcFR5cGUgPT0gbnVsbCkge1xuICAgICAgcHJvZ3JhbVVuaWZvcm0ucHVzaChcbiAgICAgICAgICB7dHlwZTogJ2Zsb2F0MzInLCBkYXRhOiBbTmFOXX0sIHt0eXBlOiAnZmxvYXQzMicsIGRhdGE6IFtJbmZpbml0eV19KTtcbiAgICAgIGJ1ZmZlclNoYXBlcyA9IGlucHV0cy5jb25jYXQob3V0cHV0KS5tYXAoZCA9PiBkLnNoYXBlKTtcbiAgICAgIGNvbnN0IHVuaWZvcm1zVHlwZSA9ICdpbnQzMic7XG4gICAgICBidWZmZXJTaGFwZXMubWFwKGQgPT4ge1xuICAgICAgICBwcm9ncmFtVW5pZm9ybS5wdXNoKHt0eXBlOiB1bmlmb3Jtc1R5cGUsIGRhdGE6IGR9KTtcbiAgICAgICAgY29uc3Qgc3RyaWRlcyA9IHV0aWwuY29tcHV0ZVN0cmlkZXMoZCk7XG4gICAgICAgIHByb2dyYW1Vbmlmb3JtLnB1c2goe3R5cGU6IHVuaWZvcm1zVHlwZSwgZGF0YTogc3RyaWRlc30pO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHN0cmlkZXMgPSB1dGlsLmNvbXB1dGVTdHJpZGVzKG91dHB1dC5zaGFwZSk7XG4gICAgICBwcm9ncmFtVW5pZm9ybS5wdXNoKHt0eXBlOiB1bmlmb3Jtc1R5cGUsIGRhdGE6IHN0cmlkZXN9KTtcbiAgICB9XG4gICAgaWYgKHByb2dyYW0uc2l6ZSkge1xuICAgICAgY29uc3Qgc2l6ZSA9IHV0aWwuc2l6ZUZyb21TaGFwZShwcm9ncmFtLm91dHB1dFNoYXBlKTtcbiAgICAgIHByb2dyYW1Vbmlmb3JtLnB1c2goe1xuICAgICAgICB0eXBlOiB1bmlmb3Jtc1R5cGUsXG4gICAgICAgIGRhdGE6IFtwcm9ncmFtLm91dHB1dENvbXBvbmVudCA/IHNpemUgLyBwcm9ncmFtLm91dHB1dENvbXBvbmVudCA6IHNpemVdXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAocHJvZ3JhbURlZmluZWRVbmlmb3JtKSB7XG4gICAgICBwcm9ncmFtVW5pZm9ybSA9IFsuLi5wcm9ncmFtVW5pZm9ybSwgLi4ucHJvZ3JhbURlZmluZWRVbmlmb3JtXTtcbiAgICB9XG4gICAgY29uc3QgYmluZGluZ3MgPSBbXG4gICAgICB0aGlzLnRlbnNvclRvQmluZGluZyhvdXRwdXQpLCAuLi5pbnB1dHMubWFwKHQgPT4gdGhpcy50ZW5zb3JUb0JpbmRpbmcodCkpLFxuICAgICAgdGhpcy5tYWtlVW5pZm9ybXMocHJvZ3JhbVVuaWZvcm0pXG4gICAgXTtcblxuICAgIGlucHV0cy5mb3JFYWNoKGlucHV0ID0+IHtcbiAgICAgIHRoaXMuY29tbWFuZFF1ZXVlT3duZWRJZHMuYWRkKGlucHV0LmRhdGFJZCk7XG4gICAgfSk7XG4gICAgdGhpcy5jb21tYW5kUXVldWVPd25lZElkcy5hZGQob3V0cHV0LmRhdGFJZCk7XG5cbiAgICBjb25zdCBiaW5kR3JvdXAgPSB0aGlzLmRldmljZS5jcmVhdGVCaW5kR3JvdXAoe1xuICAgICAgbGF5b3V0OiBwcm9ncmFtLnBpcGVsaW5lLmdldEJpbmRHcm91cExheW91dCgwKSxcbiAgICAgIGVudHJpZXM6IGJpbmRpbmdzLm1hcCgoYiwgaSkgPT4gKHtiaW5kaW5nOiBpLCByZXNvdXJjZTogYn0pKSxcbiAgICB9KTtcblxuICAgIGNvbnN0IHNob3VsZFRpbWVQcm9ncmFtID0gdGhpcy5hY3RpdmVUaW1lcnMgIT0gbnVsbDtcbiAgICB0aGlzLmVuc3VyZUNvbW1hbmRFbmNvZGVyUmVhZHkoKTtcblxuICAgIGNvbnN0IGNvbXB1dGVQYXNzRGVzY3JpcHRvcjogR1BVQ29tcHV0ZVBhc3NEZXNjcmlwdG9yID0ge307XG4gICAgaWYgKHNob3VsZFRpbWVQcm9ncmFtICYmIHRoaXMuc3VwcG9ydFRpbWVzdGFtcFF1ZXJ5KSB7XG4gICAgICB0aGlzLmVuZENvbXB1dGVQYXNzRW5jb2RlcigpO1xuICAgICAgaWYgKHRoaXMucXVlcnlTZXQgPT0gbnVsbCkge1xuICAgICAgICB0aGlzLnF1ZXJ5U2V0ID0gdGhpcy5kZXZpY2UuY3JlYXRlUXVlcnlTZXQoe1xuICAgICAgICAgIHR5cGU6ICd0aW1lc3RhbXAnLFxuICAgICAgICAgIGNvdW50OiB0aGlzLnF1ZXJ5U2V0Q291bnQsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29tcHV0ZVBhc3NEZXNjcmlwdG9yLnRpbWVzdGFtcFdyaXRlcyA9IHtcbiAgICAgICAgcXVlcnlTZXQ6IHRoaXMucXVlcnlTZXQsXG4gICAgICAgIGJlZ2lubmluZ09mUGFzc1dyaXRlSW5kZXg6IDAsXG4gICAgICAgIGVuZE9mUGFzc1dyaXRlSW5kZXg6IDEsXG4gICAgICB9O1xuICAgICAgdGhpcy5jb21wdXRlUGFzc0VuY29kZXIgPVxuICAgICAgICAgIHRoaXMuY29tbWFuZEVuY29kZXIuYmVnaW5Db21wdXRlUGFzcyhjb21wdXRlUGFzc0Rlc2NyaXB0b3IpO1xuICAgIH0gZWxzZSBpZiAoIXRoaXMuY29tcHV0ZVBhc3NFbmNvZGVyKSB7XG4gICAgICB0aGlzLmNvbXB1dGVQYXNzRW5jb2RlciA9XG4gICAgICAgICAgdGhpcy5jb21tYW5kRW5jb2Rlci5iZWdpbkNvbXB1dGVQYXNzKGNvbXB1dGVQYXNzRGVzY3JpcHRvcik7XG4gICAgfVxuXG4gICAgdGhpcy5jb21wdXRlUGFzc0VuY29kZXIuc2V0UGlwZWxpbmUocHJvZ3JhbS5waXBlbGluZSk7XG4gICAgdGhpcy5jb21wdXRlUGFzc0VuY29kZXIuc2V0QmluZEdyb3VwKDAsIGJpbmRHcm91cCk7XG4gICAgdGhpcy5jb21wdXRlUGFzc0VuY29kZXIuZGlzcGF0Y2hXb3JrZ3JvdXBzKFxuICAgICAgICBwcm9ncmFtLmRpc3BhdGNoWzBdLCBwcm9ncmFtLmRpc3BhdGNoWzFdLCBwcm9ncmFtLmRpc3BhdGNoWzJdKTtcbiAgICB0aGlzLmRpc3BhdGNoQ291bnRJblBhc3MrKztcblxuICAgIGlmIChzaG91bGRUaW1lUHJvZ3JhbSB8fFxuICAgICAgICBlbnYoKS5nZXQoJ1dFQkdQVV9ERUZFUlJFRF9TVUJNSVRfQkFUQ0hfU0laRScpIGFzXG4gICAgICAgICAgICBudW1iZXIgPD0gdGhpcy5kaXNwYXRjaENvdW50SW5QYXNzIHx8XG4gICAgICAgIHByb2dyYW0ucGl4ZWxzT3BUeXBlID09PSB3ZWJncHVfcHJvZ3JhbS5QaXhlbHNPcFR5cGUuRFJBVykge1xuICAgICAgdGhpcy5lbmRDb21wdXRlUGFzc0VuY29kZXIoKTtcbiAgICAgIGlmIChzaG91bGRUaW1lUHJvZ3JhbSkge1xuICAgICAgICB0aGlzLmFjdGl2ZVRpbWVycy5wdXNoKFxuICAgICAgICAgICAge25hbWU6IHByb2dyYW0uY29uc3RydWN0b3IubmFtZSwgcXVlcnk6IHRoaXMuZ2V0UXVlcnlUaW1lKCl9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc3VibWl0UXVldWUoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyBnZXRRdWVyeVRpbWUoKTogUHJvbWlzZTxudW1iZXI+IHtcbiAgICBpZiAoIXRoaXMuc3VwcG9ydFRpbWVzdGFtcFF1ZXJ5KSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5xdWVyeVJlc29sdmVCdWZmZXIgPT0gbnVsbCkge1xuICAgICAgdGhpcy5xdWVyeVJlc29sdmVCdWZmZXIgPSB0aGlzLmJ1ZmZlck1hbmFnZXIuYWNxdWlyZUJ1ZmZlcihcbiAgICAgICAgICB0aGlzLnF1ZXJ5U2V0Q291bnQgKiA4LFxuICAgICAgICAgIEdQVUJ1ZmZlclVzYWdlLkNPUFlfU1JDIHwgR1BVQnVmZmVyVXNhZ2UuQ09QWV9EU1QgfFxuICAgICAgICAgICAgICBHUFVCdWZmZXJVc2FnZS5RVUVSWV9SRVNPTFZFKTtcbiAgICB9XG4gICAgdGhpcy5jb21tYW5kRW5jb2Rlci5yZXNvbHZlUXVlcnlTZXQoXG4gICAgICAgIHRoaXMucXVlcnlTZXQsIDAsIHRoaXMucXVlcnlTZXRDb3VudCwgdGhpcy5xdWVyeVJlc29sdmVCdWZmZXIsIDApO1xuXG4gICAgY29uc3QgcXVlcnlTdGFnaW5nQnVmZmVyID0gdGhpcy5idWZmZXJNYW5hZ2VyLmFjcXVpcmVCdWZmZXIoXG4gICAgICAgIHRoaXMucXVlcnlTZXRDb3VudCAqIDgsXG4gICAgICAgIEdQVUJ1ZmZlclVzYWdlLk1BUF9SRUFEIHwgR1BVQnVmZmVyVXNhZ2UuQ09QWV9EU1QpO1xuXG4gICAgdGhpcy5jb21tYW5kRW5jb2Rlci5jb3B5QnVmZmVyVG9CdWZmZXIoXG4gICAgICAgIHRoaXMucXVlcnlSZXNvbHZlQnVmZmVyLCAwLCBxdWVyeVN0YWdpbmdCdWZmZXIsIDAsXG4gICAgICAgIHRoaXMucXVlcnlTZXRDb3VudCAqIDgpO1xuXG4gICAgdGhpcy5zdWJtaXRRdWV1ZSgpO1xuXG4gICAgYXdhaXQgcXVlcnlTdGFnaW5nQnVmZmVyLm1hcEFzeW5jKEdQVU1hcE1vZGUuUkVBRCk7XG4gICAgY29uc3QgYXJyYXlCdWZmZXIgPSBuZXcgQmlnVWludDY0QXJyYXkocXVlcnlTdGFnaW5nQnVmZmVyLmdldE1hcHBlZFJhbmdlKCkpO1xuICAgIGNvbnN0IHRpbWUgPSBOdW1iZXIoYXJyYXlCdWZmZXJbMV0gLSBhcnJheUJ1ZmZlclswXSkgLyAxMDAwMDAwO1xuICAgIHF1ZXJ5U3RhZ2luZ0J1ZmZlci51bm1hcCgpO1xuICAgIHRoaXMuYnVmZmVyTWFuYWdlci5yZWxlYXNlQnVmZmVyKHF1ZXJ5U3RhZ2luZ0J1ZmZlcik7XG4gICAgcmV0dXJuIHRpbWU7XG4gIH1cblxuICBzaG91bGRFeGVjdXRlT25DUFUoXG4gICAgICBpbnB1dHM6IFRlbnNvckluZm9bXSxcbiAgICAgIHNpemVUaHJlc2hvbGQgPSBDUFVfSEFORE9GRl9TSVpFX1RIUkVTSE9MRCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBlbnYoKS5nZXRCb29sKCdXRUJHUFVfQ1BVX0ZPUldBUkQnKSAmJlxuICAgICAgICBpbnB1dHMuZXZlcnkoXG4gICAgICAgICAgICBpbnB1dCA9PiB0aGlzLnRlbnNvck1hcC5nZXQoaW5wdXQuZGF0YUlkKS5yZXNvdXJjZSA9PSBudWxsICYmXG4gICAgICAgICAgICAgICAgdXRpbC5zaXplRnJvbVNoYXBlKGlucHV0LnNoYXBlKSA8IHNpemVUaHJlc2hvbGQpO1xuICB9XG5cbiAgb3ZlcnJpZGUgbnVtRGF0YUlkcygpIHtcbiAgICByZXR1cm4gdGhpcy50ZW5zb3JNYXAubnVtRGF0YUlkcygpIC0gdGhpcy50ZW5zb3JEYXRhUGVuZGluZ0Rpc3Bvc2FsLmxlbmd0aDtcbiAgfVxuXG4gIG92ZXJyaWRlIGRpc3Bvc2UoKSB7XG4gICAgaWYgKHRoaXMuZGlzcG9zZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMucXVlcnlTZXQgIT0gbnVsbCkge1xuICAgICAgdGhpcy5xdWVyeVNldC5kZXN0cm95KCk7XG4gICAgfVxuICAgIHRoaXMuYnVmZmVyTWFuYWdlci5kaXNwb3NlKCk7XG4gICAgdGhpcy50ZXh0dXJlTWFuYWdlci5kaXNwb3NlKCk7XG4gICAgdGhpcy5kaXNwb3NlZCA9IHRydWU7XG4gIH1cbn1cbiJdfQ==","/**\n * @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport * as webgpu_util from './webgpu_util';\nexport { WebGPUBackend } from './backend_webgpu';\nexport { webgpu_util };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2ViZ3B1LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMvd2ViZ3B1LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sS0FBSyxXQUFXLE1BQU0sZUFBZSxDQUFDO0FBQzdDLE9BQU8sRUFBQyxhQUFhLEVBQUMsTUFBTSxrQkFBa0IsQ0FBQztBQUUvQyxPQUFPLEVBQUMsV0FBVyxFQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCAqIGFzIHdlYmdwdV91dGlsIGZyb20gJy4vd2ViZ3B1X3V0aWwnO1xuZXhwb3J0IHtXZWJHUFVCYWNrZW5kfSBmcm9tICcuL2JhY2tlbmRfd2ViZ3B1JztcbmV4cG9ydCB0eXBlIHtXZWJHUFVQcm9ncmFtfSBmcm9tICcuL3dlYmdwdV9wcm9ncmFtJztcbmV4cG9ydCB7d2ViZ3B1X3V0aWx9O1xuIl19","/**\n * @license\n * Copyright 2022 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport './flags_webgpu';\nimport { env, registerBackend } from '@tensorflow/tfjs-core';\nimport { WebGPUBackend } from './backend_webgpu';\nimport { isWebGPUSupported } from './webgpu_util';\nif (isWebGPUSupported()) {\n    registerBackend('webgpu', async () => {\n        const gpuDescriptor = {\n            powerPreference: env().get('WEBGPU_USE_LOW_POWER_GPU') ?\n                'low-power' :\n                'high-performance'\n        };\n        const adapter = await navigator.gpu.requestAdapter(gpuDescriptor);\n        const deviceDescriptor = {};\n        const requiredFeatures = [];\n        if (adapter.features.has('timestamp-query')) {\n            requiredFeatures.push('timestamp-query');\n        }\n        if (adapter.features.has('bgra8unorm-storage')) {\n            requiredFeatures.push(['bgra8unorm-storage']);\n        }\n        deviceDescriptor.requiredFeatures =\n            requiredFeatures;\n        const adapterLimits = adapter.limits;\n        deviceDescriptor.requiredLimits = {\n            'maxComputeWorkgroupStorageSize': adapterLimits.maxComputeWorkgroupStorageSize,\n            'maxComputeWorkgroupsPerDimension': adapterLimits.maxComputeWorkgroupsPerDimension,\n            'maxStorageBufferBindingSize': adapterLimits.maxStorageBufferBindingSize,\n            'maxBufferSize': adapterLimits.maxBufferSize,\n            'maxComputeWorkgroupSizeX': adapterLimits.maxComputeWorkgroupSizeX,\n            'maxComputeInvocationsPerWorkgroup': adapterLimits.maxComputeInvocationsPerWorkgroup,\n        };\n        const device = await adapter.requestDevice(deviceDescriptor);\n        const adapterInfo = await adapter.requestAdapterInfo();\n        return new WebGPUBackend(device, adapterInfo);\n    }, 3 /*priority*/);\n}\n// Export webgpu utilities\nexport * from './webgpu';\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmFzZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2Jhc2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxnQkFBZ0IsQ0FBQztBQUV4QixPQUFPLEVBQUMsR0FBRyxFQUFFLGVBQWUsRUFBQyxNQUFNLHVCQUF1QixDQUFDO0FBRTNELE9BQU8sRUFBQyxhQUFhLEVBQUMsTUFBTSxrQkFBa0IsQ0FBQztBQUMvQyxPQUFPLEVBQUMsaUJBQWlCLEVBQUMsTUFBTSxlQUFlLENBQUM7QUFFaEQsSUFBSSxpQkFBaUIsRUFBRSxFQUFFO0lBQ3ZCLGVBQWUsQ0FBQyxRQUFRLEVBQUUsS0FBSyxJQUFJLEVBQUU7UUFDbkMsTUFBTSxhQUFhLEdBQTZCO1lBQzlDLGVBQWUsRUFBRSxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUMsMEJBQTBCLENBQUMsQ0FBQyxDQUFDO2dCQUNwRCxXQUFXLENBQUMsQ0FBQztnQkFDYixrQkFBa0I7U0FDdkIsQ0FBQztRQUVGLE1BQU0sT0FBTyxHQUFHLE1BQU0sU0FBUyxDQUFDLEdBQUcsQ0FBQyxjQUFjLENBQUMsYUFBYSxDQUFDLENBQUM7UUFDbEUsTUFBTSxnQkFBZ0IsR0FBd0IsRUFBRSxDQUFDO1FBRWpELE1BQU0sZ0JBQWdCLEdBQUcsRUFBRSxDQUFDO1FBQzVCLElBQUksT0FBTyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsaUJBQWlCLENBQUMsRUFBRTtZQUMzQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsQ0FBQztTQUMxQztRQUNELElBQUksT0FBTyxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsb0JBQW9CLENBQUMsRUFBRTtZQUM5QyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLENBQUM7U0FDL0M7UUFDRCxnQkFBZ0IsQ0FBQyxnQkFBZ0I7WUFDN0IsZ0JBQTRDLENBQUM7UUFFakQsTUFBTSxhQUFhLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQztRQUNyQyxnQkFBZ0IsQ0FBQyxjQUFjLEdBQUc7WUFDaEMsZ0NBQWdDLEVBQzVCLGFBQWEsQ0FBQyw4QkFBOEI7WUFDaEQsa0NBQWtDLEVBQzlCLGFBQWEsQ0FBQyxnQ0FBZ0M7WUFDbEQsNkJBQTZCLEVBQUUsYUFBYSxDQUFDLDJCQUEyQjtZQUN4RSxlQUFlLEVBQUUsYUFBYSxDQUFDLGFBQWE7WUFDNUMsMEJBQTBCLEVBQUUsYUFBYSxDQUFDLHdCQUF3QjtZQUNsRSxtQ0FBbUMsRUFDL0IsYUFBYSxDQUFDLGlDQUFpQztTQUNwRCxDQUFDO1FBRUYsTUFBTSxNQUFNLEdBQWMsTUFBTSxPQUFPLENBQUMsYUFBYSxDQUFDLGdCQUFnQixDQUFDLENBQUM7UUFDeEUsTUFBTSxXQUFXLEdBQUcsTUFBTSxPQUFPLENBQUMsa0JBQWtCLEVBQUUsQ0FBQztRQUN2RCxPQUFPLElBQUksYUFBYSxDQUFDLE1BQU0sRUFBRSxXQUFXLENBQUMsQ0FBQztJQUNoRCxDQUFDLEVBQUUsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDO0NBQ3BCO0FBRUQsMEJBQTBCO0FBQzFCLGNBQWMsVUFBVSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQgJy4vZmxhZ3Nfd2ViZ3B1JztcblxuaW1wb3J0IHtlbnYsIHJlZ2lzdGVyQmFja2VuZH0gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcblxuaW1wb3J0IHtXZWJHUFVCYWNrZW5kfSBmcm9tICcuL2JhY2tlbmRfd2ViZ3B1JztcbmltcG9ydCB7aXNXZWJHUFVTdXBwb3J0ZWR9IGZyb20gJy4vd2ViZ3B1X3V0aWwnO1xuXG5pZiAoaXNXZWJHUFVTdXBwb3J0ZWQoKSkge1xuICByZWdpc3RlckJhY2tlbmQoJ3dlYmdwdScsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBncHVEZXNjcmlwdG9yOiBHUFVSZXF1ZXN0QWRhcHRlck9wdGlvbnMgPSB7XG4gICAgICBwb3dlclByZWZlcmVuY2U6IGVudigpLmdldCgnV0VCR1BVX1VTRV9MT1dfUE9XRVJfR1BVJykgP1xuICAgICAgICAgICdsb3ctcG93ZXInIDpcbiAgICAgICAgICAnaGlnaC1wZXJmb3JtYW5jZSdcbiAgICB9O1xuXG4gICAgY29uc3QgYWRhcHRlciA9IGF3YWl0IG5hdmlnYXRvci5ncHUucmVxdWVzdEFkYXB0ZXIoZ3B1RGVzY3JpcHRvcik7XG4gICAgY29uc3QgZGV2aWNlRGVzY3JpcHRvcjogR1BVRGV2aWNlRGVzY3JpcHRvciA9IHt9O1xuXG4gICAgY29uc3QgcmVxdWlyZWRGZWF0dXJlcyA9IFtdO1xuICAgIGlmIChhZGFwdGVyLmZlYXR1cmVzLmhhcygndGltZXN0YW1wLXF1ZXJ5JykpIHtcbiAgICAgIHJlcXVpcmVkRmVhdHVyZXMucHVzaCgndGltZXN0YW1wLXF1ZXJ5Jyk7XG4gICAgfVxuICAgIGlmIChhZGFwdGVyLmZlYXR1cmVzLmhhcygnYmdyYTh1bm9ybS1zdG9yYWdlJykpIHtcbiAgICAgIHJlcXVpcmVkRmVhdHVyZXMucHVzaChbJ2JncmE4dW5vcm0tc3RvcmFnZSddKTtcbiAgICB9XG4gICAgZGV2aWNlRGVzY3JpcHRvci5yZXF1aXJlZEZlYXR1cmVzID1cbiAgICAgICAgcmVxdWlyZWRGZWF0dXJlcyBhcyBJdGVyYWJsZTxHUFVGZWF0dXJlTmFtZT47XG5cbiAgICBjb25zdCBhZGFwdGVyTGltaXRzID0gYWRhcHRlci5saW1pdHM7XG4gICAgZGV2aWNlRGVzY3JpcHRvci5yZXF1aXJlZExpbWl0cyA9IHtcbiAgICAgICdtYXhDb21wdXRlV29ya2dyb3VwU3RvcmFnZVNpemUnOlxuICAgICAgICAgIGFkYXB0ZXJMaW1pdHMubWF4Q29tcHV0ZVdvcmtncm91cFN0b3JhZ2VTaXplLFxuICAgICAgJ21heENvbXB1dGVXb3JrZ3JvdXBzUGVyRGltZW5zaW9uJzpcbiAgICAgICAgICBhZGFwdGVyTGltaXRzLm1heENvbXB1dGVXb3JrZ3JvdXBzUGVyRGltZW5zaW9uLFxuICAgICAgJ21heFN0b3JhZ2VCdWZmZXJCaW5kaW5nU2l6ZSc6IGFkYXB0ZXJMaW1pdHMubWF4U3RvcmFnZUJ1ZmZlckJpbmRpbmdTaXplLFxuICAgICAgJ21heEJ1ZmZlclNpemUnOiBhZGFwdGVyTGltaXRzLm1heEJ1ZmZlclNpemUsXG4gICAgICAnbWF4Q29tcHV0ZVdvcmtncm91cFNpemVYJzogYWRhcHRlckxpbWl0cy5tYXhDb21wdXRlV29ya2dyb3VwU2l6ZVgsXG4gICAgICAnbWF4Q29tcHV0ZUludm9jYXRpb25zUGVyV29ya2dyb3VwJzpcbiAgICAgICAgICBhZGFwdGVyTGltaXRzLm1heENvbXB1dGVJbnZvY2F0aW9uc1Blcldvcmtncm91cCxcbiAgICB9O1xuXG4gICAgY29uc3QgZGV2aWNlOiBHUFVEZXZpY2UgPSBhd2FpdCBhZGFwdGVyLnJlcXVlc3REZXZpY2UoZGV2aWNlRGVzY3JpcHRvcik7XG4gICAgY29uc3QgYWRhcHRlckluZm8gPSBhd2FpdCBhZGFwdGVyLnJlcXVlc3RBZGFwdGVySW5mbygpO1xuICAgIHJldHVybiBuZXcgV2ViR1BVQmFja2VuZChkZXZpY2UsIGFkYXB0ZXJJbmZvKTtcbiAgfSwgMyAvKnByaW9yaXR5Ki8pO1xufVxuXG4vLyBFeHBvcnQgd2ViZ3B1IHV0aWxpdGllc1xuZXhwb3J0ICogZnJvbSAnLi93ZWJncHUnO1xuIl19","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nexport var BinaryOpType;\n(function (BinaryOpType) {\n    BinaryOpType[BinaryOpType[\"ADD\"] = 0] = \"ADD\";\n    BinaryOpType[BinaryOpType[\"ATAN2\"] = 1] = \"ATAN2\";\n    BinaryOpType[BinaryOpType[\"COMPLEX_MULTIPLY_IMAG\"] = 2] = \"COMPLEX_MULTIPLY_IMAG\";\n    BinaryOpType[BinaryOpType[\"COMPLEX_MULTIPLY_REAL\"] = 3] = \"COMPLEX_MULTIPLY_REAL\";\n    BinaryOpType[BinaryOpType[\"DIV\"] = 4] = \"DIV\";\n    BinaryOpType[BinaryOpType[\"ELU_DER\"] = 5] = \"ELU_DER\";\n    BinaryOpType[BinaryOpType[\"EQUAL\"] = 6] = \"EQUAL\";\n    BinaryOpType[BinaryOpType[\"FLOOR_DIV\"] = 7] = \"FLOOR_DIV\";\n    BinaryOpType[BinaryOpType[\"GREATER\"] = 8] = \"GREATER\";\n    BinaryOpType[BinaryOpType[\"GREATER_EQUAL\"] = 9] = \"GREATER_EQUAL\";\n    BinaryOpType[BinaryOpType[\"LESS\"] = 10] = \"LESS\";\n    BinaryOpType[BinaryOpType[\"LESS_EQUAL\"] = 11] = \"LESS_EQUAL\";\n    BinaryOpType[BinaryOpType[\"LOGICAL_AND\"] = 12] = \"LOGICAL_AND\";\n    BinaryOpType[BinaryOpType[\"LOGICAL_OR\"] = 13] = \"LOGICAL_OR\";\n    BinaryOpType[BinaryOpType[\"MAX\"] = 14] = \"MAX\";\n    BinaryOpType[BinaryOpType[\"MIN\"] = 15] = \"MIN\";\n    BinaryOpType[BinaryOpType[\"MOD\"] = 16] = \"MOD\";\n    BinaryOpType[BinaryOpType[\"MUL\"] = 17] = \"MUL\";\n    BinaryOpType[BinaryOpType[\"NOT_EQUAL\"] = 18] = \"NOT_EQUAL\";\n    BinaryOpType[BinaryOpType[\"POW\"] = 19] = \"POW\";\n    BinaryOpType[BinaryOpType[\"PRELU\"] = 20] = \"PRELU\";\n    BinaryOpType[BinaryOpType[\"SQUARED_DIFFERENCE\"] = 21] = \"SQUARED_DIFFERENCE\";\n    BinaryOpType[BinaryOpType[\"SUB\"] = 22] = \"SUB\";\n})(BinaryOpType || (BinaryOpType = {}));\nconst ADD = 'let resultTemp = a + b;';\nconst ATAN2 = 'let resultTemp = atan2(a, b);';\n// (Ar + Ai)(Br + Bi) =\n// ArBr + ArBi + AiBr + AiBi = ArBr - AB + ArBi + AiBr\n// Yr = ArBr - AB\n// Yi = ArBi + AiBr\nconst COMPLEX_MULTIPLY_REAL = 'let resultTemp = areal * breal - aimag * bimag;';\nconst COMPLEX_MULTIPLY_IMAG = 'let resultTemp = areal * bimag + aimag * breal;';\nconst DIV = 'let resultTemp = a / b;';\nconst ELU_DER = 'let resultTemp = select(a * (b + 1.0), a, b >= b - b);';\nconst EQUAL = `\n  let zero = sign(a) * 0 + 0;\n  let one = sign(b) * 0 + 1;\n  let resultTemp = select(zero, one, a == b);\n`;\nconst FLOOR_DIV = `\n  let remainder =\n      select(a % b, round(a % b), (round(a) == a) & (round(b) == b));\n  let quotient = (a - remainder) / b;\n  let resultTemp =\n      round(select(quotient, quotient - 1, sign(remainder) == -sign(b)));\n`;\nconst GREATER = `\n  let zero = sign(a) * 0 + 0;\n  let one = sign(b) * 0 + 1;\n  let resultTemp = select(zero, one, a > b);\n`;\nconst GREATER_EQUAL = `\n  let zero = sign(a) * 0 + 0;\n  let one = sign(b) * 0 + 1;\n  let resultTemp = select(zero, one, a >= b);\n`;\nconst LESS = `\n  let zero = sign(a) * 0 + 0;\n  let one = sign(b) * 0 + 1;\n  let resultTemp = select(zero, one, a < b);\n`;\nconst LESS_EQUAL = `\n  let zero = sign(a) * 0 + 0;\n  let one = sign(b) * 0 + 1;\n  let resultTemp = select(zero, one, a <= b);\n`;\nconst LOGICAL_AND = 'return f32(a >= 1.0 && b >= 1.0);';\nconst LOGICAL_AND_VEC4 = `return (vec4<f32>(a >= vec4<f32>(1.0)) *\n  vec4<f32>(b >= vec4<f32>(1.0)));`;\nconst LOGICAL_OR = 'return f32(a >= 1.0 || b >= 1.0);';\nconst LOGICAL_OR_VEC4 = `return min(vec4<f32>(a >= vec4<f32>(1.0)) +\n  vec4<f32>(b >= vec4<f32>(1.0)), vec4<f32>(1.0));`;\nconst MAX = 'let resultTemp = max(a, b);';\nconst MIN = 'let resultTemp = min(a, b);';\nconst MOD = `\n  let isNaN = b == 0.;\n  var resultTemp = a % b;\n  resultTemp = select((resultTemp + b) % b, resultTemp,\n      (a < 0. && b < 0.) || (a >= 0. && b > 0.));\n`;\nconst MOD_VEC4 = `\n  let isNaN = !vec4<bool>(b);\n  var resultTemp = vec4<f32>(a % b);\n  if (!((a[0] < 0. && b[0] < 0.) || (a[0] >= 0. && b[0] > 0.))) {\n    resultTemp[0] = (resultTemp[0] + b[0]) % b[0];\n  }\n  if (!((a[1] < 0. && b[1] < 0.) || (a[1] >= 0. && b[1] > 0.))) {\n    resultTemp[1] = (resultTemp[1] + b[1]) % b[1];\n  }\n  if (!((a[2] < 0. && b[2] < 0.) || (a[2] >= 0. && b[2] > 0.))) {\n    resultTemp[2] = (resultTemp[2] + b[2]) % b[2];\n  }\n  if (!((a[3] < 0. && b[3] < 0.) || (a[3] >= 0. && b[3] > 0.))) {\n    resultTemp[3] = (resultTemp[3] + b[3]) % b[3];\n  }\n`;\nconst MUL = 'let resultTemp = a * b;';\nconst NOT_EQUAL = `\n  var resultTemp = f32(a != b);\n  let valueForNaN = 1.0;\n`;\nconst NOT_EQUAL_VEC4 = `\n  var resultTemp = vec4<f32>(a != b);\n  let valueForNaN = 1.0;\n`;\nconst POW = `\n  let isNaN = a < 0.0 && floor(b) < b;\n  if (b == 0.0) {\n    return 1.0;\n  }\n  var resultTemp = select(sign(a) * pow(abs(a), b), pow(abs(a), b),\n      round(abs(b) % 2.0) != 1.0);\n`;\nconst POW_VEC4 = `\n  let isModRound1Bool = vec4<i32>(round(abs(b) % vec4<f32>(2.0))) == vec4<i32>(1);\n  let isModRound1 = vec4<f32>(isModRound1Bool);\n  let multiplier = sign(a) * isModRound1 + (vec4<f32>(1.0) - isModRound1);\n  var resultTemp = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  let isExpZero = b == vec4<f32>(0.0);\n  if (isExpZero.r) {\n    resultTemp.r = 1.0;\n  }\n  if (isExpZero.g) {\n    resultTemp.g = 1.0;\n  }\n  if (isExpZero.b) {\n    resultTemp.b = 1.0;\n  }\n  if (isExpZero.a) {\n    resultTemp.a = 1.0;\n  }\n  let isNaN = (a < vec4<f32>(0.0)) & (floor(b) < b);\n`;\nconst PRELU = `if (a < 0.0) { return b * a; }  return a;`;\nconst PRELU_VEC4 = `\n  let aLessThanZero = vec4<f32>(a < vec4<f32>(0.0));\n  return (aLessThanZero * (b * a)) + ((vec4<f32>(1.0) - aLessThanZero) * a);\n`;\nconst SQUARED_DIFFERENCE = 'let resultTemp = (a - b) * (a - b);';\nconst SUB = 'let resultTemp = a - b;';\nexport function getBinaryOpString(type, useVec4) {\n    let doOpSnippet;\n    // Ops with NaN check\n    do {\n        switch (type) {\n            case BinaryOpType.ATAN2:\n                doOpSnippet = ATAN2;\n                break;\n            case BinaryOpType.MAX:\n                doOpSnippet = MAX;\n                break;\n            case BinaryOpType.MIN:\n                doOpSnippet = MIN;\n                break;\n            case BinaryOpType.MOD:\n                doOpSnippet = useVec4 ? MOD_VEC4 : MOD;\n                break;\n            case BinaryOpType.NOT_EQUAL:\n                doOpSnippet = useVec4 ? NOT_EQUAL_VEC4 : NOT_EQUAL;\n                break;\n            case BinaryOpType.POW:\n                doOpSnippet = useVec4 ? POW_VEC4 : POW;\n                break;\n            default:\n                continue;\n        }\n        let isNaN;\n        let dTypeN;\n        let boolN;\n        if (useVec4) {\n            isNaN = 'isnanVec4';\n            dTypeN = 'vec4<f32>';\n            boolN = 'vec4<bool>';\n        }\n        else {\n            isNaN = 'isnan';\n            dTypeN = 'f32';\n            boolN = 'bool';\n        }\n        return `\n      let aIsNaN = ${isNaN}(a);\n      let aPostLegalization = select(a, ${dTypeN}(42), aIsNaN);\n      let bIsNaN = ${isNaN}(b);\n      let bPostLegalization = select(b, ${dTypeN}(42), bIsNaN);\n      let isNaN = false;\n      let valueForNaN = uniforms.NAN;\n      {\n        let a = aPostLegalization;\n        let b = bPostLegalization;\n        ${doOpSnippet}\n        return select(\n            resultTemp, ${dTypeN}(valueForNaN),\n            ${boolN}(isNaN) | aIsNaN | bIsNaN);\n      }\n    `;\n    } while (false);\n    // Ops without NaN check\n    switch (type) {\n        case BinaryOpType.ADD:\n            doOpSnippet = ADD;\n            break;\n        case BinaryOpType.COMPLEX_MULTIPLY_IMAG:\n            doOpSnippet = COMPLEX_MULTIPLY_IMAG;\n            break;\n        case BinaryOpType.COMPLEX_MULTIPLY_REAL:\n            doOpSnippet = COMPLEX_MULTIPLY_REAL;\n            break;\n        case BinaryOpType.DIV:\n            doOpSnippet = DIV;\n            break;\n        case BinaryOpType.ELU_DER:\n            doOpSnippet = ELU_DER;\n            break;\n        case BinaryOpType.EQUAL:\n            doOpSnippet = EQUAL;\n            break;\n        case BinaryOpType.FLOOR_DIV:\n            doOpSnippet = FLOOR_DIV;\n            break;\n        case BinaryOpType.GREATER:\n            doOpSnippet = GREATER;\n            break;\n        case BinaryOpType.GREATER_EQUAL:\n            doOpSnippet = GREATER_EQUAL;\n            break;\n        case BinaryOpType.LESS:\n            doOpSnippet = LESS;\n            break;\n        case BinaryOpType.LESS_EQUAL:\n            doOpSnippet = LESS_EQUAL;\n            break;\n        case BinaryOpType.LOGICAL_AND:\n            return useVec4 ? LOGICAL_AND_VEC4 : LOGICAL_AND;\n        case BinaryOpType.LOGICAL_OR:\n            return useVec4 ? LOGICAL_OR_VEC4 : LOGICAL_OR;\n        case BinaryOpType.MUL:\n            doOpSnippet = MUL;\n            break;\n        case BinaryOpType.PRELU:\n            return useVec4 ? PRELU_VEC4 : PRELU;\n        case BinaryOpType.SQUARED_DIFFERENCE:\n            doOpSnippet = SQUARED_DIFFERENCE;\n            break;\n        case BinaryOpType.SUB:\n            doOpSnippet = SUB;\n            break;\n        default:\n        // throw new Error(`BinaryType ${type} is not implemented!`);\n    }\n    return `\n    ${doOpSnippet}\n    return resultTemp;\n  `;\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmluYXJ5X29wX3V0aWwuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9iaW5hcnlfb3BfdXRpbC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxNQUFNLENBQU4sSUFBWSxZQXdCWDtBQXhCRCxXQUFZLFlBQVk7SUFDdEIsNkNBQUcsQ0FBQTtJQUNILGlEQUFLLENBQUE7SUFDTCxpRkFBcUIsQ0FBQTtJQUNyQixpRkFBcUIsQ0FBQTtJQUNyQiw2Q0FBRyxDQUFBO0lBQ0gscURBQU8sQ0FBQTtJQUNQLGlEQUFLLENBQUE7SUFDTCx5REFBUyxDQUFBO0lBQ1QscURBQU8sQ0FBQTtJQUNQLGlFQUFhLENBQUE7SUFDYixnREFBSSxDQUFBO0lBQ0osNERBQVUsQ0FBQTtJQUNWLDhEQUFXLENBQUE7SUFDWCw0REFBVSxDQUFBO0lBQ1YsOENBQUcsQ0FBQTtJQUNILDhDQUFHLENBQUE7SUFDSCw4Q0FBRyxDQUFBO0lBQ0gsOENBQUcsQ0FBQTtJQUNILDBEQUFTLENBQUE7SUFDVCw4Q0FBRyxDQUFBO0lBQ0gsa0RBQUssQ0FBQTtJQUNMLDRFQUFrQixDQUFBO0lBQ2xCLDhDQUFHLENBQUE7QUFDTCxDQUFDLEVBeEJXLFlBQVksS0FBWixZQUFZLFFBd0J2QjtBQUVELE1BQU0sR0FBRyxHQUFHLHlCQUF5QixDQUFDO0FBQ3RDLE1BQU0sS0FBSyxHQUFHLCtCQUErQixDQUFDO0FBQzlDLHVCQUF1QjtBQUN2QixzREFBc0Q7QUFDdEQsaUJBQWlCO0FBQ2pCLG1CQUFtQjtBQUNuQixNQUFNLHFCQUFxQixHQUFHLGlEQUFpRCxDQUFDO0FBQ2hGLE1BQU0scUJBQXFCLEdBQUcsaURBQWlELENBQUM7QUFDaEYsTUFBTSxHQUFHLEdBQUcseUJBQXlCLENBQUM7QUFDdEMsTUFBTSxPQUFPLEdBQUcsd0RBQXdELENBQUM7QUFDekUsTUFBTSxLQUFLLEdB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UUFDaEQsS0FBSyxZQUFZLENBQUMsR0FBRztZQUNuQixXQUFXLEdBQUcsR0FBRyxDQUFDO1lBQ2xCLE1BQU07UUFDUixLQUFLLFlBQVksQ0FBQyxLQUFLO1lBQ3JCLE9BQU8sT0FBTyxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQztRQUN0QyxLQUFLLFlBQVksQ0FBQyxrQkFBa0I7WUFDbEMsV0FBVyxHQUFHLGtCQUFrQixDQUFDO1lBQ2pDLE1BQU07UUFDUixLQUFLLFlBQVksQ0FBQyxHQUFHO1lBQ25CLFdBQVcsR0FBRyxHQUFHLENBQUM7WUFDbEIsTUFBTTtRQUNSLFFBQVE7UUFDTiw2REFBNkQ7S0FDaEU7SUFDRCxPQUFPO01BQ0gsV0FBVzs7R0FFZCxDQUFDO0FBQ0osQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuZXhwb3J0IGVudW0gQmluYXJ5T3BUeXBlIHtcbiAgQURELFxuICBBVEFOMixcbiAgQ09NUExFWF9NVUxUSVBMWV9JTUFHLFxuICBDT01QTEVYX01VTFRJUExZX1JFQUwsXG4gIERJVixcbiAgRUxVX0RFUixcbiAgRVFVQUwsXG4gIEZMT09SX0RJVixcbiAgR1JFQVRFUixcbiAgR1JFQVRFUl9FUVVBTCxcbiAgTEVTUyxcbiAgTEVTU19FUVVBTCxcbiAgTE9HSUNBTF9BTkQsXG4gIExPR0lDQUxfT1IsXG4gIE1BWCxcbiAgTUlOLFxuICBNT0QsXG4gIE1VTCxcbiAgTk9UX0VRVUFMLFxuICBQT1csXG4gIFBSRUxVLFxuICBTUVVBUkVEX0RJRkZFUkVOQ0UsXG4gIFNVQlxufVxuXG5jb25zdCBBREQgPSAnbGV0IHJlc3VsdFRlbXAgPSBhICsgYjsnO1xuY29uc3QgQVRBTjIgPSAnbGV0IHJlc3VsdFRlbXAgPSBhdGFuMihhLCBiKTsnO1xuLy8gKEFyICsgQWkpKEJyICsgQmkpID1cbi8vIEFyQnIgKyBBckJpICsgQWlCciArIEFpQmkgPSBBckJyIC0gQUIgKyBBckJpICsgQWlCclxuLy8gWXIgPSBBckJyIC0gQUJcbi8vIFlpID0gQXJCaSArIEFpQnJcbmNvbnN0IENPTVBMRVhfTVVMVElQTFlfUkVBTCA9ICdsZXQgcmVzdWx0VGVtcCA9IGFyZWFsICogYnJlYWwgLSBhaW1hZyAqIGJpbWFnOyc7XG5jb25zdCBDT01QTEVYX01VTFRJUExZX0lNQUcgPSAnbGV0IHJlc3VsdFRlbXAgPSBhcmVhbCAqIGJpbWFnICsgYWltYWcgKiBicmVhbDsnO1xuY29uc3QgRElWID0gJ2xldCByZXN1bHRUZW1wID0gYSAvIGI7JztcbmNvbnN0IEVMVV9ERVIgPSAnbGV0IHJlc3VsdFRlbXAgPSBzZWxlY3QoYSAqIChiICsgMS4wKSwgYSwgYiA+PSBiIC0gYik7JztcbmNvbnN0IEVRVUFMID0gYFxuICBsZXQgemVybyA9IHNpZ24oYSkgKiAwICsgMDtcbiAgbGV0IG9uZSA9IHNpZ24oYikgKiAwICsgMTtcbiAgbGV0IHJlc3VsdFRlbXAgPSBzZWxlY3QoemVybywgb25lLCBhID09IGIpO1xuYDtcbmNvbnN0IEZMT09SX0RJViA9IGBcbiAgbGV0IHJlbWFpbmRlciA9XG4gICAgICBzZWxlY3QoYSAlIGIsIHJvdW5kKGEgJSBiKSwgKHJvdW5kKGEpID09IGEpICYgKHJvdW5kKGIpID09IGIpKTtcbiAgbGV0IHF1b3RpZW50ID0gKGEgLSByZW1haW5kZXIpIC8gYjtcbiAgbGV0IHJlc3VsdFRlbXAgPVxuICAgICAgcm91bmQoc2VsZWN0KHF1b3RpZW50LCBxdW90aWVudCAtIDEsIHNpZ24ocmVtYWluZGVyKSA9PSAtc2lnbihiKSkpO1xuYDtcbmNvbnN0IEdSRUFURVIgPSBgXG4gIGxldCB6ZXJvID0gc2lnbihhKSAqIDAgKyAwO1xuICBsZXQgb25lID0gc2lnbihiKSAqIDAgKyAxO1xuICBsZXQgcmVzdWx0VGVtcCA9IHNlbGVjdCh6ZXJvLCBvbmUsIGEgPiBiKTtcbmA7XG5jb25zdCBHUkVBVEVSX0VRVUFMID0gYFxuICBsZXQgemVybyA9IHNpZ24oYSkgKiAwICsgMDtcbiAgbGV0IG9uZSA9IHNpZ24oYikgKiAwICsgMTtcbiAgbGV0IHJlc3VsdFRlbXAgPSBzZWxlY3QoemVybywgb25lLCBhID49IGIpO1xuYDtcbmNvbnN0IExFU1MgPSBgXG4gIGxldCB6ZXJvID0gc2lnbihhKSAqIDAgKyAwO1xuICBsZXQgb25lID0gc2lnbihiKSAqIDAgKyAxO1xuICBsZXQgcmVzdWx0VGVtcCA9IHNlbGVjdCh6ZXJvLCBvbmUsIGEgPCBiKTtcbmA7XG5jb25zdCBMRVNTX0VRVUFMID0gYFxuICBsZXQgemVybyA9IHNpZ24oYSkgKiAwICsgMDtcbiAgbGV0IG9uZSA9IHNpZ24oYikgKiAwICsgMTtcbiAgbGV0IHJlc3VsdFRlbXAgPSBzZWxlY3QoemVybywgb25lLCBhIDw9IGIpO1xuYDtcbmNvbnN0IExPR0lDQUxfQU5EID0gJ3JldHVybiBmMzIoYSA+PSAxLjAgJiYgYiA+PSAxLjApOyc7XG5jb25zdCBMT0dJQ0FMX0FORF9WRUM0ID0gYHJldHVybiAodmVjNDxmMzI+KGEgPj0gdmVjNDxmMzI+KDEuMCkpICpcbiAgdmVjNDxmMzI+KGIgPj0gdmVjNDxmMzI+KDEuMCkpKTtgO1xuY29uc3QgTE9HSUNBTF9PUiA9ICdyZXR1cm4gZjMyKGEgPj0gMS4wIHx8IGIgPj0gMS4wKTsnO1xuY29uc3QgTE9HSUNBTF9PUl9WRUM0ID0gYHJldHVybiBtaW4odmVjNDxmMzI+KGEgPj0gdmVjNDxmMzI+KDEuMCkpICtcbiAgdmVjNDxmMzI+KGIgPj0gdmVjNDxmMzI+KDEuMCkpLCB2ZWM0PGYzMj4oMS4wKSk7YDtcbmNvbnN0IE1BWCA9ICdsZXQgcmVzdWx0VGVtcCA9IG1heChhLCBiKTsnO1xuY29uc3QgTUlOID0gJ2xldCByZXN1bHRUZW1wID0gbWluKGEsIGIpOyc7XG5jb25zdCBNT0QgPSBgXG4gIGxldCBpc05hTiA9IGIgPT0gMC47XG4gIHZhciByZXN1bHRUZW1wID0gYSAlIGI7XG4gIHJlc3VsdFRlbXAgPSBzZWxlY3QoKHJlc3VsdFRlbXAgKyBiKSAlIGIsIHJlc3VsdFRlbXAsXG4gICAgICAoYSA8IDAuICYmIGIgPCAwLikgfHwgKGEgPj0gMC4gJiYgYiA+IDAuKSk7XG5gO1xuY29uc3QgTU9EX1ZFQzQgPSBgXG4gIGxldCBpc05hTiA9ICF2ZWM0PGJvb2w+KGIpO1xuICB2YXIgcmVzdWx0VGVtcCA9IHZlYzQ8ZjMyPihhICUgYik7XG4gIGlmICghKChhWzBdIDwgMC4gJiYgYlswXSA8IDAuKSB8fCAoYVswXSA+PSAwLiAmJiBiWzBdID4gMC4pKSkge1xuICAgIHJlc3VsdFRlbXBbMF0gPSAocmVzdWx0VGVtcFswXSArIGJbMF0pICUgYlswXTtcbiAgfVxuICBpZiAoISgoYVsxXSA8IDAuICYmIGJbMV0gPCAwLikgfHwgKGFbMV0gPj0gMC4gJiYgYlsxXSA+IDAuKSkpIHtcbiAgICByZXN1bHRUZW1wWzFdID0gKHJlc3VsdFRlbXBbMV0gKyBiWzFdKSAlIGJbMV07XG4gIH1cbiAgaWYgKCEoKGFbMl0gPCAwLiAmJiBiWzJdIDwgMC4pIHx8IChhWzJdID49IDAuICYmIGJbMl0gPiAwLikpKSB7XG4gICAgcmVzdWx0VGVtcFsyXSA9IChyZXN1bHRUZW1wWzJdICsgYlsyXSkgJSBiWzJdO1xuICB9XG4gIGlmICghKChhWzNdIDwgMC4gJiYgYlszXSA8IDAuKSB8fCAoYVszXSA+PSAwLiAmJiBiWzNdID4gMC4pKSkge1xuICAgIHJlc3VsdFRlbXBbM10gPSAocmVzdWx0VGVtcFszXSArIGJbM10pICUgYlszXTtcbiAgfVxuYDtcbmNvbnN0IE1VTCA9ICdsZXQgcmVzdWx0VGVtcCA9IGEgKiBiOyc7XG5jb25zdCBOT1RfRVFVQUwgPSBgXG4gIHZhciByZXN1bHRUZW1wID0gZjMyKGEgIT0gYik7XG4gIGxldCB2YWx1ZUZvck5hTiA9IDEuMDtcbmA7XG5jb25zdCBOT1RfRVFVQUxfVkVDNCA9IGBcbiAgdmFyIHJlc3VsdFRlbXAgPSB2ZWM0PGYzMj4oYSAhPSBiKTtcbiAgbGV0IHZhbHVlRm9yTmFOID0gMS4wO1xuYDtcblxuY29uc3QgUE9XID0gYFxuICBsZXQgaXNOYU4gPSBhIDwgMC4wICYmIGZsb29yKGIpIDwgYjtcbiAgaWYgKGIgPT0gMC4wKSB7XG4gICAgcmV0dXJuIDEuMDtcbiAgfVxuICB2YXIgcmVzdWx0VGVtcCA9IHNlbGVjdChzaWduKGEpICogcG93KGFicyhhKSwgYiksIHBvdyhhYnMoYSksIGIpLFxuICAgICAgcm91bmQoYWJzKGIpICUgMi4wKSAhPSAxLjApO1xuYDtcbmNvbnN0IFBPV19WRUM0ID0gYFxuICBsZXQgaXNNb2RSb3VuZDFCb29sID0gdmVjNDxpMzI+KHJvdW5kKGFicyhiKSAlIHZlYzQ8ZjMyPigyLjApKSkgPT0gdmVjNDxpMzI+KDEpO1xuICBsZXQgaXNNb2RSb3VuZDEgPSB2ZWM0PGYzMj4oaXNNb2RSb3VuZDFCb29sKTtcbiAgbGV0IG11bHRpcGxpZXIgPSBzaWduKGEpICogaXNNb2RSb3VuZDEgKyAodmVjNDxmMzI+KDEuMCkgLSBpc01vZFJvdW5kMSk7XG4gIHZhciByZXN1bHRUZW1wID0gbXVsdGlwbGllciAqIHBvdyhhYnMoYSksIGIpO1xuXG4gIC8vIEVuc3VyZSB0aGF0IGFeMCA9IDEsIGluY2x1ZGluZyAwXjAgPSAxIGFzIHRoaXMgY29ycmVzcG9uZCB0byBURiBhbmQgSlNcbiAgbGV0IGlzRXhwWmVybyA9IGIgPT0gdmVjNDxmMzI+KDAuMCk7XG4gIGlmIChpc0V4cFplcm8ucikge1xuICAgIHJlc3VsdFRlbXAuciA9IDEuMDtcbiAgfVxuICBpZiAoaXNFeHBaZXJvLmcpIHtcbiAgICByZXN1bHRUZW1wLmcgPSAxLjA7XG4gIH1cbiAgaWYgKGlzRXhwWmVyby5iKSB7XG4gICAgcmVzdWx0VGVtcC5iID0gMS4wO1xuICB9XG4gIGlmIChpc0V4cFplcm8uYSkge1xuICAgIHJlc3VsdFRlbXAuYSA9IDEuMDtcbiAgfVxuICBsZXQgaXNOYU4gPSAoYSA8IHZlYzQ8ZjMyPigwLjApKSAmIChmbG9vcihiKSA8IGIpO1xuYDtcblxuY29uc3QgUFJFTFUgPSBgaWYgKGEgPCAwLjApIHsgcmV0dXJuIGIgKiBhOyB9ICByZXR1cm4gYTtgO1xuY29uc3QgUFJFTFVfVkVDNCA9IGBcbiAgbGV0IGFMZXNzVGhhblplcm8gPSB2ZWM0PGYzMj4oYSA8IHZlYzQ8ZjMyPigwLjApKTtcbiAgcmV0dXJuIChhTGVzc1RoYW5aZXJvICogKGIgKiBhKSkgKyAoKHZlYzQ8ZjMyPigxLjApIC0gYUxlc3NUaGFuWmVybykgKiBhKTtcbmA7XG5jb25zdCBTUVVBUkVEX0RJRkZFUkVOQ0UgPSAnbGV0IHJlc3VsdFRlbXAgPSAoYSAtIGIpICogKGEgLSBiKTsnO1xuY29uc3QgU1VCID0gJ2xldCByZXN1bHRUZW1wID0gYSAtIGI7JztcblxuZXhwb3J0IGZ1bmN0aW9uIGdldEJpbmFyeU9wU3RyaW5nKFxuICAgIHR5cGU6IEJpbmFyeU9wVHlwZSwgdXNlVmVjND86IGJvb2xlYW4pOiBzdHJpbmcge1xuICBsZXQgZG9PcFNuaXBwZXQ6IHN0cmluZztcblxuICAvLyBPcHMgd2l0aCBOYU4gY2hlY2tcbiAgZG8ge1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgY2FzZSBCaW5hcnlPcFR5cGUuQVRBTjI6XG4gICAgICAgIGRvT3BTbmlwcGV0ID0gQVRBTjI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBCaW5hcnlPcFR5cGUuTUFYOlxuICAgICAgICBkb09wU25pcHBldCA9IE1BWDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIEJpbmFyeU9wVHlwZS5NSU46XG4gICAgICAgIGRvT3BTbmlwcGV0ID0gTUlOO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgQmluYXJ5T3BUeXBlLk1PRDpcbiAgICAgICAgZG9PcFNuaXBwZXQgPSB1c2VWZWM0ID8gTU9EX1ZFQzQgOiBNT0Q7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBCaW5hcnlPcFR5cGUuTk9UX0VRVUFMOlxuICAgICAgICBkb09wU25pcHBldCA9IHVzZVZlYzQgPyBOT1RfRVFVQUxfVkVDNCA6IE5PVF9FUVVBTDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIEJpbmFyeU9wVHlwZS5QT1c6XG4gICAgICAgIGRvT3BTbmlwcGV0ID0gdXNlVmVjNCA/IFBPV19WRUM0IDogUE9XO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGxldCBpc05hTjogc3RyaW5nO1xuICAgIGxldCBkVHlwZU46IHN0cmluZztcbiAgICBsZXQgYm9vbE46IHN0cmluZztcbiAgICBpZiAodXNlVmVjNCkge1xuICAgICAgaXNOYU4gPSAnaXNuYW5WZWM0JztcbiAgICAgIGRUeXBlTiA9ICd2ZWM0PGYzMj4nO1xuICAgICAgYm9vbE4gPSAndmVjNDxib29sPic7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlzTmFOID0gJ2lzbmFuJztcbiAgICAgIGRUeXBlTiA9ICdmMzInO1xuICAgICAgYm9vbE4gPSAnYm9vbCc7XG4gICAgfVxuXG4gICAgcmV0dXJuIGBcbiAgICAgIGxldCBhSXNOYU4gPSAke2lzTmFOfShhKTtcbiAgICAgIGxldCBhUG9zdExlZ2FsaXphdGlvbiA9IHNlbGVjdChhLCAke2RUeXBlTn0oNDIpLCBhSXNOYU4pO1xuICAgICAgbGV0IGJJc05hTiA9ICR7aXNOYU59KGIpO1xuICAgICAgbGV0IGJQb3N0TGVnYWxpemF0aW9uID0gc2VsZWN0KGIsICR7ZFR5cGVOfSg0MiksIGJJc05hTik7XG4gICAgICBsZXQgaXNOYU4gPSBmYWxzZTtcbiAgICAgIGxldCB2YWx1ZUZvck5hTiA9IHVuaWZvcm1zLk5BTjtcbiAgICAgIHtcbiAgICAgICAgbGV0IGEgPSBhUG9zdExlZ2FsaXphdGlvbjtcbiAgICAgICAgbGV0IGIgPSBiUG9zdExlZ2FsaXphdGlvbjtcbiAgICAgICAgJHtkb09wU25pcHBldH1cbiAgICAgICAgcmV0dXJuIHNlbGVjdChcbiAgICAgICAgICAgIHJlc3VsdFRlbXAsICR7ZFR5cGVOfSh2YWx1ZUZvck5hTiksXG4gICAgICAgICAgICAke2Jvb2xOfShpc05hTikgfCBhSXNOYU4gfCBiSXNOYU4pO1xuICAgICAgfVxuICAgIGA7XG4gIH0gd2hpbGUgKGZhbHNlKTtcblxuICAvLyBPcHMgd2l0aG91dCBOYU4gY2hlY2tcbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSBCaW5hcnlPcFR5cGUuQUREOlxuICAgICAgZG9PcFNuaXBwZXQgPSBBREQ7XG4gICAgICBicmVhaztcbiAgICBjYXNlIEJpbmFyeU9wVHlwZS5DT01QTEVYX01VTFRJUExZX0lNQUc6XG4gICAgICBkb09wU25pcHBldCA9IENPTVBMRVhfTVVMVElQTFlfSU1BRztcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgQmluYXJ5T3BUeXBlLkNPTVBMRVhfTVVMVElQTFlfUkVBTDpcbiAgICAgIGRvT3BTbmlwcGV0ID0gQ09NUExFWF9NVUxUSVBMWV9SRUFMO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBCaW5hcnlPcFR5cGUuRElWOlxuICAgICAgZG9PcFNuaXBwZXQgPSBESVY7XG4gICAgICBicmVhaztcbiAgICBjYXNlIEJpbmFyeU9wVHlwZS5FTFVfREVSOlxuICAgICAgZG9PcFNuaXBwZXQgPSBFTFVfREVSO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBCaW5hcnlPcFR5cGUuRVFVQUw6XG4gICAgICBkb09wU25pcHBldCA9IEVRVUFMO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBCaW5hcnlPcFR5cGUuRkxPT1JfRElWOlxuICAgICAgZG9PcFNuaXBwZXQgPSBGTE9PUl9ESVY7XG4gICAgICBicmVhaztcbiAgICBjYXNlIEJpbmFyeU9wVHlwZS5HUkVBVEVSOlxuICAgICAgZG9PcFNuaXBwZXQgPSBHUkVBVEVSO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBCaW5hcnlPcFR5cGUuR1JFQVRFUl9FUVVBTDpcbiAgICAgIGRvT3BTbmlwcGV0ID0gR1JFQVRFUl9FUVVBTDtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgQmluYXJ5T3BUeXBlLkxFU1M6XG4gICAgICBkb09wU25pcHBldCA9IExFU1M7XG4gICAgICBicmVhaztcbiAgICBjYXNlIEJpbmFyeU9wVHlwZS5MRVNTX0VRVUFMOlxuICAgICAgZG9PcFNuaXBwZXQgPSBMRVNTX0VRVUFMO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBCaW5hcnlPcFR5cGUuTE9HSUNBTF9BTkQ6XG4gICAgICByZXR1cm4gdXNlVmVjNCA/IExPR0lDQUxfQU5EX1ZFQzQgOiBMT0dJQ0FMX0FORDtcbiAgICBjYXNlIEJpbmFyeU9wVHlwZS5MT0dJQ0FMX09SOlxuICAgICAgcmV0dXJuIHVzZVZlYzQgPyBMT0dJQ0FMX09SX1ZFQzQgOiBMT0dJQ0FMX09SO1xuICAgIGNhc2UgQmluYXJ5T3BUeXBlLk1VTDpcbiAgICAgIGRvT3BTbmlwcGV0ID0gTVVMO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBCaW5hcnlPcFR5cGUuUFJFTFU6XG4gICAgICByZXR1cm4gdXNlVmVjNCA/IFBSRUxVX1ZFQzQgOiBQUkVMVTtcbiAgICBjYXNlIEJpbmFyeU9wVHlwZS5TUVVBUkVEX0RJRkZFUkVOQ0U6XG4gICAgICBkb09wU25pcHBldCA9IFNRVUFSRURfRElGRkVSRU5DRTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgQmluYXJ5T3BUeXBlLlNVQjpcbiAgICAgIGRvT3BTbmlwcGV0ID0gU1VCO1xuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIC8vIHRocm93IG5ldyBFcnJvcihgQmluYXJ5VHlwZSAke3R5cGV9IGlzIG5vdCBpbXBsZW1lbnRlZCFgKTtcbiAgfVxuICByZXR1cm4gYFxuICAgICR7ZG9PcFNuaXBwZXR9XG4gICAgcmV0dXJuIHJlc3VsdFRlbXA7XG4gIGA7XG59XG4iXX0=","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { backend_util } from '@tensorflow/tfjs-core';\nexport var UnaryOpType;\n(function (UnaryOpType) {\n    UnaryOpType[UnaryOpType[\"ABS\"] = 0] = \"ABS\";\n    UnaryOpType[UnaryOpType[\"ACOS\"] = 1] = \"ACOS\";\n    UnaryOpType[UnaryOpType[\"ACOSH\"] = 2] = \"ACOSH\";\n    UnaryOpType[UnaryOpType[\"ASIN\"] = 3] = \"ASIN\";\n    UnaryOpType[UnaryOpType[\"ASINH\"] = 4] = \"ASINH\";\n    UnaryOpType[UnaryOpType[\"ATAN\"] = 5] = \"ATAN\";\n    UnaryOpType[UnaryOpType[\"ATANH\"] = 6] = \"ATANH\";\n    UnaryOpType[UnaryOpType[\"CEIL\"] = 7] = \"CEIL\";\n    UnaryOpType[UnaryOpType[\"COS\"] = 8] = \"COS\";\n    UnaryOpType[UnaryOpType[\"COSH\"] = 9] = \"COSH\";\n    UnaryOpType[UnaryOpType[\"ELU\"] = 10] = \"ELU\";\n    UnaryOpType[UnaryOpType[\"ERF\"] = 11] = \"ERF\";\n    UnaryOpType[UnaryOpType[\"EXP\"] = 12] = \"EXP\";\n    UnaryOpType[UnaryOpType[\"EXPM1\"] = 13] = \"EXPM1\";\n    UnaryOpType[UnaryOpType[\"FLOOR\"] = 14] = \"FLOOR\";\n    UnaryOpType[UnaryOpType[\"IS_FINITE\"] = 15] = \"IS_FINITE\";\n    UnaryOpType[UnaryOpType[\"IS_INF\"] = 16] = \"IS_INF\";\n    UnaryOpType[UnaryOpType[\"IS_NAN\"] = 17] = \"IS_NAN\";\n    UnaryOpType[UnaryOpType[\"LINEAR\"] = 18] = \"LINEAR\";\n    UnaryOpType[UnaryOpType[\"LOG\"] = 19] = \"LOG\";\n    UnaryOpType[UnaryOpType[\"LOG1P\"] = 20] = \"LOG1P\";\n    UnaryOpType[UnaryOpType[\"LOGICAL_NOT\"] = 21] = \"LOGICAL_NOT\";\n    UnaryOpType[UnaryOpType[\"NEG\"] = 22] = \"NEG\";\n    UnaryOpType[UnaryOpType[\"RELU\"] = 23] = \"RELU\";\n    UnaryOpType[UnaryOpType[\"RELU6\"] = 24] = \"RELU6\";\n    UnaryOpType[UnaryOpType[\"LEAKYRELU\"] = 25] = \"LEAKYRELU\";\n    UnaryOpType[UnaryOpType[\"RECIPROCAL\"] = 26] = \"RECIPROCAL\";\n    UnaryOpType[UnaryOpType[\"ROUND\"] = 27] = \"ROUND\";\n    UnaryOpType[UnaryOpType[\"RSQRT\"] = 28] = \"RSQRT\";\n    UnaryOpType[UnaryOpType[\"SELU\"] = 29] = \"SELU\";\n    UnaryOpType[UnaryOpType[\"SIGMOID\"] = 30] = \"SIGMOID\";\n    UnaryOpType[UnaryOpType[\"SIGN\"] = 31] = \"SIGN\";\n    UnaryOpType[UnaryOpType[\"SIN\"] = 32] = \"SIN\";\n    UnaryOpType[UnaryOpType[\"SINH\"] = 33] = \"SINH\";\n    UnaryOpType[UnaryOpType[\"SOFTPLUS\"] = 34] = \"SOFTPLUS\";\n    UnaryOpType[UnaryOpType[\"SQRT\"] = 35] = \"SQRT\";\n    UnaryOpType[UnaryOpType[\"SQUARE\"] = 36] = \"SQUARE\";\n    UnaryOpType[UnaryOpType[\"STEP\"] = 37] = \"STEP\";\n    UnaryOpType[UnaryOpType[\"TAN\"] = 38] = \"TAN\";\n    UnaryOpType[UnaryOpType[\"TANH\"] = 39] = \"TANH\";\n    UnaryOpType[UnaryOpType[\"TO_INT\"] = 40] = \"TO_INT\";\n})(UnaryOpType || (UnaryOpType = {}));\nconst ABS = `return abs(a);`;\nconst ACOS = `\n  if (abs(a) > 1.) {\n    return uniforms.NAN;\n  }\n  return acos(a);\n`;\nconst ACOSH = `\n  if (a < 1.) {\n    return uniforms.NAN;\n  }\n  return acosh(a);\n`;\nconst ASIN = `\n  if (abs(a) > 1.) {\n    return uniforms.NAN;\n  }\n  return asin(a);\n`;\nconst ASINH = `return asinh(a);`;\nconst ATAN = `\n  if (isnan(a)) {\n    return uniforms.NAN;\n  }\n  return atan(a);\n`;\nconst ATANH = `\n  if (abs(a) > 1.) {\n    return uniforms.NAN;\n  }\n  if (a == 1.) {\n    return uniforms.INFINITY;\n  }\n  if (a == -1.) {\n    return -uniforms.INFINITY;\n  }\n  return atanh(a);\n`;\nconst CEIL = `return ceil(a);`;\nconst COS = `return cos(a);`;\nconst COSH = `\n  let e2x = exp(-a);\n  return (e2x + 1.0 / e2x) / 2.0;\n`;\nconst EXPM1 = `return exp(a) - 1.0;`;\nconst ELU = `if (a >= 0.0) { return a; }  return (exp(a) - 1.0);`;\nconst ELU_VEC4 = `\n  var resFloat = exp(a) - vec4<f32>(1.0);\n  if (a.r >= 0.0) {\n    resFloat.r = a.r;\n  }\n  if (a.g >= 0.0) {\n    resFloat.g = a.g;\n  }\n  if (a.b >= 0.0) {\n    resFloat.b = a.b;\n  }\n  if (a.a >= 0.0) {\n    resFloat.a = a.a;\n  }\n  return resFloat;\n`;\nconst ERF = `\n  // Error function is calculated approximately with elementary function.\n  // See \"Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables\", Abramowitz and Stegun.\n  let p = ${backend_util.ERF_P};\n  let a1 = ${backend_util.ERF_A1};\n  let a2 = ${backend_util.ERF_A2};\n  let a3 = ${backend_util.ERF_A3};\n  let a4 = ${backend_util.ERF_A4};\n  let a5 = ${backend_util.ERF_A5};\n\n  let sign = sign(a);\n  let absA = abs(a);\n  let t = 1.0 / (1.0 + p * absA);\n  return sign * (1.0 - (((((a5 * t + a4) * t) + a3) * t + a2) * t + a1) * t * exp(-absA * absA));\n`;\nconst EXP = `return exp(a);`;\nconst FLOOR = `return floor(a);`;\nconst IS_FINITE = `return f32(!isnan(a) && !isinf(a));`;\nconst IS_INF = `return f32(isinf(a));`;\nconst IS_NAN = `return f32(isnan(a));`;\nconst LINEAR = `return a;`;\nconst LOG = `if (a < 0.0) { return uniforms.NAN; }\n  return log(a);`;\nconst LOG1P = `\n  if (isnan(a)) { return a; }\n  return log(1.0 + a);\n`;\nconst LOGICAL_NOT = `return f32(!(a >= 1.0));`;\nconst NEG = `return -a;`;\nconst LEAKYRELU = `if (a < 0.0) { return uniforms.alpha * a; } return a;`;\nconst LEAKYRELU_VEC4 = `\n  let aLessThanZero = vec4<f32>(a < vec4<f32>(0.0));\n  return (aLessThanZero * (uniforms.alpha * a)) + ((vec4<f32>(1.0) - aLessThanZero) * a);\n`;\nconst RECIPROCAL = `return 1.0 / a;`;\nconst RELU = `return select(a, 0.0, a < 0.0);`;\nconst RELU6 = 'return clamp(a, 0.0, 6.0);';\nconst RELU6_VEC4 = 'return clamp(a, vec4<f32>(0.0, 0.0, 0.0, 0.0), vec4<f32>(6.0, 6.0, 6.0, 6.0));';\nconst RELU_VEC4 = `\n  return select(a, vec4<f32>(0.0), a < vec4<f32>(0.0));\n`;\nconst ROUND = `return round(a);`;\nconst RSQRT = `return inverseSqrt(a);`;\n// Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n// See: https://arxiv.org/abs/1706.02515\nconst SELU = `\n  if (a >= 0.0) {\n    return ${backend_util.SELU_SCALE} * a;\n  } else {\n    return ${backend_util.SELU_SCALEALPHA} * (exp(a) - 1.0);\n  }\n`;\nconst SIGMOID = `return 1.0 / (1.0 + exp(-1.0 * a));`;\nconst SIGN = `return sign(a);`;\nconst SIN = `return sin(a);`;\nconst SINH = `\n  let e2x = exp(a);\n  return (e2x - 1.0 / e2x) / 2.0;\n`;\nconst SOFTPLUS = `\n  let epsilon = 1.1920928955078125e-7;\n  let threshold = log(epsilon) + 2.0;\n\n  let too_large = a > -threshold;\n  let too_small = a < threshold;\n  let exp_a = exp(a);\n\n  if (too_large) {\n    return a;\n  } else if (too_small) {\n    return exp_a;\n  } else {\n    return log(exp_a + 1.0);\n  }\n`;\nconst SQRT = `return sqrt(a);`;\nconst SQUARE = `return a * a;`;\nconst STEP = `\n  if (isnan(a)) {\n    return a;\n  }\n\n  return select(uniforms.stepAlpha, 1.0, a > 0.0);\n`;\nconst TAN = `return tan(a);`;\nconst TANH = `\n  let e2x = exp(-2.0 * abs(a));\n  return sign(a) * (1.0 - e2x) / (1.0 + e2x);\n`;\nconst TO_INT = `return f32(i32((a)));`;\nexport function getUnaryOpString(type, useVec4) {\n    switch (type) {\n        case UnaryOpType.ABS:\n            return ABS;\n        case UnaryOpType.ACOS:\n            return ACOS;\n        case UnaryOpType.ACOSH:\n            return ACOSH;\n        case UnaryOpType.ASIN:\n            return ASIN;\n        case UnaryOpType.ASINH:\n            return ASINH;\n        case UnaryOpType.ATAN:\n            return ATAN;\n        case UnaryOpType.ATANH:\n            return ATANH;\n        case UnaryOpType.COS:\n            return COS;\n        case UnaryOpType.COSH:\n            return COSH;\n        case UnaryOpType.CEIL:\n            return CEIL;\n        case UnaryOpType.ELU:\n            return useVec4 ? ELU_VEC4 : ELU;\n        case UnaryOpType.ERF:\n            return ERF;\n        case UnaryOpType.EXP:\n            return EXP;\n        case UnaryOpType.EXPM1:\n            return EXPM1;\n        case UnaryOpType.FLOOR:\n            return FLOOR;\n        case UnaryOpType.IS_FINITE:\n            return IS_FINITE;\n        case UnaryOpType.IS_INF:\n            return IS_INF;\n        case UnaryOpType.IS_NAN:\n            return IS_NAN;\n        case UnaryOpType.LINEAR:\n            return LINEAR;\n        case UnaryOpType.LOG:\n            return LOG;\n        case UnaryOpType.LOG1P:\n            return LOG1P;\n        case UnaryOpType.LOGICAL_NOT:\n            return LOGICAL_NOT;\n        case UnaryOpType.NEG:\n            return NEG;\n        case UnaryOpType.LEAKYRELU:\n            return useVec4 ? LEAKYRELU_VEC4 : LEAKYRELU;\n        case UnaryOpType.RECIPROCAL:\n            return RECIPROCAL;\n        case UnaryOpType.RELU:\n            return useVec4 ? RELU_VEC4 : RELU;\n        case UnaryOpType.RELU6:\n            return useVec4 ? RELU6_VEC4 : RELU6;\n        case UnaryOpType.ROUND:\n            return ROUND;\n        case UnaryOpType.RSQRT:\n            return RSQRT;\n        case UnaryOpType.SELU:\n            return SELU;\n        case UnaryOpType.SIGMOID:\n            return SIGMOID;\n        case UnaryOpType.SIGN:\n            return SIGN;\n        case UnaryOpType.SIN:\n            return SIN;\n        case UnaryOpType.SINH:\n            return SINH;\n        case UnaryOpType.SOFTPLUS:\n            return SOFTPLUS;\n        case UnaryOpType.SQRT:\n            return SQRT;\n        case UnaryOpType.SQUARE:\n            return SQUARE;\n        case UnaryOpType.STEP:\n            return STEP;\n        case UnaryOpType.TAN:\n            return TAN;\n        case UnaryOpType.TANH:\n            return TANH;\n        case UnaryOpType.TO_INT:\n            return TO_INT;\n        default:\n            throw new Error(`BinaryType ${type} is not implemented!`);\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidW5hcnlfb3BfdXRpbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL3VuYXJ5X29wX3V0aWwudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUFDLFlBQVksRUFBQyxNQUFNLHVCQUF1QixDQUFDO0FBRW5ELE1BQU0sQ0FBTixJQUFZLFdBMENYO0FBMUNELFdBQVksV0FBVztJQUNyQiwyQ0FBRyxDQUFBO0lBQ0gsNkNBQUksQ0FBQTtJQUNKLCtDQUFLLENBQUE7SUFDTCw2Q0FBSSxDQUFBO0lBQ0osK0NBQUssQ0FBQTtJQUNMLDZDQUFJLENBQUE7SUFDSiwrQ0FBSyxDQUFBO0lBQ0wsNkNBQUksQ0FBQTtJQUNKLDJDQUFHLENBQUE7SUFDSCw2Q0FBSSxDQUFBO0lBQ0osNENBQUcsQ0FBQTtJQUNILDRDQUFHLENBQUE7SUFDSCw0Q0FBRyxDQUFBO0lBQ0gsZ0RBQUssQ0FBQTtJQUNMLGdEQUFLLENBQUE7SUFDTCx3REFBUyxDQUFBO0lBQ1Qsa0RBQU0sQ0FBQTtJQUNOLGtEQUFNLENBQUE7SUFDTixrREFBTSxDQUFBO0lBQ04sNENBQUcsQ0FBQTtJQUNILGdEQUFLLENBQUE7SUFDTCw0REFBVyxDQUFBO0lBQ1gsNENBQUcsQ0FBQTtJQUNILDhDQUFJLENBQUE7SUFDSixnREFBSyxDQUFBO0lBQ0wsd0RBQVMsQ0FBQTtJQUNULDBEQUFVLENBQUE7SUFDVixnREFBSyxDQUFBO0lBQ0wsZ0RBQUssQ0FBQTtJQUNMLDhDQUFJLENBQUE7SUFDSixvREFBTyxDQUFBO0lBQ1AsOENBQUksQ0FBQTtJQUNKLDRDQUFHLENBQUE7SUFDSCw4Q0FBSSxDQUFBO0lBQ0osc0RBQVEsQ0FBQTtJQUNSLDhDQUFJLENBQUE7SUFDSixrREFBTSxDQUFBO0lBQ04sOENBQUksQ0FBQTtJQUNKLDRDQUFHLENBQUE7SUFDSCw4Q0FBSSxDQUFBO0lB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USxDQUFDO1FBQ2xCLEtBQUssV0FBVyxDQUFDLElBQUk7WUFDbkIsT0FBTyxJQUFJLENBQUM7UUFDZCxLQUFLLFdBQVcsQ0FBQyxNQUFNO1lBQ3JCLE9BQU8sTUFBTSxDQUFDO1FBQ2hCLEtBQUssV0FBVyxDQUFDLElBQUk7WUFDbkIsT0FBTyxJQUFJLENBQUM7UUFDZCxLQUFLLFdBQVcsQ0FBQyxHQUFHO1lBQ2xCLE9BQU8sR0FBRyxDQUFDO1FBQ2IsS0FBSyxXQUFXLENBQUMsSUFBSTtZQUNuQixPQUFPLElBQUksQ0FBQztRQUNkLEtBQUssV0FBVyxDQUFDLE1BQU07WUFDckIsT0FBTyxNQUFNLENBQUM7UUFFaEI7WUFDRSxNQUFNLElBQUksS0FBSyxDQUFDLGNBQWMsSUFBSSxzQkFBc0IsQ0FBQyxDQUFDO0tBQzdEO0FBQ0gsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtiYWNrZW5kX3V0aWx9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmV4cG9ydCBlbnVtIFVuYXJ5T3BUeXBlIHtcbiAgQUJTLFxuICBBQ09TLFxuICBBQ09TSCxcbiAgQVNJTixcbiAgQVNJTkgsXG4gIEFUQU4sXG4gIEFUQU5ILFxuICBDRUlMLFxuICBDT1MsXG4gIENPU0gsXG4gIEVMVSxcbiAgRVJGLFxuICBFWFAsXG4gIEVYUE0xLFxuICBGTE9PUixcbiAgSVNfRklOSVRFLFxuICBJU19JTkYsXG4gIElTX05BTixcbiAgTElORUFSLFxuICBMT0csXG4gIExPRzFQLFxuICBMT0dJQ0FMX05PVCxcbiAgTkVHLFxuICBSRUxVLFxuICBSRUxVNixcbiAgTEVBS1lSRUxVLFxuICBSRUNJUFJPQ0FMLFxuICBST1VORCxcbiAgUlNRUlQsXG4gIFNFTFUsXG4gIFNJR01PSUQsXG4gIFNJR04sXG4gIFNJTixcbiAgU0lOSCxcbiAgU09GVFBMVVMsXG4gIFNRUlQsXG4gIFNRVUFSRSxcbiAgU1RFUCxcbiAgVEFOLFxuICBUQU5ILFxuICBUT19JTlRcbn1cblxuY29uc3QgQUJTID0gYHJldHVybiBhYnMoYSk7YDtcbmNvbnN0IEFDT1MgPSBgXG4gIGlmIChhYnMoYSkgPiAxLikge1xuICAgIHJldHVybiB1bmlmb3Jtcy5OQU47XG4gIH1cbiAgcmV0dXJuIGFjb3MoYSk7XG5gO1xuY29uc3QgQUNPU0ggPSBgXG4gIGlmIChhIDwgMS4pIHtcbiAgICByZXR1cm4gdW5pZm9ybXMuTkFOO1xuICB9XG4gIHJldHVybiBhY29zaChhKTtcbmA7XG5jb25zdCBBU0lOID0gYFxuICBpZiAoYWJzKGEpID4gMS4pIHtcbiAgICByZXR1cm4gdW5pZm9ybXMuTkFOO1xuICB9XG4gIHJldHVybiBhc2luKGEpO1xuYDtcbmNvbnN0IEFTSU5IID0gYHJldHVybiBhc2luaChhKTtgO1xuY29uc3QgQVRBTiA9IGBcbiAgaWYgKGlzbmFuKGEpKSB7XG4gICAgcmV0dXJuIHVuaWZvcm1zLk5BTjtcbiAgfVxuICByZXR1cm4gYXRhbihhKTtcbmA7XG5jb25zdCBBVEFOSCA9IGBcbiAgaWYgKGFicyhhKSA+IDEuKSB7XG4gICAgcmV0dXJuIHVuaWZvcm1zLk5BTjtcbiAgfVxuICBpZiAoYSA9PSAxLikge1xuICAgIHJldHVybiB1bmlmb3Jtcy5JTkZJTklUWTtcbiAgfVxuICBpZiAoYSA9PSAtMS4pIHtcbiAgICByZXR1cm4gLXVuaWZvcm1zLklORklOSVRZO1xuICB9XG4gIHJldHVybiBhdGFuaChhKTtcbmA7XG5jb25zdCBDRUlMID0gYHJldHVybiBjZWlsKGEpO2A7XG5jb25zdCBDT1MgPSBgcmV0dXJuIGNvcyhhKTtgO1xuY29uc3QgQ09TSCA9IGBcbiAgbGV0IGUyeCA9IGV4cCgtYSk7XG4gIHJldHVybiAoZTJ4ICsgMS4wIC8gZTJ4KSAvIDIuMDtcbmA7XG5jb25zdCBFWFBNMSA9IGByZXR1cm4gZXhwKGEpIC0gMS4wO2A7XG5jb25zdCBFTFUgPSBgaWYgKGEgPj0gMC4wKSB7IHJldHVybiBhOyB9ICByZXR1cm4gKGV4cChhKSAtIDEuMCk7YDtcbmNvbnN0IEVMVV9WRUM0ID0gYFxuICB2YXIgcmVzRmxvYXQgPSBleHAoYSkgLSB2ZWM0PGYzMj4oMS4wKTtcbiAgaWYgKGEuciA+PSAwLjApIHtcbiAgICByZXNGbG9hdC5yID0gYS5yO1xuICB9XG4gIGlmIChhLmcgPj0gMC4wKSB7XG4gICAgcmVzRmxvYXQuZyA9IGEuZztcbiAgfVxuICBpZiAoYS5iID49IDAuMCkge1xuICAgIHJlc0Zsb2F0LmIgPSBhLmI7XG4gIH1cbiAgaWYgKGEuYSA+PSAwLjApIHtcbiAgICByZXNGbG9hdC5hID0gYS5hO1xuICB9XG4gIHJldHVybiByZXNGbG9hdDtcbmA7XG5jb25zdCBFUkYgPSBgXG4gIC8vIEVycm9yIGZ1bmN0aW9uIGlzIGNhbGN1bGF0ZWQgYXBwcm94aW1hdGVseSB3aXRoIGVsZW1lbnRhcnkgZnVuY3Rpb24uXG4gIC8vIFNlZSBcIkhhbmRib29rIG9mIE1hdGhlbWF0aWNhbCBGdW5jdGlvbnMgd2l0aCBGb3JtdWxhcyxcbiAgLy8gR3JhcGhzLCBhbmQgTWF0aGVtYXRpY2FsIFRhYmxlc1wiLCBBYnJhbW93aXR6IGFuZCBTdGVndW4uXG4gIGxldCBwID0gJHtiYWNrZW5kX3V0aWwuRVJGX1B9O1xuICBsZXQgYTEgPSAke2JhY2tlbmRfdXRpbC5FUkZfQTF9O1xuICBsZXQgYTIgPSAke2JhY2tlbmRfdXRpbC5FUkZfQTJ9O1xuICBsZXQgYTMgPSAke2JhY2tlbmRfdXRpbC5FUkZfQTN9O1xuICBsZXQgYTQgPSAke2JhY2tlbmRfdXRpbC5FUkZfQTR9O1xuICBsZXQgYTUgPSAke2JhY2tlbmRfdXRpbC5FUkZfQTV9O1xuXG4gIGxldCBzaWduID0gc2lnbihhKTtcbiAgbGV0IGFic0EgPSBhYnMoYSk7XG4gIGxldCB0ID0gMS4wIC8gKDEuMCArIHAgKiBhYnNBKTtcbiAgcmV0dXJuIHNpZ24gKiAoMS4wIC0gKCgoKChhNSAqIHQgKyBhNCkgKiB0KSArIGEzKSAqIHQgKyBhMikgKiB0ICsgYTEpICogdCAqIGV4cCgtYWJzQSAqIGFic0EpKTtcbmA7XG5jb25zdCBFWFAgPSBgcmV0dXJuIGV4cChhKTtgO1xuY29uc3QgRkxPT1IgPSBgcmV0dXJuIGZsb29yKGEpO2A7XG5jb25zdCBJU19GSU5JVEUgPSBgcmV0dXJuIGYzMighaXNuYW4oYSkgJiYgIWlzaW5mKGEpKTtgO1xuY29uc3QgSVNfSU5GID0gYHJldHVybiBmMzIoaXNpbmYoYSkpO2A7XG5jb25zdCBJU19OQU4gPSBgcmV0dXJuIGYzMihpc25hbihhKSk7YDtcbmNvbnN0IExJTkVBUiA9IGByZXR1cm4gYTtgO1xuY29uc3QgTE9HID0gYGlmIChhIDwgMC4wKSB7IHJldHVybiB1bmlmb3Jtcy5OQU47IH1cbiAgcmV0dXJuIGxvZyhhKTtgO1xuY29uc3QgTE9HMVAgPSBgXG4gIGlmIChpc25hbihhKSkgeyByZXR1cm4gYTsgfVxuICByZXR1cm4gbG9nKDEuMCArIGEpO1xuYDtcbmNvbnN0IExPR0lDQUxfTk9UID0gYHJldHVybiBmMzIoIShhID49IDEuMCkpO2A7XG5jb25zdCBORUcgPSBgcmV0dXJuIC1hO2A7XG5jb25zdCBMRUFLWVJFTFUgPSBgaWYgKGEgPCAwLjApIHsgcmV0dXJuIHVuaWZvcm1zLmFscGhhICogYTsgfSByZXR1cm4gYTtgO1xuY29uc3QgTEVBS1lSRUxVX1ZFQzQgPSBgXG4gIGxldCBhTGVzc1RoYW5aZXJvID0gdmVjNDxmMzI+KGEgPCB2ZWM0PGYzMj4oMC4wKSk7XG4gIHJldHVybiAoYUxlc3NUaGFuWmVybyAqICh1bmlmb3Jtcy5hbHBoYSAqIGEpKSArICgodmVjNDxmMzI+KDEuMCkgLSBhTGVzc1RoYW5aZXJvKSAqIGEpO1xuYDtcbmNvbnN0IFJFQ0lQUk9DQUwgPSBgcmV0dXJuIDEuMCAvIGE7YDtcbmNvbnN0IFJFTFUgPSBgcmV0dXJuIHNlbGVjdChhLCAwLjAsIGEgPCAwLjApO2A7XG5jb25zdCBSRUxVNiA9ICdyZXR1cm4gY2xhbXAoYSwgMC4wLCA2LjApOyc7XG5jb25zdCBSRUxVNl9WRUM0ID1cbiAgICAncmV0dXJuIGNsYW1wKGEsIHZlYzQ8ZjMyPigwLjAsIDAuMCwgMC4wLCAwLjApLCB2ZWM0PGYzMj4oNi4wLCA2LjAsIDYuMCwgNi4wKSk7JztcbmNvbnN0IFJFTFVfVkVDNCA9IGBcbiAgcmV0dXJuIHNlbGVjdChhLCB2ZWM0PGYzMj4oMC4wKSwgYSA8IHZlYzQ8ZjMyPigwLjApKTtcbmA7XG5jb25zdCBST1VORCA9IGByZXR1cm4gcm91bmQoYSk7YDtcbmNvbnN0IFJTUVJUID0gYHJldHVybiBpbnZlcnNlU3FydChhKTtgO1xuLy8gU3RhYmxlIGFuZCBBdHRyYWN0aW5nIEZpeGVkIFBvaW50ICgwLCAxKSBmb3IgTm9ybWFsaXplZCBXZWlnaHRzLlxuLy8gU2VlOiBodHRwczovL2FyeGl2Lm9yZy9hYnMvMTcwNi4wMjUxNVxuY29uc3QgU0VMVSA9IGBcbiAgaWYgKGEgPj0gMC4wKSB7XG4gICAgcmV0dXJuICR7YmFja2VuZF91dGlsLlNFTFVfU0NBTEV9ICogYTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gJHtiYWNrZW5kX3V0aWwuU0VMVV9TQ0FMRUFMUEhBfSAqIChleHAoYSkgLSAxLjApO1xuICB9XG5gO1xuY29uc3QgU0lHTU9JRCA9IGByZXR1cm4gMS4wIC8gKDEuMCArIGV4cCgtMS4wICogYSkpO2A7XG5jb25zdCBTSUdOID0gYHJldHVybiBzaWduKGEpO2A7XG5jb25zdCBTSU4gPSBgcmV0dXJuIHNpbihhKTtgO1xuY29uc3QgU0lOSCA9IGBcbiAgbGV0IGUyeCA9IGV4cChhKTtcbiAgcmV0dXJuIChlMnggLSAxLjAgLyBlMngpIC8gMi4wO1xuYDtcbmNvbnN0IFNPRlRQTFVTID0gYFxuICBsZXQgZXBzaWxvbiA9IDEuMTkyMDkyODk1NTA3ODEyNWUtNztcbiAgbGV0IHRocmVzaG9sZCA9IGxvZyhlcHNpbG9uKSArIDIuMDtcblxuICBsZXQgdG9vX2xhcmdlID0gYSA+IC10aHJlc2hvbGQ7XG4gIGxldCB0b29fc21hbGwgPSBhIDwgdGhyZXNob2xkO1xuICBsZXQgZXhwX2EgPSBleHAoYSk7XG5cbiAgaWYgKHRvb19sYXJnZSkge1xuICAgIHJldHVybiBhO1xuICB9IGVsc2UgaWYgKHRvb19zbWFsbCkge1xuICAgIHJldHVybiBleHBfYTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbG9nKGV4cF9hICsgMS4wKTtcbiAgfVxuYDtcbmNvbnN0IFNRUlQgPSBgcmV0dXJuIHNxcnQoYSk7YDtcbmNvbnN0IFNRVUFSRSA9IGByZXR1cm4gYSAqIGE7YDtcbmNvbnN0IFNURVAgPSBgXG4gIGlmIChpc25hbihhKSkge1xuICAgIHJldHVybiBhO1xuICB9XG5cbiAgcmV0dXJuIHNlbGVjdCh1bmlmb3Jtcy5zdGVwQWxwaGEsIDEuMCwgYSA+IDAuMCk7XG5gO1xuY29uc3QgVEFOID0gYHJldHVybiB0YW4oYSk7YDtcbmNvbnN0IFRBTkggPSBgXG4gIGxldCBlMnggPSBleHAoLTIuMCAqIGFicyhhKSk7XG4gIHJldHVybiBzaWduKGEpICogKDEuMCAtIGUyeCkgLyAoMS4wICsgZTJ4KTtcbmA7XG5jb25zdCBUT19JTlQgPSBgcmV0dXJuIGYzMihpMzIoKGEpKSk7YDtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldFVuYXJ5T3BTdHJpbmcodHlwZTogVW5hcnlPcFR5cGUsIHVzZVZlYzQ/OiBib29sZWFuKTogc3RyaW5nIHtcbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSBVbmFyeU9wVHlwZS5BQlM6XG4gICAgICByZXR1cm4gQUJTO1xuICAgIGNhc2UgVW5hcnlPcFR5cGUuQUNPUzpcbiAgICAgIHJldHVybiBBQ09TO1xuICAgIGNhc2UgVW5hcnlPcFR5cGUuQUNPU0g6XG4gICAgICByZXR1cm4gQUNPU0g7XG4gICAgY2FzZSBVbmFyeU9wVHlwZS5BU0lOOlxuICAgICAgcmV0dXJuIEFTSU47XG4gICAgY2FzZSBVbmFyeU9wVHlwZS5BU0lOSDpcbiAgICAgIHJldHVybiBBU0lOSDtcbiAgICBjYXNlIFVuYXJ5T3BUeXBlLkFUQU46XG4gICAgICByZXR1cm4gQVRBTjtcbiAgICBjYXNlIFVuYXJ5T3BUeXBlLkFUQU5IOlxuICAgICAgcmV0dXJuIEFUQU5IO1xuICAgIGNhc2UgVW5hcnlPcFR5cGUuQ09TOlxuICAgICAgcmV0dXJuIENPUztcbiAgICBjYXNlIFVuYXJ5T3BUeXBlLkNPU0g6XG4gICAgICByZXR1cm4gQ09TSDtcbiAgICBjYXNlIFVuYXJ5T3BUeXBlLkNFSUw6XG4gICAgICByZXR1cm4gQ0VJTDtcbiAgICBjYXNlIFVuYXJ5T3BUeXBlLkVMVTpcbiAgICAgIHJldHVybiB1c2VWZWM0ID8gRUxVX1ZFQzQgOiBFTFU7XG4gICAgY2FzZSBVbmFyeU9wVHlwZS5FUkY6XG4gICAgICByZXR1cm4gRVJGO1xuICAgIGNhc2UgVW5hcnlPcFR5cGUuRVhQOlxuICAgICAgcmV0dXJuIEVYUDtcbiAgICBjYXNlIFVuYXJ5T3BUeXBlLkVYUE0xOlxuICAgICAgcmV0dXJuIEVYUE0xO1xuICAgIGNhc2UgVW5hcnlPcFR5cGUuRkxPT1I6XG4gICAgICByZXR1cm4gRkxPT1I7XG4gICAgY2FzZSBVbmFyeU9wVHlwZS5JU19GSU5JVEU6XG4gICAgICByZXR1cm4gSVNfRklOSVRFO1xuICAgIGNhc2UgVW5hcnlPcFR5cGUuSVNfSU5GOlxuICAgICAgcmV0dXJuIElTX0lORjtcbiAgICBjYXNlIFVuYXJ5T3BUeXBlLklTX05BTjpcbiAgICAgIHJldHVybiBJU19OQU47XG4gICAgY2FzZSBVbmFyeU9wVHlwZS5MSU5FQVI6XG4gICAgICByZXR1cm4gTElORUFSO1xuICAgIGNhc2UgVW5hcnlPcFR5cGUuTE9HOlxuICAgICAgcmV0dXJuIExPRztcbiAgICBjYXNlIFVuYXJ5T3BUeXBlLkxPRzFQOlxuICAgICAgcmV0dXJuIExPRzFQO1xuICAgIGNhc2UgVW5hcnlPcFR5cGUuTE9HSUNBTF9OT1Q6XG4gICAgICByZXR1cm4gTE9HSUNBTF9OT1Q7XG4gICAgY2FzZSBVbmFyeU9wVHlwZS5ORUc6XG4gICAgICByZXR1cm4gTkVHO1xuICAgIGNhc2UgVW5hcnlPcFR5cGUuTEVBS1lSRUxVOlxuICAgICAgcmV0dXJuIHVzZVZlYzQgPyBMRUFLWVJFTFVfVkVDNCA6IExFQUtZUkVMVTtcbiAgICBjYXNlIFVuYXJ5T3BUeXBlLlJFQ0lQUk9DQUw6XG4gICAgICByZXR1cm4gUkVDSVBST0NBTDtcbiAgICBjYXNlIFVuYXJ5T3BUeXBlLlJFTFU6XG4gICAgICByZXR1cm4gdXNlVmVjNCA/IFJFTFVfVkVDNCA6IFJFTFU7XG4gICAgY2FzZSBVbmFyeU9wVHlwZS5SRUxVNjpcbiAgICAgIHJldHVybiB1c2VWZWM0ID8gUkVMVTZfVkVDNCA6IFJFTFU2O1xuICAgIGNhc2UgVW5hcnlPcFR5cGUuUk9VTkQ6XG4gICAgICByZXR1cm4gUk9VTkQ7XG4gICAgY2FzZSBVbmFyeU9wVHlwZS5SU1FSVDpcbiAgICAgIHJldHVybiBSU1FSVDtcbiAgICBjYXNlIFVuYXJ5T3BUeXBlLlNFTFU6XG4gICAgICByZXR1cm4gU0VMVTtcbiAgICBjYXNlIFVuYXJ5T3BUeXBlLlNJR01PSUQ6XG4gICAgICByZXR1cm4gU0lHTU9JRDtcbiAgICBjYXNlIFVuYXJ5T3BUeXBlLlNJR046XG4gICAgICByZXR1cm4gU0lHTjtcbiAgICBjYXNlIFVuYXJ5T3BUeXBlLlNJTjpcbiAgICAgIHJldHVybiBTSU47XG4gICAgY2FzZSBVbmFyeU9wVHlwZS5TSU5IOlxuICAgICAgcmV0dXJuIFNJTkg7XG4gICAgY2FzZSBVbmFyeU9wVHlwZS5TT0ZUUExVUzpcbiAgICAgIHJldHVybiBTT0ZUUExVUztcbiAgICBjYXNlIFVuYXJ5T3BUeXBlLlNRUlQ6XG4gICAgICByZXR1cm4gU1FSVDtcbiAgICBjYXNlIFVuYXJ5T3BUeXBlLlNRVUFSRTpcbiAgICAgIHJldHVybiBTUVVBUkU7XG4gICAgY2FzZSBVbmFyeU9wVHlwZS5TVEVQOlxuICAgICAgcmV0dXJuIFNURVA7XG4gICAgY2FzZSBVbmFyeU9wVHlwZS5UQU46XG4gICAgICByZXR1cm4gVEFOO1xuICAgIGNhc2UgVW5hcnlPcFR5cGUuVEFOSDpcbiAgICAgIHJldHVybiBUQU5IO1xuICAgIGNhc2UgVW5hcnlPcFR5cGUuVE9fSU5UOlxuICAgICAgcmV0dXJuIFRPX0lOVDtcblxuICAgIGRlZmF1bHQ6XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEJpbmFyeVR5cGUgJHt0eXBlfSBpcyBub3QgaW1wbGVtZW50ZWQhYCk7XG4gIH1cbn1cbiJdfQ==","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { BinaryOpType, getBinaryOpString } from './binary_op_util';\nimport { getUnaryOpString, UnaryOpType } from './unary_op_util';\nimport { typeSnippet } from './webgpu_program';\nexport function activationFnSnippet(activation, hasPreluActivationWeights = false, packed = false, coordsLength = 3) {\n    if (activation === null) {\n        return '';\n    }\n    let activationOpSnippet = '';\n    if (activation === 'linear') {\n        activationOpSnippet = getUnaryOpString(UnaryOpType.LINEAR);\n    }\n    else if (activation === 'relu') {\n        activationOpSnippet = getUnaryOpString(UnaryOpType.RELU, packed);\n    }\n    else if (activation === 'elu') {\n        activationOpSnippet = getUnaryOpString(UnaryOpType.ELU, packed);\n    }\n    else if (activation === 'relu6') {\n        activationOpSnippet = getUnaryOpString(UnaryOpType.RELU6, packed);\n    }\n    else if (activation === 'prelu') {\n        activationOpSnippet = getBinaryOpString(BinaryOpType.PRELU, packed);\n    }\n    else if (activation === 'sigmoid') {\n        activationOpSnippet = getUnaryOpString(UnaryOpType.SIGMOID, packed);\n    }\n    else if (activation === 'leakyrelu') {\n        activationOpSnippet = getUnaryOpString(UnaryOpType.LEAKYRELU, packed);\n    }\n    else {\n        throw new Error(`Activation ${activation} has not been implemented for the WebGPU backend.`);\n    }\n    const elementSize = packed ? 4 : 1;\n    const dataType = typeSnippet(elementSize);\n    let activationFnSnippet = '';\n    if (hasPreluActivationWeights) {\n        activationFnSnippet = `\n      fn activation(a : ${dataType}, coords : vec${coordsLength}<i32>) -> ${dataType} {\n        let b = getPreluActivationWeightsByOutputCoords(coords);\n        ${activationOpSnippet}\n      }`;\n    }\n    else {\n        activationFnSnippet = `\n      fn activation(a : ${dataType}, coords : vec${coordsLength}<i32>) -> ${dataType} {\n        ${activationOpSnippet}\n      }`;\n    }\n    return activationFnSnippet;\n}\nexport function biasActivationSnippet(hasBias, activation) {\n    return `\n      ${hasBias ? 'value = value + getBiasByOutputCoords(coords);' : ''}\n      ${activation ? 'value = activation(value, coords);' : ''}\n      `;\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWN0aXZhdGlvbl91dGlsLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMvYWN0aXZhdGlvbl91dGlsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUlILE9BQU8sRUFBQyxZQUFZLEVBQUUsaUJBQWlCLEVBQUMsTUFBTSxrQkFBa0IsQ0FBQztBQUNqRSxPQUFPLEVBQUMsZ0JBQWdCLEVBQUUsV0FBVyxFQUFDLE1BQU0saUJBQWlCLENBQUM7QUFDOUQsT0FBTyxFQUFDLFdBQVcsRUFBQyxNQUFNLGtCQUFrQixDQUFDO0FBRTdDLE1BQU0sVUFBVSxtQkFBbUIsQ0FDL0IsVUFBbUMsRUFBRSx5QkFBeUIsR0FBRyxLQUFLLEVBQ3RFLE1BQU0sR0FBRyxLQUFLLEVBQUUsWUFBWSxHQUFHLENBQUM7SUFDbEMsSUFBSSxVQUFVLEtBQUssSUFBSSxFQUFFO1FBQ3ZCLE9BQU8sRUFBRSxDQUFDO0tBQ1g7SUFFRCxJQUFJLG1CQUFtQixHQUFHLEVBQUUsQ0FBQztJQUM3QixJQUFJLFVBQVUsS0FBSyxRQUFRLEVBQUU7UUFDM0IsbUJBQW1CLEdBQUcsZ0JBQWdCLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0tBQzVEO1NBQU0sSUFBSSxVQUFVLEtBQUssTUFBTSxFQUFFO1FBQ2hDLG1CQUFtQixHQUFHLGdCQUFnQixDQUFDLFdBQVcsQ0FBQyxJQUFJLEVBQUUsTUFBTSxDQUFDLENBQUM7S0FDbEU7U0FBTSxJQUFJLFVBQVUsS0FBSyxLQUFLLEVBQUU7UUFDL0IsbUJBQW1CLEdBQUcsZ0JBQWdCLENBQUMsV0FBVyxDQUFDLEdBQUcsRUFBRSxNQUFNLENBQUMsQ0FBQztLQUNqRTtTQUFNLElBQUksVUFBVSxLQUFLLE9BQU8sRUFBRTtRQUNqQyxtQkFBbUIsR0FBRyxnQkFBZ0IsQ0FBQyxXQUFXLENBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxDQUFDO0tBQ25FO1NBQU0sSUFBSSxVQUFVLEtBQUssT0FBTyxFQUFFO1FBQ2pDLG1CQUFtQixHQUFHLGlCQUFpQixDQUFDLFlBQVksQ0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLENBQUM7S0FDckU7U0FBTSxJQUFJLFVBQVUsS0FBSyxTQUFTLEVBQUU7UUFDbkMsbUJBQW1CLEdBQUcsZ0JBQWdCLENBQUMsV0FBVyxDQUFDLE9BQU8sRUFBRSxNQUFNLENBQUMsQ0FBQztLQUNyRTtTQUFNLElBQUksVUFBVSxLQUFLLFdBQVcsRUFBRTtRQUNyQyxtQkFBbUIsR0FBRyxnQkFBZ0IsQ0FBQyxXQUFXLENBQUMsU0FBUyxFQUFFLE1BQU0sQ0FBQyxDQUFDO0tBQ3ZFO1NBQU07UUFDTCxNQUFNLElBQUksS0FBSyxDQUFDLGNBQ1osVUFBVSxtREFBbUQsQ0FBQyxDQUFDO0tBQ3BFO0lBQ0QsTUFBTSxXQUFXLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNuQyxNQUFNLFFBQVEsR0FBRyxXQUFXLENBQUMsV0FBVyxDQUFDLENBQUM7SUFDMUMsSUFBSSxtQkFBbUIsR0FBRyxFQUFFLENBQUM7SUFDN0IsSUFBSSx5QkFBeUIsRUFBRTtRQUM3QixtQkFBbUIsR0FBRzswQkFDQSxRQUFRLGlCQUFpQixZQUFZLGFBQ3ZELFFBQVE7O1VBRU4sbUJBQW1CO1FBQ3JCLENBQUM7S0FDTjtTQUFNO1FBQ0wsbUJBQW1CLEdBQUc7MEJBQ0EsUUFBUSxpQkFBaUIsWUFBWSxhQUN2RCxRQUFRO1VBQ04sbUJBQW1CO1FBQ3JCLENBQUM7S0FDTjtJQUNELE9BQU8sbUJBQW1CLENBQUM7QUFDN0IsQ0FBQztBQUVELE1BQU0sVUFBVSxxQkFBcUIsQ0FDakMsT0FBZ0IsRUFBRSxVQUFtQztJQUN2RCxPQUFPO1FBQ0QsT0FBTyxDQUFDLENBQUMsQ0FBQyxnREFBZ0QsQ0FBQyxDQUFDLENBQUMsRUFBRTtRQUMvRCxVQUFVLENBQUMsQ0FBQyxDQUFDLG9DQUFvQyxDQUFDLENBQUMsQ0FBQyxFQUFFO09BQ3ZELENBQUM7QUFDUixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge2JhY2tlbmRfdXRpbH0gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcblxuaW1wb3J0IHtCaW5hcnlPcFR5cGUsIGdldEJpbmFyeU9wU3RyaW5nfSBmcm9tICcuL2JpbmFyeV9vcF91dGlsJztcbmltcG9ydCB7Z2V0VW5hcnlPcFN0cmluZywgVW5hcnlPcFR5cGV9IGZyb20gJy4vdW5hcnlfb3BfdXRpbCc7XG5pbXBvcnQge3R5cGVTbmlwcGV0fSBmcm9tICcuL3dlYmdwdV9wcm9ncmFtJztcblxuZXhwb3J0IGZ1bmN0aW9uIGFjdGl2YXRpb25GblNuaXBwZXQoXG4gICAgYWN0aXZhdGlvbjogYmFja2VuZF91dGlsLkFjdGl2YXRpb24sIGhhc1ByZWx1QWN0aXZhdGlvbldlaWdodHMgPSBmYWxzZSxcbiAgICBwYWNrZWQgPSBmYWxzZSwgY29vcmRzTGVuZ3RoID0gMyk6IHN0cmluZyB7XG4gIGlmIChhY3RpdmF0aW9uID09PSBudWxsKSB7XG4gICAgcmV0dXJuICcnO1xuICB9XG5cbiAgbGV0IGFjdGl2YXRpb25PcFNuaXBwZXQgPSAnJztcbiAgaWYgKGFjdGl2YXRpb24gPT09ICdsaW5lYXInKSB7XG4gICAgYWN0aXZhdGlvbk9wU25pcHBldCA9IGdldFVuYXJ5T3BTdHJpbmcoVW5hcnlPcFR5cGUuTElORUFSKTtcbiAgfSBlbHNlIGlmIChhY3RpdmF0aW9uID09PSAncmVsdScpIHtcbiAgICBhY3RpdmF0aW9uT3BTbmlwcGV0ID0gZ2V0VW5hcnlPcFN0cmluZyhVbmFyeU9wVHlwZS5SRUxVLCBwYWNrZWQpO1xuICB9IGVsc2UgaWYgKGFjdGl2YXRpb24gPT09ICdlbHUnKSB7XG4gICAgYWN0aXZhdGlvbk9wU25pcHBldCA9IGdldFVuYXJ5T3BTdHJpbmcoVW5hcnlPcFR5cGUuRUxVLCBwYWNrZWQpO1xuICB9IGVsc2UgaWYgKGFjdGl2YXRpb24gPT09ICdyZWx1NicpIHtcbiAgICBhY3RpdmF0aW9uT3BTbmlwcGV0ID0gZ2V0VW5hcnlPcFN0cmluZyhVbmFyeU9wVHlwZS5SRUxVNiwgcGFja2VkKTtcbiAgfSBlbHNlIGlmIChhY3RpdmF0aW9uID09PSAncHJlbHUnKSB7XG4gICAgYWN0aXZhdGlvbk9wU25pcHBldCA9IGdldEJpbmFyeU9wU3RyaW5nKEJpbmFyeU9wVHlwZS5QUkVMVSwgcGFja2VkKTtcbiAgfSBlbHNlIGlmIChhY3RpdmF0aW9uID09PSAnc2lnbW9pZCcpIHtcbiAgICBhY3RpdmF0aW9uT3BTbmlwcGV0ID0gZ2V0VW5hcnlPcFN0cmluZyhVbmFyeU9wVHlwZS5TSUdNT0lELCBwYWNrZWQpO1xuICB9IGVsc2UgaWYgKGFjdGl2YXRpb24gPT09ICdsZWFreXJlbHUnKSB7XG4gICAgYWN0aXZhdGlvbk9wU25pcHBldCA9IGdldFVuYXJ5T3BTdHJpbmcoVW5hcnlPcFR5cGUuTEVBS1lSRUxVLCBwYWNrZWQpO1xuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBFcnJvcihgQWN0aXZhdGlvbiAke1xuICAgICAgICBhY3RpdmF0aW9ufSBoYXMgbm90IGJlZW4gaW1wbGVtZW50ZWQgZm9yIHRoZSBXZWJHUFUgYmFja2VuZC5gKTtcbiAgfVxuICBjb25zdCBlbGVtZW50U2l6ZSA9IHBhY2tlZCA/IDQgOiAxO1xuICBjb25zdCBkYXRhVHlwZSA9IHR5cGVTbmlwcGV0KGVsZW1lbnRTaXplKTtcbiAgbGV0IGFjdGl2YXRpb25GblNuaXBwZXQgPSAnJztcbiAgaWYgKGhhc1ByZWx1QWN0aXZhdGlvbldlaWdodHMpIHtcbiAgICBhY3RpdmF0aW9uRm5TbmlwcGV0ID0gYFxuICAgICAgZm4gYWN0aXZhdGlvbihhIDogJHtkYXRhVHlwZX0sIGNvb3JkcyA6IHZlYyR7Y29vcmRzTGVuZ3RofTxpMzI+KSAtPiAke1xuICAgICAgICBkYXRhVHlwZX0ge1xuICAgICAgICBsZXQgYiA9IGdldFByZWx1QWN0aXZhdGlvbldlaWdodHNCeU91dHB1dENvb3Jkcyhjb29yZHMpO1xuICAgICAgICAke2FjdGl2YXRpb25PcFNuaXBwZXR9XG4gICAgICB9YDtcbiAgfSBlbHNlIHtcbiAgICBhY3RpdmF0aW9uRm5TbmlwcGV0ID0gYFxuICAgICAgZm4gYWN0aXZhdGlvbihhIDogJHtkYXRhVHlwZX0sIGNvb3JkcyA6IHZlYyR7Y29vcmRzTGVuZ3RofTxpMzI+KSAtPiAke1xuICAgICAgICBkYXRhVHlwZX0ge1xuICAgICAgICAke2FjdGl2YXRpb25PcFNuaXBwZXR9XG4gICAgICB9YDtcbiAgfVxuICByZXR1cm4gYWN0aXZhdGlvbkZuU25pcHBldDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGJpYXNBY3RpdmF0aW9uU25pcHBldChcbiAgICBoYXNCaWFzOiBib29sZWFuLCBhY3RpdmF0aW9uOiBiYWNrZW5kX3V0aWwuQWN0aXZhdGlvbik6IHN0cmluZyB7XG4gIHJldHVybiBgXG4gICAgICAke2hhc0JpYXMgPyAndmFsdWUgPSB2YWx1ZSArIGdldEJpYXNCeU91dHB1dENvb3Jkcyhjb29yZHMpOycgOiAnJ31cbiAgICAgICR7YWN0aXZhdGlvbiA/ICd2YWx1ZSA9IGFjdGl2YXRpb24odmFsdWUsIGNvb3Jkcyk7JyA6ICcnfVxuICAgICAgYDtcbn1cbiJdfQ==","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { util } from '@tensorflow/tfjs-core';\nimport { activationFnSnippet, biasActivationSnippet } from './activation_util';\nimport { getMainHeaderString as main, typeSnippet } from './webgpu_program';\nimport { computeDispatch, computeWorkgroupInfoForMatMul } from './webgpu_util';\nexport function matMulReadFnSource(transposeA, transposeB, fitAOuter = false, fitBOuter = false, fitInner = false, component = 1) {\n    util.assert(transposeA && component === 1 || !transposeA, () => `transposeA ${transposeA} is not compatible with component size ${component}`);\n    const sampleA = `\n      ${transposeA ? `value = getA(batch, col, row);` :\n        `value = getA(batch, row, col);`}\n\n    `;\n    const sampleB = transposeB ? `value = getB(batch, col, row);` :\n        `value = getB(batch, row, col);`;\n    return `\n  fn mm_readA(batch: i32, row: i32, col: i32) -> ${typeSnippet(component)} {\n    var value = ${typeSnippet(component)}(0.0);\n    ${fitAOuter && fitInner ?\n        sampleA :\n        `\n    ${transposeA ?\n            `if(row < uniforms.dimAOuter && col < uniforms.dimInner)` :\n            `if(row < uniforms.aShape[1] && col < uniforms.aShape[2])`}\n    {\n      ${sampleA}\n    }\n    `}\n    return value;\n  }\n\n  fn mm_readB(batch: i32, row: i32, col: i32) -> ${typeSnippet(component)} {\n    var value = ${typeSnippet(component)}(0.0);\n    ${sampleB}\n    return value;\n  }\n  `;\n}\nexport function matMulReadWriteFnSource(hasBias, activation, transposeA, transposeB, fitAOuter = false, fitBOuter = false, fitInner = false, component = 1) {\n    return `\n  ${matMulReadFnSource(transposeA, transposeB, fitAOuter, fitBOuter, fitInner, component)}\n  fn mm_write(batch: i32, row: i32, col: i32, valueIn: ${typeSnippet(component)}) {\n    ${fitAOuter && fitBOuter ?\n        '' :\n        'if (row < uniforms.dimAOuter && col < uniforms.dimBOuter)'}\n    {\n      var value = valueIn;\n      let coords = vec3<i32>(batch, row, col);\n      ${biasActivationSnippet(hasBias, activation)}\n      setOutputAtCoords(coords[0], coords[1], coords[2], value);\n    }\n  }\n  `;\n}\nconst writeDataToSubAVec4Snippet = (transpose, innerElementSize) => {\n    if (transpose) {\n        return `\n        mm_Asub[inputRow][inputCol] = mm_readA(batchA,\n          kStart + inputRow,\n          globalRowStart + inputCol * ${innerElementSize});\n        `;\n    }\n    else {\n        return `\n        mm_Asub[inputRow][inputCol] = mm_readA(batchA,\n          globalRow + innerRow,\n          kStart + inputCol * ${innerElementSize});\n        `;\n    }\n};\nconst calculateResultSnippet = (transposeA, innerElementSize, rowPerThread, tileInner) => {\n    if (transposeA) {\n        return `\n      for (var k = 0; k < ${tileInner}; k++) {\n        let BCached0 = mm_Bsub[k][tileCol];\n        let ACached0 = mm_Asub[k][localRow];\n        for (var i = 0; i < ${rowPerThread}; i++) {\n          acc[i] = fma(BCached0, vec4<f32>(ACached0[i]), acc[i]);\n        }\n      }`;\n    }\n    else {\n        let bCachedStr = '';\n        let accStr = '';\n        for (let i = 0; i < innerElementSize; i++) {\n            bCachedStr += `let BCached${i} = mm_Bsub[k * ${innerElementSize} + ${i}][tileCol];`;\n            accStr +=\n                `acc[i] = fma(BCached${i}, vec4<f32>(ACached[${i}]), acc[i]);`;\n        }\n        return `\n      for (var k = 0; k < ${tileInner / innerElementSize}; k++) {\n        ${bCachedStr}\n        for (var i = 0; i < ${rowPerThread}; i++) {\n          let ACached = mm_Asub[tileRow + i][k];\n          ${accStr}\n        }\n      }`;\n    }\n};\nexport function makeMatMulPackedVec4Source(workPerThread, workgroupSize, transposeA = false, tileInner = 32, splitK = false, splitedDimInner = 32, broadcastBatch = false) {\n    const tileAOuter = workgroupSize[1] * workPerThread[1];\n    const tileBOuter = workgroupSize[0] * workPerThread[0];\n    const tileAWidth = transposeA ? tileAOuter : tileInner;\n    const tileAHight = transposeA ? tileInner : tileAOuter;\n    const innerElementSize = tileAWidth / workgroupSize[0];\n    const rowPerThreadB = tileInner / workgroupSize[1];\n    const rowPerThread = workPerThread[1];\n    const colPerThread = workPerThread[0];\n    util.assert(((transposeA && innerElementSize === 4 && workPerThread[1] === 4) ||\n        (!transposeA && (innerElementSize === 3 || innerElementSize === 4))) &&\n        tileAWidth % workgroupSize[0] === 0 &&\n        tileInner % workgroupSize[1] === 0 && workPerThread[0] === 4, () => `If transposeA ${transposeA} is true, innerElementSize ${innerElementSize} and workPerThread[1] ${workPerThread[1]} must be 4.\n          Otherwise, innerElementSize ${innerElementSize} must be 3 or 4.\n      tileAWidth ${tileAWidth} must be divisible by workgroupSize[0]${workgroupSize[0]}. tileInner ${tileInner} must be divisible by workgroupSize[1] ${workgroupSize[1]}. colPerThread ${workPerThread[0]} must be 4.`);\n    return `\n  var<workgroup> mm_Asub : array<array<vec${innerElementSize}<f32>, ${tileAWidth / innerElementSize}>, ${tileAHight}>;\n  var<workgroup> mm_Bsub : array<array<vec4<f32>, ${tileBOuter / workPerThread[0]}>, ${tileInner}>;\n\n  ${main()} {\n    let localRow = i32(localId.y);\n    let tileRow = localRow * ${rowPerThread};\n    let tileCol = i32(localId.x);\n\n    let globalRow = i32(globalId.y) * ${rowPerThread};\n    let globalCol = i32(globalId.x) * ${colPerThread};\n    let batch = ${splitK ? '0' : 'i32(globalId.z)'};\n    let batchA = ${splitK || !broadcastBatch ? 'batch' : 'batch % uniforms.aShape[0]'};\n    let batchB = ${splitK || !broadcastBatch ? 'batch' : 'batch % uniforms.bShape[0]'};\n    let globalRowStart = i32(workgroupId.y) * ${tileAOuter};\n\n    let numTiles = ${splitK ? `${Math.ceil(splitedDimInner / tileInner)}` :\n        `(uniforms.dimInner - 1) / ${tileInner} + 1`};\n    var kStart = ${splitK ? `i32(globalId.z) * ${splitedDimInner}` : '0'};\n\n    var acc: array<vec4<f32>, ${rowPerThread}>;\n\n    // Loop over shared dimension.\n    let tileRowB = localRow * ${rowPerThreadB};\n    for (var t = 0; t < numTiles; t++) {\n        // Load one tile of A into local memory.\n        for (var innerRow = 0; innerRow < ${rowPerThread}; innerRow++) {\n            let inputRow = tileRow + innerRow;\n            let inputCol = tileCol;\n            ${writeDataToSubAVec4Snippet(transposeA, innerElementSize)}\n        }\n\n        // Load one tile of B into local memory.\n        for (var innerRow = 0; innerRow < ${rowPerThreadB}; innerRow++) {\n            let inputRow = tileRowB + innerRow;\n            let inputCol = tileCol;\n            mm_Bsub[inputRow][inputCol] = mm_readB(batchB, kStart + inputRow, globalCol);\n        }\n        kStart = kStart + ${tileInner};\n        workgroupBarrier();\n\n        // Compute acc values for a single thread.\n        ${calculateResultSnippet(transposeA, innerElementSize, rowPerThread, tileInner)}\n        workgroupBarrier();\n    }\n\n    for (var innerRow = 0; innerRow < ${rowPerThread}; innerRow++) {\n        mm_write(batch, globalRow + innerRow, globalCol, acc[innerRow]);\n    }\n  }`;\n}\nconst writeDataToSubASnippet = (transpose) => {\n    if (transpose) {\n        return `\n        mm_Asub[inputRow][inputCol] = mm_readA(batchA,\n          kStart + inputRow,\n          globalRowStart + inputCol);\n        `;\n    }\n    else {\n        return `\n        mm_Asub[inputRow][inputCol] = mm_readA(batchA,\n          globalRowStart + inputRow,\n          kStart + inputCol);\n        `;\n    }\n};\nconst readDataFromSubASnippet = (transposeA) => {\n    return transposeA ? 'let ACached = mm_Asub[k][tileRow + innerRow];' :\n        'let ACached = mm_Asub[tileRow + innerRow][k];';\n};\n// sequentialAccessByThreads means sequential data in memory is accessed by\n// threads, instead of a single thread (default behavior).\nexport function makeMatMulPackedSource(workPerThread, workgroupSize, transposeA = false, tileInner = 32, splitK = false, splitedDimInner = 32, sequentialAccessByThreads = false, broadcastBatch = false) {\n    const tileAOuter = workPerThread[1] * workgroupSize[1];\n    const tileBOuter = workPerThread[0] * workgroupSize[0];\n    const tileAWidth = transposeA ? tileAOuter : tileInner;\n    const tileAHight = transposeA ? tileInner : tileAOuter;\n    util.assert(tileAHight % workgroupSize[1] === 0 &&\n        tileAWidth % workgroupSize[0] === 0 &&\n        tileInner % workgroupSize[1] === 0, () => `tileAHight ${tileAHight} must be divisible by workgroupSize[1]${workgroupSize[1]}, tileAWidth ${tileAWidth} must be divisible by workgroupSize[0]${workgroupSize[0]}, tileInner ${tileInner} must be divisible by workgroupSize[1]${workgroupSize[1]}`);\n    const rowPerThreadA = tileAHight / workgroupSize[1];\n    const colPerThreadA = tileAWidth / workgroupSize[0];\n    const rowPerThreadB = tileInner / workgroupSize[1];\n    const rowPerThread = workPerThread[1];\n    const colPerThread = workPerThread[0];\n    const matmulSnippet = sequentialAccessByThreads ?\n        `\n      let localRow = i32(localId.y);\n      let localCol = i32(localId.x);\n      let globalRowStart = i32(workgroupId.y) * ${tileAOuter};\n      let globalColStart = i32(workgroupId.x) * ${tileBOuter};\n\n      // Loop over shared dimension.\n      for (var t = 0; t < numTiles; t++) {\n        // Load one tile of A into local memory.\n        for (var inputRow = localRow; inputRow < ${tileAHight}; inputRow = inputRow + ${workgroupSize[1]}) {\n          for (var inputCol = localCol; inputCol < ${tileAWidth}; inputCol = inputCol + ${workgroupSize[0]}) {\n            ${writeDataToSubASnippet(transposeA)}\n          }\n        }\n        // Load one tile of B into local memory.\n        for (var inputRow = localRow; inputRow < ${tileInner}; inputRow = inputRow + ${workgroupSize[1]}) {\n              for (var inputCol = localCol; inputCol < ${tileBOuter}; inputCol = inputCol + ${workgroupSize[0]}) {\n            mm_Bsub[inputRow][inputCol] = mm_readB(batchB,\n              kStart + inputRow,\n              globalColStart + inputCol);\n          }\n        }\n        kStart = kStart + ${tileInner};\n        workgroupBarrier();\n\n        // Compute acc values for a single thread.\n        var BCached : array<f32, ${colPerThread}>;\n        for (var k = 0; k < ${tileInner}; k++) {\n          for (var inner = 0; inner < ${colPerThread}; inner++) {\n            BCached[inner] = mm_Bsub[k][localCol + inner * ${workgroupSize[0]}];\n          }\n          for (var innerRow = 0; innerRow < ${rowPerThread}; innerRow++) {\n            let ACached = ${transposeA ?\n            `mm_Asub[k][localRow + innerRow * ${workgroupSize[1]}];` :\n            `mm_Asub[localRow + innerRow * ${workgroupSize[1]}][k];`}\n            for (var innerCol = 0; innerCol < ${colPerThread}; innerCol++) {\n              acc[innerRow][innerCol] =\n                  fma(ACached, BCached[innerCol], acc[innerRow][innerCol]);\n            }\n          }\n        }\n        workgroupBarrier();\n      }\n      for (var innerRow = 0; innerRow < ${rowPerThread}; innerRow++) {\n        let gRow = globalRowStart + localRow + innerRow * ${workgroupSize[1]};\n        for (var innerCol = 0; innerCol < ${colPerThread}; innerCol++) {\n          let gCol = globalColStart + localCol + innerCol * ${workgroupSize[0]};\n          mm_write(batch, gRow, gCol, acc[innerRow][innerCol]);\n        }\n      }\n      ` :\n        `\n  let tileRow = i32(localId.y) * ${rowPerThread};\n  let tileCol = i32(localId.x) * ${colPerThread};\n\n  let globalRow = i32(globalId.y) * ${rowPerThread};\n  let globalCol = i32(globalId.x) * ${colPerThread};\n  let globalRowStart = i32(workgroupId.y) * ${tileAOuter};\n\n  let tileRowA = i32(localId.y) * ${rowPerThreadA};\n  let tileColA = i32(localId.x) * ${colPerThreadA};\n  let tileRowB = i32(localId.y) * ${rowPerThreadB};\n  // Loop over shared dimension.\n  for (var t = 0; t < numTiles; t++) {\n    // Load one tile of A into local memory.\n    for (var innerRow = 0; innerRow < ${rowPerThreadA}; innerRow++) {\n      for (var innerCol = 0; innerCol < ${colPerThreadA}; innerCol++) {\n        let inputRow = tileRowA + innerRow;\n        let inputCol = tileColA + innerCol;\n        ${writeDataToSubASnippet(transposeA)}\n      }\n    }\n\n    // Load one tile of B into local memory.\n    for (var innerRow = 0; innerRow < ${rowPerThreadB}; innerRow++) {\n      for (var innerCol = 0; innerCol < ${colPerThread}; innerCol++) {\n        let inputRow = tileRowB + innerRow;\n        let inputCol = tileCol + innerCol;\n        mm_Bsub[inputRow][inputCol] = mm_readB(batchB,\n          kStart + inputRow,\n          globalCol + innerCol);\n      }\n    }\n    kStart = kStart + ${tileInner};\n    workgroupBarrier();\n\n    // Compute acc values for a single thread.\n    var BCached : array<f32, ${colPerThread}>;\n    for (var k = 0; k < ${tileInner}; k++) {\n      for (var inner = 0; inner < ${colPerThread}; inner++) {\n        BCached[inner] = mm_Bsub[k][tileCol + inner];\n      }\n\n      for (var innerRow = 0; innerRow < ${rowPerThread}; innerRow++) {\n        ${readDataFromSubASnippet(transposeA)}\n        for (var innerCol = 0; innerCol < ${colPerThread}; innerCol++) {\n          acc[innerRow][innerCol] =\n              fma(ACached, BCached[innerCol], acc[innerRow][innerCol]);\n        }\n      }\n    }\n\n    workgroupBarrier();\n  }\n\n  for (var innerRow = 0; innerRow < ${rowPerThread}; innerRow++) {\n    for (var innerCol = 0; innerCol < ${colPerThread}; innerCol++) {\n      mm_write(batch, globalRow + innerRow, globalCol + innerCol,\n          acc[innerRow][innerCol]);\n    }\n  }\n  `;\n    return `\n    var<workgroup> mm_Asub : array<array<f32, ${tileAWidth}>, ${tileAHight}>;\n    var<workgroup> mm_Bsub : array<array<f32, ${tileBOuter}>, ${tileInner}>;\n\n    ${main()} {\n      let batch = ${splitK ? '0' : 'i32(globalId.z)'};\n      let batchA = ${splitK || !broadcastBatch ? 'batch' : 'batch % uniforms.aShape[0]'};\n      let batchB = ${splitK || !broadcastBatch ? 'batch' : 'batch % uniforms.bShape[0]'};\n      let numTiles = ${splitK ? `${Math.ceil(splitedDimInner / tileInner)}` :\n        `(uniforms.dimInner - 1) / ${tileInner} + 1`};\n      var kStart = ${splitK ? `i32(globalId.z) * ${splitedDimInner}` : '0'};\n\n      var acc : array<array<f32, ${colPerThread}>, ${rowPerThread}>;\n\n      // Without this initialization strange values show up in acc.\n      for (var innerRow = 0; innerRow < ${rowPerThread}; innerRow++) {\n        for (var innerCol = 0; innerCol < ${colPerThread}; innerCol++) {\n          acc[innerRow][innerCol] = 0.0;\n        }\n      }\n      ${matmulSnippet}\n    }\n  `;\n}\nconst readVectorASnippet = (transpose) => {\n    return transpose ? `\n      mm_readA(batchA, colA, globalRow),\n      mm_readA(batchA, colA + 1, globalRow),\n      mm_readA(batchA, colA + 2, globalRow),\n      mm_readA(batchA, colA + 3, globalRow)\n  ` :\n        `\n      mm_readA(batchA, globalRow, colA),\n      mm_readA(batchA, globalRow, colA + 1),\n      mm_readA(batchA, globalRow, colA + 2),\n      mm_readA(batchA, globalRow, colA + 3)\n  `;\n};\nexport function makeVectorMatrixProductSource(workgroupSize, transposeA = false) {\n    util.assert(workgroupSize[1] === 1 && workgroupSize[2] === 1, () => `A linear work group size is required. But got ${workgroupSize}.`);\n    const tileSize = workgroupSize[0] * 4;\n    return `\n    var<workgroup> mm_Asub : array<vec4<f32>, ${workgroupSize[0]}>;\n\n    ${main()} {\n      let tileCol = i32(localId.x);\n      let globalCol = i32(globalId.x);\n      let globalRow = i32(globalId.y);\n\n      let numTiles = (uniforms.dimInner - 1) / ${tileSize} + 1;\n      let batch = i32(globalId.z);\n      let batchA = batch % uniforms.aShape[0];\n      let batchB = batch % uniforms.bShape[0];\n      // Without this initialization strange values show up in acc.\n      var acc = 0.0;\n\n      // Loop over shared dimension.\n      for (var t = 0; t < numTiles; t++) {\n        // Load one tile of A into local memory.\n        let colA = t * ${tileSize} + tileCol * 4;\n        mm_Asub[tileCol] = vec4<f32>(${readVectorASnippet(transposeA)});\n        workgroupBarrier();\n\n        // Compute acc values for a single thread.\n        for (var k = 0; k < ${tileSize / 4}; k++) {\n          let rowB = t * ${tileSize} + k * 4;\n          let BCached = vec4<f32>(mm_readB(batchB, rowB, globalCol),\n                              mm_readB(batchB, rowB + 1, globalCol),\n                              mm_readB(batchB, rowB + 2, globalCol),\n                              mm_readB(batchB, rowB + 3, globalCol));\n\n          let ACached = mm_Asub[k];\n          acc = acc + dot(ACached, BCached);\n        }\n\n        workgroupBarrier();\n      }\n\n      mm_write(batch, globalRow, globalCol, acc);\n    }\n  `;\n}\nexport class MatMulPackedProgram {\n    constructor(aShape, outputShape, transposeA = false, transposeB = false, bias = null, activation = null, preluActivationWeights = null, sequentialAccessByThreads = false) {\n        this.variableNames = ['A', 'B'];\n        this.uniforms = `dimAOuter : i32, dimBOuter : i32, dimInner : i32,`;\n        this.outputShape = outputShape;\n        this.dispatchLayout = { x: [2], y: [1], z: [0] };\n        const dimInner = transposeA ? aShape[1] : aShape[2];\n        this.isVec4 = ((dimInner % 4 === 0 && !transposeA) ||\n            (outputShape[1] % 4 === 0 && transposeA)) &&\n            outputShape[2] % 4 === 0 && !transposeB;\n        this.outputComponent = this.isVec4 ? 4 : 1;\n        this.isVectorA = outputShape[1] === 1 && !transposeA;\n        if (!this.isVec4 && this.isVectorA) {\n            // For makeVectorMatrixProductSource\n            this.elementsPerThread = [1, 1, 1];\n            this.workgroupSize = [32, 1, 1];\n        }\n        else {\n            const workgroupInfo = computeWorkgroupInfoForMatMul(outputShape[1], dimInner, outputShape[2], transposeA);\n            this.workgroupSize = workgroupInfo.workgroupSize;\n            this.elementsPerThread = workgroupInfo.elementsPerThread;\n        }\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize, this.elementsPerThread);\n        const addBias = bias != null;\n        const hasPreluActivationWeights = preluActivationWeights != null;\n        if (addBias) {\n            this.variableNames.push('bias');\n        }\n        if (hasPreluActivationWeights) {\n            this.variableNames.push('preluActivationWeights');\n        }\n        this.sequentialAccessByThreads = sequentialAccessByThreads;\n        this.transposeA = transposeA;\n        this.transposeB = transposeB;\n        this.addBias = addBias;\n        this.activation = activation;\n        this.hasPreluActivationWeights = hasPreluActivationWeights;\n        [this.fitAOuter, this.fitBOuter, this.fitInner] =\n            this.getShapeFit(outputShape[1], outputShape[2], dimInner);\n        this.shaderKey = `matMulPacked_${this.elementsPerThread}_${transposeA}_${transposeB}_${this.activation}_${this.fitAOuter}_${this.fitBOuter}_${this.fitInner}_${this.isVec4}_${this.isVectorA}_${this.sequentialAccessByThreads}`;\n    }\n    getShapeFit(dimAOuter, dimBOuter, dimInner) {\n        const tileAOuter = this.workgroupSize[1] * this.elementsPerThread[1];\n        const tileBOuter = this.workgroupSize[0] * this.elementsPerThread[0];\n        if (!this.isVec4 && this.isVectorA) {\n            // For makeVectorMatrixProductSource\n            this.tileInner = this.workgroupSize[0] * 4;\n        }\n        else {\n            this.tileInner = tileBOuter;\n        }\n        const fitAOuter = dimAOuter % tileAOuter === 0;\n        const fitBOuter = dimBOuter % tileBOuter === 0;\n        const fitInner = dimInner % this.tileInner === 0;\n        return [fitAOuter, fitBOuter, fitInner];\n    }\n    getUserCode() {\n        const userCode = `\n      ${activationFnSnippet(this.activation, this.hasPreluActivationWeights, this.isVec4)}\n      ${matMulReadWriteFnSource(this.addBias, this.activation, false /* transposeA is implemented in makeMatMulPackedSource */, this.transposeB, this.fitAOuter, this.fitBOuter, this.fitInner, this.isVec4 ? 4 : 1)}\n      ${this.isVec4 ?\n            makeMatMulPackedVec4Source(this.elementsPerThread, this.workgroupSize, this.transposeA, this.tileInner, false, null, true) :\n            (this.isVectorA ? makeVectorMatrixProductSource(this.workgroupSize, this.transposeA) :\n                makeMatMulPackedSource(this.elementsPerThread, this.workgroupSize, this.transposeA, this.tileInner, false, null, this.sequentialAccessByThreads, true))}\n    `;\n        return userCode;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWF0bXVsX3BhY2tlZF93ZWJncHUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9tYXRtdWxfcGFja2VkX3dlYmdwdS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQTJCLElBQUksRUFBQyxNQUFNLHVCQUF1QixDQUFDO0FBRXJFLE9BQU8sRUFBQyxtQkFBbUIsRUFBRSxxQkFBcUIsRUFBQyxNQUFNLG1CQUFtQixDQUFDO0FBQzdFLE9BQU8sRUFBQyxtQkFBbUIsSUFBSSxJQUFJLEVBQUUsV0FBVyxFQUFnQixNQUFNLGtCQUFrQixDQUFDO0FBQ3pGLE9BQU8sRUFBQyxlQUFlLEVBQUUsNkJBQTZCLEVBQUMsTUFBTSxlQUFlLENBQUM7QUFFN0UsTUFBTSxVQUFVLGtCQUFrQixDQUM5QixVQUFtQixFQUFFLFVBQW1CLEVBQUUsU0FBUyxHQUFHLEtBQUssRUFDM0QsU0FBUyxHQUFHLEtBQUssRUFBRSxRQUFRLEdBQUcsS0FBSyxFQUFFLFNBQVMsR0FBRyxDQUFDO0lBQ3BELElBQUksQ0FBQyxNQUFNLENBQ1AsVUFBVSxJQUFJLFNBQVMsS0FBSyxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQzVDLEdBQUcsRUFBRSxDQUFDLGNBQWMsVUFBVSwwQ0FDMUIsU0FBUyxFQUFFLENBQUMsQ0FBQztJQUNyQixNQUFNLE9BQU8sR0FBRztRQUVaLFVBQVUsQ0FBQyxDQUFDLENBQUMsZ0NBQWdDLENBQUMsQ0FBQztRQUNsQyxnQ0FBZ0M7O0tBRTlDLENBQUM7SUFDSixNQUFNLE9BQU8sR0FBRyxVQUFVLENBQUMsQ0FBQyxDQUFDLGdDQUFnQyxDQUFDLENBQUM7UUFDbEMsZ0NBQWdDLENBQUM7SUFFOUQsT0FBTzttREFDMEMsV0FBVyxDQUFDLFNBQVMsQ0FBQztrQkFDdkQsV0FBVyxDQUFDLFNBQVMsQ0FBQztNQUVsQyxTQUFTLElBQUks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QyxTQUFTLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQ3hDLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsNkJBQTZCLENBQ3pCLElBQUksQ0FBQyxhQUFhLEVBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUM7Z0JBQzFDLHNCQUFzQixDQUNsQixJQUFJLENBQUMsaUJBQWlCLEVBQUUsSUFBSSxDQUFDLGFBQWEsRUFDMUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUMsU0FBUyxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQzVDLElBQUksQ0FBQyx5QkFBeUIsRUFBRSxJQUFJLENBQUMsQ0FBQztLQUNuRSxDQUFDO1FBQ0YsT0FBTyxRQUFRLENBQUM7SUFDbEIsQ0FBQztDQUNGIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge2JhY2tlbmRfdXRpbCwgVGVuc29ySW5mbywgdXRpbH0gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcblxuaW1wb3J0IHthY3RpdmF0aW9uRm5TbmlwcGV0LCBiaWFzQWN0aXZhdGlvblNuaXBwZXR9IGZyb20gJy4vYWN0aXZhdGlvbl91dGlsJztcbmltcG9ydCB7Z2V0TWFpbkhlYWRlclN0cmluZyBhcyBtYWluLCB0eXBlU25pcHBldCwgV2ViR1BVUHJvZ3JhbX0gZnJvbSAnLi93ZWJncHVfcHJvZ3JhbSc7XG5pbXBvcnQge2NvbXB1dGVEaXNwYXRjaCwgY29tcHV0ZVdvcmtncm91cEluZm9Gb3JNYXRNdWx9IGZyb20gJy4vd2ViZ3B1X3V0aWwnO1xuXG5leHBvcnQgZnVuY3Rpb24gbWF0TXVsUmVhZEZuU291cmNlKFxuICAgIHRyYW5zcG9zZUE6IGJvb2xlYW4sIHRyYW5zcG9zZUI6IGJvb2xlYW4sIGZpdEFPdXRlciA9IGZhbHNlLFxuICAgIGZpdEJPdXRlciA9IGZhbHNlLCBmaXRJbm5lciA9IGZhbHNlLCBjb21wb25lbnQgPSAxKSB7XG4gIHV0aWwuYXNzZXJ0KFxuICAgICAgdHJhbnNwb3NlQSAmJiBjb21wb25lbnQgPT09IDEgfHwgIXRyYW5zcG9zZUEsXG4gICAgICAoKSA9PiBgdHJhbnNwb3NlQSAke3RyYW5zcG9zZUF9IGlzIG5vdCBjb21wYXRpYmxlIHdpdGggY29tcG9uZW50IHNpemUgJHtcbiAgICAgICAgICBjb21wb25lbnR9YCk7XG4gIGNvbnN0IHNhbXBsZUEgPSBgXG4gICAgICAke1xuICAgICAgdHJhbnNwb3NlQSA/IGB2YWx1ZSA9IGdldEEoYmF0Y2gsIGNvbCwgcm93KTtgIDpcbiAgICAgICAgICAgICAgICAgICBgdmFsdWUgPSBnZXRBKGJhdGNoLCByb3csIGNvbCk7YH1cblxuICAgIGA7XG4gIGNvbnN0IHNhbXBsZUIgPSB0cmFuc3Bvc2VCID8gYHZhbHVlID0gZ2V0QihiYXRjaCwgY29sLCByb3cpO2AgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGB2YWx1ZSA9IGdldEIoYmF0Y2gsIHJvdywgY29sKTtgO1xuXG4gIHJldHVybiBgXG4gIGZuIG1tX3JlYWRBKGJhdGNoOiBpMzIsIHJvdzogaTMyLCBjb2w6IGkzMikgLT4gJHt0eXBlU25pcHBldChjb21wb25lbnQpfSB7XG4gICAgdmFyIHZhbHVlID0gJHt0eXBlU25pcHBldChjb21wb25lbnQpfSgwLjApO1xuICAgICR7XG4gICAgICBmaXRBT3V0ZXIgJiYgZml0SW5uZXIgP1xuICAgICAgICAgIHNhbXBsZUEgOlxuICAgICAgICAgIGBcbiAgICAke1xuICAgICAgICAgICAgICB0cmFuc3Bvc2VBID9cbiAgICAgICAgICAgICAgICAgIGBpZihyb3cgPCB1bmlmb3Jtcy5kaW1BT3V0ZXIgJiYgY29sIDwgdW5pZm9ybXMuZGltSW5uZXIpYCA6XG4gICAgICAgICAgICAgICAgICBgaWYocm93IDwgdW5pZm9ybXMuYVNoYXBlWzFdICYmIGNvbCA8IHVuaWZvcm1zLmFTaGFwZVsyXSlgfVxuICAgIHtcbiAgICAgICR7c2FtcGxlQX1cbiAgICB9XG4gICAgYH1cbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cblxuICBmbiBtbV9yZWFkQihiYXRjaDogaTMyLCByb3c6IGkzMiwgY29sOiBpMzIpIC0+ICR7dHlwZVNuaXBwZXQoY29tcG9uZW50KX0ge1xuICAgIHZhciB2YWx1ZSA9ICR7dHlwZVNuaXBwZXQoY29tcG9uZW50KX0oMC4wKTtcbiAgICAke3NhbXBsZUJ9XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIGA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtYXRNdWxSZWFkV3JpdGVGblNvdXJjZShcbiAgICBoYXNCaWFzOiBib29sZWFuLCBhY3RpdmF0aW9uOiBiYWNrZW5kX3V0aWwuQWN0aXZhdGlvbiwgdHJhbnNwb3NlQTogYm9vbGVhbixcbiAgICB0cmFuc3Bvc2VCOiBib29sZWFuLCBmaXRBT3V0ZXIgPSBmYWxzZSwgZml0Qk91dGVyID0gZmFsc2UsIGZpdElubmVyID0gZmFsc2UsXG4gICAgY29tcG9uZW50ID0gMSkge1xuICByZXR1cm4gYFxuICAke1xuICAgICAgbWF0TXVsUmVhZEZuU291cmNlKFxuICAgICAgICAgIHRyYW5zcG9zZUEsIHRyYW5zcG9zZUIsIGZpdEFPdXRlciwgZml0Qk91dGVyLCBmaXRJbm5lciwgY29tcG9uZW50KX1cbiAgZm4gbW1fd3JpdGUoYmF0Y2g6IGkzMiwgcm93OiBpMzIsIGNvbDogaTMyLCB2YWx1ZUluOiAke1xuICAgICAgdHlwZVNuaXBwZXQoY29tcG9uZW50KX0pIHtcbiAgICAke1xuICAgICAgZml0QU91dGVyICYmIGZpdEJPdXRlciA/XG4gICAgICAgICAgJycgOlxuICAgICAgICAgICdpZiAocm93IDwgdW5pZm9ybXMuZGltQU91dGVyICYmIGNvbCA8IHVuaWZvcm1zLmRpbUJPdXRlciknfVxuICAgIHtcbiAgICAgIHZhciB2YWx1ZSA9IHZhbHVlSW47XG4gICAgICBsZXQgY29vcmRzID0gdmVjMzxpMzI+KGJhdGNoLCByb3csIGNvbCk7XG4gICAgICAke2JpYXNBY3RpdmF0aW9uU25pcHBldChoYXNCaWFzLCBhY3RpdmF0aW9uKX1cbiAgICAgIHNldE91dHB1dEF0Q29vcmRzKGNvb3Jkc1swXSwgY29vcmRzWzFdLCBjb29yZHNbMl0sIHZhbHVlKTtcbiAgICB9XG4gIH1cbiAgYDtcbn1cblxuY29uc3Qgd3JpdGVEYXRhVG9TdWJBVmVjNFNuaXBwZXQgPVxuICAgICh0cmFuc3Bvc2U6IGJvb2xlYW4sIGlubmVyRWxlbWVudFNpemU6IG51bWJlcikgPT4ge1xuICAgICAgaWYgKHRyYW5zcG9zZSkge1xuICAgICAgICByZXR1cm4gYFxuICAgICAgICBtbV9Bc3ViW2lucHV0Um93XVtpbnB1dENvbF0gPSBtbV9yZWFkQShiYXRjaEEsXG4gICAgICAgICAga1N0YXJ0ICsgaW5wdXRSb3csXG4gICAgICAgICAgZ2xvYmFsUm93U3RhcnQgKyBpbnB1dENvbCAqICR7aW5uZXJFbGVtZW50U2l6ZX0pO1xuICAgICAgICBgO1xuXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gYFxuICAgICAgICBtbV9Bc3ViW2lucHV0Um93XVtpbnB1dENvbF0gPSBtbV9yZWFkQShiYXRjaEEsXG4gICAgICAgICAgZ2xvYmFsUm93ICsgaW5uZXJSb3csXG4gICAgICAgICAga1N0YXJ0ICsgaW5wdXRDb2wgKiAke2lubmVyRWxlbWVudFNpemV9KTtcbiAgICAgICAgYDtcbiAgICAgIH1cbiAgICB9O1xuXG5jb25zdCBjYWxjdWxhdGVSZXN1bHRTbmlwcGV0ID1cbiAgICAodHJhbnNwb3NlQTogYm9vbGVhbiwgaW5uZXJFbGVtZW50U2l6ZTogbnVtYmVyLCByb3dQZXJUaHJlYWQ6IG51bWJlcixcbiAgICAgdGlsZUlubmVyOiBudW1iZXIpID0+IHtcbiAgICAgIGlmICh0cmFuc3Bvc2VBKSB7XG4gICAgICAgIHJldHVybiBgXG4gICAgICBmb3IgKHZhciBrID0gMDsgayA8ICR7dGlsZUlubmVyfTsgaysrKSB7XG4gICAgICAgIGxldCBCQ2FjaGVkMCA9IG1tX0JzdWJba11bdGlsZUNvbF07XG4gICAgICAgIGxldCBBQ2FjaGVkMCA9IG1tX0FzdWJba11bbG9jYWxSb3ddO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICR7cm93UGVyVGhyZWFkfTsgaSsrKSB7XG4gICAgICAgICAgYWNjW2ldID0gZm1hKEJDYWNoZWQwLCB2ZWM0PGYzMj4oQUNhY2hlZDBbaV0pLCBhY2NbaV0pO1xuICAgICAgICB9XG4gICAgICB9YDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxldCBiQ2FjaGVkU3RyID0gJyc7XG4gICAgICAgIGxldCBhY2NTdHIgPSAnJztcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbm5lckVsZW1lbnRTaXplOyBpKyspIHtcbiAgICAgICAgICBiQ2FjaGVkU3RyICs9IGBsZXQgQkNhY2hlZCR7aX0gPSBtbV9Cc3ViW2sgKiAke2lubmVyRWxlbWVudFNpemV9ICsgJHtcbiAgICAgICAgICAgICAgaX1dW3RpbGVDb2xdO2A7XG4gICAgICAgICAgYWNjU3RyICs9XG4gICAgICAgICAgICAgIGBhY2NbaV0gPSBmbWEoQkNhY2hlZCR7aX0sIHZlYzQ8ZjMyPihBQ2FjaGVkWyR7aX1dKSwgYWNjW2ldKTtgO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBgXG4gICAgICBmb3IgKHZhciBrID0gMDsgayA8ICR7dGlsZUlubmVyIC8gaW5uZXJFbGVtZW50U2l6ZX07IGsrKykge1xuICAgICAgICAke2JDYWNoZWRTdHJ9XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJHtyb3dQZXJUaHJlYWR9OyBpKyspIHtcbiAgICAgICAgICBsZXQgQUNhY2hlZCA9IG1tX0FzdWJbdGlsZVJvdyArIGldW2tdO1xuICAgICAgICAgICR7YWNjU3RyfVxuICAgICAgICB9XG4gICAgICB9YDtcbiAgICAgIH1cbiAgICB9O1xuXG5leHBvcnQgZnVuY3Rpb24gbWFrZU1hdE11bFBhY2tlZFZlYzRTb3VyY2UoXG4gICAgd29ya1BlclRocmVhZDogbnVtYmVyW10sIHdvcmtncm91cFNpemU6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXSxcbiAgICB0cmFuc3Bvc2VBID0gZmFsc2UsIHRpbGVJbm5lciA9IDMyLCBzcGxpdEsgPSBmYWxzZSwgc3BsaXRlZERpbUlubmVyID0gMzIsXG4gICAgYnJvYWRjYXN0QmF0Y2ggPSBmYWxzZSk6IHN0cmluZyB7XG4gIGNvbnN0IHRpbGVBT3V0ZXIgPSB3b3JrZ3JvdXBTaXplWzFdICogd29ya1BlclRocmVhZFsxXTtcbiAgY29uc3QgdGlsZUJPdXRlciA9IHdvcmtncm91cFNpemVbMF0gKiB3b3JrUGVyVGhyZWFkWzBdO1xuICBjb25zdCB0aWxlQVdpZHRoID0gdHJhbnNwb3NlQSA/IHRpbGVBT3V0ZXIgOiB0aWxlSW5uZXI7XG4gIGNvbnN0IHRpbGVBSGlnaHQgPSB0cmFuc3Bvc2VBID8gdGlsZUlubmVyIDogdGlsZUFPdXRlcjtcbiAgY29uc3QgaW5uZXJFbGVtZW50U2l6ZSA9IHRpbGVBV2lkdGggLyB3b3JrZ3JvdXBTaXplWzBdO1xuICBjb25zdCByb3dQZXJUaHJlYWRCID0gdGlsZUlubmVyIC8gd29ya2dyb3VwU2l6ZVsxXTtcbiAgY29uc3Qgcm93UGVyVGhyZWFkID0gd29ya1BlclRocmVhZFsxXTtcbiAgY29uc3QgY29sUGVyVGhyZWFkID0gd29ya1BlclRocmVhZFswXTtcbiAgdXRpbC5hc3NlcnQoXG4gICAgICAoKHRyYW5zcG9zZUEgJiYgaW5uZXJFbGVtZW50U2l6ZSA9PT0gNCAmJiB3b3JrUGVyVGhyZWFkWzFdID09PSA0KSB8fFxuICAgICAgICghdHJhbnNwb3NlQSAmJiAoaW5uZXJFbGVtZW50U2l6ZSA9PT0gMyB8fCBpbm5lckVsZW1lbnRTaXplID09PSA0KSkpICYmXG4gICAgICAgICAgdGlsZUFXaWR0aCAlIHdvcmtncm91cFNpemVbMF0gPT09IDAgJiZcbiAgICAgICAgICB0aWxlSW5uZXIgJSB3b3JrZ3JvdXBTaXplWzFdID09PSAwICYmIHdvcmtQZXJUaHJlYWRbMF0gPT09IDQsXG4gICAgICAoKSA9PiBgSWYgdHJhbnNwb3NlQSAke3RyYW5zcG9zZUF9IGlzIHRydWUsIGlubmVyRWxlbWVudFNpemUgJHtcbiAgICAgICAgICBpbm5lckVsZW1lbnRTaXplfSBhbmQgd29ya1BlclRocmVhZFsxXSAke3dvcmtQZXJUaHJlYWRbMV19IG11c3QgYmUgNC5cbiAgICAgICAgICBPdGhlcndpc2UsIGlubmVyRWxlbWVudFNpemUgJHtpbm5lckVsZW1lbnRTaXplfSBtdXN0IGJlIDMgb3IgNC5cbiAgICAgIHRpbGVBV2lkdGggJHt0aWxlQVdpZHRofSBtdXN0IGJlIGRpdmlzaWJsZSBieSB3b3JrZ3JvdXBTaXplWzBdJHtcbiAgICAgICAgICB3b3JrZ3JvdXBTaXplWzBdfS4gdGlsZUlubmVyICR7XG4gICAgICAgICAgdGlsZUlubmVyfSBtdXN0IGJlIGRpdmlzaWJsZSBieSB3b3JrZ3JvdXBTaXplWzFdICR7XG4gICAgICAgICAgd29ya2dyb3VwU2l6ZVsxXX0uIGNvbFBlclRocmVhZCAke3dvcmtQZXJUaHJlYWRbMF19IG11c3QgYmUgNC5gKTtcbiAgcmV0dXJuIGBcbiAgdmFyPHdvcmtncm91cD4gbW1fQXN1YiA6IGFycmF5PGFycmF5PHZlYyR7aW5uZXJFbGVtZW50U2l6ZX08ZjMyPiwgJHtcbiAgICAgIHRpbGVBV2lkdGggLyBpbm5lckVsZW1lbnRTaXplfT4sICR7dGlsZUFIaWdodH0+O1xuICB2YXI8d29ya2dyb3VwPiBtbV9Cc3ViIDogYXJyYXk8YXJyYXk8dmVjNDxmMzI+LCAke1xuICAgICAgdGlsZUJPdXRlciAvIHdvcmtQZXJUaHJlYWRbMF19PiwgJHt0aWxlSW5uZXJ9PjtcblxuICAke21haW4oKX0ge1xuICAgIGxldCBsb2NhbFJvdyA9IGkzMihsb2NhbElkLnkpO1xuICAgIGxldCB0aWxlUm93ID0gbG9jYWxSb3cgKiAke3Jvd1BlclRocmVhZH07XG4gICAgbGV0IHRpbGVDb2wgPSBpMzIobG9jYWxJZC54KTtcblxuICAgIGxldCBnbG9iYWxSb3cgPSBpMzIoZ2xvYmFsSWQueSkgKiAke3Jvd1BlclRocmVhZH07XG4gICAgbGV0IGdsb2JhbENvbCA9IGkzMihnbG9iYWxJZC54KSAqICR7Y29sUGVyVGhyZWFkfTtcbiAgICBsZXQgYmF0Y2ggPSAke3NwbGl0SyA/ICcwJyA6ICdpMzIoZ2xvYmFsSWQueiknfTtcbiAgICBsZXQgYmF0Y2hBID0gJHtcbiAgICAgIHNwbGl0SyB8fCAhYnJvYWRjYXN0QmF0Y2ggPyAnYmF0Y2gnIDogJ2JhdGNoICUgdW5pZm9ybXMuYVNoYXBlWzBdJ307XG4gICAgbGV0IGJhdGNoQiA9ICR7XG4gICAgICBzcGxpdEsgfHwgIWJyb2FkY2FzdEJhdGNoID8gJ2JhdGNoJyA6ICdiYXRjaCAlIHVuaWZvcm1zLmJTaGFwZVswXSd9O1xuICAgIGxldCBnbG9iYWxSb3dTdGFydCA9IGkzMih3b3JrZ3JvdXBJZC55KSAqICR7dGlsZUFPdXRlcn07XG5cbiAgICBsZXQgbnVtVGlsZXMgPSAke1xuICAgICAgc3BsaXRLID8gYCR7TWF0aC5jZWlsKHNwbGl0ZWREaW1Jbm5lciAvIHRpbGVJbm5lcil9YCA6XG4gICAgICAgICAgICAgICBgKHVuaWZvcm1zLmRpbUlubmVyIC0gMSkgLyAke3RpbGVJbm5lcn0gKyAxYH07XG4gICAgdmFyIGtTdGFydCA9ICR7c3BsaXRLID8gYGkzMihnbG9iYWxJZC56KSAqICR7c3BsaXRlZERpbUlubmVyfWAgOiAnMCd9O1xuXG4gICAgdmFyIGFjYzogYXJyYXk8dmVjNDxmMzI+LCAke3Jvd1BlclRocmVhZH0+O1xuXG4gICAgLy8gTG9vcCBvdmVyIHNoYXJlZCBkaW1lbnNpb24uXG4gICAgbGV0IHRpbGVSb3dCID0gbG9jYWxSb3cgKiAke3Jvd1BlclRocmVhZEJ9O1xuICAgIGZvciAodmFyIHQgPSAwOyB0IDwgbnVtVGlsZXM7IHQrKykge1xuICAgICAgICAvLyBMb2FkIG9uZSB0aWxlIG9mIEEgaW50byBsb2NhbCBtZW1vcnkuXG4gICAgICAgIGZvciAodmFyIGlubmVyUm93ID0gMDsgaW5uZXJSb3cgPCAke3Jvd1BlclRocmVhZH07IGlubmVyUm93KyspIHtcbiAgICAgICAgICAgIGxldCBpbnB1dFJvdyA9IHRpbGVSb3cgKyBpbm5lclJvdztcbiAgICAgICAgICAgIGxldCBpbnB1dENvbCA9IHRpbGVDb2w7XG4gICAgICAgICAgICAke3dyaXRlRGF0YVRvU3ViQVZlYzRTbmlwcGV0KHRyYW5zcG9zZUEsIGlubmVyRWxlbWVudFNpemUpfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gTG9hZCBvbmUgdGlsZSBvZiBCIGludG8gbG9jYWwgbWVtb3J5LlxuICAgICAgICBmb3IgKHZhciBpbm5lclJvdyA9IDA7IGlubmVyUm93IDwgJHtyb3dQZXJUaHJlYWRCfTsgaW5uZXJSb3crKykge1xuICAgICAgICAgICAgbGV0IGlucHV0Um93ID0gdGlsZVJvd0IgKyBpbm5lclJvdztcbiAgICAgICAgICAgIGxldCBpbnB1dENvbCA9IHRpbGVDb2w7XG4gICAgICAgICAgICBtbV9Cc3ViW2lucHV0Um93XVtpbnB1dENvbF0gPSBtbV9yZWFkQihiYXRjaEIsIGtTdGFydCArIGlucHV0Um93LCBnbG9iYWxDb2wpO1xuICAgICAgICB9XG4gICAgICAgIGtTdGFydCA9IGtTdGFydCArICR7dGlsZUlubmVyfTtcbiAgICAgICAgd29ya2dyb3VwQmFycmllcigpO1xuXG4gICAgICAgIC8vIENvbXB1dGUgYWNjIHZhbHVlcyBmb3IgYSBzaW5nbGUgdGhyZWFkLlxuICAgICAgICAke1xuICAgICAgY2FsY3VsYXRlUmVzdWx0U25pcHBldChcbiAgICAgICAgICB0cmFuc3Bvc2VBLCBpbm5lckVsZW1lbnRTaXplLCByb3dQZXJUaHJlYWQsIHRpbGVJbm5lcil9XG4gICAgICAgIHdvcmtncm91cEJhcnJpZXIoKTtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBpbm5lclJvdyA9IDA7IGlubmVyUm93IDwgJHtyb3dQZXJUaHJlYWR9OyBpbm5lclJvdysrKSB7XG4gICAgICAgIG1tX3dyaXRlKGJhdGNoLCBnbG9iYWxSb3cgKyBpbm5lclJvdywgZ2xvYmFsQ29sLCBhY2NbaW5uZXJSb3ddKTtcbiAgICB9XG4gIH1gO1xufVxuXG5jb25zdCB3cml0ZURhdGFUb1N1YkFTbmlwcGV0ID0gKHRyYW5zcG9zZTogYm9vbGVhbikgPT4ge1xuICBpZiAodHJhbnNwb3NlKSB7XG4gICAgcmV0dXJuIGBcbiAgICAgICAgbW1fQXN1YltpbnB1dFJvd11baW5wdXRDb2xdID0gbW1fcmVhZEEoYmF0Y2hBLFxuICAgICAgICAgIGtTdGFydCArIGlucHV0Um93LFxuICAgICAgICAgIGdsb2JhbFJvd1N0YXJ0ICsgaW5wdXRDb2wpO1xuICAgICAgICBgO1xuXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGBcbiAgICAgICAgbW1fQXN1YltpbnB1dFJvd11baW5wdXRDb2xdID0gbW1fcmVhZEEoYmF0Y2hBLFxuICAgICAgICAgIGdsb2JhbFJvd1N0YXJ0ICsgaW5wdXRSb3csXG4gICAgICAgICAga1N0YXJ0ICsgaW5wdXRDb2wpO1xuICAgICAgICBgO1xuICB9XG59O1xuXG5jb25zdCByZWFkRGF0YUZyb21TdWJBU25pcHBldCA9ICh0cmFuc3Bvc2VBOiBib29sZWFuKSA9PiB7XG4gIHJldHVybiB0cmFuc3Bvc2VBID8gJ2xldCBBQ2FjaGVkID0gbW1fQXN1YltrXVt0aWxlUm93ICsgaW5uZXJSb3ddOycgOlxuXG4gICAgICAgICAgICAgICAgICAgICAgJ2xldCBBQ2FjaGVkID0gbW1fQXN1Ylt0aWxlUm93ICsgaW5uZXJSb3ddW2tdOyc7XG59O1xuXG4vLyBzZXF1ZW50aWFsQWNjZXNzQnlUaHJlYWRzIG1lYW5zIHNlcXVlbnRpYWwgZGF0YSBpbiBtZW1vcnkgaXMgYWNjZXNzZWQgYnlcbi8vIHRocmVhZHMsIGluc3RlYWQgb2YgYSBzaW5nbGUgdGhyZWFkIChkZWZhdWx0IGJlaGF2aW9yKS5cbmV4cG9ydCBmdW5jdGlvbiBtYWtlTWF0TXVsUGFja2VkU291cmNlKFxuICAgIHdvcmtQZXJUaHJlYWQ6IG51bWJlcltdLCB3b3JrZ3JvdXBTaXplOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl0sXG4gICAgdHJhbnNwb3NlQSA9IGZhbHNlLCB0aWxlSW5uZXIgPSAzMiwgc3BsaXRLID0gZmFsc2UsIHNwbGl0ZWREaW1Jbm5lciA9IDMyLFxuICAgIHNlcXVlbnRpYWxBY2Nlc3NCeVRocmVhZHMgPSBmYWxzZSwgYnJvYWRjYXN0QmF0Y2ggPSBmYWxzZSk6IHN0cmluZyB7XG4gIGNvbnN0IHRpbGVBT3V0ZXIgPSB3b3JrUGVyVGhyZWFkWzFdICogd29ya2dyb3VwU2l6ZVsxXTtcbiAgY29uc3QgdGlsZUJPdXRlciA9IHdvcmtQZXJUaHJlYWRbMF0gKiB3b3JrZ3JvdXBTaXplWzBdO1xuICBjb25zdCB0aWxlQVdpZHRoID0gdHJhbnNwb3NlQSA/IHRpbGVBT3V0ZXIgOiB0aWxlSW5uZXI7XG4gIGNvbnN0IHRpbGVBSGlnaHQgPSB0cmFuc3Bvc2VBID8gdGlsZUlubmVyIDogdGlsZUFPdXRlcjtcbiAgdXRpbC5hc3NlcnQoXG4gICAgICB0aWxlQUhpZ2h0ICUgd29ya2dyb3VwU2l6ZVsxXSA9PT0gMCAmJlxuICAgICAgICAgIHRpbGVBV2lkdGggJSB3b3JrZ3JvdXBTaXplWzBdID09PSAwICYmXG4gICAgICAgICAgdGlsZUlubmVyICUgd29ya2dyb3VwU2l6ZVsxXSA9PT0gMCxcbiAgICAgICgpID0+IGB0aWxlQUhpZ2h0ICR7dGlsZUFIaWdodH0gbXVzdCBiZSBkaXZpc2libGUgYnkgd29ya2dyb3VwU2l6ZVsxXSR7XG4gICAgICAgICAgd29ya2dyb3VwU2l6ZVsxXX0sIHRpbGVBV2lkdGggJHtcbiAgICAgICAgICB0aWxlQVdpZHRofSBtdXN0IGJlIGRpdmlzaWJsZSBieSB3b3JrZ3JvdXBTaXplWzBdJHtcbiAgICAgICAgICB3b3JrZ3JvdXBTaXplWzBdfSwgdGlsZUlubmVyICR7XG4gICAgICAgICAgdGlsZUlubmVyfSBtdXN0IGJlIGRpdmlzaWJsZSBieSB3b3JrZ3JvdXBTaXplWzFdJHt3b3JrZ3JvdXBTaXplWzFdfWApO1xuICBjb25zdCByb3dQZXJUaHJlYWRBID0gdGlsZUFIaWdodCAvIHdvcmtncm91cFNpemVbMV07XG4gIGNvbnN0IGNvbFBlclRocmVhZEEgPSB0aWxlQVdpZHRoIC8gd29ya2dyb3VwU2l6ZVswXTtcbiAgY29uc3Qgcm93UGVyVGhyZWFkQiA9IHRpbGVJbm5lciAvIHdvcmtncm91cFNpemVbMV07XG4gIGNvbnN0IHJvd1BlclRocmVhZCA9IHdvcmtQZXJUaHJlYWRbMV07XG4gIGNvbnN0IGNvbFBlclRocmVhZCA9IHdvcmtQZXJUaHJlYWRbMF07XG4gIGNvbnN0IG1hdG11bFNuaXBwZXQgPSBzZXF1ZW50aWFsQWNjZXNzQnlUaHJlYWRzID9cbiAgICAgIGBcbiAgICAgIGxldCBsb2NhbFJvdyA9IGkzMihsb2NhbElkLnkpO1xuICAgICAgbGV0IGxvY2FsQ29sID0gaTMyKGxvY2FsSWQueCk7XG4gICAgICBsZXQgZ2xvYmFsUm93U3RhcnQgPSBpMzIod29ya2dyb3VwSWQueSkgKiAke3RpbGVBT3V0ZXJ9O1xuICAgICAgbGV0IGdsb2JhbENvbFN0YXJ0ID0gaTMyKHdvcmtncm91cElkLngpICogJHt0aWxlQk91dGVyfTtcblxuICAgICAgLy8gTG9vcCBvdmVyIHNoYXJlZCBkaW1lbnNpb24uXG4gICAgICBmb3IgKHZhciB0ID0gMDsgdCA8IG51bVRpbGVzOyB0KyspIHtcbiAgICAgICAgLy8gTG9hZCBvbmUgdGlsZSBvZiBBIGludG8gbG9jYWwgbWVtb3J5LlxuICAgICAgICBmb3IgKHZhciBpbnB1dFJvdyA9IGxvY2FsUm93OyBpbnB1dFJvdyA8ICR7XG4gICAgICAgICAgdGlsZUFIaWdodH07IGlucHV0Um93ID0gaW5wdXRSb3cgKyAke3dvcmtncm91cFNpemVbMV19KSB7XG4gICAgICAgICAgZm9yICh2YXIgaW5wdXRDb2wgPSBsb2NhbENvbDsgaW5wdXRDb2wgPCAke1xuICAgICAgICAgIHRpbGVBV2lkdGh9OyBpbnB1dENvbCA9IGlucHV0Q29sICsgJHt3b3JrZ3JvdXBTaXplWzBdfSkge1xuICAgICAgICAgICAgJHt3cml0ZURhdGFUb1N1YkFTbmlwcGV0KHRyYW5zcG9zZUEpfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBMb2FkIG9uZSB0aWxlIG9mIEIgaW50byBsb2NhbCBtZW1vcnkuXG4gICAgICAgIGZvciAodmFyIGlucHV0Um93ID0gbG9jYWxSb3c7IGlucHV0Um93IDwgJHtcbiAgICAgICAgICB0aWxlSW5uZXJ9OyBpbnB1dFJvdyA9IGlucHV0Um93ICsgJHt3b3JrZ3JvdXBTaXplWzFdfSkge1xuICAgICAgICAgICAgICBmb3IgKHZhciBpbnB1dENvbCA9IGxvY2FsQ29sOyBpbnB1dENvbCA8ICR7XG4gICAgICAgICAgdGlsZUJPdXRlcn07IGlucHV0Q29sID0gaW5wdXRDb2wgKyAke3dvcmtncm91cFNpemVbMF19KSB7XG4gICAgICAgICAgICBtbV9Cc3ViW2lucHV0Um93XVtpbnB1dENvbF0gPSBtbV9yZWFkQihiYXRjaEIsXG4gICAgICAgICAgICAgIGtTdGFydCArIGlucHV0Um93LFxuICAgICAgICAgICAgICBnbG9iYWxDb2xTdGFydCArIGlucHV0Q29sKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAga1N0YXJ0ID0ga1N0YXJ0ICsgJHt0aWxlSW5uZXJ9O1xuICAgICAgICB3b3JrZ3JvdXBCYXJyaWVyKCk7XG5cbiAgICAgICAgLy8gQ29tcHV0ZSBhY2MgdmFsdWVzIGZvciBhIHNpbmdsZSB0aHJlYWQuXG4gICAgICAgIHZhciBCQ2FjaGVkIDogYXJyYXk8ZjMyLCAke2NvbFBlclRocmVhZH0+O1xuICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8ICR7dGlsZUlubmVyfTsgaysrKSB7XG4gICAgICAgICAgZm9yICh2YXIgaW5uZXIgPSAwOyBpbm5lciA8ICR7Y29sUGVyVGhyZWFkfTsgaW5uZXIrKykge1xuICAgICAgICAgICAgQkNhY2hlZFtpbm5lcl0gPSBtbV9Cc3ViW2tdW2xvY2FsQ29sICsgaW5uZXIgKiAke3dvcmtncm91cFNpemVbMF19XTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZm9yICh2YXIgaW5uZXJSb3cgPSAwOyBpbm5lclJvdyA8ICR7cm93UGVyVGhyZWFkfTsgaW5uZXJSb3crKykge1xuICAgICAgICAgICAgbGV0IEFDYWNoZWQgPSAke1xuICAgICAgICAgIHRyYW5zcG9zZUEgP1xuICAgICAgICAgICAgICBgbW1fQXN1YltrXVtsb2NhbFJvdyArIGlubmVyUm93ICogJHt3b3JrZ3JvdXBTaXplWzFdfV07YCA6XG4gICAgICAgICAgICAgIGBtbV9Bc3ViW2xvY2FsUm93ICsgaW5uZXJSb3cgKiAke3dvcmtncm91cFNpemVbMV19XVtrXTtgfVxuICAgICAgICAgICAgZm9yICh2YXIgaW5uZXJDb2wgPSAwOyBpbm5lckNvbCA8ICR7Y29sUGVyVGhyZWFkfTsgaW5uZXJDb2wrKykge1xuICAgICAgICAgICAgICBhY2NbaW5uZXJSb3ddW2lubmVyQ29sXSA9XG4gICAgICAgICAgICAgICAgICBmbWEoQUNhY2hlZCwgQkNhY2hlZFtpbm5lckNvbF0sIGFjY1tpbm5lclJvd11baW5uZXJDb2xdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgd29ya2dyb3VwQmFycmllcigpO1xuICAgICAgfVxuICAgICAgZm9yICh2YXIgaW5uZXJSb3cgPSAwOyBpbm5lclJvdyA8ICR7cm93UGVyVGhyZWFkfTsgaW5uZXJSb3crKykge1xuICAgICAgICBsZXQgZ1JvdyA9IGdsb2JhbFJvd1N0YXJ0ICsgbG9jYWxSb3cgKyBpbm5lclJvdyAqICR7d29ya2dyb3VwU2l6ZVsxXX07XG4gICAgICAgIGZvciAodmFyIGlubmVyQ29sID0gMDsgaW5uZXJDb2wgPCAke2NvbFBlclRocmVhZH07IGlubmVyQ29sKyspIHtcbiAgICAgICAgICBsZXQgZ0NvbCA9IGdsb2JhbENvbFN0YXJ0ICsgbG9jYWxDb2wgKyBpbm5lckNvbCAqICR7d29ya2dyb3VwU2l6ZVswXX07XG4gICAgICAgICAgbW1fd3JpdGUoYmF0Y2gsIGdSb3csIGdDb2wsIGFjY1tpbm5lclJvd11baW5uZXJDb2xdKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYCA6XG4gICAgICBgXG4gIGxldCB0aWxlUm93ID0gaTMyKGxvY2FsSWQueSkgKiAke3Jvd1BlclRocmVhZH07XG4gIGxldCB0aWxlQ29sID0gaTMyKGxvY2FsSWQueCkgKiAke2NvbFBlclRocmVhZH07XG5cbiAgbGV0IGdsb2JhbFJvdyA9IGkzMihnbG9iYWxJZC55KSAqICR7cm93UGVyVGhyZWFkfTtcbiAgbGV0IGdsb2JhbENvbCA9IGkzMihnbG9iYWxJZC54KSAqICR7Y29sUGVyVGhyZWFkfTtcbiAgbGV0IGdsb2JhbFJvd1N0YXJ0ID0gaTMyKHdvcmtncm91cElkLnkpICogJHt0aWxlQU91dGVyfTtcblxuICBsZXQgdGlsZVJvd0EgPSBpMzIobG9jYWxJZC55KSAqICR7cm93UGVyVGhyZWFkQX07XG4gIGxldCB0aWxlQ29sQSA9IGkzMihsb2NhbElkLngpICogJHtjb2xQZXJUaHJlYWRBfTtcbiAgbGV0IHRpbGVSb3dCID0gaTMyKGxvY2FsSWQueSkgKiAke3Jvd1BlclRocmVhZEJ9O1xuICAvLyBMb29wIG92ZXIgc2hhcmVkIGRpbWVuc2lvbi5cbiAgZm9yICh2YXIgdCA9IDA7IHQgPCBudW1UaWxlczsgdCsrKSB7XG4gICAgLy8gTG9hZCBvbmUgdGlsZSBvZiBBIGludG8gbG9jYWwgbWVtb3J5LlxuICAgIGZvciAodmFyIGlubmVyUm93ID0gMDsgaW5uZXJSb3cgPCAke3Jvd1BlclRocmVhZEF9OyBpbm5lclJvdysrKSB7XG4gICAgICBmb3IgKHZhciBpbm5lckNvbCA9IDA7IGlubmVyQ29sIDwgJHtjb2xQZXJUaHJlYWRBfTsgaW5uZXJDb2wrKykge1xuICAgICAgICBsZXQgaW5wdXRSb3cgPSB0aWxlUm93QSArIGlubmVyUm93O1xuICAgICAgICBsZXQgaW5wdXRDb2wgPSB0aWxlQ29sQSArIGlubmVyQ29sO1xuICAgICAgICAke3dyaXRlRGF0YVRvU3ViQVNuaXBwZXQodHJhbnNwb3NlQSl9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTG9hZCBvbmUgdGlsZSBvZiBCIGludG8gbG9jYWwgbWVtb3J5LlxuICAgIGZvciAodmFyIGlubmVyUm93ID0gMDsgaW5uZXJSb3cgPCAke3Jvd1BlclRocmVhZEJ9OyBpbm5lclJvdysrKSB7XG4gICAgICBmb3IgKHZhciBpbm5lckNvbCA9IDA7IGlubmVyQ29sIDwgJHtjb2xQZXJUaHJlYWR9OyBpbm5lckNvbCsrKSB7XG4gICAgICAgIGxldCBpbnB1dFJvdyA9IHRpbGVSb3dCICsgaW5uZXJSb3c7XG4gICAgICAgIGxldCBpbnB1dENvbCA9IHRpbGVDb2wgKyBpbm5lckNvbDtcbiAgICAgICAgbW1fQnN1YltpbnB1dFJvd11baW5wdXRDb2xdID0gbW1fcmVhZEIoYmF0Y2hCLFxuICAgICAgICAgIGtTdGFydCArIGlucHV0Um93LFxuICAgICAgICAgIGdsb2JhbENvbCArIGlubmVyQ29sKTtcbiAgICAgIH1cbiAgICB9XG4gICAga1N0YXJ0ID0ga1N0YXJ0ICsgJHt0aWxlSW5uZXJ9O1xuICAgIHdvcmtncm91cEJhcnJpZXIoKTtcblxuICAgIC8vIENvbXB1dGUgYWNjIHZhbHVlcyBmb3IgYSBzaW5nbGUgdGhyZWFkLlxuICAgIHZhciBCQ2FjaGVkIDogYXJyYXk8ZjMyLCAke2NvbFBlclRocmVhZH0+O1xuICAgIGZvciAodmFyIGsgPSAwOyBrIDwgJHt0aWxlSW5uZXJ9OyBrKyspIHtcbiAgICAgIGZvciAodmFyIGlubmVyID0gMDsgaW5uZXIgPCAke2NvbFBlclRocmVhZH07IGlubmVyKyspIHtcbiAgICAgICAgQkNhY2hlZFtpbm5lcl0gPSBtbV9Cc3ViW2tdW3RpbGVDb2wgKyBpbm5lcl07XG4gICAgICB9XG5cbiAgICAgIGZvciAodmFyIGlubmVyUm93ID0gMDsgaW5uZXJSb3cgPCAke3Jvd1BlclRocmVhZH07IGlubmVyUm93KyspIHtcbiAgICAgICAgJHtyZWFkRGF0YUZyb21TdWJBU25pcHBldCh0cmFuc3Bvc2VBKX1cbiAgICAgICAgZm9yICh2YXIgaW5uZXJDb2wgPSAwOyBpbm5lckNvbCA8ICR7Y29sUGVyVGhyZWFkfTsgaW5uZXJDb2wrKykge1xuICAgICAgICAgIGFjY1tpbm5lclJvd11baW5uZXJDb2xdID1cbiAgICAgICAgICAgICAgZm1hKEFDYWNoZWQsIEJDYWNoZWRbaW5uZXJDb2xdLCBhY2NbaW5uZXJSb3ddW2lubmVyQ29sXSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB3b3JrZ3JvdXBCYXJyaWVyKCk7XG4gIH1cblxuICBmb3IgKHZhciBpbm5lclJvdyA9IDA7IGlubmVyUm93IDwgJHtyb3dQZXJUaHJlYWR9OyBpbm5lclJvdysrKSB7XG4gICAgZm9yICh2YXIgaW5uZXJDb2wgPSAwOyBpbm5lckNvbCA8ICR7Y29sUGVyVGhyZWFkfTsgaW5uZXJDb2wrKykge1xuICAgICAgbW1fd3JpdGUoYmF0Y2gsIGdsb2JhbFJvdyArIGlubmVyUm93LCBnbG9iYWxDb2wgKyBpbm5lckNvbCxcbiAgICAgICAgICBhY2NbaW5uZXJSb3ddW2lubmVyQ29sXSk7XG4gICAgfVxuICB9XG4gIGA7XG5cbiAgcmV0dXJuIGBcbiAgICB2YXI8d29ya2dyb3VwPiBtbV9Bc3ViIDogYXJyYXk8YXJyYXk8ZjMyLCAke3RpbGVBV2lkdGh9PiwgJHt0aWxlQUhpZ2h0fT47XG4gICAgdmFyPHdvcmtncm91cD4gbW1fQnN1YiA6IGFycmF5PGFycmF5PGYzMiwgJHt0aWxlQk91dGVyfT4sICR7dGlsZUlubmVyfT47XG5cbiAgICAke21haW4oKX0ge1xuICAgICAgbGV0IGJhdGNoID0gJHtzcGxpdEsgPyAnMCcgOiAnaTMyKGdsb2JhbElkLnopJ307XG4gICAgICBsZXQgYmF0Y2hBID0gJHtcbiAgICAgIHNwbGl0SyB8fCAhYnJvYWRjYXN0QmF0Y2ggPyAnYmF0Y2gnIDogJ2JhdGNoICUgdW5pZm9ybXMuYVNoYXBlWzBdJ307XG4gICAgICBsZXQgYmF0Y2hCID0gJHtcbiAgICAgIHNwbGl0SyB8fCAhYnJvYWRjYXN0QmF0Y2ggPyAnYmF0Y2gnIDogJ2JhdGNoICUgdW5pZm9ybXMuYlNoYXBlWzBdJ307XG4gICAgICBsZXQgbnVtVGlsZXMgPSAke1xuICAgICAgc3BsaXRLID8gYCR7TWF0aC5jZWlsKHNwbGl0ZWREaW1Jbm5lciAvIHRpbGVJbm5lcil9YCA6XG4gICAgICAgICAgICAgICBgKHVuaWZvcm1zLmRpbUlubmVyIC0gMSkgLyAke3RpbGVJbm5lcn0gKyAxYH07XG4gICAgICB2YXIga1N0YXJ0ID0gJHtzcGxpdEsgPyBgaTMyKGdsb2JhbElkLnopICogJHtzcGxpdGVkRGltSW5uZXJ9YCA6ICcwJ307XG5cbiAgICAgIHZhciBhY2MgOiBhcnJheTxhcnJheTxmMzIsICR7Y29sUGVyVGhyZWFkfT4sICR7cm93UGVyVGhyZWFkfT47XG5cbiAgICAgIC8vIFdpdGhvdXQgdGhpcyBpbml0aWFsaXphdGlvbiBzdHJhbmdlIHZhbHVlcyBzaG93IHVwIGluIGFjYy5cbiAgICAgIGZvciAodmFyIGlubmVyUm93ID0gMDsgaW5uZXJSb3cgPCAke3Jvd1BlclRocmVhZH07IGlubmVyUm93KyspIHtcbiAgICAgICAgZm9yICh2YXIgaW5uZXJDb2wgPSAwOyBpbm5lckNvbCA8ICR7Y29sUGVyVGhyZWFkfTsgaW5uZXJDb2wrKykge1xuICAgICAgICAgIGFjY1tpbm5lclJvd11baW5uZXJDb2xdID0gMC4wO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAke21hdG11bFNuaXBwZXR9XG4gICAgfVxuICBgO1xufVxuXG5jb25zdCByZWFkVmVjdG9yQVNuaXBwZXQgPSAodHJhbnNwb3NlOiBib29sZWFuKSA9PiB7XG4gIHJldHVybiB0cmFuc3Bvc2UgPyBgXG4gICAgICBtbV9yZWFkQShiYXRjaEEsIGNvbEEsIGdsb2JhbFJvdyksXG4gICAgICBtbV9yZWFkQShiYXRjaEEsIGNvbEEgKyAxLCBnbG9iYWxSb3cpLFxuICAgICAgbW1fcmVhZEEoYmF0Y2hBLCBjb2xBICsgMiwgZ2xvYmFsUm93KSxcbiAgICAgIG1tX3JlYWRBKGJhdGNoQSwgY29sQSArIDMsIGdsb2JhbFJvdylcbiAgYCA6XG4gICAgICAgICAgICAgICAgICAgICBgXG4gICAgICBtbV9yZWFkQShiYXRjaEEsIGdsb2JhbFJvdywgY29sQSksXG4gICAgICBtbV9yZWFkQShiYXRjaEEsIGdsb2JhbFJvdywgY29sQSArIDEpLFxuICAgICAgbW1fcmVhZEEoYmF0Y2hBLCBnbG9iYWxSb3csIGNvbEEgKyAyKSxcbiAgICAgIG1tX3JlYWRBKGJhdGNoQSwgZ2xvYmFsUm93LCBjb2xBICsgMylcbiAgYDtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBtYWtlVmVjdG9yTWF0cml4UHJvZHVjdFNvdXJjZShcbiAgICB3b3JrZ3JvdXBTaXplOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl0sIHRyYW5zcG9zZUEgPSBmYWxzZSk6IHN0cmluZyB7XG4gIHV0aWwuYXNzZXJ0KFxuICAgICAgd29ya2dyb3VwU2l6ZVsxXSA9PT0gMSAmJiB3b3JrZ3JvdXBTaXplWzJdID09PSAxLFxuICAgICAgKCkgPT4gYEEgbGluZWFyIHdvcmsgZ3JvdXAgc2l6ZSBpcyByZXF1aXJlZC4gQnV0IGdvdCAke3dvcmtncm91cFNpemV9LmApO1xuICBjb25zdCB0aWxlU2l6ZSA9IHdvcmtncm91cFNpemVbMF0gKiA0O1xuICByZXR1cm4gYFxuICAgIHZhcjx3b3JrZ3JvdXA+IG1tX0FzdWIgOiBhcnJheTx2ZWM0PGYzMj4sICR7d29ya2dyb3VwU2l6ZVswXX0+O1xuXG4gICAgJHttYWluKCl9IHtcbiAgICAgIGxldCB0aWxlQ29sID0gaTMyKGxvY2FsSWQueCk7XG4gICAgICBsZXQgZ2xvYmFsQ29sID0gaTMyKGdsb2JhbElkLngpO1xuICAgICAgbGV0IGdsb2JhbFJvdyA9IGkzMihnbG9iYWxJZC55KTtcblxuICAgICAgbGV0IG51bVRpbGVzID0gKHVuaWZvcm1zLmRpbUlubmVyIC0gMSkgLyAke3RpbGVTaXplfSArIDE7XG4gICAgICBsZXQgYmF0Y2ggPSBpMzIoZ2xvYmFsSWQueik7XG4gICAgICBsZXQgYmF0Y2hBID0gYmF0Y2ggJSB1bmlmb3Jtcy5hU2hhcGVbMF07XG4gICAgICBsZXQgYmF0Y2hCID0gYmF0Y2ggJSB1bmlmb3Jtcy5iU2hhcGVbMF07XG4gICAgICAvLyBXaXRob3V0IHRoaXMgaW5pdGlhbGl6YXRpb24gc3RyYW5nZSB2YWx1ZXMgc2hvdyB1cCBpbiBhY2MuXG4gICAgICB2YXIgYWNjID0gMC4wO1xuXG4gICAgICAvLyBMb29wIG92ZXIgc2hhcmVkIGRpbWVuc2lvbi5cbiAgICAgIGZvciAodmFyIHQgPSAwOyB0IDwgbnVtVGlsZXM7IHQrKykge1xuICAgICAgICAvLyBMb2FkIG9uZSB0aWxlIG9mIEEgaW50byBsb2NhbCBtZW1vcnkuXG4gICAgICAgIGxldCBjb2xBID0gdCAqICR7dGlsZVNpemV9ICsgdGlsZUNvbCAqIDQ7XG4gICAgICAgIG1tX0FzdWJbdGlsZUNvbF0gPSB2ZWM0PGYzMj4oJHtyZWFkVmVjdG9yQVNuaXBwZXQodHJhbnNwb3NlQSl9KTtcbiAgICAgICAgd29ya2dyb3VwQmFycmllcigpO1xuXG4gICAgICAgIC8vIENvbXB1dGUgYWNjIHZhbHVlcyBmb3IgYSBzaW5nbGUgdGhyZWFkLlxuICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8ICR7dGlsZVNpemUgLyA0fTsgaysrKSB7XG4gICAgICAgICAgbGV0IHJvd0IgPSB0ICogJHt0aWxlU2l6ZX0gKyBrICogNDtcbiAgICAgICAgICBsZXQgQkNhY2hlZCA9IHZlYzQ8ZjMyPihtbV9yZWFkQihiYXRjaEIsIHJvd0IsIGdsb2JhbENvbCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtbV9yZWFkQihiYXRjaEIsIHJvd0IgKyAxLCBnbG9iYWxDb2wpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW1fcmVhZEIoYmF0Y2hCLCByb3dCICsgMiwgZ2xvYmFsQ29sKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1tX3JlYWRCKGJhdGNoQiwgcm93QiArIDMsIGdsb2JhbENvbCkpO1xuXG4gICAgICAgICAgbGV0IEFDYWNoZWQgPSBtbV9Bc3ViW2tdO1xuICAgICAgICAgIGFjYyA9IGFjYyArIGRvdChBQ2FjaGVkLCBCQ2FjaGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHdvcmtncm91cEJhcnJpZXIoKTtcbiAgICAgIH1cblxuICAgICAgbW1fd3JpdGUoYmF0Y2gsIGdsb2JhbFJvdywgZ2xvYmFsQ29sLCBhY2MpO1xuICAgIH1cbiAgYDtcbn1cblxuZXhwb3J0IGNsYXNzIE1hdE11bFBhY2tlZFByb2dyYW0gaW1wbGVtZW50cyBXZWJHUFVQcm9ncmFtIHtcbiAgb3V0cHV0U2hhcGU6IG51bWJlcltdO1xuICBzaGFkZXJLZXk6IHN0cmluZztcbiAgZGlzcGF0Y2hMYXlvdXQ6IHt4OiBudW1iZXJbXSwgeTogbnVtYmVyW10sIHo6IG51bWJlcltdfTtcbiAgZGlzcGF0Y2g6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXTtcbiAgdmFyaWFibGVOYW1lcyA9IFsnQScsICdCJ107XG4gIHVuaWZvcm1zID0gYGRpbUFPdXRlciA6IGkzMiwgZGltQk91dGVyIDogaTMyLCBkaW1Jbm5lciA6IGkzMixgO1xuICB3b3JrZ3JvdXBTaXplOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl07XG4gIGVsZW1lbnRzUGVyVGhyZWFkOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl07XG4gIHRyYW5zcG9zZUE6IGJvb2xlYW47XG4gIHRyYW5zcG9zZUI6IGJvb2xlYW47XG4gIGFkZEJpYXM6IGJvb2xlYW47XG4gIGFjdGl2YXRpb246IGJhY2tlbmRfdXRpbC5BY3RpdmF0aW9uO1xuICBoYXNQcmVsdUFjdGl2YXRpb25XZWlnaHRzOiBib29sZWFuO1xuICBmaXRBT3V0ZXI6IGJvb2xlYW47XG4gIGZpdEJPdXRlcjogYm9vbGVhbjtcbiAgZml0SW5uZXI6IGJvb2xlYW47XG4gIHRpbGVJbm5lcjogbnVtYmVyO1xuICBpc1ZlY3RvckE6IGJvb2xlYW47XG4gIGlzVmVjNDogYm9vbGVhbjtcbiAgb3V0cHV0Q29tcG9uZW50OiBudW1iZXI7XG4gIHByaXZhdGUgc2VxdWVudGlhbEFjY2Vzc0J5VGhyZWFkczogYm9vbGVhbjtcblxuICBjb25zdHJ1Y3RvcihcbiAgICAgIGFTaGFwZTogW251bWJlciwgbnVtYmVyLCBudW1iZXJdLCBvdXRwdXRTaGFwZTogW251bWJlciwgbnVtYmVyLCBudW1iZXJdLFxuICAgICAgdHJhbnNwb3NlQSA9IGZhbHNlLCB0cmFuc3Bvc2VCID0gZmFsc2UsIGJpYXM6IFRlbnNvckluZm8gPSBudWxsLFxuICAgICAgYWN0aXZhdGlvbjogYmFja2VuZF91dGlsLkFjdGl2YXRpb24gPSBudWxsLFxuICAgICAgcHJlbHVBY3RpdmF0aW9uV2VpZ2h0czogVGVuc29ySW5mbyA9IG51bGwsXG4gICAgICBzZXF1ZW50aWFsQWNjZXNzQnlUaHJlYWRzID0gZmFsc2UpIHtcbiAgICB0aGlzLm91dHB1dFNoYXBlID0gb3V0cHV0U2hhcGU7XG4gICAgdGhpcy5kaXNwYXRjaExheW91dCA9IHt4OiBbMl0sIHk6IFsxXSwgejogWzBdfTtcbiAgICBjb25zdCBkaW1Jbm5lciA9IHRyYW5zcG9zZUEgPyBhU2hhcGVbMV0gOiBhU2hhcGVbMl07XG4gICAgdGhpcy5pc1ZlYzQgPSAoKGRpbUlubmVyICUgNCA9PT0gMCAmJiAhdHJhbnNwb3NlQSkgfHxcbiAgICAgICAgICAgICAgICAgICAob3V0cHV0U2hhcGVbMV0gJSA0ID09PSAwICYmIHRyYW5zcG9zZUEpKSAmJlxuICAgICAgICBvdXRwdXRTaGFwZVsyXSAlIDQgPT09IDAgJiYgIXRyYW5zcG9zZUI7XG4gICAgdGhpcy5vdXRwdXRDb21wb25lbnQgPSB0aGlzLmlzVmVjNCA/IDQgOiAxO1xuICAgIHRoaXMuaXNWZWN0b3JBID0gb3V0cHV0U2hhcGVbMV0gPT09IDEgJiYgIXRyYW5zcG9zZUE7XG5cbiAgICBpZiAoIXRoaXMuaXNWZWM0ICYmIHRoaXMuaXNWZWN0b3JBKSB7XG4gICAgICAvLyBGb3IgbWFrZVZlY3Rvck1hdHJpeFByb2R1Y3RTb3VyY2VcbiAgICAgIHRoaXMuZWxlbWVudHNQZXJUaHJlYWQgPSBbMSwgMSwgMV07XG4gICAgICB0aGlzLndvcmtncm91cFNpemUgPSBbMzIsIDEsIDFdO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCB3b3JrZ3JvdXBJbmZvID0gY29tcHV0ZVdvcmtncm91cEluZm9Gb3JNYXRNdWwoXG4gICAgICAgICAgb3V0cHV0U2hhcGVbMV0sIGRpbUlubmVyLCBvdXRwdXRTaGFwZVsyXSwgdHJhbnNwb3NlQSk7XG4gICAgICB0aGlzLndvcmtncm91cFNpemUgPSB3b3JrZ3JvdXBJbmZvLndvcmtncm91cFNpemU7XG4gICAgICB0aGlzLmVsZW1lbnRzUGVyVGhyZWFkID0gd29ya2dyb3VwSW5mby5lbGVtZW50c1BlclRocmVhZDtcbiAgICB9XG5cbiAgICB0aGlzLmRpc3BhdGNoID0gY29tcHV0ZURpc3BhdGNoKFxuICAgICAgICB0aGlzLmRpc3BhdGNoTGF5b3V0LCB0aGlzLm91dHB1dFNoYXBlLCB0aGlzLndvcmtncm91cFNpemUsXG4gICAgICAgIHRoaXMuZWxlbWVudHNQZXJUaHJlYWQpO1xuXG4gICAgY29uc3QgYWRkQmlhcyA9IGJpYXMgIT0gbnVsbDtcbiAgICBjb25zdCBoYXNQcmVsdUFjdGl2YXRpb25XZWlnaHRzID0gcHJlbHVBY3RpdmF0aW9uV2VpZ2h0cyAhPSBudWxsO1xuICAgIGlmIChhZGRCaWFzKSB7XG4gICAgICB0aGlzLnZhcmlhYmxlTmFtZXMucHVzaCgnYmlhcycpO1xuICAgIH1cblxuICAgIGlmIChoYXNQcmVsdUFjdGl2YXRpb25XZWlnaHRzKSB7XG4gICAgICB0aGlzLnZhcmlhYmxlTmFtZXMucHVzaCgncHJlbHVBY3RpdmF0aW9uV2VpZ2h0cycpO1xuICAgIH1cblxuICAgIHRoaXMuc2VxdWVudGlhbEFjY2Vzc0J5VGhyZWFkcyA9IHNlcXVlbnRpYWxBY2Nlc3NCeVRocmVhZHM7XG4gICAgdGhpcy50cmFuc3Bvc2VBID0gdHJhbnNwb3NlQTtcbiAgICB0aGlzLnRyYW5zcG9zZUIgPSB0cmFuc3Bvc2VCO1xuICAgIHRoaXMuYWRkQmlhcyA9IGFkZEJpYXM7XG4gICAgdGhpcy5hY3RpdmF0aW9uID0gYWN0aXZhdGlvbjtcbiAgICB0aGlzLmhhc1ByZWx1QWN0aXZhdGlvbldlaWdodHMgPSBoYXNQcmVsdUFjdGl2YXRpb25XZWlnaHRzO1xuICAgIFt0aGlzLmZpdEFPdXRlciwgdGhpcy5maXRCT3V0ZXIsIHRoaXMuZml0SW5uZXJdID1cbiAgICAgICAgdGhpcy5nZXRTaGFwZUZpdChvdXRwdXRTaGFwZVsxXSwgb3V0cHV0U2hhcGVbMl0sIGRpbUlubmVyKTtcbiAgICB0aGlzLnNoYWRlcktleSA9IGBtYXRNdWxQYWNrZWRfJHt0aGlzLmVsZW1lbnRzUGVyVGhyZWFkfV8ke3RyYW5zcG9zZUF9XyR7XG4gICAgICAgIHRyYW5zcG9zZUJ9XyR7dGhpcy5hY3RpdmF0aW9ufV8ke3RoaXMuZml0QU91dGVyfV8ke3RoaXMuZml0Qk91dGVyfV8ke1xuICAgICAgICB0aGlzLmZpdElubmVyfV8ke3RoaXMuaXNWZWM0fV8ke3RoaXMuaXNWZWN0b3JBfV8ke1xuICAgICAgICB0aGlzLnNlcXVlbnRpYWxBY2Nlc3NCeVRocmVhZHN9YDtcbiAgfVxuXG4gIGdldFNoYXBlRml0KGRpbUFPdXRlcjogbnVtYmVyLCBkaW1CT3V0ZXI6IG51bWJlciwgZGltSW5uZXI6IG51bWJlcik6XG4gICAgICBib29sZWFuW10ge1xuICAgIGNvbnN0IHRpbGVBT3V0ZXIgPSB0aGlzLndvcmtncm91cFNpemVbMV0gKiB0aGlzLmVsZW1lbnRzUGVyVGhyZWFkWzFdO1xuICAgIGNvbnN0IHRpbGVCT3V0ZXIgPSB0aGlzLndvcmtncm91cFNpemVbMF0gKiB0aGlzLmVsZW1lbnRzUGVyVGhyZWFkWzBdO1xuXG4gICAgaWYgKCF0aGlzLmlzVmVjNCAmJiB0aGlzLmlzVmVjdG9yQSkge1xuICAgICAgLy8gRm9yIG1ha2VWZWN0b3JNYXRyaXhQcm9kdWN0U291cmNlXG4gICAgICB0aGlzLnRpbGVJbm5lciA9IHRoaXMud29ya2dyb3VwU2l6ZVswXSAqIDQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMudGlsZUlubmVyID0gdGlsZUJPdXRlcjtcbiAgICB9XG5cbiAgICBjb25zdCBmaXRBT3V0ZXIgPSBkaW1BT3V0ZXIgJSB0aWxlQU91dGVyID09PSAwO1xuICAgIGNvbnN0IGZpdEJPdXRlciA9IGRpbUJPdXRlciAlIHRpbGVCT3V0ZXIgPT09IDA7XG4gICAgY29uc3QgZml0SW5uZXIgPSBkaW1Jbm5lciAlIHRoaXMudGlsZUlubmVyID09PSAwO1xuICAgIHJldHVybiBbZml0QU91dGVyLCBmaXRCT3V0ZXIsIGZpdElubmVyXTtcbiAgfVxuXG4gIGdldFVzZXJDb2RlKCk6IHN0cmluZyB7XG4gICAgY29uc3QgdXNlckNvZGUgPSBgXG4gICAgICAke1xuICAgICAgICBhY3RpdmF0aW9uRm5TbmlwcGV0KFxuICAgICAgICAgICAgdGhpcy5hY3RpdmF0aW9uLCB0aGlzLmhhc1ByZWx1QWN0aXZhdGlvbldlaWdodHMsIHRoaXMuaXNWZWM0KX1cbiAgICAgICR7XG4gICAgICAgIG1hdE11bFJlYWRXcml0ZUZuU291cmNlKFxuICAgICAgICAgICAgdGhpcy5hZGRCaWFzLCB0aGlzLmFjdGl2YXRpb24sXG4gICAgICAgICAgICBmYWxzZSAvKiB0cmFuc3Bvc2VBIGlzIGltcGxlbWVudGVkIGluIG1ha2VNYXRNdWxQYWNrZWRTb3VyY2UgKi8sXG4gICAgICAgICAgICB0aGlzLnRyYW5zcG9zZUIsIHRoaXMuZml0QU91dGVyLCB0aGlzLmZpdEJPdXRlciwgdGhpcy5maXRJbm5lcixcbiAgICAgICAgICAgIHRoaXMuaXNWZWM0ID8gNCA6IDEpfVxuICAgICAgJHtcbiAgICAgICAgdGhpcy5pc1ZlYzQgP1xuICAgICAgICAgICAgbWFrZU1hdE11bFBhY2tlZFZlYzRTb3VyY2UoXG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50c1BlclRocmVhZCwgdGhpcy53b3JrZ3JvdXBTaXplLCB0aGlzLnRyYW5zcG9zZUEsXG4gICAgICAgICAgICAgICAgdGhpcy50aWxlSW5uZXIsIGZhbHNlLCBudWxsLCB0cnVlKSA6XG4gICAgICAgICAgICAodGhpcy5pc1ZlY3RvckEgPyBtYWtlVmVjdG9yTWF0cml4UHJvZHVjdFNvdXJjZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndvcmtncm91cFNpemUsIHRoaXMudHJhbnNwb3NlQSkgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFrZU1hdE11bFBhY2tlZFNvdXJjZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnRzUGVyVGhyZWFkLCB0aGlzLndvcmtncm91cFNpemUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50cmFuc3Bvc2VBLCB0aGlzLnRpbGVJbm5lciwgZmFsc2UsIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXF1ZW50aWFsQWNjZXNzQnlUaHJlYWRzLCB0cnVlKSl9XG4gICAgYDtcbiAgICByZXR1cm4gdXNlckNvZGU7XG4gIH1cbn1cbiJdfQ==","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { activationFnSnippet } from './activation_util';\nimport { matMulReadWriteFnSource } from './matmul_packed_webgpu';\nimport { getMainHeaderString as main } from './webgpu_program';\nimport { computeDispatch } from './webgpu_util';\nexport function makeMatMulReduceSource(workgroupSizeX) {\n    return `\n    var<workgroup> sumValues : array<f32, ${workgroupSizeX}>;\n    ${main()} {\n      let coords = getOutputCoords();\n      let batch = coords[0];\n      let batchA = batch % uniforms.aShape[0];\n      let batchB = batch % uniforms.bShape[0];\n      let row = coords[1];\n      let col = coords[2];\n      var sum = 0.0;\n      let Length = uniforms.dimInner;\n      for (var k = i32(localId.x); k < Length; k = k + ${workgroupSizeX}) {\n        let dataA = mm_readA(batchA, row, k);\n        let dataB = mm_readB(batchB, k, col);\n        sum = sum + dataA * dataB;\n      }\n      sumValues[localId.x] = sum;\n      workgroupBarrier();\n\n      for(var currentSize = ${workgroupSizeX / 2}u; currentSize > 1u;\n          currentSize = currentSize / 2u) {\n        if (localId.x < currentSize)\n        {\n          sumValues[localId.x] = sumValues[localId.x] + sumValues[localId.x + currentSize];\n        }\n        workgroupBarrier();\n      }\n\n      if (localId.x == 0u) {\n        sum = sumValues[0] + sumValues[1];\n        mm_write(batch, row, col, sum);\n      }\n    }\n  `;\n}\nexport class MatMulReduceProgram {\n    constructor(outputShape, transposeA = false, transposeB = false, bias = null, activation = null, preluActivationWeights = null) {\n        this.variableNames = ['A', 'B'];\n        this.uniforms = `dimAOuter : i32, dimBOuter : i32, dimInner : i32,`;\n        this.workgroupSize = [256, 1, 1];\n        this.outputShape = outputShape;\n        this.dispatchLayout = { x: [], y: [1, 2], z: [0] };\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize);\n        const addBias = bias != null;\n        const hasPreluActivationWeights = preluActivationWeights != null;\n        if (addBias) {\n            this.variableNames.push('bias');\n        }\n        if (hasPreluActivationWeights) {\n            this.variableNames.push('preluActivationWeights');\n        }\n        this.transposeA = transposeA;\n        this.transposeB = transposeB;\n        this.addBias = addBias;\n        this.activation = activation;\n        this.hasPreluActivationWeights = hasPreluActivationWeights;\n        this.shaderKey =\n            `matMulReduce_${this.activation}_${transposeA}_${transposeB}`;\n    }\n    getUserCode() {\n        const userCode = `\n      ${activationFnSnippet(this.activation, this.hasPreluActivationWeights)}\n      ${matMulReadWriteFnSource(this.addBias, this.activation, this.transposeA, this.transposeB)}\n      ${makeMatMulReduceSource(this.workgroupSize[0])}\n    `;\n        return userCode;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWF0bXVsX3JlZHVjZV93ZWJncHUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9tYXRtdWxfcmVkdWNlX3dlYmdwdS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFJSCxPQUFPLEVBQUMsbUJBQW1CLEVBQUMsTUFBTSxtQkFBbUIsQ0FBQztBQUN0RCxPQUFPLEVBQUMsdUJBQXVCLEVBQUMsTUFBTSx3QkFBd0IsQ0FBQztBQUMvRCxPQUFPLEVBQUMsbUJBQW1CLElBQUksSUFBSSxFQUFnQixNQUFNLGtCQUFrQixDQUFDO0FBQzVFLE9BQU8sRUFBQyxlQUFlLEVBQUMsTUFBTSxlQUFlLENBQUM7QUFFOUMsTUFBTSxVQUFVLHNCQUFzQixDQUFDLGNBQXNCO0lBQzNELE9BQU87NENBQ21DLGNBQWM7TUFDcEQsSUFBSSxFQUFFOzs7Ozs7Ozs7eURBUzZDLGNBQWM7Ozs7Ozs7OzhCQVF6QyxjQUFjLEdBQUcsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7R0FjN0MsQ0FBQztBQUNKLENBQUM7QUFFRCxNQUFNLE9BQU8sbUJBQW1CO0lBYzlCLFlBQ0ksV0FBcUMsRUFBRSxVQUFVLEdBQUcsS0FBSyxFQUN6RCxVQUFVLEdBQUcsS0FBSyxFQUFFLE9BQW1CLElBQUksRUFDM0MsYUFBc0MsSUFBSSxFQUMxQyx5QkFBcUMsSUFBSTtRQWI3QyxrQkFBYSxHQUFHLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQzNCLGFBQVEsR0FBRyxtREFBbUQsQ0FBQztRQUMvRCxrQkFBYSxHQUE2QixDQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFZcEQsSUFBSSxDQUFDLFdBQVcsR0FBRyxXQUFXLENBQUM7UUFDL0IsSUFBSSxDQUFDLGNBQWMsR0FBRyxFQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFDLENBQUM7UUFDakQsSUFBSSxDQUFDLFFBQVEsR0FBRyxlQUFlLENBQzNCLElBQUksQ0FBQyxjQUFjLEVBQUUsSUFBSSxDQUFDLFdBQVcsRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7UUFFL0QsTUFBTSxPQUFPLEdBQUcsSUFBSSxJQUFJLElBQUksQ0FBQztRQUM3QixNQUFNLHlCQUF5QixHQUFHLHNCQUFzQixJQUFJLElBQUksQ0FBQztRQUNqRSxJQUFJLE9BQU8sRUFBRTtZQUNYLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1NBQ2pDO1FBRUQsSUFBSSx5QkFBeUIsRUFBRTtZQUM3QixJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDO1NBQ25EO1FBRUQsSUFBSSxDQUFDLFVBQVUsR0FBRyxVQUFVLENBQUM7UUFDN0IsSUFBSSxDQUFDLFVBQVUsR0FBRyxVQUFVLENBQUM7UUFDN0IsSUFBSSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUM7UUFDdkIsSUFBSSxDQUFDLFVBQVUsR0FBRyxVQUFVLENBQUM7UUFDN0IsSUFBSSxDQUFDLHlCQUF5QixHQUFHLHlCQUF5QixDQUFDO1FBQzNELElBQUksQ0FBQyxTQUFTO1lBQ1YsZ0JBQWdCLElBQUksQ0FBQyxVQUFVLElBQUksVUFBVSxJQUFJLFVBQVUsRUFBRSxDQUFDO0lBQ3BFLENBQUM7SUFFRCxXQUFXO1FBQ1QsTUFBTSxRQUFRLEdBQUc7UUFDYixtQkFBbUIsQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLElBQUksQ0FBQyx5QkFBeUIsQ0FBQztRQUVwRSx1QkFBdUIsQ0FDbkIsSUFBSSxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsVUFBVSxFQUFFLElBQUksQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQztRQUNwRSxzQkFBc0IsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxDQUFDO0tBQ2hELENBQUM7UUFDRixPQUFPLFFBQVEsQ0FBQztJQUNsQixDQUFDO0NBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7YmFja2VuZF91dGlsLCBUZW5zb3JJbmZvfSBmcm9tICdAdGVuc29yZmxvdy90ZmpzLWNvcmUnO1xuXG5pbXBvcnQge2FjdGl2YXRpb25GblNuaXBwZXR9IGZyb20gJy4vYWN0aXZhdGlvbl91dGlsJztcbmltcG9ydCB7bWF0TXVsUmVhZFdyaXRlRm5Tb3VyY2V9IGZyb20gJy4vbWF0bXVsX3BhY2tlZF93ZWJncHUnO1xuaW1wb3J0IHtnZXRNYWluSGVhZGVyU3RyaW5nIGFzIG1haW4sIFdlYkdQVVByb2dyYW19IGZyb20gJy4vd2ViZ3B1X3Byb2dyYW0nO1xuaW1wb3J0IHtjb21wdXRlRGlzcGF0Y2h9IGZyb20gJy4vd2ViZ3B1X3V0aWwnO1xuXG5leHBvcnQgZnVuY3Rpb24gbWFrZU1hdE11bFJlZHVjZVNvdXJjZSh3b3JrZ3JvdXBTaXplWDogbnVtYmVyKTogc3RyaW5nIHtcbiAgcmV0dXJuIGBcbiAgICB2YXI8d29ya2dyb3VwPiBzdW1WYWx1ZXMgOiBhcnJheTxmMzIsICR7d29ya2dyb3VwU2l6ZVh9PjtcbiAgICAke21haW4oKX0ge1xuICAgICAgbGV0IGNvb3JkcyA9IGdldE91dHB1dENvb3JkcygpO1xuICAgICAgbGV0IGJhdGNoID0gY29vcmRzWzBdO1xuICAgICAgbGV0IGJhdGNoQSA9IGJhdGNoICUgdW5pZm9ybXMuYVNoYXBlWzBdO1xuICAgICAgbGV0IGJhdGNoQiA9IGJhdGNoICUgdW5pZm9ybXMuYlNoYXBlWzBdO1xuICAgICAgbGV0IHJvdyA9IGNvb3Jkc1sxXTtcbiAgICAgIGxldCBjb2wgPSBjb29yZHNbMl07XG4gICAgICB2YXIgc3VtID0gMC4wO1xuICAgICAgbGV0IExlbmd0aCA9IHVuaWZvcm1zLmRpbUlubmVyO1xuICAgICAgZm9yICh2YXIgayA9IGkzMihsb2NhbElkLngpOyBrIDwgTGVuZ3RoOyBrID0gayArICR7d29ya2dyb3VwU2l6ZVh9KSB7XG4gICAgICAgIGxldCBkYXRhQSA9IG1tX3JlYWRBKGJhdGNoQSwgcm93LCBrKTtcbiAgICAgICAgbGV0IGRhdGFCID0gbW1fcmVhZEIoYmF0Y2hCLCBrLCBjb2wpO1xuICAgICAgICBzdW0gPSBzdW0gKyBkYXRhQSAqIGRhdGFCO1xuICAgICAgfVxuICAgICAgc3VtVmFsdWVzW2xvY2FsSWQueF0gPSBzdW07XG4gICAgICB3b3JrZ3JvdXBCYXJyaWVyKCk7XG5cbiAgICAgIGZvcih2YXIgY3VycmVudFNpemUgPSAke3dvcmtncm91cFNpemVYIC8gMn11OyBjdXJyZW50U2l6ZSA+IDF1O1xuICAgICAgICAgIGN1cnJlbnRTaXplID0gY3VycmVudFNpemUgLyAydSkge1xuICAgICAgICBpZiAobG9jYWxJZC54IDwgY3VycmVudFNpemUpXG4gICAgICAgIHtcbiAgICAgICAgICBzdW1WYWx1ZXNbbG9jYWxJZC54XSA9IHN1bVZhbHVlc1tsb2NhbElkLnhdICsgc3VtVmFsdWVzW2xvY2FsSWQueCArIGN1cnJlbnRTaXplXTtcbiAgICAgICAgfVxuICAgICAgICB3b3JrZ3JvdXBCYXJyaWVyKCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChsb2NhbElkLnggPT0gMHUpIHtcbiAgICAgICAgc3VtID0gc3VtVmFsdWVzWzBdICsgc3VtVmFsdWVzWzFdO1xuICAgICAgICBtbV93cml0ZShiYXRjaCwgcm93LCBjb2wsIHN1bSk7XG4gICAgICB9XG4gICAgfVxuICBgO1xufVxuXG5leHBvcnQgY2xhc3MgTWF0TXVsUmVkdWNlUHJvZ3JhbSBpbXBsZW1lbnRzIFdlYkdQVVByb2dyYW0ge1xuICBvdXRwdXRTaGFwZTogbnVtYmVyW107XG4gIHNoYWRlcktleTogc3RyaW5nO1xuICBkaXNwYXRjaExheW91dDoge3g6IG51bWJlcltdLCB5OiBudW1iZXJbXSwgejogbnVtYmVyW119O1xuICBkaXNwYXRjaDogW251bWJlciwgbnVtYmVyLCBudW1iZXJdO1xuICB2YXJpYWJsZU5hbWVzID0gWydBJywgJ0InXTtcbiAgdW5pZm9ybXMgPSBgZGltQU91dGVyIDogaTMyLCBkaW1CT3V0ZXIgOiBpMzIsIGRpbUlubmVyIDogaTMyLGA7XG4gIHdvcmtncm91cFNpemU6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXSA9IFsyNTYsIDEsIDFdO1xuICB0cmFuc3Bvc2VBOiBib29sZWFuO1xuICB0cmFuc3Bvc2VCOiBib29sZWFuO1xuICBhZGRCaWFzOiBib29sZWFuO1xuICBhY3RpdmF0aW9uOiBiYWNrZW5kX3V0aWwuQWN0aXZhdGlvbjtcbiAgaGFzUHJlbHVBY3RpdmF0aW9uV2VpZ2h0czogYm9vbGVhbjtcblxuICBjb25zdHJ1Y3RvcihcbiAgICAgIG91dHB1dFNoYXBlOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl0sIHRyYW5zcG9zZUEgPSBmYWxzZSxcbiAgICAgIHRyYW5zcG9zZUIgPSBmYWxzZSwgYmlhczogVGVuc29ySW5mbyA9IG51bGwsXG4gICAgICBhY3RpdmF0aW9uOiBiYWNrZW5kX3V0aWwuQWN0aXZhdGlvbiA9IG51bGwsXG4gICAgICBwcmVsdUFjdGl2YXRpb25XZWlnaHRzOiBUZW5zb3JJbmZvID0gbnVsbCkge1xuICAgIHRoaXMub3V0cHV0U2hhcGUgPSBvdXRwdXRTaGFwZTtcbiAgICB0aGlzLmRpc3BhdGNoTGF5b3V0ID0ge3g6IFtdLCB5OiBbMSwgMl0sIHo6IFswXX07XG4gICAgdGhpcy5kaXNwYXRjaCA9IGNvbXB1dGVEaXNwYXRjaChcbiAgICAgICAgdGhpcy5kaXNwYXRjaExheW91dCwgdGhpcy5vdXRwdXRTaGFwZSwgdGhpcy53b3JrZ3JvdXBTaXplKTtcblxuICAgIGNvbnN0IGFkZEJpYXMgPSBiaWFzICE9IG51bGw7XG4gICAgY29uc3QgaGFzUHJlbHVBY3RpdmF0aW9uV2VpZ2h0cyA9IHByZWx1QWN0aXZhdGlvbldlaWdodHMgIT0gbnVsbDtcbiAgICBpZiAoYWRkQmlhcykge1xuICAgICAgdGhpcy52YXJpYWJsZU5hbWVzLnB1c2goJ2JpYXMnKTtcbiAgICB9XG5cbiAgICBpZiAoaGFzUHJlbHVBY3RpdmF0aW9uV2VpZ2h0cykge1xuICAgICAgdGhpcy52YXJpYWJsZU5hbWVzLnB1c2goJ3ByZWx1QWN0aXZhdGlvbldlaWdodHMnKTtcbiAgICB9XG5cbiAgICB0aGlzLnRyYW5zcG9zZUEgPSB0cmFuc3Bvc2VBO1xuICAgIHRoaXMudHJhbnNwb3NlQiA9IHRyYW5zcG9zZUI7XG4gICAgdGhpcy5hZGRCaWFzID0gYWRkQmlhcztcbiAgICB0aGlzLmFjdGl2YXRpb24gPSBhY3RpdmF0aW9uO1xuICAgIHRoaXMuaGFzUHJlbHVBY3RpdmF0aW9uV2VpZ2h0cyA9IGhhc1ByZWx1QWN0aXZhdGlvbldlaWdodHM7XG4gICAgdGhpcy5zaGFkZXJLZXkgPVxuICAgICAgICBgbWF0TXVsUmVkdWNlXyR7dGhpcy5hY3RpdmF0aW9ufV8ke3RyYW5zcG9zZUF9XyR7dHJhbnNwb3NlQn1gO1xuICB9XG5cbiAgZ2V0VXNlckNvZGUoKTogc3RyaW5nIHtcbiAgICBjb25zdCB1c2VyQ29kZSA9IGBcbiAgICAgICR7YWN0aXZhdGlvbkZuU25pcHBldCh0aGlzLmFjdGl2YXRpb24sIHRoaXMuaGFzUHJlbHVBY3RpdmF0aW9uV2VpZ2h0cyl9XG4gICAgICAke1xuICAgICAgICBtYXRNdWxSZWFkV3JpdGVGblNvdXJjZShcbiAgICAgICAgICAgIHRoaXMuYWRkQmlhcywgdGhpcy5hY3RpdmF0aW9uLCB0aGlzLnRyYW5zcG9zZUEsIHRoaXMudHJhbnNwb3NlQil9XG4gICAgICAke21ha2VNYXRNdWxSZWR1Y2VTb3VyY2UodGhpcy53b3JrZ3JvdXBTaXplWzBdKX1cbiAgICBgO1xuICAgIHJldHVybiB1c2VyQ29kZTtcbiAgfVxufVxuIl19","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { activationFnSnippet } from './activation_util';\nimport { matMulReadWriteFnSource } from './matmul_packed_webgpu';\nimport { getMainHeaderString as main } from './webgpu_program';\nexport function makeMatMulSmallOutputSizeSource(workgroupSize) {\n    const tileAOuter = workgroupSize[1];\n    const tileBOuter = workgroupSize[0];\n    const tileInner = tileAOuter > tileBOuter ? tileAOuter : tileBOuter;\n    return `\n  var<workgroup> mm_Asub : array<array<f32, ${tileInner}>, ${tileAOuter}>;\n  var<workgroup> mm_Bsub : array<array<f32, ${tileBOuter}>, ${tileInner}>;\n\n  // If the output size is small for matrix multiplication, avoid to use vec4\n  // and handle some elements per thread to optimally utilize the ALU.\n  // Read data from global memory to registers firstly, then store them into\n  // shared memory, so it is instruction-Level parallelism for arithmetic\n  // operations and others handle IO operations between barrier api, makes ALU\n  // and load/store units work simultaneously, could improves the performance.\n  ${main()} {\n    let tileRow = i32(localId.y);\n    let tileCol = i32(localId.x);\n    let globalRow = i32(globalId.y);\n    let globalCol = i32(globalId.x);\n    let batch = i32(globalId.z);\n    let batchA = batch % uniforms.aShape[0];\n    let batchB = batch % uniforms.bShape[0];\n\n    // uniforms.dimInner should be greater than 0.\n    let numTiles = (uniforms.dimInner - 1) / ${tileInner} + 1;\n    var acc = 0.0;\n\n    var globalColA = tileCol;\n    var globalRowB = 0;\n    var regA = mm_readA(batchA, globalRow, globalColA);\n    var regB0 = mm_readB(batchB, globalRowB + 2 * tileRow, globalCol);\n    var regB1 = mm_readB(batchB, globalRowB + 2 * tileRow + 1, globalCol);\n    globalColA = globalColA + ${tileInner};\n    globalRowB = globalRowB + ${tileInner};\n\n    for (var t = 0; t < numTiles; t = t + 1) {\n      mm_Asub[tileRow][tileCol] = regA;\n      mm_Bsub[2 * tileRow][tileCol] = regB0;\n      mm_Bsub[2 * tileRow + 1][tileCol] = regB1;\n\n      workgroupBarrier();\n\n      regA = mm_readA(batchA, globalRow, globalColA);\n      regB0 = mm_readB(batchB, globalRowB + 2 * tileRow, globalCol);\n      regB1 = mm_readB(batchB, globalRowB + 2 * tileRow + 1, globalCol);\n      globalColA = globalColA + ${tileInner};\n      globalRowB = globalRowB + ${tileInner};\n\n      for (var k = 0; k < ${tileInner}; k = k + 1) {\n        acc = acc + mm_Asub[tileRow][k] * mm_Bsub[k][tileCol];\n      }\n      workgroupBarrier();\n    }\n\n    mm_write(batch, globalRow, globalCol, acc);\n  }\n  `;\n}\nexport class MatMulSmallOutputSizeProgram {\n    constructor(aShape, bShape, outputShape, transposeA = false, transposeB = false, bias = null, activation = null, preluActivationWeights = null) {\n        this.variableNames = ['A', 'B'];\n        this.uniforms = `dimAOuter : i32, dimBOuter : i32, dimInner : i32,`;\n        this.workgroupSize = [16, 8, 1];\n        this.outputShape = outputShape;\n        this.dispatchLayout = { x: [2], y: [1], z: [0] };\n        this.dispatch = [\n            Math.ceil(outputShape[2] / this.workgroupSize[0]),\n            Math.ceil(outputShape[1] / this.workgroupSize[1]), outputShape[0]\n        ];\n        const addBias = bias != null;\n        if (addBias) {\n            this.variableNames.push('bias');\n        }\n        const hasPreluActivationWeights = preluActivationWeights != null;\n        if (hasPreluActivationWeights) {\n            this.variableNames.push('preluActivationWeights');\n        }\n        this.transposeA = transposeA;\n        this.transposeB = transposeB;\n        this.addBias = addBias;\n        this.activation = activation;\n        this.hasPreluActivationWeights = hasPreluActivationWeights;\n        this.shaderKey =\n            `matMulSmallOutputSize_${this.activation}_${transposeA}_${transposeB}`;\n    }\n    getUserCode() {\n        const userCode = `\n      ${activationFnSnippet(this.activation, this.hasPreluActivationWeights)}\n      ${matMulReadWriteFnSource(this.addBias, this.activation, this.transposeA, this.transposeB)}\n      ${makeMatMulSmallOutputSizeSource(this.workgroupSize)}\n    `;\n        return userCode;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWF0bXVsX3NtYWxsX291dHB1dF9zaXplX3dlYmdwdS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL21hdG11bF9zbWFsbF9vdXRwdXRfc2l6ZV93ZWJncHUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBR0gsT0FBTyxFQUFDLG1CQUFtQixFQUFDLE1BQU0sbUJBQW1CLENBQUM7QUFDdEQsT0FBTyxFQUFDLHVCQUF1QixFQUFDLE1BQU0sd0JBQXdCLENBQUM7QUFDL0QsT0FBTyxFQUFDLG1CQUFtQixJQUFJLElBQUksRUFBZ0IsTUFBTSxrQkFBa0IsQ0FBQztBQUU1RSxNQUFNLFVBQVUsK0JBQStCLENBQzNDLGFBQXVDO0lBQ3pDLE1BQU0sVUFBVSxHQUFHLGFBQWEsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNwQyxNQUFNLFVBQVUsR0FBRyxhQUFhLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDcEMsTUFBTSxTQUFTLEdBQUcsVUFBVSxHQUFHLFVBQVUsQ0FBQyxDQUFDLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUM7SUFDcEUsT0FBTzs4Q0FDcUMsU0FBUyxNQUFNLFVBQVU7OENBQ3pCLFVBQVUsTUFBTSxTQUFTOzs7Ozs7OztJQVFuRSxJQUFJLEVBQUU7Ozs7Ozs7Ozs7K0NBVXFDLFNBQVM7Ozs7Ozs7O2dDQVF4QixTQUFTO2dDQUNULFNBQVM7Ozs7Ozs7Ozs7OztrQ0FZUCxTQUFTO2tDQUNULFNBQVM7OzRCQUVmLFNBQVM7Ozs7Ozs7O0dBUWxDLENBQUM7QUFDSixDQUFDO0FBRUQsTUFBTSxPQUFPLDRCQUE0QjtJQWN2QyxZQUNJLE1BQWdDLEVBQUUsTUFBZ0MsRUFDbEUsV0FBcUMsRUFBRSxVQUFVLEdBQUcsS0FBSyxFQUN6RCxVQUFVLEdBQUcsS0FBSyxFQUFFLE9BQW1CLElBQUksRUFDM0MsYUFBc0MsSUFBSSxFQUMxQyx5QkFBcUMsSUFBSTtRQWQ3QyxrQkFBYSxHQUFHLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQzNCLGFBQVEsR0FBRyxtREFBbUQsQ0FBQztRQUMvRCxrQkFBYSxHQUE2QixDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFhbkQsSUFBSSxDQUFDLFdBQVcsR0FBRyxXQUFXLENBQUM7UUFFL0IsSUFBSSxDQUFDLGNBQWMsR0FBRyxFQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFDLENBQUM7UUFDL0MsSUFBSSxDQUFDLFFBQVEsR0FBRztZQUNkLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDakQsSUFBSSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLFdBQVcsQ0FBQyxDQUFDLENBQUM7U0FDbEUsQ0FBQztRQUVGLE1BQU0sT0FBTyxHQUFHLElBQUksSUFBSSxJQUFJLENBQUM7UUFDN0IsSUFBSSxPQUFPLEVBQUU7WUFDWCxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztTQUNqQztRQUVELE1BQU0seUJBQXlCLEdBQUcsc0JBQXNCLElBQUksSUFBSSxDQUFDO1FBQ2pFLElBQUkseUJBQXlCLEVBQUU7WUFDN0IsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsd0JBQXdCLENBQUMsQ0FBQztTQUNuRDtRQUVELElBQUksQ0FBQyxVQUFVLEdBQUcsVUFBVSxDQUFDO1FBQzdCLElBQUksQ0FBQyxVQUFVLEdBQUcsVUFBVSxDQUFDO1FBQzdCLElBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDO1FBQ3ZCLElBQUksQ0FBQyxVQUFVLEdBQUcsVUFBVSxDQUFDO1FBQzdCLElBQUksQ0FBQyx5QkFBeUIsR0FBRyx5QkFBeUIsQ0FBQztRQUMzRCxJQUFJLENBQUMsU0FBUztZQUNWLHlCQUF5QixJQUFJLENBQUMsVUFBVSxJQUFJLFVBQVUsSUFBSSxVQUFVLEVBQUUsQ0FBQztJQUM3RSxDQUFDO0lBRUQsV0FBVztRQUNULE1BQU0sUUFBUSxHQUFHO1FBQ2IsbUJBQW1CLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUMseUJBQXlCLENBQUM7UUFFcEUsdUJBQXVCLENBQ25CLElBQUksQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUMsVUFBVSxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUM7UUFDcEUsK0JBQStCLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQztLQUN0RCxDQUFDO1FBQ0YsT0FBTyxRQUFRLENBQUM7SUFDbEIsQ0FBQztDQUNGIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge2JhY2tlbmRfdXRpbCwgVGVuc29ySW5mb30gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcbmltcG9ydCB7YWN0aXZhdGlvbkZuU25pcHBldH0gZnJvbSAnLi9hY3RpdmF0aW9uX3V0aWwnO1xuaW1wb3J0IHttYXRNdWxSZWFkV3JpdGVGblNvdXJjZX0gZnJvbSAnLi9tYXRtdWxfcGFja2VkX3dlYmdwdSc7XG5pbXBvcnQge2dldE1haW5IZWFkZXJTdHJpbmcgYXMgbWFpbiwgV2ViR1BVUHJvZ3JhbX0gZnJvbSAnLi93ZWJncHVfcHJvZ3JhbSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBtYWtlTWF0TXVsU21hbGxPdXRwdXRTaXplU291cmNlKFxuICAgIHdvcmtncm91cFNpemU6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXSk6IHN0cmluZyB7XG4gIGNvbnN0IHRpbGVBT3V0ZXIgPSB3b3JrZ3JvdXBTaXplWzFdO1xuICBjb25zdCB0aWxlQk91dGVyID0gd29ya2dyb3VwU2l6ZVswXTtcbiAgY29uc3QgdGlsZUlubmVyID0gdGlsZUFPdXRlciA+IHRpbGVCT3V0ZXIgPyB0aWxlQU91dGVyIDogdGlsZUJPdXRlcjtcbiAgcmV0dXJuIGBcbiAgdmFyPHdvcmtncm91cD4gbW1fQXN1YiA6IGFycmF5PGFycmF5PGYzMiwgJHt0aWxlSW5uZXJ9PiwgJHt0aWxlQU91dGVyfT47XG4gIHZhcjx3b3JrZ3JvdXA+IG1tX0JzdWIgOiBhcnJheTxhcnJheTxmMzIsICR7dGlsZUJPdXRlcn0+LCAke3RpbGVJbm5lcn0+O1xuXG4gIC8vIElmIHRoZSBvdXRwdXQgc2l6ZSBpcyBzbWFsbCBmb3IgbWF0cml4IG11bHRpcGxpY2F0aW9uLCBhdm9pZCB0byB1c2UgdmVjNFxuICAvLyBhbmQgaGFuZGxlIHNvbWUgZWxlbWVudHMgcGVyIHRocmVhZCB0byBvcHRpbWFsbHkgdXRpbGl6ZSB0aGUgQUxVLlxuICAvLyBSZWFkIGRhdGEgZnJvbSBnbG9iYWwgbWVtb3J5IHRvIHJlZ2lzdGVycyBmaXJzdGx5LCB0aGVuIHN0b3JlIHRoZW0gaW50b1xuICAvLyBzaGFyZWQgbWVtb3J5LCBzbyBpdCBpcyBpbnN0cnVjdGlvbi1MZXZlbCBwYXJhbGxlbGlzbSBmb3IgYXJpdGhtZXRpY1xuICAvLyBvcGVyYXRpb25zIGFuZCBvdGhlcnMgaGFuZGxlIElPIG9wZXJhdGlvbnMgYmV0d2VlbiBiYXJyaWVyIGFwaSwgbWFrZXMgQUxVXG4gIC8vIGFuZCBsb2FkL3N0b3JlIHVuaXRzIHdvcmsgc2ltdWx0YW5lb3VzbHksIGNvdWxkIGltcHJvdmVzIHRoZSBwZXJmb3JtYW5jZS5cbiAgJHttYWluKCl9IHtcbiAgICBsZXQgdGlsZVJvdyA9IGkzMihsb2NhbElkLnkpO1xuICAgIGxldCB0aWxlQ29sID0gaTMyKGxvY2FsSWQueCk7XG4gICAgbGV0IGdsb2JhbFJvdyA9IGkzMihnbG9iYWxJZC55KTtcbiAgICBsZXQgZ2xvYmFsQ29sID0gaTMyKGdsb2JhbElkLngpO1xuICAgIGxldCBiYXRjaCA9IGkzMihnbG9iYWxJZC56KTtcbiAgICBsZXQgYmF0Y2hBID0gYmF0Y2ggJSB1bmlmb3Jtcy5hU2hhcGVbMF07XG4gICAgbGV0IGJhdGNoQiA9IGJhdGNoICUgdW5pZm9ybXMuYlNoYXBlWzBdO1xuXG4gICAgLy8gdW5pZm9ybXMuZGltSW5uZXIgc2hvdWxkIGJlIGdyZWF0ZXIgdGhhbiAwLlxuICAgIGxldCBudW1UaWxlcyA9ICh1bmlmb3Jtcy5kaW1Jbm5lciAtIDEpIC8gJHt0aWxlSW5uZXJ9ICsgMTtcbiAgICB2YXIgYWNjID0gMC4wO1xuXG4gICAgdmFyIGdsb2JhbENvbEEgPSB0aWxlQ29sO1xuICAgIHZhciBnbG9iYWxSb3dCID0gMDtcbiAgICB2YXIgcmVnQSA9IG1tX3JlYWRBKGJhdGNoQSwgZ2xvYmFsUm93LCBnbG9iYWxDb2xBKTtcbiAgICB2YXIgcmVnQjAgPSBtbV9yZWFkQihiYXRjaEIsIGdsb2JhbFJvd0IgKyAyICogdGlsZVJvdywgZ2xvYmFsQ29sKTtcbiAgICB2YXIgcmVnQjEgPSBtbV9yZWFkQihiYXRjaEIsIGdsb2JhbFJvd0IgKyAyICogdGlsZVJvdyArIDEsIGdsb2JhbENvbCk7XG4gICAgZ2xvYmFsQ29sQSA9IGdsb2JhbENvbEEgKyAke3RpbGVJbm5lcn07XG4gICAgZ2xvYmFsUm93QiA9IGdsb2JhbFJvd0IgKyAke3RpbGVJbm5lcn07XG5cbiAgICBmb3IgKHZhciB0ID0gMDsgdCA8IG51bVRpbGVzOyB0ID0gdCArIDEpIHtcbiAgICAgIG1tX0FzdWJbdGlsZVJvd11bdGlsZUNvbF0gPSByZWdBO1xuICAgICAgbW1fQnN1YlsyICogdGlsZVJvd11bdGlsZUNvbF0gPSByZWdCMDtcbiAgICAgIG1tX0JzdWJbMiAqIHRpbGVSb3cgKyAxXVt0aWxlQ29sXSA9IHJlZ0IxO1xuXG4gICAgICB3b3JrZ3JvdXBCYXJyaWVyKCk7XG5cbiAgICAgIHJlZ0EgPSBtbV9yZWFkQShiYXRjaEEsIGdsb2JhbFJvdywgZ2xvYmFsQ29sQSk7XG4gICAgICByZWdCMCA9IG1tX3JlYWRCKGJhdGNoQiwgZ2xvYmFsUm93QiArIDIgKiB0aWxlUm93LCBnbG9iYWxDb2wpO1xuICAgICAgcmVnQjEgPSBtbV9yZWFkQihiYXRjaEIsIGdsb2JhbFJvd0IgKyAyICogdGlsZVJvdyArIDEsIGdsb2JhbENvbCk7XG4gICAgICBnbG9iYWxDb2xBID0gZ2xvYmFsQ29sQSArICR7dGlsZUlubmVyfTtcbiAgICAgIGdsb2JhbFJvd0IgPSBnbG9iYWxSb3dCICsgJHt0aWxlSW5uZXJ9O1xuXG4gICAgICBmb3IgKHZhciBrID0gMDsgayA8ICR7dGlsZUlubmVyfTsgayA9IGsgKyAxKSB7XG4gICAgICAgIGFjYyA9IGFjYyArIG1tX0FzdWJbdGlsZVJvd11ba10gKiBtbV9Cc3ViW2tdW3RpbGVDb2xdO1xuICAgICAgfVxuICAgICAgd29ya2dyb3VwQmFycmllcigpO1xuICAgIH1cblxuICAgIG1tX3dyaXRlKGJhdGNoLCBnbG9iYWxSb3csIGdsb2JhbENvbCwgYWNjKTtcbiAgfVxuICBgO1xufVxuXG5leHBvcnQgY2xhc3MgTWF0TXVsU21hbGxPdXRwdXRTaXplUHJvZ3JhbSBpbXBsZW1lbnRzIFdlYkdQVVByb2dyYW0ge1xuICBvdXRwdXRTaGFwZTogbnVtYmVyW107XG4gIHNoYWRlcktleTogc3RyaW5nO1xuICBkaXNwYXRjaExheW91dDoge3g6IG51bWJlcltdLCB5OiBudW1iZXJbXSwgejogbnVtYmVyW119O1xuICBkaXNwYXRjaDogW251bWJlciwgbnVtYmVyLCBudW1iZXJdO1xuICB2YXJpYWJsZU5hbWVzID0gWydBJywgJ0InXTtcbiAgdW5pZm9ybXMgPSBgZGltQU91dGVyIDogaTMyLCBkaW1CT3V0ZXIgOiBpMzIsIGRpbUlubmVyIDogaTMyLGA7XG4gIHdvcmtncm91cFNpemU6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXSA9IFsxNiwgOCwgMV07XG4gIHRyYW5zcG9zZUE6IGJvb2xlYW47XG4gIHRyYW5zcG9zZUI6IGJvb2xlYW47XG4gIGFkZEJpYXM6IGJvb2xlYW47XG4gIGFjdGl2YXRpb246IGJhY2tlbmRfdXRpbC5BY3RpdmF0aW9uO1xuICBoYXNQcmVsdUFjdGl2YXRpb25XZWlnaHRzOiBib29sZWFuO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgICAgYVNoYXBlOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl0sIGJTaGFwZTogW251bWJlciwgbnVtYmVyLCBudW1iZXJdLFxuICAgICAgb3V0cHV0U2hhcGU6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXSwgdHJhbnNwb3NlQSA9IGZhbHNlLFxuICAgICAgdHJhbnNwb3NlQiA9IGZhbHNlLCBiaWFzOiBUZW5zb3JJbmZvID0gbnVsbCxcbiAgICAgIGFjdGl2YXRpb246IGJhY2tlbmRfdXRpbC5BY3RpdmF0aW9uID0gbnVsbCxcbiAgICAgIHByZWx1QWN0aXZhdGlvbldlaWdodHM6IFRlbnNvckluZm8gPSBudWxsKSB7XG4gICAgdGhpcy5vdXRwdXRTaGFwZSA9IG91dHB1dFNoYXBlO1xuXG4gICAgdGhpcy5kaXNwYXRjaExheW91dCA9IHt4OiBbMl0sIHk6IFsxXSwgejogWzBdfTtcbiAgICB0aGlzLmRpc3BhdGNoID0gW1xuICAgICAgTWF0aC5jZWlsKG91dHB1dFNoYXBlWzJdIC8gdGhpcy53b3JrZ3JvdXBTaXplWzBdKSxcbiAgICAgIE1hdGguY2VpbChvdXRwdXRTaGFwZVsxXSAvIHRoaXMud29ya2dyb3VwU2l6ZVsxXSksIG91dHB1dFNoYXBlWzBdXG4gICAgXTtcblxuICAgIGNvbnN0IGFkZEJpYXMgPSBiaWFzICE9IG51bGw7XG4gICAgaWYgKGFkZEJpYXMpIHtcbiAgICAgIHRoaXMudmFyaWFibGVOYW1lcy5wdXNoKCdiaWFzJyk7XG4gICAgfVxuXG4gICAgY29uc3QgaGFzUHJlbHVBY3RpdmF0aW9uV2VpZ2h0cyA9IHByZWx1QWN0aXZhdGlvbldlaWdodHMgIT0gbnVsbDtcbiAgICBpZiAoaGFzUHJlbHVBY3RpdmF0aW9uV2VpZ2h0cykge1xuICAgICAgdGhpcy52YXJpYWJsZU5hbWVzLnB1c2goJ3ByZWx1QWN0aXZhdGlvbldlaWdodHMnKTtcbiAgICB9XG5cbiAgICB0aGlzLnRyYW5zcG9zZUEgPSB0cmFuc3Bvc2VBO1xuICAgIHRoaXMudHJhbnNwb3NlQiA9IHRyYW5zcG9zZUI7XG4gICAgdGhpcy5hZGRCaWFzID0gYWRkQmlhcztcbiAgICB0aGlzLmFjdGl2YXRpb24gPSBhY3RpdmF0aW9uO1xuICAgIHRoaXMuaGFzUHJlbHVBY3RpdmF0aW9uV2VpZ2h0cyA9IGhhc1ByZWx1QWN0aXZhdGlvbldlaWdodHM7XG4gICAgdGhpcy5zaGFkZXJLZXkgPVxuICAgICAgICBgbWF0TXVsU21hbGxPdXRwdXRTaXplXyR7dGhpcy5hY3RpdmF0aW9ufV8ke3RyYW5zcG9zZUF9XyR7dHJhbnNwb3NlQn1gO1xuICB9XG5cbiAgZ2V0VXNlckNvZGUoKTogc3RyaW5nIHtcbiAgICBjb25zdCB1c2VyQ29kZSA9IGBcbiAgICAgICR7YWN0aXZhdGlvbkZuU25pcHBldCh0aGlzLmFjdGl2YXRpb24sIHRoaXMuaGFzUHJlbHVBY3RpdmF0aW9uV2VpZ2h0cyl9XG4gICAgICAke1xuICAgICAgICBtYXRNdWxSZWFkV3JpdGVGblNvdXJjZShcbiAgICAgICAgICAgIHRoaXMuYWRkQmlhcywgdGhpcy5hY3RpdmF0aW9uLCB0aGlzLnRyYW5zcG9zZUEsIHRoaXMudHJhbnNwb3NlQil9XG4gICAgICAke21ha2VNYXRNdWxTbWFsbE91dHB1dFNpemVTb3VyY2UodGhpcy53b3JrZ3JvdXBTaXplKX1cbiAgICBgO1xuICAgIHJldHVybiB1c2VyQ29kZTtcbiAgfVxufVxuIl19","/**\n * @license\n * Copyright 2022 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { util } from '@tensorflow/tfjs-core';\nimport { activationFnSnippet, biasActivationSnippet } from './activation_util';\nimport { makeMatMulPackedSource, makeMatMulPackedVec4Source, matMulReadFnSource } from './matmul_packed_webgpu';\nimport { atomicAddSnippet } from './shader_util';\nimport { getMainHeaderString as main, typeSnippet } from './webgpu_program';\nimport { computeDispatch, flatDispatchLayout } from './webgpu_util';\nexport class MatMulSplitKProgram {\n    constructor(outputShape, dimInner, transposeA = false, transposeB = false) {\n        this.variableNames = ['A', 'B'];\n        this.uniforms = `dimAOuter : i32, dimBOuter : i32, dimInner : i32,`;\n        this.workgroupSize = [8, 8, 1];\n        this.atomic = true;\n        this.splitedDimInner = 128;\n        util.assert(outputShape[0] === 1, () => 'MatMulSplitKProgram only supports batch = 1.');\n        this.outputShape = outputShape;\n        this.dispatchLayout = { x: [2], y: [1], z: [0, 3] };\n        const isVec4 = (transposeA && this.outputShape[1] % 4 === 0 ||\n            !transposeA && dimInner % 4 === 0) &&\n            this.outputShape[2] % 4 === 0;\n        this.elementsPerThread = [4, 4, this.splitedDimInner];\n        this.outputComponent = isVec4 ? 4 : 1;\n        if (!isVec4) {\n            if (this.outputShape[1] < 16) {\n                this.elementsPerThread[1] = 1;\n            }\n            if (this.outputShape[2] < 16) {\n                this.elementsPerThread[0] = 1;\n            }\n        }\n        this.dispatch = computeDispatch(this.dispatchLayout, [\n            this.outputShape[0], this.outputShape[1], this.outputShape[2],\n            dimInner\n        ], this.workgroupSize, this.elementsPerThread);\n        this.transposeA = transposeA;\n        this.transposeB = transposeB;\n        this.shaderKey = `matMulSplitK_${transposeA}_${transposeB}_${this.elementsPerThread}_${this.outputComponent}`;\n    }\n    getUserCode() {\n        const component = this.outputComponent;\n        const userCode = `\n      ${matMulReadFnSource(false, this.transposeB, false, false, false, component)}\n      fn mm_write(batch: i32, row : i32, col : i32, value : ${typeSnippet(component)}) {\n        if (row < uniforms.dimAOuter && col < uniforms.dimBOuter) {\n          let coords = vec3<i32>(batch, row, col);\n          let flatIndex = getOutputIndexFromCoords(coords);\n          // The problem is that we should initialize output to zero before using.\n          // Otherwise, the original value will be added to the result.\n          for (var i = 0; i < ${component}; i = i + 1) {\n            ${atomicAddSnippet('&result[flatIndex + i]', `${component > 1 ? 'value[i]' : 'value'}`, 'float32')}\n          }\n        }\n      }\n      ${component === 4 ? makeMatMulPackedVec4Source(this.elementsPerThread, this.workgroupSize, this.transposeA, 32, true, this.splitedDimInner) :\n            makeMatMulPackedSource(this.elementsPerThread, this.workgroupSize, this.transposeA, 32, true, this.splitedDimInner)}\n    `;\n        return userCode;\n    }\n}\nexport class BiasActivationProgram {\n    constructor(outputShape, bias = null, activation = null, preluActivationWeights = null) {\n        this.uniforms = '';\n        this.variableNames = ['x'];\n        this.workgroupSize = [64, 1, 1];\n        this.size = true;\n        this.outputShape = outputShape;\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize);\n        this.addBias = bias != null;\n        this.hasPreluActivationWeights = preluActivationWeights != null;\n        this.activation = activation;\n        if (this.addBias) {\n            this.variableNames.push('bias');\n        }\n        if (this.hasPreluActivationWeights) {\n            this.variableNames.push('preluActivationWeights');\n        }\n        this.shaderKey = `biasActivation_${activation}`;\n    }\n    getUserCode() {\n        return `\n    ${activationFnSnippet(this.activation, this.hasPreluActivationWeights)}\n    ${main('index')} {\n      if (index < uniforms.size) {\n        let coords = getCoordsFromIndex(index);\n        var value = getXByOutputIndex(index);\n        ${biasActivationSnippet(this.addBias, this.activation)}\n        setOutputAtIndex(index, value);\n      }\n    }\n    `;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWF0bXVsX3NwbGl0S193ZWJncHUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9tYXRtdWxfc3BsaXRLX3dlYmdwdS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQTJCLElBQUksRUFBQyxNQUFNLHVCQUF1QixDQUFDO0FBRXJFLE9BQU8sRUFBQyxtQkFBbUIsRUFBRSxxQkFBcUIsRUFBQyxNQUFNLG1CQUFtQixDQUFDO0FBQzdFLE9BQU8sRUFBQyxzQkFBc0IsRUFBRSwwQkFBMEIsRUFBRSxrQkFBa0IsRUFBQyxNQUFNLHdCQUF3QixDQUFDO0FBQzlHLE9BQU8sRUFBQyxnQkFBZ0IsRUFBQyxNQUFNLGVBQWUsQ0FBQztBQUMvQyxPQUFPLEVBQUMsbUJBQW1CLElBQUksSUFBSSxFQUFFLFdBQVcsRUFBZ0IsTUFBTSxrQkFBa0IsQ0FBQztBQUN6RixPQUFPLEVBQUMsZUFBZSxFQUFFLGtCQUFrQixFQUFDLE1BQU0sZUFBZSxDQUFDO0FBRWxFLE1BQU0sT0FBTyxtQkFBbUI7SUFlOUIsWUFDSSxXQUFxQyxFQUFFLFFBQWdCLEVBQ3ZELFVBQVUsR0FBRyxLQUFLLEVBQUUsVUFBVSxHQUFHLEtBQUs7UUFaMUMsa0JBQWEsR0FBRyxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQztRQUMzQixhQUFRLEdBQUcsbURBQW1ELENBQUM7UUFDL0Qsa0JBQWEsR0FBNkIsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBSXBELFdBQU0sR0FBRyxJQUFJLENBQUM7UUFFZCxvQkFBZSxHQUFHLEdBQUcsQ0FBQztRQUtwQixJQUFJLENBQUMsTUFBTSxDQUNQLFdBQVcsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEVBQ3BCLEdBQUcsRUFBRSxDQUFDLDhDQUE4QyxDQUFDLENBQUM7UUFDMUQsSUFBSSxDQUFDLFdBQVcsR0FBRyxXQUFXLENBQUM7UUFDL0IsSUFBSSxDQUFDLGNBQWMsR0FBRyxFQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBQyxDQUFDO1FBQ2xELE1BQU0sTUFBTSxHQUFHLENBQUMsVUFBVSxJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUM7WUFDM0MsQ0FBQyxVQUFVLElBQUksUUFBUSxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDOUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ2xDLElBQUksQ0FBQyxpQkFBaUIsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDO1FBQ3RELElBQUksQ0FBQyxlQUFlLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN0QyxJQUFJLENBQUMsTUFBTSxFQUFFO1lBQ1gsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxHQUFHLEVBQUUsRUFBRTtnQkFDNUIsSUFBSSxDQUFDLGlCQUFpQixDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQzthQUMvQjtZQUNELElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLEVBQUU7Z0JBQzVCLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7YUFDL0I7U0FDRjtRQUVELElBQUksQ0FBQyxRQUFRLEdBQUcsZUFBZSxDQUMzQixJQUFJLENBQUMsY0FBYyxFQUNuQjtZQUNFLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQztZQUM3RCxRQUFRO1NBQ1QsRUFDRCxJQUFJLENBQUMsYUFBYSxFQUFFLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO1FBRWhELElBQUksQ0FBQyxVQUFVLEdBQUcsVUFBVSxDQUFDO1FBQzdCLElBQUksQ0FBQyxVQUFVLEdBQUcsVUFBVSxDQUFDO1FBQzdCLElBQUksQ0FBQyxTQUFTLEdBQUcsZ0JBQWdCLFVBQVUsSUFBSSxVQUFVLElBQ3JELElBQUksQ0FBQyxpQkFBaUIsSUFBSSxJQUFJLENBQUMsZUFBZSxFQUFFLENBQUM7SUFDdkQsQ0FBQztJQUVELFdBQVc7UUFDVCxNQUFNLFNBQVMsR0FBRyxJQUFJLENBQUMsZUFBZSxDQUFDO1FBQ3ZDLE1BQU0sUUFBUSxHQUFHO1FBRWIsa0JBQWtCLENBQ2QsS0FBSyxFQUFFLElBQUksQ0FBQyxVQUFVLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsU0FBUyxDQUFDOzhEQUUzRCxXQUFXLENBQUMsU0FBUyxDQUFDOzs7Ozs7Z0NBTUUsU0FBUztjQUVqQyxnQkFBZ0IsQ0FDWix3QkFBd0IsRUFBRSxHQUFHLFNBQVMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsT0FBTyxFQUFFLEVBQ25FLFNBQVMsQ0FBQzs7OztRQUtkLFNBQVMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLDBCQUEwQixDQUN0QixJQUFJLENBQUMsaUJBQWlCLEVBQUUsSUFBSSxDQUFDLGFBQWEsRUFDMUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDO1lBQ3RELHNCQUFzQixDQUNsQixJQUFJLENBQUMsaUJBQWlCLEVBQUUsSUFBSSxDQUFDLGFBQWEsRUFDMUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxlQUFlLENBQUM7S0FDekUsQ0FBQztRQUNGLE9BQU8sUUFBUSxDQUFDO0lBQ2xCLENBQUM7Q0FDRjtBQUVELE1BQU0sT0FBTyxxQkFBcUI7SUFhaEMsWUFDSSxXQUFxQixFQUFFLE9BQW1CLElBQUksRUFDOUMsYUFBc0MsSUFBSSxFQUMxQyx5QkFBcUMsSUFBSTtRQWI3QyxhQUFRLEdBQUcsRUFBRSxDQUFDO1FBR2Qsa0JBQWEsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ3RCLGtCQUFhLEdBQTZCLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUNyRCxTQUFJLEdBQUcsSUFBSSxDQUFDO1FBU1YsSUFBSSxDQUFDLFdBQVcsR0FBRyxXQUFXLENBQUM7UUFDL0IsSUFBSSxDQUFDLGNBQWMsR0FBRyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDM0QsSUFBSSxDQUFDLFFBQVEsR0FBRyxlQUFlLENBQzNCLElBQUksQ0FBQyxjQUFjLEVBQUUsSUFBSSxDQUFDLFdBQVcsRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7UUFDL0QsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLElBQUksSUFBSSxDQUFDO1FBQzVCLElBQUksQ0FBQyx5QkFBeUIsR0FBRyxzQkFBc0IsSUFBSSxJQUFJLENBQUM7UUFDaEUsSUFBSSxDQUFDLFVBQVUsR0FBRyxVQUFVLENBQUM7UUFDN0IsSUFBSSxJQUFJLENBQUMsT0FBTyxFQUFFO1lBQ2hCLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1NBQ2pDO1FBRUQsSUFBSSxJQUFJLENBQUMseUJBQXlCLEVBQUU7WUFDbEMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsd0JBQXdCLENBQUMsQ0FBQztTQUNuRDtRQUVELElBQUksQ0FBQyxTQUFTLEdBQUcsa0JBQWtCLFVBQVUsRUFBRSxDQUFDO0lBQ2xELENBQUM7SUFFRCxXQUFXO1FBQ1QsT0FBTztNQUNMLG1CQUFtQixDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDLHlCQUF5QixDQUFDO01BQ3BFLElBQUksQ0FBQyxPQUFPLENBQUM7Ozs7VUFJVCxxQkFBcUIsQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUM7Ozs7S0FJekQsQ0FBQztJQUNKLENBQUM7Q0FDRiIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtiYWNrZW5kX3V0aWwsIFRlbnNvckluZm8sIHV0aWx9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7YWN0aXZhdGlvbkZuU25pcHBldCwgYmlhc0FjdGl2YXRpb25TbmlwcGV0fSBmcm9tICcuL2FjdGl2YXRpb25fdXRpbCc7XG5pbXBvcnQge21ha2VNYXRNdWxQYWNrZWRTb3VyY2UsIG1ha2VNYXRNdWxQYWNrZWRWZWM0U291cmNlLCBtYXRNdWxSZWFkRm5Tb3VyY2V9IGZyb20gJy4vbWF0bXVsX3BhY2tlZF93ZWJncHUnO1xuaW1wb3J0IHthdG9taWNBZGRTbmlwcGV0fSBmcm9tICcuL3NoYWRlcl91dGlsJztcbmltcG9ydCB7Z2V0TWFpbkhlYWRlclN0cmluZyBhcyBtYWluLCB0eXBlU25pcHBldCwgV2ViR1BVUHJvZ3JhbX0gZnJvbSAnLi93ZWJncHVfcHJvZ3JhbSc7XG5pbXBvcnQge2NvbXB1dGVEaXNwYXRjaCwgZmxhdERpc3BhdGNoTGF5b3V0fSBmcm9tICcuL3dlYmdwdV91dGlsJztcblxuZXhwb3J0IGNsYXNzIE1hdE11bFNwbGl0S1Byb2dyYW0gaW1wbGVtZW50cyBXZWJHUFVQcm9ncmFtIHtcbiAgb3V0cHV0U2hhcGU6IG51bWJlcltdO1xuICBzaGFkZXJLZXk6IHN0cmluZztcbiAgZGlzcGF0Y2hMYXlvdXQ6IHt4OiBudW1iZXJbXSwgeTogbnVtYmVyW10sIHo6IG51bWJlcltdfTtcbiAgZGlzcGF0Y2g6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXTtcbiAgdmFyaWFibGVOYW1lcyA9IFsnQScsICdCJ107XG4gIHVuaWZvcm1zID0gYGRpbUFPdXRlciA6IGkzMiwgZGltQk91dGVyIDogaTMyLCBkaW1Jbm5lciA6IGkzMixgO1xuICB3b3JrZ3JvdXBTaXplOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl0gPSBbOCwgOCwgMV07XG4gIGVsZW1lbnRzUGVyVGhyZWFkOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl07XG4gIHRyYW5zcG9zZUE6IGJvb2xlYW47XG4gIHRyYW5zcG9zZUI6IGJvb2xlYW47XG4gIGF0b21pYyA9IHRydWU7XG4gIG91dHB1dENvbXBvbmVudDogbnVtYmVyO1xuICBzcGxpdGVkRGltSW5uZXIgPSAxMjg7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgICBvdXRwdXRTaGFwZTogW251bWJlciwgbnVtYmVyLCBudW1iZXJdLCBkaW1Jbm5lcjogbnVtYmVyLFxuICAgICAgdHJhbnNwb3NlQSA9IGZhbHNlLCB0cmFuc3Bvc2VCID0gZmFsc2UpIHtcbiAgICB1dGlsLmFzc2VydChcbiAgICAgICAgb3V0cHV0U2hhcGVbMF0gPT09IDEsXG4gICAgICAgICgpID0+ICdNYXRNdWxTcGxpdEtQcm9ncmFtIG9ubHkgc3VwcG9ydHMgYmF0Y2ggPSAxLicpO1xuICAgIHRoaXMub3V0cHV0U2hhcGUgPSBvdXRwdXRTaGFwZTtcbiAgICB0aGlzLmRpc3BhdGNoTGF5b3V0ID0ge3g6IFsyXSwgeTogWzFdLCB6OiBbMCwgM119O1xuICAgIGNvbnN0IGlzVmVjNCA9ICh0cmFuc3Bvc2VBICYmIHRoaXMub3V0cHV0U2hhcGVbMV0gJSA0ID09PSAwIHx8XG4gICAgICAgICAgICAgICAgICAgICF0cmFuc3Bvc2VBICYmIGRpbUlubmVyICUgNCA9PT0gMCkgJiZcbiAgICAgICAgdGhpcy5vdXRwdXRTaGFwZVsyXSAlIDQgPT09IDA7XG4gICAgdGhpcy5lbGVtZW50c1BlclRocmVhZCA9IFs0LCA0LCB0aGlzLnNwbGl0ZWREaW1Jbm5lcl07XG4gICAgdGhpcy5vdXRwdXRDb21wb25lbnQgPSBpc1ZlYzQgPyA0IDogMTtcbiAgICBpZiAoIWlzVmVjNCkge1xuICAgICAgaWYgKHRoaXMub3V0cHV0U2hhcGVbMV0gPCAxNikge1xuICAgICAgICB0aGlzLmVsZW1lbnRzUGVyVGhyZWFkWzFdID0gMTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLm91dHB1dFNoYXBlWzJdIDwgMTYpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50c1BlclRocmVhZFswXSA9IDE7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5kaXNwYXRjaCA9IGNvbXB1dGVEaXNwYXRjaChcbiAgICAgICAgdGhpcy5kaXNwYXRjaExheW91dCxcbiAgICAgICAgW1xuICAgICAgICAgIHRoaXMub3V0cHV0U2hhcGVbMF0sIHRoaXMub3V0cHV0U2hhcGVbMV0sIHRoaXMub3V0cHV0U2hhcGVbMl0sXG4gICAgICAgICAgZGltSW5uZXJcbiAgICAgICAgXSxcbiAgICAgICAgdGhpcy53b3JrZ3JvdXBTaXplLCB0aGlzLmVsZW1lbnRzUGVyVGhyZWFkKTtcblxuICAgIHRoaXMudHJhbnNwb3NlQSA9IHRyYW5zcG9zZUE7XG4gICAgdGhpcy50cmFuc3Bvc2VCID0gdHJhbnNwb3NlQjtcbiAgICB0aGlzLnNoYWRlcktleSA9IGBtYXRNdWxTcGxpdEtfJHt0cmFuc3Bvc2VBfV8ke3RyYW5zcG9zZUJ9XyR7XG4gICAgICAgIHRoaXMuZWxlbWVudHNQZXJUaHJlYWR9XyR7dGhpcy5vdXRwdXRDb21wb25lbnR9YDtcbiAgfVxuXG4gIGdldFVzZXJDb2RlKCk6IHN0cmluZyB7XG4gICAgY29uc3QgY29tcG9uZW50ID0gdGhpcy5vdXRwdXRDb21wb25lbnQ7XG4gICAgY29uc3QgdXNlckNvZGUgPSBgXG4gICAgICAke1xuICAgICAgICBtYXRNdWxSZWFkRm5Tb3VyY2UoXG4gICAgICAgICAgICBmYWxzZSwgdGhpcy50cmFuc3Bvc2VCLCBmYWxzZSwgZmFsc2UsIGZhbHNlLCBjb21wb25lbnQpfVxuICAgICAgZm4gbW1fd3JpdGUoYmF0Y2g6IGkzMiwgcm93IDogaTMyLCBjb2wgOiBpMzIsIHZhbHVlIDogJHtcbiAgICAgICAgdHlwZVNuaXBwZXQoY29tcG9uZW50KX0pIHtcbiAgICAgICAgaWYgKHJvdyA8IHVuaWZvcm1zLmRpbUFPdXRlciAmJiBjb2wgPCB1bmlmb3Jtcy5kaW1CT3V0ZXIpIHtcbiAgICAgICAgICBsZXQgY29vcmRzID0gdmVjMzxpMzI+KGJhdGNoLCByb3csIGNvbCk7XG4gICAgICAgICAgbGV0IGZsYXRJbmRleCA9IGdldE91dHB1dEluZGV4RnJvbUNvb3Jkcyhjb29yZHMpO1xuICAgICAgICAgIC8vIFRoZSBwcm9ibGVtIGlzIHRoYXQgd2Ugc2hvdWxkIGluaXRpYWxpemUgb3V0cHV0IHRvIHplcm8gYmVmb3JlIHVzaW5nLlxuICAgICAgICAgIC8vIE90aGVyd2lzZSwgdGhlIG9yaWdpbmFsIHZhbHVlIHdpbGwgYmUgYWRkZWQgdG8gdGhlIHJlc3VsdC5cbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICR7Y29tcG9uZW50fTsgaSA9IGkgKyAxKSB7XG4gICAgICAgICAgICAke1xuICAgICAgICBhdG9taWNBZGRTbmlwcGV0KFxuICAgICAgICAgICAgJyZyZXN1bHRbZmxhdEluZGV4ICsgaV0nLCBgJHtjb21wb25lbnQgPiAxID8gJ3ZhbHVlW2ldJyA6ICd2YWx1ZSd9YCxcbiAgICAgICAgICAgICdmbG9hdDMyJyl9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICAke1xuICAgICAgICBjb21wb25lbnQgPT09IDQgPyBtYWtlTWF0TXVsUGFja2VkVmVjNFNvdXJjZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudHNQZXJUaHJlYWQsIHRoaXMud29ya2dyb3VwU2l6ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHJhbnNwb3NlQSwgMzIsIHRydWUsIHRoaXMuc3BsaXRlZERpbUlubmVyKSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VNYXRNdWxQYWNrZWRTb3VyY2UoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnRzUGVyVGhyZWFkLCB0aGlzLndvcmtncm91cFNpemUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYW5zcG9zZUEsIDMyLCB0cnVlLCB0aGlzLnNwbGl0ZWREaW1Jbm5lcil9XG4gICAgYDtcbiAgICByZXR1cm4gdXNlckNvZGU7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEJpYXNBY3RpdmF0aW9uUHJvZ3JhbSBpbXBsZW1lbnRzIFdlYkdQVVByb2dyYW0ge1xuICBvdXRwdXRTaGFwZTogbnVtYmVyW107XG4gIHNoYWRlcktleTogc3RyaW5nO1xuICB1bmlmb3JtcyA9ICcnO1xuICBkaXNwYXRjaExheW91dDoge3g6IG51bWJlcltdfTtcbiAgZGlzcGF0Y2g6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXTtcbiAgdmFyaWFibGVOYW1lcyA9IFsneCddO1xuICB3b3JrZ3JvdXBTaXplOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl0gPSBbNjQsIDEsIDFdO1xuICBzaXplID0gdHJ1ZTtcbiAgcHJpdmF0ZSBhZGRCaWFzOiBib29sZWFuO1xuICBwcml2YXRlIGFjdGl2YXRpb246IGJhY2tlbmRfdXRpbC5BY3RpdmF0aW9uO1xuICBwcml2YXRlIGhhc1ByZWx1QWN0aXZhdGlvbldlaWdodHM6IGJvb2xlYW47XG5cbiAgY29uc3RydWN0b3IoXG4gICAgICBvdXRwdXRTaGFwZTogbnVtYmVyW10sIGJpYXM6IFRlbnNvckluZm8gPSBudWxsLFxuICAgICAgYWN0aXZhdGlvbjogYmFja2VuZF91dGlsLkFjdGl2YXRpb24gPSBudWxsLFxuICAgICAgcHJlbHVBY3RpdmF0aW9uV2VpZ2h0czogVGVuc29ySW5mbyA9IG51bGwpIHtcbiAgICB0aGlzLm91dHB1dFNoYXBlID0gb3V0cHV0U2hhcGU7XG4gICAgdGhpcy5kaXNwYXRjaExheW91dCA9IGZsYXREaXNwYXRjaExheW91dCh0aGlzLm91dHB1dFNoYXBlKTtcbiAgICB0aGlzLmRpc3BhdGNoID0gY29tcHV0ZURpc3BhdGNoKFxuICAgICAgICB0aGlzLmRpc3BhdGNoTGF5b3V0LCB0aGlzLm91dHB1dFNoYXBlLCB0aGlzLndvcmtncm91cFNpemUpO1xuICAgIHRoaXMuYWRkQmlhcyA9IGJpYXMgIT0gbnVsbDtcbiAgICB0aGlzLmhhc1ByZWx1QWN0aXZhdGlvbldlaWdodHMgPSBwcmVsdUFjdGl2YXRpb25XZWlnaHRzICE9IG51bGw7XG4gICAgdGhpcy5hY3RpdmF0aW9uID0gYWN0aXZhdGlvbjtcbiAgICBpZiAodGhpcy5hZGRCaWFzKSB7XG4gICAgICB0aGlzLnZhcmlhYmxlTmFtZXMucHVzaCgnYmlhcycpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmhhc1ByZWx1QWN0aXZhdGlvbldlaWdodHMpIHtcbiAgICAgIHRoaXMudmFyaWFibGVOYW1lcy5wdXNoKCdwcmVsdUFjdGl2YXRpb25XZWlnaHRzJyk7XG4gICAgfVxuXG4gICAgdGhpcy5zaGFkZXJLZXkgPSBgYmlhc0FjdGl2YXRpb25fJHthY3RpdmF0aW9ufWA7XG4gIH1cblxuICBnZXRVc2VyQ29kZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiBgXG4gICAgJHthY3RpdmF0aW9uRm5TbmlwcGV0KHRoaXMuYWN0aXZhdGlvbiwgdGhpcy5oYXNQcmVsdUFjdGl2YXRpb25XZWlnaHRzKX1cbiAgICAke21haW4oJ2luZGV4Jyl9IHtcbiAgICAgIGlmIChpbmRleCA8IHVuaWZvcm1zLnNpemUpIHtcbiAgICAgICAgbGV0IGNvb3JkcyA9IGdldENvb3Jkc0Zyb21JbmRleChpbmRleCk7XG4gICAgICAgIHZhciB2YWx1ZSA9IGdldFhCeU91dHB1dEluZGV4KGluZGV4KTtcbiAgICAgICAgJHtiaWFzQWN0aXZhdGlvblNuaXBwZXQodGhpcy5hZGRCaWFzLCB0aGlzLmFjdGl2YXRpb24pfVxuICAgICAgICBzZXRPdXRwdXRBdEluZGV4KGluZGV4LCB2YWx1ZSk7XG4gICAgICB9XG4gICAgfVxuICAgIGA7XG4gIH1cbn1cbiJdfQ==","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { getMainHeaderString as main } from './webgpu_program';\nimport { computeDispatch, flatDispatchLayout } from './webgpu_util';\nexport class FillProgram {\n    constructor(shape) {\n        this.variableNames = [];\n        this.outputShape = [];\n        this.uniforms = 'value : f32,';\n        this.workgroupSize = [64, 1, 1];\n        this.size = true;\n        this.outputShape = shape;\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize);\n        this.shaderKey = 'fill';\n    }\n    getUserCode() {\n        const userCode = `\n    ${main('index')} {\n      if (index < uniforms.size) {\n        setOutputAtIndex(index, uniforms.value);\n      }\n    }\n  `;\n        return userCode;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmlsbF93ZWJncHUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9maWxsX3dlYmdwdS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQUMsbUJBQW1CLElBQUksSUFBSSxFQUFnQixNQUFNLGtCQUFrQixDQUFDO0FBQzVFLE9BQU8sRUFBQyxlQUFlLEVBQUUsa0JBQWtCLEVBQUMsTUFBTSxlQUFlLENBQUM7QUFFbEUsTUFBTSxPQUFPLFdBQVc7SUFVdEIsWUFBWSxLQUFlO1FBVDNCLGtCQUFhLEdBQWEsRUFBRSxDQUFDO1FBQzdCLGdCQUFXLEdBQWEsRUFBRSxDQUFDO1FBSTNCLGFBQVEsR0FBRyxjQUFjLENBQUM7UUFDMUIsa0JBQWEsR0FBNkIsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ3JELFNBQUksR0FBRyxJQUFJLENBQUM7UUFHVixJQUFJLENBQUMsV0FBVyxHQUFHLEtBQUssQ0FBQztRQUN6QixJQUFJLENBQUMsY0FBYyxHQUFHLGtCQUFrQixDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUMzRCxJQUFJLENBQUMsUUFBUSxHQUFHLGVBQWUsQ0FDM0IsSUFBSSxDQUFDLGNBQWMsRUFBRSxJQUFJLENBQUMsV0FBVyxFQUFFLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQztRQUUvRCxJQUFJLENBQUMsU0FBUyxHQUFHLE1BQU0sQ0FBQztJQUMxQixDQUFDO0lBRUQsV0FBVztRQUNULE1BQU0sUUFBUSxHQUFHO01BQ2YsSUFBSSxDQUFDLE9BQU8sQ0FBQzs7Ozs7R0FLaEIsQ0FBQztRQUNBLE9BQU8sUUFBUSxDQUFDO0lBQ2xCLENBQUM7Q0FDRiIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtnZXRNYWluSGVhZGVyU3RyaW5nIGFzIG1haW4sIFdlYkdQVVByb2dyYW19IGZyb20gJy4vd2ViZ3B1X3Byb2dyYW0nO1xuaW1wb3J0IHtjb21wdXRlRGlzcGF0Y2gsIGZsYXREaXNwYXRjaExheW91dH0gZnJvbSAnLi93ZWJncHVfdXRpbCc7XG5cbmV4cG9ydCBjbGFzcyBGaWxsUHJvZ3JhbSBpbXBsZW1lbnRzIFdlYkdQVVByb2dyYW0ge1xuICB2YXJpYWJsZU5hbWVzOiBzdHJpbmdbXSA9IFtdO1xuICBvdXRwdXRTaGFwZTogbnVtYmVyW10gPSBbXTtcbiAgc2hhZGVyS2V5OiBzdHJpbmc7XG4gIGRpc3BhdGNoTGF5b3V0OiB7eDogbnVtYmVyW119O1xuICBkaXNwYXRjaDogW251bWJlciwgbnVtYmVyLCBudW1iZXJdO1xuICB1bmlmb3JtcyA9ICd2YWx1ZSA6IGYzMiwnO1xuICB3b3JrZ3JvdXBTaXplOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl0gPSBbNjQsIDEsIDFdO1xuICBzaXplID0gdHJ1ZTtcblxuICBjb25zdHJ1Y3RvcihzaGFwZTogbnVtYmVyW10pIHtcbiAgICB0aGlzLm91dHB1dFNoYXBlID0gc2hhcGU7XG4gICAgdGhpcy5kaXNwYXRjaExheW91dCA9IGZsYXREaXNwYXRjaExheW91dCh0aGlzLm91dHB1dFNoYXBlKTtcbiAgICB0aGlzLmRpc3BhdGNoID0gY29tcHV0ZURpc3BhdGNoKFxuICAgICAgICB0aGlzLmRpc3BhdGNoTGF5b3V0LCB0aGlzLm91dHB1dFNoYXBlLCB0aGlzLndvcmtncm91cFNpemUpO1xuXG4gICAgdGhpcy5zaGFkZXJLZXkgPSAnZmlsbCc7XG4gIH1cblxuICBnZXRVc2VyQ29kZSgpOiBzdHJpbmcge1xuICAgIGNvbnN0IHVzZXJDb2RlID0gYFxuICAgICR7bWFpbignaW5kZXgnKX0ge1xuICAgICAgaWYgKGluZGV4IDwgdW5pZm9ybXMuc2l6ZSkge1xuICAgICAgICBzZXRPdXRwdXRBdEluZGV4KGluZGV4LCB1bmlmb3Jtcy52YWx1ZSk7XG4gICAgICB9XG4gICAgfVxuICBgO1xuICAgIHJldHVybiB1c2VyQ29kZTtcbiAgfVxufVxuIl19","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Fill, util } from '@tensorflow/tfjs-core';\nimport { FillProgram } from '../fill_webgpu';\nexport function fill(args) {\n    const { backend, attrs } = args;\n    const { shape, value } = attrs;\n    let { dtype } = attrs;\n    dtype = dtype || util.inferDtype(value);\n    if (dtype === 'string') {\n        // String type should be handled in CPU memory.\n        const values = util.getArrayFromDType(dtype, util.sizeFromShape(shape));\n        values.fill(value);\n        return backend.makeTensorInfo(shape, dtype, values);\n    }\n    else {\n        const program = new FillProgram(shape);\n        const uniformData = [{ type: 'float32', data: [value] }];\n        return backend.runWebGPUProgram(program, [], dtype, uniformData);\n    }\n}\nexport const fillConfig = {\n    kernelName: Fill,\n    backendName: 'webgpu',\n    kernelFunc: fill\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRmlsbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2tlcm5lbHMvRmlsbC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQUMsSUFBSSxFQUFtRCxJQUFJLEVBQUMsTUFBTSx1QkFBdUIsQ0FBQztBQUdsRyxPQUFPLEVBQUMsV0FBVyxFQUFDLE1BQU0sZ0JBQWdCLENBQUM7QUFFM0MsTUFBTSxVQUFVLElBQUksQ0FBQyxJQUFnRDtJQUVuRSxNQUFNLEVBQUMsT0FBTyxFQUFFLEtBQUssRUFBQyxHQUFHLElBQUksQ0FBQztJQUM5QixNQUFNLEVBQUMsS0FBSyxFQUFFLEtBQUssRUFBQyxHQUFHLEtBQUssQ0FBQztJQUM3QixJQUFJLEVBQUMsS0FBSyxFQUFDLEdBQUcsS0FBSyxDQUFDO0lBRXBCLEtBQUssR0FBRyxLQUFLLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUV4QyxJQUFJLEtBQUssS0FBSyxRQUFRLEVBQUU7UUFDdEIsK0NBQStDO1FBQy9DLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO1FBQ3hFLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBZSxDQUFDLENBQUM7UUFDN0IsT0FBTyxPQUFPLENBQUMsY0FBYyxDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUUsTUFBTSxDQUFDLENBQUM7S0FDckQ7U0FBTTtRQUNMLE1BQU0sT0FBTyxHQUFHLElBQUksV0FBVyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3ZDLE1BQU0sV0FBVyxHQUFHLENBQUMsRUFBQyxJQUFJLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxDQUFDLEtBQWUsQ0FBQyxFQUFDLENBQUMsQ0FBQztRQUNqRSxPQUFPLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsRUFBRSxFQUFFLEtBQUssRUFBRSxXQUFXLENBQUMsQ0FBQztLQUNsRTtBQUNILENBQUM7QUFFRCxNQUFNLENBQUMsTUFBTSxVQUFVLEdBQWlCO0lBQ3RDLFVBQVUsRUFBRSxJQUFJO0lBQ2hCLFdBQVcsRUFBRSxRQUFRO0lBQ3JCLFVBQVUsRUFBRSxJQUE2QjtDQUMxQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge0ZpbGwsIEZpbGxBdHRycywgS2VybmVsQ29uZmlnLCBLZXJuZWxGdW5jLCBUZW5zb3JJbmZvLCB1dGlsfSBmcm9tICdAdGVuc29yZmxvdy90ZmpzLWNvcmUnO1xuXG5pbXBvcnQge1dlYkdQVUJhY2tlbmR9IGZyb20gJy4uL2JhY2tlbmRfd2ViZ3B1JztcbmltcG9ydCB7RmlsbFByb2dyYW19IGZyb20gJy4uL2ZpbGxfd2ViZ3B1JztcblxuZXhwb3J0IGZ1bmN0aW9uIGZpbGwoYXJnczoge2JhY2tlbmQ6IFdlYkdQVUJhY2tlbmQsIGF0dHJzOiBGaWxsQXR0cnN9KTpcbiAgICBUZW5zb3JJbmZvIHtcbiAgY29uc3Qge2JhY2tlbmQsIGF0dHJzfSA9IGFyZ3M7XG4gIGNvbnN0IHtzaGFwZSwgdmFsdWV9ID0gYXR0cnM7XG4gIGxldCB7ZHR5cGV9ID0gYXR0cnM7XG5cbiAgZHR5cGUgPSBkdHlwZSB8fCB1dGlsLmluZmVyRHR5cGUodmFsdWUpO1xuXG4gIGlmIChkdHlwZSA9PT0gJ3N0cmluZycpIHtcbiAgICAvLyBTdHJpbmcgdHlwZSBzaG91bGQgYmUgaGFuZGxlZCBpbiBDUFUgbWVtb3J5LlxuICAgIGNvbnN0IHZhbHVlcyA9IHV0aWwuZ2V0QXJyYXlGcm9tRFR5cGUoZHR5cGUsIHV0aWwuc2l6ZUZyb21TaGFwZShzaGFwZSkpO1xuICAgIHZhbHVlcy5maWxsKHZhbHVlIGFzIHN0cmluZyk7XG4gICAgcmV0dXJuIGJhY2tlbmQubWFrZVRlbnNvckluZm8oc2hhcGUsIGR0eXBlLCB2YWx1ZXMpO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IHByb2dyYW0gPSBuZXcgRmlsbFByb2dyYW0oc2hhcGUpO1xuICAgIGNvbnN0IHVuaWZvcm1EYXRhID0gW3t0eXBlOiAnZmxvYXQzMicsIGRhdGE6IFt2YWx1ZSBhcyBudW1iZXJdfV07XG4gICAgcmV0dXJuIGJhY2tlbmQucnVuV2ViR1BVUHJvZ3JhbShwcm9ncmFtLCBbXSwgZHR5cGUsIHVuaWZvcm1EYXRhKTtcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgZmlsbENvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBGaWxsLFxuICBiYWNrZW5kTmFtZTogJ3dlYmdwdScsXG4gIGtlcm5lbEZ1bmM6IGZpbGwgYXMgdW5rbm93biBhcyBLZXJuZWxGdW5jXG59O1xuIl19","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Reshape, util } from '@tensorflow/tfjs-core';\nexport function reshape(args) {\n    const { inputs, attrs } = args;\n    const { x } = inputs;\n    const { shape } = attrs;\n    const xSize = util.sizeFromShape(x.shape);\n    const $shape = util.inferFromImplicitShape(shape, xSize);\n    const $xSize = util.sizeFromShape($shape);\n    util.assert(xSize === $xSize, () => `The new shape (${$shape}) has ${$xSize} elements and the old ` +\n        `shape (${x.shape}) has ${xSize} elements. The new shape and old ` +\n        `shape must have the same number of elements.`);\n    // Backend needs to track refCount for the dataId for reshape op\n    args.backend.incRef(x.dataId);\n    return { dataId: x.dataId, shape: $shape, dtype: x.dtype };\n}\nexport const reshapeConfig = {\n    kernelName: Reshape,\n    backendName: 'webgpu',\n    kernelFunc: reshape\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUmVzaGFwZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2tlcm5lbHMvUmVzaGFwZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQTJCLE9BQU8sRUFBMkMsSUFBSSxFQUFDLE1BQU0sdUJBQXVCLENBQUM7QUFJdkgsTUFBTSxVQUFVLE9BQU8sQ0FDbkIsSUFBMEU7SUFFNUUsTUFBTSxFQUFDLE1BQU0sRUFBRSxLQUFLLEVBQUMsR0FBRyxJQUFJLENBQUM7SUFDN0IsTUFBTSxFQUFDLENBQUMsRUFBQyxHQUFHLE1BQU0sQ0FBQztJQUNuQixNQUFNLEVBQUMsS0FBSyxFQUFDLEdBQUcsS0FBSyxDQUFDO0lBRXRCLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQzFDLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxLQUFLLEVBQUUsS0FBSyxDQUFDLENBQUM7SUFDekQsTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUUxQyxJQUFJLENBQUMsTUFBTSxDQUNQLEtBQUssS0FBSyxNQUFNLEVBQ2hCLEdBQUcsRUFBRSxDQUFDLGtCQUFrQixNQUFNLFNBQVMsTUFBTSx3QkFBd0I7UUFDakUsVUFBVSxDQUFDLENBQUMsS0FBSyxTQUFTLEtBQUssbUNBQW1DO1FBQ2xFLDhDQUE4QyxDQUFDLENBQUM7SUFFeEQsZ0VBQWdFO0lBQ2hFLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUM5QixPQUFPLEVBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxNQUFNLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDLEtBQUssRUFBQyxDQUFDO0FBQzNELENBQUM7QUFFRCxNQUFNLENBQUMsTUFBTSxhQUFhLEdBQWlCO0lBQ3pDLFVBQVUsRUFBRSxPQUFPO0lBQ25CLFdBQVcsRUFBRSxRQUFRO0lBQ3JCLFVBQVUsRUFBRSxPQUFnQztDQUM3QyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge0tlcm5lbENvbmZpZywgS2VybmVsRnVuYywgUmVzaGFwZSwgUmVzaGFwZUF0dHJzLCBSZXNoYXBlSW5wdXRzLCBUZW5zb3JJbmZvLCB1dGlsfSBmcm9tICdAdGVuc29yZmxvdy90ZmpzLWNvcmUnO1xuXG5pbXBvcnQge1dlYkdQVUJhY2tlbmR9IGZyb20gJy4uL2JhY2tlbmRfd2ViZ3B1JztcblxuZXhwb3J0IGZ1bmN0aW9uIHJlc2hhcGUoXG4gICAgYXJnczoge2lucHV0czogUmVzaGFwZUlucHV0cywgYmFja2VuZDogV2ViR1BVQmFja2VuZCwgYXR0cnM6IFJlc2hhcGVBdHRyc30pOlxuICAgIFRlbnNvckluZm8ge1xuICBjb25zdCB7aW5wdXRzLCBhdHRyc30gPSBhcmdzO1xuICBjb25zdCB7eH0gPSBpbnB1dHM7XG4gIGNvbnN0IHtzaGFwZX0gPSBhdHRycztcblxuICBjb25zdCB4U2l6ZSA9IHV0aWwuc2l6ZUZyb21TaGFwZSh4LnNoYXBlKTtcbiAgY29uc3QgJHNoYXBlID0gdXRpbC5pbmZlckZyb21JbXBsaWNpdFNoYXBlKHNoYXBlLCB4U2l6ZSk7XG4gIGNvbnN0ICR4U2l6ZSA9IHV0aWwuc2l6ZUZyb21TaGFwZSgkc2hhcGUpO1xuXG4gIHV0aWwuYXNzZXJ0KFxuICAgICAgeFNpemUgPT09ICR4U2l6ZSxcbiAgICAgICgpID0+IGBUaGUgbmV3IHNoYXBlICgkeyRzaGFwZX0pIGhhcyAkeyR4U2l6ZX0gZWxlbWVudHMgYW5kIHRoZSBvbGQgYCArXG4gICAgICAgICAgYHNoYXBlICgke3guc2hhcGV9KSBoYXMgJHt4U2l6ZX0gZWxlbWVudHMuIFRoZSBuZXcgc2hhcGUgYW5kIG9sZCBgICtcbiAgICAgICAgICBgc2hhcGUgbXVzdCBoYXZlIHRoZSBzYW1lIG51bWJlciBvZiBlbGVtZW50cy5gKTtcblxuICAvLyBCYWNrZW5kIG5lZWRzIHRvIHRyYWNrIHJlZkNvdW50IGZvciB0aGUgZGF0YUlkIGZvciByZXNoYXBlIG9wXG4gIGFyZ3MuYmFja2VuZC5pbmNSZWYoeC5kYXRhSWQpO1xuICByZXR1cm4ge2RhdGFJZDogeC5kYXRhSWQsIHNoYXBlOiAkc2hhcGUsIGR0eXBlOiB4LmR0eXBlfTtcbn1cblxuZXhwb3J0IGNvbnN0IHJlc2hhcGVDb25maWc6IEtlcm5lbENvbmZpZyA9IHtcbiAga2VybmVsTmFtZTogUmVzaGFwZSxcbiAgYmFja2VuZE5hbWU6ICd3ZWJncHUnLFxuICBrZXJuZWxGdW5jOiByZXNoYXBlIGFzIHVua25vd24gYXMgS2VybmVsRnVuY1xufTtcbiJdfQ==","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { broadcast_util, env, util } from '@tensorflow/tfjs-core';\nimport { MatMulPackedProgram } from '../matmul_packed_webgpu';\nimport { MatMulReduceProgram } from '../matmul_reduce_webgpu';\nimport { MatMulSmallOutputSizeProgram } from '../matmul_small_output_size_webgpu';\nimport { BiasActivationProgram, MatMulSplitKProgram } from '../matmul_splitK_webgpu';\nimport { MatMulProgramType } from '../webgpu_util';\nimport { fill } from './Fill';\nimport { reshape } from './Reshape';\nexport function batchMatMulImpl({ a, b, transposeA, transposeB, backend, bias = null, preluActivationWeights = null, leakyreluAlpha = 0, activation = null }) {\n    const aRank = a.shape.length;\n    const bRank = b.shape.length;\n    const innerShapeA = transposeA ? a.shape[aRank - 2] : a.shape[aRank - 1];\n    const innerShapeB = transposeB ? b.shape[bRank - 1] : b.shape[bRank - 2];\n    const outerShapeA = transposeA ? a.shape[aRank - 1] : a.shape[aRank - 2];\n    const outerShapeB = transposeB ? b.shape[bRank - 2] : b.shape[bRank - 1];\n    const outerDimsA = a.shape.slice(0, -2);\n    const outerDimsB = b.shape.slice(0, -2);\n    const batchDimA = util.sizeFromShape(outerDimsA);\n    const batchDimB = util.sizeFromShape(outerDimsB);\n    const outShapeOuterDims = broadcast_util.assertAndGetBroadcastShape(a.shape.slice(0, -2), b.shape.slice(0, -2));\n    const outShape = outShapeOuterDims.concat([outerShapeA, outerShapeB]);\n    util.assert(innerShapeA === innerShapeB, () => `Error in matMul: inner shapes (${innerShapeA}) and (` +\n        `${innerShapeB}) of Tensors with shapes ${a.shape} and ` +\n        `${b.shape} and transposeA=${transposeA}` +\n        ` and transposeB=${transposeB} must match.`);\n    const a3dShape = transposeA ?\n        [batchDimA, innerShapeA, outerShapeA] :\n        [batchDimA, outerShapeA, innerShapeA];\n    const b3dShape = transposeB ?\n        [batchDimB, outerShapeB, innerShapeB] :\n        [batchDimB, innerShapeB, outerShapeB];\n    // The rest of the implementation is designed to operate on rank-3 tensors\n    const a3d = reshape({ inputs: { x: a }, backend, attrs: { shape: a3dShape } });\n    const b3d = reshape({ inputs: { x: b }, backend, attrs: { shape: b3dShape } });\n    const intermediates = [a3d, b3d];\n    const batchDim = Math.max(batchDimA, batchDimB);\n    const inputs = [a3d, b3d];\n    const dimensions = [\n        { type: 'int32', data: [outerShapeA] }, { type: 'int32', data: [outerShapeB] },\n        { type: 'int32', data: [innerShapeA] }\n    ];\n    let program;\n    let out;\n    const outputShape = [batchDim, outerShapeA, outerShapeB];\n    let matmulProgramType = env().get('WEBGPU_MATMUL_PROGRAM_TYPE');\n    if (matmulProgramType < 0) {\n        // Usually increasing workgroups is a good way to gain more performance for\n        // few workgroups by tiling 32x32 (default matmul algorithm). Currently,\n        // there are three ways to increase workgroups. 1) MatMulReduceProgram,\n        // which is used only when the output size is very small (128 for now). 2)\n        // MatMulSplitKProgram, increasing workgroups by spliting K. 3)\n        // MatMulSmallOutputSizeProgram, increasing workgroups by small tile size.\n        // For different devices, the minimum optimal workgroups may be different.\n        // So here we set a |thresholdToIncreaseWorkgroups| to indicate whether we\n        // need to increase workgroups. And the literal number is an empirical\n        // value.\n        const thresholdFlagValue = env().getNumber('WEBGPU_THRESHOLD_TO_INCREASE_WORKGROUPS_FOR_MATMUL');\n        const thresholdToIncreaseWorkgroups = thresholdFlagValue > 0 ?\n            thresholdFlagValue :\n            backend.thresholdToIncreaseWorkgroups;\n        const workgroupsBy32x32 = batchDim * Math.ceil(outerShapeA / 32) * Math.ceil(outerShapeB / 32);\n        const hasFewWorkgroups = workgroupsBy32x32 <= thresholdToIncreaseWorkgroups ||\n            (outerShapeA <= 8 &&\n                workgroupsBy32x32 <= thresholdToIncreaseWorkgroups * 2);\n        if (hasFewWorkgroups) {\n            if (batchDim * outerShapeA * outerShapeB <= 128) {\n                matmulProgramType = MatMulProgramType.MatMulReduceProgram;\n            }\n            else if (batchDim === 1 && innerShapeB >= 2000) {\n                matmulProgramType = MatMulProgramType.MatMulSplitKProgram;\n            }\n            else {\n                matmulProgramType = MatMulProgramType.MatMulSmallOutputSizeProgram;\n            }\n        }\n        else {\n            matmulProgramType = MatMulProgramType.MatMulPackedProgram;\n        }\n    }\n    switch (matmulProgramType) {\n        case MatMulProgramType.MatMulReduceProgram:\n            program = new MatMulReduceProgram(outputShape, transposeA, transposeB, bias, activation, preluActivationWeights);\n            break;\n        case MatMulProgramType.MatMulSplitKProgram: {\n            // The output buffer must be initailzed to zero before using since we\n            // use atomicAdd in MatMulSplitKProgram.\n            out = fill({ backend, attrs: { shape: outputShape, value: 0, dtype: a.dtype } });\n            program = new MatMulSplitKProgram(outputShape, innerShapeB, transposeA, transposeB);\n            if (bias || activation) {\n                out =\n                    backend.runWebGPUProgram(program, inputs, a.dtype, dimensions, out);\n                const biasActivationProgram = new BiasActivationProgram(out.shape, bias, activation, preluActivationWeights);\n                let uniformData = null;\n                const activationInputs = [out];\n                if (bias) {\n                    activationInputs.push(bias);\n                }\n                if (preluActivationWeights) {\n                    activationInputs.push(preluActivationWeights);\n                }\n                if (activation === 'leakyrelu') {\n                    uniformData = [{ type: 'float32', data: [leakyreluAlpha] }];\n                    biasActivationProgram.uniforms += ' alpha : f32,';\n                }\n                const outActivated = backend.runWebGPUProgram(biasActivationProgram, activationInputs, out.dtype, uniformData);\n                intermediates.push(out);\n                const outReshaped = reshape({ inputs: { x: outActivated }, backend, attrs: { shape: outShape } });\n                intermediates.push(outActivated);\n                for (const i of intermediates) {\n                    backend.disposeData(i.dataId);\n                }\n                return outReshaped;\n            }\n            break;\n        }\n        case MatMulProgramType.MatMulSmallOutputSizeProgram:\n            program = new MatMulSmallOutputSizeProgram(a3dShape, b3dShape, outputShape, transposeA, transposeB, bias, activation, preluActivationWeights);\n            break;\n        case MatMulProgramType.MatMulPackedProgram:\n            // Experiments show that sequential access is more friendly for Intel\n            // GPUs.\n            const sequentialAccessByThreads = backend.adapterInfo.isIntel();\n            program = new MatMulPackedProgram(a3dShape, outputShape, transposeA, transposeB, bias, activation, preluActivationWeights, sequentialAccessByThreads);\n            break;\n        default:\n            throw new Error(`Unsupported MatMulProgramType ${matmulProgramType}.`);\n    }\n    if (bias) {\n        inputs.push(bias);\n    }\n    if (preluActivationWeights) {\n        inputs.push(preluActivationWeights);\n    }\n    if (activation === 'leakyrelu') {\n        dimensions.push({ type: 'float32', data: [leakyreluAlpha] });\n        program.uniforms += ' alpha : f32,';\n    }\n    out = backend.runWebGPUProgram(program, inputs, a.dtype, dimensions, out);\n    const outReshaped = reshape({ inputs: { x: out }, backend, attrs: { shape: outShape } });\n    intermediates.push(out);\n    for (const i of intermediates) {\n        backend.disposeData(i.dataId);\n    }\n    return outReshaped;\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQmF0Y2hNYXRNdWxfaW1wbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2tlcm5lbHMvQmF0Y2hNYXRNdWxfaW1wbC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQWUsY0FBYyxFQUFFLEdBQUcsRUFBYyxJQUFJLEVBQUMsTUFBTSx1QkFBdUIsQ0FBQztBQUcxRixPQUFPLEVBQUMsbUJBQW1CLEVBQUMsTUFBTSx5QkFBeUIsQ0FBQztBQUM1RCxPQUFPLEVBQUMsbUJBQW1CLEVBQUMsTUFBTSx5QkFBeUIsQ0FBQztBQUM1RCxPQUFPLEVBQUMsNEJBQTRCLEVBQUMsTUFBTSxvQ0FBb0MsQ0FBQztBQUNoRixPQUFPLEVBQUMscUJBQXFCLEVBQUUsbUJBQW1CLEVBQUMsTUFBTSx5QkFBeUIsQ0FBQztBQUVuRixPQUFPLEVBQUMsaUJBQWlCLEVBQUMsTUFBTSxnQkFBZ0IsQ0FBQztBQUVqRCxPQUFPLEVBQUMsSUFBSSxFQUFDLE1BQU0sUUFBUSxDQUFDO0FBQzVCLE9BQU8sRUFBQyxPQUFPLEVBQUMsTUFBTSxXQUFXLENBQUM7QUFjbEMsTUFBTSxVQUFVLGVBQWUsQ0FBQyxFQUM5QixDQUFDLEVBQ0QsQ0FBQyxFQUNELFVBQVUsRUFDVixVQUFVLEVBQ1YsT0FBTyxFQUNQLElBQUksR0FBRyxJQUFJLEVBQ1gsc0JBQXNCLEdBQUcsSUFBSSxFQUM3QixjQUFjLEdBQUcsQ0FBQyxFQUNsQixVQUFVLEdBQUcsSUFBSSxFQUNDO0lBQ2xCLE1BQU0sS0FBSyxHQUFHLENBQUMsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDO0lBQzdCLE1BQU0sS0FBSyxHQUFHLENBQUMsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDO0lBRTdCLE1BQU0sV0FBVyxHQUFHLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxL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QUFXLEVBQUU7UUFDOUIsVUFBVSxDQUFDLElBQUksQ0FBQyxFQUFDLElBQUksRUFBRSxTQUFTLEVBQUUsSUFBSSxFQUFFLENBQUMsY0FBYyxDQUFDLEVBQUMsQ0FBQyxDQUFDO1FBQzNELE9BQU8sQ0FBQyxRQUFRLElBQUksZUFBZSxDQUFDO0tBQ3JDO0lBQ0QsR0FBRyxHQUFHLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsTUFBTSxFQUFFLENBQUMsQ0FBQyxLQUFLLEVBQUUsVUFBVSxFQUFFLEdBQUcsQ0FBQyxDQUFDO0lBQzFFLE1BQU0sV0FBVyxHQUNiLE9BQU8sQ0FBQyxFQUFDLE1BQU0sRUFBRSxFQUFDLENBQUMsRUFBRSxHQUFHLEVBQUMsRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLEVBQUMsS0FBSyxFQUFFLFFBQVEsRUFBQyxFQUFDLENBQUMsQ0FBQztJQUNuRSxhQUFhLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ3hCLEtBQUssTUFBTSxDQUFDLElBQUksYUFBYSxFQUFFO1FBQzdCLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0tBQy9CO0lBQ0QsT0FBTyxXQUFXLENBQUM7QUFDckIsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtiYWNrZW5kX3V0aWwsIGJyb2FkY2FzdF91dGlsLCBlbnYsIFRlbnNvckluZm8sIHV0aWx9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7V2ViR1BVQmFja2VuZH0gZnJvbSAnLi4vYmFja2VuZF93ZWJncHUnO1xuaW1wb3J0IHtNYXRNdWxQYWNrZWRQcm9ncmFtfSBmcm9tICcuLi9tYXRtdWxfcGFja2VkX3dlYmdwdSc7XG5pbXBvcnQge01hdE11bFJlZHVjZVByb2dyYW19IGZyb20gJy4uL21hdG11bF9yZWR1Y2Vfd2ViZ3B1JztcbmltcG9ydCB7TWF0TXVsU21hbGxPdXRwdXRTaXplUHJvZ3JhbX0gZnJvbSAnLi4vbWF0bXVsX3NtYWxsX291dHB1dF9zaXplX3dlYmdwdSc7XG5pbXBvcnQge0JpYXNBY3RpdmF0aW9uUHJvZ3JhbSwgTWF0TXVsU3BsaXRLUHJvZ3JhbX0gZnJvbSAnLi4vbWF0bXVsX3NwbGl0S193ZWJncHUnO1xuaW1wb3J0IHtXZWJHUFVQcm9ncmFtfSBmcm9tICcuLi93ZWJncHVfcHJvZ3JhbSc7XG5pbXBvcnQge01hdE11bFByb2dyYW1UeXBlfSBmcm9tICcuLi93ZWJncHVfdXRpbCc7XG5cbmltcG9ydCB7ZmlsbH0gZnJvbSAnLi9GaWxsJztcbmltcG9ydCB7cmVzaGFwZX0gZnJvbSAnLi9SZXNoYXBlJztcblxudHlwZSBCYXRjaE1hdE11bENvbmZpZyA9IHtcbiAgYTogVGVuc29ySW5mbyxcbiAgYjogVGVuc29ySW5mbyxcbiAgdHJhbnNwb3NlQTogYm9vbGVhbixcbiAgdHJhbnNwb3NlQjogYm9vbGVhbixcbiAgYmFja2VuZDogV2ViR1BVQmFja2VuZCxcbiAgYmlhcz86IFRlbnNvckluZm8sXG4gIHByZWx1QWN0aXZhdGlvbldlaWdodHM/OiBUZW5zb3JJbmZvLFxuICBsZWFreXJlbHVBbHBoYT86IG51bWJlcixcbiAgYWN0aXZhdGlvbj86IGJhY2tlbmRfdXRpbC5BY3RpdmF0aW9uXG59O1xuXG5leHBvcnQgZnVuY3Rpb24gYmF0Y2hNYXRNdWxJbXBsKHtcbiAgYSxcbiAgYixcbiAgdHJhbnNwb3NlQSxcbiAgdHJhbnNwb3NlQixcbiAgYmFja2VuZCxcbiAgYmlhcyA9IG51bGwsXG4gIHByZWx1QWN0aXZhdGlvbldlaWdodHMgPSBudWxsLFxuICBsZWFreXJlbHVBbHBoYSA9IDAsXG4gIGFjdGl2YXRpb24gPSBudWxsXG59OiBCYXRjaE1hdE11bENvbmZpZyk6IFRlbnNvckluZm8ge1xuICBjb25zdCBhUmFuayA9IGEuc2hhcGUubGVuZ3RoO1xuICBjb25zdCBiUmFuayA9IGIuc2hhcGUubGVuZ3RoO1xuXG4gIGNvbnN0IGlubmVyU2hhcGVBID0gdHJhbnNwb3NlQSA/IGEuc2hhcGVbYVJhbmsgLSAyXSA6IGEuc2hhcGVbYVJhbmsgLSAxXTtcbiAgY29uc3QgaW5uZXJTaGFwZUIgPSB0cmFuc3Bvc2VCID8gYi5zaGFwZVtiUmFuayAtIDFdIDogYi5zaGFwZVtiUmFuayAtIDJdO1xuXG4gIGNvbnN0IG91dGVyU2hhcGVBID0gdHJhbnNwb3NlQSA/IGEuc2hhcGVbYVJhbmsgLSAxXSA6IGEuc2hhcGVbYVJhbmsgLSAyXTtcbiAgY29uc3Qgb3V0ZXJTaGFwZUIgPSB0cmFuc3Bvc2VCID8gYi5zaGFwZVtiUmFuayAtIDJdIDogYi5zaGFwZVtiUmFuayAtIDFdO1xuXG4gIGNvbnN0IG91dGVyRGltc0EgPSBhLnNoYXBlLnNsaWNlKDAsIC0yKTtcbiAgY29uc3Qgb3V0ZXJEaW1zQiA9IGIuc2hhcGUuc2xpY2UoMCwgLTIpO1xuXG4gIGNvbnN0IGJhdGNoRGltQSA9IHV0aWwuc2l6ZUZyb21TaGFwZShvdXRlckRpbXNBKTtcbiAgY29uc3QgYmF0Y2hEaW1CID0gdXRpbC5zaXplRnJvbVNoYXBlKG91dGVyRGltc0IpO1xuXG4gIGNvbnN0IG91dFNoYXBlT3V0ZXJEaW1zID0gYnJvYWRjYXN0X3V0aWwuYXNzZXJ0QW5kR2V0QnJvYWRjYXN0U2hhcGUoXG4gICAgICBhLnNoYXBlLnNsaWNlKDAsIC0yKSwgYi5zaGFwZS5zbGljZSgwLCAtMikpO1xuICBjb25zdCBvdXRTaGFwZSA9IG91dFNoYXBlT3V0ZXJEaW1zLmNvbmNhdChbb3V0ZXJTaGFwZUEsIG91dGVyU2hhcGVCXSk7XG5cbiAgdXRpbC5hc3NlcnQoXG4gICAgICBpbm5lclNoYXBlQSA9PT0gaW5uZXJTaGFwZUIsXG4gICAgICAoKSA9PiBgRXJyb3IgaW4gbWF0TXVsOiBpbm5lciBzaGFwZXMgKCR7aW5uZXJTaGFwZUF9KSBhbmQgKGAgK1xuICAgICAgICAgIGAke2lubmVyU2hhcGVCfSkgb2YgVGVuc29ycyB3aXRoIHNoYXBlcyAke2Euc2hhcGV9IGFuZCBgICtcbiAgICAgICAgICBgJHtiLnNoYXBlfSBhbmQgdHJhbnNwb3NlQT0ke3RyYW5zcG9zZUF9YCArXG4gICAgICAgICAgYCBhbmQgdHJhbnNwb3NlQj0ke3RyYW5zcG9zZUJ9IG11c3QgbWF0Y2guYCk7XG5cbiAgY29uc3QgYTNkU2hhcGU6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXSA9IHRyYW5zcG9zZUEgP1xuICAgICAgW2JhdGNoRGltQSwgaW5uZXJTaGFwZUEsIG91dGVyU2hhcGVBXSA6XG4gICAgICBbYmF0Y2hEaW1BLCBvdXRlclNoYXBlQSwgaW5uZXJTaGFwZUFdO1xuICBjb25zdCBiM2RTaGFwZTogW251bWJlciwgbnVtYmVyLCBudW1iZXJdID0gdHJhbnNwb3NlQiA/XG4gICAgICBbYmF0Y2hEaW1CLCBvdXRlclNoYXBlQiwgaW5uZXJTaGFwZUJdIDpcbiAgICAgIFtiYXRjaERpbUIsIGlubmVyU2hhcGVCLCBvdXRlclNoYXBlQl07XG5cbiAgLy8gVGhlIHJlc3Qgb2YgdGhlIGltcGxlbWVudGF0aW9uIGlzIGRlc2lnbmVkIHRvIG9wZXJhdGUgb24gcmFuay0zIHRlbnNvcnNcbiAgY29uc3QgYTNkID0gcmVzaGFwZSh7aW5wdXRzOiB7eDogYX0sIGJhY2tlbmQsIGF0dHJzOiB7c2hhcGU6IGEzZFNoYXBlfX0pO1xuICBjb25zdCBiM2QgPSByZXNoYXBlKHtpbnB1dHM6IHt4OiBifSwgYmFja2VuZCwgYXR0cnM6IHtzaGFwZTogYjNkU2hhcGV9fSk7XG4gIGNvbnN0IGludGVybWVkaWF0ZXM6IFRlbnNvckluZm9bXSA9IFthM2QsIGIzZF07XG5cbiAgY29uc3QgYmF0Y2hEaW0gPSBNYXRoLm1heChiYXRjaERpbUEsIGJhdGNoRGltQik7XG5cbiAgY29uc3QgaW5wdXRzOiBUZW5zb3JJbmZvW10gPSBbYTNkLCBiM2RdO1xuICBjb25zdCBkaW1lbnNpb25zID0gW1xuICAgIHt0eXBlOiAnaW50MzInLCBkYXRhOiBbb3V0ZXJTaGFwZUFdfSwge3R5cGU6ICdpbnQzMicsIGRhdGE6IFtvdXRlclNoYXBlQl19LFxuICAgIHt0eXBlOiAnaW50MzInLCBkYXRhOiBbaW5uZXJTaGFwZUFdfVxuICBdO1xuXG4gIGxldCBwcm9ncmFtOiBXZWJHUFVQcm9ncmFtO1xuICBsZXQgb3V0OiBUZW5zb3JJbmZvO1xuICBjb25zdCBvdXRwdXRTaGFwZTogW251bWJlciwgbnVtYmVyLCBudW1iZXJdID1cbiAgICAgIFtiYXRjaERpbSwgb3V0ZXJTaGFwZUEsIG91dGVyU2hhcGVCXTtcbiAgbGV0IG1hdG11bFByb2dyYW1UeXBlID0gZW52KCkuZ2V0KCdXRUJHUFVfTUFUTVVMX1BST0dSQU1fVFlQRScpIGFzIG51bWJlcjtcbiAgaWYgKG1hdG11bFByb2dyYW1UeXBlIDwgMCkge1xuICAgIC8vIFVzdWFsbHkgaW5jcmVhc2luZyB3b3JrZ3JvdXBzIGlzIGEgZ29vZCB3YXkgdG8gZ2FpbiBtb3JlIHBlcmZvcm1hbmNlIGZvclxuICAgIC8vIGZldyB3b3JrZ3JvdXBzIGJ5IHRpbGluZyAzMngzMiAoZGVmYXVsdCBtYXRtdWwgYWxnb3JpdGhtKS4gQ3VycmVudGx5LFxuICAgIC8vIHRoZXJlIGFyZSB0aHJlZSB3YXlzIHRvIGluY3JlYXNlIHdvcmtncm91cHMuIDEpIE1hdE11bFJlZHVjZVByb2dyYW0sXG4gICAgLy8gd2hpY2ggaXMgdXNlZCBvbmx5IHdoZW4gdGhlIG91dHB1dCBzaXplIGlzIHZlcnkgc21hbGwgKDEyOCBmb3Igbm93KS4gMilcbiAgICAvLyBNYXRNdWxTcGxpdEtQcm9ncmFtLCBpbmNyZWFzaW5nIHdvcmtncm91cHMgYnkgc3BsaXRpbmcgSy4gMylcbiAgICAvLyBNYXRNdWxTbWFsbE91dHB1dFNpemVQcm9ncmFtLCBpbmNyZWFzaW5nIHdvcmtncm91cHMgYnkgc21hbGwgdGlsZSBzaXplLlxuICAgIC8vIEZvciBkaWZmZXJlbnQgZGV2aWNlcywgdGhlIG1pbmltdW0gb3B0aW1hbCB3b3JrZ3JvdXBzIG1heSBiZSBkaWZmZXJlbnQuXG4gICAgLy8gU28gaGVyZSB3ZSBzZXQgYSB8dGhyZXNob2xkVG9JbmNyZWFzZVdvcmtncm91cHN8IHRvIGluZGljYXRlIHdoZXRoZXIgd2VcbiAgICAvLyBuZWVkIHRvIGluY3JlYXNlIHdvcmtncm91cHMuIEFuZCB0aGUgbGl0ZXJhbCBudW1iZXIgaXMgYW4gZW1waXJpY2FsXG4gICAgLy8gdmFsdWUuXG4gICAgY29uc3QgdGhyZXNob2xkRmxhZ1ZhbHVlID1cbiAgICAgICAgZW52KCkuZ2V0TnVtYmVyKCdXRUJHUFVfVEhSRVNIT0xEX1RPX0lOQ1JFQVNFX1dPUktHUk9VUFNfRk9SX01BVE1VTCcpO1xuICAgIGNvbnN0IHRocmVzaG9sZFRvSW5jcmVhc2VXb3JrZ3JvdXBzID0gdGhyZXNob2xkRmxhZ1ZhbHVlID4gMCA/XG4gICAgICAgIHRocmVzaG9sZEZsYWdWYWx1ZSA6XG4gICAgICAgIGJhY2tlbmQudGhyZXNob2xkVG9JbmNyZWFzZVdvcmtncm91cHM7XG4gICAgY29uc3Qgd29ya2dyb3Vwc0J5MzJ4MzIgPVxuICAgICAgICBiYXRjaERpbSAqIE1hdGguY2VpbChvdXRlclNoYXBlQSAvIDMyKSAqIE1hdGguY2VpbChvdXRlclNoYXBlQiAvIDMyKTtcbiAgICBjb25zdCBoYXNGZXdXb3JrZ3JvdXBzID1cbiAgICAgICAgd29ya2dyb3Vwc0J5MzJ4MzIgPD0gdGhyZXNob2xkVG9JbmNyZWFzZVdvcmtncm91cHMgfHxcbiAgICAgICAgKG91dGVyU2hhcGVBIDw9IDggJiZcbiAgICAgICAgIHdvcmtncm91cHNCeTMyeDMyIDw9IHRocmVzaG9sZFRvSW5jcmVhc2VXb3JrZ3JvdXBzICogMik7XG4gICAgaWYgKGhhc0Zld1dvcmtncm91cHMpIHtcbiAgICAgIGlmIChiYXRjaERpbSAqIG91dGVyU2hhcGVBICogb3V0ZXJTaGFwZUIgPD0gMTI4KSB7XG4gICAgICAgIG1hdG11bFByb2dyYW1UeXBlID0gTWF0TXVsUHJvZ3JhbVR5cGUuTWF0TXVsUmVkdWNlUHJvZ3JhbTtcbiAgICAgIH0gZWxzZSBpZiAoYmF0Y2hEaW0gPT09IDEgJiYgaW5uZXJTaGFwZUIgPj0gMjAwMCkge1xuICAgICAgICBtYXRtdWxQcm9ncmFtVHlwZSA9IE1hdE11bFByb2dyYW1UeXBlLk1hdE11bFNwbGl0S1Byb2dyYW07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBtYXRtdWxQcm9ncmFtVHlwZSA9IE1hdE11bFByb2dyYW1UeXBlLk1hdE11bFNtYWxsT3V0cHV0U2l6ZVByb2dyYW07XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIG1hdG11bFByb2dyYW1UeXBlID0gTWF0TXVsUHJvZ3JhbVR5cGUuTWF0TXVsUGFja2VkUHJvZ3JhbTtcbiAgICB9XG4gIH1cblxuICBzd2l0Y2ggKG1hdG11bFByb2dyYW1UeXBlKSB7XG4gICAgY2FzZSBNYXRNdWxQcm9ncmFtVHlwZS5NYXRNdWxSZWR1Y2VQcm9ncmFtOlxuICAgICAgcHJvZ3JhbSA9IG5ldyBNYXRNdWxSZWR1Y2VQcm9ncmFtKFxuICAgICAgICAgIG91dHB1dFNoYXBlLCB0cmFuc3Bvc2VBLCB0cmFuc3Bvc2VCLCBiaWFzLCBhY3RpdmF0aW9uLFxuICAgICAgICAgIHByZWx1QWN0aXZhdGlvbldlaWdodHMpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBNYXRNdWxQcm9ncmFtVHlwZS5NYXRNdWxTcGxpdEtQcm9ncmFtOiB7XG4gICAgICAvLyBUaGUgb3V0cHV0IGJ1ZmZlciBtdXN0IGJlIGluaXRhaWx6ZWQgdG8gemVybyBiZWZvcmUgdXNpbmcgc2luY2Ugd2VcbiAgICAgIC8vIHVzZSBhdG9taWNBZGQgaW4gTWF0TXVsU3BsaXRLUHJvZ3JhbS5cbiAgICAgIG91dCA9IGZpbGwoXG4gICAgICAgICAge2JhY2tlbmQsIGF0dHJzOiB7c2hhcGU6IG91dHB1dFNoYXBlLCB2YWx1ZTogMCwgZHR5cGU6IGEuZHR5cGV9fSk7XG4gICAgICBwcm9ncmFtID0gbmV3IE1hdE11bFNwbGl0S1Byb2dyYW0oXG4gICAgICAgICAgb3V0cHV0U2hhcGUsIGlubmVyU2hhcGVCLCB0cmFuc3Bvc2VBLCB0cmFuc3Bvc2VCKTtcbiAgICAgIGlmIChiaWFzIHx8IGFjdGl2YXRpb24pIHtcbiAgICAgICAgb3V0ID1cbiAgICAgICAgICAgIGJhY2tlbmQucnVuV2ViR1BVUHJvZ3JhbShwcm9ncmFtLCBpbnB1dHMsIGEuZHR5cGUsIGRpbWVuc2lvbnMsIG91dCk7XG4gICAgICAgIGNvbnN0IGJpYXNBY3RpdmF0aW9uUHJvZ3JhbSA9IG5ldyBCaWFzQWN0aXZhdGlvblByb2dyYW0oXG4gICAgICAgICAgICBvdXQuc2hhcGUsIGJpYXMsIGFjdGl2YXRpb24sIHByZWx1QWN0aXZhdGlvbldlaWdodHMpO1xuICAgICAgICBsZXQgdW5pZm9ybURhdGEgPSBudWxsO1xuICAgICAgICBjb25zdCBhY3RpdmF0aW9uSW5wdXRzOiBUZW5zb3JJbmZvW10gPSBbb3V0XTtcbiAgICAgICAgaWYgKGJpYXMpIHtcbiAgICAgICAgICBhY3RpdmF0aW9uSW5wdXRzLnB1c2goYmlhcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByZWx1QWN0aXZhdGlvbldlaWdodHMpIHtcbiAgICAgICAgICBhY3RpdmF0aW9uSW5wdXRzLnB1c2gocHJlbHVBY3RpdmF0aW9uV2VpZ2h0cyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFjdGl2YXRpb24gPT09ICdsZWFreXJlbHUnKSB7XG4gICAgICAgICAgdW5pZm9ybURhdGEgPSBbe3R5cGU6ICdmbG9hdDMyJywgZGF0YTogW2xlYWt5cmVsdUFscGhhXX1dO1xuICAgICAgICAgIGJpYXNBY3RpdmF0aW9uUHJvZ3JhbS51bmlmb3JtcyArPSAnIGFscGhhIDogZjMyLCc7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgb3V0QWN0aXZhdGVkID0gYmFja2VuZC5ydW5XZWJHUFVQcm9ncmFtKFxuICAgICAgICAgICAgYmlhc0FjdGl2YXRpb25Qcm9ncmFtLCBhY3RpdmF0aW9uSW5wdXRzLCBvdXQuZHR5cGUsIHVuaWZvcm1EYXRhKTtcbiAgICAgICAgaW50ZXJtZWRpYXRlcy5wdXNoKG91dCk7XG4gICAgICAgIGNvbnN0IG91dFJlc2hhcGVkID0gcmVzaGFwZShcbiAgICAgICAgICAgIHtpbnB1dHM6IHt4OiBvdXRBY3RpdmF0ZWR9LCBiYWNrZW5kLCBhdHRyczoge3NoYXBlOiBvdXRTaGFwZX19KTtcbiAgICAgICAgaW50ZXJtZWRpYXRlcy5wdXNoKG91dEFjdGl2YXRlZCk7XG4gICAgICAgIGZvciAoY29uc3QgaSBvZiBpbnRlcm1lZGlhdGVzKSB7XG4gICAgICAgICAgYmFja2VuZC5kaXNwb3NlRGF0YShpLmRhdGFJZCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dFJlc2hhcGVkO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGNhc2UgTWF0TXVsUHJvZ3JhbVR5cGUuTWF0TXVsU21hbGxPdXRwdXRTaXplUHJvZ3JhbTpcbiAgICAgIHByb2dyYW0gPSBuZXcgTWF0TXVsU21hbGxPdXRwdXRTaXplUHJvZ3JhbShcbiAgICAgICAgICBhM2RTaGFwZSwgYjNkU2hhcGUsIG91dHB1dFNoYXBlLCB0cmFuc3Bvc2VBLCB0cmFuc3Bvc2VCLCBiaWFzLFxuICAgICAgICAgIGFjdGl2YXRpb24sIHByZWx1QWN0aXZhdGlvbldlaWdodHMpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBNYXRNdWxQcm9ncmFtVHlwZS5NYXRNdWxQYWNrZWRQcm9ncmFtOlxuICAgICAgLy8gRXhwZXJpbWVudHMgc2hvdyB0aGF0IHNlcXVlbnRpYWwgYWNjZXNzIGlzIG1vcmUgZnJpZW5kbHkgZm9yIEludGVsXG4gICAgICAvLyBHUFVzLlxuICAgICAgY29uc3Qgc2VxdWVudGlhbEFjY2Vzc0J5VGhyZWFkcyA9IGJhY2tlbmQuYWRhcHRlckluZm8uaXNJbnRlbCgpO1xuICAgICAgcHJvZ3JhbSA9IG5ldyBNYXRNdWxQYWNrZWRQcm9ncmFtKFxuICAgICAgICAgIGEzZFNoYXBlLCBvdXRwdXRTaGFwZSwgdHJhbnNwb3NlQSwgdHJhbnNwb3NlQiwgYmlhcywgYWN0aXZhdGlvbixcbiAgICAgICAgICBwcmVsdUFjdGl2YXRpb25XZWlnaHRzLCBzZXF1ZW50aWFsQWNjZXNzQnlUaHJlYWRzKTtcbiAgICAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuc3VwcG9ydGVkIE1hdE11bFByb2dyYW1UeXBlICR7bWF0bXVsUHJvZ3JhbVR5cGV9LmApO1xuICB9XG5cbiAgaWYgKGJpYXMpIHtcbiAgICBpbnB1dHMucHVzaChiaWFzKTtcbiAgfVxuICBpZiAocHJlbHVBY3RpdmF0aW9uV2VpZ2h0cykge1xuICAgIGlucHV0cy5wdXNoKHByZWx1QWN0aXZhdGlvbldlaWdodHMpO1xuICB9XG4gIGlmIChhY3RpdmF0aW9uID09PSAnbGVha3lyZWx1Jykge1xuICAgIGRpbWVuc2lvbnMucHVzaCh7dHlwZTogJ2Zsb2F0MzInLCBkYXRhOiBbbGVha3lyZWx1QWxwaGFdfSk7XG4gICAgcHJvZ3JhbS51bmlmb3JtcyArPSAnIGFscGhhIDogZjMyLCc7XG4gIH1cbiAgb3V0ID0gYmFja2VuZC5ydW5XZWJHUFVQcm9ncmFtKHByb2dyYW0sIGlucHV0cywgYS5kdHlwZSwgZGltZW5zaW9ucywgb3V0KTtcbiAgY29uc3Qgb3V0UmVzaGFwZWQgPVxuICAgICAgcmVzaGFwZSh7aW5wdXRzOiB7eDogb3V0fSwgYmFja2VuZCwgYXR0cnM6IHtzaGFwZTogb3V0U2hhcGV9fSk7XG4gIGludGVybWVkaWF0ZXMucHVzaChvdXQpO1xuICBmb3IgKGNvbnN0IGkgb2YgaW50ZXJtZWRpYXRlcykge1xuICAgIGJhY2tlbmQuZGlzcG9zZURhdGEoaS5kYXRhSWQpO1xuICB9XG4gIHJldHVybiBvdXRSZXNoYXBlZDtcbn1cbiJdfQ==","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { _FusedMatMul } from '@tensorflow/tfjs-core';\nimport { batchMatMulImpl } from './BatchMatMul_impl';\nexport function _fusedMatMul(args) {\n    const { inputs, backend, attrs } = args;\n    const { a, b, bias, preluActivationWeights } = inputs;\n    const { transposeA, transposeB, activation, leakyreluAlpha } = attrs;\n    return batchMatMulImpl({\n        a,\n        b,\n        transposeA,\n        transposeB,\n        backend,\n        bias,\n        preluActivationWeights,\n        leakyreluAlpha,\n        activation\n    });\n}\nexport const _fusedMatMulConfig = {\n    kernelName: _FusedMatMul,\n    backendName: 'webgpu',\n    kernelFunc: _fusedMatMul,\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiX0Z1c2VkTWF0TXVsLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMva2VybmVscy9fRnVzZWRNYXRNdWwudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUFDLFlBQVksRUFBa0UsTUFBTSx1QkFBdUIsQ0FBQztBQUdwSCxPQUFPLEVBQUMsZUFBZSxFQUFDLE1BQU0sb0JBQW9CLENBQUM7QUFFbkQsTUFBTSxVQUFVLFlBQVksQ0FBQyxJQUk1QjtJQUNDLE1BQU0sRUFBQyxNQUFNLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBQyxHQUFHLElBQUksQ0FBQztJQUN0QyxNQUFNLEVBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxJQUFJLEVBQUUsc0JBQXNCLEVBQUMsR0FBRyxNQUFNLENBQUM7SUFDcEQsTUFBTSxFQUFDLFVBQVUsRUFBRSxVQUFVLEVBQUUsVUFBVSxFQUFFLGNBQWMsRUFBQyxHQUFHLEtBQUssQ0FBQztJQUVuRSxPQUFPLGVBQWUsQ0FBQztRQUNyQixDQUFDO1FBQ0QsQ0FBQztRQUNELFVBQVU7UUFDVixVQUFVO1FBQ1YsT0FBTztRQUNQLElBQUk7UUFDSixzQkFBc0I7UUFDdEIsY0FBYztRQUNkLFVBQVU7S0FDWCxDQUFDLENBQUM7QUFDTCxDQUFDO0FBRUQsTUFBTSxDQUFDLE1BQU0sa0JBQWtCLEdBQWlCO0lBQzlDLFVBQVUsRUFBRSxZQUFZO0lBQ3hCLFdBQVcsRUFBRSxRQUFRO0lBQ3JCLFVBQVUsRUFBRSxZQUFxQztDQUNsRCxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge19GdXNlZE1hdE11bCwgX0Z1c2VkTWF0TXVsQXR0cnMsIF9GdXNlZE1hdE11bElucHV0cywgS2VybmVsQ29uZmlnLCBLZXJuZWxGdW5jfSBmcm9tICdAdGVuc29yZmxvdy90ZmpzLWNvcmUnO1xuXG5pbXBvcnQge1dlYkdQVUJhY2tlbmR9IGZyb20gJy4uL2JhY2tlbmRfd2ViZ3B1JztcbmltcG9ydCB7YmF0Y2hNYXRNdWxJbXBsfSBmcm9tICcuL0JhdGNoTWF0TXVsX2ltcGwnO1xuXG5leHBvcnQgZnVuY3Rpb24gX2Z1c2VkTWF0TXVsKGFyZ3M6IHtcbiAgaW5wdXRzOiBfRnVzZWRNYXRNdWxJbnB1dHMsXG4gIGF0dHJzOiBfRnVzZWRNYXRNdWxBdHRycyxcbiAgYmFja2VuZDogV2ViR1BVQmFja2VuZFxufSkge1xuICBjb25zdCB7aW5wdXRzLCBiYWNrZW5kLCBhdHRyc30gPSBhcmdzO1xuICBjb25zdCB7YSwgYiwgYmlhcywgcHJlbHVBY3RpdmF0aW9uV2VpZ2h0c30gPSBpbnB1dHM7XG4gIGNvbnN0IHt0cmFuc3Bvc2VBLCB0cmFuc3Bvc2VCLCBhY3RpdmF0aW9uLCBsZWFreXJlbHVBbHBoYX0gPSBhdHRycztcblxuICByZXR1cm4gYmF0Y2hNYXRNdWxJbXBsKHtcbiAgICBhLFxuICAgIGIsXG4gICAgdHJhbnNwb3NlQSxcbiAgICB0cmFuc3Bvc2VCLFxuICAgIGJhY2tlbmQsXG4gICAgYmlhcyxcbiAgICBwcmVsdUFjdGl2YXRpb25XZWlnaHRzLFxuICAgIGxlYWt5cmVsdUFscGhhLFxuICAgIGFjdGl2YXRpb25cbiAgfSk7XG59XG5cbmV4cG9ydCBjb25zdCBfZnVzZWRNYXRNdWxDb25maWc6IEtlcm5lbENvbmZpZyA9IHtcbiAga2VybmVsTmFtZTogX0Z1c2VkTWF0TXVsLFxuICBiYWNrZW5kTmFtZTogJ3dlYmdwdScsXG4gIGtlcm5lbEZ1bmM6IF9mdXNlZE1hdE11bCBhcyB1bmtub3duIGFzIEtlcm5lbEZ1bmMsXG59O1xuIl19","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { backend_util } from '@tensorflow/tfjs-core';\nimport { getBinaryOpString } from './binary_op_util';\nimport { getMainHeaderString as main } from './webgpu_program';\nimport { computeDispatch, flatDispatchLayout } from './webgpu_util';\nexport class BinaryOpComplexProgram {\n    constructor(op, aShape, bShape) {\n        this.variableNames = ['AReal', 'AImag', 'BReal', 'BImag'];\n        this.workgroupSize = [128, 1, 1];\n        this.size = true;\n        this.outputShape = backend_util.assertAndGetBroadcastShape(aShape, bShape);\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize);\n        this.shaderKey = `binaryOpComplex_${op}`;\n        this.op = op;\n    }\n    getUserCode() {\n        const opStr = getBinaryOpString(this.op, false);\n        const userCode = `\n      fn binaryOpComplex(\n          areal : f32, aimag : f32, breal : f32, bimag : f32) -> f32 {\n        ${opStr}\n      }\n\n      ${main('index')} {\n        if(index < uniforms.size) {\n          let areal = getARealByOutputIndex(index);\n          let aimag = getAImagByOutputIndex(index);\n          let breal = getBRealByOutputIndex(index);\n          let bimag = getBImagByOutputIndex(index);\n          setOutputAtIndex(index, binaryOpComplex(areal, aimag, breal, bimag));\n        }\n      }\n    `;\n        return userCode;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmluYXJ5X29wX2NvbXBsZXhfd2ViZ3B1LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMvYmluYXJ5X29wX2NvbXBsZXhfd2ViZ3B1LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sRUFBQyxZQUFZLEVBQUMsTUFBTSx1QkFBdUIsQ0FBQztBQUNuRCxPQUFPLEVBQWUsaUJBQWlCLEVBQUMsTUFBTSxrQkFBa0IsQ0FBQztBQUNqRSxPQUFPLEVBQUMsbUJBQW1CLElBQUksSUFBSSxFQUFnQixNQUFNLGtCQUFrQixDQUFDO0FBQzVFLE9BQU8sRUFBQyxlQUFlLEVBQUUsa0JBQWtCLEVBQUMsTUFBTSxlQUFlLENBQUM7QUFFbEUsTUFBTSxPQUFPLHNCQUFzQjtJQVVqQyxZQUFZLEVBQWdCLEVBQUUsTUFBZ0IsRUFBRSxNQUFnQjtRQVRoRSxrQkFBYSxHQUFHLENBQUMsT0FBTyxFQUFFLE9BQU8sRUFBRSxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFLckQsa0JBQWEsR0FBNkIsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBRXRELFNBQUksR0FBRyxJQUFJLENBQUM7UUFHVixJQUFJLENBQUMsV0FBVyxHQUFHLFlBQVksQ0FBQywwQkFBMEIsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLENBQUM7UUFDM0UsSUFBSSxDQUFDLGNBQWMsR0FBRyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDM0QsSUFBSSxDQUFDLFFBQVEsR0FBRyxlQUFlLENBQzNCLElBQUksQ0FBQyxjQUFjLEVBQUUsSUFBSSxDQUFDLFdBQVcsRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7UUFFL0QsSUFBSSxDQUFDLFNBQVMsR0FBRyxtQkFBbUIsRUFBRSxFQUFFLENBQUM7UUFDekMsSUFBSSxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUM7SUFDZixDQUFDO0lBRUQsV0FBVztRQUNULE1BQU0sS0FBSyxHQUFHLGlCQUFpQixDQUFDLElBQUksQ0FBQyxFQUFFLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFDaEQsTUFBTSxRQUFRLEdBQUc7OztVQUdYLEtBQUs7OztRQUdQLElBQUksQ0FBQyxPQUFPLENBQUM7Ozs7Ozs7OztLQVNoQixDQUFDO1FBQ0YsT0FBTyxRQUFRLENBQUM7SUFDbEIsQ0FBQztDQUNGIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge2JhY2tlbmRfdXRpbH0gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcbmltcG9ydCB7QmluYXJ5T3BUeXBlLCBnZXRCaW5hcnlPcFN0cmluZ30gZnJvbSAnLi9iaW5hcnlfb3BfdXRpbCc7XG5pbXBvcnQge2dldE1haW5IZWFkZXJTdHJpbmcgYXMgbWFpbiwgV2ViR1BVUHJvZ3JhbX0gZnJvbSAnLi93ZWJncHVfcHJvZ3JhbSc7XG5pbXBvcnQge2NvbXB1dGVEaXNwYXRjaCwgZmxhdERpc3BhdGNoTGF5b3V0fSBmcm9tICcuL3dlYmdwdV91dGlsJztcblxuZXhwb3J0IGNsYXNzIEJpbmFyeU9wQ29tcGxleFByb2dyYW0gaW1wbGVtZW50cyBXZWJHUFVQcm9ncmFtIHtcbiAgdmFyaWFibGVOYW1lcyA9IFsnQVJlYWwnLCAnQUltYWcnLCAnQlJlYWwnLCAnQkltYWcnXTtcbiAgb3V0cHV0U2hhcGU6IG51bWJlcltdO1xuICBzaGFkZXJLZXk6IHN0cmluZztcbiAgZGlzcGF0Y2hMYXlvdXQ6IHt4OiBudW1iZXJbXX07XG4gIGRpc3BhdGNoOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl07XG4gIHdvcmtncm91cFNpemU6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXSA9IFsxMjgsIDEsIDFdO1xuICBvcDogQmluYXJ5T3BUeXBlO1xuICBzaXplID0gdHJ1ZTtcblxuICBjb25zdHJ1Y3RvcihvcDogQmluYXJ5T3BUeXBlLCBhU2hhcGU6IG51bWJlcltdLCBiU2hhcGU6IG51bWJlcltdKSB7XG4gICAgdGhpcy5vdXRwdXRTaGFwZSA9IGJhY2tlbmRfdXRpbC5hc3NlcnRBbmRHZXRCcm9hZGNhc3RTaGFwZShhU2hhcGUsIGJTaGFwZSk7XG4gICAgdGhpcy5kaXNwYXRjaExheW91dCA9IGZsYXREaXNwYXRjaExheW91dCh0aGlzLm91dHB1dFNoYXBlKTtcbiAgICB0aGlzLmRpc3BhdGNoID0gY29tcHV0ZURpc3BhdGNoKFxuICAgICAgICB0aGlzLmRpc3BhdGNoTGF5b3V0LCB0aGlzLm91dHB1dFNoYXBlLCB0aGlzLndvcmtncm91cFNpemUpO1xuXG4gICAgdGhpcy5zaGFkZXJLZXkgPSBgYmluYXJ5T3BDb21wbGV4XyR7b3B9YDtcbiAgICB0aGlzLm9wID0gb3A7XG4gIH1cblxuICBnZXRVc2VyQ29kZSgpOiBzdHJpbmcge1xuICAgIGNvbnN0IG9wU3RyID0gZ2V0QmluYXJ5T3BTdHJpbmcodGhpcy5vcCwgZmFsc2UpO1xuICAgIGNvbnN0IHVzZXJDb2RlID0gYFxuICAgICAgZm4gYmluYXJ5T3BDb21wbGV4KFxuICAgICAgICAgIGFyZWFsIDogZjMyLCBhaW1hZyA6IGYzMiwgYnJlYWwgOiBmMzIsIGJpbWFnIDogZjMyKSAtPiBmMzIge1xuICAgICAgICAke29wU3RyfVxuICAgICAgfVxuXG4gICAgICAke21haW4oJ2luZGV4Jyl9IHtcbiAgICAgICAgaWYoaW5kZXggPCB1bmlmb3Jtcy5zaXplKSB7XG4gICAgICAgICAgbGV0IGFyZWFsID0gZ2V0QVJlYWxCeU91dHB1dEluZGV4KGluZGV4KTtcbiAgICAgICAgICBsZXQgYWltYWcgPSBnZXRBSW1hZ0J5T3V0cHV0SW5kZXgoaW5kZXgpO1xuICAgICAgICAgIGxldCBicmVhbCA9IGdldEJSZWFsQnlPdXRwdXRJbmRleChpbmRleCk7XG4gICAgICAgICAgbGV0IGJpbWFnID0gZ2V0QkltYWdCeU91dHB1dEluZGV4KGluZGV4KTtcbiAgICAgICAgICBzZXRPdXRwdXRBdEluZGV4KGluZGV4LCBiaW5hcnlPcENvbXBsZXgoYXJlYWwsIGFpbWFnLCBicmVhbCwgYmltYWcpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIGA7XG4gICAgcmV0dXJuIHVzZXJDb2RlO1xuICB9XG59XG4iXX0=","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { backend_util, util } from '@tensorflow/tfjs-core';\nimport { getBinaryOpString } from './binary_op_util';\nimport { getMainHeaderString as main } from './webgpu_program';\nimport { computeDispatch, flatDispatchLayout } from './webgpu_util';\nexport class BinaryOpProgram {\n    constructor(op, aShape, bShape) {\n        this.size = true;\n        this.variableNames = ['A', 'B'];\n        this.outputShape = backend_util.assertAndGetBroadcastShape(aShape, bShape);\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        this.op = op;\n        this.useSharedMemoryWithA =\n            aShape.length <= 1 && bShape.length > 1 && aShape[0] < 128;\n        this.useSharedMemoryWithB =\n            bShape.length <= 1 && aShape.length > 1 && bShape[0] < 128;\n        if (this.useSharedMemoryWithA || this.useSharedMemoryWithB) {\n            this.outputComponent = 1;\n            this.variableComponents = [1, 1];\n            // lastDimensionSize is used as sharedBuf array size, so can not be\n            // used as uniform.\n            this.lastDimensionSize =\n                this.useSharedMemoryWithB ? bShape[0] : aShape[0];\n            this.shaderKey = `binary_${op}_${this.lastDimensionSize}`;\n            this.type = 'shared';\n            // This is an experimental value when using shared memory.\n            // Note that the maximum of workgroup X dimension is 256.\n            this.workgroupSize = [256, 1, 1];\n        }\n        else {\n            const aDivisibleBy4 = aShape.length > 0 && aShape[aShape.length - 1] % 4 === 0;\n            const bDivisibleBy4 = bShape.length > 0 && bShape[bShape.length - 1] % 4 === 0;\n            if (aDivisibleBy4 && bDivisibleBy4) {\n                this.outputComponent = 4;\n                this.variableComponents = [4, 4];\n            }\n            else if ((aDivisibleBy4 &&\n                (util.isScalarShape(bShape) || bShape[bShape.length - 1] === 1)) ||\n                (bDivisibleBy4 &&\n                    (util.isScalarShape(aShape) || aShape[aShape.length - 1] === 1))) {\n                this.outputComponent = 4;\n                this.variableComponents = aDivisibleBy4 ? [4, 1] : [1, 4];\n            }\n            else {\n                this.outputComponent = 1;\n                this.variableComponents = [1, 1];\n            }\n            this.type = 'nonshared';\n            this.shaderKey = `binary_${op}_${this.variableComponents}`;\n            // TODO(jiajia.qin@intel.com): Heuristically select a good work group\n            // size.\n            this.workgroupSize = [128, 1, 1];\n        }\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize, [this.outputComponent, 1, 1]);\n    }\n    getUserCode() {\n        let userCode;\n        const dType = this.outputComponent === 4 ? 'vec4<f32>' : 'f32';\n        const opFnStr = `\n    fn binaryOperation(a : ${dType}, b : ${dType}) -> ${dType} {\n      ${getBinaryOpString(this.op, this.outputComponent === 4)}\n    };\n    `;\n        if (this.type === 'shared') {\n            const sharedIndexSnippet = this.lastDimensionSize > 1 ?\n                `coords[${this.outputShape.length - 1}]` :\n                '0';\n            const accessDataSnippet = this.useSharedMemoryWithB ?\n                `let a = getAByOutputIndex(index);\n          let b = sharedBuf[${sharedIndexSnippet}];` :\n                `let a = sharedBuf[${sharedIndexSnippet}];\n          let b = getBByOutputIndex(index);`;\n            userCode = `\n        ${opFnStr}\n        var<workgroup> sharedBuf : array<f32, ${this.lastDimensionSize}>;\n        ${main('index')} {\n          // Fill in the shared memory buffer.\n          let localIndex = i32(localId.x);\n          if(localIndex < ${this.lastDimensionSize}) {\n            sharedBuf[localIndex] = f32(${this.useSharedMemoryWithB ? 'B' : 'A'}[localIndex]);\n          }\n          workgroupBarrier();\n\n          if(index < uniforms.size) {\n            let coords = getCoordsFromIndex(index);\n            ${accessDataSnippet}\n            setOutputAtIndex(index, binaryOperation(a, b));\n          }\n        }\n        `;\n        }\n        else {\n            userCode = `\n       ${opFnStr}\n       ${main('index')} {\n         if (index < uniforms.size) {\n           let coords = getCoordsFromIndex(index * ${this.outputComponent});\n           let a = ${dType}(getAByOutputCoords(coords));\n           let b = ${dType}(getBByOutputCoords(coords));\n           setOutputAtIndex(index, binaryOperation(a, b));\n         }\n       }\n       `;\n        }\n        return userCode;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmluYXJ5X29wX3dlYmdwdS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2JpbmFyeV9vcF93ZWJncHUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUFDLFlBQVksRUFBRSxJQUFJLEVBQUMsTUFBTSx1QkFBdUIsQ0FBQztBQUV6RCxPQUFPLEVBQWUsaUJBQWlCLEVBQUMsTUFBTSxrQkFBa0IsQ0FBQztBQUNqRSxPQUFPLEVBQUMsbUJBQW1CLElBQUksSUFBSSxFQUFnQixNQUFNLGtCQUFrQixDQUFDO0FBQzVFLE9BQU8sRUFBQyxlQUFlLEVBQUUsa0JBQWtCLEVBQUMsTUFBTSxlQUFlLENBQUM7QUFFbEUsTUFBTSxPQUFPLGVBQWU7SUFpQjFCLFlBQVksRUFBZ0IsRUFBRSxNQUFnQixFQUFFLE1BQWdCO1FBVmhFLFNBQUksR0FBRyxJQUFJLENBQUM7UUFDWixrQkFBYSxHQUFHLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBVXpCLElBQUksQ0FBQyxXQUFXLEdBQUcsWUFBWSxDQUFDLDBCQUEwQixDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsQ0FBQztRQUMzRSxJQUFJLENBQUMsY0FBYyxHQUFHLGtCQUFrQixDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUMzRCxJQUFJLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQztRQUViLElBQUksQ0FBQyxvQkFBb0I7WUFDckIsTUFBTSxDQUFDLE1BQU0sSUFBSSxDQUFDLElBQUksTUFBTSxDQUFDLE1BQU0sR0FBRyxDQUFDLElBQUksTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQztRQUMvRCxJQUFJLENBQUMsb0JBQW9CO1lBQ3JCLE1BQU0sQ0FBQyxNQUFNLElBQUksQ0FBQyxJQUFJLE1BQU0sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxJQUFJ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cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge2JhY2tlbmRfdXRpbCwgdXRpbH0gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcblxuaW1wb3J0IHtCaW5hcnlPcFR5cGUsIGdldEJpbmFyeU9wU3RyaW5nfSBmcm9tICcuL2JpbmFyeV9vcF91dGlsJztcbmltcG9ydCB7Z2V0TWFpbkhlYWRlclN0cmluZyBhcyBtYWluLCBXZWJHUFVQcm9ncmFtfSBmcm9tICcuL3dlYmdwdV9wcm9ncmFtJztcbmltcG9ydCB7Y29tcHV0ZURpc3BhdGNoLCBmbGF0RGlzcGF0Y2hMYXlvdXR9IGZyb20gJy4vd2ViZ3B1X3V0aWwnO1xuXG5leHBvcnQgY2xhc3MgQmluYXJ5T3BQcm9ncmFtIGltcGxlbWVudHMgV2ViR1BVUHJvZ3JhbSB7XG4gIGRpc3BhdGNoOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl07XG4gIGRpc3BhdGNoTGF5b3V0OiB7eDogbnVtYmVyW119O1xuICBvdXRwdXRDb21wb25lbnQ6IG51bWJlcjtcbiAgb3A6IEJpbmFyeU9wVHlwZTtcbiAgb3V0cHV0U2hhcGU6IG51bWJlcltdO1xuICBzaGFkZXJLZXk6IHN0cmluZztcbiAgc2l6ZSA9IHRydWU7XG4gIHZhcmlhYmxlTmFtZXMgPSBbJ0EnLCAnQiddO1xuICB3b3JrZ3JvdXBTaXplOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl07XG4gIHZhcmlhYmxlQ29tcG9uZW50czogbnVtYmVyW107XG5cbiAgcHJpdmF0ZSBsYXN0RGltZW5zaW9uU2l6ZTogbnVtYmVyO1xuICBwcml2YXRlIHVzZVNoYXJlZE1lbW9yeVdpdGhBOiBib29sZWFuO1xuICBwcml2YXRlIHVzZVNoYXJlZE1lbW9yeVdpdGhCOiBib29sZWFuO1xuICBwcml2YXRlIHR5cGU6IHN0cmluZztcblxuICBjb25zdHJ1Y3RvcihvcDogQmluYXJ5T3BUeXBlLCBhU2hhcGU6IG51bWJlcltdLCBiU2hhcGU6IG51bWJlcltdKSB7XG4gICAgdGhpcy5vdXRwdXRTaGFwZSA9IGJhY2tlbmRfdXRpbC5hc3NlcnRBbmRHZXRCcm9hZGNhc3RTaGFwZShhU2hhcGUsIGJTaGFwZSk7XG4gICAgdGhpcy5kaXNwYXRjaExheW91dCA9IGZsYXREaXNwYXRjaExheW91dCh0aGlzLm91dHB1dFNoYXBlKTtcbiAgICB0aGlzLm9wID0gb3A7XG5cbiAgICB0aGlzLnVzZVNoYXJlZE1lbW9yeVdpdGhBID1cbiAgICAgICAgYVNoYXBlLmxlbmd0aCA8PSAxICYmIGJTaGFwZS5sZW5ndGggPiAxICYmIGFTaGFwZVswXSA8IDEyODtcbiAgICB0aGlzLnVzZVNoYXJlZE1lbW9yeVdpdGhCID1cbiAgICAgICAgYlNoYXBlLmxlbmd0aCA8PSAxICYmIGFTaGFwZS5sZW5ndGggPiAxICYmIGJTaGFwZVswXSA8IDEyODtcblxuICAgIGlmICh0aGlzLnVzZVNoYXJlZE1lbW9yeVdpdGhBIHx8IHRoaXMudXNlU2hhcmVkTWVtb3J5V2l0aEIpIHtcbiAgICAgIHRoaXMub3V0cHV0Q29tcG9uZW50ID0gMTtcbiAgICAgIHRoaXMudmFyaWFibGVDb21wb25lbnRzID0gWzEsIDFdO1xuICAgICAgLy8gbGFzdERpbWVuc2lvblNpemUgaXMgdXNlZCBhcyBzaGFyZWRCdWYgYXJyYXkgc2l6ZSwgc28gY2FuIG5vdCBiZVxuICAgICAgLy8gdXNlZCBhcyB1bmlmb3JtLlxuICAgICAgdGhpcy5sYXN0RGltZW5zaW9uU2l6ZSA9XG4gICAgICAgICAgdGhpcy51c2VTaGFyZWRNZW1vcnlXaXRoQiA/IGJTaGFwZVswXSA6IGFTaGFwZVswXTtcbiAgICAgIHRoaXMuc2hhZGVyS2V5ID0gYGJpbmFyeV8ke29wfV8ke3RoaXMubGFzdERpbWVuc2lvblNpemV9YDtcbiAgICAgIHRoaXMudHlwZSA9ICdzaGFyZWQnO1xuICAgICAgLy8gVGhpcyBpcyBhbiBleHBlcmltZW50YWwgdmFsdWUgd2hlbiB1c2luZyBzaGFyZWQgbWVtb3J5LlxuICAgICAgLy8gTm90ZSB0aGF0IHRoZSBtYXhpbXVtIG9mIHdvcmtncm91cCBYIGRpbWVuc2lvbiBpcyAyNTYuXG4gICAgICB0aGlzLndvcmtncm91cFNpemUgPSBbMjU2LCAxLCAxXTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgYURpdmlzaWJsZUJ5NCA9XG4gICAgICAgICAgYVNoYXBlLmxlbmd0aCA+IDAgJiYgYVNoYXBlW2FTaGFwZS5sZW5ndGggLSAxXSAlIDQgPT09IDA7XG4gICAgICBjb25zdCBiRGl2aXNpYmxlQnk0ID1cbiAgICAgICAgICBiU2hhcGUubGVuZ3RoID4gMCAmJiBiU2hhcGVbYlNoYXBlLmxlbmd0aCAtIDFdICUgNCA9PT0gMDtcbiAgICAgIGlmIChhRGl2aXNpYmxlQnk0ICYmIGJEaXZpc2libGVCeTQpIHtcbiAgICAgICAgdGhpcy5vdXRwdXRDb21wb25lbnQgPSA0O1xuICAgICAgICB0aGlzLnZhcmlhYmxlQ29tcG9uZW50cyA9IFs0LCA0XTtcbiAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgKGFEaXZpc2libGVCeTQgJiZcbiAgICAgICAgICAgKHV0aWwuaXNTY2FsYXJTaGFwZShiU2hhcGUpIHx8IGJTaGFwZVtiU2hhcGUubGVuZ3RoIC0gMV0gPT09IDEpKSB8fFxuICAgICAgICAgIChiRGl2aXNpYmxlQnk0ICYmXG4gICAgICAgICAgICh1dGlsLmlzU2NhbGFyU2hhcGUoYVNoYXBlKSB8fCBhU2hhcGVbYVNoYXBlLmxlbmd0aCAtIDFdID09PSAxKSkpIHtcbiAgICAgICAgdGhpcy5vdXRwdXRDb21wb25lbnQgPSA0O1xuICAgICAgICB0aGlzLnZhcmlhYmxlQ29tcG9uZW50cyA9IGFEaXZpc2libGVCeTQgPyBbNCwgMV0gOiBbMSwgNF07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLm91dHB1dENvbXBvbmVudCA9IDE7XG4gICAgICAgIHRoaXMudmFyaWFibGVDb21wb25lbnRzID0gWzEsIDFdO1xuICAgICAgfVxuICAgICAgdGhpcy50eXBlID0gJ25vbnNoYXJlZCc7XG4gICAgICB0aGlzLnNoYWRlcktleSA9IGBiaW5hcnlfJHtvcH1fJHt0aGlzLnZhcmlhYmxlQ29tcG9uZW50c31gO1xuICAgICAgLy8gVE9ETyhqaWFqaWEucWluQGludGVsLmNvbSk6IEhldXJpc3RpY2FsbHkgc2VsZWN0IGEgZ29vZCB3b3JrIGdyb3VwXG4gICAgICAvLyBzaXplLlxuICAgICAgdGhpcy53b3JrZ3JvdXBTaXplID0gWzEyOCwgMSwgMV07XG4gICAgfVxuICAgIHRoaXMuZGlzcGF0Y2ggPSBjb21wdXRlRGlzcGF0Y2goXG4gICAgICAgIHRoaXMuZGlzcGF0Y2hMYXlvdXQsIHRoaXMub3V0cHV0U2hhcGUsIHRoaXMud29ya2dyb3VwU2l6ZSxcbiAgICAgICAgW3RoaXMub3V0cHV0Q29tcG9uZW50LCAxLCAxXSk7XG4gIH1cblxuICBnZXRVc2VyQ29kZSgpOiBzdHJpbmcge1xuICAgIGxldCB1c2VyQ29kZTtcbiAgICBjb25zdCBkVHlwZSA9IHRoaXMub3V0cHV0Q29tcG9uZW50ID09PSA0ID8gJ3ZlYzQ8ZjMyPicgOiAnZjMyJztcbiAgICBjb25zdCBvcEZuU3RyID0gYFxuICAgIGZuIGJpbmFyeU9wZXJhdGlvbihhIDogJHtkVHlwZX0sIGIgOiAke2RUeXBlfSkgLT4gJHtkVHlwZX0ge1xuICAgICAgJHtnZXRCaW5hcnlPcFN0cmluZyh0aGlzLm9wLCB0aGlzLm91dHB1dENvbXBvbmVudCA9PT0gNCl9XG4gICAgfTtcbiAgICBgO1xuXG4gICAgaWYgKHRoaXMudHlwZSA9PT0gJ3NoYXJlZCcpIHtcbiAgICAgIGNvbnN0IHNoYXJlZEluZGV4U25pcHBldCA9IHRoaXMubGFzdERpbWVuc2lvblNpemUgPiAxID9cbiAgICAgICAgICBgY29vcmRzWyR7dGhpcy5vdXRwdXRTaGFwZS5sZW5ndGggLSAxfV1gIDpcbiAgICAgICAgICAnMCc7XG4gICAgICBjb25zdCBhY2Nlc3NEYXRhU25pcHBldCA9IHRoaXMudXNlU2hhcmVkTWVtb3J5V2l0aEIgP1xuICAgICAgICAgIGBsZXQgYSA9IGdldEFCeU91dHB1dEluZGV4KGluZGV4KTtcbiAgICAgICAgICBsZXQgYiA9IHNoYXJlZEJ1Zlske3NoYXJlZEluZGV4U25pcHBldH1dO2AgOlxuICAgICAgICAgIGBsZXQgYSA9IHNoYXJlZEJ1Zlske3NoYXJlZEluZGV4U25pcHBldH1dO1xuICAgICAgICAgIGxldCBiID0gZ2V0QkJ5T3V0cHV0SW5kZXgoaW5kZXgpO2A7XG4gICAgICB1c2VyQ29kZSA9IGBcbiAgICAgICAgJHtvcEZuU3RyfVxuICAgICAgICB2YXI8d29ya2dyb3VwPiBzaGFyZWRCdWYgOiBhcnJheTxmMzIsICR7dGhpcy5sYXN0RGltZW5zaW9uU2l6ZX0+O1xuICAgICAgICAke21haW4oJ2luZGV4Jyl9IHtcbiAgICAgICAgICAvLyBGaWxsIGluIHRoZSBzaGFyZWQgbWVtb3J5IGJ1ZmZlci5cbiAgICAgICAgICBsZXQgbG9jYWxJbmRleCA9IGkzMihsb2NhbElkLngpO1xuICAgICAgICAgIGlmKGxvY2FsSW5kZXggPCAke3RoaXMubGFzdERpbWVuc2lvblNpemV9KSB7XG4gICAgICAgICAgICBzaGFyZWRCdWZbbG9jYWxJbmRleF0gPSBmMzIoJHtcbiAgICAgICAgICB0aGlzLnVzZVNoYXJlZE1lbW9yeVdpdGhCID8gJ0InIDogJ0EnfVtsb2NhbEluZGV4XSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHdvcmtncm91cEJhcnJpZXIoKTtcblxuICAgICAgICAgIGlmKGluZGV4IDwgdW5pZm9ybXMuc2l6ZSkge1xuICAgICAgICAgICAgbGV0IGNvb3JkcyA9IGdldENvb3Jkc0Zyb21JbmRleChpbmRleCk7XG4gICAgICAgICAgICAke2FjY2Vzc0RhdGFTbmlwcGV0fVxuICAgICAgICAgICAgc2V0T3V0cHV0QXRJbmRleChpbmRleCwgYmluYXJ5T3BlcmF0aW9uKGEsIGIpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYDtcbiAgICB9IGVsc2Uge1xuICAgICAgdXNlckNvZGUgPSBgXG4gICAgICAgJHtvcEZuU3RyfVxuICAgICAgICR7bWFpbignaW5kZXgnKX0ge1xuICAgICAgICAgaWYgKGluZGV4IDwgdW5pZm9ybXMuc2l6ZSkge1xuICAgICAgICAgICBsZXQgY29vcmRzID0gZ2V0Q29vcmRzRnJvbUluZGV4KGluZGV4ICogJHt0aGlzLm91dHB1dENvbXBvbmVudH0pO1xuICAgICAgICAgICBsZXQgYSA9ICR7ZFR5cGV9KGdldEFCeU91dHB1dENvb3Jkcyhjb29yZHMpKTtcbiAgICAgICAgICAgbGV0IGIgPSAke2RUeXBlfShnZXRCQnlPdXRwdXRDb29yZHMoY29vcmRzKSk7XG4gICAgICAgICAgIHNldE91dHB1dEF0SW5kZXgoaW5kZXgsIGJpbmFyeU9wZXJhdGlvbihhLCBiKSk7XG4gICAgICAgICB9XG4gICAgICAgfVxuICAgICAgIGA7XG4gICAgfVxuXG4gICAgcmV0dXJuIHVzZXJDb2RlO1xuICB9XG59XG4iXX0=","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Identity } from '@tensorflow/tfjs-core';\nexport function identity(args) {\n    const { inputs } = args;\n    const { x } = inputs;\n    args.backend.incRef(x.dataId);\n    return { dataId: x.dataId, shape: x.shape, dtype: x.dtype };\n}\nexport const identityConfig = {\n    kernelName: Identity,\n    backendName: 'webgpu',\n    kernelFunc: identity\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiSWRlbnRpdHkuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9rZXJuZWxzL0lkZW50aXR5LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sRUFBQyxRQUFRLEVBQXVELE1BQU0sdUJBQXVCLENBQUM7QUFHckcsTUFBTSxVQUFVLFFBQVEsQ0FDcEIsSUFBc0Q7SUFDeEQsTUFBTSxFQUFDLE1BQU0sRUFBQyxHQUFHLElBQUksQ0FBQztJQUN0QixNQUFNLEVBQUMsQ0FBQyxFQUFDLEdBQUcsTUFBTSxDQUFDO0lBRW5CLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUM5QixPQUFPLEVBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxNQUFNLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQyxLQUFLLEVBQUMsQ0FBQztBQUM1RCxDQUFDO0FBRUQsTUFBTSxDQUFDLE1BQU0sY0FBYyxHQUFpQjtJQUMxQyxVQUFVLEVBQUUsUUFBUTtJQUNwQixXQUFXLEVBQUUsUUFBUTtJQUNyQixVQUFVLEVBQUUsUUFBaUM7Q0FDOUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtJZGVudGl0eSwgSWRlbnRpdHlJbnB1dHMsIEtlcm5lbENvbmZpZywgS2VybmVsRnVuYywgVGVuc29ySW5mb30gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcbmltcG9ydCB7V2ViR1BVQmFja2VuZH0gZnJvbSAnLi4vYmFja2VuZF93ZWJncHUnO1xuXG5leHBvcnQgZnVuY3Rpb24gaWRlbnRpdHkoXG4gICAgYXJnczoge2lucHV0czogSWRlbnRpdHlJbnB1dHMsIGJhY2tlbmQ6IFdlYkdQVUJhY2tlbmR9KTogVGVuc29ySW5mbyB7XG4gIGNvbnN0IHtpbnB1dHN9ID0gYXJncztcbiAgY29uc3Qge3h9ID0gaW5wdXRzO1xuXG4gIGFyZ3MuYmFja2VuZC5pbmNSZWYoeC5kYXRhSWQpO1xuICByZXR1cm4ge2RhdGFJZDogeC5kYXRhSWQsIHNoYXBlOiB4LnNoYXBlLCBkdHlwZTogeC5kdHlwZX07XG59XG5cbmV4cG9ydCBjb25zdCBpZGVudGl0eUNvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBJZGVudGl0eSxcbiAgYmFja2VuZE5hbWU6ICd3ZWJncHUnLFxuICBrZXJuZWxGdW5jOiBpZGVudGl0eSBhcyB1bmtub3duIGFzIEtlcm5lbEZ1bmNcbn07XG4iXX0=","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Complex } from '@tensorflow/tfjs-core';\nimport { identity } from './Identity';\n/**\n * Complex tensors share data with their real and imaginary components. Complex\n * tensors' reference to the components is tracked by refCount on the individual\n * component. The refCounts are increased by the identity call.\n *\n * When a complex tensor is disposed, it will reduce the refCount on the\n * components by calling disposeData on each.\n */\nexport function complex(args) {\n    const { inputs, backend } = args;\n    const { real, imag } = inputs;\n    const complexInfo = backend.makeTensorInfo(real.shape, 'complex64');\n    const complex = backend.tensorMap.get(complexInfo.dataId);\n    const realTensorInfo = identity({ inputs: { x: real }, backend });\n    const imagTensorInfo = identity({ inputs: { x: imag }, backend });\n    complex.complexTensorInfos = { real: realTensorInfo, imag: imagTensorInfo };\n    return complexInfo;\n}\nexport const complexConfig = {\n    kernelName: Complex,\n    backendName: 'webgpu',\n    kernelFunc: complex\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ29tcGxleC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2tlcm5lbHMvQ29tcGxleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQUMsT0FBTyxFQUFzRCxNQUFNLHVCQUF1QixDQUFDO0FBR25HLE9BQU8sRUFBQyxRQUFRLEVBQUMsTUFBTSxZQUFZLENBQUM7QUFFcEM7Ozs7Ozs7R0FPRztBQUNILE1BQU0sVUFBVSxPQUFPLENBQUMsSUFBcUQ7SUFFM0UsTUFBTSxFQUFDLE1BQU0sRUFBRSxPQUFPLEVBQUMsR0FBRyxJQUFJLENBQUM7SUFDL0IsTUFBTSxFQUFDLElBQUksRUFBRSxJQUFJLEVBQUMsR0FBRyxNQUFNLENBQUM7SUFFNUIsTUFBTSxXQUFXLEdBQUcsT0FBTyxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLFdBQVcsQ0FBQyxDQUFDO0lBQ3BFLE1BQU0sT0FBTyxHQUFHLE9BQU8sQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUUxRCxNQUFNLGNBQWMsR0FBRyxRQUFRLENBQUMsRUFBQyxNQUFNLEVBQUUsRUFBQyxDQUFDLEVBQUUsSUFBSSxFQUFDLEVBQUUsT0FBTyxFQUFDLENBQUMsQ0FBQztJQUU5RCxNQUFNLGNBQWMsR0FBRyxRQUFRLENBQUMsRUFBQyxNQUFNLEVBQUUsRUFBQyxDQUFDLEVBQUUsSUFBSSxFQUFDLEVBQUUsT0FBTyxFQUFDLENBQUMsQ0FBQztJQUU5RCxPQUFPLENBQUMsa0JBQWtCLEdBQUcsRUFBQyxJQUFJLEVBQUUsY0FBYyxFQUFFLElBQUksRUFBRSxjQUFjLEVBQUMsQ0FBQztJQUUxRSxPQUFPLFdBQVcsQ0FBQztBQUNyQixDQUFDO0FBRUQsTUFBTSxDQUFDLE1BQU0sYUFBYSxHQUFpQjtJQUN6QyxVQUFVLEVBQUUsT0FBTztJQUNuQixXQUFXLEVBQUUsUUFBUTtJQUNyQixVQUFVLEVBQUUsT0FBZ0M7Q0FDN0MsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtDb21wbGV4LCBDb21wbGV4SW5wdXRzLCBLZXJuZWxDb25maWcsIEtlcm5lbEZ1bmMsIFRlbnNvckluZm99IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7V2ViR1BVQmFja2VuZH0gZnJvbSAnLi4vYmFja2VuZF93ZWJncHUnO1xuaW1wb3J0IHtpZGVudGl0eX0gZnJvbSAnLi9JZGVudGl0eSc7XG5cbi8qKlxuICogQ29tcGxleCB0ZW5zb3JzIHNoYXJlIGRhdGEgd2l0aCB0aGVpciByZWFsIGFuZCBpbWFnaW5hcnkgY29tcG9uZW50cy4gQ29tcGxleFxuICogdGVuc29ycycgcmVmZXJlbmNlIHRvIHRoZSBjb21wb25lbnRzIGlzIHRyYWNrZWQgYnkgcmVmQ291bnQgb24gdGhlIGluZGl2aWR1YWxcbiAqIGNvbXBvbmVudC4gVGhlIHJlZkNvdW50cyBhcmUgaW5jcmVhc2VkIGJ5IHRoZSBpZGVudGl0eSBjYWxsLlxuICpcbiAqIFdoZW4gYSBjb21wbGV4IHRlbnNvciBpcyBkaXNwb3NlZCwgaXQgd2lsbCByZWR1Y2UgdGhlIHJlZkNvdW50IG9uIHRoZVxuICogY29tcG9uZW50cyBieSBjYWxsaW5nIGRpc3Bvc2VEYXRhIG9uIGVhY2guXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb21wbGV4KGFyZ3M6IHtpbnB1dHM6IENvbXBsZXhJbnB1dHMsIGJhY2tlbmQ6IFdlYkdQVUJhY2tlbmR9KTpcbiAgICBUZW5zb3JJbmZvIHtcbiAgY29uc3Qge2lucHV0cywgYmFja2VuZH0gPSBhcmdzO1xuICBjb25zdCB7cmVhbCwgaW1hZ30gPSBpbnB1dHM7XG5cbiAgY29uc3QgY29tcGxleEluZm8gPSBiYWNrZW5kLm1ha2VUZW5zb3JJbmZvKHJlYWwuc2hhcGUsICdjb21wbGV4NjQnKTtcbiAgY29uc3QgY29tcGxleCA9IGJhY2tlbmQudGVuc29yTWFwLmdldChjb21wbGV4SW5mby5kYXRhSWQpO1xuXG4gIGNvbnN0IHJlYWxUZW5zb3JJbmZvID0gaWRlbnRpdHkoe2lucHV0czoge3g6IHJlYWx9LCBiYWNrZW5kfSk7XG5cbiAgY29uc3QgaW1hZ1RlbnNvckluZm8gPSBpZGVudGl0eSh7aW5wdXRzOiB7eDogaW1hZ30sIGJhY2tlbmR9KTtcblxuICBjb21wbGV4LmNvbXBsZXhUZW5zb3JJbmZvcyA9IHtyZWFsOiByZWFsVGVuc29ySW5mbywgaW1hZzogaW1hZ1RlbnNvckluZm99O1xuXG4gIHJldHVybiBjb21wbGV4SW5mbztcbn1cblxuZXhwb3J0IGNvbnN0IGNvbXBsZXhDb25maWc6IEtlcm5lbENvbmZpZyA9IHtcbiAga2VybmVsTmFtZTogQ29tcGxleCxcbiAgYmFja2VuZE5hbWU6ICd3ZWJncHUnLFxuICBrZXJuZWxGdW5jOiBjb21wbGV4IGFzIHVua25vd24gYXMgS2VybmVsRnVuY1xufTtcbiJdfQ==","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { getUnaryOpString } from './unary_op_util';\nimport { getMainHeaderString as main } from './webgpu_program';\nimport { computeDispatch, flatDispatchLayout } from './webgpu_util';\nexport class UnaryOpProgram {\n    constructor(outputShape, op, uniforms = '') {\n        this.variableNames = ['A'];\n        this.size = true;\n        // TODO(jiajia.qin@intel.com): Heuristically select a good work group size.\n        const workgroupSizeX = 128;\n        this.workgroupSize = [workgroupSizeX, 1, 1];\n        this.outputShape = outputShape;\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize);\n        this.op = op;\n        if (uniforms !== '') {\n            this.uniforms = uniforms;\n        }\n        this.shaderKey = `unary_${op}`;\n    }\n    getUserCode() {\n        return `\n      fn unaryOperation(a : f32) -> f32 {\n        ${getUnaryOpString(this.op, false)}\n      }\n      ${main('index')} {\n        if (index < uniforms.size) {\n          let a = getAByOutputIndex(index);\n          setOutputAtIndex(index, unaryOperation(a));\n        }\n      }\n      `;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidW5hcnlfb3Bfd2ViZ3B1LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMvdW5hcnlfb3Bfd2ViZ3B1LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sRUFBQyxnQkFBZ0IsRUFBYyxNQUFNLGlCQUFpQixDQUFDO0FBQzlELE9BQU8sRUFBQyxtQkFBbUIsSUFBSSxJQUFJLEVBQWdCLE1BQU0sa0JBQWtCLENBQUM7QUFDNUUsT0FBTyxFQUFDLGVBQWUsRUFBRSxrQkFBa0IsRUFBQyxNQUFNLGVBQWUsQ0FBQztBQUVsRSxNQUFNLE9BQU8sY0FBYztJQVd6QixZQUFZLFdBQXFCLEVBQUUsRUFBZSxFQUFFLFFBQVEsR0FBRyxFQUFFO1FBTmpFLGtCQUFhLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUl0QixTQUFJLEdBQUcsSUFBSSxDQUFDO1FBR1YsMkVBQTJFO1FBQzNFLE1BQU0sY0FBYyxHQUFHLEdBQUcsQ0FBQztRQUMzQixJQUFJLENBQUMsYUFBYSxHQUFHLENBQUMsY0FBYyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUM1QyxJQUFJLENBQUMsV0FBVyxHQUFHLFdBQVcsQ0FBQztRQUMvQixJQUFJLENBQUMsY0FBYyxHQUFHLGtCQUFrQixDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUMzRCxJQUFJLENBQUMsUUFBUSxHQUFHLGVBQWUsQ0FDM0IsSUFBSSxDQUFDLGNBQWMsRUFBRSxJQUFJLENBQUMsV0FBVyxFQUFFLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQztRQUMvRCxJQUFJLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQztRQUNiLElBQUksUUFBUSxLQUFLLEVBQUUsRUFBRTtZQUNuQixJQUFJLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQztTQUMxQjtRQUNELElBQUksQ0FBQyxTQUFTLEdBQUcsU0FBUyxFQUFFLEVBQUUsQ0FBQztJQUNqQyxDQUFDO0lBRUQsV0FBVztRQUNULE9BQU87O1VBRUQsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLEVBQUUsRUFBRSxLQUFLLENBQUM7O1FBRWxDLElBQUksQ0FBQyxPQUFPLENBQUM7Ozs7OztPQU1kLENBQUM7SUFDTixDQUFDO0NBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7Z2V0VW5hcnlPcFN0cmluZywgVW5hcnlPcFR5cGV9IGZyb20gJy4vdW5hcnlfb3BfdXRpbCc7XG5pbXBvcnQge2dldE1haW5IZWFkZXJTdHJpbmcgYXMgbWFpbiwgV2ViR1BVUHJvZ3JhbX0gZnJvbSAnLi93ZWJncHVfcHJvZ3JhbSc7XG5pbXBvcnQge2NvbXB1dGVEaXNwYXRjaCwgZmxhdERpc3BhdGNoTGF5b3V0fSBmcm9tICcuL3dlYmdwdV91dGlsJztcblxuZXhwb3J0IGNsYXNzIFVuYXJ5T3BQcm9ncmFtIGltcGxlbWVudHMgV2ViR1BVUHJvZ3JhbSB7XG4gIG91dHB1dFNoYXBlOiBudW1iZXJbXTtcbiAgc2hhZGVyS2V5OiBzdHJpbmc7XG4gIGRpc3BhdGNoTGF5b3V0OiB7eDogbnVtYmVyW119O1xuICBkaXNwYXRjaDogW251bWJlciwgbnVtYmVyLCBudW1iZXJdO1xuICB2YXJpYWJsZU5hbWVzID0gWydBJ107XG4gIHdvcmtncm91cFNpemU6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXTtcbiAgb3A6IFVuYXJ5T3BUeXBlO1xuICB1bmlmb3Jtcz86IHN0cmluZztcbiAgc2l6ZSA9IHRydWU7XG5cbiAgY29uc3RydWN0b3Iob3V0cHV0U2hhcGU6IG51bWJlcltdLCBvcDogVW5hcnlPcFR5cGUsIHVuaWZvcm1zID0gJycpIHtcbiAgICAvLyBUT0RPKGppYWppYS5xaW5AaW50ZWwuY29tKTogSGV1cmlzdGljYWxseSBzZWxlY3QgYSBnb29kIHdvcmsgZ3JvdXAgc2l6ZS5cbiAgICBjb25zdCB3b3JrZ3JvdXBTaXplWCA9IDEyODtcbiAgICB0aGlzLndvcmtncm91cFNpemUgPSBbd29ya2dyb3VwU2l6ZVgsIDEsIDFdO1xuICAgIHRoaXMub3V0cHV0U2hhcGUgPSBvdXRwdXRTaGFwZTtcbiAgICB0aGlzLmRpc3BhdGNoTGF5b3V0ID0gZmxhdERpc3BhdGNoTGF5b3V0KHRoaXMub3V0cHV0U2hhcGUpO1xuICAgIHRoaXMuZGlzcGF0Y2ggPSBjb21wdXRlRGlzcGF0Y2goXG4gICAgICAgIHRoaXMuZGlzcGF0Y2hMYXlvdXQsIHRoaXMub3V0cHV0U2hhcGUsIHRoaXMud29ya2dyb3VwU2l6ZSk7XG4gICAgdGhpcy5vcCA9IG9wO1xuICAgIGlmICh1bmlmb3JtcyAhPT0gJycpIHtcbiAgICAgIHRoaXMudW5pZm9ybXMgPSB1bmlmb3JtcztcbiAgICB9XG4gICAgdGhpcy5zaGFkZXJLZXkgPSBgdW5hcnlfJHtvcH1gO1xuICB9XG5cbiAgZ2V0VXNlckNvZGUoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYFxuICAgICAgZm4gdW5hcnlPcGVyYXRpb24oYSA6IGYzMikgLT4gZjMyIHtcbiAgICAgICAgJHtnZXRVbmFyeU9wU3RyaW5nKHRoaXMub3AsIGZhbHNlKX1cbiAgICAgIH1cbiAgICAgICR7bWFpbignaW5kZXgnKX0ge1xuICAgICAgICBpZiAoaW5kZXggPCB1bmlmb3Jtcy5zaXplKSB7XG4gICAgICAgICAgbGV0IGEgPSBnZXRBQnlPdXRwdXRJbmRleChpbmRleCk7XG4gICAgICAgICAgc2V0T3V0cHV0QXRJbmRleChpbmRleCwgdW5hcnlPcGVyYXRpb24oYSkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBgO1xuICB9XG59XG4iXX0=","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { backend_util, upcastType } from '@tensorflow/tfjs-core';\nimport { BinaryOpComplexProgram } from '../binary_op_complex_webgpu';\nimport { BinaryOpType } from '../binary_op_util';\nimport { BinaryOpProgram } from '../binary_op_webgpu';\nimport { complex } from '../kernels/Complex';\nimport { UnaryOpProgram } from '../unary_op_webgpu';\n/**\n * Template that creates a `KernelFunc` for unary ops.\n * @param opType Op type to create `UnaryOpProgram`.\n * @param cpuKernelImpl Optional. Shared functionality from tfjs-backend-cpu, it\n *     will be involved when necessary.\n * @param dtype Optional. If set, the result has this dtype. Otherwise, the\n *     result has the same dtype as the first input. This is mainly used in\n *     comparison kernels, such as Equal, Less, Greater, etc.\n */\nexport function unaryKernelFunc({ opType, cpuKernelImpl, dtype }) {\n    return ({ inputs, backend }) => {\n        const { x } = inputs;\n        const webgpuBackend = backend;\n        const $dtype = dtype || x.dtype;\n        if (webgpuBackend.shouldExecuteOnCPU([x]) && cpuKernelImpl != null) {\n            const xData = webgpuBackend.tensorMap.get(x.dataId);\n            const outValues = cpuKernelImpl(xData.values, $dtype);\n            return webgpuBackend.makeTensorInfo(x.shape, $dtype, outValues);\n        }\n        const program = new UnaryOpProgram(x.shape, opType);\n        return webgpuBackend.runWebGPUProgram(program, [x], $dtype);\n    };\n}\n/**\n * Template that creates a `KernelFunc` for binary ops.\n * @param opType Op type to create `BinaryOpProgram`.\n * @param cpuKernelImpl Optional. Shared functionality from tfjs-backend-cpu, it\n *     will be involved when necessary.\n * @param dtype Optional. If set, the result has this dtype. Otherwise, the\n *     result has the same dtype as the first input. This is mainly used in\n *     comparison kernels, such as Equal, Less, Greater, etc.\n */\nexport function binaryKernelFunc({ opType, cpuKernelImpl, supportsComplex = false, dtype }) {\n    return ({ inputs, backend }) => {\n        const { a, b } = inputs;\n        const webgpuBackend = backend;\n        if (supportsComplex && a.dtype === 'complex64') {\n            const aData = webgpuBackend.tensorMap.get(a.dataId);\n            const bData = webgpuBackend.tensorMap.get(b.dataId);\n            let real, imag;\n            if (opType !== BinaryOpType.MUL) {\n                [real, imag] = [\n                    [aData.complexTensorInfos.real, bData.complexTensorInfos.real],\n                    [aData.complexTensorInfos.imag, bData.complexTensorInfos.imag]\n                ].map(complexParts => {\n                    const [aPart, bPart] = complexParts;\n                    const aHandle = {\n                        dataId: aPart.dataId,\n                        dtype: aPart.dtype,\n                        shape: a.shape\n                    };\n                    const bHandle = {\n                        dataId: bPart.dataId,\n                        dtype: bPart.dtype,\n                        shape: b.shape\n                    };\n                    const program = new BinaryOpProgram(opType, a.shape, b.shape);\n                    return webgpuBackend.runWebGPUProgram(program, [aHandle, bHandle], upcastType(aPart.dtype, bPart.dtype));\n                });\n            }\n            else {\n                const realProgram = new BinaryOpComplexProgram(BinaryOpType.COMPLEX_MULTIPLY_REAL, a.shape, b.shape);\n                const imagProgram = new BinaryOpComplexProgram(BinaryOpType.COMPLEX_MULTIPLY_IMAG, a.shape, b.shape);\n                const inputs = [\n                    {\n                        dataId: aData.complexTensorInfos.real.dataId,\n                        dtype: aData.complexTensorInfos.real.dtype,\n                        shape: a.shape\n                    },\n                    {\n                        dataId: aData.complexTensorInfos.imag.dataId,\n                        dtype: aData.complexTensorInfos.imag.dtype,\n                        shape: a.shape\n                    },\n                    {\n                        dataId: bData.complexTensorInfos.real.dataId,\n                        dtype: bData.complexTensorInfos.real.dtype,\n                        shape: b.shape\n                    },\n                    {\n                        dataId: bData.complexTensorInfos.imag.dataId,\n                        dtype: bData.complexTensorInfos.imag.dtype,\n                        shape: b.shape\n                    }\n                ];\n                real = webgpuBackend.runWebGPUProgram(realProgram, inputs, 'float32');\n                imag = webgpuBackend.runWebGPUProgram(imagProgram, inputs, 'float32');\n            }\n            const complexOutput = complex({ inputs: { real, imag }, backend: webgpuBackend });\n            webgpuBackend.disposeData(real.dataId);\n            webgpuBackend.disposeData(imag.dataId);\n            // TODO: Implement CPU forwarding for complex inputs.\n            return complexOutput;\n        }\n        const $dtype = dtype || upcastType(a.dtype, b.dtype);\n        if ((a.dtype === 'string' || b.dtype === 'string' ||\n            webgpuBackend.shouldExecuteOnCPU([a, b])) &&\n            cpuKernelImpl != null) {\n            const aData = webgpuBackend.tensorMap.get(a.dataId).values;\n            const bData = webgpuBackend.tensorMap.get(b.dataId).values;\n            const decodedAVals = a.dtype === 'string' ?\n                // tslint:disable-next-line: no-any\n                backend_util.fromUint8ToStringArray(aData) :\n                aData;\n            const decodedBVals = a.dtype === 'string' ?\n                // tslint:disable-next-line: no-any\n                backend_util.fromUint8ToStringArray(bData) :\n                bData;\n            const [outValues, outShape] = cpuKernelImpl(a.shape, b.shape, decodedAVals, decodedBVals, $dtype);\n            return webgpuBackend.makeTensorInfo(outShape, $dtype, outValues);\n        }\n        const program = new BinaryOpProgram(opType, a.shape, b.shape);\n        return webgpuBackend.runWebGPUProgram(program, [a, b], $dtype);\n    };\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoia2VybmVsX2Z1bmNzX3V0aWxzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMva2VybmVsX3V0aWxzL2tlcm5lbF9mdW5jc191dGlscy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQUMsWUFBWSxFQUEyRSxVQUFVLEVBQUMsTUFBTSx1QkFBdUIsQ0FBQztBQUd4SSxPQUFPLEVBQUMsc0JBQXNCLEVBQUMsTUFBTSw2QkFBNkIsQ0FBQztBQUNuRSxPQUFPLEVBQUMsWUFBWSxFQUFDLE1BQU0sbUJBQW1CLENBQUM7QUFDL0MsT0FBTyxFQUFDLGVBQWUsRUFBQyxNQUFNLHFCQUFxQixDQUFDO0FBQ3BELE9BQU8sRUFBQyxPQUFPLEVBQUMsTUFBTSxvQkFBb0IsQ0FBQztBQUUzQyxPQUFPLEVBQUMsY0FBYyxFQUFDLE1BQU0sb0JBQW9CLENBQUM7QUFVbEQ7Ozs7Ozs7O0dBUUc7QUFDSCxNQUFNLFVBQVUsZUFBZSxDQUMzQixFQUFDLE1BQU0sRUFBRSxhQUFhLEVBQUUsS0FBSyxFQUF3QjtJQUN2RCxPQUFPLENBQUMsRUFBQyxNQUFNLEVBQUUsT0FBTyxFQUFDLEVBQUUsRUFBRTtRQUMzQixNQUFNLEVBQUMsQ0FBQyxFQUFDLEdBQUcsTUFBcUIsQ0FBQztRQUNsQyxNQUFNLGFBQWEsR0FBRyxPQUF3QixDQUFDO1FBRS9DLE1BQU0sTUFBTSxHQUFHLEtBQUssSUFBSSxDQUFDLENBQUMsS0FBSyxDQUFDO1FBQ2hDLElBQUksYUFBYSxDQUFDLGtCQUFrQixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxhQUFhLElBQUksSUFBSSxFQUFFO1lBQ2xFLE1BQU0sS0FBSyxHQUFHLGFBQWEsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUNwRCxNQUFNLFNBQVMsR0FBRyxh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Q0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsS0FBSyxFQUFFLFlBQVksRUFBRSxZQUFZLEVBQUUsTUFBTSxDQUFDLENBQUM7WUFFeEUsT0FBTyxhQUFhLENBQUMsY0FBYyxDQUFDLFFBQVEsRUFBRSxNQUFNLEVBQUUsU0FBUyxDQUFDLENBQUM7U0FDbEU7UUFDRCxNQUFNLE9BQU8sR0FBRyxJQUFJLGVBQWUsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDOUQsT0FBTyxhQUFhLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDO0lBQ2pFLENBQUMsQ0FBQztBQUNKLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7YmFja2VuZF91dGlsLCBCaW5hcnlJbnB1dHMsIERhdGFUeXBlLCBLZXJuZWxGdW5jLCBUZW5zb3JJbmZvLCBUeXBlZEFycmF5LCBVbmFyeUlucHV0cywgdXBjYXN0VHlwZX0gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcblxuaW1wb3J0IHtXZWJHUFVCYWNrZW5kfSBmcm9tICcuLi9iYWNrZW5kX3dlYmdwdSc7XG5pbXBvcnQge0JpbmFyeU9wQ29tcGxleFByb2dyYW19IGZyb20gJy4uL2JpbmFyeV9vcF9jb21wbGV4X3dlYmdwdSc7XG5pbXBvcnQge0JpbmFyeU9wVHlwZX0gZnJvbSAnLi4vYmluYXJ5X29wX3V0aWwnO1xuaW1wb3J0IHtCaW5hcnlPcFByb2dyYW19IGZyb20gJy4uL2JpbmFyeV9vcF93ZWJncHUnO1xuaW1wb3J0IHtjb21wbGV4fSBmcm9tICcuLi9rZXJuZWxzL0NvbXBsZXgnO1xuaW1wb3J0IHtVbmFyeU9wVHlwZX0gZnJvbSAnLi4vdW5hcnlfb3BfdXRpbCc7XG5pbXBvcnQge1VuYXJ5T3BQcm9ncmFtfSBmcm9tICcuLi91bmFyeV9vcF93ZWJncHUnO1xuXG5pbXBvcnQge1NpbXBsZUJpbmFyeUtlcm5lbEltcGxDUFUsIFNpbXBsZVVuYXJ5S2VybmVsSW1wbENQVX0gZnJvbSAnLi9zaGFyZWQnO1xuXG50eXBlIFVuYXJ5S2VybmVsRnVuY0NvbmZpZyA9IHtcbiAgb3BUeXBlOiBVbmFyeU9wVHlwZSxcbiAgY3B1S2VybmVsSW1wbD86IFNpbXBsZVVuYXJ5S2VybmVsSW1wbENQVSxcbiAgZHR5cGU/OiBEYXRhVHlwZVxufTtcblxuLyoqXG4gKiBUZW1wbGF0ZSB0aGF0IGNyZWF0ZXMgYSBgS2VybmVsRnVuY2AgZm9yIHVuYXJ5IG9wcy5cbiAqIEBwYXJhbSBvcFR5cGUgT3AgdHlwZSB0byBjcmVhdGUgYFVuYXJ5T3BQcm9ncmFtYC5cbiAqIEBwYXJhbSBjcHVLZXJuZWxJbXBsIE9wdGlvbmFsLiBTaGFyZWQgZnVuY3Rpb25hbGl0eSBmcm9tIHRmanMtYmFja2VuZC1jcHUsIGl0XG4gKiAgICAgd2lsbCBiZSBpbnZvbHZlZCB3aGVuIG5lY2Vzc2FyeS5cbiAqIEBwYXJhbSBkdHlwZSBPcHRpb25hbC4gSWYgc2V0LCB0aGUgcmVzdWx0IGhhcyB0aGlzIGR0eXBlLiBPdGhlcndpc2UsIHRoZVxuICogICAgIHJlc3VsdCBoYXMgdGhlIHNhbWUgZHR5cGUgYXMgdGhlIGZpcnN0IGlucHV0LiBUaGlzIGlzIG1haW5seSB1c2VkIGluXG4gKiAgICAgY29tcGFyaXNvbiBrZXJuZWxzLCBzdWNoIGFzIEVxdWFsLCBMZXNzLCBHcmVhdGVyLCBldGMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1bmFyeUtlcm5lbEZ1bmMoXG4gICAge29wVHlwZSwgY3B1S2VybmVsSW1wbCwgZHR5cGV9OiBVbmFyeUtlcm5lbEZ1bmNDb25maWcpOiBLZXJuZWxGdW5jIHtcbiAgcmV0dXJuICh7aW5wdXRzLCBiYWNrZW5kfSkgPT4ge1xuICAgIGNvbnN0IHt4fSA9IGlucHV0cyBhcyBVbmFyeUlucHV0cztcbiAgICBjb25zdCB3ZWJncHVCYWNrZW5kID0gYmFja2VuZCBhcyBXZWJHUFVCYWNrZW5kO1xuXG4gICAgY29uc3QgJGR0eXBlID0gZHR5cGUgfHwgeC5kdHlwZTtcbiAgICBpZiAod2ViZ3B1QmFja2VuZC5zaG91bGRFeGVjdXRlT25DUFUoW3hdKSAmJiBjcHVLZXJuZWxJbXBsICE9IG51bGwpIHtcbiAgICAgIGNvbnN0IHhEYXRhID0gd2ViZ3B1QmFja2VuZC50ZW5zb3JNYXAuZ2V0KHguZGF0YUlkKTtcbiAgICAgIGNvbnN0IG91dFZhbHVlcyA9IGNwdUtlcm5lbEltcGwoeERhdGEudmFsdWVzIGFzIFR5cGVkQXJyYXksICRkdHlwZSk7XG4gICAgICByZXR1cm4gd2ViZ3B1QmFja2VuZC5tYWtlVGVuc29ySW5mbyh4LnNoYXBlLCAkZHR5cGUsIG91dFZhbHVlcyk7XG4gICAgfVxuXG4gICAgY29uc3QgcHJvZ3JhbTogVW5hcnlPcFByb2dyYW0gPSBuZXcgVW5hcnlPcFByb2dyYW0oeC5zaGFwZSwgb3BUeXBlKTtcbiAgICByZXR1cm4gd2ViZ3B1QmFja2VuZC5ydW5XZWJHUFVQcm9ncmFtKHByb2dyYW0sIFt4XSwgJGR0eXBlKTtcbiAgfTtcbn1cblxudHlwZSBCaW5hcnlLZXJuZWxGdW5jQ29uZmlnID0ge1xuICBvcFR5cGU6IEJpbmFyeU9wVHlwZSxcbiAgY3B1S2VybmVsSW1wbD86IFNpbXBsZUJpbmFyeUtlcm5lbEltcGxDUFUsXG4gIHN1cHBvcnRzQ29tcGxleD86IGJvb2xlYW4sXG4gIGR0eXBlPzogRGF0YVR5cGVcbn07XG5cbi8qKlxuICogVGVtcGxhdGUgdGhhdCBjcmVhdGVzIGEgYEtlcm5lbEZ1bmNgIGZvciBiaW5hcnkgb3BzLlxuICogQHBhcmFtIG9wVHlwZSBPcCB0eXBlIHRvIGNyZWF0ZSBgQmluYXJ5T3BQcm9ncmFtYC5cbiAqIEBwYXJhbSBjcHVLZXJuZWxJbXBsIE9wdGlvbmFsLiBTaGFyZWQgZnVuY3Rpb25hbGl0eSBmcm9tIHRmanMtYmFja2VuZC1jcHUsIGl0XG4gKiAgICAgd2lsbCBiZSBpbnZvbHZlZCB3aGVuIG5lY2Vzc2FyeS5cbiAqIEBwYXJhbSBkdHlwZSBPcHRpb25hbC4gSWYgc2V0LCB0aGUgcmVzdWx0IGhhcyB0aGlzIGR0eXBlLiBPdGhlcndpc2UsIHRoZVxuICogICAgIHJlc3VsdCBoYXMgdGhlIHNhbWUgZHR5cGUgYXMgdGhlIGZpcnN0IGlucHV0LiBUaGlzIGlzIG1haW5seSB1c2VkIGluXG4gKiAgICAgY29tcGFyaXNvbiBrZXJuZWxzLCBzdWNoIGFzIEVxdWFsLCBMZXNzLCBHcmVhdGVyLCBldGMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBiaW5hcnlLZXJuZWxGdW5jKFxuICAgIHtvcFR5cGUsIGNwdUtlcm5lbEltcGwsIHN1cHBvcnRzQ29tcGxleCA9IGZhbHNlLCBkdHlwZX06XG4gICAgICAgIEJpbmFyeUtlcm5lbEZ1bmNDb25maWcpOiBLZXJuZWxGdW5jIHtcbiAgcmV0dXJuICh7aW5wdXRzLCBiYWNrZW5kfSkgPT4ge1xuICAgIGNvbnN0IHthLCBifSA9IGlucHV0cyBhcyBCaW5hcnlJbnB1dHM7XG4gICAgY29uc3Qgd2ViZ3B1QmFja2VuZCA9IGJhY2tlbmQgYXMgV2ViR1BVQmFja2VuZDtcblxuICAgIGlmIChzdXBwb3J0c0NvbXBsZXggJiYgYS5kdHlwZSA9PT0gJ2NvbXBsZXg2NCcpIHtcbiAgICAgIGNvbnN0IGFEYXRhID0gd2ViZ3B1QmFja2VuZC50ZW5zb3JNYXAuZ2V0KGEuZGF0YUlkKTtcbiAgICAgIGNvbnN0IGJEYXRhID0gd2ViZ3B1QmFja2VuZC50ZW5zb3JNYXAuZ2V0KGIuZGF0YUlkKTtcbiAgICAgIGxldCByZWFsOiBUZW5zb3JJbmZvLCBpbWFnOiBUZW5zb3JJbmZvO1xuICAgICAgaWYgKG9wVHlwZSAhPT0gQmluYXJ5T3BUeXBlLk1VTCkge1xuICAgICAgICBbcmVhbCwgaW1hZ10gPSBbXG4gICAgICAgICAgW2FEYXRhLmNvbXBsZXhUZW5zb3JJbmZvcy5yZWFsLCBiRGF0YS5jb21wbGV4VGVuc29ySW5mb3MucmVhbF0sXG4gICAgICAgICAgW2FEYXRhLmNvbXBsZXhUZW5zb3JJbmZvcy5pbWFnLCBiRGF0YS5jb21wbGV4VGVuc29ySW5mb3MuaW1hZ11cbiAgICAgICAgXS5tYXAoY29tcGxleFBhcnRzID0+IHtcbiAgICAgICAgICBjb25zdCBbYVBhcnQsIGJQYXJ0XSA9IGNvbXBsZXhQYXJ0cztcblxuICAgICAgICAgIGNvbnN0IGFIYW5kbGUgPSB7XG4gICAgICAgICAgICBkYXRhSWQ6IGFQYXJ0LmRhdGFJZCxcbiAgICAgICAgICAgIGR0eXBlOiBhUGFydC5kdHlwZSxcbiAgICAgICAgICAgIHNoYXBlOiBhLnNoYXBlXG4gICAgICAgICAgfTtcbiAgICAgICAgICBjb25zdCBiSGFuZGxlID0ge1xuICAgICAgICAgICAgZGF0YUlkOiBiUGFydC5kYXRhSWQsXG4gICAgICAgICAgICBkdHlwZTogYlBhcnQuZHR5cGUsXG4gICAgICAgICAgICBzaGFwZTogYi5zaGFwZVxuICAgICAgICAgIH07XG5cbiAgICAgICAgICBjb25zdCBwcm9ncmFtID0gbmV3IEJpbmFyeU9wUHJvZ3JhbShvcFR5cGUsIGEuc2hhcGUsIGIuc2hhcGUpO1xuICAgICAgICAgIHJldHVybiB3ZWJncHVCYWNrZW5kLnJ1bldlYkdQVVByb2dyYW0oXG4gICAgICAgICAgICAgIHByb2dyYW0sIFthSGFuZGxlLCBiSGFuZGxlXSxcbiAgICAgICAgICAgICAgdXBjYXN0VHlwZShhUGFydC5kdHlwZSwgYlBhcnQuZHR5cGUpKTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCByZWFsUHJvZ3JhbSA9IG5ldyBCaW5hcnlPcENvbXBsZXhQcm9ncmFtKFxuICAgICAgICAgICAgQmluYXJ5T3BUeXBlLkNPTVBMRVhfTVVMVElQTFlfUkVBTCwgYS5zaGFwZSwgYi5zaGFwZSk7XG4gICAgICAgIGNvbnN0IGltYWdQcm9ncmFtID0gbmV3IEJpbmFyeU9wQ29tcGxleFByb2dyYW0oXG4gICAgICAgICAgICBCaW5hcnlPcFR5cGUuQ09NUExFWF9NVUxUSVBMWV9JTUFHLCBhLnNoYXBlLCBiLnNoYXBlKTtcblxuICAgICAgICBjb25zdCBpbnB1dHMgPSBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgZGF0YUlkOiBhRGF0YS5jb21wbGV4VGVuc29ySW5mb3MucmVhbC5kYXRhSWQsXG4gICAgICAgICAgICBkdHlwZTogYURhdGEuY29tcGxleFRlbnNvckluZm9zLnJlYWwuZHR5cGUsXG4gICAgICAgICAgICBzaGFwZTogYS5zaGFwZVxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgZGF0YUlkOiBhRGF0YS5jb21wbGV4VGVuc29ySW5mb3MuaW1hZy5kYXRhSWQsXG4gICAgICAgICAgICBkdHlwZTogYURhdGEuY29tcGxleFRlbnNvckluZm9zLmltYWcuZHR5cGUsXG4gICAgICAgICAgICBzaGFwZTogYS5zaGFwZVxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgZGF0YUlkOiBiRGF0YS5jb21wbGV4VGVuc29ySW5mb3MucmVhbC5kYXRhSWQsXG4gICAgICAgICAgICBkdHlwZTogYkRhdGEuY29tcGxleFRlbnNvckluZm9zLnJlYWwuZHR5cGUsXG4gICAgICAgICAgICBzaGFwZTogYi5zaGFwZVxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgZGF0YUlkOiBiRGF0YS5jb21wbGV4VGVuc29ySW5mb3MuaW1hZy5kYXRhSWQsXG4gICAgICAgICAgICBkdHlwZTogYkRhdGEuY29tcGxleFRlbnNvckluZm9zLmltYWcuZHR5cGUsXG4gICAgICAgICAgICBzaGFwZTogYi5zaGFwZVxuICAgICAgICAgIH1cbiAgICAgICAgXTtcblxuICAgICAgICByZWFsID0gd2ViZ3B1QmFja2VuZC5ydW5XZWJHUFVQcm9ncmFtKHJlYWxQcm9ncmFtLCBpbnB1dHMsICdmbG9hdDMyJyk7XG4gICAgICAgIGltYWcgPSB3ZWJncHVCYWNrZW5kLnJ1bldlYkdQVVByb2dyYW0oaW1hZ1Byb2dyYW0sIGlucHV0cywgJ2Zsb2F0MzInKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgY29tcGxleE91dHB1dCA9XG4gICAgICAgICAgY29tcGxleCh7aW5wdXRzOiB7cmVhbCwgaW1hZ30sIGJhY2tlbmQ6IHdlYmdwdUJhY2tlbmR9KTtcblxuICAgICAgd2ViZ3B1QmFja2VuZC5kaXNwb3NlRGF0YShyZWFsLmRhdGFJZCk7XG4gICAgICB3ZWJncHVCYWNrZW5kLmRpc3Bvc2VEYXRhKGltYWcuZGF0YUlkKTtcblxuICAgICAgLy8gVE9ETzogSW1wbGVtZW50IENQVSBmb3J3YXJkaW5nIGZvciBjb21wbGV4IGlucHV0cy5cblxuICAgICAgcmV0dXJuIGNvbXBsZXhPdXRwdXQ7XG4gICAgfVxuXG4gICAgY29uc3QgJGR0eXBlID0gZHR5cGUgfHwgdXBjYXN0VHlwZShhLmR0eXBlLCBiLmR0eXBlKTtcbiAgICBpZiAoKGEuZHR5cGUgPT09ICdzdHJpbmcnIHx8IGIuZHR5cGUgPT09ICdzdHJpbmcnIHx8XG4gICAgICAgICB3ZWJncHVCYWNrZW5kLnNob3VsZEV4ZWN1dGVPbkNQVShbYSwgYl0pKSAmJlxuICAgICAgICBjcHVLZXJuZWxJbXBsICE9IG51bGwpIHtcbiAgICAgIGNvbnN0IGFEYXRhID0gd2ViZ3B1QmFja2VuZC50ZW5zb3JNYXAuZ2V0KGEuZGF0YUlkKS52YWx1ZXMgYXMgVHlwZWRBcnJheTtcbiAgICAgIGNvbnN0IGJEYXRhID0gd2ViZ3B1QmFja2VuZC50ZW5zb3JNYXAuZ2V0KGIuZGF0YUlkKS52YWx1ZXMgYXMgVHlwZWRBcnJheTtcbiAgICAgIGNvbnN0IGRlY29kZWRBVmFscyA9IGEuZHR5cGUgPT09ICdzdHJpbmcnID9cbiAgICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6IG5vLWFueVxuICAgICAgICAgIGJhY2tlbmRfdXRpbC5mcm9tVWludDhUb1N0cmluZ0FycmF5KGFEYXRhIGFzIGFueSBhcyBVaW50OEFycmF5W10pIDpcbiAgICAgICAgICBhRGF0YTtcbiAgICAgIGNvbnN0IGRlY29kZWRCVmFscyA9IGEuZHR5cGUgPT09ICdzdHJpbmcnID9cbiAgICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6IG5vLWFueVxuICAgICAgICAgIGJhY2tlbmRfdXRpbC5mcm9tVWludDhUb1N0cmluZ0FycmF5KGJEYXRhIGFzIGFueSBhcyBVaW50OEFycmF5W10pIDpcbiAgICAgICAgICBiRGF0YTtcbiAgICAgIGNvbnN0IFtvdXRWYWx1ZXMsIG91dFNoYXBlXSA9XG4gICAgICAgICAgY3B1S2VybmVsSW1wbChhLnNoYXBlLCBiLnNoYXBlLCBkZWNvZGVkQVZhbHMsIGRlY29kZWRCVmFscywgJGR0eXBlKTtcblxuICAgICAgcmV0dXJuIHdlYmdwdUJhY2tlbmQubWFrZVRlbnNvckluZm8ob3V0U2hhcGUsICRkdHlwZSwgb3V0VmFsdWVzKTtcbiAgICB9XG4gICAgY29uc3QgcHJvZ3JhbSA9IG5ldyBCaW5hcnlPcFByb2dyYW0ob3BUeXBlLCBhLnNoYXBlLCBiLnNoYXBlKTtcbiAgICByZXR1cm4gd2ViZ3B1QmFja2VuZC5ydW5XZWJHUFVQcm9ncmFtKHByb2dyYW0sIFthLCBiXSwgJGR0eXBlKTtcbiAgfTtcbn1cbiJdfQ==","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n// Import shared functionality from tfjs-backend-cpu without triggering\n// side effects.\n// tslint:disable-next-line: no-imports-from-dist\nimport * as shared from '@tensorflow/tfjs-backend-cpu/dist/shared';\nconst { addImpl: addImplCPU, castImpl: castImplCPU, ceilImpl: ceilImplCPU, concatImpl: concatImplCPU, equalImpl: equalImplCPU, expImpl: expImplCPU, expm1Impl: expm1ImplCPU, floorImpl: floorImplCPU, floorDivImpl: floorDivImplCPU, gatherNdImpl: gatherNdImplCPU, gatherV2Impl: gatherV2ImplCPU, greaterEqualImpl: greaterEqualImplCPU, greaterImpl: greaterImplCPU, lessEqualImpl: lessEqualImplCPU, lessImpl: lessImplCPU, logImpl: logImplCPU, maxImpl: maxImplCPU, maximumImpl: maximumImplCPU, minimumImpl: minimumImplCPU, multiplyImpl: multiplyImplCPU, negImpl: negImplCPU, notEqualImpl: notEqualImplCPU, prodImpl: prodImplCPU, rangeImpl: rangeImplCPU, rsqrtImpl: rsqrtImplCPU, scatterImpl: scatterImplCPU, simpleAbsImpl: simpleAbsImplCPU, sliceImpl: sliceImplCPU, stridedSliceImpl: stridedSliceImplCPU, stringNGramsImpl: stringNGramsImplCPU, subImpl: subImplCPU, tileImpl: tileImplCPU, topKImpl: topKImplCPU, transposeImpl: transposeImplCPU, uniqueImpl: uniqueImplCPU, } = shared;\nexport { addImplCPU, castImplCPU, ceilImplCPU, concatImplCPU, equalImplCPU, expImplCPU, expm1ImplCPU, floorImplCPU, floorDivImplCPU, gatherNdImplCPU, gatherV2ImplCPU, greaterEqualImplCPU, greaterImplCPU, lessEqualImplCPU, lessImplCPU, logImplCPU, maxImplCPU, maximumImplCPU, minimumImplCPU, multiplyImplCPU, prodImplCPU, negImplCPU, notEqualImplCPU, scatterImplCPU, simpleAbsImplCPU, sliceImplCPU, stridedSliceImplCPU, stringNGramsImplCPU, subImplCPU, rangeImplCPU, rsqrtImplCPU, tileImplCPU, topKImplCPU, transposeImplCPU, uniqueImplCPU, };\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2hhcmVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMva2VybmVsX3V0aWxzL3NoYXJlZC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCx1RUFBdUU7QUFDdkUsZ0JBQWdCO0FBQ2hCLGlEQUFpRDtBQUNqRCxPQUFPLEtBQUssTUFBTSxNQUFNLDBDQUEwQyxDQUFDO0FBUW5FLE1BQU0sRUFDSixPQUFPLEVBQUUsVUFBVSxFQUNuQixRQUFRLEVBQUUsV0FBVyxFQUNyQixRQUFRLEVBQUUsV0FBVyxFQUNyQixVQUFVLEVBQUUsYUFBYSxFQUN6QixTQUFTLEVBQUUsWUFBWSxFQUN2QixPQUFPLEVBQUUsVUFBVSxFQUNuQixTQUFTLEVBQUUsWUFBWSxFQUN2QixTQUFTLEVBQUUsWUFBWSxFQUN2QixZQUFZLEVBQUUsZUFBZSxFQUM3QixZQUFZLEVBQUUsZUFBZSxFQUM3QixZQUFZLEVBQUUsZUFBZSxFQUM3QixnQkFBZ0IsRUFBRSxtQkFBbUIsRUFDckMsV0FBVyxFQUFFLGNBQWMsRUFDM0IsYUFBYSxFQUFFLGdCQUFnQixFQUMvQixRQUFRLEVBQUUsV0FBVyxFQUNyQixPQUFPLEVBQUUsVUFBVSxFQUNuQixPQUFPLEVBQUUsVUFBVSxFQUNuQixXQUFXLEVBQUUsY0FBYyxFQUMzQixXQUFXLEVBQUUsY0FBYyxFQUMzQixZQUFZLEVBQUUsZUFBZSxFQUM3QixPQUFPLEVBQUUsVUFBVSxFQUNuQixZQUFZLEVBQUUsZUFBZSxFQUM3QixRQUFRLEVBQUUsV0FBVyxFQUNyQixTQUFTLEVBQUUsWUFBWSxFQUN2QixTQUFTLEVBQUUsWUFBWSxFQUN2QixXQUFXLEVBQUUsY0FBYyxFQUMzQixhQUFhLEVBQUUsZ0JBQWdCLEVBQy9CLFNBQVMsRUFBRSxZQUFZLEVBQ3ZCLGdCQUFnQixFQUFFLG1CQUFtQixFQUNyQyxnQkFBZ0IsRUFBRSxtQkFBbUIsRUFDckMsT0FBTyxFQUFFLFVBQVUsRUFDbkIsUUFBUSxFQUFFLFdBQVcsRUFDckIsUUFBUSxFQUFFLFdBQVcsRUFDckIsYUFBYSxFQUFFLGdCQUFnQixFQUMvQixVQUFVLEVBQUUsYUFBYSxHQUMxQixHQUFHLE1BQU0sQ0FBQztBQUVYLE9BQU8sRUFDTCxVQUFVLEVBQ1YsV0FBVyxFQUNYLFdBQVcsRUFDWCxhQUFhLEVBQ2IsWUFBWSxFQUNaLFVBQVUsRUFDVixZQUFZLEVBQ1osWUFBWSxFQUNaLGVBQWUsRUFDZixlQUFlLEVBQ2YsZUFBZSxFQUNmLG1CQUFtQixFQUNuQixjQUFjLEVBQ2QsZ0JBQWdCLEVBQ2hCLFdBQVcsRUFDWCxVQUFVLEVBQ1YsVUFBVSxFQUNWLGNBQWMsRUFDZCxjQUFjLEVBQ2QsZUFBZSxFQUNmLFdBQVcsRUFDWCxVQUFVLEVBQ1YsZUFBZSxFQUNmLGNBQWMsRUFDZCxnQkFBZ0IsRUFDaEIsWUFBWSxFQUNaLG1CQUFtQixFQUNuQixtQkFBbUIsRUFDbkIsVUFBVSxFQUNWLFlBQVksRUFDWixZQUFZLEVBQ1osV0FBVyxFQUNYLFdBQVcsRUFDWCxnQkFBZ0IsRUFDaEIsYUFBYSxHQUNkLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbi8vIEltcG9ydCBzaGFyZWQgZnVuY3Rpb25hbGl0eSBmcm9tIHRmanMtYmFja2VuZC1jcHUgd2l0aG91dCB0cmlnZ2VyaW5nXG4vLyBzaWRlIGVmZmVjdHMuXG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6IG5vLWltcG9ydHMtZnJvbS1kaXN0XG5pbXBvcnQgKiBhcyBzaGFyZWQgZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1iYWNrZW5kLWNwdS9kaXN0L3NoYXJlZCc7XG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6IG5vLWltcG9ydHMtZnJvbS1kaXN0XG5pbXBvcnQge1NpbXBsZUJpbmFyeUtlcm5lbEltcGx9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtYmFja2VuZC1jcHUvZGlzdC9zaGFyZWQnO1xuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOiBuby1pbXBvcnRzLWZyb20tZGlzdFxuaW1wb3J0IHtTaW1wbGVVbmFyeUltcGx9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtYmFja2VuZC1jcHUvZGlzdC91dGlscy91bmFyeV90eXBlcyc7XG5cbmV4cG9ydCB0eXBlIFNpbXBsZUJpbmFyeUtlcm5lbEltcGxDUFUgPSBTaW1wbGVCaW5hcnlLZXJuZWxJbXBsO1xuZXhwb3J0IHR5cGUgU2ltcGxlVW5hcnlLZXJuZWxJbXBsQ1BVID0gU2ltcGxlVW5hcnlJbXBsO1xuY29uc3Qge1xuICBhZGRJbXBsOiBhZGRJbXBsQ1BVLFxuICBjYXN0SW1wbDogY2FzdEltcGxDUFUsXG4gIGNlaWxJbXBsOiBjZWlsSW1wbENQVSxcbiAgY29uY2F0SW1wbDogY29uY2F0SW1wbENQVSxcbiAgZXF1YWxJbXBsOiBlcXVhbEltcGxDUFUsXG4gIGV4cEltcGw6IGV4cEltcGxDUFUsXG4gIGV4cG0xSW1wbDogZXhwbTFJbXBsQ1BVLFxuICBmbG9vckltcGw6IGZsb29ySW1wbENQVSxcbiAgZmxvb3JEaXZJbXBsOiBmbG9vckRpdkltcGxDUFUsXG4gIGdhdGhlck5kSW1wbDogZ2F0aGVyTmRJbXBsQ1BVLFxuICBnYXRoZXJWMkltcGw6IGdhdGhlclYySW1wbENQVSxcbiAgZ3JlYXRlckVxdWFsSW1wbDogZ3JlYXRlckVxdWFsSW1wbENQVSxcbiAgZ3JlYXRlckltcGw6IGdyZWF0ZXJJbXBsQ1BVLFxuICBsZXNzRXF1YWxJbXBsOiBsZXNzRXF1YWxJbXBsQ1BVLFxuICBsZXNzSW1wbDogbGVzc0ltcGxDUFUsXG4gIGxvZ0ltcGw6IGxvZ0ltcGxDUFUsXG4gIG1heEltcGw6IG1heEltcGxDUFUsXG4gIG1heGltdW1JbXBsOiBtYXhpbXVtSW1wbENQVSxcbiAgbWluaW11bUltcGw6IG1pbmltdW1JbXBsQ1BVLFxuICBtdWx0aXBseUltcGw6IG11bHRpcGx5SW1wbENQVSxcbiAgbmVnSW1wbDogbmVnSW1wbENQVSxcbiAgbm90RXF1YWxJbXBsOiBub3RFcXVhbEltcGxDUFUsXG4gIHByb2RJbXBsOiBwcm9kSW1wbENQVSxcbiAgcmFuZ2VJbXBsOiByYW5nZUltcGxDUFUsXG4gIHJzcXJ0SW1wbDogcnNxcnRJbXBsQ1BVLFxuICBzY2F0dGVySW1wbDogc2NhdHRlckltcGxDUFUsXG4gIHNpbXBsZUFic0ltcGw6IHNpbXBsZUFic0ltcGxDUFUsXG4gIHNsaWNlSW1wbDogc2xpY2VJbXBsQ1BVLFxuICBzdHJpZGVkU2xpY2VJbXBsOiBzdHJpZGVkU2xpY2VJbXBsQ1BVLFxuICBzdHJpbmdOR3JhbXNJbXBsOiBzdHJpbmdOR3JhbXNJbXBsQ1BVLFxuICBzdWJJbXBsOiBzdWJJbXBsQ1BVLFxuICB0aWxlSW1wbDogdGlsZUltcGxDUFUsXG4gIHRvcEtJbXBsOiB0b3BLSW1wbENQVSxcbiAgdHJhbnNwb3NlSW1wbDogdHJhbnNwb3NlSW1wbENQVSxcbiAgdW5pcXVlSW1wbDogdW5pcXVlSW1wbENQVSxcbn0gPSBzaGFyZWQ7XG5cbmV4cG9ydCB7XG4gIGFkZEltcGxDUFUsXG4gIGNhc3RJbXBsQ1BVLFxuICBjZWlsSW1wbENQVSxcbiAgY29uY2F0SW1wbENQVSxcbiAgZXF1YWxJbXBsQ1BVLFxuICBleHBJbXBsQ1BVLFxuICBleHBtMUltcGxDUFUsXG4gIGZsb29ySW1wbENQVSxcbiAgZmxvb3JEaXZJbXBsQ1BVLFxuICBnYXRoZXJOZEltcGxDUFUsXG4gIGdhdGhlclYySW1wbENQVSxcbiAgZ3JlYXRlckVxdWFsSW1wbENQVSxcbiAgZ3JlYXRlckltcGxDUFUsXG4gIGxlc3NFcXVhbEltcGxDUFUsXG4gIGxlc3NJbXBsQ1BVLFxuICBsb2dJbXBsQ1BVLFxuICBtYXhJbXBsQ1BVLFxuICBtYXhpbXVtSW1wbENQVSxcbiAgbWluaW11bUltcGxDUFUsXG4gIG11bHRpcGx5SW1wbENQVSxcbiAgcHJvZEltcGxDUFUsXG4gIG5lZ0ltcGxDUFUsXG4gIG5vdEVxdWFsSW1wbENQVSxcbiAgc2NhdHRlckltcGxDUFUsXG4gIHNpbXBsZUFic0ltcGxDUFUsXG4gIHNsaWNlSW1wbENQVSxcbiAgc3RyaWRlZFNsaWNlSW1wbENQVSxcbiAgc3RyaW5nTkdyYW1zSW1wbENQVSxcbiAgc3ViSW1wbENQVSxcbiAgcmFuZ2VJbXBsQ1BVLFxuICByc3FydEltcGxDUFUsXG4gIHRpbGVJbXBsQ1BVLFxuICB0b3BLSW1wbENQVSxcbiAgdHJhbnNwb3NlSW1wbENQVSxcbiAgdW5pcXVlSW1wbENQVSxcbn07XG4iXX0=","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Abs } from '@tensorflow/tfjs-core';\nimport { unaryKernelFunc } from '../kernel_utils/kernel_funcs_utils';\nimport { simpleAbsImplCPU } from '../kernel_utils/shared';\nimport { UnaryOpType } from '../unary_op_util';\nexport const abs = unaryKernelFunc({ opType: UnaryOpType.ABS, cpuKernelImpl: simpleAbsImplCPU });\nexport const absConfig = {\n    kernelName: Abs,\n    backendName: 'webgpu',\n    kernelFunc: abs\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQWJzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMva2VybmVscy9BYnMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUFDLEdBQUcsRUFBZSxNQUFNLHVCQUF1QixDQUFDO0FBQ3hELE9BQU8sRUFBQyxlQUFlLEVBQUMsTUFBTSxvQ0FBb0MsQ0FBQztBQUNuRSxPQUFPLEVBQUMsZ0JBQWdCLEVBQUMsTUFBTSx3QkFBd0IsQ0FBQztBQUN4RCxPQUFPLEVBQUMsV0FBVyxFQUFDLE1BQU0sa0JBQWtCLENBQUM7QUFFN0MsTUFBTSxDQUFDLE1BQU0sR0FBRyxHQUNaLGVBQWUsQ0FBQyxFQUFDLE1BQU0sRUFBRSxXQUFXLENBQUMsR0FBRyxFQUFFLGFBQWEsRUFBRSxnQkFBZ0IsRUFBQyxDQUFDLENBQUM7QUFFaEYsTUFBTSxDQUFDLE1BQU0sU0FBUyxHQUFpQjtJQUNyQyxVQUFVLEVBQUUsR0FBRztJQUNmLFdBQVcsRUFBRSxRQUFRO0lBQ3JCLFVBQVUsRUFBRSxHQUFHO0NBQ2hCLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7QWJzLCBLZXJuZWxDb25maWd9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5pbXBvcnQge3VuYXJ5S2VybmVsRnVuY30gZnJvbSAnLi4va2VybmVsX3V0aWxzL2tlcm5lbF9mdW5jc191dGlscyc7XG5pbXBvcnQge3NpbXBsZUFic0ltcGxDUFV9IGZyb20gJy4uL2tlcm5lbF91dGlscy9zaGFyZWQnO1xuaW1wb3J0IHtVbmFyeU9wVHlwZX0gZnJvbSAnLi4vdW5hcnlfb3BfdXRpbCc7XG5cbmV4cG9ydCBjb25zdCBhYnMgPVxuICAgIHVuYXJ5S2VybmVsRnVuYyh7b3BUeXBlOiBVbmFyeU9wVHlwZS5BQlMsIGNwdUtlcm5lbEltcGw6IHNpbXBsZUFic0ltcGxDUFV9KTtcblxuZXhwb3J0IGNvbnN0IGFic0NvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBBYnMsXG4gIGJhY2tlbmROYW1lOiAnd2ViZ3B1JyxcbiAga2VybmVsRnVuYzogYWJzXG59O1xuIl19","/**\n * @license\n * Copyright 2022 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Acos } from '@tensorflow/tfjs-core';\nimport { unaryKernelFunc } from '../kernel_utils/kernel_funcs_utils';\nimport { UnaryOpType } from '../unary_op_util';\nexport const acos = unaryKernelFunc({ opType: UnaryOpType.ACOS });\nexport const acosConfig = {\n    kernelName: Acos,\n    backendName: 'webgpu',\n    kernelFunc: acos\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQWNvcy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2tlcm5lbHMvQWNvcy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQUMsSUFBSSxFQUFlLE1BQU0sdUJBQXVCLENBQUM7QUFFekQsT0FBTyxFQUFDLGVBQWUsRUFBQyxNQUFNLG9DQUFvQyxDQUFDO0FBRW5FLE9BQU8sRUFBQyxXQUFXLEVBQUMsTUFBTSxrQkFBa0IsQ0FBQztBQUU3QyxNQUFNLENBQUMsTUFBTSxJQUFJLEdBQUcsZUFBZSxDQUFDLEVBQUMsTUFBTSxFQUFFLFdBQVcsQ0FBQyxJQUFJLEVBQUMsQ0FBQyxDQUFDO0FBRWhFLE1BQU0sQ0FBQyxNQUFNLFVBQVUsR0FBaUI7SUFDdEMsVUFBVSxFQUFFLElBQUk7SUFDaEIsV0FBVyxFQUFFLFFBQVE7SUFDckIsVUFBVSxFQUFFLElBQUk7Q0FDakIsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTEMuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtBY29zLCBLZXJuZWxDb25maWd9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7dW5hcnlLZXJuZWxGdW5jfSBmcm9tICcuLi9rZXJuZWxfdXRpbHMva2VybmVsX2Z1bmNzX3V0aWxzJztcblxuaW1wb3J0IHtVbmFyeU9wVHlwZX0gZnJvbSAnLi4vdW5hcnlfb3BfdXRpbCc7XG5cbmV4cG9ydCBjb25zdCBhY29zID0gdW5hcnlLZXJuZWxGdW5jKHtvcFR5cGU6IFVuYXJ5T3BUeXBlLkFDT1N9KTtcblxuZXhwb3J0IGNvbnN0IGFjb3NDb25maWc6IEtlcm5lbENvbmZpZyA9IHtcbiAga2VybmVsTmFtZTogQWNvcyxcbiAgYmFja2VuZE5hbWU6ICd3ZWJncHUnLFxuICBrZXJuZWxGdW5jOiBhY29zXG59O1xuIl19","/**\n * @license\n * Copyright 2022 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Acosh } from '@tensorflow/tfjs-core';\nimport { unaryKernelFunc } from '../kernel_utils/kernel_funcs_utils';\nimport { UnaryOpType } from '../unary_op_util';\nexport const acosh = unaryKernelFunc({ opType: UnaryOpType.ACOSH });\nexport const acoshConfig = {\n    kernelName: Acosh,\n    backendName: 'webgpu',\n    kernelFunc: acosh\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQWNvc2guanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9rZXJuZWxzL0Fjb3NoLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sRUFBQyxLQUFLLEVBQWUsTUFBTSx1QkFBdUIsQ0FBQztBQUUxRCxPQUFPLEVBQUMsZUFBZSxFQUFDLE1BQU0sb0NBQW9DLENBQUM7QUFFbkUsT0FBTyxFQUFDLFdBQVcsRUFBQyxNQUFNLGtCQUFrQixDQUFDO0FBRTdDLE1BQU0sQ0FBQyxNQUFNLEtBQUssR0FBRyxlQUFlLENBQUMsRUFBQyxNQUFNLEVBQUUsV0FBVyxDQUFDLEtBQUssRUFBQyxDQUFDLENBQUM7QUFFbEUsTUFBTSxDQUFDLE1BQU0sV0FBVyxHQUFpQjtJQUN2QyxVQUFVLEVBQUUsS0FBSztJQUNqQixXQUFXLEVBQUUsUUFBUTtJQUNyQixVQUFVLEVBQUUsS0FBSztDQUNsQixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQy5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge0Fjb3NoLCBLZXJuZWxDb25maWd9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7dW5hcnlLZXJuZWxGdW5jfSBmcm9tICcuLi9rZXJuZWxfdXRpbHMva2VybmVsX2Z1bmNzX3V0aWxzJztcblxuaW1wb3J0IHtVbmFyeU9wVHlwZX0gZnJvbSAnLi4vdW5hcnlfb3BfdXRpbCc7XG5cbmV4cG9ydCBjb25zdCBhY29zaCA9IHVuYXJ5S2VybmVsRnVuYyh7b3BUeXBlOiBVbmFyeU9wVHlwZS5BQ09TSH0pO1xuXG5leHBvcnQgY29uc3QgYWNvc2hDb25maWc6IEtlcm5lbENvbmZpZyA9IHtcbiAga2VybmVsTmFtZTogQWNvc2gsXG4gIGJhY2tlbmROYW1lOiAnd2ViZ3B1JyxcbiAga2VybmVsRnVuYzogYWNvc2hcbn07XG4iXX0=","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Add } from '@tensorflow/tfjs-core';\nimport { BinaryOpType } from '../binary_op_util';\nimport { binaryKernelFunc } from '../kernel_utils/kernel_funcs_utils';\nimport { addImplCPU as cpuAdd } from '../kernel_utils/shared';\nexport const addKernelFunc = binaryKernelFunc({ opType: BinaryOpType.ADD, cpuKernelImpl: cpuAdd, supportsComplex: true });\nexport const addConfig = {\n    kernelName: Add,\n    backendName: 'webgpu',\n    kernelFunc: addKernelFunc\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQWRkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMva2VybmVscy9BZGQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUFDLEdBQUcsRUFBZSxNQUFNLHVCQUF1QixDQUFDO0FBRXhELE9BQU8sRUFBQyxZQUFZLEVBQUMsTUFBTSxtQkFBbUIsQ0FBQztBQUMvQyxPQUFPLEVBQUMsZ0JBQWdCLEVBQUMsTUFBTSxvQ0FBb0MsQ0FBQztBQUNwRSxPQUFPLEVBQUMsVUFBVSxJQUFJLE1BQU0sRUFBQyxNQUFNLHdCQUF3QixDQUFDO0FBRTVELE1BQU0sQ0FBQyxNQUFNLGFBQWEsR0FBRyxnQkFBZ0IsQ0FDekMsRUFBQyxNQUFNLEVBQUUsWUFBWSxDQUFDLEdBQUcsRUFBRSxhQUFhLEVBQUUsTUFBTSxFQUFFLGVBQWUsRUFBRSxJQUFJLEVBQUMsQ0FBQyxDQUFDO0FBRTlFLE1BQU0sQ0FBQyxNQUFNLFNBQVMsR0FBaUI7SUFDckMsVUFBVSxFQUFFLEdBQUc7SUFDZixXQUFXLEVBQUUsUUFBUTtJQUNyQixVQUFVLEVBQUUsYUFBYTtDQUMxQixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge0FkZCwgS2VybmVsQ29uZmlnfSBmcm9tICdAdGVuc29yZmxvdy90ZmpzLWNvcmUnO1xuXG5pbXBvcnQge0JpbmFyeU9wVHlwZX0gZnJvbSAnLi4vYmluYXJ5X29wX3V0aWwnO1xuaW1wb3J0IHtiaW5hcnlLZXJuZWxGdW5jfSBmcm9tICcuLi9rZXJuZWxfdXRpbHMva2VybmVsX2Z1bmNzX3V0aWxzJztcbmltcG9ydCB7YWRkSW1wbENQVSBhcyBjcHVBZGR9IGZyb20gJy4uL2tlcm5lbF91dGlscy9zaGFyZWQnO1xuXG5leHBvcnQgY29uc3QgYWRkS2VybmVsRnVuYyA9IGJpbmFyeUtlcm5lbEZ1bmMoXG4gICAge29wVHlwZTogQmluYXJ5T3BUeXBlLkFERCwgY3B1S2VybmVsSW1wbDogY3B1QWRkLCBzdXBwb3J0c0NvbXBsZXg6IHRydWV9KTtcblxuZXhwb3J0IGNvbnN0IGFkZENvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBBZGQsXG4gIGJhY2tlbmROYW1lOiAnd2ViZ3B1JyxcbiAga2VybmVsRnVuYzogYWRkS2VybmVsRnVuY1xufTtcbiJdfQ==","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { getMainHeaderString as main } from './webgpu_program';\nimport { computeDispatch, flatDispatchLayout } from './webgpu_util';\nexport class AddNPackedProgram {\n    constructor(shapes) {\n        this.workPerThread = 1;\n        this.workgroupSize = [64, 1, 1];\n        this.size = true;\n        this.outputShape = shapes[0];\n        this.variableNames = shapes.map((_, i) => `T${i}`);\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize, [this.workPerThread, 1, 1]);\n        this.shaderKey = 'addN';\n    }\n    getUserCode() {\n        const snippets = [];\n        // Get target elements from every input tensor.\n        this.variableNames.forEach(variable => {\n            snippets.push(`let v${variable} = get${variable}ByOutputCoords(coords);`);\n        });\n        // Calculate the sum of all elements.\n        const operation = this.variableNames\n            .map(variable => {\n            return `v${variable}`;\n        })\n            .join(' + ');\n        const userCode = `\n      ${main('index')} {\n        for (var i = 0; i < ${this.workPerThread}; i = i + 1) {\n          let flatIndex = index * ${this.workPerThread} + i;\n          if (flatIndex < uniforms.size) {\n            let coords = getCoordsFromIndex(flatIndex);\n            ${snippets.join('\\n        ')}\n            setOutputAtIndex(flatIndex, ${operation});\n          }\n        }\n      }\n    `;\n        return userCode;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWRkbl9wYWNrZWRfd2ViZ3B1LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMvYWRkbl9wYWNrZWRfd2ViZ3B1LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sRUFBQyxtQkFBbUIsSUFBSSxJQUFJLEVBQWdCLE1BQU0sa0JBQWtCLENBQUM7QUFDNUUsT0FBTyxFQUFDLGVBQWUsRUFBRSxrQkFBa0IsRUFBQyxNQUFNLGVBQWUsQ0FBQztBQUVsRSxNQUFNLE9BQU8saUJBQWlCO0lBVTVCLFlBQVksTUFBa0I7UUFKOUIsa0JBQWEsR0FBRyxDQUFDLENBQUM7UUFDbEIsa0JBQWEsR0FBNkIsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ3JELFNBQUksR0FBRyxJQUFJLENBQUM7UUFHVixJQUFJLENBQUMsV0FBVyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUM3QixJQUFJLENBQUMsYUFBYSxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDbkQsSUFBSSxDQUFDLGNBQWMsR0FBRyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDM0QsSUFBSSxDQUFDLFFBQVEsR0FBRyxlQUFlLENBQzNCLElBQUksQ0FBQyxjQUFjLEVBQUUsSUFBSSxDQUFDLFdBQVcsRUFBRSxJQUFJLENBQUMsYUFBYSxFQUN6RCxDQUFDLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDaEMsSUFBSSxDQUFDLFNBQVMsR0FBRyxNQUFNLENBQUM7SUFDMUIsQ0FBQztJQUVELFdBQVc7UUFDVCxNQUFNLFFBQVEsR0FBYSxFQUFFLENBQUM7UUFDOUIsK0NBQStDO1FBQy9DLElBQUksQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxFQUFFO1lBQ3BDLFFBQVEsQ0FBQyxJQUFJLENBQUMsUUFBUSxRQUFRLFNBQVMsUUFBUSx5QkFBeUIsQ0FBQyxDQUFDO1FBQzVFLENBQUMsQ0FBQyxDQUFDO1FBQ0gscUNBQXFDO1FBQ3JDLE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxhQUFhO2FBQ2IsR0FBRyxDQUFDLFFBQVEsQ0FBQyxFQUFFO1lBQ2QsT0FBTyxJQUFJLFFBQVEsRUFBRSxDQUFDO1FBQ3hCLENBQUMsQ0FBQzthQUNELElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUVuQyxNQUFNLFFBQVEsR0FBRztRQUNiLElBQUksQ0FBQyxPQUFPLENBQUM7OEJBQ1MsSUFBSSxDQUFDLGFBQWE7b0NBQ1osSUFBSSxDQUFDLGFBQWE7OztjQUd4QyxRQUFRLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQzswQ0FDQyxTQUFTOzs7O0tBSTlDLENBQUM7UUFDRixPQUFPLFFBQVEsQ0FBQztJQUNsQixDQUFDO0NBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7Z2V0TWFpbkhlYWRlclN0cmluZyBhcyBtYWluLCBXZWJHUFVQcm9ncmFtfSBmcm9tICcuL3dlYmdwdV9wcm9ncmFtJztcbmltcG9ydCB7Y29tcHV0ZURpc3BhdGNoLCBmbGF0RGlzcGF0Y2hMYXlvdXR9IGZyb20gJy4vd2ViZ3B1X3V0aWwnO1xuXG5leHBvcnQgY2xhc3MgQWRkTlBhY2tlZFByb2dyYW0gaW1wbGVtZW50cyBXZWJHUFVQcm9ncmFtIHtcbiAgb3V0cHV0U2hhcGU6IG51bWJlcltdO1xuICBzaGFkZXJLZXk6IHN0cmluZztcbiAgZGlzcGF0Y2hMYXlvdXQ6IHt4OiBudW1iZXJbXX07XG4gIGRpc3BhdGNoOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl07XG4gIHZhcmlhYmxlTmFtZXM6IHN0cmluZ1tdO1xuICB3b3JrUGVyVGhyZWFkID0gMTtcbiAgd29ya2dyb3VwU2l6ZTogW251bWJlciwgbnVtYmVyLCBudW1iZXJdID0gWzY0LCAxLCAxXTtcbiAgc2l6ZSA9IHRydWU7XG5cbiAgY29uc3RydWN0b3Ioc2hhcGVzOiBudW1iZXJbXVtdKSB7XG4gICAgdGhpcy5vdXRwdXRTaGFwZSA9IHNoYXBlc1swXTtcbiAgICB0aGlzLnZhcmlhYmxlTmFtZXMgPSBzaGFwZXMubWFwKChfLCBpKSA9PiBgVCR7aX1gKTtcbiAgICB0aGlzLmRpc3BhdGNoTGF5b3V0ID0gZmxhdERpc3BhdGNoTGF5b3V0KHRoaXMub3V0cHV0U2hhcGUpO1xuICAgIHRoaXMuZGlzcGF0Y2ggPSBjb21wdXRlRGlzcGF0Y2goXG4gICAgICAgIHRoaXMuZGlzcGF0Y2hMYXlvdXQsIHRoaXMub3V0cHV0U2hhcGUsIHRoaXMud29ya2dyb3VwU2l6ZSxcbiAgICAgICAgW3RoaXMud29ya1BlclRocmVhZCwgMSwgMV0pO1xuICAgIHRoaXMuc2hhZGVyS2V5ID0gJ2FkZE4nO1xuICB9XG5cbiAgZ2V0VXNlckNvZGUoKTogc3RyaW5nIHtcbiAgICBjb25zdCBzbmlwcGV0czogc3RyaW5nW10gPSBbXTtcbiAgICAvLyBHZXQgdGFyZ2V0IGVsZW1lbnRzIGZyb20gZXZlcnkgaW5wdXQgdGVuc29yLlxuICAgIHRoaXMudmFyaWFibGVOYW1lcy5mb3JFYWNoKHZhcmlhYmxlID0+IHtcbiAgICAgIHNuaXBwZXRzLnB1c2goYGxldCB2JHt2YXJpYWJsZX0gPSBnZXQke3ZhcmlhYmxlfUJ5T3V0cHV0Q29vcmRzKGNvb3Jkcyk7YCk7XG4gICAgfSk7XG4gICAgLy8gQ2FsY3VsYXRlIHRoZSBzdW0gb2YgYWxsIGVsZW1lbnRzLlxuICAgIGNvbnN0IG9wZXJhdGlvbiA9IHRoaXMudmFyaWFibGVOYW1lc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKHZhcmlhYmxlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYHYke3ZhcmlhYmxlfWA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC5qb2luKCcgKyAnKTtcblxuICAgIGNvbnN0IHVzZXJDb2RlID0gYFxuICAgICAgJHttYWluKCdpbmRleCcpfSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJHt0aGlzLndvcmtQZXJUaHJlYWR9OyBpID0gaSArIDEpIHtcbiAgICAgICAgICBsZXQgZmxhdEluZGV4ID0gaW5kZXggKiAke3RoaXMud29ya1BlclRocmVhZH0gKyBpO1xuICAgICAgICAgIGlmIChmbGF0SW5kZXggPCB1bmlmb3Jtcy5zaXplKSB7XG4gICAgICAgICAgICBsZXQgY29vcmRzID0gZ2V0Q29vcmRzRnJvbUluZGV4KGZsYXRJbmRleCk7XG4gICAgICAgICAgICAke3NuaXBwZXRzLmpvaW4oJ1xcbiAgICAgICAgJyl9XG4gICAgICAgICAgICBzZXRPdXRwdXRBdEluZGV4KGZsYXRJbmRleCwgJHtvcGVyYXRpb259KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICBgO1xuICAgIHJldHVybiB1c2VyQ29kZTtcbiAgfVxufVxuIl19","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { AddN, upcastType } from '@tensorflow/tfjs-core';\nimport { AddNPackedProgram } from '../addn_packed_webgpu';\nimport { identity } from './Identity';\nexport function addN(args) {\n    const { inputs, backend } = args;\n    const tensors = inputs;\n    if (tensors.length === 1) {\n        return identity({ inputs: { x: tensors[0] }, backend });\n    }\n    const dtype = tensors.map(t => t.dtype).reduce((d1, d2) => upcastType(d1, d2));\n    const shapes = tensors.map(t => t.shape);\n    const program = new AddNPackedProgram(shapes);\n    return backend.runWebGPUProgram(program, tensors, dtype);\n}\nexport const addNConfig = {\n    kernelName: AddN,\n    backendName: 'webgpu',\n    kernelFunc: addN\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQWRkTi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2tlcm5lbHMvQWRkTi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQUMsSUFBSSxFQUFvRCxVQUFVLEVBQUMsTUFBTSx1QkFBdUIsQ0FBQztBQUl6RyxPQUFPLEVBQUMsaUJBQWlCLEVBQUMsTUFBTSx1QkFBdUIsQ0FBQztBQUN4RCxPQUFPLEVBQUMsUUFBUSxFQUFDLE1BQU0sWUFBWSxDQUFDO0FBRXBDLE1BQU0sVUFBVSxJQUFJLENBQUMsSUFBa0Q7SUFFckUsTUFBTSxFQUFDLE1BQU0sRUFBRSxPQUFPLEVBQUMsR0FBRyxJQUFJLENBQUM7SUFFL0IsTUFBTSxPQUFPLEdBQUcsTUFBTSxDQUFDO0lBQ3ZCLElBQUksT0FBTyxDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUU7UUFDeEIsT0FBTyxRQUFRLENBQUMsRUFBQyxNQUFNLEVBQUUsRUFBQyxDQUFDLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFDLEVBQUUsT0FBTyxFQUFDLENBQUMsQ0FBQztLQUNyRDtJQUVELE1BQU0sS0FBSyxHQUNQLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsVUFBVSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQ3JFLE1BQU0sTUFBTSxHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDekMsTUFBTSxPQUFPLEdBQUcsSUFBSSxpQkFBaUIsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUM5QyxPQUFPLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsT0FBTyxFQUFFLEtBQUssQ0FBQyxDQUFDO0FBQzNELENBQUM7QUFFRCxNQUFNLENBQUMsTUFBTSxVQUFVLEdBQWlCO0lBQ3RDLFVBQVUsRUFBRSxJQUFJO0lBQ2hCLFdBQVcsRUFBRSxRQUFRO0lBQ3JCLFVBQVUsRUFBRSxJQUE2QjtDQUMxQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge0FkZE4sIEFkZE5JbnB1dHMsIEtlcm5lbENvbmZpZywgS2VybmVsRnVuYywgVGVuc29ySW5mbywgdXBjYXN0VHlwZX0gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcblxuaW1wb3J0IHtXZWJHUFVCYWNrZW5kfSBmcm9tICcuLi9iYWNrZW5kX3dlYmdwdSc7XG5cbmltcG9ydCB7QWRkTlBhY2tlZFByb2dyYW19IGZyb20gJy4uL2FkZG5fcGFja2VkX3dlYmdwdSc7XG5pbXBvcnQge2lkZW50aXR5fSBmcm9tICcuL0lkZW50aXR5JztcblxuZXhwb3J0IGZ1bmN0aW9uIGFkZE4oYXJnczoge2lucHV0czogQWRkTklucHV0cywgYmFja2VuZDogV2ViR1BVQmFja2VuZH0pOlxuICAgIFRlbnNvckluZm8ge1xuICBjb25zdCB7aW5wdXRzLCBiYWNrZW5kfSA9IGFyZ3M7XG5cbiAgY29uc3QgdGVuc29ycyA9IGlucHV0cztcbiAgaWYgKHRlbnNvcnMubGVuZ3RoID09PSAxKSB7XG4gICAgcmV0dXJuIGlkZW50aXR5KHtpbnB1dHM6IHt4OiB0ZW5zb3JzWzBdfSwgYmFja2VuZH0pO1xuICB9XG5cbiAgY29uc3QgZHR5cGUgPVxuICAgICAgdGVuc29ycy5tYXAodCA9PiB0LmR0eXBlKS5yZWR1Y2UoKGQxLCBkMikgPT4gdXBjYXN0VHlwZShkMSwgZDIpKTtcbiAgY29uc3Qgc2hhcGVzID0gdGVuc29ycy5tYXAodCA9PiB0LnNoYXBlKTtcbiAgY29uc3QgcHJvZ3JhbSA9IG5ldyBBZGROUGFja2VkUHJvZ3JhbShzaGFwZXMpO1xuICByZXR1cm4gYmFja2VuZC5ydW5XZWJHUFVQcm9ncmFtKHByb2dyYW0sIHRlbnNvcnMsIGR0eXBlKTtcbn1cblxuZXhwb3J0IGNvbnN0IGFkZE5Db25maWc6IEtlcm5lbENvbmZpZyA9IHtcbiAga2VybmVsTmFtZTogQWRkTixcbiAgYmFja2VuZE5hbWU6ICd3ZWJncHUnLFxuICBrZXJuZWxGdW5jOiBhZGROIGFzIHVua25vd24gYXMgS2VybmVsRnVuY1xufTtcbiJdfQ==","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { util } from '@tensorflow/tfjs-core';\nimport { getMainHeaderString as main } from './webgpu_program';\nimport { computeDispatch } from './webgpu_util';\nexport class TransposeSharedProgram {\n    constructor(aShape, newDim) {\n        this.variableNames = ['A'];\n        // Note that the maximum number of workgroup invocations by webgpu is 256.\n        this.workgroupSize = [16, 16, 1];\n        const outputShape = new Array(aShape.length);\n        for (let i = 0; i < outputShape.length; i++) {\n            outputShape[i] = aShape[newDim[i]];\n        }\n        this.outputShape = outputShape;\n        this.dispatchLayout = { x: [0], y: [1] };\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize, [1, 1, 1]);\n        this.shaderKey = 'transposeShared';\n    }\n    getUserCode() {\n        util.assert(this.workgroupSize[0] === this.workgroupSize[1], () => `Must be a square tile, current tile shape is ${this.workgroupSize[0]} x ${this.workgroupSize[1]}`);\n        const tileSize = this.workgroupSize[0];\n        const userCode = `\n      var<workgroup> tile : array<array<f32, ${this.workgroupSize[0] + 1}>, ${this.workgroupSize[0]}>;\n      ${main()} {\n        var x = i32(workgroupId.x) * ${tileSize} + i32(localId.x);\n        var y = i32(workgroupId.y) * ${tileSize} + i32(localId.y);\n        let width = uniforms.outShape[0];\n        let height = uniforms.outShape[1];\n        if (x < width && y < height) {\n          tile[localId.y][localId.x] = f32(A[y * width + x]);\n        }\n        workgroupBarrier();\n\n        x = i32(workgroupId.y) * ${tileSize} + i32(localId.x);\n        y = i32(workgroupId.x) * ${tileSize} + i32(localId.y);\n        if (x < height && y < width) {\n          setOutputAtIndex((y * height + x), tile[localId.x]\n            [localId.y]);\n        }\n      }\n    `;\n        return userCode;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHJhbnNwb3NlX3NoYXJlZF93ZWJncHUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy90cmFuc3Bvc2Vfc2hhcmVkX3dlYmdwdS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQUMsSUFBSSxFQUFDLE1BQU0sdUJBQXVCLENBQUM7QUFDM0MsT0FBTyxFQUFDLG1CQUFtQixJQUFJLElBQUksRUFBZ0IsTUFBTSxrQkFBa0IsQ0FBQztBQUM1RSxPQUFPLEVBQUMsZUFBZSxFQUFDLE1BQU0sZUFBZSxDQUFDO0FBRTlDLE1BQU0sT0FBTyxzQkFBc0I7SUFTakMsWUFBWSxNQUFnQixFQUFFLE1BQWdCO1FBUjlDLGtCQUFhLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUt0QiwwRUFBMEU7UUFDMUUsa0JBQWEsR0FBNkIsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBR3BELE1BQU0sV0FBVyxHQUFhLElBQUksS0FBSyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUN2RCxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsV0FBVyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUMzQyxXQUFXLENBQUMsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ3BDO1FBQ0QsSUFBSSxDQUFDLFdBQVcsR0FBRyxXQUFXLENBQUM7UUFDL0IsSUFBSSxDQUFDLGNBQWMsR0FBRyxFQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFDLENBQUM7UUFDdkMsSUFBSSxDQUFDLFFBQVEsR0FBRyxlQUFlLENBQzNCLElBQUksQ0FBQyxjQUFjLEVBQUUsSUFBSSxDQUFDLFdBQVcsRUFBRSxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRTFFLElBQUksQ0FBQyxTQUFTLEdBQUcsaUJBQWlCLENBQUM7SUFDckMsQ0FBQztJQUVELFdBQVc7UUFDVCxJQUFJLENBQUMsTUFBTSxDQUNQLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLEtBQUssSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsRUFDL0MsR0FBRyxFQUFFLENBQUMsZ0RBQ0YsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsTUFBTSxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUM1RCxNQUFNLFFBQVEsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3ZDLE1BQU0sUUFBUSxHQUFHOytDQUMwQixJQUFJLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsTUFDaEUsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUM7UUFDckIsSUFBSSxFQUFFO3VDQUN5QixRQUFRO3VDQUNSLFFBQVE7Ozs7Ozs7O21DQVFaLFFBQVE7bUNBQ1IsUUFBUTs7Ozs7O0tBTXRDLENBQUM7UUFDRixPQUFPLFFBQVEsQ0FBQztJQUNsQixDQUFDO0NBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7dXRpbH0gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcbmltcG9ydCB7Z2V0TWFpbkhlYWRlclN0cmluZyBhcyBtYWluLCBXZWJHUFVQcm9ncmFtfSBmcm9tICcuL3dlYmdwdV9wcm9ncmFtJztcbmltcG9ydCB7Y29tcHV0ZURpc3BhdGNofSBmcm9tICcuL3dlYmdwdV91dGlsJztcblxuZXhwb3J0IGNsYXNzIFRyYW5zcG9zZVNoYXJlZFByb2dyYW0gaW1wbGVtZW50cyBXZWJHUFVQcm9ncmFtIHtcbiAgdmFyaWFibGVOYW1lcyA9IFsnQSddO1xuICBvdXRwdXRTaGFwZTogbnVtYmVyW107XG4gIHNoYWRlcktleTogc3RyaW5nO1xuICBkaXNwYXRjaExheW91dDoge3g6IG51bWJlcltdLCB5OiBudW1iZXJbXX07XG4gIGRpc3BhdGNoOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl07XG4gIC8vIE5vdGUgdGhhdCB0aGUgbWF4aW11bSBudW1iZXIgb2Ygd29ya2dyb3VwIGludm9jYXRpb25zIGJ5IHdlYmdwdSBpcyAyNTYuXG4gIHdvcmtncm91cFNpemU6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXSA9IFsxNiwgMTYsIDFdO1xuXG4gIGNvbnN0cnVjdG9yKGFTaGFwZTogbnVtYmVyW10sIG5ld0RpbTogbnVtYmVyW10pIHtcbiAgICBjb25zdCBvdXRwdXRTaGFwZTogbnVtYmVyW10gPSBuZXcgQXJyYXkoYVNoYXBlLmxlbmd0aCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvdXRwdXRTaGFwZS5sZW5ndGg7IGkrKykge1xuICAgICAgb3V0cHV0U2hhcGVbaV0gPSBhU2hhcGVbbmV3RGltW2ldXTtcbiAgICB9XG4gICAgdGhpcy5vdXRwdXRTaGFwZSA9IG91dHB1dFNoYXBlO1xuICAgIHRoaXMuZGlzcGF0Y2hMYXlvdXQgPSB7eDogWzBdLCB5OiBbMV19O1xuICAgIHRoaXMuZGlzcGF0Y2ggPSBjb21wdXRlRGlzcGF0Y2goXG4gICAgICAgIHRoaXMuZGlzcGF0Y2hMYXlvdXQsIHRoaXMub3V0cHV0U2hhcGUsIHRoaXMud29ya2dyb3VwU2l6ZSwgWzEsIDEsIDFdKTtcblxuICAgIHRoaXMuc2hhZGVyS2V5ID0gJ3RyYW5zcG9zZVNoYXJlZCc7XG4gIH1cblxuICBnZXRVc2VyQ29kZSgpOiBzdHJpbmcge1xuICAgIHV0aWwuYXNzZXJ0KFxuICAgICAgICB0aGlzLndvcmtncm91cFNpemVbMF0gPT09IHRoaXMud29ya2dyb3VwU2l6ZVsxXSxcbiAgICAgICAgKCkgPT4gYE11c3QgYmUgYSBzcXVhcmUgdGlsZSwgY3VycmVudCB0aWxlIHNoYXBlIGlzICR7XG4gICAgICAgICAgICB0aGlzLndvcmtncm91cFNpemVbMF19IHggJHt0aGlzLndvcmtncm91cFNpemVbMV19YCk7XG4gICAgY29uc3QgdGlsZVNpemUgPSB0aGlzLndvcmtncm91cFNpemVbMF07XG4gICAgY29uc3QgdXNlckNvZGUgPSBgXG4gICAgICB2YXI8d29ya2dyb3VwPiB0aWxlIDogYXJyYXk8YXJyYXk8ZjMyLCAke3RoaXMud29ya2dyb3VwU2l6ZVswXSArIDF9PiwgJHtcbiAgICAgICAgdGhpcy53b3JrZ3JvdXBTaXplWzBdfT47XG4gICAgICAke21haW4oKX0ge1xuICAgICAgICB2YXIgeCA9IGkzMih3b3JrZ3JvdXBJZC54KSAqICR7dGlsZVNpemV9ICsgaTMyKGxvY2FsSWQueCk7XG4gICAgICAgIHZhciB5ID0gaTMyKHdvcmtncm91cElkLnkpICogJHt0aWxlU2l6ZX0gKyBpMzIobG9jYWxJZC55KTtcbiAgICAgICAgbGV0IHdpZHRoID0gdW5pZm9ybXMub3V0U2hhcGVbMF07XG4gICAgICAgIGxldCBoZWlnaHQgPSB1bmlmb3Jtcy5vdXRTaGFwZVsxXTtcbiAgICAgICAgaWYgKHggPCB3aWR0aCAmJiB5IDwgaGVpZ2h0KSB7XG4gICAgICAgICAgdGlsZVtsb2NhbElkLnldW2xvY2FsSWQueF0gPSBmMzIoQVt5ICogd2lkdGggKyB4XSk7XG4gICAgICAgIH1cbiAgICAgICAgd29ya2dyb3VwQmFycmllcigpO1xuXG4gICAgICAgIHggPSBpMzIod29ya2dyb3VwSWQueSkgKiAke3RpbGVTaXplfSArIGkzMihsb2NhbElkLngpO1xuICAgICAgICB5ID0gaTMyKHdvcmtncm91cElkLngpICogJHt0aWxlU2l6ZX0gKyBpMzIobG9jYWxJZC55KTtcbiAgICAgICAgaWYgKHggPCBoZWlnaHQgJiYgeSA8IHdpZHRoKSB7XG4gICAgICAgICAgc2V0T3V0cHV0QXRJbmRleCgoeSAqIGhlaWdodCArIHgpLCB0aWxlW2xvY2FsSWQueF1cbiAgICAgICAgICAgIFtsb2NhbElkLnldKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIGA7XG4gICAgcmV0dXJuIHVzZXJDb2RlO1xuICB9XG59XG4iXX0=","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { getCoordsDataType, getCoordsXYZ, getMainHeaderString as main } from './webgpu_program';\nimport { computeDispatch, flatDispatchLayout } from './webgpu_util';\nexport class TransposeProgram {\n    constructor(aShape, newDim) {\n        this.variableNames = ['A'];\n        this.workPerThread = 1;\n        this.workgroupSize = [64, 1, 1];\n        this.size = true;\n        const outputShape = new Array(aShape.length);\n        for (let i = 0; i < outputShape.length; i++) {\n            outputShape[i] = aShape[newDim[i]];\n        }\n        this.outputShape = outputShape;\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize, [this.workPerThread, 1, 1]);\n        this.newDim = newDim;\n        this.shaderKey = `transpose_${newDim}`;\n    }\n    getUserCode() {\n        const dtype = getCoordsDataType(this.outputShape.length);\n        const switched = getSwitchedCoords(this.newDim);\n        const userCode = `\n      ${main('index')} {\n        for(var i = 0; i < ${this.workPerThread}; i = i + 1) {\n          let flatIndex = index * ${this.workPerThread} + i;\n          if(flatIndex < uniforms.size) {\n            let coords = getCoordsFromIndex(flatIndex);\n            setOutputAtIndex(flatIndex, A[getIndexFromCoords${this.outputShape.length}D(\n              ${dtype}(${switched}), uniforms.aShape)]);\n          }\n        }\n      }\n    `;\n        return userCode;\n    }\n}\nexport function getSwitchedCoords(newDim) {\n    const rank = newDim.length;\n    if (rank > 6) {\n        throw Error(`Transpose for rank ${rank} is not yet supported`);\n    }\n    const switchedCoords = new Array(rank);\n    for (let i = 0; i < newDim.length; i++) {\n        switchedCoords[newDim[i]] = `coords.${getCoordsXYZ(i)}`;\n    }\n    return switchedCoords.join();\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHJhbnNwb3NlX3dlYmdwdS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL3RyYW5zcG9zZV93ZWJncHUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUFDLGlCQUFpQixFQUFFLFlBQVksRUFBRSxtQkFBbUIsSUFBSSxJQUFJLEVBQWdCLE1BQU0sa0JBQWtCLENBQUM7QUFDN0csT0FBTyxFQUFDLGVBQWUsRUFBRSxrQkFBa0IsRUFBQyxNQUFNLGVBQWUsQ0FBQztBQUVsRSxNQUFNLE9BQU8sZ0JBQWdCO0lBVzNCLFlBQVksTUFBZ0IsRUFBRSxNQUFnQjtRQVY5QyxrQkFBYSxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7UUFLdEIsa0JBQWEsR0FBRyxDQUFDLENBQUM7UUFDbEIsa0JBQWEsR0FBNkIsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBRXJELFNBQUksR0FBRyxJQUFJLENBQUM7UUFHVixNQUFNLFdBQVcsR0FBYSxJQUFJLEtBQUssQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDdkQsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFdBQVcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDM0MsV0FBVyxDQUFDLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUNwQztRQUNELElBQUksQ0FBQyxXQUFXLEdBQUcsV0FBVyxDQUFDO1FBQy9CLElBQUksQ0FBQyxjQUFjLEdBQUcsa0JBQWtCLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQzNELElBQUksQ0FBQyxRQUFRLEdBQUcsZUFBZSxDQUMzQixJQUFJLENBQUMsY0FBYyxFQUFFLElBQUksQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDLGFBQWEsRUFDekQsQ0FBQyxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRWhDLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO1FBQ3JCLElBQUksQ0FBQyxTQUFTLEdBQUcsYUFBYSxNQUFNLEVBQUUsQ0FBQztJQUN6QyxDQUFDO0lBRUQsV0FBVztRQUNULE1BQU0sS0FBSyxHQUFHLGlCQUFpQixDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDekQsTUFBTSxRQUFRLEdBQUcsaUJBQWlCLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBRWhELE1BQU0sUUFBUSxHQUFHO1FBQ2IsSUFBSSxDQUFDLE9BQU8sQ0FBQzs2QkFDUSxJQUFJLENBQUMsYUFBYTtvQ0FDWCxJQUFJLENBQUMsYUFBYTs7OzhEQUk5QyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU07Z0JBQ2YsS0FBSyxJQUFJLFFBQVE7Ozs7S0FJNUIsQ0FBQztRQUNGLE9BQU8sUUFBUSxDQUFDO0lBQ2xCLENBQUM7Q0FDRjtBQUVELE1BQU0sVUFBVSxpQkFBaUIsQ0FBQyxNQUFnQjtJQUNoRCxNQUFNLElBQUksR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDO0lBQzNCLElBQUksSUFBSSxHQUFHLENBQUMsRUFBRTtRQUNaLE1BQU0sS0FBSyxDQUFDLHNCQUFzQixJQUFJLHVCQUF1QixDQUFDLENBQUM7S0FDaEU7SUFDRCxNQUFNLGNBQWMsR0FBRyxJQUFJLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUN2QyxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtRQUN0QyxjQUFjLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsVUFBVSxZQUFZLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztLQUN6RDtJQUVELE9BQU8sY0FBYyxDQUFDLElBQUksRUFBRSxDQUFDO0FBQy9CLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7Z2V0Q29vcmRzRGF0YVR5cGUsIGdldENvb3Jkc1hZWiwgZ2V0TWFpbkhlYWRlclN0cmluZyBhcyBtYWluLCBXZWJHUFVQcm9ncmFtfSBmcm9tICcuL3dlYmdwdV9wcm9ncmFtJztcbmltcG9ydCB7Y29tcHV0ZURpc3BhdGNoLCBmbGF0RGlzcGF0Y2hMYXlvdXR9IGZyb20gJy4vd2ViZ3B1X3V0aWwnO1xuXG5leHBvcnQgY2xhc3MgVHJhbnNwb3NlUHJvZ3JhbSBpbXBsZW1lbnRzIFdlYkdQVVByb2dyYW0ge1xuICB2YXJpYWJsZU5hbWVzID0gWydBJ107XG4gIHNoYWRlcktleTogc3RyaW5nO1xuICBvdXRwdXRTaGFwZTogbnVtYmVyW107XG4gIGRpc3BhdGNoTGF5b3V0OiB7eDogbnVtYmVyW119O1xuICBkaXNwYXRjaDogW251bWJlciwgbnVtYmVyLCBudW1iZXJdO1xuICB3b3JrUGVyVGhyZWFkID0gMTtcbiAgd29ya2dyb3VwU2l6ZTogW251bWJlciwgbnVtYmVyLCBudW1iZXJdID0gWzY0LCAxLCAxXTtcbiAgbmV3RGltOiBudW1iZXJbXTtcbiAgc2l6ZSA9IHRydWU7XG5cbiAgY29uc3RydWN0b3IoYVNoYXBlOiBudW1iZXJbXSwgbmV3RGltOiBudW1iZXJbXSkge1xuICAgIGNvbnN0IG91dHB1dFNoYXBlOiBudW1iZXJbXSA9IG5ldyBBcnJheShhU2hhcGUubGVuZ3RoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG91dHB1dFNoYXBlLmxlbmd0aDsgaSsrKSB7XG4gICAgICBvdXRwdXRTaGFwZVtpXSA9IGFTaGFwZVtuZXdEaW1baV1dO1xuICAgIH1cbiAgICB0aGlzLm91dHB1dFNoYXBlID0gb3V0cHV0U2hhcGU7XG4gICAgdGhpcy5kaXNwYXRjaExheW91dCA9IGZsYXREaXNwYXRjaExheW91dCh0aGlzLm91dHB1dFNoYXBlKTtcbiAgICB0aGlzLmRpc3BhdGNoID0gY29tcHV0ZURpc3BhdGNoKFxuICAgICAgICB0aGlzLmRpc3BhdGNoTGF5b3V0LCB0aGlzLm91dHB1dFNoYXBlLCB0aGlzLndvcmtncm91cFNpemUsXG4gICAgICAgIFt0aGlzLndvcmtQZXJUaHJlYWQsIDEsIDFdKTtcblxuICAgIHRoaXMubmV3RGltID0gbmV3RGltO1xuICAgIHRoaXMuc2hhZGVyS2V5ID0gYHRyYW5zcG9zZV8ke25ld0RpbX1gO1xuICB9XG5cbiAgZ2V0VXNlckNvZGUoKTogc3RyaW5nIHtcbiAgICBjb25zdCBkdHlwZSA9IGdldENvb3Jkc0RhdGFUeXBlKHRoaXMub3V0cHV0U2hhcGUubGVuZ3RoKTtcbiAgICBjb25zdCBzd2l0Y2hlZCA9IGdldFN3aXRjaGVkQ29vcmRzKHRoaXMubmV3RGltKTtcblxuICAgIGNvbnN0IHVzZXJDb2RlID0gYFxuICAgICAgJHttYWluKCdpbmRleCcpfSB7XG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCAke3RoaXMud29ya1BlclRocmVhZH07IGkgPSBpICsgMSkge1xuICAgICAgICAgIGxldCBmbGF0SW5kZXggPSBpbmRleCAqICR7dGhpcy53b3JrUGVyVGhyZWFkfSArIGk7XG4gICAgICAgICAgaWYoZmxhdEluZGV4IDwgdW5pZm9ybXMuc2l6ZSkge1xuICAgICAgICAgICAgbGV0IGNvb3JkcyA9IGdldENvb3Jkc0Zyb21JbmRleChmbGF0SW5kZXgpO1xuICAgICAgICAgICAgc2V0T3V0cHV0QXRJbmRleChmbGF0SW5kZXgsIEFbZ2V0SW5kZXhGcm9tQ29vcmRzJHtcbiAgICAgICAgdGhpcy5vdXRwdXRTaGFwZS5sZW5ndGh9RChcbiAgICAgICAgICAgICAgJHtkdHlwZX0oJHtzd2l0Y2hlZH0pLCB1bmlmb3Jtcy5hU2hhcGUpXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgYDtcbiAgICByZXR1cm4gdXNlckNvZGU7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFN3aXRjaGVkQ29vcmRzKG5ld0RpbTogbnVtYmVyW10pOiBzdHJpbmcge1xuICBjb25zdCByYW5rID0gbmV3RGltLmxlbmd0aDtcbiAgaWYgKHJhbmsgPiA2KSB7XG4gICAgdGhyb3cgRXJyb3IoYFRyYW5zcG9zZSBmb3IgcmFuayAke3Jhbmt9IGlzIG5vdCB5ZXQgc3VwcG9ydGVkYCk7XG4gIH1cbiAgY29uc3Qgc3dpdGNoZWRDb29yZHMgPSBuZXcgQXJyYXkocmFuayk7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbmV3RGltLmxlbmd0aDsgaSsrKSB7XG4gICAgc3dpdGNoZWRDb29yZHNbbmV3RGltW2ldXSA9IGBjb29yZHMuJHtnZXRDb29yZHNYWVooaSl9YDtcbiAgfVxuXG4gIHJldHVybiBzd2l0Y2hlZENvb3Jkcy5qb2luKCk7XG59XG4iXX0=","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Transpose, util } from '@tensorflow/tfjs-core';\nimport { transposeImplCPU as cpuTranspose } from '../kernel_utils/shared';\nimport { TransposeSharedProgram } from '../transpose_shared_webgpu';\nimport { TransposeProgram } from '../transpose_webgpu';\nexport function transpose(args) {\n    const { inputs, backend, attrs } = args;\n    const { x } = inputs;\n    const { perm } = attrs;\n    const webgpuBackend = backend;\n    const xRank = x.shape.length;\n    const newShape = new Array(xRank);\n    for (let i = 0; i < newShape.length; i++) {\n        newShape[i] = x.shape[perm[i]];\n    }\n    if (backend.shouldExecuteOnCPU([x])) {\n        const xData = webgpuBackend.tensorMap.get(x.dataId);\n        const values = xData.values;\n        const outValues = cpuTranspose(values, x.shape, x.dtype, perm, newShape);\n        return backend.makeTensorInfo(newShape, x.dtype, outValues);\n    }\n    if (x.shape.length === 2 && util.arraysEqual(perm, [1, 0])) {\n        const program = new TransposeSharedProgram(x.shape, perm);\n        return webgpuBackend.runWebGPUProgram(program, [x], x.dtype);\n    }\n    const program = new TransposeProgram(x.shape, perm);\n    return webgpuBackend.runWebGPUProgram(program, [x], x.dtype);\n}\nexport const transposeConfig = {\n    kernelName: Transpose,\n    backendName: 'webgpu',\n    kernelFunc: transpose\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVHJhbnNwb3NlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMva2VybmVscy9UcmFuc3Bvc2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUEyQixTQUFTLEVBQStDLElBQUksRUFBQyxNQUFNLHVCQUF1QixDQUFDO0FBRzdILE9BQU8sRUFBQyxnQkFBZ0IsSUFBSSxZQUFZLEVBQUMsTUFBTSx3QkFBd0IsQ0FBQztBQUV4RSxPQUFPLEVBQUMsc0JBQXNCLEVBQUMsTUFBTSw0QkFBNEIsQ0FBQztBQUNsRSxPQUFPLEVBQUMsZ0JBQWdCLEVBQUMsTUFBTSxxQkFBcUIsQ0FBQztBQUVyRCxNQUFNLFVBQVUsU0FBUyxDQUFDLElBSXpCO0lBQ0MsTUFBTSxFQUFDLE1BQU0sRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFDLEdBQUcsSUFBSSxDQUFDO0lBQ3RDLE1BQU0sRUFBQyxDQUFDLEVBQUMsR0FBRyxNQUFNLENBQUM7SUFDbkIsTUFBTSxFQUFDLElBQUksRUFBQyxHQUFHLEtBQUssQ0FBQztJQUNyQixNQUFNLGFBQWEsR0FBRyxPQUFPLENBQUM7SUFFOUIsTUFBTSxLQUFLLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUM7SUFDN0IsTUFBTSxRQUFRLEdBQWEsSUFBSSxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDNUMsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFFBQVEsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7UUFDeEMsUUFBUSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7S0FDaEM7SUFDRCxJQUFJLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUU7UUFDbkMsTUFBTSxLQUFLLEdBQUcsYUFBYSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ3BELE1BQU0sTUFBTSxHQUFHLEtBQUssQ0FBQyxNQUFvQixDQUFDO1FBQzFDLE1BQU0sU0FBUyxHQUFHLFlBQVksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsS0FBSyxFQUFFLElBQUksRUFBRSxRQUFRLENBQUMsQ0FBQztRQUN6RSxPQUFPLE9BQU8sQ0FBQyxjQUFjLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxLQUFLLEVBQUUsU0FBUyxDQUFDLENBQUM7S0FDN0Q7SUFDRCxJQUFJLENBQUMsQ0FBQyxLQUFLLENBQUMsTUFBTSxLQUFLLENBQUMsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFO1FBQzFELE1BQU0sT0FBTyxHQUFHLElBQUksc0JBQXNCLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQztRQUMxRCxPQUFPLGFBQWEsQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUM7S0FDOUQ7SUFDRCxNQUFNLE9BQU8sR0FBRyxJQUFJLGdCQUFnQixDQUFDLENBQUMsQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDcEQsT0FBTyxhQUFhLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQy9ELENBQUM7QUFFRCxNQUFNLENBQUMsTUFBTSxlQUFlLEdBQWlCO0lBQzNDLFVBQVUsRUFBRSxTQUFTO0lBQ3JCLFdBQVcsRUFBRSxRQUFRO0lBQ3JCLFVBQVUsRUFBRSxTQUFrQztDQUMvQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge0tlcm5lbENvbmZpZywgS2VybmVsRnVuYywgVHJhbnNwb3NlLCBUcmFuc3Bvc2VBdHRycywgVHJhbnNwb3NlSW5wdXRzLCBUeXBlZEFycmF5LCB1dGlsfSBmcm9tICdAdGVuc29yZmxvdy90ZmpzLWNvcmUnO1xuXG5pbXBvcnQge1dlYkdQVUJhY2tlbmR9IGZyb20gJy4uL2JhY2tlbmRfd2ViZ3B1JztcbmltcG9ydCB7dHJhbnNwb3NlSW1wbENQVSBhcyBjcHVUcmFuc3Bvc2V9IGZyb20gJy4uL2tlcm5lbF91dGlscy9zaGFyZWQnO1xuXG5pbXBvcnQge1RyYW5zcG9zZVNoYXJlZFByb2dyYW19IGZyb20gJy4uL3RyYW5zcG9zZV9zaGFyZWRfd2ViZ3B1JztcbmltcG9ydCB7VHJhbnNwb3NlUHJvZ3JhbX0gZnJvbSAnLi4vdHJhbnNwb3NlX3dlYmdwdSc7XG5cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc3Bvc2UoYXJnczoge1xuICBpbnB1dHM6IFRyYW5zcG9zZUlucHV0cyxcbiAgYXR0cnM6IFRyYW5zcG9zZUF0dHJzLFxuICBiYWNrZW5kOiBXZWJHUFVCYWNrZW5kXG59KSB7XG4gIGNvbnN0IHtpbnB1dHMsIGJhY2tlbmQsIGF0dHJzfSA9IGFyZ3M7XG4gIGNvbnN0IHt4fSA9IGlucHV0cztcbiAgY29uc3Qge3Blcm19ID0gYXR0cnM7XG4gIGNvbnN0IHdlYmdwdUJhY2tlbmQgPSBiYWNrZW5kO1xuXG4gIGNvbnN0IHhSYW5rID0geC5zaGFwZS5sZW5ndGg7XG4gIGNvbnN0IG5ld1NoYXBlOiBudW1iZXJbXSA9IG5ldyBBcnJheSh4UmFuayk7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbmV3U2hhcGUubGVuZ3RoOyBpKyspIHtcbiAgICBuZXdTaGFwZVtpXSA9IHguc2hhcGVbcGVybVtpXV07XG4gIH1cbiAgaWYgKGJhY2tlbmQuc2hvdWxkRXhlY3V0ZU9uQ1BVKFt4XSkpIHtcbiAgICBjb25zdCB4RGF0YSA9IHdlYmdwdUJhY2tlbmQudGVuc29yTWFwLmdldCh4LmRhdGFJZCk7XG4gICAgY29uc3QgdmFsdWVzID0geERhdGEudmFsdWVzIGFzIFR5cGVkQXJyYXk7XG4gICAgY29uc3Qgb3V0VmFsdWVzID0gY3B1VHJhbnNwb3NlKHZhbHVlcywgeC5zaGFwZSwgeC5kdHlwZSwgcGVybSwgbmV3U2hhcGUpO1xuICAgIHJldHVybiBiYWNrZW5kLm1ha2VUZW5zb3JJbmZvKG5ld1NoYXBlLCB4LmR0eXBlLCBvdXRWYWx1ZXMpO1xuICB9XG4gIGlmICh4LnNoYXBlLmxlbmd0aCA9PT0gMiAmJiB1dGlsLmFycmF5c0VxdWFsKHBlcm0sIFsxLCAwXSkpIHtcbiAgICBjb25zdCBwcm9ncmFtID0gbmV3IFRyYW5zcG9zZVNoYXJlZFByb2dyYW0oeC5zaGFwZSwgcGVybSk7XG4gICAgcmV0dXJuIHdlYmdwdUJhY2tlbmQucnVuV2ViR1BVUHJvZ3JhbShwcm9ncmFtLCBbeF0sIHguZHR5cGUpO1xuICB9XG4gIGNvbnN0IHByb2dyYW0gPSBuZXcgVHJhbnNwb3NlUHJvZ3JhbSh4LnNoYXBlLCBwZXJtKTtcbiAgcmV0dXJuIHdlYmdwdUJhY2tlbmQucnVuV2ViR1BVUHJvZ3JhbShwcm9ncmFtLCBbeF0sIHguZHR5cGUpO1xufVxuXG5leHBvcnQgY29uc3QgdHJhbnNwb3NlQ29uZmlnOiBLZXJuZWxDb25maWcgPSB7XG4gIGtlcm5lbE5hbWU6IFRyYW5zcG9zZSxcbiAgYmFja2VuZE5hbWU6ICd3ZWJncHUnLFxuICBrZXJuZWxGdW5jOiB0cmFuc3Bvc2UgYXMgdW5rbm93biBhcyBLZXJuZWxGdW5jXG59O1xuIl19","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { backend_util } from '@tensorflow/tfjs-core';\nimport { getMainHeaderString as main } from './webgpu_program';\nimport { computeDispatch, flatDispatchLayout } from './webgpu_util';\nexport class ReduceProgram {\n    constructor(reduceInfo, reduceType, maxComputeWorkgroupSizeX) {\n        this.variableNames = ['x'];\n        this.uniforms = 'reduceSize : i32,';\n        this.size = true;\n        this.inputShape = [reduceInfo.batchSize, reduceInfo.inSize];\n        const [outputShape,] = backend_util.computeOutAndReduceShapes(this.inputShape, [1]);\n        this.outputShape = outputShape.length === 0 ? [1] : outputShape;\n        // If reduceSize |reduceInfo.inSize| is very large, the I/O accessing will\n        // become the bottleneck. Increasing workgroupSize can reduce the times of\n        // accessing global memory. The threshold value is just to make sure the\n        // reduceSize is large enough for a bigger workgroupSize.\n        if (reduceInfo.inSize >= 32768 && maxComputeWorkgroupSizeX >= 512) {\n            this.workgroupSize = [512, 1, 1];\n        }\n        else if (reduceInfo.inSize >= 4096) {\n            this.workgroupSize = [256, 1, 1];\n        }\n        else {\n            this.workgroupSize = [64, 1, 1];\n        }\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        // A work group only outputs a data, so we transfer [1, 1, 1] to compute\n        // dispatch size.\n        this.dispatch =\n            computeDispatch(this.dispatchLayout, this.outputShape, [1, 1, 1]);\n        this.reduceType = reduceType;\n        this.shaderKey = `reduce_${reduceType}`;\n    }\n    getUserCode() {\n        let reduceOp = ``;\n        let initValue = '0.0';\n        const workgroupSizeX = this.workgroupSize[0];\n        if (this.reduceType === 'min' || this.reduceType === 'max') {\n            reduceOp = `\n         if (isnan(candidate)) {\n          bestValue = uniforms.NAN;\n         } else if (!isnan(bestValue) && candidate ${this.reduceType === 'min' ? '<' : '>'} bestValue)\n           {  bestValue = candidate; }`;\n            initValue = 'f32(x[offset])';\n        }\n        else if (this.reduceType === 'sum' || this.reduceType === 'mean') {\n            reduceOp = ' bestValue = bestValue + candidate; ';\n        }\n        else if (this.reduceType === 'prod') {\n            reduceOp = ' bestValue = bestValue * candidate; ';\n            initValue = '1.0';\n        }\n        else if (this.reduceType === 'all') {\n            reduceOp = ' bestValue = f32(bestValue >= 1.0 && candidate >= 1.0); ';\n            initValue = '1.0';\n        }\n        else if (this.reduceType === 'any') {\n            reduceOp = ' bestValue = f32(bestValue >= 1.0 || candidate >= 1.0); ';\n            initValue = '0.0';\n        }\n        const outputSnippet = this.reduceType === 'mean' ?\n            // tslint:disable-next-line:max-line-length\n            `setOutputAtIndex(outputIndex, bestValue / f32(uniforms.reduceSize));` :\n            `setOutputAtIndex(outputIndex, bestValue);`;\n        const sharedMemorySnippet = `\n         var<workgroup> xBestValues : array<f32, ${workgroupSizeX}>;\n       `;\n        const userCode = `\n       fn DIV_CEIL(a : u32, b : u32) -> u32 {\n        return ((a - 1u) / b + 1u);\n       }\n\n       ${sharedMemorySnippet}\n       fn getOffset(outputIndex : i32) -> i32 {\n         let outputCoords = getCoordsFromIndex(outputIndex);\n         let offset = ${this.outputShape.length === 1 ?\n            'outputCoords' :\n            'outputCoords[0]'} * uniforms.reduceSize;\n          return offset;\n       }\n       ${main('index')} {\n         let outputIndex = index / ${workgroupSizeX};\n         let offset = getOffset(outputIndex);\n         var bestValue = ${initValue};\n         let Length = uniforms.reduceSize;\n         let WorkPerThread = DIV_CEIL(u32(Length), ${workgroupSizeX}u);\n         for (var k = i32(localId.x); k < Length && outputIndex < uniforms.size;\n             k = k + ${workgroupSizeX}) {\n           let candidate = f32(x[offset + k]);\n           ${reduceOp}\n         }\n         xBestValues[localId.x] = bestValue;\n         workgroupBarrier();\n\n         var reduceSize = min(u32(Length), ${workgroupSizeX}u);\n         for (var currentSize = reduceSize / 2u; reduceSize > 1u;\n             currentSize = reduceSize / 2u) {\n           let interval = DIV_CEIL(reduceSize, 2u);\n           if (localId.x < currentSize) {\n            let candidate = xBestValues[localId.x + interval];\n            ${reduceOp}\n            xBestValues[localId.x] = bestValue;\n           }\n           reduceSize = interval;\n           workgroupBarrier();\n         }\n\n         if (localId.x == 0u && outputIndex < uniforms.size) {\n          ${outputSnippet}\n        }\n       }\n     `;\n        return userCode;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVkdWNlX3dlYmdwdS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL3JlZHVjZV93ZWJncHUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUFDLFlBQVksRUFBQyxNQUFNLHVCQUF1QixDQUFDO0FBQ25ELE9BQU8sRUFBQyxtQkFBbUIsSUFBSSxJQUFJLEVBQWdCLE1BQU0sa0JBQWtCLENBQUM7QUFDNUUsT0FBTyxFQUFDLGVBQWUsRUFBRSxrQkFBa0IsRUFBQyxNQUFNLGVBQWUsQ0FBQztBQUVsRSxNQUFNLE9BQU8sYUFBYTtJQVl4QixZQUNJLFVBQW1DLEVBQ25DLFVBQXVELEVBQ3ZELHdCQUFnQztRQVRwQyxrQkFBYSxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDdEIsYUFBUSxHQUFHLG1CQUFtQixDQUFDO1FBRy9CLFNBQUksR0FBRyxJQUFJLENBQUM7UUFNVixJQUFJLENBQUMsVUFBVSxHQUFHLENBQUMsVUFBVSxDQUFDLFNBQVMsRUFBRSxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDNUQsTUFBTSxDQUFDLFdBQVcsRUFBRyxHQUNqQixZQUFZLENBQUMseUJBQXlCLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDakUsSUFBSSxDQUFDLFdBQVcsR0FBRyxXQUFXLENBQUMsTUFBTSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDO1FBQ2hFLDBFQUEwRTtRQUMxRSwwRUFBMEU7UUFDMUUsd0VBQXdFO1FBQ3hFLHlEQUF5RDtRQUN6RCxJQUFJLFVBQVUsQ0FBQyxNQUFNLElBQUksS0FBSyxJQUFJLHdCQUF3QixJQUFJLEdBQUcsRUFBRTtZQUNqRSxJQUFJLENBQUMsYUFBYSxHQUFHLENBQUMsR0FBRyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztTQUNsQzthQUFNLElBQUksVUFBVSxDQUFDLE1BQU0sSUFBSSxJQUFJLEVBQUU7WUFDcEMsSUFBSSxDQUFDLGFBQWEsR0FBRyxDQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7U0FDbEM7YUFBTTtZQUNMLElBQUksQ0FBQyxhQUFhLEdBQUcsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1NBQ2pDO1FBQ0QsSUFBSSxDQUFDLGNBQWMsR0FBRyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDM0Qsd0VBQXdFO1FBQ3hFLGlCQUFpQjtRQUNqQixJQUFJLENBQUMsUUFBUTtZQUNULGVBQWUsQ0FBQyxJQUFJLENBQUMsY0FBYyxFQUFFLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFdEUsSUFBSSxDQUFDLFVBQVUsR0FBRyxVQUFVLENBQUM7UUFDN0IsSUFBSSxDQUFDLFNBQVMsR0FBRyxVQUFVLFVBQVUsRUFBRSxDQUFDO0lBQzFDLENBQUM7SUFFRCxXQUFXO1FBQ1QsSUFBSSxRQUFRLEdBQUcsRUFBRSxDQUFDO1FBQ2xCLElBQUksU0FBUyxHQUFHLEtBQUssQ0FBQztRQUN0QixNQUFNLGNBQWMsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzdDLElBQUksSUFBSSxDQUFDLFVBQVUsS0FBSyxLQUFLLElBQUksSUFBSSxDQUFDLFVBQVUsS0FBSyxLQUFLLEVBQUU7WUFDMUQsUUFBUSxHQUFHOzs7cURBSVAsSUFBSSxDQUFDLFVBQVUsS0FBSyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRzt1Q0FDUixDQUFDO1lBQ2xDLFNBQVMsR0FBRyxnQkFBZ0IsQ0FBQztTQUM5QjthQUFNLElBQUksSUFBSSxDQUFDLFVBQVUsS0FBSyxLQUFLLElBQUksSUFBSSxDQUFDLFVBQVUsS0FBSyxNQUFNLEVBQUU7WUFDbEUsUUFBUSxHQUFHLHNDQUFzQyxDQUFDO1NBQ25EO2FBQU0sSUFBSSxJQUFJLENBQUMsVUFBVSxLQUFLLE1BQU0sRUFBRTtZQUNyQyxRQUFRLEdBQUcsc0NBQXNDLENBQUM7WUFDbEQsU0FBUyxHQUFHLEtBQUssQ0FBQztTQUNuQjthQUFNLElBQUksSUFBSSxDQUFDLFVBQVUsS0FBSyxLQUFLLEVBQUU7WUFDcEMsUUFBUSxHQUFHLDBEQUEwRCxDQUFDO1lBQ3RFLFNBQVMsR0FBRyxLQUFLLENBQUM7U0FDbkI7YUFBTSxJQUFJLElBQUksQ0FBQyxVQUFVLEtBQUssS0FBSyxFQUFFO1lBQ3BDLFFBQVEsR0FBRywwREFBMEQsQ0FBQztZQUN0RSxTQUFTLEdBQUcsS0FBSyxDQUFDO1NBQ25CO1FBRUQsTUFBTSxhQUFhLEdBQUcsSUFBSSxDQUFDLFVBQVUsS0FBSyxNQUFNLENBQUMsQ0FBQztZQUM5QywyQ0FBMkM7WUFDM0Msc0VBQXNFLENBQUMsQ0FBQztZQUN4RSwyQ0FBMkMsQ0FBQztRQUVoRCxNQUFNLG1CQUFtQixHQUFHO21EQUNtQixjQUFjO1FBQ3pELENBQUM7UUFFTCxNQUFNLFFBQVEsR0FBRzs7Ozs7U0FLWixtQkFBbUI7Ozt3QkFJcEIsSUFBSSxDQUFDLFdBQVcsQ0FBQyxNQUFNLEtBQUssQ0FBQyxDQUFDLENBQUM7WUFDM0IsY0FBYyxDQUFDLENBQUM7WUFDaEIsaUJBQWlCOzs7U0FHcEIsSUFBSSxDQUFDLE9BQU8sQ0FBQztxQ0FDZSxjQUFjOzsyQkFFeEIsU0FBUzs7cURBRWlCLGNBQWM7O3VCQUU1QyxjQUFjOzthQUV4QixRQUFROzs7Ozs2Q0FLd0IsY0FBYzs7Ozs7O2NBTTdDLFFBQVE7Ozs7Ozs7O1lBUVYsYUFBYTs7O01BR25CLENBQUM7UUFDSCxPQUFPLFFBQVEsQ0FBQztJQUNsQixDQUFDO0NBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7YmFja2VuZF91dGlsfSBmcm9tICdAdGVuc29yZmxvdy90ZmpzLWNvcmUnO1xuaW1wb3J0IHtnZXRNYWluSGVhZGVyU3RyaW5nIGFzIG1haW4sIFdlYkdQVVByb2dyYW19IGZyb20gJy4vd2ViZ3B1X3Byb2dyYW0nO1xuaW1wb3J0IHtjb21wdXRlRGlzcGF0Y2gsIGZsYXREaXNwYXRjaExheW91dH0gZnJvbSAnLi93ZWJncHVfdXRpbCc7XG5cbmV4cG9ydCBjbGFzcyBSZWR1Y2VQcm9ncmFtIGltcGxlbWVudHMgV2ViR1BVUHJvZ3JhbSB7XG4gIG91dHB1dFNoYXBlOiBudW1iZXJbXTtcbiAgc2hhZGVyS2V5OiBzdHJpbmc7XG4gIGRpc3BhdGNoTGF5b3V0OiB7eDogbnVtYmVyW119O1xuICBkaXNwYXRjaDogW251bWJlciwgbnVtYmVyLCBudW1iZXJdO1xuICB3b3JrZ3JvdXBTaXplOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl07XG4gIHZhcmlhYmxlTmFtZXMgPSBbJ3gnXTtcbiAgdW5pZm9ybXMgPSAncmVkdWNlU2l6ZSA6IGkzMiwnO1xuICByZWR1Y2VUeXBlOiAnYWxsJ3wnYW55J3wnbWF4J3wnbWVhbid8J21pbid8J3Byb2QnfCdzdW0nO1xuICBpbnB1dFNoYXBlOiBudW1iZXJbXTtcbiAgc2l6ZSA9IHRydWU7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgICByZWR1Y2VJbmZvOiBiYWNrZW5kX3V0aWwuUmVkdWNlSW5mbyxcbiAgICAgIHJlZHVjZVR5cGU6ICdhbGwnfCdhbnknfCdtYXgnfCdtZWFuJ3wnbWluJ3wncHJvZCd8J3N1bScsXG4gICAgICBtYXhDb21wdXRlV29ya2dyb3VwU2l6ZVg6IG51bWJlcikge1xuICAgIHRoaXMuaW5wdXRTaGFwZSA9IFtyZWR1Y2VJbmZvLmJhdGNoU2l6ZSwgcmVkdWNlSW5mby5pblNpemVdO1xuICAgIGNvbnN0IFtvdXRwdXRTaGFwZSwgXSA9XG4gICAgICAgIGJhY2tlbmRfdXRpbC5jb21wdXRlT3V0QW5kUmVkdWNlU2hhcGVzKHRoaXMuaW5wdXRTaGFwZSwgWzFdKTtcbiAgICB0aGlzLm91dHB1dFNoYXBlID0gb3V0cHV0U2hhcGUubGVuZ3RoID09PSAwID8gWzFdIDogb3V0cHV0U2hhcGU7XG4gICAgLy8gSWYgcmVkdWNlU2l6ZSB8cmVkdWNlSW5mby5pblNpemV8IGlzIHZlcnkgbGFyZ2UsIHRoZSBJL08gYWNjZXNzaW5nIHdpbGxcbiAgICAvLyBiZWNvbWUgdGhlIGJvdHRsZW5lY2suIEluY3JlYXNpbmcgd29ya2dyb3VwU2l6ZSBjYW4gcmVkdWNlIHRoZSB0aW1lcyBvZlxuICAgIC8vIGFjY2Vzc2luZyBnbG9iYWwgbWVtb3J5LiBUaGUgdGhyZXNob2xkIHZhbHVlIGlzIGp1c3QgdG8gbWFrZSBzdXJlIHRoZVxuICAgIC8vIHJlZHVjZVNpemUgaXMgbGFyZ2UgZW5vdWdoIGZvciBhIGJpZ2dlciB3b3JrZ3JvdXBTaXplLlxuICAgIGlmIChyZWR1Y2VJbmZvLmluU2l6ZSA+PSAzMjc2OCAmJiBtYXhDb21wdXRlV29ya2dyb3VwU2l6ZVggPj0gNTEyKSB7XG4gICAgICB0aGlzLndvcmtncm91cFNpemUgPSBbNTEyLCAxLCAxXTtcbiAgICB9IGVsc2UgaWYgKHJlZHVjZUluZm8uaW5TaXplID49IDQwOTYpIHtcbiAgICAgIHRoaXMud29ya2dyb3VwU2l6ZSA9IFsyNTYsIDEsIDFdO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLndvcmtncm91cFNpemUgPSBbNjQsIDEsIDFdO1xuICAgIH1cbiAgICB0aGlzLmRpc3BhdGNoTGF5b3V0ID0gZmxhdERpc3BhdGNoTGF5b3V0KHRoaXMub3V0cHV0U2hhcGUpO1xuICAgIC8vIEEgd29yayBncm91cCBvbmx5IG91dHB1dHMgYSBkYXRhLCBzbyB3ZSB0cmFuc2ZlciBbMSwgMSwgMV0gdG8gY29tcHV0ZVxuICAgIC8vIGRpc3BhdGNoIHNpemUuXG4gICAgdGhpcy5kaXNwYXRjaCA9XG4gICAgICAgIGNvbXB1dGVEaXNwYXRjaCh0aGlzLmRpc3BhdGNoTGF5b3V0LCB0aGlzLm91dHB1dFNoYXBlLCBbMSwgMSwgMV0pO1xuXG4gICAgdGhpcy5yZWR1Y2VUeXBlID0gcmVkdWNlVHlwZTtcbiAgICB0aGlzLnNoYWRlcktleSA9IGByZWR1Y2VfJHtyZWR1Y2VUeXBlfWA7XG4gIH1cblxuICBnZXRVc2VyQ29kZSgpOiBzdHJpbmcge1xuICAgIGxldCByZWR1Y2VPcCA9IGBgO1xuICAgIGxldCBpbml0VmFsdWUgPSAnMC4wJztcbiAgICBjb25zdCB3b3JrZ3JvdXBTaXplWCA9IHRoaXMud29ya2dyb3VwU2l6ZVswXTtcbiAgICBpZiAodGhpcy5yZWR1Y2VUeXBlID09PSAnbWluJyB8fCB0aGlzLnJlZHVjZVR5cGUgPT09ICdtYXgnKSB7XG4gICAgICByZWR1Y2VPcCA9IGBcbiAgICAgICAgIGlmIChpc25hbihjYW5kaWRhdGUpKSB7XG4gICAgICAgICAgYmVzdFZhbHVlID0gdW5pZm9ybXMuTkFOO1xuICAgICAgICAgfSBlbHNlIGlmICghaXNuYW4oYmVzdFZhbHVlKSAmJiBjYW5kaWRhdGUgJHtcbiAgICAgICAgICB0aGlzLnJlZHVjZVR5cGUgPT09ICdtaW4nID8gJzwnIDogJz4nfSBiZXN0VmFsdWUpXG4gICAgICAgICAgIHsgIGJlc3RWYWx1ZSA9IGNhbmRpZGF0ZTsgfWA7XG4gICAgICBpbml0VmFsdWUgPSAnZjMyKHhbb2Zmc2V0XSknO1xuICAgIH0gZWxzZSBpZiAodGhpcy5yZWR1Y2VUeXBlID09PSAnc3VtJyB8fCB0aGlzLnJlZHVjZVR5cGUgPT09ICdtZWFuJykge1xuICAgICAgcmVkdWNlT3AgPSAnIGJlc3RWYWx1ZSA9IGJlc3RWYWx1ZSArIGNhbmRpZGF0ZTsgJztcbiAgICB9IGVsc2UgaWYgKHRoaXMucmVkdWNlVHlwZSA9PT0gJ3Byb2QnKSB7XG4gICAgICByZWR1Y2VPcCA9ICcgYmVzdFZhbHVlID0gYmVzdFZhbHVlICogY2FuZGlkYXRlOyAnO1xuICAgICAgaW5pdFZhbHVlID0gJzEuMCc7XG4gICAgfSBlbHNlIGlmICh0aGlzLnJlZHVjZVR5cGUgPT09ICdhbGwnKSB7XG4gICAgICByZWR1Y2VPcCA9ICcgYmVzdFZhbHVlID0gZjMyKGJlc3RWYWx1ZSA+PSAxLjAgJiYgY2FuZGlkYXRlID49IDEuMCk7ICc7XG4gICAgICBpbml0VmFsdWUgPSAnMS4wJztcbiAgICB9IGVsc2UgaWYgKHRoaXMucmVkdWNlVHlwZSA9PT0gJ2FueScpIHtcbiAgICAgIHJlZHVjZU9wID0gJyBiZXN0VmFsdWUgPSBmMzIoYmVzdFZhbHVlID49IDEuMCB8fCBjYW5kaWRhdGUgPj0gMS4wKTsgJztcbiAgICAgIGluaXRWYWx1ZSA9ICcwLjAnO1xuICAgIH1cblxuICAgIGNvbnN0IG91dHB1dFNuaXBwZXQgPSB0aGlzLnJlZHVjZVR5cGUgPT09ICdtZWFuJyA/XG4gICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTptYXgtbGluZS1sZW5ndGhcbiAgICAgICAgYHNldE91dHB1dEF0SW5kZXgob3V0cHV0SW5kZXgsIGJlc3RWYWx1ZSAvIGYzMih1bmlmb3Jtcy5yZWR1Y2VTaXplKSk7YCA6XG4gICAgICAgIGBzZXRPdXRwdXRBdEluZGV4KG91dHB1dEluZGV4LCBiZXN0VmFsdWUpO2A7XG5cbiAgICBjb25zdCBzaGFyZWRNZW1vcnlTbmlwcGV0ID0gYFxuICAgICAgICAgdmFyPHdvcmtncm91cD4geEJlc3RWYWx1ZXMgOiBhcnJheTxmMzIsICR7d29ya2dyb3VwU2l6ZVh9PjtcbiAgICAgICBgO1xuXG4gICAgY29uc3QgdXNlckNvZGUgPSBgXG4gICAgICAgZm4gRElWX0NFSUwoYSA6IHUzMiwgYiA6IHUzMikgLT4gdTMyIHtcbiAgICAgICAgcmV0dXJuICgoYSAtIDF1KSAvIGIgKyAxdSk7XG4gICAgICAgfVxuXG4gICAgICAgJHtzaGFyZWRNZW1vcnlTbmlwcGV0fVxuICAgICAgIGZuIGdldE9mZnNldChvdXRwdXRJbmRleCA6IGkzMikgLT4gaTMyIHtcbiAgICAgICAgIGxldCBvdXRwdXRDb29yZHMgPSBnZXRDb29yZHNGcm9tSW5kZXgob3V0cHV0SW5kZXgpO1xuICAgICAgICAgbGV0IG9mZnNldCA9ICR7XG4gICAgICAgIHRoaXMub3V0cHV0U2hhcGUubGVuZ3RoID09PSAxID9cbiAgICAgICAgICAgICdvdXRwdXRDb29yZHMnIDpcbiAgICAgICAgICAgICdvdXRwdXRDb29yZHNbMF0nfSAqIHVuaWZvcm1zLnJlZHVjZVNpemU7XG4gICAgICAgICAgcmV0dXJuIG9mZnNldDtcbiAgICAgICB9XG4gICAgICAgJHttYWluKCdpbmRleCcpfSB7XG4gICAgICAgICBsZXQgb3V0cHV0SW5kZXggPSBpbmRleCAvICR7d29ya2dyb3VwU2l6ZVh9O1xuICAgICAgICAgbGV0IG9mZnNldCA9IGdldE9mZnNldChvdXRwdXRJbmRleCk7XG4gICAgICAgICB2YXIgYmVzdFZhbHVlID0gJHtpbml0VmFsdWV9O1xuICAgICAgICAgbGV0IExlbmd0aCA9IHVuaWZvcm1zLnJlZHVjZVNpemU7XG4gICAgICAgICBsZXQgV29ya1BlclRocmVhZCA9IERJVl9DRUlMKHUzMihMZW5ndGgpLCAke3dvcmtncm91cFNpemVYfXUpO1xuICAgICAgICAgZm9yICh2YXIgayA9IGkzMihsb2NhbElkLngpOyBrIDwgTGVuZ3RoICYmIG91dHB1dEluZGV4IDwgdW5pZm9ybXMuc2l6ZTtcbiAgICAgICAgICAgICBrID0gayArICR7d29ya2dyb3VwU2l6ZVh9KSB7XG4gICAgICAgICAgIGxldCBjYW5kaWRhdGUgPSBmMzIoeFtvZmZzZXQgKyBrXSk7XG4gICAgICAgICAgICR7cmVkdWNlT3B9XG4gICAgICAgICB9XG4gICAgICAgICB4QmVzdFZhbHVlc1tsb2NhbElkLnhdID0gYmVzdFZhbHVlO1xuICAgICAgICAgd29ya2dyb3VwQmFycmllcigpO1xuXG4gICAgICAgICB2YXIgcmVkdWNlU2l6ZSA9IG1pbih1MzIoTGVuZ3RoKSwgJHt3b3JrZ3JvdXBTaXplWH11KTtcbiAgICAgICAgIGZvciAodmFyIGN1cnJlbnRTaXplID0gcmVkdWNlU2l6ZSAvIDJ1OyByZWR1Y2VTaXplID4gMXU7XG4gICAgICAgICAgICAgY3VycmVudFNpemUgPSByZWR1Y2VTaXplIC8gMnUpIHtcbiAgICAgICAgICAgbGV0IGludGVydmFsID0gRElWX0NFSUwocmVkdWNlU2l6ZSwgMnUpO1xuICAgICAgICAgICBpZiAobG9jYWxJZC54IDwgY3VycmVudFNpemUpIHtcbiAgICAgICAgICAgIGxldCBjYW5kaWRhdGUgPSB4QmVzdFZhbHVlc1tsb2NhbElkLnggKyBpbnRlcnZhbF07XG4gICAgICAgICAgICAke3JlZHVjZU9wfVxuICAgICAgICAgICAgeEJlc3RWYWx1ZXNbbG9jYWxJZC54XSA9IGJlc3RWYWx1ZTtcbiAgICAgICAgICAgfVxuICAgICAgICAgICByZWR1Y2VTaXplID0gaW50ZXJ2YWw7XG4gICAgICAgICAgIHdvcmtncm91cEJhcnJpZXIoKTtcbiAgICAgICAgIH1cblxuICAgICAgICAgaWYgKGxvY2FsSWQueCA9PSAwdSAmJiBvdXRwdXRJbmRleCA8IHVuaWZvcm1zLnNpemUpIHtcbiAgICAgICAgICAke291dHB1dFNuaXBwZXR9XG4gICAgICAgIH1cbiAgICAgICB9XG4gICAgIGA7XG4gICAgcmV0dXJuIHVzZXJDb2RlO1xuICB9XG59XG4iXX0=","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { backend_util, sumOutType, util } from '@tensorflow/tfjs-core';\nimport { reshape } from '../kernels/Reshape';\nimport { transpose } from '../kernels/Transpose';\nimport { ReduceProgram } from '../reduce_webgpu';\nimport { maxImplCPU } from './shared';\nimport { prodImplCPU } from './shared';\nconst RETURN_TYPES = {\n    'mean': 'float32',\n    'all': 'bool',\n    'any': 'bool',\n};\nexport function reduce(x, axis, keepDims, reduceType, backend) {\n    const xRank = x.shape.length;\n    const toDispose = [];\n    const origAxes = util.parseAxisParam(axis, x.shape);\n    let axes = origAxes;\n    const permutedAxes = backend_util.getAxesPermutation(axes, xRank);\n    let input = x;\n    if (permutedAxes != null) {\n        input = transpose({ inputs: { x }, attrs: { perm: permutedAxes }, backend });\n        axes = backend_util.getInnerMostAxes(axes.length, xRank);\n        toDispose.push(input);\n    }\n    backend_util.assertAxesAreInnerMostDims(reduceType, axes, xRank);\n    const [reduceOutShape, reduceShape] = backend_util.computeOutAndReduceShapes(input.shape, axes);\n    let resOutShape = reduceOutShape;\n    if (keepDims) {\n        // rather than reshape at the end, set the target shape here.\n        resOutShape = backend_util.expandShapeToKeepDim(reduceOutShape, origAxes);\n    }\n    let res;\n    if ((reduceType === 'max' || reduceType === 'prod') &&\n        backend.shouldExecuteOnCPU([input])) {\n        const xVals = backend.tensorMap.get(input.dataId).values;\n        switch (reduceType) {\n            case 'max':\n                const outValues = maxImplCPU(xVals, util.sizeFromShape(reduceShape), resOutShape, x.dtype);\n                res = backend.makeTensorInfo(resOutShape, x.dtype, outValues);\n                break;\n            case 'prod':\n                const { outVals, outShape, outDtype } = prodImplCPU(input.shape, input.dtype, xVals, axes);\n                res = backend.makeTensorInfo(outShape, outDtype, outVals);\n                break;\n            default:\n                throw new Error(`${reduceType} CPU implementation is not yet supported.`);\n        }\n    }\n    else {\n        const inSize = util.sizeFromShape(reduceShape);\n        const xSize = util.sizeFromShape(input.shape);\n        const batchSize = xSize / inSize;\n        const reduceInfo = { windowSize: inSize, inSize, batchSize, outSize: 1 };\n        const dtype = RETURN_TYPES[reduceType] || sumOutType(x.dtype);\n        const uniformData = [\n            { type: 'int32', data: [inSize] },\n        ];\n        const program = new ReduceProgram(reduceInfo, reduceType, backend.device.limits.maxComputeWorkgroupSizeX);\n        const reduced = backend.runWebGPUProgram(program, [input], dtype, uniformData);\n        toDispose.push(reduced);\n        res = reshape({ inputs: { x: reduced }, attrs: { shape: resOutShape }, backend });\n    }\n    toDispose.forEach(t => backend.disposeData(t.dataId));\n    return res;\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVkdWNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMva2VybmVsX3V0aWxzL3JlZHVjZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQUMsWUFBWSxFQUFZLFVBQVUsRUFBMEIsSUFBSSxFQUFDLE1BQU0sdUJBQXVCLENBQUM7QUFHdkcsT0FBTyxFQUFDLE9BQU8sRUFBQyxNQUFNLG9CQUFvQixDQUFDO0FBQzNDLE9BQU8sRUFBQyxTQUFTLEVBQUMsTUFBTSxzQkFBc0IsQ0FBQztBQUMvQyxPQUFPLEVBQUMsYUFBYSxFQUFDLE1BQU0sa0JBQWtCLENBQUM7QUFFL0MsT0FBTyxFQUFDLFVBQVUsRUFBQyxNQUFNLFVBQVUsQ0FBQztBQUNwQyxPQUFPLEVBQUMsV0FBVyxFQUFDLE1BQU0sVUFBVSxDQUFDO0FBR3JDLE1BQU0sWUFBWSxHQUFzQztJQUN0RCxNQUFNLEVBQUUsU0FBUztJQUNqQixLQUFLLEVBQUUsTUFBTTtJQUNiLEtBQUssRUFBRSxNQUFNO0NBQ2QsQ0FBQztBQUVGLE1BQU0sVUFBVSxNQUFNLENBQ2xCLENBQWEsRUFBRSxJQUFxQixFQUFFLFFBQWlCLEVBQ3ZELFVBQXVCLEVBQUUsT0FBc0I7SUFDakQsTUFBTSxLQUFLLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUM7SUFDN0IsTUFBTSxTQUFTLEdBQUcsRUFBRSxDQUFDO0lBRXJCLE1BQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUNwRCxJQUFJLElBQUksR0FBRyxRQUFRLENBQUM7SUFDcEIsTUFBTSxZQUFZLEdBQUcsWUFBWSxDQUFDLGtCQUFrQixDQUFDLElBQUksRUFBRSxLQUFLLENBQUMsQ0FBQztJQUVsRSxJQUFJLEtBQUssR0FBRyxDQUFD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RSxVQUFVLEVBQUUsT0FBTyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsd0JBQXdCLENBQUMsQ0FBQztRQUM1RSxNQUFNLE9BQU8sR0FDVCxPQUFPLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLENBQUMsS0FBSyxDQUFDLEVBQUUsS0FBSyxFQUFFLFdBQVcsQ0FBQyxDQUFDO1FBQ25FLFNBQVMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7UUFFeEIsR0FBRyxHQUFHLE9BQU8sQ0FBQyxFQUFDLE1BQU0sRUFBRSxFQUFDLENBQUMsRUFBRSxPQUFPLEVBQUMsRUFBRSxLQUFLLEVBQUUsRUFBQyxLQUFLLEVBQUUsV0FBVyxFQUFDLEVBQUUsT0FBTyxFQUFDLENBQUMsQ0FBQztLQUM3RTtJQUVELFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO0lBRXRELE9BQU8sR0FBRyxDQUFDO0FBQ2IsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtiYWNrZW5kX3V0aWwsIERhdGFUeXBlLCBzdW1PdXRUeXBlLCBUZW5zb3JJbmZvLCBUeXBlZEFycmF5LCB1dGlsfSBmcm9tICdAdGVuc29yZmxvdy90ZmpzLWNvcmUnO1xuXG5pbXBvcnQge1dlYkdQVUJhY2tlbmR9IGZyb20gJy4uL2JhY2tlbmRfd2ViZ3B1JztcbmltcG9ydCB7cmVzaGFwZX0gZnJvbSAnLi4va2VybmVscy9SZXNoYXBlJztcbmltcG9ydCB7dHJhbnNwb3NlfSBmcm9tICcuLi9rZXJuZWxzL1RyYW5zcG9zZSc7XG5pbXBvcnQge1JlZHVjZVByb2dyYW19IGZyb20gJy4uL3JlZHVjZV93ZWJncHUnO1xuXG5pbXBvcnQge21heEltcGxDUFV9IGZyb20gJy4vc2hhcmVkJztcbmltcG9ydCB7cHJvZEltcGxDUFV9IGZyb20gJy4vc2hhcmVkJztcblxudHlwZSBSZWR1Y2VUeXBlcyA9ICdhbGwnfCdhbnknfCdtYXgnfCdtZWFuJ3wnbWluJ3wncHJvZCd8J3N1bSc7XG5jb25zdCBSRVRVUk5fVFlQRVM6IHtba2V5IGluIFJlZHVjZVR5cGVzXT86IERhdGFUeXBlfSA9IHtcbiAgJ21lYW4nOiAnZmxvYXQzMicsXG4gICdhbGwnOiAnYm9vbCcsXG4gICdhbnknOiAnYm9vbCcsXG59O1xuXG5leHBvcnQgZnVuY3Rpb24gcmVkdWNlKFxuICAgIHg6IFRlbnNvckluZm8sIGF4aXM6IG51bWJlcnxudW1iZXJbXSwga2VlcERpbXM6IGJvb2xlYW4sXG4gICAgcmVkdWNlVHlwZTogUmVkdWNlVHlwZXMsIGJhY2tlbmQ6IFdlYkdQVUJhY2tlbmQpOiBUZW5zb3JJbmZvIHtcbiAgY29uc3QgeFJhbmsgPSB4LnNoYXBlLmxlbmd0aDtcbiAgY29uc3QgdG9EaXNwb3NlID0gW107XG5cbiAgY29uc3Qgb3JpZ0F4ZXMgPSB1dGlsLnBhcnNlQXhpc1BhcmFtKGF4aXMsIHguc2hhcGUpO1xuICBsZXQgYXhlcyA9IG9yaWdBeGVzO1xuICBjb25zdCBwZXJtdXRlZEF4ZXMgPSBiYWNrZW5kX3V0aWwuZ2V0QXhlc1Blcm11dGF0aW9uKGF4ZXMsIHhSYW5rKTtcblxuICBsZXQgaW5wdXQgPSB4O1xuICBpZiAocGVybXV0ZWRBeGVzICE9IG51bGwpIHtcbiAgICBpbnB1dCA9IHRyYW5zcG9zZSh7aW5wdXRzOiB7eH0sIGF0dHJzOiB7cGVybTogcGVybXV0ZWRBeGVzfSwgYmFja2VuZH0pO1xuICAgIGF4ZXMgPSBiYWNrZW5kX3V0aWwuZ2V0SW5uZXJNb3N0QXhlcyhheGVzLmxlbmd0aCwgeFJhbmspO1xuICAgIHRvRGlzcG9zZS5wdXNoKGlucHV0KTtcbiAgfVxuXG4gIGJhY2tlbmRfdXRpbC5hc3NlcnRBeGVzQXJlSW5uZXJNb3N0RGltcyhyZWR1Y2VUeXBlLCBheGVzLCB4UmFuayk7XG5cbiAgY29uc3QgW3JlZHVjZU91dFNoYXBlLCByZWR1Y2VTaGFwZV0gPVxuICAgICAgYmFja2VuZF91dGlsLmNvbXB1dGVPdXRBbmRSZWR1Y2VTaGFwZXMoaW5wdXQuc2hhcGUsIGF4ZXMpO1xuICBsZXQgcmVzT3V0U2hhcGUgPSByZWR1Y2VPdXRTaGFwZTtcbiAgaWYgKGtlZXBEaW1zKSB7XG4gICAgLy8gcmF0aGVyIHRoYW4gcmVzaGFwZSBhdCB0aGUgZW5kLCBzZXQgdGhlIHRhcmdldCBzaGFwZSBoZXJlLlxuICAgIHJlc091dFNoYXBlID0gYmFja2VuZF91dGlsLmV4cGFuZFNoYXBlVG9LZWVwRGltKHJlZHVjZU91dFNoYXBlLCBvcmlnQXhlcyk7XG4gIH1cblxuICBsZXQgcmVzO1xuICBpZiAoKHJlZHVjZVR5cGUgPT09ICdtYXgnIHx8IHJlZHVjZVR5cGUgPT09ICdwcm9kJykgJiZcbiAgICAgIGJhY2tlbmQuc2hvdWxkRXhlY3V0ZU9uQ1BVKFtpbnB1dF0pKSB7XG4gICAgY29uc3QgeFZhbHMgPSBiYWNrZW5kLnRlbnNvck1hcC5nZXQoaW5wdXQuZGF0YUlkKS52YWx1ZXMgYXMgVHlwZWRBcnJheTtcbiAgICBzd2l0Y2ggKHJlZHVjZVR5cGUpIHtcbiAgICAgIGNhc2UgJ21heCc6XG4gICAgICAgIGNvbnN0IG91dFZhbHVlcyA9IG1heEltcGxDUFUoXG4gICAgICAgICAgICB4VmFscywgdXRpbC5zaXplRnJvbVNoYXBlKHJlZHVjZVNoYXBlKSwgcmVzT3V0U2hhcGUsIHguZHR5cGUpO1xuICAgICAgICByZXMgPSBiYWNrZW5kLm1ha2VUZW5zb3JJbmZvKHJlc091dFNoYXBlLCB4LmR0eXBlLCBvdXRWYWx1ZXMpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3Byb2QnOlxuICAgICAgICBjb25zdCB7b3V0VmFscywgb3V0U2hhcGUsIG91dER0eXBlfSA9XG4gICAgICAgICAgICBwcm9kSW1wbENQVShpbnB1dC5zaGFwZSwgaW5wdXQuZHR5cGUsIHhWYWxzLCBheGVzKTtcbiAgICAgICAgcmVzID0gYmFja2VuZC5tYWtlVGVuc29ySW5mbyhvdXRTaGFwZSwgb3V0RHR5cGUsIG91dFZhbHMpO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgIGAke3JlZHVjZVR5cGV9IENQVSBpbXBsZW1lbnRhdGlvbiBpcyBub3QgeWV0IHN1cHBvcnRlZC5gKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgaW5TaXplID0gdXRpbC5zaXplRnJvbVNoYXBlKHJlZHVjZVNoYXBlKTtcbiAgICBjb25zdCB4U2l6ZSA9IHV0aWwuc2l6ZUZyb21TaGFwZShpbnB1dC5zaGFwZSk7XG4gICAgY29uc3QgYmF0Y2hTaXplID0geFNpemUgLyBpblNpemU7XG5cbiAgICBjb25zdCByZWR1Y2VJbmZvID0ge3dpbmRvd1NpemU6IGluU2l6ZSwgaW5TaXplLCBiYXRjaFNpemUsIG91dFNpemU6IDF9O1xuICAgIGNvbnN0IGR0eXBlID0gUkVUVVJOX1RZUEVTW3JlZHVjZVR5cGVdIHx8IHN1bU91dFR5cGUoeC5kdHlwZSk7XG4gICAgY29uc3QgdW5pZm9ybURhdGEgPSBbXG4gICAgICB7dHlwZTogJ2ludDMyJywgZGF0YTogW2luU2l6ZV19LFxuICAgIF07XG4gICAgY29uc3QgcHJvZ3JhbSA9IG5ldyBSZWR1Y2VQcm9ncmFtKFxuICAgICAgICByZWR1Y2VJbmZvLCByZWR1Y2VUeXBlLCBiYWNrZW5kLmRldmljZS5saW1pdHMubWF4Q29tcHV0ZVdvcmtncm91cFNpemVYKTtcbiAgICBjb25zdCByZWR1Y2VkID1cbiAgICAgICAgYmFja2VuZC5ydW5XZWJHUFVQcm9ncmFtKHByb2dyYW0sIFtpbnB1dF0sIGR0eXBlLCB1bmlmb3JtRGF0YSk7XG4gICAgdG9EaXNwb3NlLnB1c2gocmVkdWNlZCk7XG5cbiAgICByZXMgPSByZXNoYXBlKHtpbnB1dHM6IHt4OiByZWR1Y2VkfSwgYXR0cnM6IHtzaGFwZTogcmVzT3V0U2hhcGV9LCBiYWNrZW5kfSk7XG4gIH1cblxuICB0b0Rpc3Bvc2UuZm9yRWFjaCh0ID0+IGJhY2tlbmQuZGlzcG9zZURhdGEodC5kYXRhSWQpKTtcblxuICByZXR1cm4gcmVzO1xufVxuIl19","/**\n * @license\n * Copyright 2022 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { All } from '@tensorflow/tfjs-core';\nimport { reduce } from '../kernel_utils/reduce';\nexport function all(args) {\n    const { inputs, backend, attrs } = args;\n    const { x } = inputs;\n    const { keepDims, axis } = attrs;\n    return reduce(x, axis, keepDims, 'all', backend);\n}\nexport const allConfig = {\n    kernelName: All,\n    backendName: 'webgpu',\n    kernelFunc: all\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQWxsLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMva2VybmVscy9BbGwudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUFDLEdBQUcsRUFBNEQsTUFBTSx1QkFBdUIsQ0FBQztBQUdyRyxPQUFPLEVBQUMsTUFBTSxFQUFDLE1BQU0sd0JBQXdCLENBQUM7QUFFOUMsTUFBTSxVQUFVLEdBQUcsQ0FDZixJQUFrRTtJQUVwRSxNQUFNLEVBQUMsTUFBTSxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUMsR0FBRyxJQUFJLENBQUM7SUFDdEMsTUFBTSxFQUFDLENBQUMsRUFBQyxHQUFHLE1BQU0sQ0FBQztJQUNuQixNQUFNLEVBQUMsUUFBUSxFQUFFLElBQUksRUFBQyxHQUFHLEtBQUssQ0FBQztJQUUvQixPQUFPLE1BQU0sQ0FBQyxDQUFDLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQUUsT0FBTyxDQUFDLENBQUM7QUFDbkQsQ0FBQztBQUVELE1BQU0sQ0FBQyxNQUFNLFNBQVMsR0FBaUI7SUFDckMsVUFBVSxFQUFFLEdBQUc7SUFDZixXQUFXLEVBQUUsUUFBUTtJQUNyQixVQUFVLEVBQUUsR0FBNEI7Q0FDekMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTEMuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtBbGwsIEFsbEF0dHJzLCBBbGxJbnB1dHMsIEtlcm5lbENvbmZpZywgS2VybmVsRnVuYywgVGVuc29ySW5mb30gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcblxuaW1wb3J0IHtXZWJHUFVCYWNrZW5kfSBmcm9tICcuLi9iYWNrZW5kX3dlYmdwdSc7XG5pbXBvcnQge3JlZHVjZX0gZnJvbSAnLi4va2VybmVsX3V0aWxzL3JlZHVjZSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBhbGwoXG4gICAgYXJnczoge2lucHV0czogQWxsSW5wdXRzLCBhdHRyczogQWxsQXR0cnMsIGJhY2tlbmQ6IFdlYkdQVUJhY2tlbmR9KTpcbiAgICBUZW5zb3JJbmZvIHtcbiAgY29uc3Qge2lucHV0cywgYmFja2VuZCwgYXR0cnN9ID0gYXJncztcbiAgY29uc3Qge3h9ID0gaW5wdXRzO1xuICBjb25zdCB7a2VlcERpbXMsIGF4aXN9ID0gYXR0cnM7XG5cbiAgcmV0dXJuIHJlZHVjZSh4LCBheGlzLCBrZWVwRGltcywgJ2FsbCcsIGJhY2tlbmQpO1xufVxuXG5leHBvcnQgY29uc3QgYWxsQ29uZmlnOiBLZXJuZWxDb25maWcgPSB7XG4gIGtlcm5lbE5hbWU6IEFsbCxcbiAgYmFja2VuZE5hbWU6ICd3ZWJncHUnLFxuICBrZXJuZWxGdW5jOiBhbGwgYXMgdW5rbm93biBhcyBLZXJuZWxGdW5jXG59O1xuIl19","/**\n * @license\n * Copyright 2022 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Any } from '@tensorflow/tfjs-core';\nimport { reduce } from '../kernel_utils/reduce';\nexport function any(args) {\n    const { inputs, backend, attrs } = args;\n    const { x } = inputs;\n    const { keepDims, axis } = attrs;\n    return reduce(x, axis, keepDims, 'any', backend);\n}\nexport const anyConfig = {\n    kernelName: Any,\n    backendName: 'webgpu',\n    kernelFunc: any\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQW55LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMva2VybmVscy9BbnkudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUFDLEdBQUcsRUFBNEQsTUFBTSx1QkFBdUIsQ0FBQztBQUdyRyxPQUFPLEVBQUMsTUFBTSxFQUFDLE1BQU0sd0JBQXdCLENBQUM7QUFFOUMsTUFBTSxVQUFVLEdBQUcsQ0FDZixJQUFrRTtJQUVwRSxNQUFNLEVBQUMsTUFBTSxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUMsR0FBRyxJQUFJLENBQUM7SUFDdEMsTUFBTSxFQUFDLENBQUMsRUFBQyxHQUFHLE1BQU0sQ0FBQztJQUNuQixNQUFNLEVBQUMsUUFBUSxFQUFFLElBQUksRUFBQyxHQUFHLEtBQUssQ0FBQztJQUUvQixPQUFPLE1BQU0sQ0FBQyxDQUFDLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQUUsT0FBTyxDQUFDLENBQUM7QUFDbkQsQ0FBQztBQUVELE1BQU0sQ0FBQyxNQUFNLFNBQVMsR0FBaUI7SUFDckMsVUFBVSxFQUFFLEdBQUc7SUFDZixXQUFXLEVBQUUsUUFBUTtJQUNyQixVQUFVLEVBQUUsR0FBNEI7Q0FDekMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTEMuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtBbnksIEFueUF0dHJzLCBBbnlJbnB1dHMsIEtlcm5lbENvbmZpZywgS2VybmVsRnVuYywgVGVuc29ySW5mb30gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcblxuaW1wb3J0IHtXZWJHUFVCYWNrZW5kfSBmcm9tICcuLi9iYWNrZW5kX3dlYmdwdSc7XG5pbXBvcnQge3JlZHVjZX0gZnJvbSAnLi4va2VybmVsX3V0aWxzL3JlZHVjZSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBhbnkoXG4gICAgYXJnczoge2lucHV0czogQW55SW5wdXRzLCBhdHRyczogQW55QXR0cnMsIGJhY2tlbmQ6IFdlYkdQVUJhY2tlbmR9KTpcbiAgICBUZW5zb3JJbmZvIHtcbiAgY29uc3Qge2lucHV0cywgYmFja2VuZCwgYXR0cnN9ID0gYXJncztcbiAgY29uc3Qge3h9ID0gaW5wdXRzO1xuICBjb25zdCB7a2VlcERpbXMsIGF4aXN9ID0gYXR0cnM7XG5cbiAgcmV0dXJuIHJlZHVjZSh4LCBheGlzLCBrZWVwRGltcywgJ2FueScsIGJhY2tlbmQpO1xufVxuXG5leHBvcnQgY29uc3QgYW55Q29uZmlnOiBLZXJuZWxDb25maWcgPSB7XG4gIGtlcm5lbE5hbWU6IEFueSxcbiAgYmFja2VuZE5hbWU6ICd3ZWJncHUnLFxuICBrZXJuZWxGdW5jOiBhbnkgYXMgdW5rbm93biBhcyBLZXJuZWxGdW5jXG59O1xuIl19","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { backend_util, util } from '@tensorflow/tfjs-core';\nimport { getCoordsXYZ, getMainHeaderString as main } from './webgpu_program';\nimport { computeDispatch, flatDispatchLayout } from './webgpu_util';\nexport class ArgMinMaxProgram {\n    constructor(inputShape, axis, reduceType) {\n        this.workgroupSize = [64, 1, 1];\n        this.variableNames = ['x'];\n        this.uniforms = 'infinityValue : f32,';\n        this.size = true;\n        const axes = [axis];\n        this.op = reduceType === 'min' ? '<' : '>';\n        // |outShape| is the shape with the removed axis\n        const [outputShape, reduceShape] = backend_util.computeOutAndReduceShapes(inputShape, axes);\n        this.outputShape = outputShape.length === 0 ? [1] : outputShape;\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        // The shared algorithm is mainly used for large reduce size. It fully\n        // utilizes the threads in one workgroup to do the reduction. However,\n        // when the reduce size is very small, it's better to use the plain\n        // algorithm to reduce the number of workgroups to speedup. The threthold\n        // can be further tuned.\n        if (util.sizeFromShape(reduceShape) < 32) {\n            this.type = 'plain';\n            this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize);\n        }\n        else {\n            this.type = 'shared';\n            // A work group only outputs a data, so we transfer [1, 1, 1] to compute\n            // dispatch size.\n            this.dispatch =\n                computeDispatch(this.dispatchLayout, this.outputShape, [1, 1, 1]);\n        }\n        this.inputShape = inputShape;\n        this.shaderKey = `argMinMax_${this.op}_${this.type}`;\n    }\n    getUserCode() {\n        const workgroupSizeX = this.workgroupSize[0];\n        const getInputShapeLastDim = () => {\n            if (this.inputShape.length === 1) {\n                return 'uniforms.xShape';\n            }\n            else {\n                return `uniforms.xShape.${getCoordsXYZ(this.inputShape.length - 1)}`;\n            }\n        };\n        const splitOutputCoords = () => {\n            let snippet = '';\n            if (this.outputShape.length === 1) {\n                if (this.inputShape.length !== 1) {\n                    snippet += 'outputCoords,';\n                }\n            }\n            else {\n                for (let i = 0; i < this.outputShape.length; i++) {\n                    snippet += `outputCoords.${getCoordsXYZ(i)},`;\n                }\n            }\n            return snippet;\n        };\n        if (this.type === 'shared') {\n            const sharedMemorySnippet = `\n      var<workgroup> xBestIndices : array<i32, ${workgroupSizeX}>;\n      var<workgroup> xBestValues : array<f32, ${workgroupSizeX}>;\n    `;\n            const userCode = `\n      fn DIV_CEIL(a : u32, b : u32) -> u32 {\n        return ((a - 1u) / b + 1u);\n      }\n\n      ${sharedMemorySnippet}\n\n      ${main('index')} {\n        let outputIndex = index / ${workgroupSizeX};\n        let reduceLength = ${getInputShapeLastDim()};\n\n        var bestIndex = i32(localId.x);\n        var bestValue = uniforms.infinityValue;\n        let outputCoords = getCoordsFromIndex(outputIndex);\n        for (var k = i32(localId.x); k < reduceLength && outputIndex < uniforms.size;\n            k = k + ${workgroupSizeX}) {\n          let candidate = getX(${splitOutputCoords()} k);\n          if (!isnan(candidate) && candidate ${this.op} bestValue) {\n            bestValue = candidate;\n            bestIndex = k;\n          }\n        }\n        xBestValues[localId.x] = bestValue;\n        xBestIndices[localId.x] = bestIndex;\n        workgroupBarrier();\n\n        var reduceSize = min(u32(reduceLength), ${workgroupSizeX}u);\n        for (var currentSize = reduceSize / 2u; reduceSize > 1u;\n            currentSize = reduceSize / 2u) {\n          let interval = DIV_CEIL(reduceSize, 2u);\n          if (localId.x < currentSize) {\n            let candidate = xBestValues[localId.x + interval];\n            if (candidate ${this.op} bestValue) {\n              bestValue = candidate;\n              xBestValues[localId.x] = bestValue;\n              xBestIndices[localId.x] = xBestIndices[localId.x + interval];\n            }\n          }\n          reduceSize = interval;\n          workgroupBarrier();\n        }\n\n        if (localId.x == 0u && outputIndex < uniforms.size) {\n          setOutputAtIndexI32(outputIndex, xBestIndices[localId.x]);\n        }\n      }\n    `;\n            return userCode;\n        }\n        else {\n            const userCode = `\n      ${main('index')} {\n        if (index < uniforms.size) {\n          let outputCoords = getCoordsFromIndex(index);\n          var bestIndex = 0;\n          var bestValue = getX(${splitOutputCoords()} 0);\n          let reduceLength = ${getInputShapeLastDim()};\n          for (var i = 1; i < reduceLength; i++) {\n            let candidate = getX(${splitOutputCoords()} i);\n            if (candidate ${this.op} bestValue) {\n              bestValue = candidate;\n              bestIndex = i;\n            }\n          }\n          setOutputAtIndexI32(index, bestIndex);\n        }\n      }\n      `;\n            return userCode;\n        }\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXJnbWlubWF4X3dlYmdwdS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2FyZ21pbm1heF93ZWJncHUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUFDLFlBQVksRUFBRSxJQUFJLEVBQUMsTUFBTSx1QkFBdUIsQ0FBQztBQUN6RCxPQUFPLEVBQUMsWUFBWSxFQUFFLG1CQUFtQixJQUFJLElBQUksRUFBZ0IsTUFBTSxrQkFBa0IsQ0FBQztBQUMxRixPQUFPLEVBQUMsZUFBZSxFQUFFLGtCQUFrQixFQUFDLE1BQU0sZUFBZSxDQUFDO0FBRWxFLE1BQU0sT0FBTyxnQkFBZ0I7SUFjM0IsWUFBWSxVQUFvQixFQUFFLElBQVksRUFBRSxVQUF1QjtRQVR2RSxrQkFBYSxHQUE2QixDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDckQsa0JBQWEsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ3RCLGFBQVEsR0FBRyxzQkFBc0IsQ0FBQztRQUlsQyxTQUFJLEdBQUcsSUFBSSxDQUFDO1FBSVYsTUFBTSxJQUFJLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUVwQixJQUFJLENBQUMsRUFBRSxHQUFHLFVBQVUsS0FBSyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDO1FBRTNDLGdEQUFnRDtRQUNoRCxNQUFNLENBQUMsV0FBVyxFQUFFLFdBQVcsQ0FBQyxHQUM1QixZQUFZLENBQUMseUJBQXlCLENBQUMsVUFBVSxFQUFFLElBQUksQ0FBQyxDQUFDO1FBRTdELElBQUksQ0FBQyxXQUFXLEdBQUcsV0FBVyxDQUFDLE1BQU0sS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQztRQUNoRSxJ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Ozs7OztPQVE1QixDQUFDO1lBQ0YsT0FBTyxRQUFRLENBQUM7U0FDakI7SUFDSCxDQUFDO0NBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7YmFja2VuZF91dGlsLCB1dGlsfSBmcm9tICdAdGVuc29yZmxvdy90ZmpzLWNvcmUnO1xuaW1wb3J0IHtnZXRDb29yZHNYWVosIGdldE1haW5IZWFkZXJTdHJpbmcgYXMgbWFpbiwgV2ViR1BVUHJvZ3JhbX0gZnJvbSAnLi93ZWJncHVfcHJvZ3JhbSc7XG5pbXBvcnQge2NvbXB1dGVEaXNwYXRjaCwgZmxhdERpc3BhdGNoTGF5b3V0fSBmcm9tICcuL3dlYmdwdV91dGlsJztcblxuZXhwb3J0IGNsYXNzIEFyZ01pbk1heFByb2dyYW0gaW1wbGVtZW50cyBXZWJHUFVQcm9ncmFtIHtcbiAgb3V0cHV0U2hhcGU6IG51bWJlcltdO1xuICBzaGFkZXJLZXk6IHN0cmluZztcbiAgZGlzcGF0Y2hMYXlvdXQ6IHt4OiBudW1iZXJbXX07XG4gIGRpc3BhdGNoOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl07XG4gIHdvcmtncm91cFNpemU6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXSA9IFs2NCwgMSwgMV07XG4gIHZhcmlhYmxlTmFtZXMgPSBbJ3gnXTtcbiAgdW5pZm9ybXMgPSAnaW5maW5pdHlWYWx1ZSA6IGYzMiwnO1xuICBpbnB1dFNoYXBlOiBudW1iZXJbXTtcbiAgcmVkdWN0aW9uRmFjdG9yOiBudW1iZXI7XG4gIG9wOiBzdHJpbmc7XG4gIHNpemUgPSB0cnVlO1xuICBwcml2YXRlIHR5cGU6IHN0cmluZztcblxuICBjb25zdHJ1Y3RvcihpbnB1dFNoYXBlOiBudW1iZXJbXSwgYXhpczogbnVtYmVyLCByZWR1Y2VUeXBlOiAnbWluJ3wnbWF4Jykge1xuICAgIGNvbnN0IGF4ZXMgPSBbYXhpc107XG5cbiAgICB0aGlzLm9wID0gcmVkdWNlVHlwZSA9PT0gJ21pbicgPyAnPCcgOiAnPic7XG5cbiAgICAvLyB8b3V0U2hhcGV8IGlzIHRoZSBzaGFwZSB3aXRoIHRoZSByZW1vdmVkIGF4aXNcbiAgICBjb25zdCBbb3V0cHV0U2hhcGUsIHJlZHVjZVNoYXBlXSA9XG4gICAgICAgIGJhY2tlbmRfdXRpbC5jb21wdXRlT3V0QW5kUmVkdWNlU2hhcGVzKGlucHV0U2hhcGUsIGF4ZXMpO1xuXG4gICAgdGhpcy5vdXRwdXRTaGFwZSA9IG91dHB1dFNoYXBlLmxlbmd0aCA9PT0gMCA/IFsxXSA6IG91dHB1dFNoYXBlO1xuICAgIHRoaXMuZGlzcGF0Y2hMYXlvdXQgPSBmbGF0RGlzcGF0Y2hMYXlvdXQodGhpcy5vdXRwdXRTaGFwZSk7XG4gICAgLy8gVGhlIHNoYXJlZCBhbGdvcml0aG0gaXMgbWFpbmx5IHVzZWQgZm9yIGxhcmdlIHJlZHVjZSBzaXplLiBJdCBmdWxseVxuICAgIC8vIHV0aWxpemVzIHRoZSB0aHJlYWRzIGluIG9uZSB3b3JrZ3JvdXAgdG8gZG8gdGhlIHJlZHVjdGlvbi4gSG93ZXZlcixcbiAgICAvLyB3aGVuIHRoZSByZWR1Y2Ugc2l6ZSBpcyB2ZXJ5IHNtYWxsLCBpdCdzIGJldHRlciB0byB1c2UgdGhlIHBsYWluXG4gICAgLy8gYWxnb3JpdGhtIHRvIHJlZHVjZSB0aGUgbnVtYmVyIG9mIHdvcmtncm91cHMgdG8gc3BlZWR1cC4gVGhlIHRocmV0aG9sZFxuICAgIC8vIGNhbiBiZSBmdXJ0aGVyIHR1bmVkLlxuICAgIGlmICh1dGlsLnNpemVGcm9tU2hhcGUocmVkdWNlU2hhcGUpIDwgMzIpIHtcbiAgICAgIHRoaXMudHlwZSA9ICdwbGFpbic7XG4gICAgICB0aGlzLmRpc3BhdGNoID0gY29tcHV0ZURpc3BhdGNoKFxuICAgICAgICAgIHRoaXMuZGlzcGF0Y2hMYXlvdXQsIHRoaXMub3V0cHV0U2hhcGUsIHRoaXMud29ya2dyb3VwU2l6ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMudHlwZSA9ICdzaGFyZWQnO1xuICAgICAgLy8gQSB3b3JrIGdyb3VwIG9ubHkgb3V0cHV0cyBhIGRhdGEsIHNvIHdlIHRyYW5zZmVyIFsxLCAxLCAxXSB0byBjb21wdXRlXG4gICAgICAvLyBkaXNwYXRjaCBzaXplLlxuICAgICAgdGhpcy5kaXNwYXRjaCA9XG4gICAgICAgICAgY29tcHV0ZURpc3BhdGNoKHRoaXMuZGlzcGF0Y2hMYXlvdXQsIHRoaXMub3V0cHV0U2hhcGUsIFsxLCAxLCAxXSk7XG4gICAgfVxuXG4gICAgdGhpcy5pbnB1dFNoYXBlID0gaW5wdXRTaGFwZTtcbiAgICB0aGlzLnNoYWRlcktleSA9IGBhcmdNaW5NYXhfJHt0aGlzLm9wfV8ke3RoaXMudHlwZX1gO1xuICB9XG5cbiAgZ2V0VXNlckNvZGUoKTogc3RyaW5nIHtcbiAgICBjb25zdCB3b3JrZ3JvdXBTaXplWCA9IHRoaXMud29ya2dyb3VwU2l6ZVswXTtcbiAgICBjb25zdCBnZXRJbnB1dFNoYXBlTGFzdERpbSA9ICgpID0+IHtcbiAgICAgIGlmICh0aGlzLmlucHV0U2hhcGUubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIHJldHVybiAndW5pZm9ybXMueFNoYXBlJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBgdW5pZm9ybXMueFNoYXBlLiR7Z2V0Q29vcmRzWFlaKHRoaXMuaW5wdXRTaGFwZS5sZW5ndGggLSAxKX1gO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBjb25zdCBzcGxpdE91dHB1dENvb3JkcyA9ICgpID0+IHtcbiAgICAgIGxldCBzbmlwcGV0ID0gJyc7XG4gICAgICBpZiAodGhpcy5vdXRwdXRTaGFwZS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgaWYgKHRoaXMuaW5wdXRTaGFwZS5sZW5ndGggIT09IDEpIHtcbiAgICAgICAgICBzbmlwcGV0ICs9ICdvdXRwdXRDb29yZHMsJztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm91dHB1dFNoYXBlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgc25pcHBldCArPSBgb3V0cHV0Q29vcmRzLiR7Z2V0Q29vcmRzWFlaKGkpfSxgO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gc25pcHBldDtcbiAgICB9O1xuXG4gICAgaWYgKHRoaXMudHlwZSA9PT0gJ3NoYXJlZCcpIHtcbiAgICAgIGNvbnN0IHNoYXJlZE1lbW9yeVNuaXBwZXQgPSBgXG4gICAgICB2YXI8d29ya2dyb3VwPiB4QmVzdEluZGljZXMgOiBhcnJheTxpMzIsICR7d29ya2dyb3VwU2l6ZVh9PjtcbiAgICAgIHZhcjx3b3JrZ3JvdXA+IHhCZXN0VmFsdWVzIDogYXJyYXk8ZjMyLCAke3dvcmtncm91cFNpemVYfT47XG4gICAgYDtcbiAgICAgIGNvbnN0IHVzZXJDb2RlID0gYFxuICAgICAgZm4gRElWX0NFSUwoYSA6IHUzMiwgYiA6IHUzMikgLT4gdTMyIHtcbiAgICAgICAgcmV0dXJuICgoYSAtIDF1KSAvIGIgKyAxdSk7XG4gICAgICB9XG5cbiAgICAgICR7c2hhcmVkTWVtb3J5U25pcHBldH1cblxuICAgICAgJHttYWluKCdpbmRleCcpfSB7XG4gICAgICAgIGxldCBvdXRwdXRJbmRleCA9IGluZGV4IC8gJHt3b3JrZ3JvdXBTaXplWH07XG4gICAgICAgIGxldCByZWR1Y2VMZW5ndGggPSAke2dldElucHV0U2hhcGVMYXN0RGltKCl9O1xuXG4gICAgICAgIHZhciBiZXN0SW5kZXggPSBpMzIobG9jYWxJZC54KTtcbiAgICAgICAgdmFyIGJlc3RWYWx1ZSA9IHVuaWZvcm1zLmluZmluaXR5VmFsdWU7XG4gICAgICAgIGxldCBvdXRwdXRDb29yZHMgPSBnZXRDb29yZHNGcm9tSW5kZXgob3V0cHV0SW5kZXgpO1xuICAgICAgICBmb3IgKHZhciBrID0gaTMyKGxvY2FsSWQueCk7IGsgPCByZWR1Y2VMZW5ndGggJiYgb3V0cHV0SW5kZXggPCB1bmlmb3Jtcy5zaXplO1xuICAgICAgICAgICAgayA9IGsgKyAke3dvcmtncm91cFNpemVYfSkge1xuICAgICAgICAgIGxldCBjYW5kaWRhdGUgPSBnZXRYKCR7c3BsaXRPdXRwdXRDb29yZHMoKX0gayk7XG4gICAgICAgICAgaWYgKCFpc25hbihjYW5kaWRhdGUpICYmIGNhbmRpZGF0ZSAke3RoaXMub3B9IGJlc3RWYWx1ZSkge1xuICAgICAgICAgICAgYmVzdFZhbHVlID0gY2FuZGlkYXRlO1xuICAgICAgICAgICAgYmVzdEluZGV4ID0gaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgeEJlc3RWYWx1ZXNbbG9jYWxJZC54XSA9IGJlc3RWYWx1ZTtcbiAgICAgICAgeEJlc3RJbmRpY2VzW2xvY2FsSWQueF0gPSBiZXN0SW5kZXg7XG4gICAgICAgIHdvcmtncm91cEJhcnJpZXIoKTtcblxuICAgICAgICB2YXIgcmVkdWNlU2l6ZSA9IG1pbih1MzIocmVkdWNlTGVuZ3RoKSwgJHt3b3JrZ3JvdXBTaXplWH11KTtcbiAgICAgICAgZm9yICh2YXIgY3VycmVudFNpemUgPSByZWR1Y2VTaXplIC8gMnU7IHJlZHVjZVNpemUgPiAxdTtcbiAgICAgICAgICAgIGN1cnJlbnRTaXplID0gcmVkdWNlU2l6ZSAvIDJ1KSB7XG4gICAgICAgICAgbGV0IGludGVydmFsID0gRElWX0NFSUwocmVkdWNlU2l6ZSwgMnUpO1xuICAgICAgICAgIGlmIChsb2NhbElkLnggPCBjdXJyZW50U2l6ZSkge1xuICAgICAgICAgICAgbGV0IGNhbmRpZGF0ZSA9IHhCZXN0VmFsdWVzW2xvY2FsSWQueCArIGludGVydmFsXTtcbiAgICAgICAgICAgIGlmIChjYW5kaWRhdGUgJHt0aGlzLm9wfSBiZXN0VmFsdWUpIHtcbiAgICAgICAgICAgICAgYmVzdFZhbHVlID0gY2FuZGlkYXRlO1xuICAgICAgICAgICAgICB4QmVzdFZhbHVlc1tsb2NhbElkLnhdID0gYmVzdFZhbHVlO1xuICAgICAgICAgICAgICB4QmVzdEluZGljZXNbbG9jYWxJZC54XSA9IHhCZXN0SW5kaWNlc1tsb2NhbElkLnggKyBpbnRlcnZhbF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJlZHVjZVNpemUgPSBpbnRlcnZhbDtcbiAgICAgICAgICB3b3JrZ3JvdXBCYXJyaWVyKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobG9jYWxJZC54ID09IDB1ICYmIG91dHB1dEluZGV4IDwgdW5pZm9ybXMuc2l6ZSkge1xuICAgICAgICAgIHNldE91dHB1dEF0SW5kZXhJMzIob3V0cHV0SW5kZXgsIHhCZXN0SW5kaWNlc1tsb2NhbElkLnhdKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIGA7XG4gICAgICByZXR1cm4gdXNlckNvZGU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHVzZXJDb2RlID0gYFxuICAgICAgJHttYWluKCdpbmRleCcpfSB7XG4gICAgICAgIGlmIChpbmRleCA8IHVuaWZvcm1zLnNpemUpIHtcbiAgICAgICAgICBsZXQgb3V0cHV0Q29vcmRzID0gZ2V0Q29vcmRzRnJvbUluZGV4KGluZGV4KTtcbiAgICAgICAgICB2YXIgYmVzdEluZGV4ID0gMDtcbiAgICAgICAgICB2YXIgYmVzdFZhbHVlID0gZ2V0WCgke3NwbGl0T3V0cHV0Q29vcmRzKCl9IDApO1xuICAgICAgICAgIGxldCByZWR1Y2VMZW5ndGggPSAke2dldElucHV0U2hhcGVMYXN0RGltKCl9O1xuICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgcmVkdWNlTGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBjYW5kaWRhdGUgPSBnZXRYKCR7c3BsaXRPdXRwdXRDb29yZHMoKX0gaSk7XG4gICAgICAgICAgICBpZiAoY2FuZGlkYXRlICR7dGhpcy5vcH0gYmVzdFZhbHVlKSB7XG4gICAgICAgICAgICAgIGJlc3RWYWx1ZSA9IGNhbmRpZGF0ZTtcbiAgICAgICAgICAgICAgYmVzdEluZGV4ID0gaTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgc2V0T3V0cHV0QXRJbmRleEkzMihpbmRleCwgYmVzdEluZGV4KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYDtcbiAgICAgIHJldHVybiB1c2VyQ29kZTtcbiAgICB9XG4gIH1cbn1cbiJdfQ==","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { ArgMax, backend_util, util } from '@tensorflow/tfjs-core';\nimport { ArgMinMaxProgram } from '../argminmax_webgpu';\nimport { transpose } from './Transpose';\nexport function argMax(args) {\n    const { inputs, backend, attrs } = args;\n    const { x } = inputs;\n    const { axis } = attrs;\n    let axes = util.parseAxisParam(axis, x.shape);\n    const permutedAxes = backend_util.getAxesPermutation(axes, x.shape.length);\n    let $x = x;\n    const intermediateTensorInfos = [];\n    if (permutedAxes != null) {\n        $x = transpose({ inputs: { x }, backend, attrs: { perm: permutedAxes } });\n        intermediateTensorInfos.push($x);\n        axes = backend_util.getInnerMostAxes(axes.length, $x.shape.length);\n    }\n    backend_util.assertAxesAreInnerMostDims('argMax', [axes[0]], $x.shape.length);\n    const program = new ArgMinMaxProgram($x.shape, axes[0], 'max');\n    const uniformData = [{ type: 'float32', data: [Number.NEGATIVE_INFINITY] }];\n    const out = backend.runWebGPUProgram(program, [$x], 'int32', uniformData);\n    intermediateTensorInfos.forEach(t => backend.disposeData(t.dataId));\n    return out;\n}\nexport const argMaxConfig = {\n    kernelName: ArgMax,\n    backendName: 'webgpu',\n    kernelFunc: argMax\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQXJnTWF4LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMva2VybmVscy9BcmdNYXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUFDLE1BQU0sRUFBNkIsWUFBWSxFQUF3QyxJQUFJLEVBQUMsTUFBTSx1QkFBdUIsQ0FBQztBQUVsSSxPQUFPLEVBQUMsZ0JBQWdCLEVBQUMsTUFBTSxxQkFBcUIsQ0FBQztBQUdyRCxPQUFPLEVBQUMsU0FBUyxFQUFDLE1BQU0sYUFBYSxDQUFDO0FBRXRDLE1BQU0sVUFBVSxNQUFNLENBQ2xCLElBQXdFO0lBRTFFLE1BQU0sRUFBQyxNQUFNLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBQyxHQUFHLElBQUksQ0FBQztJQUN0QyxNQUFNLEVBQUMsQ0FBQyxFQUFDLEdBQUcsTUFBTSxDQUFDO0lBQ25CLE1BQU0sRUFBQyxJQUFJLEVBQUMsR0FBRyxLQUFLLENBQUM7SUFFckIsSUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQzlDLE1BQU0sWUFBWSxHQUFHLFlBQVksQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUMzRSxJQUFJLEVBQUUsR0FBRyxDQUFDLENBQUM7SUFDWCxNQUFNLHVCQUF1QixHQUFHLEVBQUUsQ0FBQztJQUNuQyxJQUFJLFlBQVksSUFBSSxJQUFJLEVBQUU7UUFDeEIsRUFBRSxHQUFHLFNBQVMsQ0FBQyxFQUFDLE1BQU0sRUFBRSxFQUFDLENBQUMsRUFBQyxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsRUFBQyxJQUFJLEVBQUUsWUFBWSxFQUFDLEVBQUMsQ0FBQyxDQUFDO1FBQ3BFLHVCQUF1QixDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUNqQyxJQUFJLEdBQUcsWUFBWSxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsRUFBRSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQztLQUNwRTtJQUVELFlBQVksQ0FBQywwQkFBMEIsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQzlFLE1BQU0sT0FBTyxHQUFHLElBQUksZ0JBQWdCLENBQUMsRUFBRSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUM7SUFDL0QsTUFBTSxXQUFXLEdBQUcsQ0FBQyxFQUFDLElBQUksRUFBRSxTQUFTLEVBQUUsSUFBSSxFQUFFLENBQUMsTUFBTSxDQUFDLGlCQUFpQixDQUFDLEVBQUMsQ0FBQyxDQUFDO0lBQzFFLE1BQU0sR0FBRyxHQUFHLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxPQUFPLEVBQUUsV0FBVyxDQUFDLENBQUM7SUFDMUUsdUJBQXVCLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztJQUNwRSxPQUFPLEdBQUcsQ0FBQztBQUNiLENBQUM7QUFFRCxNQUFNLENBQUMsTUFBTSxZQUFZLEdBQWlCO0lBQ3hDLFVBQVUsRUFBRSxNQUFNO0lBQ2xCLFdBQVcsRUFBRSxRQUFRO0lBQ3JCLFVBQVUsRUFBRSxNQUErQjtDQUM1QyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge0FyZ01heCwgQXJnTWF4QXR0cnMsIEFyZ01heElucHV0cywgYmFja2VuZF91dGlsLCBLZXJuZWxDb25maWcsIEtlcm5lbEZ1bmMsIFRlbnNvckluZm8sIHV0aWx9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7QXJnTWluTWF4UHJvZ3JhbX0gZnJvbSAnLi4vYXJnbWlubWF4X3dlYmdwdSc7XG5pbXBvcnQge1dlYkdQVUJhY2tlbmR9IGZyb20gJy4uL2JhY2tlbmRfd2ViZ3B1JztcblxuaW1wb3J0IHt0cmFuc3Bvc2V9IGZyb20gJy4vVHJhbnNwb3NlJztcblxuZXhwb3J0IGZ1bmN0aW9uIGFyZ01heChcbiAgICBhcmdzOiB7aW5wdXRzOiBBcmdNYXhJbnB1dHMsIGJhY2tlbmQ6IFdlYkdQVUJhY2tlbmQsIGF0dHJzOiBBcmdNYXhBdHRyc30pOlxuICAgIFRlbnNvckluZm8ge1xuICBjb25zdCB7aW5wdXRzLCBiYWNrZW5kLCBhdHRyc30gPSBhcmdzO1xuICBjb25zdCB7eH0gPSBpbnB1dHM7XG4gIGNvbnN0IHtheGlzfSA9IGF0dHJzO1xuXG4gIGxldCBheGVzID0gdXRpbC5wYXJzZUF4aXNQYXJhbShheGlzLCB4LnNoYXBlKTtcbiAgY29uc3QgcGVybXV0ZWRBeGVzID0gYmFja2VuZF91dGlsLmdldEF4ZXNQZXJtdXRhdGlvbihheGVzLCB4LnNoYXBlLmxlbmd0aCk7XG4gIGxldCAkeCA9IHg7XG4gIGNvbnN0IGludGVybWVkaWF0ZVRlbnNvckluZm9zID0gW107XG4gIGlmIChwZXJtdXRlZEF4ZXMgIT0gbnVsbCkge1xuICAgICR4ID0gdHJhbnNwb3NlKHtpbnB1dHM6IHt4fSwgYmFja2VuZCwgYXR0cnM6IHtwZXJtOiBwZXJtdXRlZEF4ZXN9fSk7XG4gICAgaW50ZXJtZWRpYXRlVGVuc29ySW5mb3MucHVzaCgkeCk7XG4gICAgYXhlcyA9IGJhY2tlbmRfdXRpbC5nZXRJbm5lck1vc3RBeGVzKGF4ZXMubGVuZ3RoLCAkeC5zaGFwZS5sZW5ndGgpO1xuICB9XG5cbiAgYmFja2VuZF91dGlsLmFzc2VydEF4ZXNBcmVJbm5lck1vc3REaW1zKCdhcmdNYXgnLCBbYXhlc1swXV0sICR4LnNoYXBlLmxlbmd0aCk7XG4gIGNvbnN0IHByb2dyYW0gPSBuZXcgQXJnTWluTWF4UHJvZ3JhbSgkeC5zaGFwZSwgYXhlc1swXSwgJ21heCcpO1xuICBjb25zdCB1bmlmb3JtRGF0YSA9IFt7dHlwZTogJ2Zsb2F0MzInLCBkYXRhOiBbTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZXX1dO1xuICBjb25zdCBvdXQgPSBiYWNrZW5kLnJ1bldlYkdQVVByb2dyYW0ocHJvZ3JhbSwgWyR4XSwgJ2ludDMyJywgdW5pZm9ybURhdGEpO1xuICBpbnRlcm1lZGlhdGVUZW5zb3JJbmZvcy5mb3JFYWNoKHQgPT4gYmFja2VuZC5kaXNwb3NlRGF0YSh0LmRhdGFJZCkpO1xuICByZXR1cm4gb3V0O1xufVxuXG5leHBvcnQgY29uc3QgYXJnTWF4Q29uZmlnOiBLZXJuZWxDb25maWcgPSB7XG4gIGtlcm5lbE5hbWU6IEFyZ01heCxcbiAgYmFja2VuZE5hbWU6ICd3ZWJncHUnLFxuICBrZXJuZWxGdW5jOiBhcmdNYXggYXMgdW5rbm93biBhcyBLZXJuZWxGdW5jXG59O1xuIl19","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { ArgMin, backend_util, util } from '@tensorflow/tfjs-core';\nimport { ArgMinMaxProgram } from '../argminmax_webgpu';\nimport { transpose } from './Transpose';\nexport function argMin(args) {\n    const { inputs, backend, attrs } = args;\n    const { x } = inputs;\n    const { axis } = attrs;\n    let axes = util.parseAxisParam(axis, x.shape);\n    const permutedAxes = backend_util.getAxesPermutation(axes, x.shape.length);\n    let $x = x;\n    const intermediateTensorInfos = [];\n    if (permutedAxes != null) {\n        $x = transpose({ inputs: { x }, backend, attrs: { perm: permutedAxes } });\n        intermediateTensorInfos.push($x);\n        axes = backend_util.getInnerMostAxes(axes.length, $x.shape.length);\n    }\n    backend_util.assertAxesAreInnerMostDims('argMin', [axes[0]], $x.shape.length);\n    const program = new ArgMinMaxProgram($x.shape, axes[0], 'min');\n    const uniformData = [{ type: 'float32', data: [Number.POSITIVE_INFINITY] }];\n    const out = backend.runWebGPUProgram(program, [$x], 'int32', uniformData);\n    intermediateTensorInfos.forEach(t => backend.disposeData(t.dataId));\n    return out;\n}\nexport const argMinConfig = {\n    kernelName: ArgMin,\n    backendName: 'webgpu',\n    kernelFunc: argMin\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQXJnTWluLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMva2VybmVscy9BcmdNaW4udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUFDLE1BQU0sRUFBNkIsWUFBWSxFQUF3QyxJQUFJLEVBQUMsTUFBTSx1QkFBdUIsQ0FBQztBQUVsSSxPQUFPLEVBQUMsZ0JBQWdCLEVBQUMsTUFBTSxxQkFBcUIsQ0FBQztBQUdyRCxPQUFPLEVBQUMsU0FBUyxFQUFDLE1BQU0sYUFBYSxDQUFDO0FBRXRDLE1BQU0sVUFBVSxNQUFNLENBQ2xCLElBQXdFO0lBRTFFLE1BQU0sRUFBQyxNQUFNLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBQyxHQUFHLElBQUksQ0FBQztJQUN0QyxNQUFNLEVBQUMsQ0FBQyxFQUFDLEdBQUcsTUFBTSxDQUFDO0lBQ25CLE1BQU0sRUFBQyxJQUFJLEVBQUMsR0FBRyxLQUFLLENBQUM7SUFFckIsSUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQzlDLE1BQU0sWUFBWSxHQUFHLFlBQVksQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUMzRSxJQUFJLEVBQUUsR0FBRyxDQUFDLENBQUM7SUFDWCxNQUFNLHVCQUF1QixHQUFHLEVBQUUsQ0FBQztJQUNuQyxJQUFJLFlBQVksSUFBSSxJQUFJLEVBQUU7UUFDeEIsRUFBRSxHQUFHLFNBQVMsQ0FBQyxFQUFDLE1BQU0sRUFBRSxFQUFDLENBQUMsRUFBQyxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsRUFBQyxJQUFJLEVBQUUsWUFBWSxFQUFDLEVBQUMsQ0FBQyxDQUFDO1FBQ3BFLHVCQUF1QixDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUNqQyxJQUFJLEdBQUcsWUFBWSxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsRUFBRSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQztLQUNwRTtJQUVELFlBQVksQ0FBQywwQkFBMEIsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQzlFLE1BQU0sT0FBTyxHQUFHLElBQUksZ0JBQWdCLENBQUMsRUFBRSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUM7SUFDL0QsTUFBTSxXQUFXLEdBQUcsQ0FBQyxFQUFDLElBQUksRUFBRSxTQUFTLEVBQUUsSUFBSSxFQUFFLENBQUMsTUFBTSxDQUFDLGlCQUFpQixDQUFDLEVBQUMsQ0FBQyxDQUFDO0lBQzFFLE1BQU0sR0FBRyxHQUFHLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxPQUFPLEVBQUUsV0FBVyxDQUFDLENBQUM7SUFDMUUsdUJBQXVCLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztJQUNwRSxPQUFPLEdBQUcsQ0FBQztBQUNiLENBQUM7QUFFRCxNQUFNLENBQUMsTUFBTSxZQUFZLEdBQWlCO0lBQ3hDLFVBQVUsRUFBRSxNQUFNO0lBQ2xCLFdBQVcsRUFBRSxRQUFRO0lBQ3JCLFVBQVUsRUFBRSxNQUErQjtDQUM1QyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge0FyZ01pbiwgQXJnTWluQXR0cnMsIEFyZ01pbklucHV0cywgYmFja2VuZF91dGlsLCBLZXJuZWxDb25maWcsIEtlcm5lbEZ1bmMsIFRlbnNvckluZm8sIHV0aWx9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7QXJnTWluTWF4UHJvZ3JhbX0gZnJvbSAnLi4vYXJnbWlubWF4X3dlYmdwdSc7XG5pbXBvcnQge1dlYkdQVUJhY2tlbmR9IGZyb20gJy4uL2JhY2tlbmRfd2ViZ3B1JztcblxuaW1wb3J0IHt0cmFuc3Bvc2V9IGZyb20gJy4vVHJhbnNwb3NlJztcblxuZXhwb3J0IGZ1bmN0aW9uIGFyZ01pbihcbiAgICBhcmdzOiB7aW5wdXRzOiBBcmdNaW5JbnB1dHMsIGJhY2tlbmQ6IFdlYkdQVUJhY2tlbmQsIGF0dHJzOiBBcmdNaW5BdHRyc30pOlxuICAgIFRlbnNvckluZm8ge1xuICBjb25zdCB7aW5wdXRzLCBiYWNrZW5kLCBhdHRyc30gPSBhcmdzO1xuICBjb25zdCB7eH0gPSBpbnB1dHM7XG4gIGNvbnN0IHtheGlzfSA9IGF0dHJzO1xuXG4gIGxldCBheGVzID0gdXRpbC5wYXJzZUF4aXNQYXJhbShheGlzLCB4LnNoYXBlKTtcbiAgY29uc3QgcGVybXV0ZWRBeGVzID0gYmFja2VuZF91dGlsLmdldEF4ZXNQZXJtdXRhdGlvbihheGVzLCB4LnNoYXBlLmxlbmd0aCk7XG4gIGxldCAkeCA9IHg7XG4gIGNvbnN0IGludGVybWVkaWF0ZVRlbnNvckluZm9zID0gW107XG4gIGlmIChwZXJtdXRlZEF4ZXMgIT0gbnVsbCkge1xuICAgICR4ID0gdHJhbnNwb3NlKHtpbnB1dHM6IHt4fSwgYmFja2VuZCwgYXR0cnM6IHtwZXJtOiBwZXJtdXRlZEF4ZXN9fSk7XG4gICAgaW50ZXJtZWRpYXRlVGVuc29ySW5mb3MucHVzaCgkeCk7XG4gICAgYXhlcyA9IGJhY2tlbmRfdXRpbC5nZXRJbm5lck1vc3RBeGVzKGF4ZXMubGVuZ3RoLCAkeC5zaGFwZS5sZW5ndGgpO1xuICB9XG5cbiAgYmFja2VuZF91dGlsLmFzc2VydEF4ZXNBcmVJbm5lck1vc3REaW1zKCdhcmdNaW4nLCBbYXhlc1swXV0sICR4LnNoYXBlLmxlbmd0aCk7XG4gIGNvbnN0IHByb2dyYW0gPSBuZXcgQXJnTWluTWF4UHJvZ3JhbSgkeC5zaGFwZSwgYXhlc1swXSwgJ21pbicpO1xuICBjb25zdCB1bmlmb3JtRGF0YSA9IFt7dHlwZTogJ2Zsb2F0MzInLCBkYXRhOiBbTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZXX1dO1xuICBjb25zdCBvdXQgPSBiYWNrZW5kLnJ1bldlYkdQVVByb2dyYW0ocHJvZ3JhbSwgWyR4XSwgJ2ludDMyJywgdW5pZm9ybURhdGEpO1xuICBpbnRlcm1lZGlhdGVUZW5zb3JJbmZvcy5mb3JFYWNoKHQgPT4gYmFja2VuZC5kaXNwb3NlRGF0YSh0LmRhdGFJZCkpO1xuICByZXR1cm4gb3V0O1xufVxuXG5leHBvcnQgY29uc3QgYXJnTWluQ29uZmlnOiBLZXJuZWxDb25maWcgPSB7XG4gIGtlcm5lbE5hbWU6IEFyZ01pbixcbiAgYmFja2VuZE5hbWU6ICd3ZWJncHUnLFxuICBrZXJuZWxGdW5jOiBhcmdNaW4gYXMgdW5rbm93biBhcyBLZXJuZWxGdW5jXG59O1xuIl19","/**\n * @license\n * Copyright 2022 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Asin } from '@tensorflow/tfjs-core';\nimport { unaryKernelFunc } from '../kernel_utils/kernel_funcs_utils';\nimport { UnaryOpType } from '../unary_op_util';\nexport const asin = unaryKernelFunc({ opType: UnaryOpType.ASIN });\nexport const asinConfig = {\n    kernelName: Asin,\n    backendName: 'webgpu',\n    kernelFunc: asin\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQXNpbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2tlcm5lbHMvQXNpbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQUMsSUFBSSxFQUFlLE1BQU0sdUJBQXVCLENBQUM7QUFFekQsT0FBTyxFQUFDLGVBQWUsRUFBQyxNQUFNLG9DQUFvQyxDQUFDO0FBRW5FLE9BQU8sRUFBQyxXQUFXLEVBQUMsTUFBTSxrQkFBa0IsQ0FBQztBQUU3QyxNQUFNLENBQUMsTUFBTSxJQUFJLEdBQUcsZUFBZSxDQUFDLEVBQUMsTUFBTSxFQUFFLFdBQVcsQ0FBQyxJQUFJLEVBQUMsQ0FBQyxDQUFDO0FBRWhFLE1BQU0sQ0FBQyxNQUFNLFVBQVUsR0FBaUI7SUFDdEMsVUFBVSxFQUFFLElBQUk7SUFDaEIsV0FBVyxFQUFFLFFBQVE7SUFDckIsVUFBVSxFQUFFLElBQUk7Q0FDakIsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTEMuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtBc2luLCBLZXJuZWxDb25maWd9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7dW5hcnlLZXJuZWxGdW5jfSBmcm9tICcuLi9rZXJuZWxfdXRpbHMva2VybmVsX2Z1bmNzX3V0aWxzJztcblxuaW1wb3J0IHtVbmFyeU9wVHlwZX0gZnJvbSAnLi4vdW5hcnlfb3BfdXRpbCc7XG5cbmV4cG9ydCBjb25zdCBhc2luID0gdW5hcnlLZXJuZWxGdW5jKHtvcFR5cGU6IFVuYXJ5T3BUeXBlLkFTSU59KTtcblxuZXhwb3J0IGNvbnN0IGFzaW5Db25maWc6IEtlcm5lbENvbmZpZyA9IHtcbiAga2VybmVsTmFtZTogQXNpbixcbiAgYmFja2VuZE5hbWU6ICd3ZWJncHUnLFxuICBrZXJuZWxGdW5jOiBhc2luXG59O1xuIl19","/**\n * @license\n * Copyright 2022 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Asinh } from '@tensorflow/tfjs-core';\nimport { unaryKernelFunc } from '../kernel_utils/kernel_funcs_utils';\nimport { UnaryOpType } from '../unary_op_util';\nexport const asinh = unaryKernelFunc({ opType: UnaryOpType.ASINH });\nexport const asinhConfig = {\n    kernelName: Asinh,\n    backendName: 'webgpu',\n    kernelFunc: asinh\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQXNpbmguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9rZXJuZWxzL0FzaW5oLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sRUFBQyxLQUFLLEVBQWUsTUFBTSx1QkFBdUIsQ0FBQztBQUUxRCxPQUFPLEVBQUMsZUFBZSxFQUFDLE1BQU0sb0NBQW9DLENBQUM7QUFFbkUsT0FBTyxFQUFDLFdBQVcsRUFBQyxNQUFNLGtCQUFrQixDQUFDO0FBRTdDLE1BQU0sQ0FBQyxNQUFNLEtBQUssR0FBRyxlQUFlLENBQUMsRUFBQyxNQUFNLEVBQUUsV0FBVyxDQUFDLEtBQUssRUFBQyxDQUFDLENBQUM7QUFFbEUsTUFBTSxDQUFDLE1BQU0sV0FBVyxHQUFpQjtJQUN2QyxVQUFVLEVBQUUsS0FBSztJQUNqQixXQUFXLEVBQUUsUUFBUTtJQUNyQixVQUFVLEVBQUUsS0FBSztDQUNsQixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQy5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge0FzaW5oLCBLZXJuZWxDb25maWd9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7dW5hcnlLZXJuZWxGdW5jfSBmcm9tICcuLi9rZXJuZWxfdXRpbHMva2VybmVsX2Z1bmNzX3V0aWxzJztcblxuaW1wb3J0IHtVbmFyeU9wVHlwZX0gZnJvbSAnLi4vdW5hcnlfb3BfdXRpbCc7XG5cbmV4cG9ydCBjb25zdCBhc2luaCA9IHVuYXJ5S2VybmVsRnVuYyh7b3BUeXBlOiBVbmFyeU9wVHlwZS5BU0lOSH0pO1xuXG5leHBvcnQgY29uc3QgYXNpbmhDb25maWc6IEtlcm5lbENvbmZpZyA9IHtcbiAga2VybmVsTmFtZTogQXNpbmgsXG4gIGJhY2tlbmROYW1lOiAnd2ViZ3B1JyxcbiAga2VybmVsRnVuYzogYXNpbmhcbn07XG4iXX0=","/**\n * @license\n * Copyright 2022 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Atan } from '@tensorflow/tfjs-core';\nimport { unaryKernelFunc } from '../kernel_utils/kernel_funcs_utils';\nimport { UnaryOpType } from '../unary_op_util';\nexport const atan = unaryKernelFunc({ opType: UnaryOpType.ATAN });\nexport const atanConfig = {\n    kernelName: Atan,\n    backendName: 'webgpu',\n    kernelFunc: atan\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQXRhbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2tlcm5lbHMvQXRhbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQUMsSUFBSSxFQUFlLE1BQU0sdUJBQXVCLENBQUM7QUFFekQsT0FBTyxFQUFDLGVBQWUsRUFBQyxNQUFNLG9DQUFvQyxDQUFDO0FBRW5FLE9BQU8sRUFBQyxXQUFXLEVBQUMsTUFBTSxrQkFBa0IsQ0FBQztBQUU3QyxNQUFNLENBQUMsTUFBTSxJQUFJLEdBQUcsZUFBZSxDQUFDLEVBQUMsTUFBTSxFQUFFLFdBQVcsQ0FBQyxJQUFJLEVBQUMsQ0FBQyxDQUFDO0FBRWhFLE1BQU0sQ0FBQyxNQUFNLFVBQVUsR0FBaUI7SUFDdEMsVUFBVSxFQUFFLElBQUk7SUFDaEIsV0FBVyxFQUFFLFFBQVE7SUFDckIsVUFBVSxFQUFFLElBQUk7Q0FDakIsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTEMuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtBdGFuLCBLZXJuZWxDb25maWd9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7dW5hcnlLZXJuZWxGdW5jfSBmcm9tICcuLi9rZXJuZWxfdXRpbHMva2VybmVsX2Z1bmNzX3V0aWxzJztcblxuaW1wb3J0IHtVbmFyeU9wVHlwZX0gZnJvbSAnLi4vdW5hcnlfb3BfdXRpbCc7XG5cbmV4cG9ydCBjb25zdCBhdGFuID0gdW5hcnlLZXJuZWxGdW5jKHtvcFR5cGU6IFVuYXJ5T3BUeXBlLkFUQU59KTtcblxuZXhwb3J0IGNvbnN0IGF0YW5Db25maWc6IEtlcm5lbENvbmZpZyA9IHtcbiAga2VybmVsTmFtZTogQXRhbixcbiAgYmFja2VuZE5hbWU6ICd3ZWJncHUnLFxuICBrZXJuZWxGdW5jOiBhdGFuXG59O1xuIl19","/**\n * @license\n * Copyright 2022 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Atan2 } from '@tensorflow/tfjs-core';\nimport { BinaryOpType } from '../binary_op_util';\nimport { binaryKernelFunc } from '../kernel_utils/kernel_funcs_utils';\nexport const atan2 = binaryKernelFunc({ opType: BinaryOpType.ATAN2 });\nexport const atan2Config = {\n    kernelName: Atan2,\n    backendName: 'webgpu',\n    kernelFunc: atan2\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQXRhbjIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9rZXJuZWxzL0F0YW4yLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sRUFBQyxLQUFLLEVBQWUsTUFBTSx1QkFBdUIsQ0FBQztBQUMxRCxPQUFPLEVBQUMsWUFBWSxFQUFDLE1BQU0sbUJBQW1CLENBQUM7QUFDL0MsT0FBTyxFQUFDLGdCQUFnQixFQUFDLE1BQU0sb0NBQW9DLENBQUM7QUFFcEUsTUFBTSxDQUFDLE1BQU0sS0FBSyxHQUFHLGdCQUFnQixDQUFDLEVBQUMsTUFBTSxFQUFFLFlBQVksQ0FBQyxLQUFLLEVBQUMsQ0FBQyxDQUFDO0FBRXBFLE1BQU0sQ0FBQyxNQUFNLFdBQVcsR0FBaUI7SUFDdkMsVUFBVSxFQUFFLEtBQUs7SUFDakIsV0FBVyxFQUFFLFFBQVE7SUFDckIsVUFBVSxFQUFFLEtBQUs7Q0FDbEIsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtBdGFuMiwgS2VybmVsQ29uZmlnfSBmcm9tICdAdGVuc29yZmxvdy90ZmpzLWNvcmUnO1xuaW1wb3J0IHtCaW5hcnlPcFR5cGV9IGZyb20gJy4uL2JpbmFyeV9vcF91dGlsJztcbmltcG9ydCB7YmluYXJ5S2VybmVsRnVuY30gZnJvbSAnLi4va2VybmVsX3V0aWxzL2tlcm5lbF9mdW5jc191dGlscyc7XG5cbmV4cG9ydCBjb25zdCBhdGFuMiA9IGJpbmFyeUtlcm5lbEZ1bmMoe29wVHlwZTogQmluYXJ5T3BUeXBlLkFUQU4yfSk7XG5cbmV4cG9ydCBjb25zdCBhdGFuMkNvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBBdGFuMixcbiAgYmFja2VuZE5hbWU6ICd3ZWJncHUnLFxuICBrZXJuZWxGdW5jOiBhdGFuMlxufTtcbiJdfQ==","/**\n * @license\n * Copyright 2022 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Atanh } from '@tensorflow/tfjs-core';\nimport { unaryKernelFunc } from '../kernel_utils/kernel_funcs_utils';\nimport { UnaryOpType } from '../unary_op_util';\nexport const atanh = unaryKernelFunc({ opType: UnaryOpType.ATANH });\nexport const atanhConfig = {\n    kernelName: Atanh,\n    backendName: 'webgpu',\n    kernelFunc: atanh\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQXRhbmguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9rZXJuZWxzL0F0YW5oLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sRUFBQyxLQUFLLEVBQWUsTUFBTSx1QkFBdUIsQ0FBQztBQUUxRCxPQUFPLEVBQUMsZUFBZSxFQUFDLE1BQU0sb0NBQW9DLENBQUM7QUFFbkUsT0FBTyxFQUFDLFdBQVcsRUFBQyxNQUFNLGtCQUFrQixDQUFDO0FBRTdDLE1BQU0sQ0FBQyxNQUFNLEtBQUssR0FBRyxlQUFlLENBQUMsRUFBQyxNQUFNLEVBQUUsV0FBVyxDQUFDLEtBQUssRUFBQyxDQUFDLENBQUM7QUFFbEUsTUFBTSxDQUFDLE1BQU0sV0FBVyxHQUFpQjtJQUN2QyxVQUFVLEVBQUUsS0FBSztJQUNqQixXQUFXLEVBQUUsUUFBUTtJQUNyQixVQUFVLEVBQUUsS0FBSztDQUNsQixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQy5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge0F0YW5oLCBLZXJuZWxDb25maWd9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7dW5hcnlLZXJuZWxGdW5jfSBmcm9tICcuLi9rZXJuZWxfdXRpbHMva2VybmVsX2Z1bmNzX3V0aWxzJztcblxuaW1wb3J0IHtVbmFyeU9wVHlwZX0gZnJvbSAnLi4vdW5hcnlfb3BfdXRpbCc7XG5cbmV4cG9ydCBjb25zdCBhdGFuaCA9IHVuYXJ5S2VybmVsRnVuYyh7b3BUeXBlOiBVbmFyeU9wVHlwZS5BVEFOSH0pO1xuXG5leHBvcnQgY29uc3QgYXRhbmhDb25maWc6IEtlcm5lbENvbmZpZyA9IHtcbiAga2VybmVsTmFtZTogQXRhbmgsXG4gIGJhY2tlbmROYW1lOiAnd2ViZ3B1JyxcbiAga2VybmVsRnVuYzogYXRhbmhcbn07XG4iXX0=","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { getMainHeaderString as main } from './webgpu_program';\nimport { computeDispatch, flatDispatchLayout } from './webgpu_util';\nexport class PoolWithFilterSizeEqualsOneProgram {\n    constructor(convInfo) {\n        this.variableNames = ['x'];\n        this.uniforms = `strides : vec2<i32>,`;\n        this.workgroupSize = [256, 1, 1];\n        this.size = true;\n        this.outputShape = convInfo.outShape;\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize);\n        this.shaderKey = 'poolWithFilterSizeEqualsOne';\n    }\n    getUserCode() {\n        const userCode = `\n      ${main('index')} {\n        if (index < uniforms.size) {\n          let coords = getCoordsFromIndex(index);\n          let batch = coords[0];\n          let d = coords[3];\n\n          let xRCCorner = coords.yz * uniforms.strides;\n          let xRCorner = xRCCorner.x;\n          let xCCorner = xRCCorner.y;\n\n          let value = getX(batch, xRCorner, xCCorner, d);\n          setOutputAtIndex(index, value);\n        }\n      }\n    `;\n        return userCode;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG9vbF9maWx0ZXJzaXplb25lX3dlYmdwdS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL3Bvb2xfZmlsdGVyc2l6ZW9uZV93ZWJncHUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBR0gsT0FBTyxFQUFDLG1CQUFtQixJQUFJLElBQUksRUFBZ0IsTUFBTSxrQkFBa0IsQ0FBQztBQUM1RSxPQUFPLEVBQUMsZUFBZSxFQUFFLGtCQUFrQixFQUFDLE1BQU0sZUFBZSxDQUFDO0FBRWxFLE1BQU0sT0FBTyxrQ0FBa0M7SUFVN0MsWUFBWSxRQUFpQztRQUw3QyxrQkFBYSxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDdEIsYUFBUSxHQUFHLHNCQUFzQixDQUFDO1FBQ2xDLGtCQUFhLEdBQTZCLENBQUMsR0FBRyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUN0RCxTQUFJLEdBQUcsSUFBSSxDQUFDO1FBR1YsSUFBSSxDQUFDLFdBQVcsR0FBRyxRQUFRLENBQUMsUUFBUSxDQUFDO1FBQ3JDLElBQUksQ0FBQyxjQUFjLEdBQUcsa0JBQWtCLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBRTNELElBQUksQ0FBQyxRQUFRLEdBQUcsZUFBZSxDQUMzQixJQUFJLENBQUMsY0FBYyxFQUFFLElBQUksQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBRS9ELElBQUksQ0FBQyxTQUFTLEdBQUcsNkJBQTZCLENBQUM7SUFDakQsQ0FBQztJQUVELFdBQVc7UUFDVCxNQUFNLFFBQVEsR0FBRztRQUNiLElBQUksQ0FBQyxPQUFPLENBQUM7Ozs7Ozs7Ozs7Ozs7O0tBY2hCLENBQUM7UUFDRixPQUFPLFFBQVEsQ0FBQztJQUNsQixDQUFDO0NBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7YmFja2VuZF91dGlsfSBmcm9tICdAdGVuc29yZmxvdy90ZmpzLWNvcmUnO1xuaW1wb3J0IHtnZXRNYWluSGVhZGVyU3RyaW5nIGFzIG1haW4sIFdlYkdQVVByb2dyYW19IGZyb20gJy4vd2ViZ3B1X3Byb2dyYW0nO1xuaW1wb3J0IHtjb21wdXRlRGlzcGF0Y2gsIGZsYXREaXNwYXRjaExheW91dH0gZnJvbSAnLi93ZWJncHVfdXRpbCc7XG5cbmV4cG9ydCBjbGFzcyBQb29sV2l0aEZpbHRlclNpemVFcXVhbHNPbmVQcm9ncmFtIGltcGxlbWVudHMgV2ViR1BVUHJvZ3JhbSB7XG4gIG91dHB1dFNoYXBlOiBudW1iZXJbXTtcbiAgc2hhZGVyS2V5OiBzdHJpbmc7XG4gIGRpc3BhdGNoTGF5b3V0OiB7eDogbnVtYmVyW119O1xuICBkaXNwYXRjaDogW251bWJlciwgbnVtYmVyLCBudW1iZXJdO1xuICB2YXJpYWJsZU5hbWVzID0gWyd4J107XG4gIHVuaWZvcm1zID0gYHN0cmlkZXMgOiB2ZWMyPGkzMj4sYDtcbiAgd29ya2dyb3VwU2l6ZTogW251bWJlciwgbnVtYmVyLCBudW1iZXJdID0gWzI1NiwgMSwgMV07XG4gIHNpemUgPSB0cnVlO1xuXG4gIGNvbnN0cnVjdG9yKGNvbnZJbmZvOiBiYWNrZW5kX3V0aWwuQ29udjJESW5mbykge1xuICAgIHRoaXMub3V0cHV0U2hhcGUgPSBjb252SW5mby5vdXRTaGFwZTtcbiAgICB0aGlzLmRpc3BhdGNoTGF5b3V0ID0gZmxhdERpc3BhdGNoTGF5b3V0KHRoaXMub3V0cHV0U2hhcGUpO1xuXG4gICAgdGhpcy5kaXNwYXRjaCA9IGNvbXB1dGVEaXNwYXRjaChcbiAgICAgICAgdGhpcy5kaXNwYXRjaExheW91dCwgdGhpcy5vdXRwdXRTaGFwZSwgdGhpcy53b3JrZ3JvdXBTaXplKTtcblxuICAgIHRoaXMuc2hhZGVyS2V5ID0gJ3Bvb2xXaXRoRmlsdGVyU2l6ZUVxdWFsc09uZSc7XG4gIH1cblxuICBnZXRVc2VyQ29kZSgpOiBzdHJpbmcge1xuICAgIGNvbnN0IHVzZXJDb2RlID0gYFxuICAgICAgJHttYWluKCdpbmRleCcpfSB7XG4gICAgICAgIGlmIChpbmRleCA8IHVuaWZvcm1zLnNpemUpIHtcbiAgICAgICAgICBsZXQgY29vcmRzID0gZ2V0Q29vcmRzRnJvbUluZGV4KGluZGV4KTtcbiAgICAgICAgICBsZXQgYmF0Y2ggPSBjb29yZHNbMF07XG4gICAgICAgICAgbGV0IGQgPSBjb29yZHNbM107XG5cbiAgICAgICAgICBsZXQgeFJDQ29ybmVyID0gY29vcmRzLnl6ICogdW5pZm9ybXMuc3RyaWRlcztcbiAgICAgICAgICBsZXQgeFJDb3JuZXIgPSB4UkNDb3JuZXIueDtcbiAgICAgICAgICBsZXQgeENDb3JuZXIgPSB4UkNDb3JuZXIueTtcblxuICAgICAgICAgIGxldCB2YWx1ZSA9IGdldFgoYmF0Y2gsIHhSQ29ybmVyLCB4Q0Nvcm5lciwgZCk7XG4gICAgICAgICAgc2V0T3V0cHV0QXRJbmRleChpbmRleCwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgYDtcbiAgICByZXR1cm4gdXNlckNvZGU7XG4gIH1cbn1cbiJdfQ==","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { getMainHeaderString as main } from './webgpu_program';\nimport { computeDispatch, flatDispatchLayout } from './webgpu_util';\nexport class Pool2DProgram {\n    constructor(convInfo, poolType, computePositions = false, flattenPositions = false, includeBatchIndex = false) {\n        this.variableNames = ['x'];\n        this.uniforms = `strides : vec2<i32>, pads : vec2<i32>, dilations : vec2<i32>, convDims : vec2<i32>, filterDims : vec2<i32>,`;\n        // TODO(jiajia.qin@intel.com): Dynamically choose different workgroupSize for\n        // different output shapes.\n        this.workgroupSize = [128, 1, 1];\n        this.size = true;\n        if (poolType === 'avg' && computePositions) {\n            throw new Error('Cannot compute positions for average pool.');\n        }\n        this.outputShape = convInfo.outShape;\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize);\n        this.poolType = poolType;\n        this.computePositions = computePositions;\n        this.flattenPositions = flattenPositions;\n        this.includeBatchIndex = includeBatchIndex;\n        this.shaderKey = `pool2D_${poolType}_${computePositions}_${flattenPositions}_${includeBatchIndex}`;\n    }\n    getUserCode() {\n        let updateSnippet;\n        if (this.poolType === 'avg') {\n            updateSnippet = `resultValue = resultValue + value; count = count + 1.0;`;\n        }\n        else if (this.computePositions) {\n            const positionStr = this.flattenPositions ?\n                (this.includeBatchIndex ?\n                    `((batch * uniforms.xShape[1] + xR) * uniforms.xShape[2] + xC) * uniforms.xShape[3] + d` :\n                    `(xR * uniforms.xShape[2] + xC) * uniforms.xShape[3] + d`) :\n                `wR * uniforms.filterDims.y + wC`;\n            updateSnippet = `let currMaxValue = mix(value, maxValue, maxValueFound);\n      if (value >= currMaxValue) {\n        maxValue = value;\n        maxValueFound = 1.0;\n        maxPosition = ${positionStr};\n      }`;\n        }\n        else {\n            updateSnippet = `resultValue = max(value, resultValue);`;\n        }\n        let returnValue = `resultValue`;\n        if (this.poolType === 'avg') {\n            returnValue = `resultValue / max(count, 1.0)`;\n        }\n        const userCode = `\n      ${main('index')} {\n      if (index < uniforms.size) {\n        let coords = getCoordsFromIndex(index);\n          let batch = coords[0];\n          let d = coords[3];\n          let xRCCorner = vec2<i32>(coords.yz) * uniforms.strides - uniforms.pads;\n          let xRCorner = xRCCorner.x;\n          let xCCorner = xRCCorner.y;\n\n          ${this.computePositions ?\n            `var maxValue = 0.0;\n            var maxValueFound = 0.0;\n            var maxPosition = 0;` :\n            `var resultValue = ${this.poolType === 'avg' ? '0.0' : '-1.0 / pow(10.0, -20.0)'};`}\n\n          var count = 0.0;\n          for (var wR = 0; wR < uniforms.filterDims.x; wR = wR + uniforms.dilations.x) {\n            let xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= uniforms.convDims.x) {\n              continue;\n            }\n\n            for (var wC = 0; wC < uniforms.filterDims.y; wC = wC + uniforms.dilations.y) {\n              let xC = xCCorner + wC;\n              if (xC < 0 || xC >= uniforms.convDims.y) {\n                continue;\n              }\n\n              let value = getX(batch, xR, xC, d);\n              ${updateSnippet}\n            }\n          }\n\n          ${this.computePositions ? `setOutputAtIndexI32(index, maxPosition);` :\n            `setOutputAtIndex(index, ${returnValue});`}\n        }\n      }\n    `;\n        return userCode;\n    }\n}\nexport class Pool3DProgram {\n    constructor(convInfo, poolType, computePositions = false, flattenPositions = false, includeBatchIndex = false) {\n        this.variableNames = ['x'];\n        this.uniforms = `strides : vec3<i32>, pads : vec3<i32>, convDims : vec3<i32>, filterDims : vec3<i32>,`;\n        this.workgroupSize = [128, 1, 1];\n        this.size = true;\n        if (poolType === 'avg' && computePositions) {\n            throw new Error('Cannot compute positions for average pool.');\n        }\n        this.outputShape = convInfo.outShape;\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize);\n        this.poolType = poolType;\n        this.computePositions = computePositions;\n        this.flattenPositions = flattenPositions;\n        this.includeBatchIndex = includeBatchIndex;\n        this.shaderKey = `pool3D_${poolType}_${computePositions}_${flattenPositions}_${includeBatchIndex}`;\n    }\n    getUserCode() {\n        let updateSnippet;\n        if (this.poolType === 'avg') {\n            updateSnippet = `resultValue += value; count += 1.0;`;\n        }\n        else if (this.computePositions) {\n            const positionStr = this.flattenPositions ?\n                (this.includeBatchIndex ?\n                    `(((batch * uniforms.xShape.y + xD) * uniforms.xShape.z + xR) * uniforms.xShape.w + xC) * uniforms.xShape.u + ch` :\n                    `((xD * uniforms.xShape.z + xR) * uniforms.xShape.w + xC) * uniforms.xShape.u + ch`) :\n                `wD * uniforms.filterDims.y * uniforms.filterDims.y + wR * uniforms.filterDims.z + wC`;\n            updateSnippet = `let currMaxValue = mix(value, maxValue, maxValueFound);\n      if (value >= currMaxValue) {\n        maxValue = value;\n        maxValueFound = 1.0;\n        maxPosition = ${positionStr};\n      }`;\n        }\n        else {\n            updateSnippet = `resultValue = max(value, resultValue);`;\n        }\n        let returnValue = `resultValue`;\n        if (this.poolType === 'avg') {\n            returnValue = `resultValue / max(count, 1.0)`;\n        }\n        const userCode = `\n      ${main('index')} {\n        if (index < uniforms.size) {\n          let coords = getCoordsFromIndex(index);\n          let batch = coords.x;\n          let ch = coords.u;\n\n          let xCorner = vec3<i32>(coords.y, coords.z, coords.w) * uniforms.strides - uniforms.pads;\n          let xDCorner = xCorner.x;\n          let xRCorner = xCorner.y;\n          let xCCorner = xCorner.z;\n\n          ${this.computePositions ?\n            `var maxValue = 0.0;\n            var maxValueFound = 0.0;\n            var maxPosition = 0;` :\n            `var resultValue = ${this.poolType === 'avg' ? '0.0' : '-1.0 / pow(10.0, -20.0)'};`}\n\n          var count = 0.0;\n          for (var wD = 0; wD < uniforms.filterDims.x; wD++) {\n            let xD = xDCorner + wD;\n            if (xD < 0 || xD >= uniforms.convDims.x) {\n              continue;\n            }\n\n            for (var wR = 0; wR < uniforms.filterDims.y; wR++) {\n              let xR = xRCorner + wR;\n              if (xR < 0 || xR >= uniforms.convDims.y) {\n                continue;\n              }\n\n              for (var wC = 0; wC < uniforms.filterDims.z; wC++) {\n                let xC = xCCorner + wC;\n                if (xC < 0 || xC >= uniforms.convDims.z) {\n                  continue;\n                }\n\n                let value = getX(batch, xD, xR, xC, ch);\n                ${updateSnippet}\n              }\n            }\n          }\n\n          ${this.computePositions ? `setOutputAtIndexI32(index, maxPosition);` :\n            `setOutputAtIndex(index, ${returnValue});`}\n        }\n      }\n    `;\n        return userCode;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG9vbF93ZWJncHUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9wb29sX3dlYmdwdS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFHSCxPQUFPLEVBQUMsbUJBQW1CLElBQUksSUFBSSxFQUFnQixNQUFNLGtCQUFrQixDQUFDO0FBQzVFLE9BQU8sRUFBQyxlQUFlLEVBQUUsa0JBQWtCLEVBQUMsTUFBTSxlQUFlLENBQUM7QUFFbEUsTUFBTSxPQUFPLGFBQWE7SUFpQnhCLFlBQ0ksUUFBaUMsRUFBRSxRQUFxQixFQUN4RCxnQkFBZ0IsR0FBRyxLQUFLLEVBQUUsZ0JBQWdCLEdBQUcsS0FBSyxFQUNsRCxpQkFBaUIsR0FBRyxLQUFLO1FBZjdCLGtCQUFhLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUN0QixhQUFRLEdBQ0osNkdBQTZHLENBQUM7UUFDbEgsNkVBQTZFO1FBQzdFLDJCQUEyQjtRQUMzQixrQkFBYSxHQUE2QixDQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFFdEQsU0FBSSxHQUFHLElBQUksQ0FBQztRQVNWLElBQUksUUFBUSxLQUFLLEtBQUssSUFBSSxnQkFBZ0IsRUFBRTtZQUMxQyxNQUFNLElBQUksS0FBSyxDQUFDLDRDQUE0QyxDQUFDLENBQUM7U0FDL0Q7UUFFRCxJQUFJLENBQUMsV0FBVyxHQUFHLFFBQVEsQ0FBQyxRQUFRLENBQUM7UUFDckMsSUFBSSxDQUFDLGNBQWMsR0FBRyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDM0QsSUFBSSxDQUFDLFFBQVEsR0FBRyxlQUFlLENBQzNCLElBQUksQ0FBQyxjQUFjLEVBQUUsSUFBSSxDQUFDLFdBQVcsRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7UUFFL0QsSUFBSSxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUM7UUFDekIsSUFBSSxDQUFDLGdCQUFnQixHQUFHLGdCQUFnQixDQUFDO1FBQ3pDLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxnQkFBZ0IsQ0FBQztRQUN6QyxJQUFJLENBQUMsaUJBQWlCLEdBQUcsaUJBQWlCLENBQUM7UUFDM0MsSUFBSSxDQUFDLFNBQVMsR0FBRyxVQUFVLFFBQVEsSUFBSSxnQkFBZ0IsSUFDbkQsZ0JBQWdCLElBQUksaUJBQWlCLEVBQUUsQ0FBQztJQUM5QyxDQUFDO0lBRUQsV0FBVztRQUNULElBQUksYUFBcUIsQ0FBQztRQUMxQixJQUFJLElBQUksQ0FBQyxRQUFRLEtBQUssS0FBSyxFQUFFO1lBQzNCLGFBQWEsR0FBRyx5REFBeUQsQ0FBQztTQUMzRTthQUFNLElBQUksSUFBSSxDQUFDLGdCQUFnQixFQUFFO1lBQ2hDLE1BQU0sV0FBVyxHQUFHLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO2dCQUN2QyxDQUFDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO29CQUNwQix3RkFBd0YsQ0FBQyxDQUFDO29CQUMxRix5REFBeUQsQ0FBQyxDQUFDLENBQUM7Z0JBQ2pFLGlDQUFpQyxDQUFDO1lBQ3RDLGFBQWEsR0FBRzs7Ozt3QkFJRSxXQUFXO1FBQzNCLENBQUM7U0FDSjthQUFNO1lBQ0wsYUFBYSxHQUFHLHdDQUF3QyxDQUFDO1NBQzFEO1FBRUQsSUFBSSxXQUFXLEdBQUcsYUFBYSxDQUFDO1FBQ2hDLElBQUksSUFBSSxDQUFDLFFBQVEsS0FBSyxLQUFLLEVBQUU7WUFDM0IsV0FBVyxHQUFHLCtCQUErQixDQUFDO1NBQy9DO1FBRUQsTUFBTSxRQUFRLEdBQUc7UUFDYixJQUFJLENBQUMsT0FBTyxDQUFDOzs7Ozs7Ozs7WUFVYixJQUFJLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztZQUNuQjs7aUNBRXFCLENBQUMsQ0FBQztZQUN2QixxQkFDSSxJQUFJLENBQUMsUUFBUSxLQUFLLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyx5QkFBeUIsR0FBRzs7Ozs7Ozs7Ozs7Ozs7Ozs7Z0JBaUI5RCxhQUFhOzs7O1lBS3JCLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUMsMENBQTBDLENBQUMsQ0FBQztZQUM1QywyQkFBMkIsV0FBVyxJQUFJOzs7S0FHckUsQ0FBQztRQUNGLE9BQU8sUUFBUSxDQUFDO0lBQ2xCLENBQUM7Q0FDRjtBQUVELE1BQU0sT0FBTyxhQUFhO0lBZXhCLFlBQ0ksUUFBaUMsRUFBRSxRQUFxQixFQUN4RCxnQkFBZ0IsR0FBRyxLQUFLLEVBQUUsZ0JBQWdCLEdBQUcsS0FBSyxFQUNsRCxpQkFBaUIsR0FBRyxLQUFLO1FBYjdCLGtCQUFhLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUN0QixhQUFRLEdBQ0osc0ZBQXNGLENBQUM7UUFDM0Ysa0JBQWEsR0FBNkIsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBRXRELFNBQUksR0FBRyxJQUFJLENBQUM7UUFTVixJQUFJLFFBQVEsS0FBSyxLQUFLLElBQUksZ0JBQWdCLEVBQUU7WUFDMUMsTUFBTSxJQUFJLEtBQUssQ0FBQyw0Q0FBNEMsQ0FBQyxDQUFDO1NBQy9EO1FBRUQsSUFBSSxDQUFDLFdBQVcsR0FBRyxRQUFRLENBQUMsUUFBUSxDQUFDO1FBQ3JDLElBQUksQ0FBQyxjQUFjLEdBQUcsa0JBQWtCLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQzNELElBQUksQ0FBQyxRQUFRLEdBQUcsZUFBZSxDQUMzQixJQUFJLENBQUMsY0FBYyxFQUFFLElBQUksQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBRS9ELElBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDO1FBQ3pCLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxnQkFBZ0IsQ0FBQztRQUN6QyxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsZ0JBQWdCLENBQUM7UUFDekMsSUFBSSxDQUFDLGlCQUFpQixHQUFHLGlCQUFpQixDQUFDO1FBQzNDLElBQUksQ0FBQyxTQUFTLEdBQUcsVUFBVSxRQUFRLElBQUksZ0JBQWdCLElBQ25ELGdCQUFnQixJQUFJLGlCQUFpQixFQUFFLENBQUM7SUFDOUMsQ0FBQztJQUVELFdBQVc7UUFDVCxJQUFJLGFBQXFCLENBQUM7UUFDMUIsSUFBSSxJQUFJLENBQUMsUUFBUSxLQUFLLEtBQUssRUFBRTtZQUMzQixhQUFhLEdBQUcscUNBQXFDLENBQUM7U0FDdkQ7YUFBTSxJQUFJLElBQUksQ0FBQyxnQkFBZ0IsRUFBRTtZQUNoQyxNQUFNLFdBQVcsR0FBRyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztnQkFDdkMsQ0FBQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsQ0FBQztvQkFDcEIsaUhBQWlILENBQUMsQ0FBQztvQkFDbkgsbUZBQW1GLENBQUMsQ0FBQyxDQUFDO2dCQUMzRixzRkFBc0YsQ0FBQztZQUMzRixhQUFhLEdBQUc7Ozs7d0JBSUUsV0FBVztRQUMzQixDQUFDO1NBQ0o7YUFBTTtZQUNMLGFBQWEsR0FBRyx3Q0FBd0MsQ0FBQztTQUMxRDtRQUVELElBQUksV0FBVyxHQUFHLGFBQWEsQ0FBQztRQUNoQyxJQUFJLElBQUksQ0FBQyxRQUFRLEtBQUssS0FBSyxFQUFFO1lBQzNCLFdBQVcsR0FBRywrQkFBK0IsQ0FBQztTQUMvQztRQUVELE1BQU0sUUFBUSxHQUFHO1FBQ2IsSUFBSSxDQUFDLE9BQU8sQ0FBQzs7Ozs7Ozs7Ozs7WUFZYixJQUFJLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztZQUNuQjs7aUNBRXFCLENBQUMsQ0FBQztZQUN2QixxQkFDSSxJQUFJLENBQUMsUUFBUSxLQUFLLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyx5QkFBeUIsR0FBRzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztrQkFzQjVELGFBQWE7Ozs7O1lBTXZCLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUMsMENBQTBDLENBQUMsQ0FBQztZQUM1QywyQkFBMkIsV0FBVyxJQUFJOzs7S0FHckUsQ0FBQztRQUNGLE9BQU8sUUFBUSxDQUFDO0lBQ2xCLENBQUM7Q0FDRiIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtiYWNrZW5kX3V0aWx9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5pbXBvcnQge2dldE1haW5IZWFkZXJTdHJpbmcgYXMgbWFpbiwgV2ViR1BVUHJvZ3JhbX0gZnJvbSAnLi93ZWJncHVfcHJvZ3JhbSc7XG5pbXBvcnQge2NvbXB1dGVEaXNwYXRjaCwgZmxhdERpc3BhdGNoTGF5b3V0fSBmcm9tICcuL3dlYmdwdV91dGlsJztcblxuZXhwb3J0IGNsYXNzIFBvb2wyRFByb2dyYW0gaW1wbGVtZW50cyBXZWJHUFVQcm9ncmFtIHtcbiAgb3V0cHV0U2hhcGU6IG51bWJlcltdO1xuICBzaGFkZXJLZXk6IHN0cmluZztcbiAgZGlzcGF0Y2hMYXlvdXQ6IHt4OiBudW1iZXJbXX07XG4gIGRpc3BhdGNoOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl07XG4gIHZhcmlhYmxlTmFtZXMgPSBbJ3gnXTtcbiAgdW5pZm9ybXMgPVxuICAgICAgYHN0cmlkZXMgOiB2ZWMyPGkzMj4sIHBhZHMgOiB2ZWMyPGkzMj4sIGRpbGF0aW9ucyA6IHZlYzI8aTMyPiwgY29udkRpbXMgOiB2ZWMyPGkzMj4sIGZpbHRlckRpbXMgOiB2ZWMyPGkzMj4sYDtcbiAgLy8gVE9ETyhqaWFqaWEucWluQGludGVsLmNvbSk6IER5bmFtaWNhbGx5IGNob29zZSBkaWZmZXJlbnQgd29ya2dyb3VwU2l6ZSBmb3JcbiAgLy8gZGlmZmVyZW50IG91dHB1dCBzaGFwZXMuXG4gIHdvcmtncm91cFNpemU6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXSA9IFsxMjgsIDEsIDFdO1xuICBwb29sVHlwZTogJ21heCd8J2F2Zyc7XG4gIHNpemUgPSB0cnVlO1xuICBjb21wdXRlUG9zaXRpb25zOiBib29sZWFuO1xuICBmbGF0dGVuUG9zaXRpb25zOiBib29sZWFuO1xuICBpbmNsdWRlQmF0Y2hJbmRleDogYm9vbGVhbjtcblxuICBjb25zdHJ1Y3RvcihcbiAgICAgIGNvbnZJbmZvOiBiYWNrZW5kX3V0aWwuQ29udjJESW5mbywgcG9vbFR5cGU6ICdtYXgnfCdhdmcnLFxuICAgICAgY29tcHV0ZVBvc2l0aW9ucyA9IGZhbHNlLCBmbGF0dGVuUG9zaXRpb25zID0gZmFsc2UsXG4gICAgICBpbmNsdWRlQmF0Y2hJbmRleCA9IGZhbHNlKSB7XG4gICAgaWYgKHBvb2xUeXBlID09PSAnYXZnJyAmJiBjb21wdXRlUG9zaXRpb25zKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBjb21wdXRlIHBvc2l0aW9ucyBmb3IgYXZlcmFnZSBwb29sLicpO1xuICAgIH1cblxuICAgIHRoaXMub3V0cHV0U2hhcGUgPSBjb252SW5mby5vdXRTaGFwZTtcbiAgICB0aGlzLmRpc3BhdGNoTGF5b3V0ID0gZmxhdERpc3BhdGNoTGF5b3V0KHRoaXMub3V0cHV0U2hhcGUpO1xuICAgIHRoaXMuZGlzcGF0Y2ggPSBjb21wdXRlRGlzcGF0Y2goXG4gICAgICAgIHRoaXMuZGlzcGF0Y2hMYXlvdXQsIHRoaXMub3V0cHV0U2hhcGUsIHRoaXMud29ya2dyb3VwU2l6ZSk7XG5cbiAgICB0aGlzLnBvb2xUeXBlID0gcG9vbFR5cGU7XG4gICAgdGhpcy5jb21wdXRlUG9zaXRpb25zID0gY29tcHV0ZVBvc2l0aW9ucztcbiAgICB0aGlzLmZsYXR0ZW5Qb3NpdGlvbnMgPSBmbGF0dGVuUG9zaXRpb25zO1xuICAgIHRoaXMuaW5jbHVkZUJhdGNoSW5kZXggPSBpbmNsdWRlQmF0Y2hJbmRleDtcbiAgICB0aGlzLnNoYWRlcktleSA9IGBwb29sMkRfJHtwb29sVHlwZX1fJHtjb21wdXRlUG9zaXRpb25zfV8ke1xuICAgICAgICBmbGF0dGVuUG9zaXRpb25zfV8ke2luY2x1ZGVCYXRjaEluZGV4fWA7XG4gIH1cblxuICBnZXRVc2VyQ29kZSgpOiBzdHJpbmcge1xuICAgIGxldCB1cGRhdGVTbmlwcGV0OiBzdHJpbmc7XG4gICAgaWYgKHRoaXMucG9vbFR5cGUgPT09ICdhdmcnKSB7XG4gICAgICB1cGRhdGVTbmlwcGV0ID0gYHJlc3VsdFZhbHVlID0gcmVzdWx0VmFsdWUgKyB2YWx1ZTsgY291bnQgPSBjb3VudCArIDEuMDtgO1xuICAgIH0gZWxzZSBpZiAodGhpcy5jb21wdXRlUG9zaXRpb25zKSB7XG4gICAgICBjb25zdCBwb3NpdGlvblN0ciA9IHRoaXMuZmxhdHRlblBvc2l0aW9ucyA/XG4gICAgICAgICAgKHRoaXMuaW5jbHVkZUJhdGNoSW5kZXggP1xuICAgICAgICAgICAgICAgYCgoYmF0Y2ggKiB1bmlmb3Jtcy54U2hhcGVbMV0gKyB4UikgKiB1bmlmb3Jtcy54U2hhcGVbMl0gKyB4QykgKiB1bmlmb3Jtcy54U2hhcGVbM10gKyBkYCA6XG4gICAgICAgICAgICAgICBgKHhSICogdW5pZm9ybXMueFNoYXBlWzJdICsgeEMpICogdW5pZm9ybXMueFNoYXBlWzNdICsgZGApIDpcbiAgICAgICAgICBgd1IgKiB1bmlmb3Jtcy5maWx0ZXJEaW1zLnkgKyB3Q2A7XG4gICAgICB1cGRhdGVTbmlwcGV0ID0gYGxldCBjdXJyTWF4VmFsdWUgPSBtaXgodmFsdWUsIG1heFZhbHVlLCBtYXhWYWx1ZUZvdW5kKTtcbiAgICAgIGlmICh2YWx1ZSA+PSBjdXJyTWF4VmFsdWUpIHtcbiAgICAgICAgbWF4VmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgbWF4VmFsdWVGb3VuZCA9IDEuMDtcbiAgICAgICAgbWF4UG9zaXRpb24gPSAke3Bvc2l0aW9uU3RyfTtcbiAgICAgIH1gO1xuICAgIH0gZWxzZSB7XG4gICAgICB1cGRhdGVTbmlwcGV0ID0gYHJlc3VsdFZhbHVlID0gbWF4KHZhbHVlLCByZXN1bHRWYWx1ZSk7YDtcbiAgICB9XG5cbiAgICBsZXQgcmV0dXJuVmFsdWUgPSBgcmVzdWx0VmFsdWVgO1xuICAgIGlmICh0aGlzLnBvb2xUeXBlID09PSAnYXZnJykge1xuICAgICAgcmV0dXJuVmFsdWUgPSBgcmVzdWx0VmFsdWUgLyBtYXgoY291bnQsIDEuMClgO1xuICAgIH1cblxuICAgIGNvbnN0IHVzZXJDb2RlID0gYFxuICAgICAgJHttYWluKCdpbmRleCcpfSB7XG4gICAgICBpZiAoaW5kZXggPCB1bmlmb3Jtcy5zaXplKSB7XG4gICAgICAgIGxldCBjb29yZHMgPSBnZXRDb29yZHNGcm9tSW5kZXgoaW5kZXgpO1xuICAgICAgICAgIGxldCBiYXRjaCA9IGNvb3Jkc1swXTtcbiAgICAgICAgICBsZXQgZCA9IGNvb3Jkc1szXTtcbiAgICAgICAgICBsZXQgeFJDQ29ybmVyID0gdmVjMjxpMzI+KGNvb3Jkcy55eikgKiB1bmlmb3Jtcy5zdHJpZGVzIC0gdW5pZm9ybXMucGFkcztcbiAgICAgICAgICBsZXQgeFJDb3JuZXIgPSB4UkNDb3JuZXIueDtcbiAgICAgICAgICBsZXQgeENDb3JuZXIgPSB4UkNDb3JuZXIueTtcblxuICAgICAgICAgICR7XG4gICAgICAgIHRoaXMuY29tcHV0ZVBvc2l0aW9ucyA/XG4gICAgICAgICAgICBgdmFyIG1heFZhbHVlID0gMC4wO1xuICAgICAgICAgICAgdmFyIG1heFZhbHVlRm91bmQgPSAwLjA7XG4gICAgICAgICAgICB2YXIgbWF4UG9zaXRpb24gPSAwO2AgOlxuICAgICAgICAgICAgYHZhciByZXN1bHRWYWx1ZSA9ICR7XG4gICAgICAgICAgICAgICAgdGhpcy5wb29sVHlwZSA9PT0gJ2F2ZycgPyAnMC4wJyA6ICctMS4wIC8gcG93KDEwLjAsIC0yMC4wKSd9O2B9XG5cbiAgICAgICAgICB2YXIgY291bnQgPSAwLjA7XG4gICAgICAgICAgZm9yICh2YXIgd1IgPSAwOyB3UiA8IHVuaWZvcm1zLmZpbHRlckRpbXMueDsgd1IgPSB3UiArIHVuaWZvcm1zLmRpbGF0aW9ucy54KSB7XG4gICAgICAgICAgICBsZXQgeFIgPSB4UkNvcm5lciArIHdSO1xuXG4gICAgICAgICAgICBpZiAoeFIgPCAwIHx8IHhSID49IHVuaWZvcm1zLmNvbnZEaW1zLngpIHtcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvciAodmFyIHdDID0gMDsgd0MgPCB1bmlmb3Jtcy5maWx0ZXJEaW1zLnk7IHdDID0gd0MgKyB1bmlmb3Jtcy5kaWxhdGlvbnMueSkge1xuICAgICAgICAgICAgICBsZXQgeEMgPSB4Q0Nvcm5lciArIHdDO1xuICAgICAgICAgICAgICBpZiAoeEMgPCAwIHx8IHhDID49IHVuaWZvcm1zLmNvbnZEaW1zLnkpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGxldCB2YWx1ZSA9IGdldFgoYmF0Y2gsIHhSLCB4QywgZCk7XG4gICAgICAgICAgICAgICR7dXBkYXRlU25pcHBldH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICAke1xuICAgICAgICB0aGlzLmNvbXB1dGVQb3NpdGlvbnMgPyBgc2V0T3V0cHV0QXRJbmRleEkzMihpbmRleCwgbWF4UG9zaXRpb24pO2AgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgc2V0T3V0cHV0QXRJbmRleChpbmRleCwgJHtyZXR1cm5WYWx1ZX0pO2B9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICBgO1xuICAgIHJldHVybiB1c2VyQ29kZTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgUG9vbDNEUHJvZ3JhbSBpbXBsZW1lbnRzIFdlYkdQVVByb2dyYW0ge1xuICBvdXRwdXRTaGFwZTogbnVtYmVyW107XG4gIHNoYWRlcktleTogc3RyaW5nO1xuICBkaXNwYXRjaExheW91dDoge3g6IG51bWJlcltdfTtcbiAgZGlzcGF0Y2g6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXTtcbiAgdmFyaWFibGVOYW1lcyA9IFsneCddO1xuICB1bmlmb3JtcyA9XG4gICAgICBgc3RyaWRlcyA6IHZlYzM8aTMyPiwgcGFkcyA6IHZlYzM8aTMyPiwgY29udkRpbXMgOiB2ZWMzPGkzMj4sIGZpbHRlckRpbXMgOiB2ZWMzPGkzMj4sYDtcbiAgd29ya2dyb3VwU2l6ZTogW251bWJlciwgbnVtYmVyLCBudW1iZXJdID0gWzEyOCwgMSwgMV07XG4gIHBvb2xUeXBlOiAnbWF4J3wnYXZnJztcbiAgc2l6ZSA9IHRydWU7XG4gIGNvbXB1dGVQb3NpdGlvbnM6IGJvb2xlYW47XG4gIGZsYXR0ZW5Qb3NpdGlvbnM6IGJvb2xlYW47XG4gIGluY2x1ZGVCYXRjaEluZGV4OiBib29sZWFuO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgICAgY29udkluZm86IGJhY2tlbmRfdXRpbC5Db252M0RJbmZvLCBwb29sVHlwZTogJ21heCd8J2F2ZycsXG4gICAgICBjb21wdXRlUG9zaXRpb25zID0gZmFsc2UsIGZsYXR0ZW5Qb3NpdGlvbnMgPSBmYWxzZSxcbiAgICAgIGluY2x1ZGVCYXRjaEluZGV4ID0gZmFsc2UpIHtcbiAgICBpZiAocG9vbFR5cGUgPT09ICdhdmcnICYmIGNvbXB1dGVQb3NpdGlvbnMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IGNvbXB1dGUgcG9zaXRpb25zIGZvciBhdmVyYWdlIHBvb2wuJyk7XG4gICAgfVxuXG4gICAgdGhpcy5vdXRwdXRTaGFwZSA9IGNvbnZJbmZvLm91dFNoYXBlO1xuICAgIHRoaXMuZGlzcGF0Y2hMYXlvdXQgPSBmbGF0RGlzcGF0Y2hMYXlvdXQodGhpcy5vdXRwdXRTaGFwZSk7XG4gICAgdGhpcy5kaXNwYXRjaCA9IGNvbXB1dGVEaXNwYXRjaChcbiAgICAgICAgdGhpcy5kaXNwYXRjaExheW91dCwgdGhpcy5vdXRwdXRTaGFwZSwgdGhpcy53b3JrZ3JvdXBTaXplKTtcblxuICAgIHRoaXMucG9vbFR5cGUgPSBwb29sVHlwZTtcbiAgICB0aGlzLmNvbXB1dGVQb3NpdGlvbnMgPSBjb21wdXRlUG9zaXRpb25zO1xuICAgIHRoaXMuZmxhdHRlblBvc2l0aW9ucyA9IGZsYXR0ZW5Qb3NpdGlvbnM7XG4gICAgdGhpcy5pbmNsdWRlQmF0Y2hJbmRleCA9IGluY2x1ZGVCYXRjaEluZGV4O1xuICAgIHRoaXMuc2hhZGVyS2V5ID0gYHBvb2wzRF8ke3Bvb2xUeXBlfV8ke2NvbXB1dGVQb3NpdGlvbnN9XyR7XG4gICAgICAgIGZsYXR0ZW5Qb3NpdGlvbnN9XyR7aW5jbHVkZUJhdGNoSW5kZXh9YDtcbiAgfVxuXG4gIGdldFVzZXJDb2RlKCk6IHN0cmluZyB7XG4gICAgbGV0IHVwZGF0ZVNuaXBwZXQ6IHN0cmluZztcbiAgICBpZiAodGhpcy5wb29sVHlwZSA9PT0gJ2F2ZycpIHtcbiAgICAgIHVwZGF0ZVNuaXBwZXQgPSBgcmVzdWx0VmFsdWUgKz0gdmFsdWU7IGNvdW50ICs9IDEuMDtgO1xuICAgIH0gZWxzZSBpZiAodGhpcy5jb21wdXRlUG9zaXRpb25zKSB7XG4gICAgICBjb25zdCBwb3NpdGlvblN0ciA9IHRoaXMuZmxhdHRlblBvc2l0aW9ucyA/XG4gICAgICAgICAgKHRoaXMuaW5jbHVkZUJhdGNoSW5kZXggP1xuICAgICAgICAgICAgICAgYCgoKGJhdGNoICogdW5pZm9ybXMueFNoYXBlLnkgKyB4RCkgKiB1bmlmb3Jtcy54U2hhcGUueiArIHhSKSAqIHVuaWZvcm1zLnhTaGFwZS53ICsgeEMpICogdW5pZm9ybXMueFNoYXBlLnUgKyBjaGAgOlxuICAgICAgICAgICAgICAgYCgoeEQgKiB1bmlmb3Jtcy54U2hhcGUueiArIHhSKSAqIHVuaWZvcm1zLnhTaGFwZS53ICsgeEMpICogdW5pZm9ybXMueFNoYXBlLnUgKyBjaGApIDpcbiAgICAgICAgICBgd0QgKiB1bmlmb3Jtcy5maWx0ZXJEaW1zLnkgKiB1bmlmb3Jtcy5maWx0ZXJEaW1zLnkgKyB3UiAqIHVuaWZvcm1zLmZpbHRlckRpbXMueiArIHdDYDtcbiAgICAgIHVwZGF0ZVNuaXBwZXQgPSBgbGV0IGN1cnJNYXhWYWx1ZSA9IG1peCh2YWx1ZSwgbWF4VmFsdWUsIG1heFZhbHVlRm91bmQpO1xuICAgICAgaWYgKHZhbHVlID49IGN1cnJNYXhWYWx1ZSkge1xuICAgICAgICBtYXhWYWx1ZSA9IHZhbHVlO1xuICAgICAgICBtYXhWYWx1ZUZvdW5kID0gMS4wO1xuICAgICAgICBtYXhQb3NpdGlvbiA9ICR7cG9zaXRpb25TdHJ9O1xuICAgICAgfWA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHVwZGF0ZVNuaXBwZXQgPSBgcmVzdWx0VmFsdWUgPSBtYXgodmFsdWUsIHJlc3VsdFZhbHVlKTtgO1xuICAgIH1cblxuICAgIGxldCByZXR1cm5WYWx1ZSA9IGByZXN1bHRWYWx1ZWA7XG4gICAgaWYgKHRoaXMucG9vbFR5cGUgPT09ICdhdmcnKSB7XG4gICAgICByZXR1cm5WYWx1ZSA9IGByZXN1bHRWYWx1ZSAvIG1heChjb3VudCwgMS4wKWA7XG4gICAgfVxuXG4gICAgY29uc3QgdXNlckNvZGUgPSBgXG4gICAgICAke21haW4oJ2luZGV4Jyl9IHtcbiAgICAgICAgaWYgKGluZGV4IDwgdW5pZm9ybXMuc2l6ZSkge1xuICAgICAgICAgIGxldCBjb29yZHMgPSBnZXRDb29yZHNGcm9tSW5kZXgoaW5kZXgpO1xuICAgICAgICAgIGxldCBiYXRjaCA9IGNvb3Jkcy54O1xuICAgICAgICAgIGxldCBjaCA9IGNvb3Jkcy51O1xuXG4gICAgICAgICAgbGV0IHhDb3JuZXIgPSB2ZWMzPGkzMj4oY29vcmRzLnksIGNvb3Jkcy56LCBjb29yZHMudykgKiB1bmlmb3Jtcy5zdHJpZGVzIC0gdW5pZm9ybXMucGFkcztcbiAgICAgICAgICBsZXQgeERDb3JuZXIgPSB4Q29ybmVyLng7XG4gICAgICAgICAgbGV0IHhSQ29ybmVyID0geENvcm5lci55O1xuICAgICAgICAgIGxldCB4Q0Nvcm5lciA9IHhDb3JuZXIuejtcblxuICAgICAgICAgICR7XG4gICAgICAgIHRoaXMuY29tcHV0ZVBvc2l0aW9ucyA/XG4gICAgICAgICAgICBgdmFyIG1heFZhbHVlID0gMC4wO1xuICAgICAgICAgICAgdmFyIG1heFZhbHVlRm91bmQgPSAwLjA7XG4gICAgICAgICAgICB2YXIgbWF4UG9zaXRpb24gPSAwO2AgOlxuICAgICAgICAgICAgYHZhciByZXN1bHRWYWx1ZSA9ICR7XG4gICAgICAgICAgICAgICAgdGhpcy5wb29sVHlwZSA9PT0gJ2F2ZycgPyAnMC4wJyA6ICctMS4wIC8gcG93KDEwLjAsIC0yMC4wKSd9O2B9XG5cbiAgICAgICAgICB2YXIgY291bnQgPSAwLjA7XG4gICAgICAgICAgZm9yICh2YXIgd0QgPSAwOyB3RCA8IHVuaWZvcm1zLmZpbHRlckRpbXMueDsgd0QrKykge1xuICAgICAgICAgICAgbGV0IHhEID0geERDb3JuZXIgKyB3RDtcbiAgICAgICAgICAgIGlmICh4RCA8IDAgfHwgeEQgPj0gdW5pZm9ybXMuY29udkRpbXMueCkge1xuICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9yICh2YXIgd1IgPSAwOyB3UiA8IHVuaWZvcm1zLmZpbHRlckRpbXMueTsgd1IrKykge1xuICAgICAgICAgICAgICBsZXQgeFIgPSB4UkNvcm5lciArIHdSO1xuICAgICAgICAgICAgICBpZiAoeFIgPCAwIHx8IHhSID49IHVuaWZvcm1zLmNvbnZEaW1zLnkpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGZvciAodmFyIHdDID0gMDsgd0MgPCB1bmlmb3Jtcy5maWx0ZXJEaW1zLno7IHdDKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgeEMgPSB4Q0Nvcm5lciArIHdDO1xuICAgICAgICAgICAgICAgIGlmICh4QyA8IDAgfHwgeEMgPj0gdW5pZm9ybXMuY29udkRpbXMueikge1xuICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgbGV0IHZhbHVlID0gZ2V0WChiYXRjaCwgeEQsIHhSLCB4QywgY2gpO1xuICAgICAgICAgICAgICAgICR7dXBkYXRlU25pcHBldH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgICR7XG4gICAgICAgIHRoaXMuY29tcHV0ZVBvc2l0aW9ucyA/IGBzZXRPdXRwdXRBdEluZGV4STMyKGluZGV4LCBtYXhQb3NpdGlvbik7YCA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBzZXRPdXRwdXRBdEluZGV4KGluZGV4LCAke3JldHVyblZhbHVlfSk7YH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIGA7XG4gICAgcmV0dXJuIHVzZXJDb2RlO1xuICB9XG59XG4iXX0=","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Max } from '@tensorflow/tfjs-core';\nimport { reduce } from '../kernel_utils/reduce';\nexport function max(args) {\n    const { inputs, backend, attrs } = args;\n    const { x } = inputs;\n    const { reductionIndices, keepDims } = attrs;\n    return reduce(x, reductionIndices, keepDims, 'max', backend);\n}\nexport const maxConfig = {\n    kernelName: Max,\n    backendName: 'webgpu',\n    kernelFunc: max\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWF4LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMva2VybmVscy9NYXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUEyQixHQUFHLEVBQWtDLE1BQU0sdUJBQXVCLENBQUM7QUFHckcsT0FBTyxFQUFDLE1BQU0sRUFBQyxNQUFNLHdCQUF3QixDQUFDO0FBRTlDLE1BQU0sVUFBVSxHQUFHLENBQ2YsSUFBa0U7SUFFcEUsTUFBTSxFQUFDLE1BQU0sRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFDLEdBQUcsSUFBSSxDQUFDO0lBQ3RDLE1BQU0sRUFBQyxDQUFDLEVBQUMsR0FBRyxNQUFNLENBQUM7SUFDbkIsTUFBTSxFQUFDLGdCQUFnQixFQUFFLFFBQVEsRUFBQyxHQUFHLEtBQUssQ0FBQztJQUUzQyxPQUFPLE1BQU0sQ0FBQyxDQUFDLEVBQUUsZ0JBQWdCLEVBQUUsUUFBUSxFQUFFLEtBQUssRUFBRSxPQUFPLENBQUMsQ0FBQztBQUMvRCxDQUFDO0FBRUQsTUFBTSxDQUFDLE1BQU0sU0FBUyxHQUFpQjtJQUNyQyxVQUFVLEVBQUUsR0FBRztJQUNmLFdBQVcsRUFBRSxRQUFRO0lBQ3JCLFVBQVUsRUFBRSxHQUE0QjtDQUN6QyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge0tlcm5lbENvbmZpZywgS2VybmVsRnVuYywgTWF4LCBNYXhBdHRycywgTWF4SW5wdXRzLCBUZW5zb3JJbmZvfSBmcm9tICdAdGVuc29yZmxvdy90ZmpzLWNvcmUnO1xuXG5pbXBvcnQge1dlYkdQVUJhY2tlbmR9IGZyb20gJy4uL2JhY2tlbmRfd2ViZ3B1JztcbmltcG9ydCB7cmVkdWNlfSBmcm9tICcuLi9rZXJuZWxfdXRpbHMvcmVkdWNlJztcblxuZXhwb3J0IGZ1bmN0aW9uIG1heChcbiAgICBhcmdzOiB7aW5wdXRzOiBNYXhJbnB1dHMsIGJhY2tlbmQ6IFdlYkdQVUJhY2tlbmQsIGF0dHJzOiBNYXhBdHRyc30pOlxuICAgIFRlbnNvckluZm8ge1xuICBjb25zdCB7aW5wdXRzLCBiYWNrZW5kLCBhdHRyc30gPSBhcmdzO1xuICBjb25zdCB7eH0gPSBpbnB1dHM7XG4gIGNvbnN0IHtyZWR1Y3Rpb25JbmRpY2VzLCBrZWVwRGltc30gPSBhdHRycztcblxuICByZXR1cm4gcmVkdWNlKHgsIHJlZHVjdGlvbkluZGljZXMsIGtlZXBEaW1zLCAnbWF4JywgYmFja2VuZCk7XG59XG5cbmV4cG9ydCBjb25zdCBtYXhDb25maWc6IEtlcm5lbENvbmZpZyA9IHtcbiAga2VybmVsTmFtZTogTWF4LFxuICBiYWNrZW5kTmFtZTogJ3dlYmdwdScsXG4gIGtlcm5lbEZ1bmM6IG1heCBhcyB1bmtub3duIGFzIEtlcm5lbEZ1bmNcbn07XG4iXX0=","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Mean } from '@tensorflow/tfjs-core';\nimport { reduce } from '../kernel_utils/reduce';\nexport function mean(args) {\n    const { inputs, backend, attrs } = args;\n    const { x } = inputs;\n    const { keepDims, axis } = attrs;\n    return reduce(x, axis, keepDims, 'mean', backend);\n}\nexport const meanConfig = {\n    kernelName: Mean,\n    backendName: 'webgpu',\n    kernelFunc: mean\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWVhbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2tlcm5lbHMvTWVhbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQTJCLElBQUksRUFBb0MsTUFBTSx1QkFBdUIsQ0FBQztBQUd4RyxPQUFPLEVBQUMsTUFBTSxFQUFDLE1BQU0sd0JBQXdCLENBQUM7QUFFOUMsTUFBTSxVQUFVLElBQUksQ0FDaEIsSUFBb0U7SUFFdEUsTUFBTSxFQUFDLE1BQU0sRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFDLEdBQUcsSUFBSSxDQUFDO0lBQ3RDLE1BQU0sRUFBQyxDQUFDLEVBQUMsR0FBRyxNQUFNLENBQUM7SUFDbkIsTUFBTSxFQUFDLFFBQVEsRUFBRSxJQUFJLEVBQUMsR0FBRyxLQUFLLENBQUM7SUFFL0IsT0FBTyxNQUFNLENBQUMsQ0FBQyxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO0FBQ3BELENBQUM7QUFFRCxNQUFNLENBQUMsTUFBTSxVQUFVLEdBQWlCO0lBQ3RDLFVBQVUsRUFBRSxJQUFJO0lBQ2hCLFdBQVcsRUFBRSxRQUFRO0lBQ3JCLFVBQVUsRUFBRSxJQUE2QjtDQUMxQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge0tlcm5lbENvbmZpZywgS2VybmVsRnVuYywgTWVhbiwgTWVhbkF0dHJzLCBNZWFuSW5wdXRzLCBUZW5zb3JJbmZvfSBmcm9tICdAdGVuc29yZmxvdy90ZmpzLWNvcmUnO1xuXG5pbXBvcnQge1dlYkdQVUJhY2tlbmR9IGZyb20gJy4uL2JhY2tlbmRfd2ViZ3B1JztcbmltcG9ydCB7cmVkdWNlfSBmcm9tICcuLi9rZXJuZWxfdXRpbHMvcmVkdWNlJztcblxuZXhwb3J0IGZ1bmN0aW9uIG1lYW4oXG4gICAgYXJnczoge2lucHV0czogTWVhbklucHV0cywgYXR0cnM6IE1lYW5BdHRycywgYmFja2VuZDogV2ViR1BVQmFja2VuZH0pOlxuICAgIFRlbnNvckluZm8ge1xuICBjb25zdCB7aW5wdXRzLCBiYWNrZW5kLCBhdHRyc30gPSBhcmdzO1xuICBjb25zdCB7eH0gPSBpbnB1dHM7XG4gIGNvbnN0IHtrZWVwRGltcywgYXhpc30gPSBhdHRycztcblxuICByZXR1cm4gcmVkdWNlKHgsIGF4aXMsIGtlZXBEaW1zLCAnbWVhbicsIGJhY2tlbmQpO1xufVxuXG5leHBvcnQgY29uc3QgbWVhbkNvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBNZWFuLFxuICBiYWNrZW5kTmFtZTogJ3dlYmdwdScsXG4gIGtlcm5lbEZ1bmM6IG1lYW4gYXMgdW5rbm93biBhcyBLZXJuZWxGdW5jXG59O1xuIl19","/**\n * @license\n * Copyright 2022 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { util } from '@tensorflow/tfjs-core';\nimport { PoolWithFilterSizeEqualsOneProgram } from '../pool_filtersizeone_webgpu';\nimport { Pool2DProgram } from '../pool_webgpu';\nimport { identity } from './Identity';\nimport { max } from './Max';\nimport { mean } from './Mean';\nimport { reshape } from './Reshape';\nexport function poolImpl(x, convInfo, poolType, backend) {\n    if (convInfo.filterWidth === 1 && convInfo.filterHeight === 1 &&\n        util.arraysEqual(convInfo.inShape, convInfo.outShape)) {\n        return identity({ inputs: { x }, backend });\n    }\n    if (convInfo.filterWidth === convInfo.inWidth &&\n        convInfo.filterHeight === convInfo.inHeight && convInfo.batchSize === 1 &&\n        convInfo.padInfo.type === 'VALID') {\n        const length = x.shape.length;\n        const reshapeX = reshape({\n            inputs: { x },\n            backend,\n            attrs: {\n                shape: [\n                    x.shape[length - 3] * x.shape[length - 2] /* height * width */,\n                    x.shape[length - 1] /* channel */\n                ]\n            }\n        });\n        let reduceX;\n        if (poolType === 'avg') {\n            reduceX = mean({ inputs: { x: reshapeX }, backend, attrs: { axis: 0, keepDims: false } });\n        }\n        else {\n            util.assert(poolType === 'max', () => `Invalid pool type ${poolType}`);\n            reduceX = max({\n                inputs: { x: reshapeX },\n                backend,\n                attrs: { reductionIndices: 0, keepDims: false }\n            });\n        }\n        const result = reshape({ inputs: { x: reduceX }, backend, attrs: { shape: convInfo.outShape } });\n        backend.disposeData(reshapeX.dataId);\n        backend.disposeData(reduceX.dataId);\n        return result;\n    }\n    let program;\n    const dimensions = [{ type: 'int32', data: [convInfo.strideHeight, convInfo.strideWidth] }];\n    if (convInfo.filterHeight === 1 && convInfo.filterWidth === 1) {\n        program = new PoolWithFilterSizeEqualsOneProgram(convInfo);\n    }\n    else {\n        if (poolType === 'avg') {\n            program = new Pool2DProgram(convInfo, 'avg');\n        }\n        else {\n            util.assert(poolType === 'max', () => `Invalid pool type ${poolType}`);\n            program = new Pool2DProgram(convInfo, 'max');\n        }\n        dimensions.push({ type: 'int32', data: [convInfo.padInfo.top, convInfo.padInfo.left] }, {\n            type: 'int32',\n            data: [convInfo.dilationHeight, convInfo.dilationWidth]\n        }, { type: 'int32', data: [convInfo.inHeight, convInfo.inWidth] }, {\n            type: 'int32',\n            data: [convInfo.effectiveFilterHeight, convInfo.effectiveFilterWidth]\n        });\n    }\n    return backend.runWebGPUProgram(program, [x], x.dtype, dimensions);\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUG9vbF9pbXBsLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMva2VybmVscy9Qb29sX2ltcGwudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBQ0gsT0FBTyxFQUEyQixJQUFJLEVBQUMsTUFBTSx1QkFBdUIsQ0FBQztBQUdyRSxPQUFPLEVBQUMsa0NBQWtDLEVBQUMsTUFBTSw4QkFBOEIsQ0FBQztBQUNoRixPQUFPLEVBQUMsYUFBYSxFQUFDLE1BQU0sZ0JBQWdCLENBQUM7QUFFN0MsT0FBTyxFQUFDLFFBQVEsRUFBQyxNQUFNLFlBQVksQ0FBQztBQUNwQyxPQUFPLEVBQUMsR0FBRyxFQUFDLE1BQU0sT0FBTyxDQUFDO0FBQzFCLE9BQU8sRUFBQyxJQUFJLEVBQUMsTUFBTSxRQUFRLENBQUM7QUFDNUIsT0FBTyxFQUFDLE9BQU8sRUFBQyxNQUFNLFdBQVcsQ0FBQztBQUdsQyxNQUFNLFVBQVUsUUFBUSxDQUNwQixDQUFhLEVBQUUsUUFBaUMsRUFBRSxRQUFrQixFQUNwRSxPQUFzQjtJQUN4QixJQUFJLFFBQVEsQ0FBQyxXQUFXLEtBQUssQ0FBQyxJQUFJLFFBQVEsQ0FBQyxZQUFZLEtBQUssQ0FBQztRQUN6RCxJQUFJLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxPQUFPLEVBQUUsUUFBUSxDQUFDLFFBQVEsQ0FBQyxFQUFFO1FBQ3pELE9BQU8sUUFBUSxDQUFDLEVBQUMsTUFBTSxFQUFFLEVBQUMsQ0FBQyxFQUFDLEVBQUUsT0FBTyxFQUFDLENBQUMsQ0FBQztLQUN6QztJQUVELElBQUksUUFBUSxDQUFDLFdBQVcsS0FBSyxRQUFRLENBQUMsT0FBTztRQUN6QyxRQUFRLENBQUMsWUFBWSxLQUFLLFFBQVEsQ0FBQyxRQUFRLElBQUksUUFBUSxDQUFDLFNBQVMsS0FBSyxDQUFDO1FBQ3ZFLFFBQVEsQ0FBQyxPQUFPLENBQUMsSUFB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QWMsRUFBRSxRQUFRLENBQUMsYUFBYSxDQUFDO1NBQ3hELEVBQ0QsRUFBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxDQUFDLFFBQVEsQ0FBQyxRQUFRLEVBQUUsUUFBUSxDQUFDLE9BQU8sQ0FBQyxFQUFDLEVBQUU7WUFDNUQsSUFBSSxFQUFFLE9BQU87WUFDYixJQUFJLEVBQUUsQ0FBQyxRQUFRLENBQUMscUJBQXFCLEVBQUUsUUFBUSxDQUFDLG9CQUFvQixDQUFDO1NBQ3RFLENBQUMsQ0FBQztLQUNSO0lBRUQsT0FBTyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEtBQUssRUFBRSxVQUFVLENBQUMsQ0FBQztBQUNyRSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuaW1wb3J0IHtiYWNrZW5kX3V0aWwsIFRlbnNvckluZm8sIHV0aWx9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7V2ViR1BVQmFja2VuZH0gZnJvbSAnLi4vYmFja2VuZF93ZWJncHUnO1xuaW1wb3J0IHtQb29sV2l0aEZpbHRlclNpemVFcXVhbHNPbmVQcm9ncmFtfSBmcm9tICcuLi9wb29sX2ZpbHRlcnNpemVvbmVfd2ViZ3B1JztcbmltcG9ydCB7UG9vbDJEUHJvZ3JhbX0gZnJvbSAnLi4vcG9vbF93ZWJncHUnO1xuXG5pbXBvcnQge2lkZW50aXR5fSBmcm9tICcuL0lkZW50aXR5JztcbmltcG9ydCB7bWF4fSBmcm9tICcuL01heCc7XG5pbXBvcnQge21lYW59IGZyb20gJy4vTWVhbic7XG5pbXBvcnQge3Jlc2hhcGV9IGZyb20gJy4vUmVzaGFwZSc7XG5cbnR5cGUgUG9vbFR5cGUgPSAnbWF4J3wnYXZnJztcbmV4cG9ydCBmdW5jdGlvbiBwb29sSW1wbChcbiAgICB4OiBUZW5zb3JJbmZvLCBjb252SW5mbzogYmFja2VuZF91dGlsLkNvbnYyREluZm8sIHBvb2xUeXBlOiBQb29sVHlwZSxcbiAgICBiYWNrZW5kOiBXZWJHUFVCYWNrZW5kKTogVGVuc29ySW5mbyB7XG4gIGlmIChjb252SW5mby5maWx0ZXJXaWR0aCA9PT0gMSAmJiBjb252SW5mby5maWx0ZXJIZWlnaHQgPT09IDEgJiZcbiAgICAgIHV0aWwuYXJyYXlzRXF1YWwoY29udkluZm8uaW5TaGFwZSwgY29udkluZm8ub3V0U2hhcGUpKSB7XG4gICAgcmV0dXJuIGlkZW50aXR5KHtpbnB1dHM6IHt4fSwgYmFja2VuZH0pO1xuICB9XG5cbiAgaWYgKGNvbnZJbmZvLmZpbHRlcldpZHRoID09PSBjb252SW5mby5pbldpZHRoICYmXG4gICAgICBjb252SW5mby5maWx0ZXJIZWlnaHQgPT09IGNvbnZJbmZvLmluSGVpZ2h0ICYmIGNvbnZJbmZvLmJhdGNoU2l6ZSA9PT0gMSAmJlxuICAgICAgY29udkluZm8ucGFkSW5mby50eXBlID09PSAnVkFMSUQnKSB7XG4gICAgY29uc3QgbGVuZ3RoID0geC5zaGFwZS5sZW5ndGg7XG4gICAgY29uc3QgcmVzaGFwZVggPSByZXNoYXBlKHtcbiAgICAgIGlucHV0czoge3h9LFxuICAgICAgYmFja2VuZCxcbiAgICAgIGF0dHJzOiB7XG4gICAgICAgIHNoYXBlOiBbXG4gICAgICAgICAgeC5zaGFwZVtsZW5ndGggLSAzXSAqIHguc2hhcGVbbGVuZ3RoIC0gMl0gLyogaGVpZ2h0ICogd2lkdGggKi8sXG4gICAgICAgICAgeC5zaGFwZVtsZW5ndGggLSAxXSAvKiBjaGFubmVsICovXG4gICAgICAgIF1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBsZXQgcmVkdWNlWDtcbiAgICBpZiAocG9vbFR5cGUgPT09ICdhdmcnKSB7XG4gICAgICByZWR1Y2VYID0gbWVhbihcbiAgICAgICAgICB7aW5wdXRzOiB7eDogcmVzaGFwZVh9LCBiYWNrZW5kLCBhdHRyczoge2F4aXM6IDAsIGtlZXBEaW1zOiBmYWxzZX19KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdXRpbC5hc3NlcnQocG9vbFR5cGUgPT09ICdtYXgnLCAoKSA9PiBgSW52YWxpZCBwb29sIHR5cGUgJHtwb29sVHlwZX1gKTtcbiAgICAgIHJlZHVjZVggPSBtYXgoe1xuICAgICAgICBpbnB1dHM6IHt4OiByZXNoYXBlWH0sXG4gICAgICAgIGJhY2tlbmQsXG4gICAgICAgIGF0dHJzOiB7cmVkdWN0aW9uSW5kaWNlczogMCwga2VlcERpbXM6IGZhbHNlfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgcmVzdWx0ID0gcmVzaGFwZShcbiAgICAgICAge2lucHV0czoge3g6IHJlZHVjZVh9LCBiYWNrZW5kLCBhdHRyczoge3NoYXBlOiBjb252SW5mby5vdXRTaGFwZX19KTtcbiAgICBiYWNrZW5kLmRpc3Bvc2VEYXRhKHJlc2hhcGVYLmRhdGFJZCk7XG4gICAgYmFja2VuZC5kaXNwb3NlRGF0YShyZWR1Y2VYLmRhdGFJZCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIGxldCBwcm9ncmFtOiBQb29sMkRQcm9ncmFtfFBvb2xXaXRoRmlsdGVyU2l6ZUVxdWFsc09uZVByb2dyYW07XG4gIGNvbnN0IGRpbWVuc2lvbnMgPVxuICAgICAgW3t0eXBlOiAnaW50MzInLCBkYXRhOiBbY29udkluZm8uc3RyaWRlSGVpZ2h0LCBjb252SW5mby5zdHJpZGVXaWR0aF19XTtcbiAgaWYgKGNvbnZJbmZvLmZpbHRlckhlaWdodCA9PT0gMSAmJiBjb252SW5mby5maWx0ZXJXaWR0aCA9PT0gMSkge1xuICAgIHByb2dyYW0gPSBuZXcgUG9vbFdpdGhGaWx0ZXJTaXplRXF1YWxzT25lUHJvZ3JhbShjb252SW5mbyk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKHBvb2xUeXBlID09PSAnYXZnJykge1xuICAgICAgcHJvZ3JhbSA9IG5ldyBQb29sMkRQcm9ncmFtKGNvbnZJbmZvLCAnYXZnJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHV0aWwuYXNzZXJ0KHBvb2xUeXBlID09PSAnbWF4JywgKCkgPT4gYEludmFsaWQgcG9vbCB0eXBlICR7cG9vbFR5cGV9YCk7XG4gICAgICBwcm9ncmFtID0gbmV3IFBvb2wyRFByb2dyYW0oY29udkluZm8sICdtYXgnKTtcbiAgICB9XG5cbiAgICBkaW1lbnNpb25zLnB1c2goXG4gICAgICAgIHt0eXBlOiAnaW50MzInLCBkYXRhOiBbY29udkluZm8ucGFkSW5mby50b3AsIGNvbnZJbmZvLnBhZEluZm8ubGVmdF19LCB7XG4gICAgICAgICAgdHlwZTogJ2ludDMyJyxcbiAgICAgICAgICBkYXRhOiBbY29udkluZm8uZGlsYXRpb25IZWlnaHQsIGNvbnZJbmZvLmRpbGF0aW9uV2lkdGhdXG4gICAgICAgIH0sXG4gICAgICAgIHt0eXBlOiAnaW50MzInLCBkYXRhOiBbY29udkluZm8uaW5IZWlnaHQsIGNvbnZJbmZvLmluV2lkdGhdfSwge1xuICAgICAgICAgIHR5cGU6ICdpbnQzMicsXG4gICAgICAgICAgZGF0YTogW2NvbnZJbmZvLmVmZmVjdGl2ZUZpbHRlckhlaWdodCwgY29udkluZm8uZWZmZWN0aXZlRmlsdGVyV2lkdGhdXG4gICAgICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIGJhY2tlbmQucnVuV2ViR1BVUHJvZ3JhbShwcm9ncmFtLCBbeF0sIHguZHR5cGUsIGRpbWVuc2lvbnMpO1xufVxuIl19","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { AvgPool, backend_util } from '@tensorflow/tfjs-core';\nimport { poolImpl } from './Pool_impl';\nexport function avgPool(args) {\n    const { inputs, backend, attrs } = args;\n    const { x } = inputs;\n    const { filterSize, strides, pad, dimRoundingMode } = attrs;\n    const dilations = 1;\n    const convInfo = backend_util.computePool2DInfo(x.shape, filterSize, strides, dilations, pad, dimRoundingMode);\n    return poolImpl(x, convInfo, 'avg', backend);\n}\nexport const avgPoolConfig = {\n    kernelName: AvgPool,\n    backendName: 'webgpu',\n    kernelFunc: avgPool\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQXZnUG9vbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2tlcm5lbHMvQXZnUG9vbC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFDSCxPQUFPLEVBQUMsT0FBTyxFQUErQixZQUFZLEVBQXVDLE1BQU0sdUJBQXVCLENBQUM7QUFHL0gsT0FBTyxFQUFDLFFBQVEsRUFBQyxNQUFNLGFBQWEsQ0FBQztBQUVyQyxNQUFNLFVBQVUsT0FBTyxDQUNuQixJQUEwRTtJQUU1RSxNQUFNLEVBQUMsTUFBTSxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUMsR0FBRyxJQUFJLENBQUM7SUFDdEMsTUFBTSxFQUFDLENBQUMsRUFBQyxHQUFHLE1BQU0sQ0FBQztJQUNuQixNQUFNLEVBQUMsVUFBVSxFQUFFLE9BQU8sRUFBRSxHQUFHLEVBQUUsZUFBZSxFQUFDLEdBQUcsS0FBSyxDQUFDO0lBQzFELE1BQU0sU0FBUyxHQUFHLENBQUMsQ0FBQztJQUNwQixNQUFNLFFBQVEsR0FBRyxZQUFZLENBQUMsaUJBQWlCLENBQzNDLENBQUMsQ0FBQyxLQUF5QyxFQUFFLFVBQVUsRUFBRSxPQUFPLEVBQ2hFLFNBQVMsRUFBRSxHQUFHLEVBQUUsZUFBZSxDQUFDLENBQUM7SUFFckMsT0FBTyxRQUFRLENBQUMsQ0FBQyxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQUUsT0FBTyxDQUFDLENBQUM7QUFDL0MsQ0FBQztBQUVELE1BQU0sQ0FBQyxNQUFNLGFBQWEsR0FBaUI7SUFDekMsVUFBVSxFQUFFLE9BQU87SUFDbkIsV0FBVyxFQUFFLFFBQVE7SUFDckIsVUFBVSxFQUFFLE9BQWdDO0NBQzdDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5pbXBvcnQge0F2Z1Bvb2wsIEF2Z1Bvb2xBdHRycywgQXZnUG9vbElucHV0cywgYmFja2VuZF91dGlsLCBLZXJuZWxDb25maWcsIEtlcm5lbEZ1bmMsIFRlbnNvckluZm99IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7V2ViR1BVQmFja2VuZH0gZnJvbSAnLi4vYmFja2VuZF93ZWJncHUnO1xuaW1wb3J0IHtwb29sSW1wbH0gZnJvbSAnLi9Qb29sX2ltcGwnO1xuXG5leHBvcnQgZnVuY3Rpb24gYXZnUG9vbChcbiAgICBhcmdzOiB7aW5wdXRzOiBBdmdQb29sSW5wdXRzLCBiYWNrZW5kOiBXZWJHUFVCYWNrZW5kLCBhdHRyczogQXZnUG9vbEF0dHJzfSk6XG4gICAgVGVuc29ySW5mbyB7XG4gIGNvbnN0IHtpbnB1dHMsIGJhY2tlbmQsIGF0dHJzfSA9IGFyZ3M7XG4gIGNvbnN0IHt4fSA9IGlucHV0cztcbiAgY29uc3Qge2ZpbHRlclNpemUsIHN0cmlkZXMsIHBhZCwgZGltUm91bmRpbmdNb2RlfSA9IGF0dHJzO1xuICBjb25zdCBkaWxhdGlvbnMgPSAxO1xuICBjb25zdCBjb252SW5mbyA9IGJhY2tlbmRfdXRpbC5jb21wdXRlUG9vbDJESW5mbyhcbiAgICAgIHguc2hhcGUgYXMgW251bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcl0sIGZpbHRlclNpemUsIHN0cmlkZXMsXG4gICAgICBkaWxhdGlvbnMsIHBhZCwgZGltUm91bmRpbmdNb2RlKTtcblxuICByZXR1cm4gcG9vbEltcGwoeCwgY29udkluZm8sICdhdmcnLCBiYWNrZW5kKTtcbn1cblxuZXhwb3J0IGNvbnN0IGF2Z1Bvb2xDb25maWc6IEtlcm5lbENvbmZpZyA9IHtcbiAga2VybmVsTmFtZTogQXZnUG9vbCxcbiAgYmFja2VuZE5hbWU6ICd3ZWJncHUnLFxuICBrZXJuZWxGdW5jOiBhdmdQb29sIGFzIHVua25vd24gYXMgS2VybmVsRnVuY1xufTtcbiJdfQ==","/**\n * @license\n * Copyright 2023 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { AvgPool3D, backend_util } from '@tensorflow/tfjs-core';\nimport { Pool3DProgram } from '../pool_webgpu';\nexport function avgPool3D(args) {\n    const { inputs, backend, attrs } = args;\n    const { x } = inputs;\n    const { filterSize, strides, pad, dataFormat, dimRoundingMode } = attrs;\n    const dilations = [1, 1, 1];\n    const convInfo = backend_util.computePool3DInfo(x.shape, filterSize, strides, dilations, pad, dimRoundingMode, dataFormat);\n    const avgPoolProgram = new Pool3DProgram(convInfo, 'avg');\n    const dimensions = [\n        {\n            type: 'int32',\n            data: [convInfo.strideDepth, convInfo.strideHeight, convInfo.strideWidth]\n        },\n        {\n            type: 'int32',\n            data: [convInfo.padInfo.front, convInfo.padInfo.top, convInfo.padInfo.left]\n        },\n        {\n            type: 'int32',\n            data: [convInfo.inDepth, convInfo.inHeight, convInfo.inWidth]\n        },\n        {\n            type: 'int32',\n            data: [\n                convInfo.effectiveFilterDepth, convInfo.effectiveFilterHeight,\n                convInfo.effectiveFilterWidth\n            ]\n        }\n    ];\n    return backend.runWebGPUProgram(avgPoolProgram, [x], x.dtype, dimensions);\n}\nexport const avgPool3DConfig = {\n    kernelName: AvgPool3D,\n    backendName: 'webgpu',\n    kernelFunc: avgPool3D\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQXZnUG9vbDNELmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMva2VybmVscy9BdmdQb29sM0QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBQ0gsT0FBTyxFQUFDLFNBQVMsRUFBbUMsWUFBWSxFQUF1QyxNQUFNLHVCQUF1QixDQUFDO0FBR3JJLE9BQU8sRUFBQyxhQUFhLEVBQUMsTUFBTSxnQkFBZ0IsQ0FBQztBQUU3QyxNQUFNLFVBQVUsU0FBUyxDQUFDLElBSXpCO0lBQ0MsTUFBTSxFQUFDLE1BQU0sRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFDLEdBQUcsSUFBSSxDQUFDO0lBQ3RDLE1BQU0sRUFBQyxDQUFDLEVBQUMsR0FBRyxNQUFNLENBQUM7SUFDbkIsTUFBTSxFQUFDLFVBQVUsRUFBRSxPQUFPLEVBQUUsR0FBRyxFQUFFLFVBQVUsRUFBRSxlQUFlLEVBQUMsR0FBRyxLQUFLLENBQUM7SUFDdEUsTUFBTSxTQUFTLEdBQTZCLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUV0RCxNQUFNLFFBQVEsR0FBRyxZQUFZLENBQUMsaUJBQWlCLENBQzNDLENBQUMsQ0FBQyxLQUFpRCxFQUFFLFVBQVUsRUFBRSxPQUFPLEVBQ3hFLFNBQVMsRUFBRSxHQUFHLEVBQUUsZUFBZSxFQUFFLFVBQVUsQ0FBQyxDQUFDO0lBQ2pELE1BQU0sY0FBYyxHQUFHLElBQUksYUFBYSxDQUFDLFFBQVEsRUFBRSxLQUFLLENBQUMsQ0FBQztJQUMxRCxNQUFNLFVBQVUsR0FBRztRQUNqQjtZQUNFLElBQUksRUFBRSxPQUFPO1lBQ2IsSUFBSSxFQUFFLENBQUMsUUFBUSxDQUFDLFdBQVcsRUFBRSxRQUFRLENBQUMsWUFBWSxFQUFFLFFBQVEsQ0FBQyxXQUFXLENBQUM7U0FDMUU7UUFDRDtZQUNFLElBQUksRUFBRSxPQUFPO1lBQ2IsSUFBSSxFQUNBLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsUUFBUSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsUUFBUSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUM7U0FDMUU7UUFDRDtZQUNFLElBQUksRUFBRSxPQUFPO1lBQ2IsSUFBSSxFQUFFLENBQUMsUUFBUSxDQUFDLE9BQU8sRUFBRSxRQUFRLENBQUMsUUFBUSxFQUFFLFFBQVEsQ0FBQyxPQUFPLENBQUM7U0FDOUQ7UUFDRDtZQUNFLElBQUksRUFBRSxPQUFPO1lBQ2IsSUFBSSxFQUFFO2dCQUNKLFFBQVEsQ0FBQyxvQkFBb0IsRUFBRSxRQUFRLENBQUMscUJBQXFCO2dCQUM3RCxRQUFRLENBQUMsb0JBQW9CO2FBQzlCO1NBQ0Y7S0FDRixDQUFDO0lBQ0YsT0FBTyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsY0FBYyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEtBQUssRUFBRSxVQUFVLENBQUMsQ0FBQztBQUM1RSxDQUFDO0FBRUQsTUFBTSxDQUFDLE1BQU0sZUFBZSxHQUFpQjtJQUMzQyxVQUFVLEVBQUUsU0FBUztJQUNyQixXQUFXLEVBQUUsUUFBUTtJQUNyQixVQUFVLEVBQUUsU0FBa0M7Q0FDL0MsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTEMuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cbmltcG9ydCB7QXZnUG9vbDNELCBBdmdQb29sM0RBdHRycywgQXZnUG9vbDNESW5wdXRzLCBiYWNrZW5kX3V0aWwsIEtlcm5lbENvbmZpZywgS2VybmVsRnVuYywgVGVuc29ySW5mb30gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcblxuaW1wb3J0IHtXZWJHUFVCYWNrZW5kfSBmcm9tICcuLi9iYWNrZW5kX3dlYmdwdSc7XG5pbXBvcnQge1Bvb2wzRFByb2dyYW19IGZyb20gJy4uL3Bvb2xfd2ViZ3B1JztcblxuZXhwb3J0IGZ1bmN0aW9uIGF2Z1Bvb2wzRChhcmdzOiB7XG4gIGlucHV0czogQXZnUG9vbDNESW5wdXRzLFxuICBiYWNrZW5kOiBXZWJHUFVCYWNrZW5kLFxuICBhdHRyczogQXZnUG9vbDNEQXR0cnNcbn0pOiBUZW5zb3JJbmZvIHtcbiAgY29uc3Qge2lucHV0cywgYmFja2VuZCwgYXR0cnN9ID0gYXJncztcbiAgY29uc3Qge3h9ID0gaW5wdXRzO1xuICBjb25zdCB7ZmlsdGVyU2l6ZSwgc3RyaWRlcywgcGFkLCBkYXRhRm9ybWF0LCBkaW1Sb3VuZGluZ01vZGV9ID0gYXR0cnM7XG4gIGNvbnN0IGRpbGF0aW9uczogW251bWJlciwgbnVtYmVyLCBudW1iZXJdID0gWzEsIDEsIDFdO1xuXG4gIGNvbnN0IGNvbnZJbmZvID0gYmFja2VuZF91dGlsLmNvbXB1dGVQb29sM0RJbmZvKFxuICAgICAgeC5zaGFwZSBhcyBbbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXJdLCBmaWx0ZXJTaXplLCBzdHJpZGVzLFxuICAgICAgZGlsYXRpb25zLCBwYWQsIGRpbVJvdW5kaW5nTW9kZSwgZGF0YUZvcm1hdCk7XG4gIGNvbnN0IGF2Z1Bvb2xQcm9ncmFtID0gbmV3IFBvb2wzRFByb2dyYW0oY29udkluZm8sICdhdmcnKTtcbiAgY29uc3QgZGltZW5zaW9ucyA9IFtcbiAgICB7XG4gICAgICB0eXBlOiAnaW50MzInLFxuICAgICAgZGF0YTogW2NvbnZJbmZvLnN0cmlkZURlcHRoLCBjb252SW5mby5zdHJpZGVIZWlnaHQsIGNvbnZJbmZvLnN0cmlkZVdpZHRoXVxuICAgIH0sXG4gICAge1xuICAgICAgdHlwZTogJ2ludDMyJyxcbiAgICAgIGRhdGE6XG4gICAgICAgICAgW2NvbnZJbmZvLnBhZEluZm8uZnJvbnQsIGNvbnZJbmZvLnBhZEluZm8udG9wLCBjb252SW5mby5wYWRJbmZvLmxlZnRdXG4gICAgfSxcbiAgICB7XG4gICAgICB0eXBlOiAnaW50MzInLFxuICAgICAgZGF0YTogW2NvbnZJbmZvLmluRGVwdGgsIGNvbnZJbmZvLmluSGVpZ2h0LCBjb252SW5mby5pbldpZHRoXVxuICAgIH0sXG4gICAge1xuICAgICAgdHlwZTogJ2ludDMyJyxcbiAgICAgIGRhdGE6IFtcbiAgICAgICAgY29udkluZm8uZWZmZWN0aXZlRmlsdGVyRGVwdGgsIGNvbnZJbmZvLmVmZmVjdGl2ZUZpbHRlckhlaWdodCxcbiAgICAgICAgY29udkluZm8uZWZmZWN0aXZlRmlsdGVyV2lkdGhcbiAgICAgIF1cbiAgICB9XG4gIF07XG4gIHJldHVybiBiYWNrZW5kLnJ1bldlYkdQVVByb2dyYW0oYXZnUG9vbFByb2dyYW0sIFt4XSwgeC5kdHlwZSwgZGltZW5zaW9ucyk7XG59XG5cbmV4cG9ydCBjb25zdCBhdmdQb29sM0RDb25maWc6IEtlcm5lbENvbmZpZyA9IHtcbiAga2VybmVsTmFtZTogQXZnUG9vbDNELFxuICBiYWNrZW5kTmFtZTogJ3dlYmdwdScsXG4gIGtlcm5lbEZ1bmM6IGF2Z1Bvb2wzRCBhcyB1bmtub3duIGFzIEtlcm5lbEZ1bmNcbn07XG4iXX0=","/**\n * @license\n * Copyright 2022 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { getMainHeaderString as main } from './webgpu_program';\nimport { computeDispatch, flatDispatchLayout } from './webgpu_util';\nexport class AvgPool2DBackpropProgram {\n    constructor(convInfo) {\n        this.variableNames = ['dy'];\n        this.uniforms = `strides : vec2<i32>, pads : vec2<i32>, dilations : vec2<i32>, filterDims : vec2<i32>,\n       outHeight : i32, outWidth : i32, avgMultiplier : f32,`;\n        this.workgroupSize = [64, 1, 1];\n        this.size = true;\n        this.outputShape = convInfo.inShape;\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize);\n        this.shaderKey = `avgPool2DBackprop`;\n    }\n    getUserCode() {\n        const userCode = `\n      ${main('index')} {\n      if (index < uniforms.size) {\n        let coords = getCoordsFromIndex(index);\n        let batch = coords[0];\n        let d = coords[3];\n\n        let dyRCCorner = vec2<i32>(coords.yz) - uniforms.pads;\n        let dyRCorner = dyRCCorner.x;\n        let dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        var dotProd = 0.0;\n        for (var wR = 0; wR < uniforms.filterDims[0]; wR = wR + uniforms.dilations[0]) {\n          let dyR = f32(dyRCorner + wR) / f32(uniforms.strides[0]);\n\n          if (dyR < 0.0 || dyR >= f32(uniforms.outHeight) || fract(dyR) > 0.0) {\n            continue;\n          }\n          let idyR = i32(dyR);\n\n          for (var wC = 0; wC < uniforms.filterDims[1]; wC = wC + uniforms.dilations[1]) {\n            let dyC = f32(dyCCorner + wC) / f32(uniforms.strides[1]);\n\n            if (dyC < 0.0 || dyC >= f32(uniforms.outWidth) || fract(dyC) > 0.0) {\n              continue;\n            }\n            let idyC = i32(dyC);\n\n            let dyValue = getDy(batch, idyR, idyC, d);\n\n            dotProd = dotProd + dyValue * uniforms.avgMultiplier;\n          }\n        }\n        setOutputAtIndex(index, dotProd);\n      }\n    }\n    `;\n        return userCode;\n    }\n}\nexport class AvgPool3DBackpropProgram {\n    constructor(convInfo) {\n        this.variableNames = ['dy'];\n        this.uniforms = `strides : vec3<i32>, pads : vec3<i32>, filterDims : vec3<i32>,\n       outDepth : i32, outHeight : i32, outWidth : i32, avgMultiplier : f32,`;\n        this.workgroupSize = [64, 1, 1];\n        this.size = true;\n        this.outputShape = convInfo.inShape;\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize);\n        this.shaderKey = `avgPool3DBackprop`;\n    }\n    getUserCode() {\n        const userCode = `\n      ${main('index')} {\n      if (index < uniforms.size) {\n        let coords = getCoordsFromIndex(index);\n        let batch = coords.x;\n        let ch = coords.u;\n\n        let dyCorner = vec3<i32>(coords.y, coords.z, coords.w) - uniforms.pads;\n        let dyDCorner = dyCorner.x;\n        let dyRCorner = dyCorner.y;\n        let dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        var dotProd = 0.0;\n        for (var wD = 0; wD < uniforms.filterDims[0]; wD++) {\n          let dyD = f32(dyDCorner + wD) / f32(uniforms.strides[0]);\n\n          if (dyD < 0.0 || dyD >= f32(uniforms.outDepth) || fract(dyD) > 0.0) {\n            continue;\n          }\n          let idyD = i32(dyD);\n\n          for (var wR = 0; wR < uniforms.filterDims[1]; wR++) {\n            let dyR = f32(dyRCorner + wR) / f32(uniforms.strides[1]);\n\n            if (dyR < 0.0 || dyR >= f32(uniforms.outHeight) || fract(dyR) > 0.0) {\n              continue;\n            }\n            let idyR = i32(dyR);\n\n            for (var wC = 0; wC < uniforms.filterDims[2]; wC++) {\n              let dyC = f32(dyCCorner + wC) / f32(uniforms.strides[2]);\n\n              if (dyC < 0.0 || dyC >= f32(uniforms.outWidth) || fract(dyC) > 0.0) {\n                continue;\n              }\n              let idyC = i32(dyC);\n\n              let dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              dotProd += dyValue * uniforms.avgMultiplier;\n            }\n          }\n        }\n        setOutputAtIndex(index, dotProd);\n      }\n    }\n    `;\n        return userCode;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXZnX3Bvb2xfYmFja3Byb3Bfd2ViZ3B1LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMvYXZnX3Bvb2xfYmFja3Byb3Bfd2ViZ3B1LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUdILE9BQU8sRUFBQyxtQkFBbUIsSUFBSSxJQUFJLEVBQWdCLE1BQU0sa0JBQWtCLENBQUM7QUFDNUUsT0FBTyxFQUFDLGVBQWUsRUFBRSxrQkFBa0IsRUFBQyxNQUFNLGVBQWUsQ0FBQztBQUVsRSxNQUFNLE9BQU8sd0JBQXdCO0lBWW5DLFlBQVksUUFBaUM7UUFQN0Msa0JBQWEsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3ZCLGFBQVEsR0FDSjs2REFDdUQsQ0FBQztRQUM1RCxrQkFBYSxHQUE2QixDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDckQsU0FBSSxHQUFHLElBQUksQ0FBQztRQUdWLElBQUksQ0FBQyxXQUFXLEdBQUcsUUFBUSxDQUFDLE9BQU8sQ0FBQztRQUVwQyxJQUFJLENBQUMsY0FBYyxHQUFHLGtCQUFrQixDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUUzRCxJQUFJLENBQUMsUUFBUSxHQUFHLGVBQWUsQ0FDM0IsSUFBSSxDQUFDLGNBQWMsRUFBRSxJQUFJLENBQUMsV0FBVyxFQUFFLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQztRQUUvRCxJQUFJLENBQUMsU0FBUyxHQUFHLG1CQUFtQixDQUFDO0lBQ3ZDLENBQUM7SUFFRCxXQUFXO1FBQ1QsTUFBTSxRQUFRLEdBQUc7UUFDYixJQUFJLENBQUMsT0FBTyxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0tBcUNoQixDQUFDO1FBQ0YsT0FBTyxRQUFRLENBQUM7SUFDbEIsQ0FBQztDQUNGO0FBRUQsTUFBTSxPQUFPLHdCQUF3QjtJQVduQyxZQUFZLFFBQWlDO1FBTjdDLGtCQUFhLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN2QixhQUFRLEdBQUc7NkVBQ2dFLENBQUM7UUFDNUUsa0JBQWEsR0FBNkIsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ3JELFNBQUksR0FBRyxJQUFJLENBQUM7UUFHVixJQUFJLENBQUMsV0FBVyxHQUFHLFFBQVEsQ0FBQyxPQUFPLENBQUM7UUFFcEMsSUFBSSxDQUFDLGNBQWMsR0FBRyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7UUFFM0QsSUFBSSxDQUFDLFFBQVEsR0FBRyxlQUFlLENBQzNCLElBQUksQ0FBQyxjQUFjLEVBQUUsSUFBSSxDQUFDLFdBQVcsRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7UUFFL0QsSUFBSSxDQUFDLFNBQVMsR0FBRyxtQkFBbUIsQ0FBQztJQUN2QyxDQUFDO0lBRUQsV0FBVztRQUNULE1BQU0sUUFBUSxHQUFHO1FBQ2IsSUFBSSxDQUFDLE9BQU8sQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7S0ErQ2hCLENBQUM7UUFDRixPQUFPLFFBQVEsQ0FBQztJQUNsQixDQUFDO0NBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7YmFja2VuZF91dGlsfSBmcm9tICdAdGVuc29yZmxvdy90ZmpzLWNvcmUnO1xuaW1wb3J0IHtnZXRNYWluSGVhZGVyU3RyaW5nIGFzIG1haW4sIFdlYkdQVVByb2dyYW19IGZyb20gJy4vd2ViZ3B1X3Byb2dyYW0nO1xuaW1wb3J0IHtjb21wdXRlRGlzcGF0Y2gsIGZsYXREaXNwYXRjaExheW91dH0gZnJvbSAnLi93ZWJncHVfdXRpbCc7XG5cbmV4cG9ydCBjbGFzcyBBdmdQb29sMkRCYWNrcHJvcFByb2dyYW0gaW1wbGVtZW50cyBXZWJHUFVQcm9ncmFtIHtcbiAgb3V0cHV0U2hhcGU6IG51bWJlcltdO1xuICBzaGFkZXJLZXk6IHN0cmluZztcbiAgZGlzcGF0Y2hMYXlvdXQ6IHt4OiBudW1iZXJbXX07XG4gIGRpc3BhdGNoOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl07XG4gIHZhcmlhYmxlTmFtZXMgPSBbJ2R5J107XG4gIHVuaWZvcm1zID1cbiAgICAgIGBzdHJpZGVzIDogdmVjMjxpMzI+LCBwYWRzIDogdmVjMjxpMzI+LCBkaWxhdGlvbnMgOiB2ZWMyPGkzMj4sIGZpbHRlckRpbXMgOiB2ZWMyPGkzMj4sXG4gICAgICAgb3V0SGVpZ2h0IDogaTMyLCBvdXRXaWR0aCA6IGkzMiwgYXZnTXVsdGlwbGllciA6IGYzMixgO1xuICB3b3JrZ3JvdXBTaXplOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl0gPSBbNjQsIDEsIDFdO1xuICBzaXplID0gdHJ1ZTtcblxuICBjb25zdHJ1Y3Rvcihjb252SW5mbzogYmFja2VuZF91dGlsLkNvbnYyREluZm8pIHtcbiAgICB0aGlzLm91dHB1dFNoYXBlID0gY29udkluZm8uaW5TaGFwZTtcblxuICAgIHRoaXMuZGlzcGF0Y2hMYXlvdXQgPSBmbGF0RGlzcGF0Y2hMYXlvdXQodGhpcy5vdXRwdXRTaGFwZSk7XG5cbiAgICB0aGlzLmRpc3BhdGNoID0gY29tcHV0ZURpc3BhdGNoKFxuICAgICAgICB0aGlzLmRpc3BhdGNoTGF5b3V0LCB0aGlzLm91dHB1dFNoYXBlLCB0aGlzLndvcmtncm91cFNpemUpO1xuXG4gICAgdGhpcy5zaGFkZXJLZXkgPSBgYXZnUG9vbDJEQmFja3Byb3BgO1xuICB9XG5cbiAgZ2V0VXNlckNvZGUoKTogc3RyaW5nIHtcbiAgICBjb25zdCB1c2VyQ29kZSA9IGBcbiAgICAgICR7bWFpbignaW5kZXgnKX0ge1xuICAgICAgaWYgKGluZGV4IDwgdW5pZm9ybXMuc2l6ZSkge1xuICAgICAgICBsZXQgY29vcmRzID0gZ2V0Q29vcmRzRnJvbUluZGV4KGluZGV4KTtcbiAgICAgICAgbGV0IGJhdGNoID0gY29vcmRzWzBdO1xuICAgICAgICBsZXQgZCA9IGNvb3Jkc1szXTtcblxuICAgICAgICBsZXQgZHlSQ0Nvcm5lciA9IHZlYzI8aTMyPihjb29yZHMueXopIC0gdW5pZm9ybXMucGFkcztcbiAgICAgICAgbGV0IGR5UkNvcm5lciA9IGR5UkNDb3JuZXIueDtcbiAgICAgICAgbGV0IGR5Q0Nvcm5lciA9IGR5UkNDb3JuZXIueTtcblxuICAgICAgICAvLyBDb252b2x2ZSBkeSg/LCA/LCBkKSB3aXRoIHBvcyBtYXNrKDosIDosIGQpIHRvIGdldCBkeCh4UiwgeEMsIGQpLlxuICAgICAgICAvLyA/ID0gdG8gYmUgZGV0ZXJtaW5lZC4gOiA9IGFjcm9zcyBhbGwgdmFsdWVzIGluIHRoYXQgYXhpcy5cbiAgICAgICAgdmFyIGRvdFByb2QgPSAwLjA7XG4gICAgICAgIGZvciAodmFyIHdSID0gMDsgd1IgPCB1bmlmb3Jtcy5maWx0ZXJEaW1zWzBdOyB3UiA9IHdSICsgdW5pZm9ybXMuZGlsYXRpb25zWzBdKSB7XG4gICAgICAgICAgbGV0IGR5UiA9IGYzMihkeVJDb3JuZXIgKyB3UikgLyBmMzIodW5pZm9ybXMuc3RyaWRlc1swXSk7XG5cbiAgICAgICAgICBpZiAoZHlSIDwgMC4wIHx8IGR5UiA+PSBmMzIodW5pZm9ybXMub3V0SGVpZ2h0KSB8fCBmcmFjdChkeVIpID4gMC4wKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgbGV0IGlkeVIgPSBpMzIoZHlSKTtcblxuICAgICAgICAgIGZvciAodmFyIHdDID0gMDsgd0MgPCB1bmlmb3Jtcy5maWx0ZXJEaW1zWzFdOyB3QyA9IHdDICsgdW5pZm9ybXMuZGlsYXRpb25zWzFdKSB7XG4gICAgICAgICAgICBsZXQgZHlDID0gZjMyKGR5Q0Nvcm5lciArIHdDKSAvIGYzMih1bmlmb3Jtcy5zdHJpZGVzWzFdKTtcblxuICAgICAgICAgICAgaWYgKGR5QyA8IDAuMCB8fCBkeUMgPj0gZjMyKHVuaWZvcm1zLm91dFdpZHRoKSB8fCBmcmFjdChkeUMpID4gMC4wKSB7XG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IGlkeUMgPSBpMzIoZHlDKTtcblxuICAgICAgICAgICAgbGV0IGR5VmFsdWUgPSBnZXREeShiYXRjaCwgaWR5UiwgaWR5QywgZCk7XG5cbiAgICAgICAgICAgIGRvdFByb2QgPSBkb3RQcm9kICsgZHlWYWx1ZSAqIHVuaWZvcm1zLmF2Z011bHRpcGxpZXI7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNldE91dHB1dEF0SW5kZXgoaW5kZXgsIGRvdFByb2QpO1xuICAgICAgfVxuICAgIH1cbiAgICBgO1xuICAgIHJldHVybiB1c2VyQ29kZTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQXZnUG9vbDNEQmFja3Byb3BQcm9ncmFtIGltcGxlbWVudHMgV2ViR1BVUHJvZ3JhbSB7XG4gIG91dHB1dFNoYXBlOiBudW1iZXJbXTtcbiAgc2hhZGVyS2V5OiBzdHJpbmc7XG4gIGRpc3BhdGNoTGF5b3V0OiB7eDogbnVtYmVyW119O1xuICBkaXNwYXRjaDogW251bWJlciwgbnVtYmVyLCBudW1iZXJdO1xuICB2YXJpYWJsZU5hbWVzID0gWydkeSddO1xuICB1bmlmb3JtcyA9IGBzdHJpZGVzIDogdmVjMzxpMzI+LCBwYWRzIDogdmVjMzxpMzI+LCBmaWx0ZXJEaW1zIDogdmVjMzxpMzI+LFxuICAgICAgIG91dERlcHRoIDogaTMyLCBvdXRIZWlnaHQgOiBpMzIsIG91dFdpZHRoIDogaTMyLCBhdmdNdWx0aXBsaWVyIDogZjMyLGA7XG4gIHdvcmtncm91cFNpemU6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXSA9IFs2NCwgMSwgMV07XG4gIHNpemUgPSB0cnVlO1xuXG4gIGNvbnN0cnVjdG9yKGNvbnZJbmZvOiBiYWNrZW5kX3V0aWwuQ29udjNESW5mbykge1xuICAgIHRoaXMub3V0cHV0U2hhcGUgPSBjb252SW5mby5pblNoYXBlO1xuXG4gICAgdGhpcy5kaXNwYXRjaExheW91dCA9IGZsYXREaXNwYXRjaExheW91dCh0aGlzLm91dHB1dFNoYXBlKTtcblxuICAgIHRoaXMuZGlzcGF0Y2ggPSBjb21wdXRlRGlzcGF0Y2goXG4gICAgICAgIHRoaXMuZGlzcGF0Y2hMYXlvdXQsIHRoaXMub3V0cHV0U2hhcGUsIHRoaXMud29ya2dyb3VwU2l6ZSk7XG5cbiAgICB0aGlzLnNoYWRlcktleSA9IGBhdmdQb29sM0RCYWNrcHJvcGA7XG4gIH1cblxuICBnZXRVc2VyQ29kZSgpOiBzdHJpbmcge1xuICAgIGNvbnN0IHVzZXJDb2RlID0gYFxuICAgICAgJHttYWluKCdpbmRleCcpfSB7XG4gICAgICBpZiAoaW5kZXggPCB1bmlmb3Jtcy5zaXplKSB7XG4gICAgICAgIGxldCBjb29yZHMgPSBnZXRDb29yZHNGcm9tSW5kZXgoaW5kZXgpO1xuICAgICAgICBsZXQgYmF0Y2ggPSBjb29yZHMueDtcbiAgICAgICAgbGV0IGNoID0gY29vcmRzLnU7XG5cbiAgICAgICAgbGV0IGR5Q29ybmVyID0gdmVjMzxpMzI+KGNvb3Jkcy55LCBjb29yZHMueiwgY29vcmRzLncpIC0gdW5pZm9ybXMucGFkcztcbiAgICAgICAgbGV0IGR5RENvcm5lciA9IGR5Q29ybmVyLng7XG4gICAgICAgIGxldCBkeVJDb3JuZXIgPSBkeUNvcm5lci55O1xuICAgICAgICBsZXQgZHlDQ29ybmVyID0gZHlDb3JuZXIuejtcblxuICAgICAgICAvLyBDb252b2x2ZSBkeSg/LCA/LCA/LCBkKSB3aXRoIHBvcyBtYXNrKDosIDosIDosIGNoKSB0byBnZXRcbiAgICAgICAgLy8gZHgoeEQsIHhSLCB4QywgY2gpLlxuICAgICAgICAvLyA/ID0gdG8gYmUgZGV0ZXJtaW5lZC4gOiA9IGFjcm9zcyBhbGwgdmFsdWVzIGluIHRoYXQgYXhpcy5cbiAgICAgICAgdmFyIGRvdFByb2QgPSAwLjA7XG4gICAgICAgIGZvciAodmFyIHdEID0gMDsgd0QgPCB1bmlmb3Jtcy5maWx0ZXJEaW1zWzBdOyB3RCsrKSB7XG4gICAgICAgICAgbGV0IGR5RCA9IGYzMihkeURDb3JuZXIgKyB3RCkgLyBmMzIodW5pZm9ybXMuc3RyaWRlc1swXSk7XG5cbiAgICAgICAgICBpZiAoZHlEIDwgMC4wIHx8IGR5RCA+PSBmMzIodW5pZm9ybXMub3V0RGVwdGgpIHx8IGZyYWN0KGR5RCkgPiAwLjApIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBsZXQgaWR5RCA9IGkzMihkeUQpO1xuXG4gICAgICAgICAgZm9yICh2YXIgd1IgPSAwOyB3UiA8IHVuaWZvcm1zLmZpbHRlckRpbXNbMV07IHdSKyspIHtcbiAgICAgICAgICAgIGxldCBkeVIgPSBmMzIoZHlSQ29ybmVyICsgd1IpIC8gZjMyKHVuaWZvcm1zLnN0cmlkZXNbMV0pO1xuXG4gICAgICAgICAgICBpZiAoZHlSIDwgMC4wIHx8IGR5UiA+PSBmMzIodW5pZm9ybXMub3V0SGVpZ2h0KSB8fCBmcmFjdChkeVIpID4gMC4wKSB7XG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IGlkeVIgPSBpMzIoZHlSKTtcblxuICAgICAgICAgICAgZm9yICh2YXIgd0MgPSAwOyB3QyA8IHVuaWZvcm1zLmZpbHRlckRpbXNbMl07IHdDKyspIHtcbiAgICAgICAgICAgICAgbGV0IGR5QyA9IGYzMihkeUNDb3JuZXIgKyB3QykgLyBmMzIodW5pZm9ybXMuc3RyaWRlc1syXSk7XG5cbiAgICAgICAgICAgICAgaWYgKGR5QyA8IDAuMCB8fCBkeUMgPj0gZjMyKHVuaWZvcm1zLm91dFdpZHRoKSB8fCBmcmFjdChkeUMpID4gMC4wKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgbGV0IGlkeUMgPSBpMzIoZHlDKTtcblxuICAgICAgICAgICAgICBsZXQgZHlWYWx1ZSA9IGdldER5KGJhdGNoLCBpZHlELCBpZHlSLCBpZHlDLCBjaCk7XG4gICAgICAgICAgICAgIGRvdFByb2QgKz0gZHlWYWx1ZSAqIHVuaWZvcm1zLmF2Z011bHRpcGxpZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNldE91dHB1dEF0SW5kZXgoaW5kZXgsIGRvdFByb2QpO1xuICAgICAgfVxuICAgIH1cbiAgICBgO1xuICAgIHJldHVybiB1c2VyQ29kZTtcbiAgfVxufVxuIl19","/**\n * @license\n * Copyright 2023 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { AvgPool3DGrad, backend_util } from '@tensorflow/tfjs-core';\nimport { AvgPool3DBackpropProgram } from '../avg_pool_backprop_webgpu';\nexport function avgPool3DGrad(args) {\n    const { inputs, backend, attrs } = args;\n    const { dy, input } = inputs;\n    const x = input;\n    const { filterSize, strides, pad, dimRoundingMode } = attrs;\n    const convInfo = backend_util.computePool3DInfo(x.shape, filterSize, strides, 1 /* dilations */, pad, dimRoundingMode);\n    const program = new AvgPool3DBackpropProgram(convInfo);\n    const avgMultiplier = 1 / (convInfo.filterDepth * convInfo.filterHeight * convInfo.filterWidth);\n    const uniformData = [\n        {\n            type: 'int32',\n            data: [convInfo.strideDepth, convInfo.strideHeight, convInfo.strideWidth]\n        },\n        {\n            type: 'int32',\n            data: [\n                convInfo.effectiveFilterDepth - 1 - convInfo.padInfo.front,\n                convInfo.effectiveFilterHeight - 1 - convInfo.padInfo.top,\n                convInfo.effectiveFilterWidth - 1 - convInfo.padInfo.left\n            ]\n        },\n        {\n            type: 'int32',\n            data: [\n                convInfo.effectiveFilterDepth, convInfo.effectiveFilterHeight,\n                convInfo.effectiveFilterWidth\n            ]\n        },\n        { type: 'int32', data: [convInfo.outDepth] },\n        { type: 'int32', data: [convInfo.outHeight] },\n        { type: 'int32', data: [convInfo.outWidth] },\n        { type: 'float32', data: [avgMultiplier] }\n    ];\n    return backend.runWebGPUProgram(program, [dy], x.dtype, uniformData);\n}\nexport const avgPool3DGradConfig = {\n    kernelName: AvgPool3DGrad,\n    backendName: 'webgpu',\n    kernelFunc: avgPool3DGrad\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQXZnUG9vbDNER3JhZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2tlcm5lbHMvQXZnUG9vbDNER3JhZC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQUMsYUFBYSxFQUEyQyxZQUFZLEVBQXVDLE1BQU0sdUJBQXVCLENBQUM7QUFFakosT0FBTyxFQUFDLHdCQUF3QixFQUFDLE1BQU0sNkJBQTZCLENBQUM7QUFHckUsTUFBTSxVQUFVLGFBQWEsQ0FBQyxJQUk3QjtJQUNDLE1BQU0sRUFBQyxNQUFNLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBQyxHQUFHLElBQUksQ0FBQztJQUN0QyxNQUFNLEVBQUMsRUFBRSxFQUFFLEtBQUssRUFBQyxHQUFHLE1BQU0sQ0FBQztJQUMzQixNQUFNLENBQUMsR0FBRyxLQUFLLENBQUM7SUFDaEIsTUFBTSxFQUFDLFVBQVUsRUFBRSxPQUFPLEVBQUUsR0FBRyxFQUFFLGVBQWUsRUFBQyxHQUFHLEtBQUssQ0FBQztJQUUxRCxNQUFNLFFBQVEsR0FBRyxZQUFZLENBQUMsaUJBQWlCLENBQzNDLENBQUMsQ0FBQyxLQUFpRCxFQUFFLFVBQVUsRUFBRSxPQUFPLEVBQ3hFLENBQUMsQ0FBQyxlQUFlLEVBQUUsR0FBRyxFQUFFLGVBQWUsQ0FBQyxDQUFDO0lBQzdDLE1BQU0sT0FBTyxHQUFHLElBQUksd0JBQXdCLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDdkQsTUFBTSxhQUFhLEdBQ2YsQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLFdBQVcsR0FBRyxRQUFRLENBQUMsWUFBWSxHQUFHLFFBQVEsQ0FBQyxXQUFXLENBQUMsQ0FBQztJQUM5RSxNQUFNLFdBQVcsR0FBRztRQUNsQjtZQUNFLElBQUksRUFBRSxPQUFPO1lBQ2IsSUFBSSxFQUFFLENBQUMsUUFBUSxDQUFDLFdBQVcsRUFBRSxRQUFRLENBQUMsWUFBWSxFQUFFLFFBQVEsQ0FBQyxXQUFXLENBQUM7U0FDMUU7UUFDRDtZQUNFLElBQUksRUFBRSxPQUFPO1lBQ2IsSUFBSSxFQUFFO2dCQUNKLFFBQVEsQ0FBQyxvQkFBb0IsR0FBRyxDQUFDLEdBQUcsUUFBUSxDQUFDLE9BQU8sQ0FBQyxLQUFLO2dCQUMxRCxRQUFRLENBQUMscUJBQXFCLEdBQUcsQ0FBQyxHQUFHLFFBQVEsQ0FBQyxPQUFPLENBQUMsR0FBRztnQkFDekQsUUFBUSxDQUFDLG9CQUFvQixHQUFHLENBQUMsR0FBRyxRQUFRLENBQUMsT0FBTyxDQUFDLElBQUk7YUFDMUQ7U0FDRjtRQUNEO1lBQ0UsSUFBSSxFQUFFLE9BQU87WUFDYixJQUFJLEVBQUU7Z0JBQ0osUUFBUSxDQUFDLG9CQUFvQixFQUFFLFFBQVEsQ0FBQyxxQkFBcUI7Z0JBQzdELFFBQVEsQ0FBQyxvQkFBb0I7YUFDOUI7U0FDRjtRQUNELEVBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLEVBQUM7UUFDMUMsRUFBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsRUFBQztRQUMzQyxFQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxFQUFDO1FBQzFDLEVBQUMsSUFBSSxFQUFFLFNBQVMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxhQUFhLENBQUMsRUFBQztLQUN6QyxDQUFDO0lBQ0YsT0FBTyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEtBQUssRUFBRSxXQUFXLENBQUMsQ0FBQztBQUN2RSxDQUFDO0FBRUQsTUFBTSxDQUFDLE1BQU0sbUJBQW1CLEdBQWlCO0lBQy9DLFVBQVUsRUFBRSxhQUFhO0lBQ3pCLFdBQVcsRUFBRSxRQUFRO0lBQ3JCLFVBQVUsRUFBRSxhQUFzQztDQUNuRCxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjMgR29vZ2xlIExMQy5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge0F2Z1Bvb2wzREdyYWQsIEF2Z1Bvb2wzREdyYWRBdHRycywgQXZnUG9vbDNER3JhZElucHV0cywgYmFja2VuZF91dGlsLCBLZXJuZWxDb25maWcsIEtlcm5lbEZ1bmMsIFRlbnNvckluZm99IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7QXZnUG9vbDNEQmFja3Byb3BQcm9ncmFtfSBmcm9tICcuLi9hdmdfcG9vbF9iYWNrcHJvcF93ZWJncHUnO1xuaW1wb3J0IHtXZWJHUFVCYWNrZW5kfSBmcm9tICcuLi9iYWNrZW5kX3dlYmdwdSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBhdmdQb29sM0RHcmFkKGFyZ3M6IHtcbiAgaW5wdXRzOiBBdmdQb29sM0RHcmFkSW5wdXRzLFxuICBiYWNrZW5kOiBXZWJHUFVCYWNrZW5kLFxuICBhdHRyczogQXZnUG9vbDNER3JhZEF0dHJzXG59KTogVGVuc29ySW5mbyB7XG4gIGNvbnN0IHtpbnB1dHMsIGJhY2tlbmQsIGF0dHJzfSA9IGFyZ3M7XG4gIGNvbnN0IHtkeSwgaW5wdXR9ID0gaW5wdXRzO1xuICBjb25zdCB4ID0gaW5wdXQ7XG4gIGNvbnN0IHtmaWx0ZXJTaXplLCBzdHJpZGVzLCBwYWQsIGRpbVJvdW5kaW5nTW9kZX0gPSBhdHRycztcblxuICBjb25zdCBjb252SW5mbyA9IGJhY2tlbmRfdXRpbC5jb21wdXRlUG9vbDNESW5mbyhcbiAgICAgIHguc2hhcGUgYXMgW251bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyXSwgZmlsdGVyU2l6ZSwgc3RyaWRlcyxcbiAgICAgIDEgLyogZGlsYXRpb25zICovLCBwYWQsIGRpbVJvdW5kaW5nTW9kZSk7XG4gIGNvbnN0IHByb2dyYW0gPSBuZXcgQXZnUG9vbDNEQmFja3Byb3BQcm9ncmFtKGNvbnZJbmZvKTtcbiAgY29uc3QgYXZnTXVsdGlwbGllciA9XG4gICAgICAxIC8gKGNvbnZJbmZvLmZpbHRlckRlcHRoICogY29udkluZm8uZmlsdGVySGVpZ2h0ICogY29udkluZm8uZmlsdGVyV2lkdGgpO1xuICBjb25zdCB1bmlmb3JtRGF0YSA9IFtcbiAgICB7XG4gICAgICB0eXBlOiAnaW50MzInLFxuICAgICAgZGF0YTogW2NvbnZJbmZvLnN0cmlkZURlcHRoLCBjb252SW5mby5zdHJpZGVIZWlnaHQsIGNvbnZJbmZvLnN0cmlkZVdpZHRoXVxuICAgIH0sXG4gICAge1xuICAgICAgdHlwZTogJ2ludDMyJyxcbiAgICAgIGRhdGE6IFtcbiAgICAgICAgY29udkluZm8uZWZmZWN0aXZlRmlsdGVyRGVwdGggLSAxIC0gY29udkluZm8ucGFkSW5mby5mcm9udCxcbiAgICAgICAgY29udkluZm8uZWZmZWN0aXZlRmlsdGVySGVpZ2h0IC0gMSAtIGNvbnZJbmZvLnBhZEluZm8udG9wLFxuICAgICAgICBjb252SW5mby5lZmZlY3RpdmVGaWx0ZXJXaWR0aCAtIDEgLSBjb252SW5mby5wYWRJbmZvLmxlZnRcbiAgICAgIF1cbiAgICB9LFxuICAgIHtcbiAgICAgIHR5cGU6ICdpbnQzMicsXG4gICAgICBkYXRhOiBbXG4gICAgICAgIGNvbnZJbmZvLmVmZmVjdGl2ZUZpbHRlckRlcHRoLCBjb252SW5mby5lZmZlY3RpdmVGaWx0ZXJIZWlnaHQsXG4gICAgICAgIGNvbnZJbmZvLmVmZmVjdGl2ZUZpbHRlcldpZHRoXG4gICAgICBdXG4gICAgfSxcbiAgICB7dHlwZTogJ2ludDMyJywgZGF0YTogW2NvbnZJbmZvLm91dERlcHRoXX0sXG4gICAge3R5cGU6ICdpbnQzMicsIGRhdGE6IFtjb252SW5mby5vdXRIZWlnaHRdfSxcbiAgICB7dHlwZTogJ2ludDMyJywgZGF0YTogW2NvbnZJbmZvLm91dFdpZHRoXX0sXG4gICAge3R5cGU6ICdmbG9hdDMyJywgZGF0YTogW2F2Z011bHRpcGxpZXJdfVxuICBdO1xuICByZXR1cm4gYmFja2VuZC5ydW5XZWJHUFVQcm9ncmFtKHByb2dyYW0sIFtkeV0sIHguZHR5cGUsIHVuaWZvcm1EYXRhKTtcbn1cblxuZXhwb3J0IGNvbnN0IGF2Z1Bvb2wzREdyYWRDb25maWc6IEtlcm5lbENvbmZpZyA9IHtcbiAga2VybmVsTmFtZTogQXZnUG9vbDNER3JhZCxcbiAgYmFja2VuZE5hbWU6ICd3ZWJncHUnLFxuICBrZXJuZWxGdW5jOiBhdmdQb29sM0RHcmFkIGFzIHVua25vd24gYXMgS2VybmVsRnVuY1xufTtcbiJdfQ==","/**\n * @license\n * Copyright 2022 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { AvgPoolGrad, backend_util } from '@tensorflow/tfjs-core';\nimport { AvgPool2DBackpropProgram } from '../avg_pool_backprop_webgpu';\nimport { assertNotComplex } from '../webgpu_util';\nexport function avgPoolGrad(args) {\n    const { inputs, backend, attrs } = args;\n    const { dy, input } = inputs;\n    const x = input;\n    assertNotComplex([dy, input], 'avgPoolGrad');\n    const { filterSize, strides, pad } = attrs;\n    const convInfo = backend_util.computePool2DInfo(x.shape, filterSize, strides, 1 /* dilations */, pad);\n    const program = new AvgPool2DBackpropProgram(convInfo);\n    const avgMultiplier = 1 / (convInfo.filterHeight * convInfo.filterWidth);\n    const uniformData = [\n        { type: 'int32', data: [convInfo.strideHeight, convInfo.strideWidth] }, {\n            type: 'int32',\n            data: [\n                convInfo.effectiveFilterHeight - 1 - convInfo.padInfo.top,\n                convInfo.effectiveFilterWidth - 1 - convInfo.padInfo.left\n            ]\n        },\n        { type: 'int32', data: [convInfo.dilationHeight, convInfo.dilationWidth] }, {\n            type: 'int32',\n            data: [convInfo.effectiveFilterHeight, convInfo.effectiveFilterWidth]\n        },\n        { type: 'int32', data: [convInfo.outHeight] },\n        { type: 'int32', data: [convInfo.outWidth] },\n        { type: 'float32', data: [avgMultiplier] }\n    ];\n    return backend.runWebGPUProgram(program, [dy], x.dtype, uniformData);\n}\nexport const avgPoolGradConfig = {\n    kernelName: AvgPoolGrad,\n    backendName: 'webgpu',\n    kernelFunc: avgPoolGrad\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQXZnUG9vbEdyYWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9rZXJuZWxzL0F2Z1Bvb2xHcmFkLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sRUFBQyxXQUFXLEVBQXVDLFlBQVksRUFBdUMsTUFBTSx1QkFBdUIsQ0FBQztBQUUzSSxPQUFPLEVBQUMsd0JBQXdCLEVBQUMsTUFBTSw2QkFBNkIsQ0FBQztBQUVyRSxPQUFPLEVBQUMsZ0JBQWdCLEVBQUMsTUFBTSxnQkFBZ0IsQ0FBQztBQUVoRCxNQUFNLFVBQVUsV0FBVyxDQUFDLElBSTNCO0lBQ0MsTUFBTSxFQUFDLE1BQU0sRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFDLEdBQUcsSUFBSSxDQUFDO0lBQ3RDLE1BQU0sRUFBQyxFQUFFLEVBQUUsS0FBSyxFQUFDLEdBQUcsTUFBTSxDQUFDO0lBQzNCLE1BQU0sQ0FBQyxHQUFHLEtBQUssQ0FBQztJQUNoQixnQkFBZ0IsQ0FBQyxDQUFDLEVBQUUsRUFBRSxLQUFLLENBQUMsRUFBRSxhQUFhLENBQUMsQ0FBQztJQUM3QyxNQUFNLEVBQUMsVUFBVSxFQUFFLE9BQU8sRUFBRSxHQUFHLEVBQUMsR0FBRyxLQUFLLENBQUM7SUFFekMsTUFBTSxRQUFRLEdBQUcsWUFBWSxDQUFDLGlCQUFpQixDQUMzQyxDQUFDLENBQUMsS0FBeUMsRUFBRSxVQUFVLEVBQUUsT0FBTyxFQUNoRSxDQUFDLENBQUMsZUFBZSxFQUFFLEdBQUcsQ0FBQyxDQUFDO0lBQzVCLE1BQU0sT0FBTyxHQUFHLElBQUksd0JBQXdCLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDdkQsTUFBTSxhQUFhLEdBQUcsQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLFlBQVksR0FBRyxRQUFRLENBQUMsV0FBVyxDQUFDLENBQUM7SUFDekUsTUFBTSxXQUFXLEdBQUc7UUFDbEIsRUFBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxDQUFDLFFBQVEsQ0FBQyxZQUFZLEVBQUUsUUFBUSxDQUFDLFdBQVcsQ0FBQyxFQUFDLEVBQUU7WUFDcEUsSUFBSSxFQUFFLE9BQU87WUFDYixJQUFJLEVBQUU7Z0JBQ0osUUFBUSxDQUFDLHFCQUFxQixHQUFHLENBQUMsR0FBRyxRQUFRLENBQUMsT0FBTyxDQUFDLEdBQUc7Z0JBQ3pELFFBQVEsQ0FBQyxvQkFBb0IsR0FBRyxDQUFDLEdBQUcsUUFBUSxDQUFDLE9BQU8sQ0FBQyxJQUFJO2FBQzFEO1NBQ0Y7UUFDRCxFQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLENBQUMsUUFBUSxDQUFDLGNBQWMsRUFBRSxRQUFRLENBQUMsYUFBYSxDQUFDLEVBQUMsRUFBRTtZQUN4RSxJQUFJLEVBQUUsT0FBTztZQUNiLElBQUksRUFBRSxDQUFDLFFBQVEsQ0FBQyxxQkFBcUIsRUFBRSxRQUFRLENBQUMsb0JBQW9CLENBQUM7U0FDdEU7UUFDRCxFQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxFQUFDO1FBQzNDLEVBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLEVBQUM7UUFDMUMsRUFBQyxJQUFJLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxDQUFDLGFBQWEsQ0FBQyxFQUFDO0tBQ3pDLENBQUM7SUFDRixPQUFPLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsS0FBSyxFQUFFLFdBQVcsQ0FBQyxDQUFDO0FBQ3ZFLENBQUM7QUFFRCxNQUFNLENBQUMsTUFBTSxpQkFBaUIsR0FBaUI7SUFDN0MsVUFBVSxFQUFFLFdBQVc7SUFDdkIsV0FBVyxFQUFFLFFBQVE7SUFDckIsVUFBVSxFQUFFLFdBQW9DO0NBQ2pELENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7QXZnUG9vbEdyYWQsIEF2Z1Bvb2xHcmFkQXR0cnMsIEF2Z1Bvb2xHcmFkSW5wdXRzLCBiYWNrZW5kX3V0aWwsIEtlcm5lbENvbmZpZywgS2VybmVsRnVuYywgVGVuc29ySW5mb30gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcblxuaW1wb3J0IHtBdmdQb29sMkRCYWNrcHJvcFByb2dyYW19IGZyb20gJy4uL2F2Z19wb29sX2JhY2twcm9wX3dlYmdwdSc7XG5pbXBvcnQge1dlYkdQVUJhY2tlbmR9IGZyb20gJy4uL2JhY2tlbmRfd2ViZ3B1JztcbmltcG9ydCB7YXNzZXJ0Tm90Q29tcGxleH0gZnJvbSAnLi4vd2ViZ3B1X3V0aWwnO1xuXG5leHBvcnQgZnVuY3Rpb24gYXZnUG9vbEdyYWQoYXJnczoge1xuICBpbnB1dHM6IEF2Z1Bvb2xHcmFkSW5wdXRzLFxuICBiYWNrZW5kOiBXZWJHUFVCYWNrZW5kLFxuICBhdHRyczogQXZnUG9vbEdyYWRBdHRyc1xufSk6IFRlbnNvckluZm8ge1xuICBjb25zdCB7aW5wdXRzLCBiYWNrZW5kLCBhdHRyc30gPSBhcmdzO1xuICBjb25zdCB7ZHksIGlucHV0fSA9IGlucHV0cztcbiAgY29uc3QgeCA9IGlucHV0O1xuICBhc3NlcnROb3RDb21wbGV4KFtkeSwgaW5wdXRdLCAnYXZnUG9vbEdyYWQnKTtcbiAgY29uc3Qge2ZpbHRlclNpemUsIHN0cmlkZXMsIHBhZH0gPSBhdHRycztcblxuICBjb25zdCBjb252SW5mbyA9IGJhY2tlbmRfdXRpbC5jb21wdXRlUG9vbDJESW5mbyhcbiAgICAgIHguc2hhcGUgYXMgW251bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcl0sIGZpbHRlclNpemUsIHN0cmlkZXMsXG4gICAgICAxIC8qIGRpbGF0aW9ucyAqLywgcGFkKTtcbiAgY29uc3QgcHJvZ3JhbSA9IG5ldyBBdmdQb29sMkRCYWNrcHJvcFByb2dyYW0oY29udkluZm8pO1xuICBjb25zdCBhdmdNdWx0aXBsaWVyID0gMSAvIChjb252SW5mby5maWx0ZXJIZWlnaHQgKiBjb252SW5mby5maWx0ZXJXaWR0aCk7XG4gIGNvbnN0IHVuaWZvcm1EYXRhID0gW1xuICAgIHt0eXBlOiAnaW50MzInLCBkYXRhOiBbY29udkluZm8uc3RyaWRlSGVpZ2h0LCBjb252SW5mby5zdHJpZGVXaWR0aF19LCB7XG4gICAgICB0eXBlOiAnaW50MzInLFxuICAgICAgZGF0YTogW1xuICAgICAgICBjb252SW5mby5lZmZlY3RpdmVGaWx0ZXJIZWlnaHQgLSAxIC0gY29udkluZm8ucGFkSW5mby50b3AsXG4gICAgICAgIGNvbnZJbmZvLmVmZmVjdGl2ZUZpbHRlcldpZHRoIC0gMSAtIGNvbnZJbmZvLnBhZEluZm8ubGVmdFxuICAgICAgXVxuICAgIH0sXG4gICAge3R5cGU6ICdpbnQzMicsIGRhdGE6IFtjb252SW5mby5kaWxhdGlvbkhlaWdodCwgY29udkluZm8uZGlsYXRpb25XaWR0aF19LCB7XG4gICAgICB0eXBlOiAnaW50MzInLFxuICAgICAgZGF0YTogW2NvbnZJbmZvLmVmZmVjdGl2ZUZpbHRlckhlaWdodCwgY29udkluZm8uZWZmZWN0aXZlRmlsdGVyV2lkdGhdXG4gICAgfSxcbiAgICB7dHlwZTogJ2ludDMyJywgZGF0YTogW2NvbnZJbmZvLm91dEhlaWdodF19LFxuICAgIHt0eXBlOiAnaW50MzInLCBkYXRhOiBbY29udkluZm8ub3V0V2lkdGhdfSxcbiAgICB7dHlwZTogJ2Zsb2F0MzInLCBkYXRhOiBbYXZnTXVsdGlwbGllcl19XG4gIF07XG4gIHJldHVybiBiYWNrZW5kLnJ1bldlYkdQVVByb2dyYW0ocHJvZ3JhbSwgW2R5XSwgeC5kdHlwZSwgdW5pZm9ybURhdGEpO1xufVxuXG5leHBvcnQgY29uc3QgYXZnUG9vbEdyYWRDb25maWc6IEtlcm5lbENvbmZpZyA9IHtcbiAga2VybmVsTmFtZTogQXZnUG9vbEdyYWQsXG4gIGJhY2tlbmROYW1lOiAnd2ViZ3B1JyxcbiAga2VybmVsRnVuYzogYXZnUG9vbEdyYWQgYXMgdW5rbm93biBhcyBLZXJuZWxGdW5jXG59O1xuIl19","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { BatchMatMul } from '@tensorflow/tfjs-core';\nimport { batchMatMulImpl } from './BatchMatMul_impl';\nexport function batchMatMul(args) {\n    const { inputs, backend, attrs } = args;\n    const { a, b } = inputs;\n    const { transposeA, transposeB } = attrs;\n    return batchMatMulImpl({ a, b, transposeA, transposeB, backend });\n}\nexport const batchMatMulConfig = {\n    kernelName: BatchMatMul,\n    backendName: 'webgpu',\n    kernelFunc: batchMatMul,\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQmF0Y2hNYXRNdWwuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9rZXJuZWxzL0JhdGNoTWF0TXVsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sRUFBQyxXQUFXLEVBQWdFLE1BQU0sdUJBQXVCLENBQUM7QUFHakgsT0FBTyxFQUFDLGVBQWUsRUFBQyxNQUFNLG9CQUFvQixDQUFDO0FBRW5ELE1BQU0sVUFBVSxXQUFXLENBQUMsSUFJM0I7SUFDQyxNQUFNLEVBQUMsTUFBTSxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUMsR0FBRyxJQUFJLENBQUM7SUFDdEMsTUFBTSxFQUFDLENBQUMsRUFBRSxDQUFDLEVBQUMsR0FBRyxNQUFNLENBQUM7SUFDdEIsTUFBTSxFQUFDLFVBQVUsRUFBRSxVQUFVLEVBQUMsR0FBRyxLQUFLLENBQUM7SUFFdkMsT0FBTyxlQUFlLENBQUMsRUFBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLFVBQVUsRUFBRSxVQUFVLEVBQUUsT0FBTyxFQUFDLENBQUMsQ0FBQztBQUNsRSxDQUFDO0FBRUQsTUFBTSxDQUFDLE1BQU0saUJBQWlCLEdBQWlCO0lBQzdDLFVBQVUsRUFBRSxXQUFXO0lBQ3ZCLFdBQVcsRUFBRSxRQUFRO0lBQ3JCLFVBQVUsRUFBRSxXQUFvQztDQUNqRCxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge0JhdGNoTWF0TXVsLCBCYXRjaE1hdE11bEF0dHJzLCBCYXRjaE1hdE11bElucHV0cywgS2VybmVsQ29uZmlnLCBLZXJuZWxGdW5jfSBmcm9tICdAdGVuc29yZmxvdy90ZmpzLWNvcmUnO1xuXG5pbXBvcnQge1dlYkdQVUJhY2tlbmR9IGZyb20gJy4uL2JhY2tlbmRfd2ViZ3B1JztcbmltcG9ydCB7YmF0Y2hNYXRNdWxJbXBsfSBmcm9tICcuL0JhdGNoTWF0TXVsX2ltcGwnO1xuXG5leHBvcnQgZnVuY3Rpb24gYmF0Y2hNYXRNdWwoYXJnczoge1xuICBpbnB1dHM6IEJhdGNoTWF0TXVsSW5wdXRzLFxuICBhdHRyczogQmF0Y2hNYXRNdWxBdHRycyxcbiAgYmFja2VuZDogV2ViR1BVQmFja2VuZFxufSkge1xuICBjb25zdCB7aW5wdXRzLCBiYWNrZW5kLCBhdHRyc30gPSBhcmdzO1xuICBjb25zdCB7YSwgYn0gPSBpbnB1dHM7XG4gIGNvbnN0IHt0cmFuc3Bvc2VBLCB0cmFuc3Bvc2VCfSA9IGF0dHJzO1xuXG4gIHJldHVybiBiYXRjaE1hdE11bEltcGwoe2EsIGIsIHRyYW5zcG9zZUEsIHRyYW5zcG9zZUIsIGJhY2tlbmR9KTtcbn1cblxuZXhwb3J0IGNvbnN0IGJhdGNoTWF0TXVsQ29uZmlnOiBLZXJuZWxDb25maWcgPSB7XG4gIGtlcm5lbE5hbWU6IEJhdGNoTWF0TXVsLFxuICBiYWNrZW5kTmFtZTogJ3dlYmdwdScsXG4gIGtlcm5lbEZ1bmM6IGJhdGNoTWF0TXVsIGFzIHVua25vd24gYXMgS2VybmVsRnVuYyxcbn07XG4iXX0=","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { getCoordsDataType, getCoordsXYZ, getMainHeaderString as main } from './webgpu_program';\nimport { computeDispatch, flatDispatchLayout } from './webgpu_util';\nexport class SliceProgram {\n    constructor(start, destSize) {\n        this.variableNames = ['source'];\n        this.workPerThread = 1;\n        this.workgroupSize = [64, 1, 1];\n        this.size = true;\n        this.outputShape = destSize;\n        this.rank = destSize.length;\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize, [this.workPerThread, 1, 1]);\n        this.start = start;\n        this.uniforms = `start : ${getCoordsDataType(start.length)}, `;\n        this.shaderKey = 'slice';\n    }\n    getUserCode() {\n        const dtype = getCoordsDataType(this.rank);\n        const sourceCoords = getCoords(this.rank);\n        let coordSum;\n        if (this.start.length === 1) {\n            coordSum = this.outputShape.map((_, i) => {\n                return `sourceLoc = uniforms.start + coords;`;\n            });\n        }\n        else {\n            coordSum = this.outputShape.map((_, i) => {\n                return `sourceLoc.${coords[i]} = uniforms.start.${getCoordsXYZ(i)} + coords.${coords[i]};`;\n            });\n        }\n        const userCode = `\n      ${main('index')} {\n        if (index < uniforms.size) {\n          var sourceLoc : ${dtype};\n          let coords = getCoordsFromIndex(index);\n          ${coordSum.join('\\n')}\n          setOutputAtIndex(index, getSource(${sourceCoords}));\n        }\n      }\n    `;\n        return userCode;\n    }\n}\nconst coords = ['x', 'y', 'z', 'w', 'u', 'v'];\nfunction getCoords(rank) {\n    if (rank === 1) {\n        return 'sourceLoc';\n    }\n    else if (rank <= 6) {\n        return coords.slice(0, rank).map(coord => `sourceLoc.${coord}`).join(',');\n    }\n    else {\n        throw Error(`Slicing for rank ${rank} is not yet supported`);\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2xpY2Vfd2ViZ3B1LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMvc2xpY2Vfd2ViZ3B1LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sRUFBQyxpQkFBaUIsRUFBRSxZQUFZLEVBQUUsbUJBQW1CLElBQUksSUFBSSxFQUFnQixNQUFNLGtCQUFrQixDQUFDO0FBQzdHLE9BQU8sRUFBQyxlQUFlLEVBQUUsa0JBQWtCLEVBQUMsTUFBTSxlQUFlLENBQUM7QUFFbEUsTUFBTSxPQUFPLFlBQVk7SUFhdkIsWUFBWSxLQUFlLEVBQUUsUUFBa0I7UUFaL0Msa0JBQWEsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBTzNCLGtCQUFhLEdBQUcsQ0FBQyxDQUFDO1FBQ2xCLGtCQUFhLEdBQTZCLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUVyRCxTQUFJLEdBQUcsSUFBSSxDQUFDO1FBR1YsSUFBSSxDQUFDLFdBQVcsR0FBRyxRQUFRLENBQUM7UUFDNUIsSUFBSSxDQUFDLElBQUksR0FBRyxRQUFRLENBQUMsTUFBTSxDQUFDO1FBQzVCLElBQUksQ0FBQyxjQUFjLEdBQUcsa0JBQWtCLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQzNELElBQUksQ0FBQyxRQUFRLEdBQUcsZUFBZSxDQUMzQixJQUFJLENBQUMsY0FBYyxFQUFFLElBQUksQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDLGFBQWEsRUFDekQsQ0FBQyxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRWhDLElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO1FBQ25CLElBQUksQ0FBQyxRQUFRLEdBQUcsV0FBVyxpQkFBaUIsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQztRQUMvRCxJQUFJLENBQUMsU0FBUyxHQUFHLE9BQU8sQ0FBQztJQUMzQixDQUFDO0lBRUQsV0FBVztRQUNULE1BQU0sS0FBSyxHQUFHLGlCQUFpQixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUMzQyxNQUFNLFlBQVksR0FBRyxTQUFTLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzFDLElBQUksUUFBUSxDQUFDO1FBQ2IsSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUU7WUFDM0IsUUFBUSxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFO2dCQUN2QyxPQUFPLHNDQUFzQyxDQUFDO1lBQ2hELENBQUMsQ0FBQyxDQUFDO1NBQ0o7YUFBTTtZQUNMLFFBQVEsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRTtnQkFDdkMsT0FBTyxhQUFhLE1BQU0sQ0FBQyxDQUFDLENBQUMscUJBQ3pCLFlBQVksQ0FBQyxDQUFDLENBQUMsYUFBYSxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQztZQUMvQyxDQUFDLENBQUMsQ0FBQztTQUNKO1FBRUQsTUFBTSxRQUFRLEdBQUc7UUFDYixJQUFJLENBQUMsT0FBTyxDQUFDOzs0QkFFTyxLQUFLOztZQUVyQixRQUFRLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQzs4Q0FDZSxZQUFZOzs7S0FHckQsQ0FBQztRQUNGLE9BQU8sUUFBUSxDQUFDO0lBQ2xCLENBQUM7Q0FDRjtBQUVELE1BQU0sTUFBTSxHQUFHLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQztBQUU5QyxTQUFTLFNBQVMsQ0FBQyxJQUFZO0lBQzdCLElBQUksSUFBSSxLQUFLLENBQUMsRUFBRTtRQUNkLE9BQU8sV0FBVyxDQUFDO0tBQ3BCO1NBQU0sSUFBSSxJQUFJLElBQUksQ0FBQyxFQUFFO1FBQ3BCLE9BQU8sTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsYUFBYSxLQUFLLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztLQUMzRTtTQUFNO1FBQ0wsTUFBTSxLQUFLLENBQUMsb0JBQW9CLElBQUksdUJBQXVCLENBQUMsQ0FBQztLQUM5RDtBQUNILENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7Z2V0Q29vcmRzRGF0YVR5cGUsIGdldENvb3Jkc1hZWiwgZ2V0TWFpbkhlYWRlclN0cmluZyBhcyBtYWluLCBXZWJHUFVQcm9ncmFtfSBmcm9tICcuL3dlYmdwdV9wcm9ncmFtJztcbmltcG9ydCB7Y29tcHV0ZURpc3BhdGNoLCBmbGF0RGlzcGF0Y2hMYXlvdXR9IGZyb20gJy4vd2ViZ3B1X3V0aWwnO1xuXG5leHBvcnQgY2xhc3MgU2xpY2VQcm9ncmFtIGltcGxlbWVudHMgV2ViR1BVUHJvZ3JhbSB7XG4gIHZhcmlhYmxlTmFtZXMgPSBbJ3NvdXJjZSddO1xuICB1bmlmb3Jtczogc3RyaW5nO1xuICBvdXRwdXRTaGFwZTogbnVtYmVyW107XG4gIHNoYWRlcktleTogc3RyaW5nO1xuICByYW5rOiBudW1iZXI7XG4gIGRpc3BhdGNoTGF5b3V0OiB7eDogbnVtYmVyW119O1xuICBkaXNwYXRjaDogW251bWJlciwgbnVtYmVyLCBudW1iZXJdO1xuICB3b3JrUGVyVGhyZWFkID0gMTtcbiAgd29ya2dyb3VwU2l6ZTogW251bWJlciwgbnVtYmVyLCBudW1iZXJdID0gWzY0LCAxLCAxXTtcbiAgc3RhcnQ6IG51bWJlcltdO1xuICBzaXplID0gdHJ1ZTtcblxuICBjb25zdHJ1Y3RvcihzdGFydDogbnVtYmVyW10sIGRlc3RTaXplOiBudW1iZXJbXSkge1xuICAgIHRoaXMub3V0cHV0U2hhcGUgPSBkZXN0U2l6ZTtcbiAgICB0aGlzLnJhbmsgPSBkZXN0U2l6ZS5sZW5ndGg7XG4gICAgdGhpcy5kaXNwYXRjaExheW91dCA9IGZsYXREaXNwYXRjaExheW91dCh0aGlzLm91dHB1dFNoYXBlKTtcbiAgICB0aGlzLmRpc3BhdGNoID0gY29tcHV0ZURpc3BhdGNoKFxuICAgICAgICB0aGlzLmRpc3BhdGNoTGF5b3V0LCB0aGlzLm91dHB1dFNoYXBlLCB0aGlzLndvcmtncm91cFNpemUsXG4gICAgICAgIFt0aGlzLndvcmtQZXJUaHJlYWQsIDEsIDFdKTtcblxuICAgIHRoaXMuc3RhcnQgPSBzdGFydDtcbiAgICB0aGlzLnVuaWZvcm1zID0gYHN0YXJ0IDogJHtnZXRDb29yZHNEYXRhVHlwZShzdGFydC5sZW5ndGgpfSwgYDtcbiAgICB0aGlzLnNoYWRlcktleSA9ICdzbGljZSc7XG4gIH1cblxuICBnZXRVc2VyQ29kZSgpOiBzdHJpbmcge1xuICAgIGNvbnN0IGR0eXBlID0gZ2V0Q29vcmRzRGF0YVR5cGUodGhpcy5yYW5rKTtcbiAgICBjb25zdCBzb3VyY2VDb29yZHMgPSBnZXRDb29yZHModGhpcy5yYW5rKTtcbiAgICBsZXQgY29vcmRTdW07XG4gICAgaWYgKHRoaXMuc3RhcnQubGVuZ3RoID09PSAxKSB7XG4gICAgICBjb29yZFN1bSA9IHRoaXMub3V0cHV0U2hhcGUubWFwKChfLCBpKSA9PiB7XG4gICAgICAgIHJldHVybiBgc291cmNlTG9jID0gdW5pZm9ybXMuc3RhcnQgKyBjb29yZHM7YDtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb29yZFN1bSA9IHRoaXMub3V0cHV0U2hhcGUubWFwKChfLCBpKSA9PiB7XG4gICAgICAgIHJldHVybiBgc291cmNlTG9jLiR7Y29vcmRzW2ldfSA9IHVuaWZvcm1zLnN0YXJ0LiR7XG4gICAgICAgICAgICBnZXRDb29yZHNYWVooaSl9ICsgY29vcmRzLiR7Y29vcmRzW2ldfTtgO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgdXNlckNvZGUgPSBgXG4gICAgICAke21haW4oJ2luZGV4Jyl9IHtcbiAgICAgICAgaWYgKGluZGV4IDwgdW5pZm9ybXMuc2l6ZSkge1xuICAgICAgICAgIHZhciBzb3VyY2VMb2MgOiAke2R0eXBlfTtcbiAgICAgICAgICBsZXQgY29vcmRzID0gZ2V0Q29vcmRzRnJvbUluZGV4KGluZGV4KTtcbiAgICAgICAgICAke2Nvb3JkU3VtLmpvaW4oJ1xcbicpfVxuICAgICAgICAgIHNldE91dHB1dEF0SW5kZXgoaW5kZXgsIGdldFNvdXJjZSgke3NvdXJjZUNvb3Jkc30pKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIGA7XG4gICAgcmV0dXJuIHVzZXJDb2RlO1xuICB9XG59XG5cbmNvbnN0IGNvb3JkcyA9IFsneCcsICd5JywgJ3onLCAndycsICd1JywgJ3YnXTtcblxuZnVuY3Rpb24gZ2V0Q29vcmRzKHJhbms6IG51bWJlcik6IHN0cmluZyB7XG4gIGlmIChyYW5rID09PSAxKSB7XG4gICAgcmV0dXJuICdzb3VyY2VMb2MnO1xuICB9IGVsc2UgaWYgKHJhbmsgPD0gNikge1xuICAgIHJldHVybiBjb29yZHMuc2xpY2UoMCwgcmFuaykubWFwKGNvb3JkID0+IGBzb3VyY2VMb2MuJHtjb29yZH1gKS5qb2luKCcsJyk7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgRXJyb3IoYFNsaWNpbmcgZm9yIHJhbmsgJHtyYW5rfSBpcyBub3QgeWV0IHN1cHBvcnRlZGApO1xuICB9XG59XG4iXX0=","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Slice, slice_util, util } from '@tensorflow/tfjs-core';\nimport { sliceImplCPU } from '../kernel_utils/shared';\nimport { SliceProgram } from '../slice_webgpu';\nexport function slice(args) {\n    const { inputs, backend, attrs } = args;\n    const { x } = inputs;\n    const { begin, size } = attrs;\n    const [$begin, $size] = slice_util.parseSliceParams(x, begin, size);\n    slice_util.assertParamsValid(x, $begin, $size);\n    if (backend.shouldExecuteOnCPU([x]) || x.dtype === 'string') {\n        const xTensorData = backend.tensorMap.get(x.dataId);\n        const outValues = sliceImplCPU(xTensorData.values, $begin, $size, x.shape, x.dtype);\n        return backend.makeTensorInfo($size, x.dtype, outValues);\n    }\n    if (util.sizeFromShape($size) === 0) {\n        return backend.makeTensorInfo($size, x.dtype, []);\n    }\n    // TODO(xing.xu): Add shadow slice support.\n    const program = new SliceProgram($begin, $size);\n    const uniformData = [{ type: 'int32', data: $begin }];\n    return backend.runWebGPUProgram(program, [x], x.dtype, uniformData);\n}\nexport const sliceConfig = {\n    kernelName: Slice,\n    backendName: 'webgpu',\n    kernelFunc: slice\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU2xpY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9rZXJuZWxzL1NsaWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sRUFBMkIsS0FBSyxFQUFFLFVBQVUsRUFBbUQsSUFBSSxFQUFDLE1BQU0sdUJBQXVCLENBQUM7QUFHekksT0FBTyxFQUFDLFlBQVksRUFBQyxNQUFNLHdCQUF3QixDQUFDO0FBQ3BELE9BQU8sRUFBQyxZQUFZLEVBQUMsTUFBTSxpQkFBaUIsQ0FBQztBQUU3QyxNQUFNLFVBQVUsS0FBSyxDQUNqQixJQUFzRTtJQUV4RSxNQUFNLEVBQUMsTUFBTSxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUMsR0FBRyxJQUFJLENBQUM7SUFDdEMsTUFBTSxFQUFDLENBQUMsRUFBQyxHQUFHLE1BQU0sQ0FBQztJQUNuQixNQUFNLEVBQUMsS0FBSyxFQUFFLElBQUksRUFBQyxHQUFHLEtBQUssQ0FBQztJQUU1QixNQUFNLENBQUMsTUFBTSxFQUFFLEtBQUssQ0FBQyxHQUFHLFVBQVUsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQ3BFLFVBQVUsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLEVBQUUsTUFBTSxFQUFFLEtBQUssQ0FBQyxDQUFDO0lBRS9DLElBQUksT0FBTyxDQUFDLGtCQUFrQixDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsS0FBSyxLQUFLLFFBQVEsRUFBRTtRQUMzRCxNQUFNLFdBQVcsR0FBRyxPQUFPLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDcEQsTUFBTSxTQUFTLEdBQUcsWUFBWSxDQUMxQixXQUFXLENBQUMsTUFBb0IsRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3ZFLE9BQU8sT0FBTyxDQUFDLGNBQWMsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLEtBQUssRUFBRSxTQUFTLENBQUMsQ0FBQztLQUMxRDtJQUVELElBQUksSUFBSSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLEVBQUU7UUFDbkMsT0FBTyxPQUFPLENBQUMsY0FBYyxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxDQUFDO0tBQ25EO0lBRUQsMkNBQTJDO0lBQzNDLE1BQU0sT0FBTyxHQUFHLElBQUksWUFBWSxDQUFDLE1BQU0sRUFBRSxLQUFLLENBQUMsQ0FBQztJQUNoRCxNQUFNLFdBQVcsR0FBRyxDQUFDLEVBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFDLENBQUMsQ0FBQztJQUNwRCxPQUFPLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsS0FBSyxFQUFFLFdBQVcsQ0FBQyxDQUFDO0FBQ3RFLENBQUM7QUFFRCxNQUFNLENBQUMsTUFBTSxXQUFXLEdBQWlCO0lBQ3ZDLFVBQVUsRUFBRSxLQUFLO0lBQ2pCLFdBQVcsRUFBRSxRQUFRO0lBQ3JCLFVBQVUsRUFBRSxLQUE4QjtDQUMzQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge0tlcm5lbENvbmZpZywgS2VybmVsRnVuYywgU2xpY2UsIHNsaWNlX3V0aWwsIFNsaWNlQXR0cnMsIFNsaWNlSW5wdXRzLCBUZW5zb3JJbmZvLCBUeXBlZEFycmF5LCB1dGlsfSBmcm9tICdAdGVuc29yZmxvdy90ZmpzLWNvcmUnO1xuXG5pbXBvcnQge1dlYkdQVUJhY2tlbmR9IGZyb20gJy4uL2JhY2tlbmRfd2ViZ3B1JztcbmltcG9ydCB7c2xpY2VJbXBsQ1BVfSBmcm9tICcuLi9rZXJuZWxfdXRpbHMvc2hhcmVkJztcbmltcG9ydCB7U2xpY2VQcm9ncmFtfSBmcm9tICcuLi9zbGljZV93ZWJncHUnO1xuXG5leHBvcnQgZnVuY3Rpb24gc2xpY2UoXG4gICAgYXJnczoge2lucHV0czogU2xpY2VJbnB1dHMsIGJhY2tlbmQ6IFdlYkdQVUJhY2tlbmQsIGF0dHJzOiBTbGljZUF0dHJzfSk6XG4gICAgVGVuc29ySW5mbyB7XG4gIGNvbnN0IHtpbnB1dHMsIGJhY2tlbmQsIGF0dHJzfSA9IGFyZ3M7XG4gIGNvbnN0IHt4fSA9IGlucHV0cztcbiAgY29uc3Qge2JlZ2luLCBzaXplfSA9IGF0dHJzO1xuXG4gIGNvbnN0IFskYmVnaW4sICRzaXplXSA9IHNsaWNlX3V0aWwucGFyc2VTbGljZVBhcmFtcyh4LCBiZWdpbiwgc2l6ZSk7XG4gIHNsaWNlX3V0aWwuYXNzZXJ0UGFyYW1zVmFsaWQoeCwgJGJlZ2luLCAkc2l6ZSk7XG5cbiAgaWYgKGJhY2tlbmQuc2hvdWxkRXhlY3V0ZU9uQ1BVKFt4XSkgfHwgeC5kdHlwZSA9PT0gJ3N0cmluZycpIHtcbiAgICBjb25zdCB4VGVuc29yRGF0YSA9IGJhY2tlbmQudGVuc29yTWFwLmdldCh4LmRhdGFJZCk7XG4gICAgY29uc3Qgb3V0VmFsdWVzID0gc2xpY2VJbXBsQ1BVKFxuICAgICAgICB4VGVuc29yRGF0YS52YWx1ZXMgYXMgVHlwZWRBcnJheSwgJGJlZ2luLCAkc2l6ZSwgeC5zaGFwZSwgeC5kdHlwZSk7XG4gICAgcmV0dXJuIGJhY2tlbmQubWFrZVRlbnNvckluZm8oJHNpemUsIHguZHR5cGUsIG91dFZhbHVlcyk7XG4gIH1cblxuICBpZiAodXRpbC5zaXplRnJvbVNoYXBlKCRzaXplKSA9PT0gMCkge1xuICAgIHJldHVybiBiYWNrZW5kLm1ha2VUZW5zb3JJbmZvKCRzaXplLCB4LmR0eXBlLCBbXSk7XG4gIH1cblxuICAvLyBUT0RPKHhpbmcueHUpOiBBZGQgc2hhZG93IHNsaWNlIHN1cHBvcnQuXG4gIGNvbnN0IHByb2dyYW0gPSBuZXcgU2xpY2VQcm9ncmFtKCRiZWdpbiwgJHNpemUpO1xuICBjb25zdCB1bmlmb3JtRGF0YSA9IFt7dHlwZTogJ2ludDMyJywgZGF0YTogJGJlZ2lufV07XG4gIHJldHVybiBiYWNrZW5kLnJ1bldlYkdQVVByb2dyYW0ocHJvZ3JhbSwgW3hdLCB4LmR0eXBlLCB1bmlmb3JtRGF0YSk7XG59XG5cbmV4cG9ydCBjb25zdCBzbGljZUNvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBTbGljZSxcbiAgYmFja2VuZE5hbWU6ICd3ZWJncHUnLFxuICBrZXJuZWxGdW5jOiBzbGljZSBhcyB1bmtub3duIGFzIEtlcm5lbEZ1bmNcbn07XG4iXX0=","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { backend_util, BatchToSpaceND, util } from '@tensorflow/tfjs-core';\nimport { reshape } from './Reshape';\nimport { slice } from './Slice';\nimport { transpose } from './Transpose';\nexport const batchToSpaceND = (args) => {\n    const { inputs, backend, attrs } = args;\n    const { x } = inputs;\n    const { blockShape, crops } = attrs;\n    util.assert(x.shape.length <= 4, () => 'batchToSpaceND for rank > 4 with a WebGPU backend not ' +\n        'implemented yet');\n    const prod = blockShape.reduce((a, b) => a * b);\n    const reshaped = backend_util.getReshaped(x.shape, blockShape, prod);\n    const permuted = backend_util.getPermuted(reshaped.length, blockShape.length);\n    const reshapedPermuted = backend_util.getReshapedPermuted(x.shape, blockShape, prod);\n    const sliceBeginCoords = backend_util.getSliceBeginCoords(crops, blockShape.length);\n    const sliceSize = backend_util.getSliceSize(reshapedPermuted, crops, blockShape.length);\n    const toDispose = [];\n    const reshapedIntermediate = reshape({ inputs: { x }, backend, attrs: { shape: reshaped } });\n    const transposedIntermediate = transpose({ inputs: { x: reshapedIntermediate }, backend, attrs: { perm: permuted } });\n    const reshapedIntermediate2 = reshape({\n        inputs: { x: transposedIntermediate },\n        backend,\n        attrs: { shape: reshapedPermuted }\n    });\n    const sliced = slice({\n        inputs: { x: reshapedIntermediate2 },\n        backend,\n        attrs: { begin: sliceBeginCoords, size: sliceSize }\n    });\n    toDispose.push(reshapedIntermediate);\n    toDispose.push(transposedIntermediate);\n    toDispose.push(reshapedIntermediate2);\n    toDispose.forEach(t => backend.disposeData(t.dataId));\n    return sliced;\n};\nexport const batchToSpaceNDConfig = {\n    kernelName: BatchToSpaceND,\n    backendName: 'webgpu',\n    kernelFunc: batchToSpaceND\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQmF0Y2hUb1NwYWNlTkQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9rZXJuZWxzL0JhdGNoVG9TcGFjZU5ELnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sRUFBQyxZQUFZLEVBQUUsY0FBYyxFQUFtRixJQUFJLEVBQUMsTUFBTSx1QkFBdUIsQ0FBQztBQUkxSixPQUFPLEVBQUMsT0FBTyxFQUFDLE1BQU0sV0FBVyxDQUFDO0FBQ2xDLE9BQU8sRUFBQyxLQUFLLEVBQUMsTUFBTSxTQUFTLENBQUM7QUFDOUIsT0FBTyxFQUFDLFNBQVMsRUFBQyxNQUFNLGFBQWEsQ0FBQztBQUV0QyxNQUFNLENBQUMsTUFBTSxjQUFjLEdBQUcsQ0FBQyxJQUk5QixFQUFjLEVBQUU7SUFDZixNQUFNLEVBQUMsTUFBTSxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUMsR0FBRyxJQUFJLENBQUM7SUFDdEMsTUFBTSxFQUFDLENBQUMsRUFBQyxHQUFHLE1BQU0sQ0FBQztJQUNuQixNQUFNLEVBQUMsVUFBVSxFQUFFLEtBQUssRUFBQyxHQUFHLEtBQUssQ0FBQztJQUVsQyxJQUFJLENBQUMsTUFBTSxDQUNQLENBQUMsQ0FBQyxLQUFLLENBQUMsTUFBTSxJQUFJLENBQUMsRUFDbkIsR0FBRyxFQUFFLENBQUMsd0RBQXdEO1FBQzFELGlCQUFpQixDQUFDLENBQUM7SUFDM0IsTUFBTSxJQUFJLEdBQUcsVUFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztJQUVoRCxNQUFNLFFBQVEsR0FBRyxZQUFZLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxLQUFLLEVBQUUsVUFBVSxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQ3JFLE1BQU0sUUFBUSxHQUFHLFlBQVksQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDLE1BQU0sRUFBRSxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDOUUsTUFBTSxnQkFBZ0IsR0FDbEIsWUFBWSxDQUFDLG1CQUFtQixDQUFDLENBQUMsQ0FBQyxLQUFLLEVBQUUsVUFBVSxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQ2hFLE1BQU0sZ0JBQWdCLEdBQ2xCLFlBQVksQ0FBQyxtQkFBbUIsQ0FBQyxLQUFLLEVBQUUsVUFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQy9ELE1BQU0sU0FBUyxHQUNYLFlBQVksQ0FBQyxZQUFZLENBQUMsZ0JBQWdCLEVBQUUsS0FBSyxFQUFFLFVBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUUxRSxNQUFNLFNBQVMsR0FBRyxFQUFFLENBQUM7SUFFckIsTUFBTSxvQkFBb0IsR0FDdEIsT0FBTyxDQUFDLEVBQUMsTUFBTSxFQUFFLEVBQUMsQ0FBQyxFQUFDLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxFQUFDLEtBQUssRUFBRSxRQUFRLEVBQUMsRUFBQyxDQUFDLENBQUM7SUFDOUQsTUFBTSxzQkFBc0IsR0FBRyxTQUFTLENBQ3BDLEVBQUMsTUFBTSxFQUFFLEVBQUMsQ0FBQyxFQUFFLG9CQUFvQixFQUFDLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxFQUFDLElBQUksRUFBRSxRQUFRLEVBQUMsRUFBQyxDQUFDLENBQUM7SUFDM0UsTUFBTSxxQkFBcUIsR0FBRyxPQUFPLENBQUM7UUFDcEMsTUFBTSxFQUFFLEVBQUMsQ0FBQyxFQUFFLHNCQUFzQixFQUFDO1FBQ25DLE9BQU87UUFDUCxLQUFLLEVBQUUsRUFBQyxLQUFLLEVBQUUsZ0JBQWdCLEVBQUM7S0FDakMsQ0FBQyxDQUFDO0lBQ0gsTUFBTSxNQUFNLEdBQUcsS0FBSyxDQUFDO1FBQ25CLE1BQU0sRUFBRSxFQUFDLENBQUMsRUFBRSxxQkFBcUIsRUFBQztRQUNsQyxPQUFPO1FBQ1AsS0FBSyxFQUFFLEVBQUMsS0FBSyxFQUFFLGdCQUFnQixFQUFFLElBQUksRUFBRSxTQUFTLEVBQUM7S0FDbEQsQ0FBQyxDQUFDO0lBRUgsU0FBUyxDQUFDLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDO0lBQ3JDLFNBQVMsQ0FBQyxJQUFJLENBQUMsc0JBQXNCLENBQUMsQ0FBQztJQUN2QyxTQUFTLENBQUMsSUFBSSxDQUFDLHFCQUFxQixDQUFDLENBQUM7SUFFdEMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7SUFFdEQsT0FBTyxNQUFNLENBQUM7QUFDaEIsQ0FBQyxDQUFDO0FBRUYsTUFBTSxDQUFDLE1BQU0sb0JBQW9CLEdBQWlCO0lBQ2hELFVBQVUsRUFBRSxjQUFjO0lBQzFCLFdBQVcsRUFBRSxRQUFRO0lBQ3JCLFVBQVUsRUFBRSxjQUF1QztDQUNwRCxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge2JhY2tlbmRfdXRpbCwgQmF0Y2hUb1NwYWNlTkQsIEJhdGNoVG9TcGFjZU5EQXR0cnMsIEJhdGNoVG9TcGFjZU5ESW5wdXRzLCBLZXJuZWxDb25maWcsIEtlcm5lbEZ1bmMsIFRlbnNvckluZm8sIHV0aWx9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7V2ViR1BVQmFja2VuZH0gZnJvbSAnLi4vYmFja2VuZF93ZWJncHUnO1xuXG5pbXBvcnQge3Jlc2hhcGV9IGZyb20gJy4vUmVzaGFwZSc7XG5pbXBvcnQge3NsaWNlfSBmcm9tICcuL1NsaWNlJztcbmltcG9ydCB7dHJhbnNwb3NlfSBmcm9tICcuL1RyYW5zcG9zZSc7XG5cbmV4cG9ydCBjb25zdCBiYXRjaFRvU3BhY2VORCA9IChhcmdzOiB7XG4gIGlucHV0czogQmF0Y2hUb1NwYWNlTkRJbnB1dHMsXG4gIGJhY2tlbmQ6IFdlYkdQVUJhY2tlbmQsXG4gIGF0dHJzOiBCYXRjaFRvU3BhY2VOREF0dHJzXG59KTogVGVuc29ySW5mbyA9PiB7XG4gIGNvbnN0IHtpbnB1dHMsIGJhY2tlbmQsIGF0dHJzfSA9IGFyZ3M7XG4gIGNvbnN0IHt4fSA9IGlucHV0cztcbiAgY29uc3Qge2Jsb2NrU2hhcGUsIGNyb3BzfSA9IGF0dHJzO1xuXG4gIHV0aWwuYXNzZXJ0KFxuICAgICAgeC5zaGFwZS5sZW5ndGggPD0gNCxcbiAgICAgICgpID0+ICdiYXRjaFRvU3BhY2VORCBmb3IgcmFuayA+IDQgd2l0aCBhIFdlYkdQVSBiYWNrZW5kIG5vdCAnICtcbiAgICAgICAgICAnaW1wbGVtZW50ZWQgeWV0Jyk7XG4gIGNvbnN0IHByb2QgPSBibG9ja1NoYXBlLnJlZHVjZSgoYSwgYikgPT4gYSAqIGIpO1xuXG4gIGNvbnN0IHJlc2hhcGVkID0gYmFja2VuZF91dGlsLmdldFJlc2hhcGVkKHguc2hhcGUsIGJsb2NrU2hhcGUsIHByb2QpO1xuICBjb25zdCBwZXJtdXRlZCA9IGJhY2tlbmRfdXRpbC5nZXRQZXJtdXRlZChyZXNoYXBlZC5sZW5ndGgsIGJsb2NrU2hhcGUubGVuZ3RoKTtcbiAgY29uc3QgcmVzaGFwZWRQZXJtdXRlZCA9XG4gICAgICBiYWNrZW5kX3V0aWwuZ2V0UmVzaGFwZWRQZXJtdXRlZCh4LnNoYXBlLCBibG9ja1NoYXBlLCBwcm9kKTtcbiAgY29uc3Qgc2xpY2VCZWdpbkNvb3JkcyA9XG4gICAgICBiYWNrZW5kX3V0aWwuZ2V0U2xpY2VCZWdpbkNvb3Jkcyhjcm9wcywgYmxvY2tTaGFwZS5sZW5ndGgpO1xuICBjb25zdCBzbGljZVNpemUgPVxuICAgICAgYmFja2VuZF91dGlsLmdldFNsaWNlU2l6ZShyZXNoYXBlZFBlcm11dGVkLCBjcm9wcywgYmxvY2tTaGFwZS5sZW5ndGgpO1xuXG4gIGNvbnN0IHRvRGlzcG9zZSA9IFtdO1xuXG4gIGNvbnN0IHJlc2hhcGVkSW50ZXJtZWRpYXRlID1cbiAgICAgIHJlc2hhcGUoe2lucHV0czoge3h9LCBiYWNrZW5kLCBhdHRyczoge3NoYXBlOiByZXNoYXBlZH19KTtcbiAgY29uc3QgdHJhbnNwb3NlZEludGVybWVkaWF0ZSA9IHRyYW5zcG9zZShcbiAgICAgIHtpbnB1dHM6IHt4OiByZXNoYXBlZEludGVybWVkaWF0ZX0sIGJhY2tlbmQsIGF0dHJzOiB7cGVybTogcGVybXV0ZWR9fSk7XG4gIGNvbnN0IHJlc2hhcGVkSW50ZXJtZWRpYXRlMiA9IHJlc2hhcGUoe1xuICAgIGlucHV0czoge3g6IHRyYW5zcG9zZWRJbnRlcm1lZGlhdGV9LFxuICAgIGJhY2tlbmQsXG4gICAgYXR0cnM6IHtzaGFwZTogcmVzaGFwZWRQZXJtdXRlZH1cbiAgfSk7XG4gIGNvbnN0IHNsaWNlZCA9IHNsaWNlKHtcbiAgICBpbnB1dHM6IHt4OiByZXNoYXBlZEludGVybWVkaWF0ZTJ9LFxuICAgIGJhY2tlbmQsXG4gICAgYXR0cnM6IHtiZWdpbjogc2xpY2VCZWdpbkNvb3Jkcywgc2l6ZTogc2xpY2VTaXplfVxuICB9KTtcblxuICB0b0Rpc3Bvc2UucHVzaChyZXNoYXBlZEludGVybWVkaWF0ZSk7XG4gIHRvRGlzcG9zZS5wdXNoKHRyYW5zcG9zZWRJbnRlcm1lZGlhdGUpO1xuICB0b0Rpc3Bvc2UucHVzaChyZXNoYXBlZEludGVybWVkaWF0ZTIpO1xuXG4gIHRvRGlzcG9zZS5mb3JFYWNoKHQgPT4gYmFja2VuZC5kaXNwb3NlRGF0YSh0LmRhdGFJZCkpO1xuXG4gIHJldHVybiBzbGljZWQ7XG59O1xuXG5leHBvcnQgY29uc3QgYmF0Y2hUb1NwYWNlTkRDb25maWc6IEtlcm5lbENvbmZpZyA9IHtcbiAga2VybmVsTmFtZTogQmF0Y2hUb1NwYWNlTkQsXG4gIGJhY2tlbmROYW1lOiAnd2ViZ3B1JyxcbiAga2VybmVsRnVuYzogYmF0Y2hUb1NwYWNlTkQgYXMgdW5rbm93biBhcyBLZXJuZWxGdW5jXG59O1xuIl19","/**\n * @license\n * Copyright 2022 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { atomicAddSnippet } from './shader_util';\nimport { getMainHeaderString as main } from './webgpu_program';\nimport { computeDispatch, flatDispatchLayout } from './webgpu_util';\nconst writeSnippet = `\n  fn bincount_write(index: i32, value: f32) {\n    ${atomicAddSnippet('&result[index]', 'value', 'float32')}\n  }\n`;\nconst binaryWriteSnippet = `\n  fn bincount_write(index: i32, value: f32) {\n    atomicStore(&result[index], bitcast<i32>(value));\n  }\n`;\nexport class BincountProgram {\n    constructor(shape, hasWeights, binaryOutput = false) {\n        this.outputShape = [];\n        this.variableNames = ['x'];\n        this.uniforms = 'binCountSize : i32,';\n        this.workgroupSize = [64, 1, 1];\n        this.atomic = true;\n        this.hasWeights = true;\n        this.binaryOutput = false;\n        this.outputShape = shape;\n        this.rank = shape.length;\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize);\n        this.binaryOutput = binaryOutput;\n        if (binaryOutput) {\n            this.atomic = false;\n        }\n        this.hasWeights = hasWeights;\n        if (this.hasWeights) {\n            this.variableNames.push('w');\n        }\n        this.shaderKey =\n            `bincount_${this.hasWeights}_${this.binaryOutput}_${this.rank}`;\n    }\n    getUserCode() {\n        const userCode = `\n    ${this.binaryOutput ? binaryWriteSnippet : writeSnippet}\n  ${main('index')} {\n    ${this.rank === 1 ?\n            `if (index < uniforms.xShape) {\n      let indexVal = i32(getX(index));\n      if (indexVal < uniforms.binCountSize) {\n        let value = ${this.binaryOutput ? 1. :\n                (this.hasWeights ? 'getW(index)' : '1.')};\n        bincount_write(indexVal, value);\n      }\n    }` :\n            `let coord = getCoordsFromIndex(index);\n    if (coordsInBounds2D(coord, uniforms.xShape)) {\n      let indexVal = i32(getX(coord[0], coord[1]));\n      if (indexVal < uniforms.binCountSize) {\n        let value = ${this.binaryOutput ?\n                1. :\n                (this.hasWeights ? 'getW(coord[0], coord[1])' : '1.')};\n        bincount_write(coord.x * uniforms.binCountSize + indexVal, value);\n      }\n    }`}\n  }\n  `;\n        return userCode;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmluY291bnRfd2ViZ3B1LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMvYmluY291bnRfd2ViZ3B1LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sRUFBQyxnQkFBZ0IsRUFBQyxNQUFNLGVBQWUsQ0FBQztBQUMvQyxPQUFPLEVBQUMsbUJBQW1CLElBQUksSUFBSSxFQUFnQixNQUFNLGtCQUFrQixDQUFDO0FBQzVFLE9BQU8sRUFBQyxlQUFlLEVBQUUsa0JBQWtCLEVBQUMsTUFBTSxlQUFlLENBQUM7QUFFbEUsTUFBTSxZQUFZLEdBQUc7O01BRWYsZ0JBQWdCLENBQUMsZ0JBQWdCLEVBQUUsT0FBTyxFQUFFLFNBQVMsQ0FBQzs7Q0FFM0QsQ0FBQztBQUVGLE1BQU0sa0JBQWtCLEdBQUc7Ozs7Q0FJMUIsQ0FBQztBQUVGLE1BQU0sT0FBTyxlQUFlO0lBYTFCLFlBQ0ksS0FBZ0MsRUFBRSxVQUFtQixFQUNyRCxZQUFZLEdBQUcsS0FBSztRQWR4QixnQkFBVyxHQUFhLEVBQUUsQ0FBQztRQUkzQixrQkFBYSxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDdEIsYUFBUSxHQUFHLHFCQUFxQixDQUFDO1FBQ2pDLGtCQUFhLEdBQTZCLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUNyRCxXQUFNLEdBQUcsSUFBSSxDQUFDO1FBQ2QsZUFBVSxHQUFHLElBQUksQ0FBQztRQUNsQixpQkFBWSxHQUFHLEtBQUssQ0FBQztRQU1uQixJQUFJLENBQUMsV0FBVyxHQUFHLEtBQUssQ0FBQztRQUN6QixJQUFJLENBQUMsSUFBSSxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUM7UUFDekIsSUFBSSxDQUFDLGNBQWMsR0FBRyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDM0QsSUFBSSxDQUFDLFFBQVEsR0FBRyxlQUFlLENBQzNCLElBQUksQ0FBQyxjQUFjLEVBQUUsSUFBSSxDQUFDLFdBQVcsRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7UUFFL0QsSUFBSSxDQUFDLFlBQVksR0FBRyxZQUFZLENBQUM7UUFDakMsSUFBSSxZQUFZLEVBQUU7WUFDaEIsSUFBSSxDQUFDLE1BQU0sR0FBRyxLQUFLLENBQUM7U0FDckI7UUFDRCxJQUFJLENBQUMsVUFBVSxHQUFHLFVBQVUsQ0FBQztRQUM3QixJQUFJLElBQUksQ0FBQyxVQUFVLEVBQUU7WUFDbkIsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7U0FDOUI7UUFDRCxJQUFJLENBQUMsU0FBUztZQUNWLFlBQVksSUFBSSxDQUFDLFVBQVUsSUFBSSxJQUFJLENBQUMsWUFBWSxJQUFJLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUN0RSxDQUFDO0lBRUQsV0FBVztRQUNULE1BQU0sUUFBUSxHQUFHO01BQ2YsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxDQUFDLFlBQVk7SUFDdkQsSUFBSSxDQUFDLE9BQU8sQ0FBQztNQUVULElBQUksQ0FBQyxJQUFJLEtBQUssQ0FBQyxDQUFDLENBQUM7WUFDYjs7O3NCQUlJLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO2dCQUNKLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUM7OztNQUd0RSxDQUFDLENBQUM7WUFDSTs7OztzQkFLSSxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUM7Z0JBQ2YsRUFBRSxDQUFDLENBQUM7Z0JBQ0osQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQywwQkFBMEIsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDOzs7TUFHbkU7O0dBRUgsQ0FBQztRQUNBLE9BQU8sUUFBUSxDQUFDO0lBQ2xCLENBQUM7Q0FDRiIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTEMuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHthdG9taWNBZGRTbmlwcGV0fSBmcm9tICcuL3NoYWRlcl91dGlsJztcbmltcG9ydCB7Z2V0TWFpbkhlYWRlclN0cmluZyBhcyBtYWluLCBXZWJHUFVQcm9ncmFtfSBmcm9tICcuL3dlYmdwdV9wcm9ncmFtJztcbmltcG9ydCB7Y29tcHV0ZURpc3BhdGNoLCBmbGF0RGlzcGF0Y2hMYXlvdXR9IGZyb20gJy4vd2ViZ3B1X3V0aWwnO1xuXG5jb25zdCB3cml0ZVNuaXBwZXQgPSBgXG4gIGZuIGJpbmNvdW50X3dyaXRlKGluZGV4OiBpMzIsIHZhbHVlOiBmMzIpIHtcbiAgICAke2F0b21pY0FkZFNuaXBwZXQoJyZyZXN1bHRbaW5kZXhdJywgJ3ZhbHVlJywgJ2Zsb2F0MzInKX1cbiAgfVxuYDtcblxuY29uc3QgYmluYXJ5V3JpdGVTbmlwcGV0ID0gYFxuICBmbiBiaW5jb3VudF93cml0ZShpbmRleDogaTMyLCB2YWx1ZTogZjMyKSB7XG4gICAgYXRvbWljU3RvcmUoJnJlc3VsdFtpbmRleF0sIGJpdGNhc3Q8aTMyPih2YWx1ZSkpO1xuICB9XG5gO1xuXG5leHBvcnQgY2xhc3MgQmluY291bnRQcm9ncmFtIGltcGxlbWVudHMgV2ViR1BVUHJvZ3JhbSB7XG4gIG91dHB1dFNoYXBlOiBudW1iZXJbXSA9IFtdO1xuICBzaGFkZXJLZXk6IHN0cmluZztcbiAgZGlzcGF0Y2hMYXlvdXQ6IHt4OiBudW1iZXJbXX07XG4gIGRpc3BhdGNoOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl07XG4gIHZhcmlhYmxlTmFtZXMgPSBbJ3gnXTtcbiAgdW5pZm9ybXMgPSAnYmluQ291bnRTaXplIDogaTMyLCc7XG4gIHdvcmtncm91cFNpemU6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXSA9IFs2NCwgMSwgMV07XG4gIGF0b21pYyA9IHRydWU7XG4gIGhhc1dlaWdodHMgPSB0cnVlO1xuICBiaW5hcnlPdXRwdXQgPSBmYWxzZTtcbiAgcmFuazogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgICAgc2hhcGU6IFtudW1iZXJdfFtudW1iZXIsIG51bWJlcl0sIGhhc1dlaWdodHM6IGJvb2xlYW4sXG4gICAgICBiaW5hcnlPdXRwdXQgPSBmYWxzZSkge1xuICAgIHRoaXMub3V0cHV0U2hhcGUgPSBzaGFwZTtcbiAgICB0aGlzLnJhbmsgPSBzaGFwZS5sZW5ndGg7XG4gICAgdGhpcy5kaXNwYXRjaExheW91dCA9IGZsYXREaXNwYXRjaExheW91dCh0aGlzLm91dHB1dFNoYXBlKTtcbiAgICB0aGlzLmRpc3BhdGNoID0gY29tcHV0ZURpc3BhdGNoKFxuICAgICAgICB0aGlzLmRpc3BhdGNoTGF5b3V0LCB0aGlzLm91dHB1dFNoYXBlLCB0aGlzLndvcmtncm91cFNpemUpO1xuXG4gICAgdGhpcy5iaW5hcnlPdXRwdXQgPSBiaW5hcnlPdXRwdXQ7XG4gICAgaWYgKGJpbmFyeU91dHB1dCkge1xuICAgICAgdGhpcy5hdG9taWMgPSBmYWxzZTtcbiAgICB9XG4gICAgdGhpcy5oYXNXZWlnaHRzID0gaGFzV2VpZ2h0cztcbiAgICBpZiAodGhpcy5oYXNXZWlnaHRzKSB7XG4gICAgICB0aGlzLnZhcmlhYmxlTmFtZXMucHVzaCgndycpO1xuICAgIH1cbiAgICB0aGlzLnNoYWRlcktleSA9XG4gICAgICAgIGBiaW5jb3VudF8ke3RoaXMuaGFzV2VpZ2h0c31fJHt0aGlzLmJpbmFyeU91dHB1dH1fJHt0aGlzLnJhbmt9YDtcbiAgfVxuXG4gIGdldFVzZXJDb2RlKCk6IHN0cmluZyB7XG4gICAgY29uc3QgdXNlckNvZGUgPSBgXG4gICAgJHt0aGlzLmJpbmFyeU91dHB1dCA/IGJpbmFyeVdyaXRlU25pcHBldCA6IHdyaXRlU25pcHBldH1cbiAgJHttYWluKCdpbmRleCcpfSB7XG4gICAgJHtcbiAgICAgICAgdGhpcy5yYW5rID09PSAxID9cbiAgICAgICAgICAgIGBpZiAoaW5kZXggPCB1bmlmb3Jtcy54U2hhcGUpIHtcbiAgICAgIGxldCBpbmRleFZhbCA9IGkzMihnZXRYKGluZGV4KSk7XG4gICAgICBpZiAoaW5kZXhWYWwgPCB1bmlmb3Jtcy5iaW5Db3VudFNpemUpIHtcbiAgICAgICAgbGV0IHZhbHVlID0gJHtcbiAgICAgICAgICAgICAgICB0aGlzLmJpbmFyeU91dHB1dCA/IDEuIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLmhhc1dlaWdodHMgPyAnZ2V0VyhpbmRleCknIDogJzEuJyl9O1xuICAgICAgICBiaW5jb3VudF93cml0ZShpbmRleFZhbCwgdmFsdWUpO1xuICAgICAgfVxuICAgIH1gIDpcbiAgICAgICAgICAgIGBsZXQgY29vcmQgPSBnZXRDb29yZHNGcm9tSW5kZXgoaW5kZXgpO1xuICAgIGlmIChjb29yZHNJbkJvdW5kczJEKGNvb3JkLCB1bmlmb3Jtcy54U2hhcGUpKSB7XG4gICAgICBsZXQgaW5kZXhWYWwgPSBpMzIoZ2V0WChjb29yZFswXSwgY29vcmRbMV0pKTtcbiAgICAgIGlmIChpbmRleFZhbCA8IHVuaWZvcm1zLmJpbkNvdW50U2l6ZSkge1xuICAgICAgICBsZXQgdmFsdWUgPSAke1xuICAgICAgICAgICAgICAgIHRoaXMuYmluYXJ5T3V0cHV0ID9cbiAgICAgICAgICAgICAgICAgICAgMS4gOlxuICAgICAgICAgICAgICAgICAgICAodGhpcy5oYXNXZWlnaHRzID8gJ2dldFcoY29vcmRbMF0sIGNvb3JkWzFdKScgOiAnMS4nKX07XG4gICAgICAgIGJpbmNvdW50X3dyaXRlKGNvb3JkLnggKiB1bmlmb3Jtcy5iaW5Db3VudFNpemUgKyBpbmRleFZhbCwgdmFsdWUpO1xuICAgICAgfVxuICAgIH1gfVxuICB9XG4gIGA7XG4gICAgcmV0dXJuIHVzZXJDb2RlO1xuICB9XG59XG4iXX0=","/**\n * @license\n * Copyright 2022 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Bincount, util } from '@tensorflow/tfjs-core';\nimport { BincountProgram } from '../bincount_webgpu';\nimport { fill } from './Fill';\nexport function bincount(args) {\n    const { inputs, backend, attrs } = args;\n    const { x, weights } = inputs;\n    const { size } = attrs;\n    const xSize = util.sizeFromShape(x.shape);\n    const weightsSize = util.sizeFromShape(weights.shape);\n    const hasWeights = weightsSize > 0;\n    const outputSize = [size];\n    const dtype = weights.dtype;\n    const output = fill({ backend, attrs: { shape: outputSize, value: 0, dtype } });\n    const program = new BincountProgram([xSize], hasWeights);\n    const uniformData = [{ type: 'int32', data: [size] }];\n    const bincountInputs = hasWeights ? [x, weights] : [x];\n    const res = backend.runWebGPUProgram(program, bincountInputs, dtype, uniformData, output);\n    return res;\n}\nexport const bincountConfig = {\n    kernelName: Bincount,\n    backendName: 'webgpu',\n    kernelFunc: bincount\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQmluY291bnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9rZXJuZWxzL0JpbmNvdW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sRUFBQyxRQUFRLEVBQXVFLElBQUksRUFBQyxNQUFNLHVCQUF1QixDQUFDO0FBRzFILE9BQU8sRUFBQyxlQUFlLEVBQUMsTUFBTSxvQkFBb0IsQ0FBQztBQUVuRCxPQUFPLEVBQUMsSUFBSSxFQUFDLE1BQU0sUUFBUSxDQUFDO0FBRTVCLE1BQU0sVUFBVSxRQUFRLENBQ3BCLElBQzBFO0lBRTVFLE1BQU0sRUFBQyxNQUFNLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBQyxHQUFHLElBQUksQ0FBQztJQUN0QyxNQUFNLEVBQUMsQ0FBQyxFQUFFLE9BQU8sRUFBQyxHQUFHLE1BQU0sQ0FBQztJQUM1QixNQUFNLEVBQUMsSUFBSSxFQUFDLEdBQUcsS0FBSyxDQUFDO0lBRXJCLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQzFDLE1BQU0sV0FBVyxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ3RELE1BQU0sVUFBVSxHQUFHLFdBQVcsR0FBRyxDQUFDLENBQUM7SUFDbkMsTUFBTSxVQUFVLEdBQWEsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNwQyxNQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsS0FBSyxDQUFDO0lBRTVCLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxFQUFDLE9BQU8sRUFBRSxLQUFLLEVBQUUsRUFBQyxLQUFLLEVBQUUsVUFBVSxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUUsS0FBSyxFQUFDLEVBQUMsQ0FBQyxDQUFDO0lBQzVFLE1BQU0sT0FBTyxHQUFHLElBQUksZUFBZSxDQUFDLENBQUMsS0FBSyxDQUFDLEVBQUUsVUFBVSxDQUFDLENBQUM7SUFDekQsTUFBTSxXQUFXLEdBQUcsQ0FBQyxFQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLENBQUMsSUFBSSxDQUFDLEVBQUMsQ0FBQyxDQUFDO0lBQ3BELE1BQU0sY0FBYyxHQUFpQixVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3JFLE1BQU0sR0FBRyxHQUFHLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FDaEMsT0FBTyxFQUFFLGNBQWMsRUFBRSxLQUFLLEVBQUUsV0FBVyxFQUFFLE1BQU0sQ0FBQyxDQUFDO0lBRXpELE9BQU8sR0FBRyxDQUFDO0FBQ2IsQ0FBQztBQUVELE1BQU0sQ0FBQyxNQUFNLGNBQWMsR0FBaUI7SUFDMUMsVUFBVSxFQUFFLFFBQVE7SUFDcEIsV0FBVyxFQUFFLFFBQVE7SUFDckIsVUFBVSxFQUFFLFFBQWlDO0NBQzlDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7QmluY291bnQsIEJpbmNvdW50QXR0cnMsIEJpbmNvdW50SW5wdXRzLCBLZXJuZWxDb25maWcsIEtlcm5lbEZ1bmMsIFRlbnNvckluZm8sIHV0aWx9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7V2ViR1BVQmFja2VuZH0gZnJvbSAnLi4vYmFja2VuZF93ZWJncHUnO1xuaW1wb3J0IHtCaW5jb3VudFByb2dyYW19IGZyb20gJy4uL2JpbmNvdW50X3dlYmdwdSc7XG5cbmltcG9ydCB7ZmlsbH0gZnJvbSAnLi9GaWxsJztcblxuZXhwb3J0IGZ1bmN0aW9uIGJpbmNvdW50KFxuICAgIGFyZ3M6XG4gICAgICAgIHtpbnB1dHM6IEJpbmNvdW50SW5wdXRzLCBiYWNrZW5kOiBXZWJHUFVCYWNrZW5kLCBhdHRyczogQmluY291bnRBdHRyc30pOlxuICAgIFRlbnNvckluZm8ge1xuICBjb25zdCB7aW5wdXRzLCBiYWNrZW5kLCBhdHRyc30gPSBhcmdzO1xuICBjb25zdCB7eCwgd2VpZ2h0c30gPSBpbnB1dHM7XG4gIGNvbnN0IHtzaXplfSA9IGF0dHJzO1xuXG4gIGNvbnN0IHhTaXplID0gdXRpbC5zaXplRnJvbVNoYXBlKHguc2hhcGUpO1xuICBjb25zdCB3ZWlnaHRzU2l6ZSA9IHV0aWwuc2l6ZUZyb21TaGFwZSh3ZWlnaHRzLnNoYXBlKTtcbiAgY29uc3QgaGFzV2VpZ2h0cyA9IHdlaWdodHNTaXplID4gMDtcbiAgY29uc3Qgb3V0cHV0U2l6ZTogW251bWJlcl0gPSBbc2l6ZV07XG4gIGNvbnN0IGR0eXBlID0gd2VpZ2h0cy5kdHlwZTtcblxuICBjb25zdCBvdXRwdXQgPSBmaWxsKHtiYWNrZW5kLCBhdHRyczoge3NoYXBlOiBvdXRwdXRTaXplLCB2YWx1ZTogMCwgZHR5cGV9fSk7XG4gIGNvbnN0IHByb2dyYW0gPSBuZXcgQmluY291bnRQcm9ncmFtKFt4U2l6ZV0sIGhhc1dlaWdodHMpO1xuICBjb25zdCB1bmlmb3JtRGF0YSA9IFt7dHlwZTogJ2ludDMyJywgZGF0YTogW3NpemVdfV07XG4gIGNvbnN0IGJpbmNvdW50SW5wdXRzOiBUZW5zb3JJbmZvW10gPSBoYXNXZWlnaHRzID8gW3gsIHdlaWdodHNdIDogW3hdO1xuICBjb25zdCByZXMgPSBiYWNrZW5kLnJ1bldlYkdQVVByb2dyYW0oXG4gICAgICBwcm9ncmFtLCBiaW5jb3VudElucHV0cywgZHR5cGUsIHVuaWZvcm1EYXRhLCBvdXRwdXQpO1xuXG4gIHJldHVybiByZXM7XG59XG5cbmV4cG9ydCBjb25zdCBiaW5jb3VudENvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBCaW5jb3VudCxcbiAgYmFja2VuZE5hbWU6ICd3ZWJncHUnLFxuICBrZXJuZWxGdW5jOiBiaW5jb3VudCBhcyB1bmtub3duIGFzIEtlcm5lbEZ1bmNcbn07XG4iXX0=","/**\n * @license\n * Copyright 2023 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { getMainHeaderString as main } from './webgpu_program';\nimport { computeDispatch, flatDispatchLayout } from './webgpu_util';\nexport class BroadcastArgsProgram {\n    constructor(shape) {\n        this.outputShape = [];\n        this.variableNames = ['s0', 's1'];\n        this.uniforms = 's0Size : i32, s1Size : i32, ';\n        this.workgroupSize = [64, 1, 1];\n        this.size = true;\n        this.outputShape = [shape];\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize);\n        this.shaderKey = 'broadcastArgs';\n    }\n    getUserCode() {\n        const userCode = `\n  ${main('index')} {\n    if (index < uniforms.size) {\n      var s0 = 1.0;\n      var s1 = 1.0;\n      let indexS0 = index - uniforms.size + uniforms.s0Size;\n      let indexS1 = index - uniforms.size + uniforms.s1Size;\n      if (indexS0 >= 0) {\n        s0 = getS0(indexS0);\n      }\n      if (indexS1 >= 0) {\n        s1 = getS1(indexS1);\n      }\n\n      if (s0 == 1.0) {\n        setOutputAtIndex(index, s1);\n      } else if (s1 == 1.0) {\n        setOutputAtIndex(index, s0);\n      } else if (s0 != s1) {\n        setOutputAtIndex(index, uniforms.NAN);\n      } else {\n        setOutputAtIndex(index, s0);\n      }\n    }\n  }\n  `;\n        return userCode;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnJvYWRjYXN0X2FyZ3Nfd2ViZ3B1LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMvYnJvYWRjYXN0X2FyZ3Nfd2ViZ3B1LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sRUFBQyxtQkFBbUIsSUFBSSxJQUFJLEVBQWdCLE1BQU0sa0JBQWtCLENBQUM7QUFDNUUsT0FBTyxFQUFDLGVBQWUsRUFBRSxrQkFBa0IsRUFBQyxNQUFNLGVBQWUsQ0FBQztBQUVsRSxNQUFNLE9BQU8sb0JBQW9CO0lBVS9CLFlBQVksS0FBYTtRQVR6QixnQkFBVyxHQUFhLEVBQUUsQ0FBQztRQUkzQixrQkFBYSxHQUFHLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQzdCLGFBQVEsR0FBRyw4QkFBOEIsQ0FBQztRQUMxQyxrQkFBYSxHQUE2QixDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDckQsU0FBSSxHQUFHLElBQUksQ0FBQztRQUdWLElBQUksQ0FBQyxXQUFXLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUMzQixJQUFJLENBQUMsY0FBYyxHQUFHLGtCQUFrQixDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUMzRCxJQUFJLENBQUMsUUFBUSxHQUFHLGVBQWUsQ0FDM0IsSUFBSSxDQUFDLGNBQWMsRUFBRSxJQUFJLENBQUMsV0FBVyxFQUFFLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQztRQUUvRCxJQUFJLENBQUMsU0FBUyxHQUFHLGVBQWUsQ0FBQztJQUNuQyxDQUFDO0lBRUQsV0FBVztRQUNULE1BQU0sUUFBUSxHQUFHO0lBQ2pCLElBQUksQ0FBQyxPQUFPLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztHQXdCZCxDQUFDO1FBQ0EsT0FBTyxRQUFRLENBQUM7SUFDbEIsQ0FBQztDQUNGIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjMgR29vZ2xlIExMQy5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge2dldE1haW5IZWFkZXJTdHJpbmcgYXMgbWFpbiwgV2ViR1BVUHJvZ3JhbX0gZnJvbSAnLi93ZWJncHVfcHJvZ3JhbSc7XG5pbXBvcnQge2NvbXB1dGVEaXNwYXRjaCwgZmxhdERpc3BhdGNoTGF5b3V0fSBmcm9tICcuL3dlYmdwdV91dGlsJztcblxuZXhwb3J0IGNsYXNzIEJyb2FkY2FzdEFyZ3NQcm9ncmFtIGltcGxlbWVudHMgV2ViR1BVUHJvZ3JhbSB7XG4gIG91dHB1dFNoYXBlOiBudW1iZXJbXSA9IFtdO1xuICBzaGFkZXJLZXk6IHN0cmluZztcbiAgZGlzcGF0Y2hMYXlvdXQ6IHt4OiBudW1iZXJbXX07XG4gIGRpc3BhdGNoOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl07XG4gIHZhcmlhYmxlTmFtZXMgPSBbJ3MwJywgJ3MxJ107XG4gIHVuaWZvcm1zID0gJ3MwU2l6ZSA6IGkzMiwgczFTaXplIDogaTMyLCAnO1xuICB3b3JrZ3JvdXBTaXplOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl0gPSBbNjQsIDEsIDFdO1xuICBzaXplID0gdHJ1ZTtcblxuICBjb25zdHJ1Y3RvcihzaGFwZTogbnVtYmVyKSB7XG4gICAgdGhpcy5vdXRwdXRTaGFwZSA9IFtzaGFwZV07XG4gICAgdGhpcy5kaXNwYXRjaExheW91dCA9IGZsYXREaXNwYXRjaExheW91dCh0aGlzLm91dHB1dFNoYXBlKTtcbiAgICB0aGlzLmRpc3BhdGNoID0gY29tcHV0ZURpc3BhdGNoKFxuICAgICAgICB0aGlzLmRpc3BhdGNoTGF5b3V0LCB0aGlzLm91dHB1dFNoYXBlLCB0aGlzLndvcmtncm91cFNpemUpO1xuXG4gICAgdGhpcy5zaGFkZXJLZXkgPSAnYnJvYWRjYXN0QXJncyc7XG4gIH1cblxuICBnZXRVc2VyQ29kZSgpOiBzdHJpbmcge1xuICAgIGNvbnN0IHVzZXJDb2RlID0gYFxuICAke21haW4oJ2luZGV4Jyl9IHtcbiAgICBpZiAoaW5kZXggPCB1bmlmb3Jtcy5zaXplKSB7XG4gICAgICB2YXIgczAgPSAxLjA7XG4gICAgICB2YXIgczEgPSAxLjA7XG4gICAgICBsZXQgaW5kZXhTMCA9IGluZGV4IC0gdW5pZm9ybXMuc2l6ZSArIHVuaWZvcm1zLnMwU2l6ZTtcbiAgICAgIGxldCBpbmRleFMxID0gaW5kZXggLSB1bmlmb3Jtcy5zaXplICsgdW5pZm9ybXMuczFTaXplO1xuICAgICAgaWYgKGluZGV4UzAgPj0gMCkge1xuICAgICAgICBzMCA9IGdldFMwKGluZGV4UzApO1xuICAgICAgfVxuICAgICAgaWYgKGluZGV4UzEgPj0gMCkge1xuICAgICAgICBzMSA9IGdldFMxKGluZGV4UzEpO1xuICAgICAgfVxuXG4gICAgICBpZiAoczAgPT0gMS4wKSB7XG4gICAgICAgIHNldE91dHB1dEF0SW5kZXgoaW5kZXgsIHMxKTtcbiAgICAgIH0gZWxzZSBpZiAoczEgPT0gMS4wKSB7XG4gICAgICAgIHNldE91dHB1dEF0SW5kZXgoaW5kZXgsIHMwKTtcbiAgICAgIH0gZWxzZSBpZiAoczAgIT0gczEpIHtcbiAgICAgICAgc2V0T3V0cHV0QXRJbmRleChpbmRleCwgdW5pZm9ybXMuTkFOKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNldE91dHB1dEF0SW5kZXgoaW5kZXgsIHMwKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgYDtcbiAgICByZXR1cm4gdXNlckNvZGU7XG4gIH1cbn1cbiJdfQ==","/**\n * @license\n * Copyright 2023 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { backend_util, BroadcastArgs, util } from '@tensorflow/tfjs-core';\nimport { BroadcastArgsProgram } from '../broadcast_args_webgpu';\nexport function broadcastArgs(args) {\n    const { inputs, backend } = args;\n    const { s0, s1 } = inputs;\n    if (backend.shouldExecuteOnCPU([s0, s1])) {\n        const s0TensorInfo = backend.tensorMap.get(s0.dataId);\n        const s1TensorInfo = backend.tensorMap.get(s1.dataId);\n        const s0Vals = s0TensorInfo.values;\n        const s1Vals = s1TensorInfo.values;\n        const broadcastShape = backend_util.assertAndGetBroadcastShape(Array.from(s0Vals), Array.from(s1Vals));\n        return backend.makeTensorInfo([broadcastShape.length], 'int32', Int32Array.from(broadcastShape));\n    }\n    const s0Size = util.sizeFromShape(s0.shape);\n    const s1Size = util.sizeFromShape(s1.shape);\n    const outputSize = Math.max(s0Size, s1Size);\n    const program = new BroadcastArgsProgram(outputSize);\n    const uniformData = [{ type: 'int32', data: [s0Size] }, { type: 'int32', data: [s1Size] }];\n    return backend.runWebGPUProgram(program, [s0, s1], 'int32', uniformData);\n}\nexport const broadcastArgsConfig = {\n    kernelName: BroadcastArgs,\n    backendName: 'webgpu',\n    kernelFunc: broadcastArgs\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQnJvYWRjYXN0QXJncy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2tlcm5lbHMvQnJvYWRjYXN0QXJncy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQUMsWUFBWSxFQUFFLGFBQWEsRUFBeUUsSUFBSSxFQUFDLE1BQU0sdUJBQXVCLENBQUM7QUFHL0ksT0FBTyxFQUFDLG9CQUFvQixFQUFDLE1BQU0sMEJBQTBCLENBQUM7QUFFOUQsTUFBTSxVQUFVLGFBQWEsQ0FBQyxJQUc3QjtJQUNDLE1BQU0sRUFBQyxNQUFNLEVBQUUsT0FBTyxFQUFDLEdBQUcsSUFBSSxDQUFDO0lBQy9CLE1BQU0sRUFBQyxFQUFFLEVBQUUsRUFBRSxFQUFDLEdBQUcsTUFBTSxDQUFDO0lBRXhCLElBQUksT0FBTyxDQUFDLGtCQUFrQixDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLEVBQUU7UUFDeEMsTUFBTSxZQUFZLEdBQUcsT0FBTyxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ3RELE1BQU0sWUFBWSxHQUFHLE9BQU8sQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUN0RCxNQUFNLE1BQU0sR0FBRyxZQUFZLENBQUMsTUFBb0IsQ0FBQztRQUNqRCxNQUFNLE1BQU0sR0FBRyxZQUFZLENBQUMsTUFBb0IsQ0FBQztRQUNqRCxNQUFNLGNBQWMsR0FBRyxZQUFZLENBQUMsMEJBQTBCLENBQzFELEtBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO1FBQzVDLE9BQU8sT0FBTyxDQUFDLGNBQWMsQ0FDekIsQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLEVBQUUsT0FBTyxFQUFFLFVBQVUsQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQztLQUN4RTtJQUVELE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQzVDLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQzVDLE1BQU0sVUFBVSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0lBRTVDLE1BQU0sT0FBTyxHQUFHLElBQUksb0JBQW9CLENBQUMsVUFBVSxDQUFDLENBQUM7SUFDckQsTUFBTSxXQUFXLEdBQ2IsQ0FBQyxFQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLENBQUMsTUFBTSxDQUFDLEVBQUMsRUFBRSxFQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLENBQUMsTUFBTSxDQUFDLEVBQUMsQ0FBQyxDQUFDO0lBQ3ZFLE9BQU8sT0FBTyxDQUFDLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBRSxPQUFPLEVBQUUsV0FBVyxDQUFDLENBQUM7QUFDM0UsQ0FBQztBQUVELE1BQU0sQ0FBQyxNQUFNLG1CQUFtQixHQUFpQjtJQUMvQyxVQUFVLEVBQUUsYUFBYTtJQUN6QixXQUFXLEVBQUUsUUFBUTtJQUNyQixVQUFVLEVBQUUsYUFBc0M7Q0FDbkQsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTEMuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtiYWNrZW5kX3V0aWwsIEJyb2FkY2FzdEFyZ3MsIEJyb2FkY2FzdEFyZ3NJbnB1dHMsIEtlcm5lbENvbmZpZywgS2VybmVsRnVuYywgVGVuc29ySW5mbywgVHlwZWRBcnJheSwgdXRpbH0gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcblxuaW1wb3J0IHtXZWJHUFVCYWNrZW5kfSBmcm9tICcuLi9iYWNrZW5kX3dlYmdwdSc7XG5pbXBvcnQge0Jyb2FkY2FzdEFyZ3NQcm9ncmFtfSBmcm9tICcuLi9icm9hZGNhc3RfYXJnc193ZWJncHUnO1xuXG5leHBvcnQgZnVuY3Rpb24gYnJvYWRjYXN0QXJncyhhcmdzOiB7XG4gIGlucHV0czogQnJvYWRjYXN0QXJnc0lucHV0cyxcbiAgYmFja2VuZDogV2ViR1BVQmFja2VuZCxcbn0pOiBUZW5zb3JJbmZvIHtcbiAgY29uc3Qge2lucHV0cywgYmFja2VuZH0gPSBhcmdzO1xuICBjb25zdCB7czAsIHMxfSA9IGlucHV0cztcblxuICBpZiAoYmFja2VuZC5zaG91bGRFeGVjdXRlT25DUFUoW3MwLCBzMV0pKSB7XG4gICAgY29uc3QgczBUZW5zb3JJbmZvID0gYmFja2VuZC50ZW5zb3JNYXAuZ2V0KHMwLmRhdGFJZCk7XG4gICAgY29uc3QgczFUZW5zb3JJbmZvID0gYmFja2VuZC50ZW5zb3JNYXAuZ2V0KHMxLmRhdGFJZCk7XG4gICAgY29uc3QgczBWYWxzID0gczBUZW5zb3JJbmZvLnZhbHVlcyBhcyBUeXBlZEFycmF5O1xuICAgIGNvbnN0IHMxVmFscyA9IHMxVGVuc29ySW5mby52YWx1ZXMgYXMgVHlwZWRBcnJheTtcbiAgICBjb25zdCBicm9hZGNhc3RTaGFwZSA9IGJhY2tlbmRfdXRpbC5hc3NlcnRBbmRHZXRCcm9hZGNhc3RTaGFwZShcbiAgICAgICAgQXJyYXkuZnJvbShzMFZhbHMpLCBBcnJheS5mcm9tKHMxVmFscykpO1xuICAgIHJldHVybiBiYWNrZW5kLm1ha2VUZW5zb3JJbmZvKFxuICAgICAgICBbYnJvYWRjYXN0U2hhcGUubGVuZ3RoXSwgJ2ludDMyJywgSW50MzJBcnJheS5mcm9tKGJyb2FkY2FzdFNoYXBlKSk7XG4gIH1cblxuICBjb25zdCBzMFNpemUgPSB1dGlsLnNpemVGcm9tU2hhcGUoczAuc2hhcGUpO1xuICBjb25zdCBzMVNpemUgPSB1dGlsLnNpemVGcm9tU2hhcGUoczEuc2hhcGUpO1xuICBjb25zdCBvdXRwdXRTaXplID0gTWF0aC5tYXgoczBTaXplLCBzMVNpemUpO1xuXG4gIGNvbnN0IHByb2dyYW0gPSBuZXcgQnJvYWRjYXN0QXJnc1Byb2dyYW0ob3V0cHV0U2l6ZSk7XG4gIGNvbnN0IHVuaWZvcm1EYXRhID1cbiAgICAgIFt7dHlwZTogJ2ludDMyJywgZGF0YTogW3MwU2l6ZV19LCB7dHlwZTogJ2ludDMyJywgZGF0YTogW3MxU2l6ZV19XTtcbiAgcmV0dXJuIGJhY2tlbmQucnVuV2ViR1BVUHJvZ3JhbShwcm9ncmFtLCBbczAsIHMxXSwgJ2ludDMyJywgdW5pZm9ybURhdGEpO1xufVxuXG5leHBvcnQgY29uc3QgYnJvYWRjYXN0QXJnc0NvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBCcm9hZGNhc3RBcmdzLFxuICBiYWNrZW5kTmFtZTogJ3dlYmdwdScsXG4gIGtlcm5lbEZ1bmM6IGJyb2FkY2FzdEFyZ3MgYXMgdW5rbm93biBhcyBLZXJuZWxGdW5jXG59O1xuIl19","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { NotEqual } from '@tensorflow/tfjs-core';\nimport { BinaryOpType } from '../binary_op_util';\nimport { binaryKernelFunc } from '../kernel_utils/kernel_funcs_utils';\nimport { notEqualImplCPU as cpuNotEqual } from '../kernel_utils/shared';\nexport const notEqual = binaryKernelFunc({\n    opType: BinaryOpType.NOT_EQUAL,\n    dtype: 'bool',\n    cpuKernelImpl: cpuNotEqual\n});\nexport const notEqualConfig = {\n    kernelName: NotEqual,\n    backendName: 'webgpu',\n    kernelFunc: notEqual\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTm90RXF1YWwuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9rZXJuZWxzL05vdEVxdWFsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sRUFBZSxRQUFRLEVBQUMsTUFBTSx1QkFBdUIsQ0FBQztBQUU3RCxPQUFPLEVBQUMsWUFBWSxFQUFDLE1BQU0sbUJBQW1CLENBQUM7QUFDL0MsT0FBTyxFQUFDLGdCQUFnQixFQUFDLE1BQU0sb0NBQW9DLENBQUM7QUFDcEUsT0FBTyxFQUFDLGVBQWUsSUFBSSxXQUFXLEVBQUMsTUFBTSx3QkFBd0IsQ0FBQztBQUV0RSxNQUFNLENBQUMsTUFBTSxRQUFRLEdBQUcsZ0JBQWdCLENBQUM7SUFDdkMsTUFBTSxFQUFFLFlBQVksQ0FBQyxTQUFTO0lBQzlCLEtBQUssRUFBRSxNQUFNO0lBQ2IsYUFBYSxFQUFFLFdBQVc7Q0FDM0IsQ0FBQyxDQUFDO0FBRUgsTUFBTSxDQUFDLE1BQU0sY0FBYyxHQUFpQjtJQUMxQyxVQUFVLEVBQUUsUUFBUTtJQUNwQixXQUFXLEVBQUUsUUFBUTtJQUNyQixVQUFVLEVBQUUsUUFBUTtDQUNyQixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge0tlcm5lbENvbmZpZywgTm90RXF1YWx9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7QmluYXJ5T3BUeXBlfSBmcm9tICcuLi9iaW5hcnlfb3BfdXRpbCc7XG5pbXBvcnQge2JpbmFyeUtlcm5lbEZ1bmN9IGZyb20gJy4uL2tlcm5lbF91dGlscy9rZXJuZWxfZnVuY3NfdXRpbHMnO1xuaW1wb3J0IHtub3RFcXVhbEltcGxDUFUgYXMgY3B1Tm90RXF1YWx9IGZyb20gJy4uL2tlcm5lbF91dGlscy9zaGFyZWQnO1xuXG5leHBvcnQgY29uc3Qgbm90RXF1YWwgPSBiaW5hcnlLZXJuZWxGdW5jKHtcbiAgb3BUeXBlOiBCaW5hcnlPcFR5cGUuTk9UX0VRVUFMLFxuICBkdHlwZTogJ2Jvb2wnLFxuICBjcHVLZXJuZWxJbXBsOiBjcHVOb3RFcXVhbFxufSk7XG5cbmV4cG9ydCBjb25zdCBub3RFcXVhbENvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBOb3RFcXVhbCxcbiAgYmFja2VuZE5hbWU6ICd3ZWJncHUnLFxuICBrZXJuZWxGdW5jOiBub3RFcXVhbFxufTtcbiJdfQ==","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Real } from '@tensorflow/tfjs-core';\nimport { identity } from './Identity';\nexport function real(args) {\n    const { inputs, backend } = args;\n    const { input } = inputs;\n    const inputData = backend.tensorMap.get(input.dataId);\n    return identity({ inputs: { x: inputData.complexTensorInfos.real }, backend });\n}\nexport const realConfig = {\n    kernelName: Real,\n    backendName: 'webgpu',\n    kernelFunc: real\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUmVhbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2tlcm5lbHMvUmVhbC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQTJCLElBQUksRUFBeUIsTUFBTSx1QkFBdUIsQ0FBQztBQUc3RixPQUFPLEVBQUMsUUFBUSxFQUFDLE1BQU0sWUFBWSxDQUFDO0FBRXBDLE1BQU0sVUFBVSxJQUFJLENBQUMsSUFBa0Q7SUFFckUsTUFBTSxFQUFDLE1BQU0sRUFBRSxPQUFPLEVBQUMsR0FBRyxJQUFJLENBQUM7SUFDL0IsTUFBTSxFQUFDLEtBQUssRUFBQyxHQUFHLE1BQU0sQ0FBQztJQUN2QixNQUFNLFNBQVMsR0FBRyxPQUFPLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUM7SUFFdEQsT0FBTyxRQUFRLENBQUMsRUFBQyxNQUFNLEVBQUUsRUFBQyxDQUFDLEVBQUUsU0FBUyxDQUFDLGtCQUFrQixDQUFDLElBQUksRUFBQyxFQUFFLE9BQU8sRUFBQyxDQUFDLENBQUM7QUFDN0UsQ0FBQztBQUVELE1BQU0sQ0FBQyxNQUFNLFVBQVUsR0FBaUI7SUFDdEMsVUFBVSxFQUFFLElBQUk7SUFDaEIsV0FBVyxFQUFFLFFBQVE7SUFDckIsVUFBVSxFQUFFLElBQTZCO0NBQzFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7S2VybmVsQ29uZmlnLCBLZXJuZWxGdW5jLCBSZWFsLCBSZWFsSW5wdXRzLCBUZW5zb3JJbmZvfSBmcm9tICdAdGVuc29yZmxvdy90ZmpzLWNvcmUnO1xuXG5pbXBvcnQge1dlYkdQVUJhY2tlbmR9IGZyb20gJy4uL2JhY2tlbmRfd2ViZ3B1JztcbmltcG9ydCB7aWRlbnRpdHl9IGZyb20gJy4vSWRlbnRpdHknO1xuXG5leHBvcnQgZnVuY3Rpb24gcmVhbChhcmdzOiB7aW5wdXRzOiBSZWFsSW5wdXRzLCBiYWNrZW5kOiBXZWJHUFVCYWNrZW5kfSk6XG4gICAgVGVuc29ySW5mbyB7XG4gIGNvbnN0IHtpbnB1dHMsIGJhY2tlbmR9ID0gYXJncztcbiAgY29uc3Qge2lucHV0fSA9IGlucHV0cztcbiAgY29uc3QgaW5wdXREYXRhID0gYmFja2VuZC50ZW5zb3JNYXAuZ2V0KGlucHV0LmRhdGFJZCk7XG5cbiAgcmV0dXJuIGlkZW50aXR5KHtpbnB1dHM6IHt4OiBpbnB1dERhdGEuY29tcGxleFRlbnNvckluZm9zLnJlYWx9LCBiYWNrZW5kfSk7XG59XG5cbmV4cG9ydCBjb25zdCByZWFsQ29uZmlnOiBLZXJuZWxDb25maWcgPSB7XG4gIGtlcm5lbE5hbWU6IFJlYWwsXG4gIGJhY2tlbmROYW1lOiAnd2ViZ3B1JyxcbiAga2VybmVsRnVuYzogcmVhbCBhcyB1bmtub3duIGFzIEtlcm5lbEZ1bmNcbn07XG4iXX0=","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { UnaryOpType } from '../unary_op_util';\nimport { UnaryOpProgram } from '../unary_op_webgpu';\nexport function int(input, backend) {\n    const program = new UnaryOpProgram(input.shape, UnaryOpType.TO_INT);\n    const output = backend.runWebGPUProgram(program, [input], 'int32');\n    return { dataId: output.dataId, shape: output.shape, dtype: output.dtype };\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMva2VybmVsX3V0aWxzL2ludC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFJSCxPQUFPLEVBQUMsV0FBVyxFQUFDLE1BQU0sa0JBQWtCLENBQUM7QUFDN0MsT0FBTyxFQUFDLGNBQWMsRUFBQyxNQUFNLG9CQUFvQixDQUFDO0FBRWxELE1BQU0sVUFBVSxHQUFHLENBQUMsS0FBaUIsRUFBRSxPQUFzQjtJQUMzRCxNQUFNLE9BQU8sR0FBRyxJQUFJLGNBQWMsQ0FBQyxLQUFLLENBQUMsS0FBSyxFQUFFLFdBQVcsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUNwRSxNQUFNLE1BQU0sR0FBRyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLENBQUMsS0FBSyxDQUFDLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDbkUsT0FBTyxFQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsTUFBTSxFQUFFLEtBQUssRUFBRSxNQUFNLENBQUMsS0FBSyxFQUFFLEtBQUssRUFBRSxNQUFNLENBQUMsS0FBSyxFQUFDLENBQUM7QUFDM0UsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtUZW5zb3JJbmZvfSBmcm9tICdAdGVuc29yZmxvdy90ZmpzLWNvcmUnO1xuaW1wb3J0IHtXZWJHUFVCYWNrZW5kfSBmcm9tICcuLi9iYWNrZW5kX3dlYmdwdSc7XG5pbXBvcnQge1VuYXJ5T3BUeXBlfSBmcm9tICcuLi91bmFyeV9vcF91dGlsJztcbmltcG9ydCB7VW5hcnlPcFByb2dyYW19IGZyb20gJy4uL3VuYXJ5X29wX3dlYmdwdSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBpbnQoaW5wdXQ6IFRlbnNvckluZm8sIGJhY2tlbmQ6IFdlYkdQVUJhY2tlbmQpOiBUZW5zb3JJbmZvIHtcbiAgY29uc3QgcHJvZ3JhbSA9IG5ldyBVbmFyeU9wUHJvZ3JhbShpbnB1dC5zaGFwZSwgVW5hcnlPcFR5cGUuVE9fSU5UKTtcbiAgY29uc3Qgb3V0cHV0ID0gYmFja2VuZC5ydW5XZWJHUFVQcm9ncmFtKHByb2dyYW0sIFtpbnB1dF0sICdpbnQzMicpO1xuICByZXR1cm4ge2RhdGFJZDogb3V0cHV0LmRhdGFJZCwgc2hhcGU6IG91dHB1dC5zaGFwZSwgZHR5cGU6IG91dHB1dC5kdHlwZX07XG59XG4iXX0=","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport * as tf from '@tensorflow/tfjs-core';\nimport { Cast, util } from '@tensorflow/tfjs-core';\nimport { castImplCPU } from '../kernel_utils/shared';\nimport { complex } from './Complex';\nimport { identity } from './Identity';\nimport { notEqual } from './NotEqual';\nimport { real } from './Real';\nimport { int } from '../kernel_utils/int';\nexport function cast(args) {\n    const { inputs, backend, attrs } = args;\n    const { x } = inputs;\n    const { dtype } = attrs;\n    // Casting to complex64.\n    if (dtype === 'complex64') {\n        if (x.dtype === 'complex64') {\n            return identity({ inputs: { x }, backend });\n        }\n        // TODO: Import kernel function once zeros is modularized.\n        const zerosTensor = tf.zeros(x.shape);\n        const floatX = cast({ inputs: { x }, backend, attrs: { dtype: 'float32' } });\n        const result = complex({ inputs: { real: floatX, imag: zerosTensor }, backend });\n        zerosTensor.dispose();\n        backend.disposeData(floatX.dataId);\n        return result;\n    }\n    // Casting from complex64\n    if (x.dtype === 'complex64') {\n        const realPart = real({ inputs: { input: x }, backend });\n        const result = cast({ inputs: { x: realPart }, backend, attrs: { dtype } });\n        backend.disposeData(realPart.dataId);\n        return result;\n    }\n    if (!util.hasEncodingLoss(x.dtype, dtype)) {\n        // We don't change the underlying data, since we cast to higher\n        // precision.\n        const result = identity({ inputs: { x }, backend });\n        return { dataId: result.dataId, shape: result.shape, dtype };\n    }\n    if (backend.shouldExecuteOnCPU([x])) {\n        const values = backend.tensorMap.get(x.dataId).values;\n        const [resultShape, resultType, resultData] = castImplCPU(values, x.shape, x.dtype, dtype);\n        return backend.makeTensorInfo(resultShape, resultType, resultData);\n    }\n    if (dtype === 'int32') {\n        return int(x, backend);\n    }\n    if (dtype === 'bool') {\n        const zerosTensorInfo = backend.makeTensorInfo([], 'bool', util.getTypedArrayFromDType('bool', 1));\n        const binaryInputs = { a: x, b: zerosTensorInfo };\n        const result = notEqual({ inputs: binaryInputs, backend });\n        backend.disposeData(zerosTensorInfo.dataId);\n        return result;\n    }\n    throw new Error(`Error in Cast: failed to cast ${x.dtype} to ${dtype}`);\n}\nexport const castConfig = {\n    kernelName: Cast,\n    backendName: 'webgpu',\n    kernelFunc: cast\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ2FzdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2tlcm5lbHMvQ2FzdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFDSCxPQUFPLEtBQUssRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBQzVDLE9BQU8sRUFBZSxJQUFJLEVBQTJFLElBQUksRUFBQyxNQUFNLHVCQUF1QixDQUFDO0FBR3hJLE9BQU8sRUFBQyxXQUFXLEVBQUMsTUFBTSx3QkFBd0IsQ0FBQztBQUVuRCxPQUFPLEVBQUMsT0FBTyxFQUFDLE1BQU0sV0FBVyxDQUFDO0FBQ2xDLE9BQU8sRUFBQyxRQUFRLEVBQUMsTUFBTSxZQUFZLENBQUM7QUFDcEMsT0FBTyxFQUFDLFFBQVEsRUFBQyxNQUFNLFlBQVksQ0FBQztBQUNwQyxPQUFPLEVBQUMsSUFBSSxFQUFDLE1BQU0sUUFBUSxDQUFDO0FBRTVCLE9BQU8sRUFBQyxHQUFHLEVBQUMsTUFBTSxxQkFBcUIsQ0FBQztBQUV4QyxNQUFNLFVBQVUsSUFBSSxDQUNoQixJQUFvRTtJQUV0RSxNQUFNLEVBQUMsTUFBTSxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUMsR0FBRyxJQUFJLENBQUM7SUFDdEMsTUFBTSxFQUFDLENBQUMsRUFBQyxHQUFHLE1BQU0sQ0FBQztJQUNuQixNQUFNLEVBQUMsS0FBSyxFQUFDLEdBQUcsS0FBSyxDQUFDO0lBRXRCLHdCQUF3QjtJQUN4QixJQUFJLEtBQUssS0FBSyxXQUFXLEVBQUU7UUFDekIsSUFBSSxDQUFDLENBQUMsS0FBSyxLQUFLLFdBQVcsRUFBRTtZQUMzQixPQUFPLFFBQVEsQ0FBQyxFQUFDLE1BQU0sRUFBRSxFQUFDLENBQUMsRUFBQyxFQUFFLE9BQU8sRUFBQyxDQUFDLENBQUM7U0FDekM7UUFFRCwwREFBMEQ7UUFDMUQsTUFBTSxXQUFXLEdBQUcsRUFBRSxDQUFDLEtBQUssQ0FB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QUVELE1BQU0sSUFBSSxLQUFLLENBQUMsaUNBQWlDLENBQUMsQ0FBQyxLQUFLLE9BQU8sS0FBSyxFQUFFLENBQUMsQ0FBQztBQUMxRSxDQUFDO0FBRUQsTUFBTSxDQUFDLE1BQU0sVUFBVSxHQUFpQjtJQUN0QyxVQUFVLEVBQUUsSUFBSTtJQUNoQixXQUFXLEVBQUUsUUFBUTtJQUNyQixVQUFVLEVBQUUsSUFBNkI7Q0FDMUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cbmltcG9ydCAqIGFzIHRmIGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5pbXBvcnQge0JpbmFyeUlucHV0cywgQ2FzdCwgQ2FzdEF0dHJzLCBDYXN0SW5wdXRzLCBLZXJuZWxDb25maWcsIEtlcm5lbEZ1bmMsIFRlbnNvckluZm8sIFR5cGVkQXJyYXksIHV0aWx9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7V2ViR1BVQmFja2VuZH0gZnJvbSAnLi4vYmFja2VuZF93ZWJncHUnO1xuaW1wb3J0IHtjYXN0SW1wbENQVX0gZnJvbSAnLi4va2VybmVsX3V0aWxzL3NoYXJlZCc7XG5cbmltcG9ydCB7Y29tcGxleH0gZnJvbSAnLi9Db21wbGV4JztcbmltcG9ydCB7aWRlbnRpdHl9IGZyb20gJy4vSWRlbnRpdHknO1xuaW1wb3J0IHtub3RFcXVhbH0gZnJvbSAnLi9Ob3RFcXVhbCc7XG5pbXBvcnQge3JlYWx9IGZyb20gJy4vUmVhbCc7XG5cbmltcG9ydCB7aW50fSBmcm9tICcuLi9rZXJuZWxfdXRpbHMvaW50JztcblxuZXhwb3J0IGZ1bmN0aW9uIGNhc3QoXG4gICAgYXJnczoge2lucHV0czogQ2FzdElucHV0cywgYmFja2VuZDogV2ViR1BVQmFja2VuZCwgYXR0cnM6IENhc3RBdHRyc30pOlxuICAgIFRlbnNvckluZm8ge1xuICBjb25zdCB7aW5wdXRzLCBiYWNrZW5kLCBhdHRyc30gPSBhcmdzO1xuICBjb25zdCB7eH0gPSBpbnB1dHM7XG4gIGNvbnN0IHtkdHlwZX0gPSBhdHRycztcblxuICAvLyBDYXN0aW5nIHRvIGNvbXBsZXg2NC5cbiAgaWYgKGR0eXBlID09PSAnY29tcGxleDY0Jykge1xuICAgIGlmICh4LmR0eXBlID09PSAnY29tcGxleDY0Jykge1xuICAgICAgcmV0dXJuIGlkZW50aXR5KHtpbnB1dHM6IHt4fSwgYmFja2VuZH0pO1xuICAgIH1cblxuICAgIC8vIFRPRE86IEltcG9ydCBrZXJuZWwgZnVuY3Rpb24gb25jZSB6ZXJvcyBpcyBtb2R1bGFyaXplZC5cbiAgICBjb25zdCB6ZXJvc1RlbnNvciA9IHRmLnplcm9zKHguc2hhcGUpO1xuICAgIGNvbnN0IGZsb2F0WCA9IGNhc3Qoe2lucHV0czoge3h9LCBiYWNrZW5kLCBhdHRyczoge2R0eXBlOiAnZmxvYXQzMid9fSk7XG5cbiAgICBjb25zdCByZXN1bHQgPVxuICAgICAgICBjb21wbGV4KHtpbnB1dHM6IHtyZWFsOiBmbG9hdFgsIGltYWc6IHplcm9zVGVuc29yfSwgYmFja2VuZH0pO1xuXG4gICAgemVyb3NUZW5zb3IuZGlzcG9zZSgpO1xuICAgIGJhY2tlbmQuZGlzcG9zZURhdGEoZmxvYXRYLmRhdGFJZCk7XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLy8gQ2FzdGluZyBmcm9tIGNvbXBsZXg2NFxuICBpZiAoeC5kdHlwZSA9PT0gJ2NvbXBsZXg2NCcpIHtcbiAgICBjb25zdCByZWFsUGFydCA9IHJlYWwoe2lucHV0czoge2lucHV0OiB4fSwgYmFja2VuZH0pO1xuICAgIGNvbnN0IHJlc3VsdCA9IGNhc3Qoe2lucHV0czoge3g6IHJlYWxQYXJ0fSwgYmFja2VuZCwgYXR0cnM6IHtkdHlwZX19KTtcbiAgICBiYWNrZW5kLmRpc3Bvc2VEYXRhKHJlYWxQYXJ0LmRhdGFJZCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIGlmICghdXRpbC5oYXNFbmNvZGluZ0xvc3MoeC5kdHlwZSwgZHR5cGUpKSB7XG4gICAgLy8gV2UgZG9uJ3QgY2hhbmdlIHRoZSB1bmRlcmx5aW5nIGRhdGEsIHNpbmNlIHdlIGNhc3QgdG8gaGlnaGVyXG4gICAgLy8gcHJlY2lzaW9uLlxuICAgIGNvbnN0IHJlc3VsdCA9IGlkZW50aXR5KHtpbnB1dHM6IHt4fSwgYmFja2VuZH0pO1xuICAgIHJldHVybiB7ZGF0YUlkOiByZXN1bHQuZGF0YUlkLCBzaGFwZTogcmVzdWx0LnNoYXBlLCBkdHlwZX07XG4gIH1cblxuICBpZiAoYmFja2VuZC5zaG91bGRFeGVjdXRlT25DUFUoW3hdKSkge1xuICAgIGNvbnN0IHZhbHVlcyA9IGJhY2tlbmQudGVuc29yTWFwLmdldCh4LmRhdGFJZCkudmFsdWVzIGFzIFR5cGVkQXJyYXk7XG4gICAgY29uc3QgW3Jlc3VsdFNoYXBlLCByZXN1bHRUeXBlLCByZXN1bHREYXRhXSA9XG4gICAgICAgIGNhc3RJbXBsQ1BVKHZhbHVlcywgeC5zaGFwZSwgeC5kdHlwZSwgZHR5cGUpO1xuICAgIHJldHVybiBiYWNrZW5kLm1ha2VUZW5zb3JJbmZvKHJlc3VsdFNoYXBlLCByZXN1bHRUeXBlLCByZXN1bHREYXRhKTtcbiAgfVxuXG4gIGlmIChkdHlwZSA9PT0gJ2ludDMyJykge1xuICAgIHJldHVybiBpbnQoeCwgYmFja2VuZCk7XG4gIH1cblxuICBpZiAoZHR5cGUgPT09ICdib29sJykge1xuICAgIGNvbnN0IHplcm9zVGVuc29ySW5mbyA9IGJhY2tlbmQubWFrZVRlbnNvckluZm8oXG4gICAgICAgIFtdLCAnYm9vbCcsIHV0aWwuZ2V0VHlwZWRBcnJheUZyb21EVHlwZSgnYm9vbCcsIDEpKTtcblxuICAgIGNvbnN0IGJpbmFyeUlucHV0czogQmluYXJ5SW5wdXRzID0ge2E6IHgsIGI6IHplcm9zVGVuc29ySW5mb307XG5cbiAgICBjb25zdCByZXN1bHQgPSBub3RFcXVhbCh7aW5wdXRzOiBiaW5hcnlJbnB1dHMsIGJhY2tlbmR9KSBhcyBUZW5zb3JJbmZvO1xuICAgIGJhY2tlbmQuZGlzcG9zZURhdGEoemVyb3NUZW5zb3JJbmZvLmRhdGFJZCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIHRocm93IG5ldyBFcnJvcihgRXJyb3IgaW4gQ2FzdDogZmFpbGVkIHRvIGNhc3QgJHt4LmR0eXBlfSB0byAke2R0eXBlfWApO1xufVxuXG5leHBvcnQgY29uc3QgY2FzdENvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBDYXN0LFxuICBiYWNrZW5kTmFtZTogJ3dlYmdwdScsXG4gIGtlcm5lbEZ1bmM6IGNhc3QgYXMgdW5rbm93biBhcyBLZXJuZWxGdW5jXG59O1xuIl19","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Ceil } from '@tensorflow/tfjs-core';\nimport { unaryKernelFunc } from '../kernel_utils/kernel_funcs_utils';\nimport { ceilImplCPU } from '../kernel_utils/shared';\nimport { UnaryOpType } from '../unary_op_util';\nexport const ceil = unaryKernelFunc({ opType: UnaryOpType.CEIL, cpuKernelImpl: ceilImplCPU });\nexport const ceilConfig = {\n    kernelName: Ceil,\n    backendName: 'webgpu',\n    kernelFunc: ceil\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ2VpbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2tlcm5lbHMvQ2VpbC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQUMsSUFBSSxFQUFlLE1BQU0sdUJBQXVCLENBQUM7QUFDekQsT0FBTyxFQUFDLGVBQWUsRUFBQyxNQUFNLG9DQUFvQyxDQUFDO0FBQ25FLE9BQU8sRUFBQyxXQUFXLEVBQUMsTUFBTSx3QkFBd0IsQ0FBQztBQUNuRCxPQUFPLEVBQUMsV0FBVyxFQUFDLE1BQU0sa0JBQWtCLENBQUM7QUFFN0MsTUFBTSxDQUFDLE1BQU0sSUFBSSxHQUNiLGVBQWUsQ0FBQyxFQUFDLE1BQU0sRUFBRSxXQUFXLENBQUMsSUFBSSxFQUFFLGFBQWEsRUFBRSxXQUFXLEVBQUMsQ0FBQyxDQUFDO0FBRTVFLE1BQU0sQ0FBQyxNQUFNLFVBQVUsR0FBaUI7SUFDdEMsVUFBVSxFQUFFLElBQUk7SUFDaEIsV0FBVyxFQUFFLFFBQVE7SUFDckIsVUFBVSxFQUFFLElBQUk7Q0FDakIsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtDZWlsLCBLZXJuZWxDb25maWd9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5pbXBvcnQge3VuYXJ5S2VybmVsRnVuY30gZnJvbSAnLi4va2VybmVsX3V0aWxzL2tlcm5lbF9mdW5jc191dGlscyc7XG5pbXBvcnQge2NlaWxJbXBsQ1BVfSBmcm9tICcuLi9rZXJuZWxfdXRpbHMvc2hhcmVkJztcbmltcG9ydCB7VW5hcnlPcFR5cGV9IGZyb20gJy4uL3VuYXJ5X29wX3V0aWwnO1xuXG5leHBvcnQgY29uc3QgY2VpbCA9XG4gICAgdW5hcnlLZXJuZWxGdW5jKHtvcFR5cGU6IFVuYXJ5T3BUeXBlLkNFSUwsIGNwdUtlcm5lbEltcGw6IGNlaWxJbXBsQ1BVfSk7XG5cbmV4cG9ydCBjb25zdCBjZWlsQ29uZmlnOiBLZXJuZWxDb25maWcgPSB7XG4gIGtlcm5lbE5hbWU6IENlaWwsXG4gIGJhY2tlbmROYW1lOiAnd2ViZ3B1JyxcbiAga2VybmVsRnVuYzogY2VpbFxufTtcbiJdfQ==","/**\n * @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { getMainHeaderString as main } from './webgpu_program';\nimport { computeDispatch, flatDispatchLayout } from './webgpu_util';\nexport class ClipVec4Program {\n    constructor(outputShape) {\n        this.variableNames = ['A'];\n        this.uniforms = 'minVal : f32, maxVal : f32,';\n        this.workPerThread = 4;\n        this.workgroupSize = [64, 1, 1];\n        this.outputComponent = 4;\n        this.size = true;\n        this.outputShape = outputShape;\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize, [this.workPerThread, 1, 1]);\n        this.shaderKey = 'clipVec4';\n    }\n    getUserCode() {\n        const userCode = `\n      ${main('index')} {\n        if(index < uniforms.size) {\n          let value = getAByOutputIndex(index);\n          var clampedValue = clamp(\n              value, vec4<f32>(uniforms.minVal), vec4<f32>(uniforms.maxVal));\n          clampedValue = select(clampedValue, value, isnanVec4(value));\n          setOutputAtIndex(index, clampedValue);\n        }\n      }\n    `;\n        return userCode;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2xpcF92ZWM0X3dlYmdwdS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2NsaXBfdmVjNF93ZWJncHUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUFDLG1CQUFtQixJQUFJLElBQUksRUFBZ0IsTUFBTSxrQkFBa0IsQ0FBQztBQUM1RSxPQUFPLEVBQUMsZUFBZSxFQUFFLGtCQUFrQixFQUFDLE1BQU0sZUFBZSxDQUFDO0FBRWxFLE1BQU0sT0FBTyxlQUFlO0lBWTFCLFlBQVksV0FBcUI7UUFUakMsa0JBQWEsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ3RCLGFBQVEsR0FBRyw2QkFBNkIsQ0FBQztRQUd6QyxrQkFBYSxHQUFHLENBQUMsQ0FBQztRQUNsQixrQkFBYSxHQUE2QixDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDckQsb0JBQWUsR0FBRyxDQUFDLENBQUM7UUFDcEIsU0FBSSxHQUFHLElBQUksQ0FBQztRQUdWLElBQUksQ0FBQyxXQUFXLEdBQUcsV0FBVyxDQUFDO1FBQy9CLElBQUksQ0FBQyxjQUFjLEdBQUcsa0JBQWtCLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQzNELElBQUksQ0FBQyxRQUFRLEdBQUcsZUFBZSxDQUMzQixJQUFJLENBQUMsY0FBYyxFQUFFLElBQUksQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDLGFBQWEsRUFDekQsQ0FBQyxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2hDLElBQUksQ0FBQyxTQUFTLEdBQUcsVUFBVSxDQUFDO0lBQzlCLENBQUM7SUFFRCxXQUFXO1FBQ1QsTUFBTSxRQUFRLEdBQUc7UUFDYixJQUFJLENBQUMsT0FBTyxDQUFDOzs7Ozs7Ozs7S0FTaEIsQ0FBQztRQUNGLE9BQU8sUUFBUSxDQUFDO0lBQ2xCLENBQUM7Q0FDRiIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtnZXRNYWluSGVhZGVyU3RyaW5nIGFzIG1haW4sIFdlYkdQVVByb2dyYW19IGZyb20gJy4vd2ViZ3B1X3Byb2dyYW0nO1xuaW1wb3J0IHtjb21wdXRlRGlzcGF0Y2gsIGZsYXREaXNwYXRjaExheW91dH0gZnJvbSAnLi93ZWJncHVfdXRpbCc7XG5cbmV4cG9ydCBjbGFzcyBDbGlwVmVjNFByb2dyYW0gaW1wbGVtZW50cyBXZWJHUFVQcm9ncmFtIHtcbiAgb3V0cHV0U2hhcGU6IG51bWJlcltdO1xuICBzaGFkZXJLZXk6IHN0cmluZztcbiAgdmFyaWFibGVOYW1lcyA9IFsnQSddO1xuICB1bmlmb3JtcyA9ICdtaW5WYWwgOiBmMzIsIG1heFZhbCA6IGYzMiwnO1xuICBkaXNwYXRjaExheW91dDoge3g6IG51bWJlcltdfTtcbiAgZGlzcGF0Y2g6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXTtcbiAgd29ya1BlclRocmVhZCA9IDQ7XG4gIHdvcmtncm91cFNpemU6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXSA9IFs2NCwgMSwgMV07XG4gIG91dHB1dENvbXBvbmVudCA9IDQ7XG4gIHNpemUgPSB0cnVlO1xuXG4gIGNvbnN0cnVjdG9yKG91dHB1dFNoYXBlOiBudW1iZXJbXSkge1xuICAgIHRoaXMub3V0cHV0U2hhcGUgPSBvdXRwdXRTaGFwZTtcbiAgICB0aGlzLmRpc3BhdGNoTGF5b3V0ID0gZmxhdERpc3BhdGNoTGF5b3V0KHRoaXMub3V0cHV0U2hhcGUpO1xuICAgIHRoaXMuZGlzcGF0Y2ggPSBjb21wdXRlRGlzcGF0Y2goXG4gICAgICAgIHRoaXMuZGlzcGF0Y2hMYXlvdXQsIHRoaXMub3V0cHV0U2hhcGUsIHRoaXMud29ya2dyb3VwU2l6ZSxcbiAgICAgICAgW3RoaXMud29ya1BlclRocmVhZCwgMSwgMV0pO1xuICAgIHRoaXMuc2hhZGVyS2V5ID0gJ2NsaXBWZWM0JztcbiAgfVxuXG4gIGdldFVzZXJDb2RlKCk6IHN0cmluZyB7XG4gICAgY29uc3QgdXNlckNvZGUgPSBgXG4gICAgICAke21haW4oJ2luZGV4Jyl9IHtcbiAgICAgICAgaWYoaW5kZXggPCB1bmlmb3Jtcy5zaXplKSB7XG4gICAgICAgICAgbGV0IHZhbHVlID0gZ2V0QUJ5T3V0cHV0SW5kZXgoaW5kZXgpO1xuICAgICAgICAgIHZhciBjbGFtcGVkVmFsdWUgPSBjbGFtcChcbiAgICAgICAgICAgICAgdmFsdWUsIHZlYzQ8ZjMyPih1bmlmb3Jtcy5taW5WYWwpLCB2ZWM0PGYzMj4odW5pZm9ybXMubWF4VmFsKSk7XG4gICAgICAgICAgY2xhbXBlZFZhbHVlID0gc2VsZWN0KGNsYW1wZWRWYWx1ZSwgdmFsdWUsIGlzbmFuVmVjNCh2YWx1ZSkpO1xuICAgICAgICAgIHNldE91dHB1dEF0SW5kZXgoaW5kZXgsIGNsYW1wZWRWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICBgO1xuICAgIHJldHVybiB1c2VyQ29kZTtcbiAgfVxufVxuIl19","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { getMainHeaderString as main } from './webgpu_program';\nimport { computeDispatch, flatDispatchLayout } from './webgpu_util';\nexport class ClipProgram {\n    constructor(outputShape) {\n        this.variableNames = ['A'];\n        this.uniforms = 'minVal : f32, maxVal : f32,';\n        this.workgroupSize = [64, 1, 1];\n        this.size = true;\n        this.outputShape = outputShape;\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize);\n        this.shaderKey = 'clip';\n    }\n    getUserCode() {\n        const userCode = `\n      ${main('index')} {\n        if(index < uniforms.size) {\n          let value = getAByOutputIndex(index);\n          if (isnan(value)) {\n            setOutputAtIndex(index, value);\n            return;\n          }\n          setOutputAtIndex(index, clamp(value, uniforms.minVal, uniforms.maxVal));\n        }\n      }\n    `;\n        return userCode;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2xpcF93ZWJncHUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9jbGlwX3dlYmdwdS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQUMsbUJBQW1CLElBQUksSUFBSSxFQUFnQixNQUFNLGtCQUFrQixDQUFDO0FBQzVFLE9BQU8sRUFBQyxlQUFlLEVBQUUsa0JBQWtCLEVBQUMsTUFBTSxlQUFlLENBQUM7QUFFbEUsTUFBTSxPQUFPLFdBQVc7SUFZdEIsWUFBWSxXQUFxQjtRQVRqQyxrQkFBYSxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDdEIsYUFBUSxHQUFHLDZCQUE2QixDQUFDO1FBR3pDLGtCQUFhLEdBQTZCLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUdyRCxTQUFJLEdBQUcsSUFBSSxDQUFDO1FBR1YsSUFBSSxDQUFDLFdBQVcsR0FBRyxXQUFXLENBQUM7UUFDL0IsSUFBSSxDQUFDLGNBQWMsR0FBRyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDM0QsSUFBSSxDQUFDLFFBQVEsR0FBRyxlQUFlLENBQzNCLElBQUksQ0FBQyxjQUFjLEVBQUUsSUFBSSxDQUFDLFdBQVcsRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7UUFFL0QsSUFBSSxDQUFDLFNBQVMsR0FBRyxNQUFNLENBQUM7SUFDMUIsQ0FBQztJQUVELFdBQVc7UUFDVCxNQUFNLFFBQVEsR0FBRztRQUNiLElBQUksQ0FBQyxPQUFPLENBQUM7Ozs7Ozs7Ozs7S0FVaEIsQ0FBQztRQUNGLE9BQU8sUUFBUSxDQUFDO0lBQ2xCLENBQUM7Q0FDRiIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtnZXRNYWluSGVhZGVyU3RyaW5nIGFzIG1haW4sIFdlYkdQVVByb2dyYW19IGZyb20gJy4vd2ViZ3B1X3Byb2dyYW0nO1xuaW1wb3J0IHtjb21wdXRlRGlzcGF0Y2gsIGZsYXREaXNwYXRjaExheW91dH0gZnJvbSAnLi93ZWJncHVfdXRpbCc7XG5cbmV4cG9ydCBjbGFzcyBDbGlwUHJvZ3JhbSBpbXBsZW1lbnRzIFdlYkdQVVByb2dyYW0ge1xuICBvdXRwdXRTaGFwZTogbnVtYmVyW107XG4gIHNoYWRlcktleTogc3RyaW5nO1xuICB2YXJpYWJsZU5hbWVzID0gWydBJ107XG4gIHVuaWZvcm1zID0gJ21pblZhbCA6IGYzMiwgbWF4VmFsIDogZjMyLCc7XG4gIGRpc3BhdGNoTGF5b3V0OiB7eDogbnVtYmVyW119O1xuICBkaXNwYXRjaDogW251bWJlciwgbnVtYmVyLCBudW1iZXJdO1xuICB3b3JrZ3JvdXBTaXplOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl0gPSBbNjQsIDEsIDFdO1xuICBtaW5WYWw6IG51bWJlcjtcbiAgbWF4VmFsOiBudW1iZXI7XG4gIHNpemUgPSB0cnVlO1xuXG4gIGNvbnN0cnVjdG9yKG91dHB1dFNoYXBlOiBudW1iZXJbXSkge1xuICAgIHRoaXMub3V0cHV0U2hhcGUgPSBvdXRwdXRTaGFwZTtcbiAgICB0aGlzLmRpc3BhdGNoTGF5b3V0ID0gZmxhdERpc3BhdGNoTGF5b3V0KHRoaXMub3V0cHV0U2hhcGUpO1xuICAgIHRoaXMuZGlzcGF0Y2ggPSBjb21wdXRlRGlzcGF0Y2goXG4gICAgICAgIHRoaXMuZGlzcGF0Y2hMYXlvdXQsIHRoaXMub3V0cHV0U2hhcGUsIHRoaXMud29ya2dyb3VwU2l6ZSk7XG5cbiAgICB0aGlzLnNoYWRlcktleSA9ICdjbGlwJztcbiAgfVxuXG4gIGdldFVzZXJDb2RlKCk6IHN0cmluZyB7XG4gICAgY29uc3QgdXNlckNvZGUgPSBgXG4gICAgICAke21haW4oJ2luZGV4Jyl9IHtcbiAgICAgICAgaWYoaW5kZXggPCB1bmlmb3Jtcy5zaXplKSB7XG4gICAgICAgICAgbGV0IHZhbHVlID0gZ2V0QUJ5T3V0cHV0SW5kZXgoaW5kZXgpO1xuICAgICAgICAgIGlmIChpc25hbih2YWx1ZSkpIHtcbiAgICAgICAgICAgIHNldE91dHB1dEF0SW5kZXgoaW5kZXgsIHZhbHVlKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgc2V0T3V0cHV0QXRJbmRleChpbmRleCwgY2xhbXAodmFsdWUsIHVuaWZvcm1zLm1pblZhbCwgdW5pZm9ybXMubWF4VmFsKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICBgO1xuICAgIHJldHVybiB1c2VyQ29kZTtcbiAgfVxufVxuIl19","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { ClipByValue, util } from '@tensorflow/tfjs-core';\nimport { ClipVec4Program } from '../clip_vec4_webgpu';\nimport { ClipProgram } from '../clip_webgpu';\nexport function clipByValue(args) {\n    const { inputs, backend, attrs } = args;\n    const { x } = inputs;\n    const { clipValueMin, clipValueMax } = attrs;\n    let program;\n    const uniformData = [\n        { type: 'float32', data: [clipValueMin] },\n        { type: 'float32', data: [clipValueMax] }\n    ];\n    if (util.sizeFromShape(x.shape) % 4 === 0) {\n        program = new ClipVec4Program(x.shape);\n    }\n    else {\n        program = new ClipProgram(x.shape);\n    }\n    return backend.runWebGPUProgram(program, [x], x.dtype, uniformData);\n}\nexport const clipByValueConfig = {\n    kernelName: ClipByValue,\n    backendName: 'webgpu',\n    kernelFunc: clipByValue\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ2xpcEJ5VmFsdWUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9rZXJuZWxzL0NsaXBCeVZhbHVlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sRUFBQyxXQUFXLEVBQTZFLElBQUksRUFBQyxNQUFNLHVCQUF1QixDQUFDO0FBSW5JLE9BQU8sRUFBQyxlQUFlLEVBQUMsTUFBTSxxQkFBcUIsQ0FBQztBQUNwRCxPQUFPLEVBQUMsV0FBVyxFQUFDLE1BQU0sZ0JBQWdCLENBQUM7QUFFM0MsTUFBTSxVQUFVLFdBQVcsQ0FBQyxJQUkzQjtJQUNDLE1BQU0sRUFBQyxNQUFNLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBQyxHQUFHLElBQUksQ0FBQztJQUN0QyxNQUFNLEVBQUMsQ0FBQyxFQUFDLEdBQUcsTUFBTSxDQUFDO0lBQ25CLE1BQU0sRUFBQyxZQUFZLEVBQUUsWUFBWSxFQUFDLEdBQUcsS0FBSyxDQUFDO0lBRTNDLElBQUksT0FBb0MsQ0FBQztJQUN6QyxNQUFNLFdBQVcsR0FBRztRQUNsQixFQUFDLElBQUksRUFBRSxTQUFTLEVBQUUsSUFBSSxFQUFFLENBQUMsWUFBWSxDQUFDLEVBQUM7UUFDdkMsRUFBQyxJQUFJLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxDQUFDLFlBQVksQ0FBQyxFQUFDO0tBQ3hDLENBQUM7SUFDRixJQUFJLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLEVBQUU7UUFDekMsT0FBTyxHQUFHLElBQUksZUFBZSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQztLQUN4QztTQUFNO1FBQ0wsT0FBTyxHQUFHLElBQUksV0FBVyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQztLQUNwQztJQUNELE9BQU8sT0FBTyxDQUFDLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxLQUFLLEVBQUUsV0FBVyxDQUFDLENBQUM7QUFDdEUsQ0FBQztBQUVELE1BQU0sQ0FBQyxNQUFNLGlCQUFpQixHQUFpQjtJQUM3QyxVQUFVLEVBQUUsV0FBVztJQUN2QixXQUFXLEVBQUUsUUFBUTtJQUNyQixVQUFVLEVBQUUsV0FBb0M7Q0FDakQsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtDbGlwQnlWYWx1ZSwgQ2xpcEJ5VmFsdWVBdHRycywgQ2xpcEJ5VmFsdWVJbnB1dHMsIEtlcm5lbENvbmZpZywgS2VybmVsRnVuYywgVGVuc29ySW5mbywgdXRpbH0gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcblxuaW1wb3J0IHtXZWJHUFVCYWNrZW5kfSBmcm9tICcuLi9iYWNrZW5kX3dlYmdwdSc7XG5cbmltcG9ydCB7Q2xpcFZlYzRQcm9ncmFtfSBmcm9tICcuLi9jbGlwX3ZlYzRfd2ViZ3B1JztcbmltcG9ydCB7Q2xpcFByb2dyYW19IGZyb20gJy4uL2NsaXBfd2ViZ3B1JztcblxuZXhwb3J0IGZ1bmN0aW9uIGNsaXBCeVZhbHVlKGFyZ3M6IHtcbiAgaW5wdXRzOiBDbGlwQnlWYWx1ZUlucHV0cyxcbiAgYmFja2VuZDogV2ViR1BVQmFja2VuZCxcbiAgYXR0cnM6IENsaXBCeVZhbHVlQXR0cnNcbn0pOiBUZW5zb3JJbmZvIHtcbiAgY29uc3Qge2lucHV0cywgYmFja2VuZCwgYXR0cnN9ID0gYXJncztcbiAgY29uc3Qge3h9ID0gaW5wdXRzO1xuICBjb25zdCB7Y2xpcFZhbHVlTWluLCBjbGlwVmFsdWVNYXh9ID0gYXR0cnM7XG5cbiAgbGV0IHByb2dyYW06IENsaXBQcm9ncmFtfENsaXBWZWM0UHJvZ3JhbTtcbiAgY29uc3QgdW5pZm9ybURhdGEgPSBbXG4gICAge3R5cGU6ICdmbG9hdDMyJywgZGF0YTogW2NsaXBWYWx1ZU1pbl19LFxuICAgIHt0eXBlOiAnZmxvYXQzMicsIGRhdGE6IFtjbGlwVmFsdWVNYXhdfVxuICBdO1xuICBpZiAodXRpbC5zaXplRnJvbVNoYXBlKHguc2hhcGUpICUgNCA9PT0gMCkge1xuICAgIHByb2dyYW0gPSBuZXcgQ2xpcFZlYzRQcm9ncmFtKHguc2hhcGUpO1xuICB9IGVsc2Uge1xuICAgIHByb2dyYW0gPSBuZXcgQ2xpcFByb2dyYW0oeC5zaGFwZSk7XG4gIH1cbiAgcmV0dXJuIGJhY2tlbmQucnVuV2ViR1BVUHJvZ3JhbShwcm9ncmFtLCBbeF0sIHguZHR5cGUsIHVuaWZvcm1EYXRhKTtcbn1cblxuZXhwb3J0IGNvbnN0IGNsaXBCeVZhbHVlQ29uZmlnOiBLZXJuZWxDb25maWcgPSB7XG4gIGtlcm5lbE5hbWU6IENsaXBCeVZhbHVlLFxuICBiYWNrZW5kTmFtZTogJ3dlYmdwdScsXG4gIGtlcm5lbEZ1bmM6IGNsaXBCeVZhbHVlIGFzIHVua25vd24gYXMgS2VybmVsRnVuY1xufTtcbiJdfQ==","/**\n * @license\n * Copyright 2023 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { getMainHeaderString as main } from './webgpu_program';\nimport { computeDispatch, flatDispatchLayout } from './webgpu_util';\nexport class ComplexAbsProgram {\n    constructor(shape) {\n        this.outputShape = [];\n        this.variableNames = ['real', 'imag'];\n        this.workgroupSize = [64, 1, 1];\n        this.size = true;\n        this.outputShape = shape;\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize);\n        this.shaderKey = 'complexAbs';\n    }\n    getUserCode() {\n        const userCode = `\n    ${main('index')} {\n      if (index < uniforms.size) {\n        let re = abs(getRealByOutputIndex(index));\n        let im = abs(getImagByOutputIndex(index));\n        let mx = max(re, im);\n\n        // The length function in wgsl may be not underflow-safe on some GPUs.\n        // So the safe solution is to ensure underflow-safety in all cases.\n        setOutputAtIndex(index, select(mx * length(vec2<f32>(1, min(re, im)/mx)), 0.0, mx == 0.0));\n      }\n    }\n  `;\n        return userCode;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tcGxleF9hYnNfd2ViZ3B1LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMvY29tcGxleF9hYnNfd2ViZ3B1LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sRUFBQyxtQkFBbUIsSUFBSSxJQUFJLEVBQWdCLE1BQU0sa0JBQWtCLENBQUM7QUFDNUUsT0FBTyxFQUFDLGVBQWUsRUFBRSxrQkFBa0IsRUFBQyxNQUFNLGVBQWUsQ0FBQztBQUVsRSxNQUFNLE9BQU8saUJBQWlCO0lBUzVCLFlBQVksS0FBZTtRQVIzQixnQkFBVyxHQUFhLEVBQUUsQ0FBQztRQUkzQixrQkFBYSxHQUFHLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBQ2pDLGtCQUFhLEdBQTZCLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUNyRCxTQUFJLEdBQUcsSUFBSSxDQUFDO1FBR1YsSUFBSSxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUM7UUFDekIsSUFBSSxDQUFDLGNBQWMsR0FBRyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDM0QsSUFBSSxDQUFDLFFBQVEsR0FBRyxlQUFlLENBQzNCLElBQUksQ0FBQyxjQUFjLEVBQUUsSUFBSSxDQUFDLFdBQVcsRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7UUFFL0QsSUFBSSxDQUFDLFNBQVMsR0FBRyxZQUFZLENBQUM7SUFDaEMsQ0FBQztJQUVELFdBQVc7UUFDVCxNQUFNLFFBQVEsR0FBRztNQUNmLElBQUksQ0FBQyxPQUFPLENBQUM7Ozs7Ozs7Ozs7O0dBV2hCLENBQUM7UUFDQSxPQUFPLFFBQVEsQ0FBQztJQUNsQixDQUFDO0NBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMyBHb29nbGUgTExDLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7Z2V0TWFpbkhlYWRlclN0cmluZyBhcyBtYWluLCBXZWJHUFVQcm9ncmFtfSBmcm9tICcuL3dlYmdwdV9wcm9ncmFtJztcbmltcG9ydCB7Y29tcHV0ZURpc3BhdGNoLCBmbGF0RGlzcGF0Y2hMYXlvdXR9IGZyb20gJy4vd2ViZ3B1X3V0aWwnO1xuXG5leHBvcnQgY2xhc3MgQ29tcGxleEFic1Byb2dyYW0gaW1wbGVtZW50cyBXZWJHUFVQcm9ncmFtIHtcbiAgb3V0cHV0U2hhcGU6IG51bWJlcltdID0gW107XG4gIHNoYWRlcktleTogc3RyaW5nO1xuICBkaXNwYXRjaExheW91dDoge3g6IG51bWJlcltdfTtcbiAgZGlzcGF0Y2g6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXTtcbiAgdmFyaWFibGVOYW1lcyA9IFsncmVhbCcsICdpbWFnJ107XG4gIHdvcmtncm91cFNpemU6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXSA9IFs2NCwgMSwgMV07XG4gIHNpemUgPSB0cnVlO1xuXG4gIGNvbnN0cnVjdG9yKHNoYXBlOiBudW1iZXJbXSkge1xuICAgIHRoaXMub3V0cHV0U2hhcGUgPSBzaGFwZTtcbiAgICB0aGlzLmRpc3BhdGNoTGF5b3V0ID0gZmxhdERpc3BhdGNoTGF5b3V0KHRoaXMub3V0cHV0U2hhcGUpO1xuICAgIHRoaXMuZGlzcGF0Y2ggPSBjb21wdXRlRGlzcGF0Y2goXG4gICAgICAgIHRoaXMuZGlzcGF0Y2hMYXlvdXQsIHRoaXMub3V0cHV0U2hhcGUsIHRoaXMud29ya2dyb3VwU2l6ZSk7XG5cbiAgICB0aGlzLnNoYWRlcktleSA9ICdjb21wbGV4QWJzJztcbiAgfVxuXG4gIGdldFVzZXJDb2RlKCk6IHN0cmluZyB7XG4gICAgY29uc3QgdXNlckNvZGUgPSBgXG4gICAgJHttYWluKCdpbmRleCcpfSB7XG4gICAgICBpZiAoaW5kZXggPCB1bmlmb3Jtcy5zaXplKSB7XG4gICAgICAgIGxldCByZSA9IGFicyhnZXRSZWFsQnlPdXRwdXRJbmRleChpbmRleCkpO1xuICAgICAgICBsZXQgaW0gPSBhYnMoZ2V0SW1hZ0J5T3V0cHV0SW5kZXgoaW5kZXgpKTtcbiAgICAgICAgbGV0IG14ID0gbWF4KHJlLCBpbSk7XG5cbiAgICAgICAgLy8gVGhlIGxlbmd0aCBmdW5jdGlvbiBpbiB3Z3NsIG1heSBiZSBub3QgdW5kZXJmbG93LXNhZmUgb24gc29tZSBHUFVzLlxuICAgICAgICAvLyBTbyB0aGUgc2FmZSBzb2x1dGlvbiBpcyB0byBlbnN1cmUgdW5kZXJmbG93LXNhZmV0eSBpbiBhbGwgY2FzZXMuXG4gICAgICAgIHNldE91dHB1dEF0SW5kZXgoaW5kZXgsIHNlbGVjdChteCAqIGxlbmd0aCh2ZWMyPGYzMj4oMSwgbWluKHJlLCBpbSkvbXgpKSwgMC4wLCBteCA9PSAwLjApKTtcbiAgICAgIH1cbiAgICB9XG4gIGA7XG4gICAgcmV0dXJuIHVzZXJDb2RlO1xuICB9XG59XG4iXX0=","/**\n * @license\n * Copyright 2023 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { ComplexAbs } from '@tensorflow/tfjs-core';\nimport { ComplexAbsProgram } from '../complex_abs_webgpu';\n// Returns a TensorInfo with the complex shape and the dataId of the\n// underlying part. We need to do this because a reshaped complex tensor is\n// not reflected in its parts.\nfunction makeComplexComponentTensorInfo(complexTensor, complexPart) {\n    return {\n        dataId: complexPart.dataId,\n        dtype: complexPart.dtype,\n        shape: complexTensor.shape\n    };\n}\nexport function complexAbs(args) {\n    const { inputs, backend } = args;\n    const { x } = inputs;\n    const xData = backend.tensorMap.get(x.dataId);\n    const program = new ComplexAbsProgram(x.shape);\n    const programInputs = [\n        makeComplexComponentTensorInfo(x, xData.complexTensorInfos.real),\n        makeComplexComponentTensorInfo(x, xData.complexTensorInfos.imag),\n    ];\n    return backend.runWebGPUProgram(program, programInputs, programInputs[0].dtype);\n}\nexport const complexAbsConfig = {\n    kernelName: ComplexAbs,\n    backendName: 'webgpu',\n    kernelFunc: complexAbs\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ29tcGxleEFicy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2tlcm5lbHMvQ29tcGxleEFicy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQUMsVUFBVSxFQUF5RCxNQUFNLHVCQUF1QixDQUFDO0FBR3pHLE9BQU8sRUFBQyxpQkFBaUIsRUFBQyxNQUFNLHVCQUF1QixDQUFDO0FBRXhELG9FQUFvRTtBQUNwRSwyRUFBMkU7QUFDM0UsOEJBQThCO0FBQzlCLFNBQVMsOEJBQThCLENBQ25DLGFBQXlCLEVBQUUsV0FBdUI7SUFDcEQsT0FBTztRQUNMLE1BQU0sRUFBRSxXQUFXLENBQUMsTUFBTTtRQUMxQixLQUFLLEVBQUUsV0FBVyxDQUFDLEtBQUs7UUFDeEIsS0FBSyxFQUFFLGFBQWEsQ0FBQyxLQUFLO0tBQzNCLENBQUM7QUFDSixDQUFDO0FBRUQsTUFBTSxVQUFVLFVBQVUsQ0FDdEIsSUFBd0Q7SUFDMUQsTUFBTSxFQUFDLE1BQU0sRUFBRSxPQUFPLEVBQUMsR0FBRyxJQUFJLENBQUM7SUFDL0IsTUFBTSxFQUFDLENBQUMsRUFBQyxHQUFHLE1BQU0sQ0FBQztJQUVuQixNQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUM7SUFFOUMsTUFBTSxPQUFPLEdBQUcsSUFBSSxpQkFBaUIsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDL0MsTUFBTSxhQUFhLEdBQUc7UUFDcEIsOEJBQThCLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLENBQUM7UUFDaEUsOEJBQThCLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLENBQUM7S0FDakUsQ0FBQztJQUVGLE9BQU8sT0FBTyxDQUFDLGdCQUFnQixDQUMzQixPQUFPLEVBQUUsYUFBYSxFQUFFLGFBQWEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUN0RCxDQUFDO0FBRUQsTUFBTSxDQUFDLE1BQU0sZ0JBQWdCLEdBQWlCO0lBQzVDLFVBQVUsRUFBRSxVQUFVO0lBQ3RCLFdBQVcsRUFBRSxRQUFRO0lBQ3JCLFVBQVUsRUFBRSxVQUFtQztDQUNoRCxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjMgR29vZ2xlIExMQy5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge0NvbXBsZXhBYnMsIENvbXBsZXhBYnNJbnB1dHMsIEtlcm5lbENvbmZpZywgS2VybmVsRnVuYywgVGVuc29ySW5mb30gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcblxuaW1wb3J0IHtXZWJHUFVCYWNrZW5kfSBmcm9tICcuLi9iYWNrZW5kX3dlYmdwdSc7XG5pbXBvcnQge0NvbXBsZXhBYnNQcm9ncmFtfSBmcm9tICcuLi9jb21wbGV4X2Fic193ZWJncHUnO1xuXG4vLyBSZXR1cm5zIGEgVGVuc29ySW5mbyB3aXRoIHRoZSBjb21wbGV4IHNoYXBlIGFuZCB0aGUgZGF0YUlkIG9mIHRoZVxuLy8gdW5kZXJseWluZyBwYXJ0LiBXZSBuZWVkIHRvIGRvIHRoaXMgYmVjYXVzZSBhIHJlc2hhcGVkIGNvbXBsZXggdGVuc29yIGlzXG4vLyBub3QgcmVmbGVjdGVkIGluIGl0cyBwYXJ0cy5cbmZ1bmN0aW9uIG1ha2VDb21wbGV4Q29tcG9uZW50VGVuc29ySW5mbyhcbiAgICBjb21wbGV4VGVuc29yOiBUZW5zb3JJbmZvLCBjb21wbGV4UGFydDogVGVuc29ySW5mbyk6IFRlbnNvckluZm8ge1xuICByZXR1cm4ge1xuICAgIGRhdGFJZDogY29tcGxleFBhcnQuZGF0YUlkLFxuICAgIGR0eXBlOiBjb21wbGV4UGFydC5kdHlwZSxcbiAgICBzaGFwZTogY29tcGxleFRlbnNvci5zaGFwZVxuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY29tcGxleEFicyhcbiAgICBhcmdzOiB7aW5wdXRzOiBDb21wbGV4QWJzSW5wdXRzLCBiYWNrZW5kOiBXZWJHUFVCYWNrZW5kfSk6IFRlbnNvckluZm8ge1xuICBjb25zdCB7aW5wdXRzLCBiYWNrZW5kfSA9IGFyZ3M7XG4gIGNvbnN0IHt4fSA9IGlucHV0cztcblxuICBjb25zdCB4RGF0YSA9IGJhY2tlbmQudGVuc29yTWFwLmdldCh4LmRhdGFJZCk7XG5cbiAgY29uc3QgcHJvZ3JhbSA9IG5ldyBDb21wbGV4QWJzUHJvZ3JhbSh4LnNoYXBlKTtcbiAgY29uc3QgcHJvZ3JhbUlucHV0cyA9IFtcbiAgICBtYWtlQ29tcGxleENvbXBvbmVudFRlbnNvckluZm8oeCwgeERhdGEuY29tcGxleFRlbnNvckluZm9zLnJlYWwpLFxuICAgIG1ha2VDb21wbGV4Q29tcG9uZW50VGVuc29ySW5mbyh4LCB4RGF0YS5jb21wbGV4VGVuc29ySW5mb3MuaW1hZyksXG4gIF07XG5cbiAgcmV0dXJuIGJhY2tlbmQucnVuV2ViR1BVUHJvZ3JhbShcbiAgICAgIHByb2dyYW0sIHByb2dyYW1JbnB1dHMsIHByb2dyYW1JbnB1dHNbMF0uZHR5cGUpO1xufVxuXG5leHBvcnQgY29uc3QgY29tcGxleEFic0NvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBDb21wbGV4QWJzLFxuICBiYWNrZW5kTmFtZTogJ3dlYmdwdScsXG4gIGtlcm5lbEZ1bmM6IGNvbXBsZXhBYnMgYXMgdW5rbm93biBhcyBLZXJuZWxGdW5jXG59O1xuIl19","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { backend_util } from '@tensorflow/tfjs-core';\nimport { getMainHeaderString as main } from './webgpu_program';\nimport { computeDispatch, flatDispatchLayout } from './webgpu_util';\nexport class ConcatProgram {\n    constructor(shapes) {\n        this.uniforms = '';\n        this.workPerThread = 1;\n        this.workgroupSize = [64, 1, 1];\n        this.size = true;\n        this.outputShape =\n            backend_util.computeOutShape(shapes, 1 /* axis */);\n        this.variableNames = shapes.map((_, i) => `T${i}`);\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize, [this.workPerThread, 1, 1]);\n        this.offsetLength = shapes.length - 1;\n        for (let i = 0; i < this.offsetLength; i++) {\n            this.uniforms += `offset${i} : i32,`;\n        }\n        this.shaderKey = 'concat';\n    }\n    getUserCode() {\n        const snippets = [];\n        if (this.offsetLength > 0) {\n            snippets.push(`if (yC < uniforms.offset0){ setOutputAtCoords(coords.x, coords.y, getT0(yR, yC)); }`);\n            for (let i = 1; i < this.offsetLength; i++) {\n                snippets.push(`else if (yC < uniforms.offset${[i]}){ ` +\n                    `setOutputAtCoords(coords.x, coords.y, getT${i}(yR, yC - uniforms.offset${i - 1})); }`);\n            }\n            const lastIndex = this.offsetLength;\n            const lastShiftIndex = this.offsetLength - 1;\n            snippets.push(`else { setOutputAtCoords(coords.x, coords.y, getT${lastIndex}(yR, yC - uniforms.offset${lastShiftIndex})); }`);\n        }\n        else {\n            snippets.push(`setOutputAtCoords(coords.x, coords.y, getT0(yR, yC));`);\n        }\n        const userCode = `\n      ${main('index')} {\n        for(var i = 0; i < ${this.workPerThread}; i = i + 1) {\n          let flatIndex = index * ${this.workPerThread} + i;\n          if(flatIndex < uniforms.size) {\n            let coords = getCoordsFromIndex(flatIndex);\n            let yR = coords.x;\n            let yC = coords.y;\n\n            ${snippets.join('\\n        ')}\n          }\n        }\n      }\n    `;\n        return userCode;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29uY2F0X3dlYmdwdS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2NvbmNhdF93ZWJncHUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUFDLFlBQVksRUFBQyxNQUFNLHVCQUF1QixDQUFDO0FBQ25ELE9BQU8sRUFBQyxtQkFBbUIsSUFBSSxJQUFJLEVBQWdCLE1BQU0sa0JBQWtCLENBQUM7QUFDNUUsT0FBTyxFQUFDLGVBQWUsRUFBRSxrQkFBa0IsRUFBQyxNQUFNLGVBQWUsQ0FBQztBQUVsRSxNQUFNLE9BQU8sYUFBYTtJQVl4QixZQUFZLE1BQStCO1FBTjNDLGFBQVEsR0FBRyxFQUFFLENBQUM7UUFDZCxrQkFBYSxHQUFHLENBQUMsQ0FBQztRQUNsQixrQkFBYSxHQUE2QixDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDckQsU0FBSSxHQUFHLElBQUksQ0FBQztRQUlWLElBQUksQ0FBQyxXQUFXO1lBQ1osWUFBWSxDQUFDLGVBQWUsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDLFVBQVUsQ0FBcUIsQ0FBQztRQUMzRSxJQUFJLENBQUMsYUFBYSxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDbkQsSUFBSSxDQUFDLGNBQWMsR0FBRyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDM0QsSUFBSSxDQUFDLFFBQVEsR0FBRyxlQUFlLENBQzNCLElBQUksQ0FBQyxjQUFjLEVBQUUsSUFBSSxDQUFDLFdBQVcsRUFBRSxJQUFJLENBQUMsYUFBYSxFQUN6RCxDQUFDLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFaEMsSUFBSSxDQUFDLFlBQVksR0FBRyxNQUFNLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztRQUN0QyxLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUMxQyxJQUFJLENBQUMsUUFBUSxJQUFJLFNBQVMsQ0FBQyxTQUFTLENBQUM7U0FDdEM7UUFDRCxJQUFJLENBQUMsU0FBUyxHQUFHLFFBQVEsQ0FBQztJQUM1QixDQUFDO0lBRUQsV0FBVztRQUNULE1BQU0sUUFBUSxHQUFhLEVBQUUsQ0FBQztRQUM5QixJQUFJLElBQUksQ0FBQyxZQUFZLEdBQUcsQ0FBQyxFQUFFO1lBQ3pCLFFBQVEsQ0FBQyxJQUFJLENBQ1QscUZBQXFGLENBQUMsQ0FBQztZQUMzRixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFDLEVBQUUsRUFBRTtnQkFDMUMsUUFBUSxDQUFDLElBQUksQ0FDVCxnQ0FBZ0MsQ0FBQyxDQUFDLENBQUMsS0FBSztvQkFDeEMsNkNBQ0ksQ0FBQyw0QkFBNEIsQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUM7YUFDcEQ7WUFDRCxNQUFNLFNBQVMsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDO1lBQ3BDLE1BQU0sY0FBYyxHQUFHLElBQUksQ0FBQyxZQUFZLEdBQUcsQ0FBQyxDQUFDO1lBQzdDLFFBQVEsQ0FBQyxJQUFJLENBQUMsb0RBQ1YsU0FBUyw0QkFBNEIsY0FBYyxPQUFPLENBQUMsQ0FBQztTQUNqRTthQUFNO1lBQ0wsUUFBUSxDQUFDLElBQUksQ0FBQyx1REFBdUQsQ0FBQyxDQUFDO1NBQ3hFO1FBRUQsTUFBTSxRQUFRLEdBQUc7UUFDYixJQUFJLENBQUMsT0FBTyxDQUFDOzZCQUNRLElBQUksQ0FBQyxhQUFhO29DQUNYLElBQUksQ0FBQyxhQUFhOzs7Ozs7Y0FNeEMsUUFBUSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUM7Ozs7S0FJcEMsQ0FBQztRQUNGLE9BQU8sUUFBUSxDQUFDO0lBQ2xCLENBQUM7Q0FDRiIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtiYWNrZW5kX3V0aWx9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5pbXBvcnQge2dldE1haW5IZWFkZXJTdHJpbmcgYXMgbWFpbiwgV2ViR1BVUHJvZ3JhbX0gZnJvbSAnLi93ZWJncHVfcHJvZ3JhbSc7XG5pbXBvcnQge2NvbXB1dGVEaXNwYXRjaCwgZmxhdERpc3BhdGNoTGF5b3V0fSBmcm9tICcuL3dlYmdwdV91dGlsJztcblxuZXhwb3J0IGNsYXNzIENvbmNhdFByb2dyYW0gaW1wbGVtZW50cyBXZWJHUFVQcm9ncmFtIHtcbiAgb3V0cHV0U2hhcGU6IG51bWJlcltdO1xuICBzaGFkZXJLZXk6IHN0cmluZztcbiAgZGlzcGF0Y2hMYXlvdXQ6IHt4OiBudW1iZXJbXX07XG4gIGRpc3BhdGNoOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl07XG4gIHZhcmlhYmxlTmFtZXM6IHN0cmluZ1tdO1xuICB1bmlmb3JtcyA9ICcnO1xuICB3b3JrUGVyVGhyZWFkID0gMTtcbiAgd29ya2dyb3VwU2l6ZTogW251bWJlciwgbnVtYmVyLCBudW1iZXJdID0gWzY0LCAxLCAxXTtcbiAgc2l6ZSA9IHRydWU7XG4gIG9mZnNldExlbmd0aDogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yKHNoYXBlczogQXJyYXk8W251bWJlciwgbnVtYmVyXT4pIHtcbiAgICB0aGlzLm91dHB1dFNoYXBlID1cbiAgICAgICAgYmFja2VuZF91dGlsLmNvbXB1dGVPdXRTaGFwZShzaGFwZXMsIDEgLyogYXhpcyAqLykgYXMgW251bWJlciwgbnVtYmVyXTtcbiAgICB0aGlzLnZhcmlhYmxlTmFtZXMgPSBzaGFwZXMubWFwKChfLCBpKSA9PiBgVCR7aX1gKTtcbiAgICB0aGlzLmRpc3BhdGNoTGF5b3V0ID0gZmxhdERpc3BhdGNoTGF5b3V0KHRoaXMub3V0cHV0U2hhcGUpO1xuICAgIHRoaXMuZGlzcGF0Y2ggPSBjb21wdXRlRGlzcGF0Y2goXG4gICAgICAgIHRoaXMuZGlzcGF0Y2hMYXlvdXQsIHRoaXMub3V0cHV0U2hhcGUsIHRoaXMud29ya2dyb3VwU2l6ZSxcbiAgICAgICAgW3RoaXMud29ya1BlclRocmVhZCwgMSwgMV0pO1xuXG4gICAgdGhpcy5vZmZzZXRMZW5ndGggPSBzaGFwZXMubGVuZ3RoIC0gMTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMub2Zmc2V0TGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMudW5pZm9ybXMgKz0gYG9mZnNldCR7aX0gOiBpMzIsYDtcbiAgICB9XG4gICAgdGhpcy5zaGFkZXJLZXkgPSAnY29uY2F0JztcbiAgfVxuXG4gIGdldFVzZXJDb2RlKCk6IHN0cmluZyB7XG4gICAgY29uc3Qgc25pcHBldHM6IHN0cmluZ1tdID0gW107XG4gICAgaWYgKHRoaXMub2Zmc2V0TGVuZ3RoID4gMCkge1xuICAgICAgc25pcHBldHMucHVzaChcbiAgICAgICAgICBgaWYgKHlDIDwgdW5pZm9ybXMub2Zmc2V0MCl7IHNldE91dHB1dEF0Q29vcmRzKGNvb3Jkcy54LCBjb29yZHMueSwgZ2V0VDAoeVIsIHlDKSk7IH1gKTtcbiAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgdGhpcy5vZmZzZXRMZW5ndGg7IGkrKykge1xuICAgICAgICBzbmlwcGV0cy5wdXNoKFxuICAgICAgICAgICAgYGVsc2UgaWYgKHlDIDwgdW5pZm9ybXMub2Zmc2V0JHtbaV19KXsgYCArXG4gICAgICAgICAgICBgc2V0T3V0cHV0QXRDb29yZHMoY29vcmRzLngsIGNvb3Jkcy55LCBnZXRUJHtcbiAgICAgICAgICAgICAgICBpfSh5UiwgeUMgLSB1bmlmb3Jtcy5vZmZzZXQke2kgLSAxfSkpOyB9YCk7XG4gICAgICB9XG4gICAgICBjb25zdCBsYXN0SW5kZXggPSB0aGlzLm9mZnNldExlbmd0aDtcbiAgICAgIGNvbnN0IGxhc3RTaGlmdEluZGV4ID0gdGhpcy5vZmZzZXRMZW5ndGggLSAxO1xuICAgICAgc25pcHBldHMucHVzaChgZWxzZSB7IHNldE91dHB1dEF0Q29vcmRzKGNvb3Jkcy54LCBjb29yZHMueSwgZ2V0VCR7XG4gICAgICAgICAgbGFzdEluZGV4fSh5UiwgeUMgLSB1bmlmb3Jtcy5vZmZzZXQke2xhc3RTaGlmdEluZGV4fSkpOyB9YCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNuaXBwZXRzLnB1c2goYHNldE91dHB1dEF0Q29vcmRzKGNvb3Jkcy54LCBjb29yZHMueSwgZ2V0VDAoeVIsIHlDKSk7YCk7XG4gICAgfVxuXG4gICAgY29uc3QgdXNlckNvZGUgPSBgXG4gICAgICAke21haW4oJ2luZGV4Jyl9IHtcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8ICR7dGhpcy53b3JrUGVyVGhyZWFkfTsgaSA9IGkgKyAxKSB7XG4gICAgICAgICAgbGV0IGZsYXRJbmRleCA9IGluZGV4ICogJHt0aGlzLndvcmtQZXJUaHJlYWR9ICsgaTtcbiAgICAgICAgICBpZihmbGF0SW5kZXggPCB1bmlmb3Jtcy5zaXplKSB7XG4gICAgICAgICAgICBsZXQgY29vcmRzID0gZ2V0Q29vcmRzRnJvbUluZGV4KGZsYXRJbmRleCk7XG4gICAgICAgICAgICBsZXQgeVIgPSBjb29yZHMueDtcbiAgICAgICAgICAgIGxldCB5QyA9IGNvb3Jkcy55O1xuXG4gICAgICAgICAgICAke3NuaXBwZXRzLmpvaW4oJ1xcbiAgICAgICAgJyl9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgYDtcbiAgICByZXR1cm4gdXNlckNvZGU7XG4gIH1cbn1cbiJdfQ==","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Imag } from '@tensorflow/tfjs-core';\nimport { identity } from './Identity';\nexport function imag(args) {\n    const { inputs, backend } = args;\n    const { input } = inputs;\n    const inputData = backend.tensorMap.get(input.dataId);\n    return identity({ inputs: { x: inputData.complexTensorInfos.imag }, backend });\n}\nexport const imagConfig = {\n    kernelName: Imag,\n    backendName: 'webgpu',\n    kernelFunc: imag\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiSW1hZy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2tlcm5lbHMvSW1hZy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQUMsSUFBSSxFQUFtRCxNQUFNLHVCQUF1QixDQUFDO0FBRzdGLE9BQU8sRUFBQyxRQUFRLEVBQUMsTUFBTSxZQUFZLENBQUM7QUFFcEMsTUFBTSxVQUFVLElBQUksQ0FBQyxJQUFrRDtJQUVyRSxNQUFNLEVBQUMsTUFBTSxFQUFFLE9BQU8sRUFBQyxHQUFHLElBQUksQ0FBQztJQUMvQixNQUFNLEVBQUMsS0FBSyxFQUFDLEdBQUcsTUFBTSxDQUFDO0lBQ3ZCLE1BQU0sU0FBUyxHQUFHLE9BQU8sQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUV0RCxPQUFPLFFBQVEsQ0FBQyxFQUFDLE1BQU0sRUFBRSxFQUFDLENBQUMsRUFBRSxTQUFTLENBQUMsa0JBQWtCLENBQUMsSUFBSSxFQUFDLEVBQUUsT0FBTyxFQUFDLENBQUMsQ0FBQztBQUM3RSxDQUFDO0FBRUQsTUFBTSxDQUFDLE1BQU0sVUFBVSxHQUFpQjtJQUN0QyxVQUFVLEVBQUUsSUFBSTtJQUNoQixXQUFXLEVBQUUsUUFBUTtJQUNyQixVQUFVLEVBQUUsSUFBNkI7Q0FDMUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtJbWFnLCBJbWFnSW5wdXRzLCBLZXJuZWxDb25maWcsIEtlcm5lbEZ1bmMsIFRlbnNvckluZm99IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7V2ViR1BVQmFja2VuZH0gZnJvbSAnLi4vYmFja2VuZF93ZWJncHUnO1xuaW1wb3J0IHtpZGVudGl0eX0gZnJvbSAnLi9JZGVudGl0eSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBpbWFnKGFyZ3M6IHtpbnB1dHM6IEltYWdJbnB1dHMsIGJhY2tlbmQ6IFdlYkdQVUJhY2tlbmR9KTpcbiAgICBUZW5zb3JJbmZvIHtcbiAgY29uc3Qge2lucHV0cywgYmFja2VuZH0gPSBhcmdzO1xuICBjb25zdCB7aW5wdXR9ID0gaW5wdXRzO1xuICBjb25zdCBpbnB1dERhdGEgPSBiYWNrZW5kLnRlbnNvck1hcC5nZXQoaW5wdXQuZGF0YUlkKTtcblxuICByZXR1cm4gaWRlbnRpdHkoe2lucHV0czoge3g6IGlucHV0RGF0YS5jb21wbGV4VGVuc29ySW5mb3MuaW1hZ30sIGJhY2tlbmR9KTtcbn1cblxuZXhwb3J0IGNvbnN0IGltYWdDb25maWc6IEtlcm5lbENvbmZpZyA9IHtcbiAga2VybmVsTmFtZTogSW1hZyxcbiAgYmFja2VuZE5hbWU6ICd3ZWJncHUnLFxuICBrZXJuZWxGdW5jOiBpbWFnIGFzIHVua25vd24gYXMgS2VybmVsRnVuY1xufTtcbiJdfQ==","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { backend_util, util } from '@tensorflow/tfjs-core';\nimport { ConcatProgram } from '../concat_webgpu';\nimport { concatImplCPU } from '../kernel_utils/shared';\nimport { complex } from './Complex';\nimport { imag } from './Imag';\nimport { real } from './Real';\nimport { reshape } from './Reshape';\nexport function concatImpl(inputs, axis, backend) {\n    const dtype = inputs[0].dtype;\n    if (dtype === 'complex64') {\n        const reals = inputs.map((t) => real({ inputs: { input: t }, backend }));\n        const imags = inputs.map((t) => imag({ inputs: { input: t }, backend }));\n        const realConcated = concatImpl(reals, axis, backend);\n        const imagConcated = concatImpl(imags, axis, backend);\n        const result = complex({ inputs: { real: realConcated, imag: imagConcated }, backend });\n        reals.forEach(r => backend.disposeData(r.dataId));\n        imags.forEach(i => backend.disposeData(i.dataId));\n        backend.disposeData(realConcated.dataId);\n        backend.disposeData(imagConcated.dataId);\n        return result;\n    }\n    let runOnCpu = backend.shouldExecuteOnCPU(inputs);\n    // Run on cpu if dtype is string. For string, the backend represents it\n    // as Uint8Array[], where each Uint8Array is a character. Given that the\n    // computation is only on the outer array, uploading the whole data onto\n    // gpu is wasteful. Also, currently webgpu doesn't have a design to\n    // upload and retrieve Uint8Array[] between cpu and gpu. Therefore, we\n    // just run the kernel on cpu if dtype is string.\n    if (dtype === 'string') {\n        runOnCpu = true;\n    }\n    if (runOnCpu) {\n        // Any concat of n-dimensional tensors across any axis can be reduced to\n        // a concatenation of two-dimensional tensors across the axis 1 by first\n        // partitioning the axes of the original tensors into those less than the\n        // axis to be concatenated and the rest. Then reshape the tensors\n        // into a two-dimensional tensor by collapsing these two sets of axes and\n        // concatenate the resulting matrices across the axis 1, finally reshaping\n        // the result to have the proper shape.\n        const tensors2D = inputs.map(t => {\n            const innerSize = util.sizeFromShape(t.shape.slice(axis));\n            const shape = [-1, innerSize];\n            return reshape({ inputs: { x: t }, backend, attrs: { shape } });\n        });\n        const inputsValShapes = tensors2D.map(t => {\n            return { vals: backend.readSync(t.dataId), shape: t.shape };\n        });\n        // Concats 2d tensors along axis=1.\n        const outShape = backend_util.computeOutShape(tensors2D.map(t => t.shape), 1 /* axis */);\n        const simplyConcat = tensors2D[0].shape[0] === 1;\n        const outVals = concatImplCPU(inputsValShapes, outShape, dtype, simplyConcat);\n        const finalOutShape = backend_util.computeOutShape(inputs.map(t => t.shape), axis);\n        const outInfo = backend.makeTensorInfo(finalOutShape, dtype, outVals);\n        tensors2D.forEach(t => backend.disposeData(t.dataId));\n        return outInfo;\n    }\n    // There is a storage buffer limitation in compute stage, one for output so\n    // the maximum for input is limits.maxStorageBuffersPerShaderStage - 1\n    const maxInputNum = backend.device.limits.maxStorageBuffersPerShaderStage - 1;\n    if (inputs.length > maxInputNum) {\n        const reducedInputs = [];\n        for (let i = 0; i < inputs.length; i += maxInputNum) {\n            const subArray = inputs.slice(i, i + maxInputNum);\n            reducedInputs.push(concatImpl(subArray, axis, backend));\n        }\n        const result = concatImpl(reducedInputs, axis, backend);\n        for (const i of reducedInputs) {\n            backend.disposeData(i.dataId);\n        }\n        return result;\n    }\n    const { tensors2D, outShape } = computeTensors2D(inputs, axis, backend);\n    const shapes = (tensors2D).map(t => t.shape);\n    const program = new ConcatProgram(shapes);\n    const uniformData = [];\n    const offsets = new Array(shapes.length - 1);\n    if (offsets.length > 0) {\n        offsets[0] = shapes[0][1];\n        uniformData.push({ type: 'int32', data: [offsets[0]] });\n        for (let i = 1; i < offsets.length; i++) {\n            offsets[i] = offsets[i - 1] + shapes[i][1];\n            uniformData.push({ type: 'int32', data: [offsets[i]] });\n        }\n    }\n    const res = backend.runWebGPUProgram(program, tensors2D, tensors2D[0].dtype, uniformData);\n    tensors2D.forEach(r => backend.disposeData(r.dataId));\n    const reshapedResult = reshape({ inputs: { x: res }, backend, attrs: { shape: outShape } });\n    backend.disposeData(res.dataId);\n    return reshapedResult;\n}\nfunction computeTensors2D(inputs, axis, backend) {\n    const outShape = backend_util.computeOutShape(inputs.map(t => t.shape), axis);\n    const tensors2D = inputs.map(t => reshape({\n        inputs: { x: t },\n        backend,\n        attrs: {\n            shape: [\n                util.sizeFromShape(t.shape.slice(0, axis)),\n                util.sizeFromShape(t.shape.slice(axis))\n            ]\n        }\n    }));\n    return { tensors2D, outShape };\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ29uY2F0X2ltcGwuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9rZXJuZWxzL0NvbmNhdF9pbXBsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sRUFBQyxZQUFZLEVBQTRCLElBQUksRUFBQyxNQUFNLHVCQUF1QixDQUFDO0FBR25GLE9BQU8sRUFBQyxhQUFhLEVBQUMsTUFBTSxrQkFBa0IsQ0FBQztBQUMvQyxPQUFPLEVBQUMsYUFBYSxFQUFDLE1BQU0sd0JBQXdCLENBQUM7QUFFckQsT0FBTyxFQUFDLE9BQU8sRUFBQyxNQUFNLFdBQVcsQ0FBQztBQUNsQyxPQUFPLEVBQUMsSUFBSSxFQUFDLE1BQU0sUUFBUSxDQUFDO0FBQzVCLE9BQU8sRUFBQyxJQUFJLEVBQUMsTUFBTSxRQUFRLENBQUM7QUFDNUIsT0FBTyxFQUFDLE9BQU8sRUFBQyxNQUFNLFdBQVcsQ0FBQztBQUVsQyxNQUFNLFVBQVUsVUFBVSxDQUN0QixNQUFvQixFQUFFLElBQVksRUFBRSxPQUFzQjtJQUM1RCxNQUFNLEtBQUssR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDO0lBQzlCLElBQUksS0FBSyxLQUFLLFdBQVcsRUFBRTtRQUN6QixNQUFNLEtBQUssR0FBRyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUMsRUFBQyxNQUFNLEVBQUUsRUFBQyxLQUFLLEVBQUUsQ0FBQyxFQUFDLEVBQUUsT0FBTyxFQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3JFLE1BQU0sS0FBSyxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxFQUFDLE1BQU0sRUFBRSxFQUFDLEtBQUssRUFBRSxDQUFDLEVBQUMsRUFBRSxPQUFPLEVBQUMsQ0FBQyxDQUFDLENBQUM7UUFFckUsTUFBTSxZQUFZLEdBQUcsVUFBVSxDQUFDLEtBQUssRUFBRSxJQUFJLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDdEQsTUFBTSxZQUFZLEdBQUcsVUFBVSxDQUFDLEtBQUssRUFBRSxJQUFJLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFFdEQsTUFBTSxNQUFNLEdBQ1IsT0FBTyxDQUFDLEVBQUMsTUFBTSxFQUFFLEVBQUMsSUFBSSxFQUFFLFlBQVksRUFBRSxJQUFJLEVBQUUsWUFBWSxFQUFDLEVBQUUsT0FBTyxFQUFDLENBQUMsQ0FBQztRQUV6RSxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztRQUNsRCxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztRQUNsRCxPQUFPLENBQUMsV0FBVyxDQUFDLFlBQVksQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUN6QyxPQUFPLENBQUMsV0FBVyxDQUFDLFlBQVksQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUV6QyxPQUFPLE1BQU0sQ0FBQztLQUNmO0lBRUQsSUFBSSxRQUFRLEdBQUcsT0FBTyxDQUFDLGtCQUFrQixDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBRWxELHVFQUF1RTtJQUN2RSx3RUFBd0U7SUFDeEUsd0VBQXdFO0lBQ3hFLG1FQUFtRTtJQUNuRSxzRUFBc0U7SUFDdEUsaURBQWlEO0lBQ2pELElBQUksS0FBSyxLQUFLLFFBQVEsRUFBRTtRQUN0QixRQUFRLEdBQUcsSUFBSSxDQUFDO0tBQ2pCO0lBRUQsSUFBSSxRQUFRLEVBQUU7UUFDWix3RUFBd0U7UUFDeEUsd0VBQXdFO1FBQ3hFLHlFQUF5RTtRQUN6RSxpRUFBaUU7UUFDakUseUVBQXlFO1FBQ3pFLDBFQUEwRTtRQUMxRSx1Q0FBdUM7UUFDdkMsTUFBTSxTQUFTLEdBQUcsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRTtZQUMvQixNQUFNLFNBQVMsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7WUFDMUQsTUFBTSxLQUFLLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxTQUFTLENBQUMsQ0FBQztZQUM5QixPQUFPLE9BQU8sQ0FBQyxFQUFDLE1BQU0sRUFBRSxFQUFDLENBQUMsRUFBRSxDQUFDLEVBQUMsRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLEVBQUMsS0FBSyxFQUFDLEVBQUMsQ0FBQyxDQUFDO1FBQzVELENBQUMsQ0FBQyxDQUFDO1FBRUgsTUFBTSxlQUFlLEdBQUcsU0FBUyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRTtZQUN4QyxPQUFPLEVBQUMsSUFBSSxFQUFFLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxFQUFFLEtBQUssRUFBRSxDQUFDLENBQUMsS0FBSyxFQUFDLENBQUM7UUFDNUQsQ0FBQyxDQUFDLENBQUM7UUFFSCxtQ0FBbUM7UUFDbkMsTUFBTSxRQUFRLEdBQ1YsWUFBWSxDQUFDLGVBQWUsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUM1RSxNQUFNLFlBQVksR0FBRyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNqRCxNQUFNLE9BQU8sR0FDVCxhQUFhLENBQUMsZUFBZSxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQUUsWUFBWSxDQUFDLENBQUM7UUFFbEUsTUFBTSxhQUFhLEdBQ2YsWUFBWSxDQUFDLGVBQWUsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDO1FBRWpFLE1BQU0sT0FBTyxHQUFHLE9BQU8sQ0FBQyxjQUFjLENBQUMsYUFBYSxFQUFFLEtBQUssRUFBRSxPQUFPLENBQUMsQ0FBQztRQUV0RSxTQUFTLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztRQUV0RCxPQUFPLE9BQU8sQ0FBQztLQUNoQjtJQUVELDJFQUEyRTtJQUMzRSxzRUFBc0U7SUFDdEUsTUFBTSxXQUFXLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsK0JBQStCLEdBQUcsQ0FBQyxDQUFDO0lBQzlFLElBQUksTUFBTSxDQUFDLE1BQU0sR0FBRyxXQUFXLEVBQUU7UUFDL0IsTUFBTSxhQUFhLEdBQUcsRUFBRSxDQUFDO1FBQ3pCLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxNQUFNLENBQUMsTUFBTSxFQUFFLENBQUMsSUFBSSxXQUFXLEVBQUU7WUFDbkQsTUFBTSxRQUFRLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFdBQVcsQ0FBQyxDQUFDO1lBQ2xELGFBQWEsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLFFBQVEsRUFBRSxJQUFJLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQztTQUN6RDtRQUNELE1BQU0sTUFBTSxHQUFHLFVBQVUsQ0FBQyxhQUFhLEVBQUUsSUFBSSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBRXhELEtBQUssTUFBTSxDQUFDLElBQUksYUFBYSxFQUFFO1lBQzdCLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1NBQy9CO1FBRUQsT0FBTyxNQUFNLENBQUM7S0FDZjtJQUVELE1BQU0sRUFBQyxTQUFTLEVBQUUsUUFBUSxFQUFDLEdBQUcsZ0JBQWdCLENBQUMsTUFBTSxFQUFFLElBQUksRUFBRSxPQUFPLENBQUMsQ0FBQztJQUN0RSxNQUFNLE1BQU0sR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUF5QixDQUFDLENBQUM7SUFDakUsTUFBTSxPQUFPLEdBQUcsSUFBSSxhQUFhLENBQUMsTUFBTSxDQUFDLENBQUM7SUFFMUMsTUFBTSxXQUFXLEdBQTBDLEVBQUUsQ0FBQztJQUM5RCxNQUFNLE9BQU8sR0FBYSxJQUFJLEtBQUssQ0FBQyxNQUFNLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDO0lBQ3ZELElBQUksT0FBTyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7UUFDdEIsT0FBTyxDQUFDLENBQUMsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUMxQixXQUFXLENBQUMsSUFBSSxDQUFDLEVBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBQyxDQUFDLENBQUM7UUFDdEQsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDdkMsT0FBTyxDQUFDLENBQUMsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzNDLFdBQVcsQ0FBQyxJQUFJLENBQUMsRUFBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQztTQUN2RDtLQUNGO0lBRUQsTUFBTSxHQUFHLEdBQUcsT0FBTyxDQUFDLGdCQUFnQixDQUNoQyxPQUFPLEVBQUUsU0FBUyxFQUFFLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLEVBQUUsV0FBVyxDQUFDLENBQUM7SUFDekQsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7SUFFdEQsTUFBTSxjQUFjLEdBQ2hCLE9BQU8sQ0FBQyxFQUFDLE1BQU0sRUFBRSxFQUFDLENBQUMsRUFBRSxHQUFHLEVBQUMsRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLEVBQUMsS0FBSyxFQUFFLFFBQVEsRUFBQyxFQUFDLENBQUMsQ0FBQztJQUNuRSxPQUFPLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUNoQyxPQUFPLGNBQWMsQ0FBQztBQUN4QixDQUFDO0FBRUQsU0FBUyxnQkFBZ0IsQ0FDckIsTUFBb0IsRUFBRSxJQUFZLEVBQUUsT0FBc0I7SUFDNUQsTUFBTSxRQUFRLEdBQUcsWUFBWSxDQUFDLGVBQWUsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQzlFLE1BQU0sU0FBUyxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxPQUFPLENBQUM7UUFDWCxNQUFNLEVBQUUsRUFBQyxDQUFDLEVBQUUsQ0FBQyxFQUFDO1FBQ2QsT0FBTztRQUNQLEtBQUssRUFBRTtZQUNMLEtBQUssRUFBRTtnQkFDTCxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQztnQkFDMUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQzthQUN4QztTQUNGO0tBQ0YsQ0FBQyxDQUFDLENBQUM7SUFFakMsT0FBTyxFQUFDLFNBQVMsRUFBRSxRQUFRLEVBQUMsQ0FBQztBQUMvQixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge2JhY2tlbmRfdXRpbCwgQ29uY2F0SW5wdXRzLCBUZW5zb3JJbmZvLCB1dGlsfSBmcm9tICdAdGVuc29yZmxvdy90ZmpzLWNvcmUnO1xuXG5pbXBvcnQge1dlYkdQVUJhY2tlbmR9IGZyb20gJy4uL2JhY2tlbmRfd2ViZ3B1JztcbmltcG9ydCB7Q29uY2F0UHJvZ3JhbX0gZnJvbSAnLi4vY29uY2F0X3dlYmdwdSc7XG5pbXBvcnQge2NvbmNhdEltcGxDUFV9IGZyb20gJy4uL2tlcm5lbF91dGlscy9zaGFyZWQnO1xuXG5pbXBvcnQge2NvbXBsZXh9IGZyb20gJy4vQ29tcGxleCc7XG5pbXBvcnQge2ltYWd9IGZyb20gJy4vSW1hZyc7XG5pbXBvcnQge3JlYWx9IGZyb20gJy4vUmVhbCc7XG5pbXBvcnQge3Jlc2hhcGV9IGZyb20gJy4vUmVzaGFwZSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBjb25jYXRJbXBsKFxuICAgIGlucHV0czogQ29uY2F0SW5wdXRzLCBheGlzOiBudW1iZXIsIGJhY2tlbmQ6IFdlYkdQVUJhY2tlbmQpOiBUZW5zb3JJbmZvIHtcbiAgY29uc3QgZHR5cGUgPSBpbnB1dHNbMF0uZHR5cGU7XG4gIGlmIChkdHlwZSA9PT0gJ2NvbXBsZXg2NCcpIHtcbiAgICBjb25zdCByZWFscyA9IGlucHV0cy5tYXAoKHQpID0+IHJlYWwoe2lucHV0czoge2lucHV0OiB0fSwgYmFja2VuZH0pKTtcbiAgICBjb25zdCBpbWFncyA9IGlucHV0cy5tYXAoKHQpID0+IGltYWcoe2lucHV0czoge2lucHV0OiB0fSwgYmFja2VuZH0pKTtcblxuICAgIGNvbnN0IHJlYWxDb25jYXRlZCA9IGNvbmNhdEltcGwocmVhbHMsIGF4aXMsIGJhY2tlbmQpO1xuICAgIGNvbnN0IGltYWdDb25jYXRlZCA9IGNvbmNhdEltcGwoaW1hZ3MsIGF4aXMsIGJhY2tlbmQpO1xuXG4gICAgY29uc3QgcmVzdWx0ID1cbiAgICAgICAgY29tcGxleCh7aW5wdXRzOiB7cmVhbDogcmVhbENvbmNhdGVkLCBpbWFnOiBpbWFnQ29uY2F0ZWR9LCBiYWNrZW5kfSk7XG5cbiAgICByZWFscy5mb3JFYWNoKHIgPT4gYmFja2VuZC5kaXNwb3NlRGF0YShyLmRhdGFJZCkpO1xuICAgIGltYWdzLmZvckVhY2goaSA9PiBiYWNrZW5kLmRpc3Bvc2VEYXRhKGkuZGF0YUlkKSk7XG4gICAgYmFja2VuZC5kaXNwb3NlRGF0YShyZWFsQ29uY2F0ZWQuZGF0YUlkKTtcbiAgICBiYWNrZW5kLmRpc3Bvc2VEYXRhKGltYWdDb25jYXRlZC5kYXRhSWQpO1xuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIGxldCBydW5PbkNwdSA9IGJhY2tlbmQuc2hvdWxkRXhlY3V0ZU9uQ1BVKGlucHV0cyk7XG5cbiAgLy8gUnVuIG9uIGNwdSBpZiBkdHlwZSBpcyBzdHJpbmcuIEZvciBzdHJpbmcsIHRoZSBiYWNrZW5kIHJlcHJlc2VudHMgaXRcbiAgLy8gYXMgVWludDhBcnJheVtdLCB3aGVyZSBlYWNoIFVpbnQ4QXJyYXkgaXMgYSBjaGFyYWN0ZXIuIEdpdmVuIHRoYXQgdGhlXG4gIC8vIGNvbXB1dGF0aW9uIGlzIG9ubHkgb24gdGhlIG91dGVyIGFycmF5LCB1cGxvYWRpbmcgdGhlIHdob2xlIGRhdGEgb250b1xuICAvLyBncHUgaXMgd2FzdGVmdWwuIEFsc28sIGN1cnJlbnRseSB3ZWJncHUgZG9lc24ndCBoYXZlIGEgZGVzaWduIHRvXG4gIC8vIHVwbG9hZCBhbmQgcmV0cmlldmUgVWludDhBcnJheVtdIGJldHdlZW4gY3B1IGFuZCBncHUuIFRoZXJlZm9yZSwgd2VcbiAgLy8ganVzdCBydW4gdGhlIGtlcm5lbCBvbiBjcHUgaWYgZHR5cGUgaXMgc3RyaW5nLlxuICBpZiAoZHR5cGUgPT09ICdzdHJpbmcnKSB7XG4gICAgcnVuT25DcHUgPSB0cnVlO1xuICB9XG5cbiAgaWYgKHJ1bk9uQ3B1KSB7XG4gICAgLy8gQW55IGNvbmNhdCBvZiBuLWRpbWVuc2lvbmFsIHRlbnNvcnMgYWNyb3NzIGFueSBheGlzIGNhbiBiZSByZWR1Y2VkIHRvXG4gICAgLy8gYSBjb25jYXRlbmF0aW9uIG9mIHR3by1kaW1lbnNpb25hbCB0ZW5zb3JzIGFjcm9zcyB0aGUgYXhpcyAxIGJ5IGZpcnN0XG4gICAgLy8gcGFydGl0aW9uaW5nIHRoZSBheGVzIG9mIHRoZSBvcmlnaW5hbCB0ZW5zb3JzIGludG8gdGhvc2UgbGVzcyB0aGFuIHRoZVxuICAgIC8vIGF4aXMgdG8gYmUgY29uY2F0ZW5hdGVkIGFuZCB0aGUgcmVzdC4gVGhlbiByZXNoYXBlIHRoZSB0ZW5zb3JzXG4gICAgLy8gaW50byBhIHR3by1kaW1lbnNpb25hbCB0ZW5zb3IgYnkgY29sbGFwc2luZyB0aGVzZSB0d28gc2V0cyBvZiBheGVzIGFuZFxuICAgIC8vIGNvbmNhdGVuYXRlIHRoZSByZXN1bHRpbmcgbWF0cmljZXMgYWNyb3NzIHRoZSBheGlzIDEsIGZpbmFsbHkgcmVzaGFwaW5nXG4gICAgLy8gdGhlIHJlc3VsdCB0byBoYXZlIHRoZSBwcm9wZXIgc2hhcGUuXG4gICAgY29uc3QgdGVuc29yczJEID0gaW5wdXRzLm1hcCh0ID0+IHtcbiAgICAgIGNvbnN0IGlubmVyU2l6ZSA9IHV0aWwuc2l6ZUZyb21TaGFwZSh0LnNoYXBlLnNsaWNlKGF4aXMpKTtcbiAgICAgIGNvbnN0IHNoYXBlID0gWy0xLCBpbm5lclNpemVdO1xuICAgICAgcmV0dXJuIHJlc2hhcGUoe2lucHV0czoge3g6IHR9LCBiYWNrZW5kLCBhdHRyczoge3NoYXBlfX0pO1xuICAgIH0pO1xuXG4gICAgY29uc3QgaW5wdXRzVmFsU2hhcGVzID0gdGVuc29yczJELm1hcCh0ID0+IHtcbiAgICAgIHJldHVybiB7dmFsczogYmFja2VuZC5yZWFkU3luYyh0LmRhdGFJZCksIHNoYXBlOiB0LnNoYXBlfTtcbiAgICB9KTtcblxuICAgIC8vIENvbmNhdHMgMmQgdGVuc29ycyBhbG9uZyBheGlzPTEuXG4gICAgY29uc3Qgb3V0U2hhcGUgPVxuICAgICAgICBiYWNrZW5kX3V0aWwuY29tcHV0ZU91dFNoYXBlKHRlbnNvcnMyRC5tYXAodCA9PiB0LnNoYXBlKSwgMSAvKiBheGlzICovKTtcbiAgICBjb25zdCBzaW1wbHlDb25jYXQgPSB0ZW5zb3JzMkRbMF0uc2hhcGVbMF0gPT09IDE7XG4gICAgY29uc3Qgb3V0VmFscyA9XG4gICAgICAgIGNvbmNhdEltcGxDUFUoaW5wdXRzVmFsU2hhcGVzLCBvdXRTaGFwZSwgZHR5cGUsIHNpbXBseUNvbmNhdCk7XG5cbiAgICBjb25zdCBmaW5hbE91dFNoYXBlID1cbiAgICAgICAgYmFja2VuZF91dGlsLmNvbXB1dGVPdXRTaGFwZShpbnB1dHMubWFwKHQgPT4gdC5zaGFwZSksIGF4aXMpO1xuXG4gICAgY29uc3Qgb3V0SW5mbyA9IGJhY2tlbmQubWFrZVRlbnNvckluZm8oZmluYWxPdXRTaGFwZSwgZHR5cGUsIG91dFZhbHMpO1xuXG4gICAgdGVuc29yczJELmZvckVhY2godCA9PiBiYWNrZW5kLmRpc3Bvc2VEYXRhKHQuZGF0YUlkKSk7XG5cbiAgICByZXR1cm4gb3V0SW5mbztcbiAgfVxuXG4gIC8vIFRoZXJlIGlzIGEgc3RvcmFnZSBidWZmZXIgbGltaXRhdGlvbiBpbiBjb21wdXRlIHN0YWdlLCBvbmUgZm9yIG91dHB1dCBzb1xuICAvLyB0aGUgbWF4aW11bSBmb3IgaW5wdXQgaXMgbGltaXRzLm1heFN0b3JhZ2VCdWZmZXJzUGVyU2hhZGVyU3RhZ2UgLSAxXG4gIGNvbnN0IG1heElucHV0TnVtID0gYmFja2VuZC5kZXZpY2UubGltaXRzLm1heFN0b3JhZ2VCdWZmZXJzUGVyU2hhZGVyU3RhZ2UgLSAxO1xuICBpZiAoaW5wdXRzLmxlbmd0aCA+IG1heElucHV0TnVtKSB7XG4gICAgY29uc3QgcmVkdWNlZElucHV0cyA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5wdXRzLmxlbmd0aDsgaSArPSBtYXhJbnB1dE51bSkge1xuICAgICAgY29uc3Qgc3ViQXJyYXkgPSBpbnB1dHMuc2xpY2UoaSwgaSArIG1heElucHV0TnVtKTtcbiAgICAgIHJlZHVjZWRJbnB1dHMucHVzaChjb25jYXRJbXBsKHN1YkFycmF5LCBheGlzLCBiYWNrZW5kKSk7XG4gICAgfVxuICAgIGNvbnN0IHJlc3VsdCA9IGNvbmNhdEltcGwocmVkdWNlZElucHV0cywgYXhpcywgYmFja2VuZCk7XG5cbiAgICBmb3IgKGNvbnN0IGkgb2YgcmVkdWNlZElucHV0cykge1xuICAgICAgYmFja2VuZC5kaXNwb3NlRGF0YShpLmRhdGFJZCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIGNvbnN0IHt0ZW5zb3JzMkQsIG91dFNoYXBlfSA9IGNvbXB1dGVUZW5zb3JzMkQoaW5wdXRzLCBheGlzLCBiYWNrZW5kKTtcbiAgY29uc3Qgc2hhcGVzID0gKHRlbnNvcnMyRCkubWFwKHQgPT4gdC5zaGFwZSBhcyBbbnVtYmVyLCBudW1iZXJdKTtcbiAgY29uc3QgcHJvZ3JhbSA9IG5ldyBDb25jYXRQcm9ncmFtKHNoYXBlcyk7XG5cbiAgY29uc3QgdW5pZm9ybURhdGE6IEFycmF5PHt0eXBlOiBzdHJpbmc7IGRhdGE6IG51bWJlcltdfT4gPSBbXTtcbiAgY29uc3Qgb2Zmc2V0czogbnVtYmVyW10gPSBuZXcgQXJyYXkoc2hhcGVzLmxlbmd0aCAtIDEpO1xuICBpZiAob2Zmc2V0cy5sZW5ndGggPiAwKSB7XG4gICAgb2Zmc2V0c1swXSA9IHNoYXBlc1swXVsxXTtcbiAgICB1bmlmb3JtRGF0YS5wdXNoKHt0eXBlOiAnaW50MzInLCBkYXRhOiBbb2Zmc2V0c1swXV19KTtcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8IG9mZnNldHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIG9mZnNldHNbaV0gPSBvZmZzZXRzW2kgLSAxXSArIHNoYXBlc1tpXVsxXTtcbiAgICAgIHVuaWZvcm1EYXRhLnB1c2goe3R5cGU6ICdpbnQzMicsIGRhdGE6IFtvZmZzZXRzW2ldXX0pO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IHJlcyA9IGJhY2tlbmQucnVuV2ViR1BVUHJvZ3JhbShcbiAgICAgIHByb2dyYW0sIHRlbnNvcnMyRCwgdGVuc29yczJEWzBdLmR0eXBlLCB1bmlmb3JtRGF0YSk7XG4gIHRlbnNvcnMyRC5mb3JFYWNoKHIgPT4gYmFja2VuZC5kaXNwb3NlRGF0YShyLmRhdGFJZCkpO1xuXG4gIGNvbnN0IHJlc2hhcGVkUmVzdWx0ID1cbiAgICAgIHJlc2hhcGUoe2lucHV0czoge3g6IHJlc30sIGJhY2tlbmQsIGF0dHJzOiB7c2hhcGU6IG91dFNoYXBlfX0pO1xuICBiYWNrZW5kLmRpc3Bvc2VEYXRhKHJlcy5kYXRhSWQpO1xuICByZXR1cm4gcmVzaGFwZWRSZXN1bHQ7XG59XG5cbmZ1bmN0aW9uIGNvbXB1dGVUZW5zb3JzMkQoXG4gICAgaW5wdXRzOiBDb25jYXRJbnB1dHMsIGF4aXM6IG51bWJlciwgYmFja2VuZDogV2ViR1BVQmFja2VuZCkge1xuICBjb25zdCBvdXRTaGFwZSA9IGJhY2tlbmRfdXRpbC5jb21wdXRlT3V0U2hhcGUoaW5wdXRzLm1hcCh0ID0+IHQuc2hhcGUpLCBheGlzKTtcbiAgY29uc3QgdGVuc29yczJEID0gaW5wdXRzLm1hcCh0ID0+IHJlc2hhcGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRzOiB7eDogdH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZW5kLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hhcGU6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGlsLnNpemVGcm9tU2hhcGUodC5zaGFwZS5zbGljZSgwLCBheGlzKSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXRpbC5zaXplRnJvbVNoYXBlKHQuc2hhcGUuc2xpY2UoYXhpcykpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG5cbiAgcmV0dXJuIHt0ZW5zb3JzMkQsIG91dFNoYXBlfTtcbn1cbiJdfQ==","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { backend_util, Concat, util } from '@tensorflow/tfjs-core';\nimport { concatImpl } from './Concat_impl';\nimport { identity } from './Identity';\nexport function concat(args) {\n    const { inputs, backend, attrs } = args;\n    const { axis } = attrs;\n    const $axis = util.parseAxisParam(axis, inputs[0].shape)[0];\n    const shapes = inputs.map(t => t.shape);\n    backend_util.assertParamsConsistent(shapes, $axis);\n    const outShape = backend_util.computeOutShape(inputs.map(t => t.shape), $axis);\n    if (util.sizeFromShape(outShape) === 0) {\n        return backend.makeTensorInfo(outShape, inputs[0].dtype, []);\n    }\n    // Keep only non-empty tensors (ignore tensors with 0 in their shape).\n    const $inputs = inputs.filter(t => util.sizeFromShape(t.shape) > 0);\n    if ($inputs.length === 1) {\n        return identity({ inputs: { x: $inputs[0] }, backend });\n    }\n    return concatImpl($inputs, $axis, backend);\n}\nexport const concatConfig = {\n    kernelName: Concat,\n    backendName: 'webgpu',\n    kernelFunc: concat\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ29uY2F0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMva2VybmVscy9Db25jYXQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUFDLFlBQVksRUFBRSxNQUFNLEVBQW1FLElBQUksRUFBQyxNQUFNLHVCQUF1QixDQUFDO0FBSWxJLE9BQU8sRUFBQyxVQUFVLEVBQUMsTUFBTSxlQUFlLENBQUM7QUFDekMsT0FBTyxFQUFDLFFBQVEsRUFBQyxNQUFNLFlBQVksQ0FBQztBQUVwQyxNQUFNLFVBQVUsTUFBTSxDQUNsQixJQUF3RTtJQUUxRSxNQUFNLEVBQUMsTUFBTSxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUMsR0FBRyxJQUFJLENBQUM7SUFDdEMsTUFBTSxFQUFDLElBQUksRUFBQyxHQUFHLEtBQUssQ0FBQztJQUVyQixNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLElBQUksRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFFNUQsTUFBTSxNQUFNLEdBQUcsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUN4QyxZQUFZLENBQUMsc0JBQXNCLENBQUMsTUFBTSxFQUFFLEtBQUssQ0FBQyxDQUFDO0lBRW5ELE1BQU0sUUFBUSxHQUNWLFlBQVksQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQztJQUNsRSxJQUFJLElBQUksQ0FBQyxhQUFhLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxFQUFFO1FBQ3RDLE9BQU8sT0FBTyxDQUFDLGNBQWMsQ0FBQyxRQUFRLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBRSxFQUFFLENBQUMsQ0FBQztLQUM5RDtJQUVELHNFQUFzRTtJQUN0RSxNQUFNLE9BQU8sR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7SUFDcEUsSUFBSSxPQUFPLENBQUMsTUFBTSxLQUFLLENBQUMsRUFBRTtRQUN4QixPQUFPLFFBQVEsQ0FBQyxFQUFDLE1BQU0sRUFBRSxFQUFDLENBQUMsRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUMsRUFBRSxPQUFPLEVBQUMsQ0FBQyxDQUFDO0tBQ3JEO0lBRUQsT0FBTyxVQUFVLENBQUMsT0FBTyxFQUFFLEtBQUssRUFBRSxPQUFPLENBQUMsQ0FBQztBQUM3QyxDQUFDO0FBRUQsTUFBTSxDQUFDLE1BQU0sWUFBWSxHQUFpQjtJQUN4QyxVQUFVLEVBQUUsTUFBTTtJQUNsQixXQUFXLEVBQUUsUUFBUTtJQUNyQixVQUFVLEVBQUUsTUFBK0I7Q0FDNUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtiYWNrZW5kX3V0aWwsIENvbmNhdCwgQ29uY2F0QXR0cnMsIENvbmNhdElucHV0cywgS2VybmVsQ29uZmlnLCBLZXJuZWxGdW5jLCBUZW5zb3JJbmZvLCB1dGlsfSBmcm9tICdAdGVuc29yZmxvdy90ZmpzLWNvcmUnO1xuXG5pbXBvcnQge1dlYkdQVUJhY2tlbmR9IGZyb20gJy4uL2JhY2tlbmRfd2ViZ3B1JztcblxuaW1wb3J0IHtjb25jYXRJbXBsfSBmcm9tICcuL0NvbmNhdF9pbXBsJztcbmltcG9ydCB7aWRlbnRpdHl9IGZyb20gJy4vSWRlbnRpdHknO1xuXG5leHBvcnQgZnVuY3Rpb24gY29uY2F0KFxuICAgIGFyZ3M6IHtpbnB1dHM6IENvbmNhdElucHV0cywgYXR0cnM6IENvbmNhdEF0dHJzLCBiYWNrZW5kOiBXZWJHUFVCYWNrZW5kfSk6XG4gICAgVGVuc29ySW5mbyB7XG4gIGNvbnN0IHtpbnB1dHMsIGJhY2tlbmQsIGF0dHJzfSA9IGFyZ3M7XG4gIGNvbnN0IHtheGlzfSA9IGF0dHJzO1xuXG4gIGNvbnN0ICRheGlzID0gdXRpbC5wYXJzZUF4aXNQYXJhbShheGlzLCBpbnB1dHNbMF0uc2hhcGUpWzBdO1xuXG4gIGNvbnN0IHNoYXBlcyA9IGlucHV0cy5tYXAodCA9PiB0LnNoYXBlKTtcbiAgYmFja2VuZF91dGlsLmFzc2VydFBhcmFtc0NvbnNpc3RlbnQoc2hhcGVzLCAkYXhpcyk7XG5cbiAgY29uc3Qgb3V0U2hhcGUgPVxuICAgICAgYmFja2VuZF91dGlsLmNvbXB1dGVPdXRTaGFwZShpbnB1dHMubWFwKHQgPT4gdC5zaGFwZSksICRheGlzKTtcbiAgaWYgKHV0aWwuc2l6ZUZyb21TaGFwZShvdXRTaGFwZSkgPT09IDApIHtcbiAgICByZXR1cm4gYmFja2VuZC5tYWtlVGVuc29ySW5mbyhvdXRTaGFwZSwgaW5wdXRzWzBdLmR0eXBlLCBbXSk7XG4gIH1cblxuICAvLyBLZWVwIG9ubHkgbm9uLWVtcHR5IHRlbnNvcnMgKGlnbm9yZSB0ZW5zb3JzIHdpdGggMCBpbiB0aGVpciBzaGFwZSkuXG4gIGNvbnN0ICRpbnB1dHMgPSBpbnB1dHMuZmlsdGVyKHQgPT4gdXRpbC5zaXplRnJvbVNoYXBlKHQuc2hhcGUpID4gMCk7XG4gIGlmICgkaW5wdXRzLmxlbmd0aCA9PT0gMSkge1xuICAgIHJldHVybiBpZGVudGl0eSh7aW5wdXRzOiB7eDogJGlucHV0c1swXX0sIGJhY2tlbmR9KTtcbiAgfVxuXG4gIHJldHVybiBjb25jYXRJbXBsKCRpbnB1dHMsICRheGlzLCBiYWNrZW5kKTtcbn1cblxuZXhwb3J0IGNvbnN0IGNvbmNhdENvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBDb25jYXQsXG4gIGJhY2tlbmROYW1lOiAnd2ViZ3B1JyxcbiAga2VybmVsRnVuYzogY29uY2F0IGFzIHVua25vd24gYXMgS2VybmVsRnVuY1xufTtcbiJdfQ==","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { activationFnSnippet, biasActivationSnippet } from './activation_util';\nimport { makeMatMulPackedSource, makeMatMulPackedVec4Source } from './matmul_packed_webgpu';\nimport { typeSnippet } from './webgpu_program';\nimport { computeDispatch, computeWorkgroupSizeForConv2d, computeWorkPerThreadForConv2d } from './webgpu_util';\nfunction conv2dCommonSnippet(isChannelsLast, fitAOuter, fitBOuter, fitInner, addBias = false, activation = null, hasPreluActivationWeights = false, innerElementSizeX = 4, innerElementSizeW = 4, innerElementSize = 4) {\n    const getXSnippet = (innerElementSize) => {\n        switch (innerElementSize) {\n            case 1:\n                return 'resData = f32(x[xIndex]);';\n            case 3:\n                return 'resData = vec3<f32>(x[xIndex], x[xIndex + 1], x[xIndex + 2]);';\n            case 4:\n                return 'resData = vec4<f32>(x[xIndex / 4]);';\n            default:\n                throw new Error(`innerElementSize ${innerElementSize} is not supported.`);\n        }\n    };\n    const getWSnippet = (innerElementSize) => {\n        switch (innerElementSize) {\n            case 1:\n                return 'return f32(W[row * uniforms.wShape[3] + col]);';\n            case 4:\n                return 'return vec4<f32>(W[(row * uniforms.wShape[3] + col) / 4]);';\n            default:\n                throw new Error(`innerElementSize ${innerElementSize} is not supported.`);\n        }\n    };\n    const coordASnippet = isChannelsLast ? `\n      let coord = vec4<i32>(batch, xRow, xCol, xCh);\n      ` :\n        `\n      let coord = vec4<i32>(batch, xCh, xRow, xCol);\n      `;\n    const coordResSnippet = isChannelsLast ? `\n      let coords = vec4<i32>(\n        batch,\n        row / outWidth,\n        row % outWidth,\n        col);\n      ` :\n        `\n      let coords = vec4<i32>(\n        batch,\n        row,\n        col / outWidth,\n        col % outWidth);\n      `;\n    const xHight = isChannelsLast ? 'uniforms.xShape[1]' : 'uniforms.xShape[2]';\n    const xWidth = isChannelsLast ? 'uniforms.xShape[2]' : 'uniforms.xShape[3]';\n    const row = isChannelsLast ? 'row' : 'col';\n    const col = isChannelsLast ? 'col' : 'row';\n    const readXSnippet = `\n      let inChannels = uniforms.wShape[2];\n      let outWidth = ${isChannelsLast ? 'uniforms.outShape[2]' : 'uniforms.outShape[3]'};\n      let outRow = ${row} / outWidth;\n      let outCol = ${row} % outWidth;\n\n      let WRow = ${col} / (uniforms.filterDims[1] * inChannels);\n      let WCol = ${col} / inChannels % uniforms.filterDims[1];\n      let xRow = outRow * uniforms.strides[0] + uniforms.dilations[0] * WRow - uniforms.pads[0];\n      let xCol = outCol * uniforms.strides[1] + uniforms.dilations[1] * WCol - uniforms.pads[1];\n      let xCh = ${col} % inChannels;\n      var resData = ${typeSnippet(innerElementSizeX)}(0.0);\n      // The bounds checking is always needed since we use it to pad zero for\n      // the 'same' padding type.\n      if (xRow >= 0 && xRow < ${xHight} && xCol >= 0 && xCol < ${xWidth}) {\n        ${coordASnippet}\n        let xIndex = getIndexFromCoords4D(coord, uniforms.xShape);\n        ${getXSnippet(innerElementSizeX)}\n      }\n      return resData;`;\n    const sampleX = isChannelsLast ? (fitAOuter && fitInner ? `\n      ${readXSnippet}` :\n        `\n      if (row < uniforms.dimAOuter && col < uniforms.dimInner) {\n        ${readXSnippet}\n      }\n      return ${typeSnippet(innerElementSizeX)}(0.0);`) :\n        (fitInner && fitBOuter ? `\n      ${readXSnippet}` :\n            `\n      if (row < uniforms.dimInner && col < uniforms.dimBOuter) {\n        ${readXSnippet}\n      }\n      return ${typeSnippet(innerElementSizeX)}(0.0);`);\n    const sampleW = `${getWSnippet(innerElementSizeW)}`;\n    const resType = typeSnippet(innerElementSize);\n    const aType = isChannelsLast ? typeSnippet(innerElementSizeX) :\n        typeSnippet(innerElementSizeW);\n    const bType = isChannelsLast ? typeSnippet(innerElementSizeW) :\n        typeSnippet(innerElementSizeX);\n    const userCode = `\n      ${activationFnSnippet(activation, hasPreluActivationWeights, innerElementSize === 4, 4)}\n      fn mm_readA(batch: i32, row : i32, col : i32) -> ${aType} {\n        ${isChannelsLast ? sampleX : sampleW}\n      }\n\n      fn mm_readB(batch: i32, row : i32, col : i32) -> ${bType} {\n        ${isChannelsLast ? sampleW : sampleX}\n      }\n\n      fn mm_write(batch: i32, row : i32, col : i32, valueIn : ${resType}) {\n        if (row < uniforms.dimAOuter && col < uniforms.dimBOuter)\n        {\n        var value = valueIn;\n        let outWidth = ${isChannelsLast ? 'uniforms.outShape[2]' : 'uniforms.outShape[3]'};\n        ${coordResSnippet}\n        ${biasActivationSnippet(addBias, activation)}\n        setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], value);\n        }\n      }`;\n    return userCode;\n}\nexport class Conv2DMMProgram {\n    constructor(convInfo, dimAOuter, dimBOuter, dimInner, addBias = false, activation = null, hasPreluActivationWeights = false, sequentialAccessByThreads = false) {\n        this.variableNames = ['x', 'W'];\n        this.uniforms = `filterDims : vec2<i32>, pads : vec2<i32>, strides : vec2<i32>, dilations : vec2<i32>, dimAOuter : i32, dimBOuter : i32, dimInner : i32,`;\n        this.outputShape = convInfo.outShape;\n        this.isChannelsLast = convInfo.dataFormat === 'channelsLast';\n        this.isVec4 =\n            (((convInfo.inChannels % 4 === 0 || convInfo.inChannels % 3 === 0) &&\n                this.isChannelsLast) ||\n                (convInfo.outWidth % 4 === 0 && !this.isChannelsLast)) &&\n                convInfo.outChannels % 4 === 0;\n        this.dispatchLayout = this.isChannelsLast ? { x: [3], y: [1, 2], z: [0] } :\n            { x: [2, 3], y: [1], z: [0] };\n        this.workgroupSize = computeWorkgroupSizeForConv2d(this.dispatchLayout, this.outputShape, this.isVec4);\n        this.elementsPerThread = computeWorkPerThreadForConv2d(this.dispatchLayout, this.outputShape, this.isVec4);\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize, this.elementsPerThread);\n        if (this.isVec4) {\n            this.outputComponent = 4;\n            if (this.isChannelsLast && convInfo.inChannels % 4 !== 0) {\n                this.innerElementSize = 3;\n                this.variableComponents = [1, 4];\n            }\n            else {\n                this.innerElementSize = 4;\n                this.variableComponents = [4, 4];\n            }\n            if (addBias) {\n                this.variableNames.push('bias');\n                this.variableComponents.push(4);\n            }\n            if (hasPreluActivationWeights) {\n                this.variableNames.push('preluActivationWeights');\n                this.variableComponents.push(4);\n            }\n        }\n        else {\n            this.innerElementSize = this.elementsPerThread[0];\n            if (addBias) {\n                this.variableNames.push('bias');\n            }\n            if (hasPreluActivationWeights) {\n                this.variableNames.push('preluActivationWeights');\n            }\n        }\n        this.sequentialAccessByThreads = sequentialAccessByThreads;\n        this.addBias = addBias;\n        this.activation = activation;\n        this.hasPreluActivationWeights = hasPreluActivationWeights;\n        this.tileAOuter = this.workgroupSize[1] * this.elementsPerThread[1];\n        this.tileBOuter = this.workgroupSize[0] * this.elementsPerThread[0];\n        this.tileInner = Math.max(this.workgroupSize[0] * this.innerElementSize, this.workgroupSize[1]);\n        this.fitAOuter = dimAOuter % this.tileAOuter === 0;\n        this.fitBOuter = dimBOuter % this.tileBOuter === 0;\n        this.fitInner = dimInner % this.tileInner === 0;\n        this.shaderKey = `conv2DMM_${this.elementsPerThread}_${this.activation}}_${this.fitAOuter}_${this.fitBOuter}_${this.fitInner}_${this.isVec4}_${this.innerElementSize}_${this.isChannelsLast}_${this.sequentialAccessByThreads}`;\n    }\n    getUserCode() {\n        const matMulSource = this.isVec4 ?\n            makeMatMulPackedVec4Source(this.elementsPerThread, this.workgroupSize, !this.isChannelsLast, this.tileInner) :\n            makeMatMulPackedSource(this.elementsPerThread, this.workgroupSize, !this.isChannelsLast, this.tileInner, false, null, this.sequentialAccessByThreads);\n        const elementsSize = this.isVec4 ? [this.innerElementSize, 4, 4] : [1, 1, 1];\n        const userCode = `\n    ${conv2dCommonSnippet(this.isChannelsLast, this.fitAOuter, this.fitBOuter, this.fitInner, this.addBias, this.activation, this.hasPreluActivationWeights, elementsSize[0], elementsSize[1], elementsSize[2])}\n    ${matMulSource}\n  `;\n        return userCode;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29udjJkX21tX3dlYmdwdS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2NvbnYyZF9tbV93ZWJncHUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBSUgsT0FBTyxFQUFDLG1CQUFtQixFQUFFLHFCQUFxQixFQUFDLE1BQU0sbUJBQW1CLENBQUM7QUFDN0UsT0FBTyxFQUFDLHNCQUFzQixFQUFFLDBCQUEwQixFQUFDLE1BQU0sd0JBQXdCLENBQUM7QUFDMUYsT0FBTyxFQUFDLFdBQVcsRUFBZ0IsTUFBTSxrQkFBa0IsQ0FBQztBQUM1RCxPQUFPLEVBQUMsZUFBZSxFQUFFLDZCQUE2QixFQUFFLDZCQUE2QixFQUFDLE1BQU0sZUFBZSxDQUFDO0FBRTVHLFNBQVMsbUJBQW1CLENBQ3hCLGNBQXVCLEVBQUUsU0FBa0IsRUFBRSxTQUFrQixFQUMvRCxRQUFpQixFQUFFLE9BQU8sR0FBRyxLQUFLLEVBQ2xDLGFBQXNDLElBQUksRUFDMUMseUJBQXlCLEdBQUcsS0FBSyxFQUFFLGlCQUFpQixHQUFHLENBQUMsRUFDeEQsaUJBQWlCLEdBQUcsQ0FBQyxFQUFFLGdCQUFnQixHQUFHLENBQUM7SUFDN0MsTUFBTSxXQUFXLEdBQUcsQ0FBQyxnQkFBd0IsRUFBRSxFQUFFO1FBQy9DLFFBQVEsZ0JBQWdCLEVBQUU7WUFDeEIsS0FBSyxDQUFDO2dCQUNKLE9BQU8sMkJBQTJCLENBQUM7WUFDckMsS0FBSyxDQUFDO2dCQUNKLE9BQU8sK0RBQStELENBQUM7WUFDekUsS0FBSyxDQUFDO2dCQUNKLE9BQU8scUNBQXFDLENBQUM7WUFDL0M7Z0JBQ0UsTUFBTSxJQUFJLEtBQUssQ0FDWCxvQkFBb0IsZ0JBQWdCLG9CQUFvQixDQUFDLENBQUM7U0FDakU7SUFDSCxDQUFDLENBQUM7SUFDRixNQUFNLFdBQVcsR0FBRyxDQUFDLGdCQUF3QixFQUFFLEVBQUU7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Q0FDZixJQUFJLENBQUMsY0FBYyxFQUFFLElBQUksQ0FBQyxTQUFTLEVBQUUsSUFBSSxDQUFDLFNBQVMsRUFBRSxJQUFJLENBQUMsUUFBUSxFQUNsRSxJQUFJLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDLHlCQUF5QixFQUM3RCxZQUFZLENBQUMsQ0FBQyxDQUFDLEVBQUUsWUFBWSxDQUFDLENBQUMsQ0FBQyxFQUFFLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztNQUN4RCxZQUFZO0dBQ2YsQ0FBQztRQUNBLE9BQU8sUUFBUSxDQUFDO0lBQ2xCLENBQUM7Q0FDRiIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtiYWNrZW5kX3V0aWx9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7YWN0aXZhdGlvbkZuU25pcHBldCwgYmlhc0FjdGl2YXRpb25TbmlwcGV0fSBmcm9tICcuL2FjdGl2YXRpb25fdXRpbCc7XG5pbXBvcnQge21ha2VNYXRNdWxQYWNrZWRTb3VyY2UsIG1ha2VNYXRNdWxQYWNrZWRWZWM0U291cmNlfSBmcm9tICcuL21hdG11bF9wYWNrZWRfd2ViZ3B1JztcbmltcG9ydCB7dHlwZVNuaXBwZXQsIFdlYkdQVVByb2dyYW19IGZyb20gJy4vd2ViZ3B1X3Byb2dyYW0nO1xuaW1wb3J0IHtjb21wdXRlRGlzcGF0Y2gsIGNvbXB1dGVXb3JrZ3JvdXBTaXplRm9yQ29udjJkLCBjb21wdXRlV29ya1BlclRocmVhZEZvckNvbnYyZH0gZnJvbSAnLi93ZWJncHVfdXRpbCc7XG5cbmZ1bmN0aW9uIGNvbnYyZENvbW1vblNuaXBwZXQoXG4gICAgaXNDaGFubmVsc0xhc3Q6IGJvb2xlYW4sIGZpdEFPdXRlcjogYm9vbGVhbiwgZml0Qk91dGVyOiBib29sZWFuLFxuICAgIGZpdElubmVyOiBib29sZWFuLCBhZGRCaWFzID0gZmFsc2UsXG4gICAgYWN0aXZhdGlvbjogYmFja2VuZF91dGlsLkFjdGl2YXRpb24gPSBudWxsLFxuICAgIGhhc1ByZWx1QWN0aXZhdGlvbldlaWdodHMgPSBmYWxzZSwgaW5uZXJFbGVtZW50U2l6ZVggPSA0LFxuICAgIGlubmVyRWxlbWVudFNpemVXID0gNCwgaW5uZXJFbGVtZW50U2l6ZSA9IDQpIHtcbiAgY29uc3QgZ2V0WFNuaXBwZXQgPSAoaW5uZXJFbGVtZW50U2l6ZTogbnVtYmVyKSA9PiB7XG4gICAgc3dpdGNoIChpbm5lckVsZW1lbnRTaXplKSB7XG4gICAgICBjYXNlIDE6XG4gICAgICAgIHJldHVybiAncmVzRGF0YSA9IGYzMih4W3hJbmRleF0pOyc7XG4gICAgICBjYXNlIDM6XG4gICAgICAgIHJldHVybiAncmVzRGF0YSA9IHZlYzM8ZjMyPih4W3hJbmRleF0sIHhbeEluZGV4ICsgMV0sIHhbeEluZGV4ICsgMl0pOyc7XG4gICAgICBjYXNlIDQ6XG4gICAgICAgIHJldHVybiAncmVzRGF0YSA9IHZlYzQ8ZjMyPih4W3hJbmRleCAvIDRdKTsnO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgYGlubmVyRWxlbWVudFNpemUgJHtpbm5lckVsZW1lbnRTaXplfSBpcyBub3Qgc3VwcG9ydGVkLmApO1xuICAgIH1cbiAgfTtcbiAgY29uc3QgZ2V0V1NuaXBwZXQgPSAoaW5uZXJFbGVtZW50U2l6ZTogbnVtYmVyKSA9PiB7XG4gICAgc3dpdGNoIChpbm5lckVsZW1lbnRTaXplKSB7XG4gICAgICBjYXNlIDE6XG4gICAgICAgIHJldHVybiAncmV0dXJuIGYzMihXW3JvdyAqIHVuaWZvcm1zLndTaGFwZVszXSArIGNvbF0pOyc7XG4gICAgICBjYXNlIDQ6XG4gICAgICAgIHJldHVybiAncmV0dXJuIHZlYzQ8ZjMyPihXWyhyb3cgKiB1bmlmb3Jtcy53U2hhcGVbM10gKyBjb2wpIC8gNF0pOyc7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICBgaW5uZXJFbGVtZW50U2l6ZSAke2lubmVyRWxlbWVudFNpemV9IGlzIG5vdCBzdXBwb3J0ZWQuYCk7XG4gICAgfVxuICB9O1xuICBjb25zdCBjb29yZEFTbmlwcGV0ID0gaXNDaGFubmVsc0xhc3QgPyBgXG4gICAgICBsZXQgY29vcmQgPSB2ZWM0PGkzMj4oYmF0Y2gsIHhSb3csIHhDb2wsIHhDaCk7XG4gICAgICBgIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYFxuICAgICAgbGV0IGNvb3JkID0gdmVjNDxpMzI+KGJhdGNoLCB4Q2gsIHhSb3csIHhDb2wpO1xuICAgICAgYDtcblxuICBjb25zdCBjb29yZFJlc1NuaXBwZXQgPSBpc0NoYW5uZWxzTGFzdCA/IGBcbiAgICAgIGxldCBjb29yZHMgPSB2ZWM0PGkzMj4oXG4gICAgICAgIGJhdGNoLFxuICAgICAgICByb3cgLyBvdXRXaWR0aCxcbiAgICAgICAgcm93ICUgb3V0V2lkdGgsXG4gICAgICAgIGNvbCk7XG4gICAgICBgIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgXG4gICAgICBsZXQgY29vcmRzID0gdmVjNDxpMzI+KFxuICAgICAgICBiYXRjaCxcbiAgICAgICAgcm93LFxuICAgICAgICBjb2wgLyBvdXRXaWR0aCxcbiAgICAgICAgY29sICUgb3V0V2lkdGgpO1xuICAgICAgYDtcblxuICBjb25zdCB4SGlnaHQgPSBpc0NoYW5uZWxzTGFzdCA/ICd1bmlmb3Jtcy54U2hhcGVbMV0nIDogJ3VuaWZvcm1zLnhTaGFwZVsyXSc7XG4gIGNvbnN0IHhXaWR0aCA9IGlzQ2hhbm5lbHNMYXN0ID8gJ3VuaWZvcm1zLnhTaGFwZVsyXScgOiAndW5pZm9ybXMueFNoYXBlWzNdJztcbiAgY29uc3Qgcm93ID0gaXNDaGFubmVsc0xhc3QgPyAncm93JyA6ICdjb2wnO1xuICBjb25zdCBjb2wgPSBpc0NoYW5uZWxzTGFzdCA/ICdjb2wnIDogJ3Jvdyc7XG4gIGNvbnN0IHJlYWRYU25pcHBldCA9IGBcbiAgICAgIGxldCBpbkNoYW5uZWxzID0gdW5pZm9ybXMud1NoYXBlWzJdO1xuICAgICAgbGV0IG91dFdpZHRoID0gJHtcbiAgICAgIGlzQ2hhbm5lbHNMYXN0ID8gJ3VuaWZvcm1zLm91dFNoYXBlWzJdJyA6ICd1bmlmb3Jtcy5vdXRTaGFwZVszXSd9O1xuICAgICAgbGV0IG91dFJvdyA9ICR7cm93fSAvIG91dFdpZHRoO1xuICAgICAgbGV0IG91dENvbCA9ICR7cm93fSAlIG91dFdpZHRoO1xuXG4gICAgICBsZXQgV1JvdyA9ICR7Y29sfSAvICh1bmlmb3Jtcy5maWx0ZXJEaW1zWzFdICogaW5DaGFubmVscyk7XG4gICAgICBsZXQgV0NvbCA9ICR7Y29sfSAvIGluQ2hhbm5lbHMgJSB1bmlmb3Jtcy5maWx0ZXJEaW1zWzFdO1xuICAgICAgbGV0IHhSb3cgPSBvdXRSb3cgKiB1bmlmb3Jtcy5zdHJpZGVzWzBdICsgdW5pZm9ybXMuZGlsYXRpb25zWzBdICogV1JvdyAtIHVuaWZvcm1zLnBhZHNbMF07XG4gICAgICBsZXQgeENvbCA9IG91dENvbCAqIHVuaWZvcm1zLnN0cmlkZXNbMV0gKyB1bmlmb3Jtcy5kaWxhdGlvbnNbMV0gKiBXQ29sIC0gdW5pZm9ybXMucGFkc1sxXTtcbiAgICAgIGxldCB4Q2ggPSAke2NvbH0gJSBpbkNoYW5uZWxzO1xuICAgICAgdmFyIHJlc0RhdGEgPSAke3R5cGVTbmlwcGV0KGlubmVyRWxlbWVudFNpemVYKX0oMC4wKTtcbiAgICAgIC8vIFRoZSBib3VuZHMgY2hlY2tpbmcgaXMgYWx3YXlzIG5lZWRlZCBzaW5jZSB3ZSB1c2UgaXQgdG8gcGFkIHplcm8gZm9yXG4gICAgICAvLyB0aGUgJ3NhbWUnIHBhZGRpbmcgdHlwZS5cbiAgICAgIGlmICh4Um93ID49IDAgJiYgeFJvdyA8ICR7eEhpZ2h0fSAmJiB4Q29sID49IDAgJiYgeENvbCA8ICR7eFdpZHRofSkge1xuICAgICAgICAke2Nvb3JkQVNuaXBwZXR9XG4gICAgICAgIGxldCB4SW5kZXggPSBnZXRJbmRleEZyb21Db29yZHM0RChjb29yZCwgdW5pZm9ybXMueFNoYXBlKTtcbiAgICAgICAgJHtnZXRYU25pcHBldChpbm5lckVsZW1lbnRTaXplWCl9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzRGF0YTtgO1xuXG4gIGNvbnN0IHNhbXBsZVggPSBpc0NoYW5uZWxzTGFzdCA/IChmaXRBT3V0ZXIgJiYgZml0SW5uZXIgPyBgXG4gICAgICAke3JlYWRYU25pcHBldH1gIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBcbiAgICAgIGlmIChyb3cgPCB1bmlmb3Jtcy5kaW1BT3V0ZXIgJiYgY29sIDwgdW5pZm9ybXMuZGltSW5uZXIpIHtcbiAgICAgICAgJHtyZWFkWFNuaXBwZXR9XG4gICAgICB9XG4gICAgICByZXR1cm4gJHt0eXBlU25pcHBldChpbm5lckVsZW1lbnRTaXplWCl9KDAuMCk7YCkgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZml0SW5uZXIgJiYgZml0Qk91dGVyID8gYFxuICAgICAgJHtyZWFkWFNuaXBwZXR9YCA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgXG4gICAgICBpZiAocm93IDwgdW5pZm9ybXMuZGltSW5uZXIgJiYgY29sIDwgdW5pZm9ybXMuZGltQk91dGVyKSB7XG4gICAgICAgICR7cmVhZFhTbmlwcGV0fVxuICAgICAgfVxuICAgICAgcmV0dXJuICR7dHlwZVNuaXBwZXQoaW5uZXJFbGVtZW50U2l6ZVgpfSgwLjApO2ApO1xuXG4gIGNvbnN0IHNhbXBsZVcgPSBgJHtnZXRXU25pcHBldChpbm5lckVsZW1lbnRTaXplVyl9YDtcblxuICBjb25zdCByZXNUeXBlID0gdHlwZVNuaXBwZXQoaW5uZXJFbGVtZW50U2l6ZSk7XG4gIGNvbnN0IGFUeXBlID0gaXNDaGFubmVsc0xhc3QgPyB0eXBlU25pcHBldChpbm5lckVsZW1lbnRTaXplWCkgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZVNuaXBwZXQoaW5uZXJFbGVtZW50U2l6ZVcpO1xuICBjb25zdCBiVHlwZSA9IGlzQ2hhbm5lbHNMYXN0ID8gdHlwZVNuaXBwZXQoaW5uZXJFbGVtZW50U2l6ZVcpIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVTbmlwcGV0KGlubmVyRWxlbWVudFNpemVYKTtcbiAgY29uc3QgdXNlckNvZGUgPSBgXG4gICAgICAke1xuICAgICAgYWN0aXZhdGlvbkZuU25pcHBldChcbiAgICAgICAgICBhY3RpdmF0aW9uLCBoYXNQcmVsdUFjdGl2YXRpb25XZWlnaHRzLCBpbm5lckVsZW1lbnRTaXplID09PSA0LCA0KX1cbiAgICAgIGZuIG1tX3JlYWRBKGJhdGNoOiBpMzIsIHJvdyA6IGkzMiwgY29sIDogaTMyKSAtPiAke2FUeXBlfSB7XG4gICAgICAgICR7aXNDaGFubmVsc0xhc3QgPyBzYW1wbGVYIDogc2FtcGxlV31cbiAgICAgIH1cblxuICAgICAgZm4gbW1fcmVhZEIoYmF0Y2g6IGkzMiwgcm93IDogaTMyLCBjb2wgOiBpMzIpIC0+ICR7YlR5cGV9IHtcbiAgICAgICAgJHtpc0NoYW5uZWxzTGFzdCA/IHNhbXBsZVcgOiBzYW1wbGVYfVxuICAgICAgfVxuXG4gICAgICBmbiBtbV93cml0ZShiYXRjaDogaTMyLCByb3cgOiBpMzIsIGNvbCA6IGkzMiwgdmFsdWVJbiA6ICR7cmVzVHlwZX0pIHtcbiAgICAgICAgaWYgKHJvdyA8IHVuaWZvcm1zLmRpbUFPdXRlciAmJiBjb2wgPCB1bmlmb3Jtcy5kaW1CT3V0ZXIpXG4gICAgICAgIHtcbiAgICAgICAgdmFyIHZhbHVlID0gdmFsdWVJbjtcbiAgICAgICAgbGV0IG91dFdpZHRoID0gJHtcbiAgICAgIGlzQ2hhbm5lbHNMYXN0ID8gJ3VuaWZvcm1zLm91dFNoYXBlWzJdJyA6ICd1bmlmb3Jtcy5vdXRTaGFwZVszXSd9O1xuICAgICAgICAke2Nvb3JkUmVzU25pcHBldH1cbiAgICAgICAgJHtiaWFzQWN0aXZhdGlvblNuaXBwZXQoYWRkQmlhcywgYWN0aXZhdGlvbil9XG4gICAgICAgIHNldE91dHB1dEF0Q29vcmRzKGNvb3Jkc1swXSwgY29vcmRzWzFdLCBjb29yZHNbMl0sIGNvb3Jkc1szXSwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9YDtcbiAgcmV0dXJuIHVzZXJDb2RlO1xufVxuXG5leHBvcnQgY2xhc3MgQ29udjJETU1Qcm9ncmFtIGltcGxlbWVudHMgV2ViR1BVUHJvZ3JhbSB7XG4gIG91dHB1dFNoYXBlOiBudW1iZXJbXTtcbiAgc2hhZGVyS2V5OiBzdHJpbmc7XG4gIGRpc3BhdGNoTGF5b3V0OiB7eDogbnVtYmVyW10sIHk6IG51bWJlcltdLCB6OiBudW1iZXJbXX07XG4gIGRpc3BhdGNoOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl07XG4gIHZhcmlhYmxlTmFtZXMgPSBbJ3gnLCAnVyddO1xuICB2YXJpYWJsZUNvbXBvbmVudHM6IG51bWJlcltdO1xuICB1bmlmb3JtcyA9XG4gICAgICBgZmlsdGVyRGltcyA6IHZlYzI8aTMyPiwgcGFkcyA6IHZlYzI8aTMyPiwgc3RyaWRlcyA6IHZlYzI8aTMyPiwgZGlsYXRpb25zIDogdmVjMjxpMzI+LCBkaW1BT3V0ZXIgOiBpMzIsIGRpbUJPdXRlciA6IGkzMiwgZGltSW5uZXIgOiBpMzIsYDtcbiAgd29ya2dyb3VwU2l6ZTogW251bWJlciwgbnVtYmVyLCBudW1iZXJdO1xuICBlbGVtZW50c1BlclRocmVhZDogW251bWJlciwgbnVtYmVyLCBudW1iZXJdO1xuICBhZGRCaWFzOiBib29sZWFuO1xuICBhY3RpdmF0aW9uOiBiYWNrZW5kX3V0aWwuQWN0aXZhdGlvbjtcbiAgaGFzUHJlbHVBY3RpdmF0aW9uV2VpZ2h0czogYm9vbGVhbjtcbiAgaXNDaGFubmVsc0xhc3Q6IGJvb2xlYW47XG4gIGZpdEFPdXRlcjogYm9vbGVhbjtcbiAgZml0Qk91dGVyOiBib29sZWFuO1xuICBmaXRJbm5lcjogYm9vbGVhbjtcbiAgdGlsZUFPdXRlcjogbnVtYmVyO1xuICB0aWxlQk91dGVyOiBudW1iZXI7XG4gIHRpbGVJbm5lcjogbnVtYmVyO1xuICBpbm5lckVsZW1lbnRTaXplOiBudW1iZXI7XG4gIGlzVmVjND86IGJvb2xlYW47XG4gIG91dHB1dENvbXBvbmVudDogbnVtYmVyO1xuICBwcml2YXRlIHNlcXVlbnRpYWxBY2Nlc3NCeVRocmVhZHM6IGJvb2xlYW47XG5cbiAgY29uc3RydWN0b3IoXG4gICAgICBjb252SW5mbzogYmFja2VuZF91dGlsLkNvbnYyREluZm8sIGRpbUFPdXRlcjogbnVtYmVyLCBkaW1CT3V0ZXI6IG51bWJlcixcbiAgICAgIGRpbUlubmVyOiBudW1iZXIsIGFkZEJpYXMgPSBmYWxzZSxcbiAgICAgIGFjdGl2YXRpb246IGJhY2tlbmRfdXRpbC5BY3RpdmF0aW9uID0gbnVsbCxcbiAgICAgIGhhc1ByZWx1QWN0aXZhdGlvbldlaWdodHMgPSBmYWxzZSwgc2VxdWVudGlhbEFjY2Vzc0J5VGhyZWFkcyA9IGZhbHNlKSB7XG4gICAgdGhpcy5vdXRwdXRTaGFwZSA9IGNvbnZJbmZvLm91dFNoYXBlO1xuICAgIHRoaXMuaXNDaGFubmVsc0xhc3QgPSBjb252SW5mby5kYXRhRm9ybWF0ID09PSAnY2hhbm5lbHNMYXN0JztcbiAgICB0aGlzLmlzVmVjNCA9XG4gICAgICAgICgoKGNvbnZJbmZvLmluQ2hhbm5lbHMgJSA0ID09PSAwIHx8IGNvbnZJbmZvLmluQ2hhbm5lbHMgJSAzID09PSAwKSAmJlxuICAgICAgICAgIHRoaXMuaXNDaGFubmVsc0xhc3QpIHx8XG4gICAgICAgICAoY29udkluZm8ub3V0V2lkdGggJSA0ID09PSAwICYmICF0aGlzLmlzQ2hhbm5lbHNMYXN0KSkgJiZcbiAgICAgICAgY29udkluZm8ub3V0Q2hhbm5lbHMgJSA0ID09PSAwO1xuICAgIHRoaXMuZGlzcGF0Y2hMYXlvdXQgPSB0aGlzLmlzQ2hhbm5lbHNMYXN0ID8ge3g6IFszXSwgeTogWzEsIDJdLCB6OiBbMF19IDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt4OiBbMiwgM10sIHk6IFsxXSwgejogWzBdfTtcbiAgICB0aGlzLndvcmtncm91cFNpemUgPSBjb21wdXRlV29ya2dyb3VwU2l6ZUZvckNvbnYyZChcbiAgICAgICAgdGhpcy5kaXNwYXRjaExheW91dCwgdGhpcy5vdXRwdXRTaGFwZSwgdGhpcy5pc1ZlYzQpO1xuICAgIHRoaXMuZWxlbWVudHNQZXJUaHJlYWQgPSBjb21wdXRlV29ya1BlclRocmVhZEZvckNvbnYyZChcbiAgICAgICAgdGhpcy5kaXNwYXRjaExheW91dCwgdGhpcy5vdXRwdXRTaGFwZSwgdGhpcy5pc1ZlYzQpO1xuXG4gICAgdGhpcy5kaXNwYXRjaCA9IGNvbXB1dGVEaXNwYXRjaChcbiAgICAgICAgdGhpcy5kaXNwYXRjaExheW91dCwgdGhpcy5vdXRwdXRTaGFwZSwgdGhpcy53b3JrZ3JvdXBTaXplLFxuICAgICAgICB0aGlzLmVsZW1lbnRzUGVyVGhyZWFkKTtcblxuICAgIGlmICh0aGlzLmlzVmVjNCkge1xuICAgICAgdGhpcy5vdXRwdXRDb21wb25lbnQgPSA0O1xuICAgICAgaWYgKHRoaXMuaXNDaGFubmVsc0xhc3QgJiYgY29udkluZm8uaW5DaGFubmVscyAlIDQgIT09IDApIHtcbiAgICAgICAgdGhpcy5pbm5lckVsZW1lbnRTaXplID0gMztcbiAgICAgICAgdGhpcy52YXJpYWJsZUNvbXBvbmVudHMgPSBbMSwgNF07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmlubmVyRWxlbWVudFNpemUgPSA0O1xuICAgICAgICB0aGlzLnZhcmlhYmxlQ29tcG9uZW50cyA9IFs0LCA0XTtcbiAgICAgIH1cblxuICAgICAgaWYgKGFkZEJpYXMpIHtcbiAgICAgICAgdGhpcy52YXJpYWJsZU5hbWVzLnB1c2goJ2JpYXMnKTtcbiAgICAgICAgdGhpcy52YXJpYWJsZUNvbXBvbmVudHMucHVzaCg0KTtcbiAgICAgIH1cblxuICAgICAgaWYgKGhhc1ByZWx1QWN0aXZhdGlvbldlaWdodHMpIHtcbiAgICAgICAgdGhpcy52YXJpYWJsZU5hbWVzLnB1c2goJ3ByZWx1QWN0aXZhdGlvbldlaWdodHMnKTtcbiAgICAgICAgdGhpcy52YXJpYWJsZUNvbXBvbmVudHMucHVzaCg0KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5pbm5lckVsZW1lbnRTaXplID0gdGhpcy5lbGVtZW50c1BlclRocmVhZFswXTtcbiAgICAgIGlmIChhZGRCaWFzKSB7XG4gICAgICAgIHRoaXMudmFyaWFibGVOYW1lcy5wdXNoKCdiaWFzJyk7XG4gICAgICB9XG5cbiAgICAgIGlmIChoYXNQcmVsdUFjdGl2YXRpb25XZWlnaHRzKSB7XG4gICAgICAgIHRoaXMudmFyaWFibGVOYW1lcy5wdXNoKCdwcmVsdUFjdGl2YXRpb25XZWlnaHRzJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5zZXF1ZW50aWFsQWNjZXNzQnlUaHJlYWRzID0gc2VxdWVudGlhbEFjY2Vzc0J5VGhyZWFkcztcbiAgICB0aGlzLmFkZEJpYXMgPSBhZGRCaWFzO1xuICAgIHRoaXMuYWN0aXZhdGlvbiA9IGFjdGl2YXRpb247XG4gICAgdGhpcy5oYXNQcmVsdUFjdGl2YXRpb25XZWlnaHRzID0gaGFzUHJlbHVBY3RpdmF0aW9uV2VpZ2h0cztcblxuICAgIHRoaXMudGlsZUFPdXRlciA9IHRoaXMud29ya2dyb3VwU2l6ZVsxXSAqIHRoaXMuZWxlbWVudHNQZXJUaHJlYWRbMV07XG4gICAgdGhpcy50aWxlQk91dGVyID0gdGhpcy53b3JrZ3JvdXBTaXplWzBdICogdGhpcy5lbGVtZW50c1BlclRocmVhZFswXTtcbiAgICB0aGlzLnRpbGVJbm5lciA9IE1hdGgubWF4KFxuICAgICAgICB0aGlzLndvcmtncm91cFNpemVbMF0gKiB0aGlzLmlubmVyRWxlbWVudFNpemUsIHRoaXMud29ya2dyb3VwU2l6ZVsxXSk7XG5cbiAgICB0aGlzLmZpdEFPdXRlciA9IGRpbUFPdXRlciAlIHRoaXMudGlsZUFPdXRlciA9PT0gMDtcbiAgICB0aGlzLmZpdEJPdXRlciA9IGRpbUJPdXRlciAlIHRoaXMudGlsZUJPdXRlciA9PT0gMDtcbiAgICB0aGlzLmZpdElubmVyID0gZGltSW5uZXIgJSB0aGlzLnRpbGVJbm5lciA9PT0gMDtcblxuICAgIHRoaXMuc2hhZGVyS2V5ID0gYGNvbnYyRE1NXyR7dGhpcy5lbGVtZW50c1BlclRocmVhZH1fJHt0aGlzLmFjdGl2YXRpb259fV8ke1xuICAgICAgICB0aGlzLmZpdEFPdXRlcn1fJHt0aGlzLmZpdEJPdXRlcn1fJHt0aGlzLmZpdElubmVyfV8ke3RoaXMuaXNWZWM0fV8ke1xuICAgICAgICB0aGlzLmlubmVyRWxlbWVudFNpemV9XyR7dGhpcy5pc0NoYW5uZWxzTGFzdH1fJHtcbiAgICAgICAgdGhpcy5zZXF1ZW50aWFsQWNjZXNzQnlUaHJlYWRzfWA7XG4gIH1cblxuICBnZXRVc2VyQ29kZSgpOiBzdHJpbmcge1xuICAgIGNvbnN0IG1hdE11bFNvdXJjZSA9IHRoaXMuaXNWZWM0ID9cbiAgICAgICAgbWFrZU1hdE11bFBhY2tlZFZlYzRTb3VyY2UoXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRzUGVyVGhyZWFkLCB0aGlzLndvcmtncm91cFNpemUsICF0aGlzLmlzQ2hhbm5lbHNMYXN0LFxuICAgICAgICAgICAgdGhpcy50aWxlSW5uZXIpIDpcbiAgICAgICAgbWFrZU1hdE11bFBhY2tlZFNvdXJjZShcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudHNQZXJUaHJlYWQsIHRoaXMud29ya2dyb3VwU2l6ZSwgIXRoaXMuaXNDaGFubmVsc0xhc3QsXG4gICAgICAgICAgICB0aGlzLnRpbGVJbm5lciwgZmFsc2UsIG51bGwsIHRoaXMuc2VxdWVudGlhbEFjY2Vzc0J5VGhyZWFkcyk7XG4gICAgY29uc3QgZWxlbWVudHNTaXplID1cbiAgICAgICAgdGhpcy5pc1ZlYzQgPyBbdGhpcy5pbm5lckVsZW1lbnRTaXplLCA0LCA0XSA6IFsxLCAxLCAxXTtcbiAgICBjb25zdCB1c2VyQ29kZSA9IGBcbiAgICAke1xuICAgICAgICBjb252MmRDb21tb25TbmlwcGV0KFxuICAgICAgICAgICAgdGhpcy5pc0NoYW5uZWxzTGFzdCwgdGhpcy5maXRBT3V0ZXIsIHRoaXMuZml0Qk91dGVyLCB0aGlzLmZpdElubmVyLFxuICAgICAgICAgICAgdGhpcy5hZGRCaWFzLCB0aGlzLmFjdGl2YXRpb24sIHRoaXMuaGFzUHJlbHVBY3RpdmF0aW9uV2VpZ2h0cyxcbiAgICAgICAgICAgIGVsZW1lbnRzU2l6ZVswXSwgZWxlbWVudHNTaXplWzFdLCBlbGVtZW50c1NpemVbMl0pfVxuICAgICR7bWF0TXVsU291cmNlfVxuICBgO1xuICAgIHJldHVybiB1c2VyQ29kZTtcbiAgfVxufVxuIl19","/**\n * @license\n * Copyright 2022 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { activationFnSnippet, biasActivationSnippet } from './activation_util';\nimport { getMainHeaderString as main } from './webgpu_program';\nimport { computeDispatch } from './webgpu_util';\nexport class Conv2DNaiveProgram {\n    constructor(convInfo, addBias = false, activation = null, hasPreluActivationWeights = false) {\n        this.variableNames = ['x', 'W'];\n        this.uniforms = 'filterDims: vec2<i32>, pads: vec2<i32>, strides: vec2<i32>, dilations: vec2<i32>,';\n        this.workgroupSize = [4, 4, 8];\n        this.outputShape = convInfo.outShape;\n        this.isChannelsLast = convInfo.dataFormat === 'channelsLast';\n        this.dispatchLayout = this.isChannelsLast ? { x: [2], y: [1], z: [0, 3] } :\n            { x: [3], y: [2], z: [0, 1] };\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize);\n        this.addBias = addBias;\n        this.activation = activation;\n        this.hasPreluActivationWeights = hasPreluActivationWeights;\n        if (addBias) {\n            this.variableNames.push('bias');\n        }\n        if (hasPreluActivationWeights) {\n            this.variableNames.push('preluActivationWeights');\n        }\n        this.shaderKey = `conv2dnaive_${this.activation}_${this.isChannelsLast}`;\n    }\n    getUserCode() {\n        const userCode = `\n       ${activationFnSnippet(this.activation, this.hasPreluActivationWeights, false, 4)}\n       fn readInp(batch : i32, row : i32, col : i32, chan : i32) -> f32{\n         let coords = vec4<i32>(batch, row, col, chan);\n         if (coordsInBounds4D(coords, uniforms.xShape)) {\n           return  getX(batch, row, col, chan);\n         } else {\n          return 0.0;\n         }\n       }\n       fn readFilt(row : i32, col : i32, xChannel : i32, outChannel : i32) -> f32{\n         let coords = vec4<i32>(row, col, xChannel, outChannel);\n         if(coordsInBounds4D(coords, uniforms.wShape)) {\n           return getW(row, col, xChannel, outChannel);\n          } else {\n            return 0.0;\n          }\n       }\n       fn writeResult(batch : i32, row : i32, col : i32, chan : i32, valueIn : f32) {\n         let coords = ${this.isChannelsLast ? `vec4<i32>(batch, row, col, chan);` :\n            `vec4<i32>(batch, chan, row, col);`}\n         if (coordsInBounds4D(coords, uniforms.outShape)) {\n           var value = valueIn;\n           ${biasActivationSnippet(this.addBias, this.activation)}\n           setOutputAtCoords(coords.x, coords.y, coords.z, coords.w, value);\n         }\n       }\n       ${main('index')} {\n         let coords = getOutputCoords();\n         let batch = coords[0];\n         let outChannel = ${this.isChannelsLast ? `coords[3];` : `coords[1];`}\n         let outRow = ${this.isChannelsLast ? `coords[1];` : `coords[2];`}\n         let outCol = ${this.isChannelsLast ? `coords[2];` : `coords[3];`}\n         var acc : f32 = 0.0;\n         for (var row = 0; row < uniforms.filterDims[0]; row = row + 1) {\n           for (var col = 0; col < uniforms.filterDims[1]; col = col + 1) {\n             let xRow = outRow * uniforms.strides[0] + uniforms.dilations[0] * row - uniforms.pads[0];\n             let xCol = outCol * uniforms.strides[1] + uniforms.dilations[1] * col - uniforms.pads[1];\n             for (var xChannel = 0; xChannel < ${this.isChannelsLast ? `uniforms.xShape[3];` :\n            `uniforms.xShape[1];`} xChannel = xChannel + 1) {\n               ${this.isChannelsLast ? `let v = readInp(batch, xRow, xCol, xChannel);` :\n            `let v = readInp(batch, xChannel, xRow, xCol);`}\n               let f = readFilt(row, col, xChannel, outChannel);\n               acc = acc + v * f;\n             }\n           }\n         }\n         writeResult(batch, outRow, outCol, outChannel, acc);\n       }\n     `;\n        return userCode;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29udjJkX25haXZlX3dlYmdwdS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2NvbnYyZF9uYWl2ZV93ZWJncHUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBSUgsT0FBTyxFQUFDLG1CQUFtQixFQUFFLHFCQUFxQixFQUFDLE1BQU0sbUJBQW1CLENBQUM7QUFDN0UsT0FBTyxFQUFDLG1CQUFtQixJQUFJLElBQUksRUFBZ0IsTUFBTSxrQkFBa0IsQ0FBQztBQUM1RSxPQUFPLEVBQUMsZUFBZSxFQUFDLE1BQU0sZUFBZSxDQUFDO0FBRTlDLE1BQU0sT0FBTyxrQkFBa0I7SUFjN0IsWUFDSSxRQUFpQyxFQUFFLE9BQU8sR0FBRyxLQUFLLEVBQ2xELGFBQXNDLElBQUksRUFDMUMseUJBQXlCLEdBQUcsS0FBSztRQVpyQyxrQkFBYSxHQUFHLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQzNCLGFBQVEsR0FDSixtRkFBbUYsQ0FBQztRQUN4RixrQkFBYSxHQUE2QixDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFVbEQsSUFBSSxDQUFDLFdBQVcsR0FBRyxRQUFRLENBQUMsUUFBUSxDQUFDO1FBQ3JDLElBQUksQ0FBQyxjQUFjLEdBQUcsUUFBUSxDQUFDLFVBQVUsS0FBSyxjQUFjLENBQUM7UUFDN0QsSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBQyxDQUFDLENBQUM7WUFDN0IsRUFBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUMsQ0FBQztRQUN4RSxJQUFJLENBQUMsUUFBUSxHQUFHLGVBQWUsQ0FDM0IsSUFBSSxDQUFDLGNBQWMsRUFBRSxJQUFJLENBQUMsV0FBVyxFQUFFLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQztRQUMvRCxJQUFJLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQztRQUN2QixJQUFJLENBQUMsVUFBVSxHQUFHLFVBQVUsQ0FBQztRQUM3QixJQUFJLENBQUMseUJBQXlCLEdBQUcseUJBQXlCLENBQUM7UUFFM0QsSUFBSSxPQUFPLEVBQUU7WUFDWCxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztTQUNqQztRQUVELElBQUkseUJBQXlCLEVBQUU7WUFDN0IsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsd0JBQXdCLENBQUMsQ0FBQztTQUNuRDtRQUVELElBQUksQ0FBQyxTQUFTLEdBQUcsZUFBZSxJQUFJLENBQUMsVUFBVSxJQUFJLElBQUksQ0FBQyxjQUFjLEVBQUUsQ0FBQztJQUMzRSxDQUFDO0lBRUQsV0FBVztRQUNULE1BQU0sUUFBUSxHQUFHO1NBRWIsbUJBQW1CLENBQ2YsSUFBSSxDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUMseUJBQXlCLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7O3dCQW1COUQsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsbUNBQW1DLENBQUMsQ0FBQztZQUNyQyxtQ0FBbUM7OzthQUdwRCxxQkFBcUIsQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUM7Ozs7U0FJeEQsSUFBSSxDQUFDLE9BQU8sQ0FBQzs7OzRCQUdNLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsWUFBWTt3QkFDckQsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxZQUFZO3dCQUNqRCxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLFlBQVk7Ozs7OztpREFPakUsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMscUJBQXFCLENBQUMsQ0FBQztZQUN2QixxQkFBcUI7aUJBRTNDLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLCtDQUErQyxDQUFDLENBQUM7WUFDakQsK0NBQStDOzs7Ozs7OztNQVF2RSxDQUFDO1FBQ0gsT0FBTyxRQUFRLENBQUM7SUFDbEIsQ0FBQztDQUNGIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge2JhY2tlbmRfdXRpbH0gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcblxuaW1wb3J0IHthY3RpdmF0aW9uRm5TbmlwcGV0LCBiaWFzQWN0aXZhdGlvblNuaXBwZXR9IGZyb20gJy4vYWN0aXZhdGlvbl91dGlsJztcbmltcG9ydCB7Z2V0TWFpbkhlYWRlclN0cmluZyBhcyBtYWluLCBXZWJHUFVQcm9ncmFtfSBmcm9tICcuL3dlYmdwdV9wcm9ncmFtJztcbmltcG9ydCB7Y29tcHV0ZURpc3BhdGNofSBmcm9tICcuL3dlYmdwdV91dGlsJztcblxuZXhwb3J0IGNsYXNzIENvbnYyRE5haXZlUHJvZ3JhbSBpbXBsZW1lbnRzIFdlYkdQVVByb2dyYW0ge1xuICBvdXRwdXRTaGFwZTogbnVtYmVyW107XG4gIHNoYWRlcktleTogc3RyaW5nO1xuICBkaXNwYXRjaExheW91dDoge3g6IG51bWJlcltdLCB5OiBudW1iZXJbXSwgejogbnVtYmVyW119O1xuICBkaXNwYXRjaDogW251bWJlciwgbnVtYmVyLCBudW1iZXJdO1xuICB2YXJpYWJsZU5hbWVzID0gWyd4JywgJ1cnXTtcbiAgdW5pZm9ybXMgPVxuICAgICAgJ2ZpbHRlckRpbXM6IHZlYzI8aTMyPiwgcGFkczogdmVjMjxpMzI+LCBzdHJpZGVzOiB2ZWMyPGkzMj4sIGRpbGF0aW9uczogdmVjMjxpMzI+LCc7XG4gIHdvcmtncm91cFNpemU6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXSA9IFs0LCA0LCA4XTtcbiAgYWRkQmlhczogYm9vbGVhbjtcbiAgYWN0aXZhdGlvbjogYmFja2VuZF91dGlsLkFjdGl2YXRpb247XG4gIGhhc1ByZWx1QWN0aXZhdGlvbldlaWdodHM6IGJvb2xlYW47XG4gIGlzQ2hhbm5lbHNMYXN0OiBib29sZWFuO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgICAgY29udkluZm86IGJhY2tlbmRfdXRpbC5Db252MkRJbmZvLCBhZGRCaWFzID0gZmFsc2UsXG4gICAgICBhY3RpdmF0aW9uOiBiYWNrZW5kX3V0aWwuQWN0aXZhdGlvbiA9IG51bGwsXG4gICAgICBoYXNQcmVsdUFjdGl2YXRpb25XZWlnaHRzID0gZmFsc2UpIHtcbiAgICB0aGlzLm91dHB1dFNoYXBlID0gY29udkluZm8ub3V0U2hhcGU7XG4gICAgdGhpcy5pc0NoYW5uZWxzTGFzdCA9IGNvbnZJbmZvLmRhdGFGb3JtYXQgPT09ICdjaGFubmVsc0xhc3QnO1xuICAgIHRoaXMuZGlzcGF0Y2hMYXlvdXQgPSB0aGlzLmlzQ2hhbm5lbHNMYXN0ID8ge3g6IFsyXSwgeTogWzFdLCB6OiBbMCwgM119IDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt4OiBbM10sIHk6IFsyXSwgejogWzAsIDFdfTtcbiAgICB0aGlzLmRpc3BhdGNoID0gY29tcHV0ZURpc3BhdGNoKFxuICAgICAgICB0aGlzLmRpc3BhdGNoTGF5b3V0LCB0aGlzLm91dHB1dFNoYXBlLCB0aGlzLndvcmtncm91cFNpemUpO1xuICAgIHRoaXMuYWRkQmlhcyA9IGFkZEJpYXM7XG4gICAgdGhpcy5hY3RpdmF0aW9uID0gYWN0aXZhdGlvbjtcbiAgICB0aGlzLmhhc1ByZWx1QWN0aXZhdGlvbldlaWdodHMgPSBoYXNQcmVsdUFjdGl2YXRpb25XZWlnaHRzO1xuXG4gICAgaWYgKGFkZEJpYXMpIHtcbiAgICAgIHRoaXMudmFyaWFibGVOYW1lcy5wdXNoKCdiaWFzJyk7XG4gICAgfVxuXG4gICAgaWYgKGhhc1ByZWx1QWN0aXZhdGlvbldlaWdodHMpIHtcbiAgICAgIHRoaXMudmFyaWFibGVOYW1lcy5wdXNoKCdwcmVsdUFjdGl2YXRpb25XZWlnaHRzJyk7XG4gICAgfVxuXG4gICAgdGhpcy5zaGFkZXJLZXkgPSBgY29udjJkbmFpdmVfJHt0aGlzLmFjdGl2YXRpb259XyR7dGhpcy5pc0NoYW5uZWxzTGFzdH1gO1xuICB9XG5cbiAgZ2V0VXNlckNvZGUoKTogc3RyaW5nIHtcbiAgICBjb25zdCB1c2VyQ29kZSA9IGBcbiAgICAgICAke1xuICAgICAgICBhY3RpdmF0aW9uRm5TbmlwcGV0KFxuICAgICAgICAgICAgdGhpcy5hY3RpdmF0aW9uLCB0aGlzLmhhc1ByZWx1QWN0aXZhdGlvbldlaWdodHMsIGZhbHNlLCA0KX1cbiAgICAgICBmbiByZWFkSW5wKGJhdGNoIDogaTMyLCByb3cgOiBpMzIsIGNvbCA6IGkzMiwgY2hhbiA6IGkzMikgLT4gZjMye1xuICAgICAgICAgbGV0IGNvb3JkcyA9IHZlYzQ8aTMyPihiYXRjaCwgcm93LCBjb2wsIGNoYW4pO1xuICAgICAgICAgaWYgKGNvb3Jkc0luQm91bmRzNEQoY29vcmRzLCB1bmlmb3Jtcy54U2hhcGUpKSB7XG4gICAgICAgICAgIHJldHVybiAgZ2V0WChiYXRjaCwgcm93LCBjb2wsIGNoYW4pO1xuICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gMC4wO1xuICAgICAgICAgfVxuICAgICAgIH1cbiAgICAgICBmbiByZWFkRmlsdChyb3cgOiBpMzIsIGNvbCA6IGkzMiwgeENoYW5uZWwgOiBpMzIsIG91dENoYW5uZWwgOiBpMzIpIC0+IGYzMntcbiAgICAgICAgIGxldCBjb29yZHMgPSB2ZWM0PGkzMj4ocm93LCBjb2wsIHhDaGFubmVsLCBvdXRDaGFubmVsKTtcbiAgICAgICAgIGlmKGNvb3Jkc0luQm91bmRzNEQoY29vcmRzLCB1bmlmb3Jtcy53U2hhcGUpKSB7XG4gICAgICAgICAgIHJldHVybiBnZXRXKHJvdywgY29sLCB4Q2hhbm5lbCwgb3V0Q2hhbm5lbCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiAwLjA7XG4gICAgICAgICAgfVxuICAgICAgIH1cbiAgICAgICBmbiB3cml0ZVJlc3VsdChiYXRjaCA6IGkzMiwgcm93IDogaTMyLCBjb2wgOiBpMzIsIGNoYW4gOiBpMzIsIHZhbHVlSW4gOiBmMzIpIHtcbiAgICAgICAgIGxldCBjb29yZHMgPSAke1xuICAgICAgICB0aGlzLmlzQ2hhbm5lbHNMYXN0ID8gYHZlYzQ8aTMyPihiYXRjaCwgcm93LCBjb2wsIGNoYW4pO2AgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYHZlYzQ8aTMyPihiYXRjaCwgY2hhbiwgcm93LCBjb2wpO2B9XG4gICAgICAgICBpZiAoY29vcmRzSW5Cb3VuZHM0RChjb29yZHMsIHVuaWZvcm1zLm91dFNoYXBlKSkge1xuICAgICAgICAgICB2YXIgdmFsdWUgPSB2YWx1ZUluO1xuICAgICAgICAgICAke2JpYXNBY3RpdmF0aW9uU25pcHBldCh0aGlzLmFkZEJpYXMsIHRoaXMuYWN0aXZhdGlvbil9XG4gICAgICAgICAgIHNldE91dHB1dEF0Q29vcmRzKGNvb3Jkcy54LCBjb29yZHMueSwgY29vcmRzLnosIGNvb3Jkcy53LCB2YWx1ZSk7XG4gICAgICAgICB9XG4gICAgICAgfVxuICAgICAgICR7bWFpbignaW5kZXgnKX0ge1xuICAgICAgICAgbGV0IGNvb3JkcyA9IGdldE91dHB1dENvb3JkcygpO1xuICAgICAgICAgbGV0IGJhdGNoID0gY29vcmRzWzBdO1xuICAgICAgICAgbGV0IG91dENoYW5uZWwgPSAke3RoaXMuaXNDaGFubmVsc0xhc3QgPyBgY29vcmRzWzNdO2AgOiBgY29vcmRzWzFdO2B9XG4gICAgICAgICBsZXQgb3V0Um93ID0gJHt0aGlzLmlzQ2hhbm5lbHNMYXN0ID8gYGNvb3Jkc1sxXTtgIDogYGNvb3Jkc1syXTtgfVxuICAgICAgICAgbGV0IG91dENvbCA9ICR7dGhpcy5pc0NoYW5uZWxzTGFzdCA/IGBjb29yZHNbMl07YCA6IGBjb29yZHNbM107YH1cbiAgICAgICAgIHZhciBhY2MgOiBmMzIgPSAwLjA7XG4gICAgICAgICBmb3IgKHZhciByb3cgPSAwOyByb3cgPCB1bmlmb3Jtcy5maWx0ZXJEaW1zWzBdOyByb3cgPSByb3cgKyAxKSB7XG4gICAgICAgICAgIGZvciAodmFyIGNvbCA9IDA7IGNvbCA8IHVuaWZvcm1zLmZpbHRlckRpbXNbMV07IGNvbCA9IGNvbCArIDEpIHtcbiAgICAgICAgICAgICBsZXQgeFJvdyA9IG91dFJvdyAqIHVuaWZvcm1zLnN0cmlkZXNbMF0gKyB1bmlmb3Jtcy5kaWxhdGlvbnNbMF0gKiByb3cgLSB1bmlmb3Jtcy5wYWRzWzBdO1xuICAgICAgICAgICAgIGxldCB4Q29sID0gb3V0Q29sICogdW5pZm9ybXMuc3RyaWRlc1sxXSArIHVuaWZvcm1zLmRpbGF0aW9uc1sxXSAqIGNvbCAtIHVuaWZvcm1zLnBhZHNbMV07XG4gICAgICAgICAgICAgZm9yICh2YXIgeENoYW5uZWwgPSAwOyB4Q2hhbm5lbCA8ICR7XG4gICAgICAgIHRoaXMuaXNDaGFubmVsc0xhc3QgPyBgdW5pZm9ybXMueFNoYXBlWzNdO2AgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYHVuaWZvcm1zLnhTaGFwZVsxXTtgfSB4Q2hhbm5lbCA9IHhDaGFubmVsICsgMSkge1xuICAgICAgICAgICAgICAgJHtcbiAgICAgICAgdGhpcy5pc0NoYW5uZWxzTGFzdCA/IGBsZXQgdiA9IHJlYWRJbnAoYmF0Y2gsIHhSb3csIHhDb2wsIHhDaGFubmVsKTtgIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBsZXQgdiA9IHJlYWRJbnAoYmF0Y2gsIHhDaGFubmVsLCB4Um93LCB4Q29sKTtgfVxuICAgICAgICAgICAgICAgbGV0IGYgPSByZWFkRmlsdChyb3csIGNvbCwgeENoYW5uZWwsIG91dENoYW5uZWwpO1xuICAgICAgICAgICAgICAgYWNjID0gYWNjICsgdiAqIGY7XG4gICAgICAgICAgICAgfVxuICAgICAgICAgICB9XG4gICAgICAgICB9XG4gICAgICAgICB3cml0ZVJlc3VsdChiYXRjaCwgb3V0Um93LCBvdXRDb2wsIG91dENoYW5uZWwsIGFjYyk7XG4gICAgICAgfVxuICAgICBgO1xuICAgIHJldHVybiB1c2VyQ29kZTtcbiAgfVxufVxuIl19","/**\n * @license\n * Copyright 2022 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { getMainHeaderString as main } from './webgpu_program';\nimport { computeDispatch, flatDispatchLayout } from './webgpu_util';\nexport class Im2ColProgram {\n    constructor(outputShape, isChannelsLast) {\n        this.variableNames = ['x'];\n        this.uniforms = `pads : vec2<i32>, strides : vec2<i32>, dilations : vec2<i32>, outWidth : i32, itemsPerBlockRow : i32,\n       inChannels : i32,`;\n        this.workgroupSize = [64, 1, 1];\n        this.size = true;\n        this.outputShape = outputShape;\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize);\n        this.isChannelsLast = isChannelsLast;\n        this.shaderKey = `im2col_${this.isChannelsLast}`;\n    }\n    getUserCode() {\n        const rowDim = this.isChannelsLast ? 1 : 2;\n        const colDim = this.isChannelsLast ? 2 : 3;\n        const row = this.isChannelsLast ? 'coords[1]' : 'coords[2]';\n        const col = this.isChannelsLast ? 'coords[2]' : 'coords[1]';\n        const getXSnippet = this.isChannelsLast ? 'getX(batch, xRow, xCol, ch)' :\n            'getX(batch, ch, xRow, xCol)';\n        const userCode = `\n    ${main('index')} {\n      let coords = getCoordsFromIndex(index);\n      if(index < uniforms.size) {\n        let batch = coords[0];\n        let row = ${row};\n        let col = ${col};\n        let offsetY = (row / uniforms.outWidth) * uniforms.strides[0] - uniforms.pads[0];\n        let xRow = offsetY + uniforms.dilations[0] * (col / uniforms.itemsPerBlockRow);\n        var value = 0.0;\n        if(xRow < uniforms.xShape[${rowDim}] && xRow >= 0) {\n          let offsetX = (row % uniforms.outWidth) * uniforms.strides[1] -\n              uniforms.pads[1];\n          let xCol = offsetX + uniforms.dilations[1] * ((col %\n              uniforms.itemsPerBlockRow) / uniforms.inChannels);\n          let ch = col % uniforms.inChannels;\n          if(xCol < uniforms.xShape[${colDim}] && xCol >= 0) {\n            value = ${getXSnippet};\n          }\n        }\n        setOutputAtIndex(index, value);\n      }\n    }\n   `;\n        return userCode;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW0yY29sX3dlYmdwdS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2ltMmNvbF93ZWJncHUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUFDLG1CQUFtQixJQUFJLElBQUksRUFBZ0IsTUFBTSxrQkFBa0IsQ0FBQztBQUM1RSxPQUFPLEVBQUMsZUFBZSxFQUFFLGtCQUFrQixFQUFDLE1BQU0sZUFBZSxDQUFDO0FBRWxFLE1BQU0sT0FBTyxhQUFhO0lBYXhCLFlBQVksV0FBcUIsRUFBRSxjQUF1QjtRQVoxRCxrQkFBYSxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDdEIsYUFBUSxHQUNKO3lCQUNtQixDQUFDO1FBS3hCLGtCQUFhLEdBQTZCLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUVyRCxTQUFJLEdBQUcsSUFBSSxDQUFDO1FBR1YsSUFBSSxDQUFDLFdBQVcsR0FBRyxXQUFXLENBQUM7UUFDL0IsSUFBSSxDQUFDLGNBQWMsR0FBRyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDM0QsSUFBSSxDQUFDLFFBQVEsR0FBRyxlQUFlLENBQzNCLElBQUksQ0FBQyxjQUFjLEVBQUUsSUFBSSxDQUFDLFdBQVcsRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7UUFDL0QsSUFBSSxDQUFDLGNBQWMsR0FBRyxjQUFjLENBQUM7UUFDckMsSUFBSSxDQUFDLFNBQVMsR0FBRyxVQUFVLElBQUksQ0FBQyxjQUFjLEVBQUUsQ0FBQztJQUNuRCxDQUFDO0lBRUQsV0FBVztRQUNULE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzNDLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRTNDLE1BQU0sR0FBRyxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDO1FBQzVELE1BQU0sR0FBRyxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDO1FBQzVELE1BQU0sV0FBVyxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLDZCQUE2QixDQUFDLENBQUM7WUFDL0IsNkJBQTZCLENBQUM7UUFFeEUsTUFBTSxRQUFRLEdBQUc7TUFDZixJQUFJLENBQUMsT0FBTyxDQUFDOzs7O29CQUlDLEdBQUc7b0JBQ0gsR0FBRzs7OztvQ0FJYSxNQUFNOzs7Ozs7c0NBTUosTUFBTTtzQkFDdEIsV0FBVzs7Ozs7O0lBTTdCLENBQUM7UUFDRCxPQUFPLFFBQVEsQ0FBQztJQUNsQixDQUFDO0NBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7Z2V0TWFpbkhlYWRlclN0cmluZyBhcyBtYWluLCBXZWJHUFVQcm9ncmFtfSBmcm9tICcuL3dlYmdwdV9wcm9ncmFtJztcbmltcG9ydCB7Y29tcHV0ZURpc3BhdGNoLCBmbGF0RGlzcGF0Y2hMYXlvdXR9IGZyb20gJy4vd2ViZ3B1X3V0aWwnO1xuXG5leHBvcnQgY2xhc3MgSW0yQ29sUHJvZ3JhbSBpbXBsZW1lbnRzIFdlYkdQVVByb2dyYW0ge1xuICB2YXJpYWJsZU5hbWVzID0gWyd4J107XG4gIHVuaWZvcm1zID1cbiAgICAgIGBwYWRzIDogdmVjMjxpMzI+LCBzdHJpZGVzIDogdmVjMjxpMzI+LCBkaWxhdGlvbnMgOiB2ZWMyPGkzMj4sIG91dFdpZHRoIDogaTMyLCBpdGVtc1BlckJsb2NrUm93IDogaTMyLFxuICAgICAgIGluQ2hhbm5lbHMgOiBpMzIsYDtcbiAgb3V0cHV0U2hhcGU6IG51bWJlcltdO1xuICBzaGFkZXJLZXk6IHN0cmluZztcbiAgZGlzcGF0Y2hMYXlvdXQ6IHt4OiBudW1iZXJbXX07XG4gIGRpc3BhdGNoOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl07XG4gIHdvcmtncm91cFNpemU6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXSA9IFs2NCwgMSwgMV07XG4gIGlzQ2hhbm5lbHNMYXN0OiBib29sZWFuO1xuICBzaXplID0gdHJ1ZTtcblxuICBjb25zdHJ1Y3RvcihvdXRwdXRTaGFwZTogbnVtYmVyW10sIGlzQ2hhbm5lbHNMYXN0OiBib29sZWFuKSB7XG4gICAgdGhpcy5vdXRwdXRTaGFwZSA9IG91dHB1dFNoYXBlO1xuICAgIHRoaXMuZGlzcGF0Y2hMYXlvdXQgPSBmbGF0RGlzcGF0Y2hMYXlvdXQodGhpcy5vdXRwdXRTaGFwZSk7XG4gICAgdGhpcy5kaXNwYXRjaCA9IGNvbXB1dGVEaXNwYXRjaChcbiAgICAgICAgdGhpcy5kaXNwYXRjaExheW91dCwgdGhpcy5vdXRwdXRTaGFwZSwgdGhpcy53b3JrZ3JvdXBTaXplKTtcbiAgICB0aGlzLmlzQ2hhbm5lbHNMYXN0ID0gaXNDaGFubmVsc0xhc3Q7XG4gICAgdGhpcy5zaGFkZXJLZXkgPSBgaW0yY29sXyR7dGhpcy5pc0NoYW5uZWxzTGFzdH1gO1xuICB9XG5cbiAgZ2V0VXNlckNvZGUoKTogc3RyaW5nIHtcbiAgICBjb25zdCByb3dEaW0gPSB0aGlzLmlzQ2hhbm5lbHNMYXN0ID8gMSA6IDI7XG4gICAgY29uc3QgY29sRGltID0gdGhpcy5pc0NoYW5uZWxzTGFzdCA/IDIgOiAzO1xuXG4gICAgY29uc3Qgcm93ID0gdGhpcy5pc0NoYW5uZWxzTGFzdCA/ICdjb29yZHNbMV0nIDogJ2Nvb3Jkc1syXSc7XG4gICAgY29uc3QgY29sID0gdGhpcy5pc0NoYW5uZWxzTGFzdCA/ICdjb29yZHNbMl0nIDogJ2Nvb3Jkc1sxXSc7XG4gICAgY29uc3QgZ2V0WFNuaXBwZXQgPSB0aGlzLmlzQ2hhbm5lbHNMYXN0ID8gJ2dldFgoYmF0Y2gsIHhSb3csIHhDb2wsIGNoKScgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdnZXRYKGJhdGNoLCBjaCwgeFJvdywgeENvbCknO1xuXG4gICAgY29uc3QgdXNlckNvZGUgPSBgXG4gICAgJHttYWluKCdpbmRleCcpfSB7XG4gICAgICBsZXQgY29vcmRzID0gZ2V0Q29vcmRzRnJvbUluZGV4KGluZGV4KTtcbiAgICAgIGlmKGluZGV4IDwgdW5pZm9ybXMuc2l6ZSkge1xuICAgICAgICBsZXQgYmF0Y2ggPSBjb29yZHNbMF07XG4gICAgICAgIGxldCByb3cgPSAke3Jvd307XG4gICAgICAgIGxldCBjb2wgPSAke2NvbH07XG4gICAgICAgIGxldCBvZmZzZXRZID0gKHJvdyAvIHVuaWZvcm1zLm91dFdpZHRoKSAqIHVuaWZvcm1zLnN0cmlkZXNbMF0gLSB1bmlmb3Jtcy5wYWRzWzBdO1xuICAgICAgICBsZXQgeFJvdyA9IG9mZnNldFkgKyB1bmlmb3Jtcy5kaWxhdGlvbnNbMF0gKiAoY29sIC8gdW5pZm9ybXMuaXRlbXNQZXJCbG9ja1Jvdyk7XG4gICAgICAgIHZhciB2YWx1ZSA9IDAuMDtcbiAgICAgICAgaWYoeFJvdyA8IHVuaWZvcm1zLnhTaGFwZVske3Jvd0RpbX1dICYmIHhSb3cgPj0gMCkge1xuICAgICAgICAgIGxldCBvZmZzZXRYID0gKHJvdyAlIHVuaWZvcm1zLm91dFdpZHRoKSAqIHVuaWZvcm1zLnN0cmlkZXNbMV0gLVxuICAgICAgICAgICAgICB1bmlmb3Jtcy5wYWRzWzFdO1xuICAgICAgICAgIGxldCB4Q29sID0gb2Zmc2V0WCArIHVuaWZvcm1zLmRpbGF0aW9uc1sxXSAqICgoY29sICVcbiAgICAgICAgICAgICAgdW5pZm9ybXMuaXRlbXNQZXJCbG9ja1JvdykgLyB1bmlmb3Jtcy5pbkNoYW5uZWxzKTtcbiAgICAgICAgICBsZXQgY2ggPSBjb2wgJSB1bmlmb3Jtcy5pbkNoYW5uZWxzO1xuICAgICAgICAgIGlmKHhDb2wgPCB1bmlmb3Jtcy54U2hhcGVbJHtjb2xEaW19XSAmJiB4Q29sID49IDApIHtcbiAgICAgICAgICAgIHZhbHVlID0gJHtnZXRYU25pcHBldH07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNldE91dHB1dEF0SW5kZXgoaW5kZXgsIHZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gICBgO1xuICAgIHJldHVybiB1c2VyQ29kZTtcbiAgfVxufVxuIl19","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { env } from '@tensorflow/tfjs-core';\nimport { Conv2DMMProgram } from '../conv2d_mm_webgpu';\nimport { Conv2DNaiveProgram } from '../conv2d_naive_webgpu';\nimport { Im2ColProgram } from '../im2col_webgpu';\nimport { batchMatMulImpl } from './BatchMatMul_impl';\nimport { reshape } from './Reshape';\n// conv2dByMatMul fuses height and width into one dimension to compute\n// batchMatMul, so bias and activation weights are also supposed to fuse the two\n// dimensions into one.\n//\n// This function computes the target shape for fusing height and width\n// dimensions. Returning null means the shape is already compatible.\nfunction getShapeForBatchMatMul(shape, isChannelsLast) {\n    const length = shape.length;\n    if (length >= 3) {\n        return isChannelsLast ?\n            [\n                ...shape.slice(0, -3) /* batch */,\n                shape[length - 3] * shape[length - 2] /* height * width */,\n                shape[length - 1] /* channel */\n            ] :\n            [\n                ...shape.slice(0, -3) /* batch */, shape[length - 3] /* channel */,\n                shape[length - 2] * shape[length - 1] /* height * width */\n            ];\n    }\n    else if (!isChannelsLast && length === 1 && shape[0] > 1) {\n        return [shape[0], 1];\n    }\n    else {\n        return null;\n    }\n}\n// For 1x1 kernels that iterate through every point in the input, convolution\n// can be expressed as matrix multiplication (without need for memory\n// remapping).\nfunction conv2dByMatMul({ x, filter, convInfo, backend, bias = null, preluActivationWeights = null, leakyreluAlpha = 0, activation = null }) {\n    const isChannelsLast = convInfo.dataFormat === 'channelsLast';\n    const transposeA = isChannelsLast ? false : true;\n    const transposeB = false;\n    const sameSize = isChannelsLast &&\n        convInfo.filterHeight === convInfo.inHeight &&\n        convInfo.filterWidth === convInfo.inWidth &&\n        convInfo.padInfo.type === 'VALID';\n    const intermediates = [];\n    let xReshaped;\n    let filterReshaped;\n    if (sameSize) {\n        const sharedDim = convInfo.inHeight * convInfo.inWidth * convInfo.inChannels;\n        xReshaped = reshape({\n            inputs: { x },\n            backend,\n            attrs: { shape: [1, convInfo.batchSize, sharedDim] }\n        });\n        filterReshaped = reshape({\n            inputs: { x: filter },\n            backend,\n            attrs: { shape: [1, sharedDim, convInfo.outChannels] }\n        });\n    }\n    else {\n        xReshaped = reshape({\n            inputs: { x },\n            backend,\n            attrs: {\n                shape: isChannelsLast ?\n                    [\n                        convInfo.batchSize, convInfo.inHeight * convInfo.inWidth,\n                        convInfo.inChannels\n                    ] :\n                    [\n                        convInfo.batchSize, convInfo.inChannels,\n                        convInfo.inHeight * convInfo.inWidth\n                    ]\n            }\n        });\n        filterReshaped = reshape({\n            inputs: { x: filter },\n            backend,\n            attrs: { shape: [1, convInfo.inChannels, convInfo.outChannels] }\n        });\n    }\n    intermediates.push(xReshaped);\n    intermediates.push(filterReshaped);\n    if (preluActivationWeights != null) {\n        const targetShape = getShapeForBatchMatMul(preluActivationWeights.shape, isChannelsLast);\n        if (targetShape != null) {\n            preluActivationWeights = reshape({\n                inputs: { x: preluActivationWeights },\n                backend,\n                attrs: { shape: targetShape }\n            });\n            intermediates.push(preluActivationWeights);\n        }\n    }\n    if (bias != null) {\n        const targetShape = getShapeForBatchMatMul(bias.shape, isChannelsLast);\n        if (targetShape != null) {\n            bias = reshape({ inputs: { x: bias }, backend, attrs: { shape: targetShape } });\n            intermediates.push(bias);\n        }\n    }\n    const result = batchMatMulImpl({\n        a: isChannelsLast ? xReshaped : filterReshaped,\n        b: isChannelsLast ? filterReshaped : xReshaped,\n        transposeA,\n        transposeB,\n        backend,\n        bias,\n        activation,\n        preluActivationWeights,\n        leakyreluAlpha\n    });\n    const out = reshape({ inputs: { x: result }, backend, attrs: { shape: convInfo.outShape } });\n    intermediates.push(result);\n    for (const i of intermediates) {\n        backend.disposeData(i.dataId);\n    }\n    return out;\n}\n// Implements the im2col algorithm as outlined in \"High Performance\n// Convolutional Neural Networks for Document Processing\" (Suvisoft, 2006)\nfunction conv2dWithIm2Col({ x, filter, convInfo, backend, bias = null, preluActivationWeights = null, leakyreluAlpha = 0, activation = null }) {\n    // Rearranges conv2d input so each block to be convolved over forms the\n    // row of a new matrix with shape [outHeight * outWidth,\n    // filterWidth * filterHeight * inChannels]. The filter is also rearranged so\n    // each output channel forms a col of a new matrix with shape [\n    // filterWidth * filterHeight * inChannels, outChannels]. The convolution is\n    // then computed by multiplying these matrices and reshaping the result.\n    const { filterWidth, filterHeight, inChannels, strideWidth, strideHeight, padInfo, outWidth, outHeight, dilationWidth, dilationHeight, dataFormat } = convInfo;\n    const isChannelsLast = dataFormat === 'channelsLast';\n    const sharedDim = filterWidth * filterHeight * inChannels;\n    const numCols = outHeight * outWidth;\n    const x2ColShape = isChannelsLast ? [convInfo.batchSize, numCols, sharedDim] :\n        [convInfo.batchSize, sharedDim, numCols];\n    const im2ColProgram = new Im2ColProgram(x2ColShape, isChannelsLast);\n    const dimensions = [\n        { type: 'int32', data: [padInfo.top, padInfo.left] },\n        { type: 'int32', data: [strideHeight, strideWidth] },\n        { type: 'int32', data: [dilationHeight, dilationWidth] },\n        { type: 'int32', data: [outWidth] },\n        { type: 'int32', data: [inChannels * filterWidth] },\n        { type: 'int32', data: [inChannels] }\n    ];\n    const x2Col = backend.runWebGPUProgram(im2ColProgram, [x], x.dtype, dimensions);\n    const intermediates = [];\n    intermediates.push(x2Col);\n    const filterReshaped = reshape({ inputs: { x: filter }, backend, attrs: { shape: [1, sharedDim, -1] } });\n    intermediates.push(filterReshaped);\n    if (preluActivationWeights != null) {\n        const targetShape = getShapeForBatchMatMul(preluActivationWeights.shape, isChannelsLast);\n        if (targetShape != null) {\n            preluActivationWeights = reshape({\n                inputs: { x: preluActivationWeights },\n                backend,\n                attrs: { shape: targetShape }\n            });\n            intermediates.push(preluActivationWeights);\n        }\n    }\n    if (bias != null) {\n        const targetShape = getShapeForBatchMatMul(bias.shape, isChannelsLast);\n        if (targetShape != null) {\n            bias = reshape({ inputs: { x: bias }, backend, attrs: { shape: targetShape } });\n            intermediates.push(bias);\n        }\n    }\n    const transposeA = isChannelsLast ? false : true;\n    const transposeB = false;\n    const result = batchMatMulImpl({\n        a: isChannelsLast ? x2Col : filterReshaped,\n        b: isChannelsLast ? filterReshaped : x2Col,\n        transposeA,\n        transposeB,\n        backend,\n        bias,\n        activation,\n        preluActivationWeights,\n        leakyreluAlpha\n    });\n    const out = reshape({ inputs: { x: result }, backend, attrs: { shape: convInfo.outShape } });\n    intermediates.push(result);\n    for (const i of intermediates) {\n        backend.disposeData(i.dataId);\n    }\n    return out;\n}\nexport function conv2DImpl({ x, filter, convInfo, backend, bias = null, preluActivationWeights = null, leakyreluAlpha = 0, activation = null }) {\n    const hasBias = bias != null;\n    const hasPreluActivationWeights = preluActivationWeights != null;\n    const isChannelsLast = convInfo.dataFormat === 'channelsLast';\n    const sameSize = isChannelsLast &&\n        convInfo.filterHeight === convInfo.inHeight &&\n        convInfo.filterWidth === convInfo.inWidth &&\n        convInfo.padInfo.type === 'VALID';\n    const useNaiveConv2d = env().getBool('WEBGPU_USE_NAIVE_CONV2D_DEBUG');\n    if (!useNaiveConv2d &&\n        (sameSize ||\n            (convInfo.filterHeight === 1 && convInfo.filterWidth === 1 &&\n                convInfo.dilationHeight === 1 && convInfo.dilationWidth === 1 &&\n                convInfo.strideHeight === 1 && convInfo.strideWidth === 1 &&\n                (convInfo.padInfo.type === 'SAME' ||\n                    convInfo.padInfo.type === 'VALID')))) {\n        return conv2dByMatMul({\n            x,\n            filter,\n            convInfo,\n            backend,\n            bias,\n            activation,\n            preluActivationWeights,\n            leakyreluAlpha\n        });\n    }\n    const thresholdFlagValue = env().getNumber('WEBGPU_THRESHOLD_TO_INCREASE_WORKGROUPS_FOR_MATMUL');\n    const thresholdToIncreaseWorkgroups = thresholdFlagValue > -1 ?\n        thresholdFlagValue :\n        backend.thresholdToIncreaseWorkgroups;\n    const workgroupsBy32x32 = convInfo.batchSize *\n        Math.ceil((convInfo.outHeight * convInfo.outWidth) / 32) *\n        Math.ceil(convInfo.outChannels / 32);\n    if (env().getBool('WEBGPU_CONV_SEPARATE_IM2COL_SHADER') ||\n        workgroupsBy32x32 <= thresholdToIncreaseWorkgroups) {\n        return conv2dWithIm2Col({\n            x,\n            filter,\n            convInfo,\n            backend,\n            bias,\n            preluActivationWeights,\n            leakyreluAlpha,\n            activation\n        });\n    }\n    let program;\n    const padInfo = [convInfo.padInfo.top, convInfo.padInfo.left];\n    const dimensions = [\n        { type: 'int32', data: [convInfo.filterHeight, convInfo.filterWidth] },\n        { type: 'int32', data: [...padInfo] },\n        { type: 'int32', data: [convInfo.strideHeight, convInfo.strideWidth] },\n        { type: 'int32', data: [convInfo.dilationHeight, convInfo.dilationWidth] }\n    ];\n    if (useNaiveConv2d) {\n        program = new Conv2DNaiveProgram(convInfo, hasBias, activation, hasPreluActivationWeights);\n    }\n    else {\n        const dimAOuter = isChannelsLast ? convInfo.outHeight * convInfo.outWidth :\n            convInfo.outChannels;\n        const dimBOuter = isChannelsLast ? convInfo.outChannels :\n            convInfo.outHeight * convInfo.outWidth;\n        const dimInner = convInfo.filterHeight * convInfo.filterWidth * convInfo.inChannels;\n        dimensions.push({ type: 'int32', data: [dimAOuter] }, { type: 'int32', data: [dimBOuter] }, { type: 'int32', data: [dimInner] });\n        // Experiments show that sequential access is more friendly for Intel GPUs.\n        const sequentialAccessByThreads = backend.adapterInfo.isIntel();\n        program = new Conv2DMMProgram(convInfo, dimAOuter, dimBOuter, dimInner, hasBias, activation, hasPreluActivationWeights, sequentialAccessByThreads);\n    }\n    const intermediates = [];\n    const inputVar = [x, filter];\n    if (hasBias) {\n        if (!isChannelsLast && bias.shape.length === 1) {\n            bias = reshape({ inputs: { x: bias }, backend, attrs: { shape: [bias.shape[0], 1, 1] } });\n            intermediates.push(bias);\n        }\n        inputVar.push(bias);\n    }\n    if (hasPreluActivationWeights) {\n        if (!isChannelsLast && preluActivationWeights.shape.length === 1) {\n            preluActivationWeights = reshape({\n                inputs: { x: preluActivationWeights },\n                backend,\n                attrs: { shape: [preluActivationWeights.shape[0], 1, 1] }\n            });\n            intermediates.push(preluActivationWeights);\n        }\n        inputVar.push(preluActivationWeights);\n    }\n    if (activation === 'leakyrelu') {\n        dimensions.push({ type: 'float32', data: [leakyreluAlpha] });\n        program.uniforms += ' alpha : f32,';\n    }\n    const out = backend.runWebGPUProgram(program, inputVar, x.dtype, dimensions);\n    for (const i of intermediates) {\n        backend.disposeData(i.dataId);\n    }\n    return out;\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ29udjJEX2ltcGwuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9rZXJuZWxzL0NvbnYyRF9pbXBsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sRUFBZSxHQUFHLEVBQWEsTUFBTSx1QkFBdUIsQ0FBQztBQUdwRSxPQUFPLEVBQUMsZUFBZSxFQUFDLE1BQU0scUJBQXFCLENBQUM7QUFDcEQsT0FBTyxFQUFDLGtCQUFrQixFQUFDLE1BQU0sd0JBQXdCLENBQUM7QUFDMUQsT0FBTyxFQUFDLGFBQWEsRUFBQyxNQUFNLGtCQUFrQixDQUFDO0FBRy9DLE9BQU8sRUFBQyxlQUFlLEVBQUMsTUFBTSxvQkFBb0IsQ0FBQztBQUNuRCxPQUFPLEVBQUMsT0FBTyxFQUFDLE1BQU0sV0FBVyxDQUFDO0FBYWxDLHNFQUFzRTtBQUN0RSxnRkFBZ0Y7QUFDaEYsdUJBQXVCO0FBQ3ZCLEVBQUU7QUFDRixzRUFBc0U7QUFDdEUsb0VBQW9FO0FBQ3BFLFNBQVMsc0JBQXNCLENBQzNCLEtBQWUsRUFBRSxjQUF1QjtJQUMxQyxNQUFNLE1BQU0sR0FBRyxLQUFLLENBQUMsTUFBTSxDQUFDO0lBQzVCLElBQUksTUFBTSxJQUFJLENBQUMsRUFBRTtRQUNmLE9BQU8sY0FBYyxDQUFDLENBQUM7WUFDbkI7Z0JBQ0UsR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLFdBQVc7Z0JBQ2pDLEtBQUssQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxvQkFBb0I7Z0JBQzFELEtBQUssQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsYUFBYTthQUNoQyxDQUFDLENBQUM7WUFDSDtnQkFDRSxHQUFHLEtBQUssQ0FBQyxLQUFLLENB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QUcsR0FBRyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLFFBQVEsRUFBRSxDQUFDLENBQUMsS0FBSyxFQUFFLFVBQVUsQ0FBQyxDQUFDO0lBQzdFLEtBQUssTUFBTSxDQUFDLElBQUksYUFBYSxFQUFFO1FBQzdCLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0tBQy9CO0lBQ0QsT0FBTyxHQUFHLENBQUM7QUFDYixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge2JhY2tlbmRfdXRpbCwgZW52LCBUZW5zb3JJbmZvfSBmcm9tICdAdGVuc29yZmxvdy90ZmpzLWNvcmUnO1xuXG5pbXBvcnQge1dlYkdQVUJhY2tlbmR9IGZyb20gJy4uL2JhY2tlbmRfd2ViZ3B1JztcbmltcG9ydCB7Q29udjJETU1Qcm9ncmFtfSBmcm9tICcuLi9jb252MmRfbW1fd2ViZ3B1JztcbmltcG9ydCB7Q29udjJETmFpdmVQcm9ncmFtfSBmcm9tICcuLi9jb252MmRfbmFpdmVfd2ViZ3B1JztcbmltcG9ydCB7SW0yQ29sUHJvZ3JhbX0gZnJvbSAnLi4vaW0yY29sX3dlYmdwdSc7XG5pbXBvcnQge1dlYkdQVVByb2dyYW19IGZyb20gJy4uL3dlYmdwdV9wcm9ncmFtJztcblxuaW1wb3J0IHtiYXRjaE1hdE11bEltcGx9IGZyb20gJy4vQmF0Y2hNYXRNdWxfaW1wbCc7XG5pbXBvcnQge3Jlc2hhcGV9IGZyb20gJy4vUmVzaGFwZSc7XG5cbnR5cGUgQ29udjJEQ29uZmlnID0ge1xuICB4OiBUZW5zb3JJbmZvLFxuICBmaWx0ZXI6IFRlbnNvckluZm8sXG4gIGNvbnZJbmZvOiBiYWNrZW5kX3V0aWwuQ29udjJESW5mbyxcbiAgYmFja2VuZDogV2ViR1BVQmFja2VuZCxcbiAgYmlhcz86IFRlbnNvckluZm8sXG4gIHByZWx1QWN0aXZhdGlvbldlaWdodHM/OiBUZW5zb3JJbmZvLFxuICBsZWFreXJlbHVBbHBoYT86IG51bWJlcixcbiAgYWN0aXZhdGlvbj86IGJhY2tlbmRfdXRpbC5BY3RpdmF0aW9uXG59O1xuXG4vLyBjb252MmRCeU1hdE11bCBmdXNlcyBoZWlnaHQgYW5kIHdpZHRoIGludG8gb25lIGRpbWVuc2lvbiB0byBjb21wdXRlXG4vLyBiYXRjaE1hdE11bCwgc28gYmlhcyBhbmQgYWN0aXZhdGlvbiB3ZWlnaHRzIGFyZSBhbHNvIHN1cHBvc2VkIHRvIGZ1c2UgdGhlIHR3b1xuLy8gZGltZW5zaW9ucyBpbnRvIG9uZS5cbi8vXG4vLyBUaGlzIGZ1bmN0aW9uIGNvbXB1dGVzIHRoZSB0YXJnZXQgc2hhcGUgZm9yIGZ1c2luZyBoZWlnaHQgYW5kIHdpZHRoXG4vLyBkaW1lbnNpb25zLiBSZXR1cm5pbmcgbnVsbCBtZWFucyB0aGUgc2hhcGUgaXMgYWxyZWFkeSBjb21wYXRpYmxlLlxuZnVuY3Rpb24gZ2V0U2hhcGVGb3JCYXRjaE1hdE11bChcbiAgICBzaGFwZTogbnVtYmVyW10sIGlzQ2hhbm5lbHNMYXN0OiBib29sZWFuKTogbnVtYmVyW10ge1xuICBjb25zdCBsZW5ndGggPSBzaGFwZS5sZW5ndGg7XG4gIGlmIChsZW5ndGggPj0gMykge1xuICAgIHJldHVybiBpc0NoYW5uZWxzTGFzdCA/XG4gICAgICAgIFtcbiAgICAgICAgICAuLi5zaGFwZS5zbGljZSgwLCAtMykgLyogYmF0Y2ggKi8sXG4gICAgICAgICAgc2hhcGVbbGVuZ3RoIC0gM10gKiBzaGFwZVtsZW5ndGggLSAyXSAvKiBoZWlnaHQgKiB3aWR0aCAqLyxcbiAgICAgICAgICBzaGFwZVtsZW5ndGggLSAxXSAvKiBjaGFubmVsICovXG4gICAgICAgIF0gOlxuICAgICAgICBbXG4gICAgICAgICAgLi4uc2hhcGUuc2xpY2UoMCwgLTMpIC8qIGJhdGNoICovLCBzaGFwZVtsZW5ndGggLSAzXSAvKiBjaGFubmVsICovLFxuICAgICAgICAgIHNoYXBlW2xlbmd0aCAtIDJdICogc2hhcGVbbGVuZ3RoIC0gMV0gLyogaGVpZ2h0ICogd2lkdGggKi9cbiAgICAgICAgXTtcbiAgfSBlbHNlIGlmICghaXNDaGFubmVsc0xhc3QgJiYgbGVuZ3RoID09PSAxICYmIHNoYXBlWzBdID4gMSkge1xuICAgIHJldHVybiBbc2hhcGVbMF0sIDFdO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8vIEZvciAxeDEga2VybmVscyB0aGF0IGl0ZXJhdGUgdGhyb3VnaCBldmVyeSBwb2ludCBpbiB0aGUgaW5wdXQsIGNvbnZvbHV0aW9uXG4vLyBjYW4gYmUgZXhwcmVzc2VkIGFzIG1hdHJpeCBtdWx0aXBsaWNhdGlvbiAod2l0aG91dCBuZWVkIGZvciBtZW1vcnlcbi8vIHJlbWFwcGluZykuXG5mdW5jdGlvbiBjb252MmRCeU1hdE11bCh7XG4gIHgsXG4gIGZpbHRlcixcbiAgY29udkluZm8sXG4gIGJhY2tlbmQsXG4gIGJpYXMgPSBudWxsLFxuICBwcmVsdUFjdGl2YXRpb25XZWlnaHRzID0gbnVsbCxcbiAgbGVha3lyZWx1QWxwaGEgPSAwLFxuICBhY3RpdmF0aW9uID0gbnVsbFxufTogQ29udjJEQ29uZmlnKSB7XG4gIGNvbnN0IGlzQ2hhbm5lbHNMYXN0ID0gY29udkluZm8uZGF0YUZvcm1hdCA9PT0gJ2NoYW5uZWxzTGFzdCc7XG4gIGNvbnN0IHRyYW5zcG9zZUEgPSBpc0NoYW5uZWxzTGFzdCA/IGZhbHNlIDogdHJ1ZTtcbiAgY29uc3QgdHJhbnNwb3NlQiA9IGZhbHNlO1xuXG4gIGNvbnN0IHNhbWVTaXplID0gaXNDaGFubmVsc0xhc3QgJiZcbiAgICAgIGNvbnZJbmZvLmZpbHRlckhlaWdodCA9PT0gY29udkluZm8uaW5IZWlnaHQgJiZcbiAgICAgIGNvbnZJbmZvLmZpbHRlcldpZHRoID09PSBjb252SW5mby5pbldpZHRoICYmXG4gICAgICBjb252SW5mby5wYWRJbmZvLnR5cGUgPT09ICdWQUxJRCc7XG4gIGNvbnN0IGludGVybWVkaWF0ZXM6IFRlbnNvckluZm9bXSA9IFtdO1xuICBsZXQgeFJlc2hhcGVkO1xuICBsZXQgZmlsdGVyUmVzaGFwZWQ7XG5cbiAgaWYgKHNhbWVTaXplKSB7XG4gICAgY29uc3Qgc2hhcmVkRGltID1cbiAgICAgICAgY29udkluZm8uaW5IZWlnaHQgKiBjb252SW5mby5pbldpZHRoICogY29udkluZm8uaW5DaGFubmVscztcbiAgICB4UmVzaGFwZWQgPSByZXNoYXBlKHtcbiAgICAgIGlucHV0czoge3h9LFxuICAgICAgYmFja2VuZCxcbiAgICAgIGF0dHJzOiB7c2hhcGU6IFsxLCBjb252SW5mby5iYXRjaFNpemUsIHNoYXJlZERpbV19XG4gICAgfSk7XG4gICAgZmlsdGVyUmVzaGFwZWQgPSByZXNoYXBlKHtcbiAgICAgIGlucHV0czoge3g6IGZpbHRlcn0sXG4gICAgICBiYWNrZW5kLFxuICAgICAgYXR0cnM6IHtzaGFwZTogWzEsIHNoYXJlZERpbSwgY29udkluZm8ub3V0Q2hhbm5lbHNdfVxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIHhSZXNoYXBlZCA9IHJlc2hhcGUoe1xuICAgICAgaW5wdXRzOiB7eH0sXG4gICAgICBiYWNrZW5kLFxuICAgICAgYXR0cnM6IHtcbiAgICAgICAgc2hhcGU6IGlzQ2hhbm5lbHNMYXN0ID9cbiAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgY29udkluZm8uYmF0Y2hTaXplLCBjb252SW5mby5pbkhlaWdodCAqIGNvbnZJbmZvLmluV2lkdGgsXG4gICAgICAgICAgICAgIGNvbnZJbmZvLmluQ2hhbm5lbHNcbiAgICAgICAgICAgIF0gOlxuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICBjb252SW5mby5iYXRjaFNpemUsIGNvbnZJbmZvLmluQ2hhbm5lbHMsXG4gICAgICAgICAgICAgIGNvbnZJbmZvLmluSGVpZ2h0ICogY29udkluZm8uaW5XaWR0aFxuICAgICAgICAgICAgXVxuICAgICAgfVxuICAgIH0pO1xuICAgIGZpbHRlclJlc2hhcGVkID0gcmVzaGFwZSh7XG4gICAgICBpbnB1dHM6IHt4OiBmaWx0ZXJ9LFxuICAgICAgYmFja2VuZCxcbiAgICAgIGF0dHJzOiB7c2hhcGU6IFsxLCBjb252SW5mby5pbkNoYW5uZWxzLCBjb252SW5mby5vdXRDaGFubmVsc119XG4gICAgfSk7XG4gIH1cbiAgaW50ZXJtZWRpYXRlcy5wdXNoKHhSZXNoYXBlZCk7XG4gIGludGVybWVkaWF0ZXMucHVzaChmaWx0ZXJSZXNoYXBlZCk7XG5cbiAgaWYgKHByZWx1QWN0aXZhdGlvbldlaWdodHMgIT0gbnVsbCkge1xuICAgIGNvbnN0IHRhcmdldFNoYXBlID1cbiAgICAgICAgZ2V0U2hhcGVGb3JCYXRjaE1hdE11bChwcmVsdUFjdGl2YXRpb25XZWlnaHRzLnNoYXBlLCBpc0NoYW5uZWxzTGFzdCk7XG4gICAgaWYgKHRhcmdldFNoYXBlICE9IG51bGwpIHtcbiAgICAgIHByZWx1QWN0aXZhdGlvbldlaWdodHMgPSByZXNoYXBlKHtcbiAgICAgICAgaW5wdXRzOiB7eDogcHJlbHVBY3RpdmF0aW9uV2VpZ2h0c30sXG4gICAgICAgIGJhY2tlbmQsXG4gICAgICAgIGF0dHJzOiB7c2hhcGU6IHRhcmdldFNoYXBlfVxuICAgICAgfSk7XG4gICAgICBpbnRlcm1lZGlhdGVzLnB1c2gocHJlbHVBY3RpdmF0aW9uV2VpZ2h0cyk7XG4gICAgfVxuICB9XG5cbiAgaWYgKGJpYXMgIT0gbnVsbCkge1xuICAgIGNvbnN0IHRhcmdldFNoYXBlID0gZ2V0U2hhcGVGb3JCYXRjaE1hdE11bChiaWFzLnNoYXBlLCBpc0NoYW5uZWxzTGFzdCk7XG4gICAgaWYgKHRhcmdldFNoYXBlICE9IG51bGwpIHtcbiAgICAgIGJpYXMgPSByZXNoYXBlKHtpbnB1dHM6IHt4OiBiaWFzfSwgYmFja2VuZCwgYXR0cnM6IHtzaGFwZTogdGFyZ2V0U2hhcGV9fSk7XG4gICAgICBpbnRlcm1lZGlhdGVzLnB1c2goYmlhcyk7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgcmVzdWx0ID0gYmF0Y2hNYXRNdWxJbXBsKHtcbiAgICBhOiBpc0NoYW5uZWxzTGFzdCA/IHhSZXNoYXBlZCA6IGZpbHRlclJlc2hhcGVkLFxuICAgIGI6IGlzQ2hhbm5lbHNMYXN0ID8gZmlsdGVyUmVzaGFwZWQgOiB4UmVzaGFwZWQsXG4gICAgdHJhbnNwb3NlQSxcbiAgICB0cmFuc3Bvc2VCLFxuICAgIGJhY2tlbmQsXG4gICAgYmlhcyxcbiAgICBhY3RpdmF0aW9uLFxuICAgIHByZWx1QWN0aXZhdGlvbldlaWdodHMsXG4gICAgbGVha3lyZWx1QWxwaGFcbiAgfSk7XG4gIGNvbnN0IG91dCA9IHJlc2hhcGUoXG4gICAgICB7aW5wdXRzOiB7eDogcmVzdWx0fSwgYmFja2VuZCwgYXR0cnM6IHtzaGFwZTogY29udkluZm8ub3V0U2hhcGV9fSk7XG4gIGludGVybWVkaWF0ZXMucHVzaChyZXN1bHQpO1xuXG4gIGZvciAoY29uc3QgaSBvZiBpbnRlcm1lZGlhdGVzKSB7XG4gICAgYmFja2VuZC5kaXNwb3NlRGF0YShpLmRhdGFJZCk7XG4gIH1cblxuICByZXR1cm4gb3V0O1xufVxuXG4vLyBJbXBsZW1lbnRzIHRoZSBpbTJjb2wgYWxnb3JpdGhtIGFzIG91dGxpbmVkIGluIFwiSGlnaCBQZXJmb3JtYW5jZVxuLy8gQ29udm9sdXRpb25hbCBOZXVyYWwgTmV0d29ya3MgZm9yIERvY3VtZW50IFByb2Nlc3NpbmdcIiAoU3V2aXNvZnQsIDIwMDYpXG5mdW5jdGlvbiBjb252MmRXaXRoSW0yQ29sKHtcbiAgeCxcbiAgZmlsdGVyLFxuICBjb252SW5mbyxcbiAgYmFja2VuZCxcbiAgYmlhcyA9IG51bGwsXG4gIHByZWx1QWN0aXZhdGlvbldlaWdodHMgPSBudWxsLFxuICBsZWFreXJlbHVBbHBoYSA9IDAsXG4gIGFjdGl2YXRpb24gPSBudWxsXG59OiBDb252MkRDb25maWcpIHtcbiAgLy8gUmVhcnJhbmdlcyBjb252MmQgaW5wdXQgc28gZWFjaCBibG9jayB0byBiZSBjb252b2x2ZWQgb3ZlciBmb3JtcyB0aGVcbiAgLy8gcm93IG9mIGEgbmV3IG1hdHJpeCB3aXRoIHNoYXBlIFtvdXRIZWlnaHQgKiBvdXRXaWR0aCxcbiAgLy8gZmlsdGVyV2lkdGggKiBmaWx0ZXJIZWlnaHQgKiBpbkNoYW5uZWxzXS4gVGhlIGZpbHRlciBpcyBhbHNvIHJlYXJyYW5nZWQgc29cbiAgLy8gZWFjaCBvdXRwdXQgY2hhbm5lbCBmb3JtcyBhIGNvbCBvZiBhIG5ldyBtYXRyaXggd2l0aCBzaGFwZSBbXG4gIC8vIGZpbHRlcldpZHRoICogZmlsdGVySGVpZ2h0ICogaW5DaGFubmVscywgb3V0Q2hhbm5lbHNdLiBUaGUgY29udm9sdXRpb24gaXNcbiAgLy8gdGhlbiBjb21wdXRlZCBieSBtdWx0aXBseWluZyB0aGVzZSBtYXRyaWNlcyBhbmQgcmVzaGFwaW5nIHRoZSByZXN1bHQuXG4gIGNvbnN0IHtcbiAgICBmaWx0ZXJXaWR0aCxcbiAgICBmaWx0ZXJIZWlnaHQsXG4gICAgaW5DaGFubmVscyxcbiAgICBzdHJpZGVXaWR0aCxcbiAgICBzdHJpZGVIZWlnaHQsXG4gICAgcGFkSW5mbyxcbiAgICBvdXRXaWR0aCxcbiAgICBvdXRIZWlnaHQsXG4gICAgZGlsYXRpb25XaWR0aCxcbiAgICBkaWxhdGlvbkhlaWdodCxcbiAgICBkYXRhRm9ybWF0XG4gIH0gPSBjb252SW5mbztcblxuICBjb25zdCBpc0NoYW5uZWxzTGFzdCA9IGRhdGFGb3JtYXQgPT09ICdjaGFubmVsc0xhc3QnO1xuXG4gIGNvbnN0IHNoYXJlZERpbSA9IGZpbHRlcldpZHRoICogZmlsdGVySGVpZ2h0ICogaW5DaGFubmVscztcbiAgY29uc3QgbnVtQ29scyA9IG91dEhlaWdodCAqIG91dFdpZHRoO1xuICBjb25zdCB4MkNvbFNoYXBlID0gaXNDaGFubmVsc0xhc3QgPyBbY29udkluZm8uYmF0Y2hTaXplLCBudW1Db2xzLCBzaGFyZWREaW1dIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW2NvbnZJbmZvLmJhdGNoU2l6ZSwgc2hhcmVkRGltLCBudW1Db2xzXTtcblxuICBjb25zdCBpbTJDb2xQcm9ncmFtID0gbmV3IEltMkNvbFByb2dyYW0oeDJDb2xTaGFwZSwgaXNDaGFubmVsc0xhc3QpO1xuICBjb25zdCBkaW1lbnNpb25zID0gW1xuICAgIHt0eXBlOiAnaW50MzInLCBkYXRhOiBbcGFkSW5mby50b3AsIHBhZEluZm8ubGVmdF19LCAgICAgIC8vIFBhZGRpbmcuXG4gICAge3R5cGU6ICdpbnQzMicsIGRhdGE6IFtzdHJpZGVIZWlnaHQsIHN0cmlkZVdpZHRoXX0sICAgICAgLy8gU3RyaWRlLlxuICAgIHt0eXBlOiAnaW50MzInLCBkYXRhOiBbZGlsYXRpb25IZWlnaHQsIGRpbGF0aW9uV2lkdGhdfSwgIC8vIERpbGF0aW9uLlxuICAgIHt0eXBlOiAnaW50MzInLCBkYXRhOiBbb3V0V2lkdGhdfSxcbiAgICB7dHlwZTogJ2ludDMyJywgZGF0YTogW2luQ2hhbm5lbHMgKiBmaWx0ZXJXaWR0aF19LCAgLy8gaXRlbXNQZXJCbG9ja1Jvdy5cbiAgICB7dHlwZTogJ2ludDMyJywgZGF0YTogW2luQ2hhbm5lbHNdfVxuICBdO1xuICBjb25zdCB4MkNvbCA9XG4gICAgICBiYWNrZW5kLnJ1bldlYkdQVVByb2dyYW0oaW0yQ29sUHJvZ3JhbSwgW3hdLCB4LmR0eXBlLCBkaW1lbnNpb25zKTtcblxuICBjb25zdCBpbnRlcm1lZGlhdGVzOiBUZW5zb3JJbmZvW10gPSBbXTtcbiAgaW50ZXJtZWRpYXRlcy5wdXNoKHgyQ29sKTtcblxuICBjb25zdCBmaWx0ZXJSZXNoYXBlZCA9IHJlc2hhcGUoXG4gICAgICB7aW5wdXRzOiB7eDogZmlsdGVyfSwgYmFja2VuZCwgYXR0cnM6IHtzaGFwZTogWzEsIHNoYXJlZERpbSwgLTFdfX0pO1xuICBpbnRlcm1lZGlhdGVzLnB1c2goZmlsdGVyUmVzaGFwZWQpO1xuXG4gIGlmIChwcmVsdUFjdGl2YXRpb25XZWlnaHRzICE9IG51bGwpIHtcbiAgICBjb25zdCB0YXJnZXRTaGFwZSA9XG4gICAgICAgIGdldFNoYXBlRm9yQmF0Y2hNYXRNdWwocHJlbHVBY3RpdmF0aW9uV2VpZ2h0cy5zaGFwZSwgaXNDaGFubmVsc0xhc3QpO1xuICAgIGlmICh0YXJnZXRTaGFwZSAhPSBudWxsKSB7XG4gICAgICBwcmVsdUFjdGl2YXRpb25XZWlnaHRzID0gcmVzaGFwZSh7XG4gICAgICAgIGlucHV0czoge3g6IHByZWx1QWN0aXZhdGlvbldlaWdodHN9LFxuICAgICAgICBiYWNrZW5kLFxuICAgICAgICBhdHRyczoge3NoYXBlOiB0YXJnZXRTaGFwZX1cbiAgICAgIH0pO1xuICAgICAgaW50ZXJtZWRpYXRlcy5wdXNoKHByZWx1QWN0aXZhdGlvbldlaWdodHMpO1xuICAgIH1cbiAgfVxuXG4gIGlmIChiaWFzICE9IG51bGwpIHtcbiAgICBjb25zdCB0YXJnZXRTaGFwZSA9IGdldFNoYXBlRm9yQmF0Y2hNYXRNdWwoYmlhcy5zaGFwZSwgaXNDaGFubmVsc0xhc3QpO1xuICAgIGlmICh0YXJnZXRTaGFwZSAhPSBudWxsKSB7XG4gICAgICBiaWFzID0gcmVzaGFwZSh7aW5wdXRzOiB7eDogYmlhc30sIGJhY2tlbmQsIGF0dHJzOiB7c2hhcGU6IHRhcmdldFNoYXBlfX0pO1xuICAgICAgaW50ZXJtZWRpYXRlcy5wdXNoKGJpYXMpO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IHRyYW5zcG9zZUEgPSBpc0NoYW5uZWxzTGFzdCA/IGZhbHNlIDogdHJ1ZTtcbiAgY29uc3QgdHJhbnNwb3NlQiA9IGZhbHNlO1xuICBjb25zdCByZXN1bHQgPSBiYXRjaE1hdE11bEltcGwoe1xuICAgIGE6IGlzQ2hhbm5lbHNMYXN0ID8geDJDb2wgOiBmaWx0ZXJSZXNoYXBlZCxcbiAgICBiOiBpc0NoYW5uZWxzTGFzdCA/IGZpbHRlclJlc2hhcGVkIDogeDJDb2wsXG4gICAgdHJhbnNwb3NlQSxcbiAgICB0cmFuc3Bvc2VCLFxuICAgIGJhY2tlbmQsXG4gICAgYmlhcyxcbiAgICBhY3RpdmF0aW9uLFxuICAgIHByZWx1QWN0aXZhdGlvbldlaWdodHMsXG4gICAgbGVha3lyZWx1QWxwaGFcbiAgfSk7XG4gIGNvbnN0IG91dCA9IHJlc2hhcGUoXG4gICAgICB7aW5wdXRzOiB7eDogcmVzdWx0fSwgYmFja2VuZCwgYXR0cnM6IHtzaGFwZTogY29udkluZm8ub3V0U2hhcGV9fSk7XG4gIGludGVybWVkaWF0ZXMucHVzaChyZXN1bHQpO1xuICBmb3IgKGNvbnN0IGkgb2YgaW50ZXJtZWRpYXRlcykge1xuICAgIGJhY2tlbmQuZGlzcG9zZURhdGEoaS5kYXRhSWQpO1xuICB9XG5cbiAgcmV0dXJuIG91dDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbnYyREltcGwoe1xuICB4LFxuICBmaWx0ZXIsXG4gIGNvbnZJbmZvLFxuICBiYWNrZW5kLFxuICBiaWFzID0gbnVsbCxcbiAgcHJlbHVBY3RpdmF0aW9uV2VpZ2h0cyA9IG51bGwsXG4gIGxlYWt5cmVsdUFscGhhID0gMCxcbiAgYWN0aXZhdGlvbiA9IG51bGxcbn06IENvbnYyRENvbmZpZykge1xuICBjb25zdCBoYXNCaWFzID0gYmlhcyAhPSBudWxsO1xuICBjb25zdCBoYXNQcmVsdUFjdGl2YXRpb25XZWlnaHRzID0gcHJlbHVBY3RpdmF0aW9uV2VpZ2h0cyAhPSBudWxsO1xuICBjb25zdCBpc0NoYW5uZWxzTGFzdCA9IGNvbnZJbmZvLmRhdGFGb3JtYXQgPT09ICdjaGFubmVsc0xhc3QnO1xuICBjb25zdCBzYW1lU2l6ZSA9IGlzQ2hhbm5lbHNMYXN0ICYmXG4gICAgICBjb252SW5mby5maWx0ZXJIZWlnaHQgPT09IGNvbnZJbmZvLmluSGVpZ2h0ICYmXG4gICAgICBjb252SW5mby5maWx0ZXJXaWR0aCA9PT0gY29udkluZm8uaW5XaWR0aCAmJlxuICAgICAgY29udkluZm8ucGFkSW5mby50eXBlID09PSAnVkFMSUQnO1xuICBjb25zdCB1c2VOYWl2ZUNvbnYyZCA9IGVudigpLmdldEJvb2woJ1dFQkdQVV9VU0VfTkFJVkVfQ09OVjJEX0RFQlVHJyk7XG5cbiAgaWYgKCF1c2VOYWl2ZUNvbnYyZCAmJlxuICAgICAgKHNhbWVTaXplIHx8XG4gICAgICAgKGNvbnZJbmZvLmZpbHRlckhlaWdodCA9PT0gMSAmJiBjb252SW5mby5maWx0ZXJXaWR0aCA9PT0gMSAmJlxuICAgICAgICBjb252SW5mby5kaWxhdGlvbkhlaWdodCA9PT0gMSAmJiBjb252SW5mby5kaWxhdGlvbldpZHRoID09PSAxICYmXG4gICAgICAgIGNvbnZJbmZvLnN0cmlkZUhlaWdodCA9PT0gMSAmJiBjb252SW5mby5zdHJpZGVXaWR0aCA9PT0gMSAmJlxuICAgICAgICAoY29udkluZm8ucGFkSW5mby50eXBlID09PSAnU0FNRScgfHxcbiAgICAgICAgIGNvbnZJbmZvLnBhZEluZm8udHlwZSA9PT0gJ1ZBTElEJykpKSkge1xuICAgIHJldHVybiBjb252MmRCeU1hdE11bCh7XG4gICAgICB4LFxuICAgICAgZmlsdGVyLFxuICAgICAgY29udkluZm8sXG4gICAgICBiYWNrZW5kLFxuICAgICAgYmlhcyxcbiAgICAgIGFjdGl2YXRpb24sXG4gICAgICBwcmVsdUFjdGl2YXRpb25XZWlnaHRzLFxuICAgICAgbGVha3lyZWx1QWxwaGFcbiAgICB9KTtcbiAgfVxuXG4gIGNvbnN0IHRocmVzaG9sZEZsYWdWYWx1ZSA9XG4gICAgICBlbnYoKS5nZXROdW1iZXIoJ1dFQkdQVV9USFJFU0hPTERfVE9fSU5DUkVBU0VfV09SS0dST1VQU19GT1JfTUFUTVVMJyk7XG4gIGNvbnN0IHRocmVzaG9sZFRvSW5jcmVhc2VXb3JrZ3JvdXBzID0gdGhyZXNob2xkRmxhZ1ZhbHVlID4gLTEgP1xuICAgICAgdGhyZXNob2xkRmxhZ1ZhbHVlIDpcbiAgICAgIGJhY2tlbmQudGhyZXNob2xkVG9JbmNyZWFzZVdvcmtncm91cHM7XG4gIGNvbnN0IHdvcmtncm91cHNCeTMyeDMyID0gY29udkluZm8uYmF0Y2hTaXplICpcbiAgICAgIE1hdGguY2VpbCgoY29udkluZm8ub3V0SGVpZ2h0ICogY29udkluZm8ub3V0V2lkdGgpIC8gMzIpICpcbiAgICAgIE1hdGguY2VpbChjb252SW5mby5vdXRDaGFubmVscyAvIDMyKTtcbiAgaWYgKGVudigpLmdldEJvb2woJ1dFQkdQVV9DT05WX1NFUEFSQVRFX0lNMkNPTF9TSEFERVInKSB8fFxuICAgICAgd29ya2dyb3Vwc0J5MzJ4MzIgPD0gdGhyZXNob2xkVG9JbmNyZWFzZVdvcmtncm91cHMpIHtcbiAgICByZXR1cm4gY29udjJkV2l0aEltMkNvbCh7XG4gICAgICB4LFxuICAgICAgZmlsdGVyLFxuICAgICAgY29udkluZm8sXG4gICAgICBiYWNrZW5kLFxuICAgICAgYmlhcyxcbiAgICAgIHByZWx1QWN0aXZhdGlvbldlaWdodHMsXG4gICAgICBsZWFreXJlbHVBbHBoYSxcbiAgICAgIGFjdGl2YXRpb25cbiAgICB9KTtcbiAgfVxuXG4gIGxldCBwcm9ncmFtOiBXZWJHUFVQcm9ncmFtO1xuICBjb25zdCBwYWRJbmZvID0gW2NvbnZJbmZvLnBhZEluZm8udG9wLCBjb252SW5mby5wYWRJbmZvLmxlZnRdO1xuICBjb25zdCBkaW1lbnNpb25zID0gW1xuICAgIHt0eXBlOiAnaW50MzInLCBkYXRhOiBbY29udkluZm8uZmlsdGVySGVpZ2h0LCBjb252SW5mby5maWx0ZXJXaWR0aF19LFxuICAgIHt0eXBlOiAnaW50MzInLCBkYXRhOiBbLi4ucGFkSW5mb119LFxuICAgIHt0eXBlOiAnaW50MzInLCBkYXRhOiBbY29udkluZm8uc3RyaWRlSGVpZ2h0LCBjb252SW5mby5zdHJpZGVXaWR0aF19LFxuICAgIHt0eXBlOiAnaW50MzInLCBkYXRhOiBbY29udkluZm8uZGlsYXRpb25IZWlnaHQsIGNvbnZJbmZvLmRpbGF0aW9uV2lkdGhdfVxuICBdO1xuICBpZiAodXNlTmFpdmVDb252MmQpIHtcbiAgICBwcm9ncmFtID0gbmV3IENvbnYyRE5haXZlUHJvZ3JhbShcbiAgICAgICAgY29udkluZm8sIGhhc0JpYXMsIGFjdGl2YXRpb24sIGhhc1ByZWx1QWN0aXZhdGlvbldlaWdodHMpO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IGRpbUFPdXRlciA9IGlzQ2hhbm5lbHNMYXN0ID8gY29udkluZm8ub3V0SGVpZ2h0ICogY29udkluZm8ub3V0V2lkdGggOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udkluZm8ub3V0Q2hhbm5lbHM7XG4gICAgY29uc3QgZGltQk91dGVyID0gaXNDaGFubmVsc0xhc3QgPyBjb252SW5mby5vdXRDaGFubmVscyA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb252SW5mby5vdXRIZWlnaHQgKiBjb252SW5mby5vdXRXaWR0aDtcbiAgICBjb25zdCBkaW1Jbm5lciA9XG4gICAgICAgIGNvbnZJbmZvLmZpbHRlckhlaWdodCAqIGNvbnZJbmZvLmZpbHRlcldpZHRoICogY29udkluZm8uaW5DaGFubmVscztcbiAgICBkaW1lbnNpb25zLnB1c2goXG4gICAgICAgIHt0eXBlOiAnaW50MzInLCBkYXRhOiBbZGltQU91dGVyXX0sIHt0eXBlOiAnaW50MzInLCBkYXRhOiBbZGltQk91dGVyXX0sXG4gICAgICAgIHt0eXBlOiAnaW50MzInLCBkYXRhOiBbZGltSW5uZXJdfSk7XG5cbiAgICAvLyBFeHBlcmltZW50cyBzaG93IHRoYXQgc2VxdWVudGlhbCBhY2Nlc3MgaXMgbW9yZSBmcmllbmRseSBmb3IgSW50ZWwgR1BVcy5cbiAgICBjb25zdCBzZXF1ZW50aWFsQWNjZXNzQnlUaHJlYWRzID0gYmFja2VuZC5hZGFwdGVySW5mby5pc0ludGVsKCk7XG4gICAgcHJvZ3JhbSA9IG5ldyBDb252MkRNTVByb2dyYW0oXG4gICAgICAgIGNvbnZJbmZvLCBkaW1BT3V0ZXIsIGRpbUJPdXRlciwgZGltSW5uZXIsIGhhc0JpYXMsIGFjdGl2YXRpb24sXG4gICAgICAgIGhhc1ByZWx1QWN0aXZhdGlvbldlaWdodHMsIHNlcXVlbnRpYWxBY2Nlc3NCeVRocmVhZHMpO1xuICB9XG5cbiAgY29uc3QgaW50ZXJtZWRpYXRlczogVGVuc29ySW5mb1tdID0gW107XG4gIGNvbnN0IGlucHV0VmFyOiBUZW5zb3JJbmZvW10gPSBbeCwgZmlsdGVyXTtcbiAgaWYgKGhhc0JpYXMpIHtcbiAgICBpZiAoIWlzQ2hhbm5lbHNMYXN0ICYmIGJpYXMuc2hhcGUubGVuZ3RoID09PSAxKSB7XG4gICAgICBiaWFzID0gcmVzaGFwZShcbiAgICAgICAgICB7aW5wdXRzOiB7eDogYmlhc30sIGJhY2tlbmQsIGF0dHJzOiB7c2hhcGU6IFtiaWFzLnNoYXBlWzBdLCAxLCAxXX19KTtcbiAgICAgIGludGVybWVkaWF0ZXMucHVzaChiaWFzKTtcbiAgICB9XG4gICAgaW5wdXRWYXIucHVzaChiaWFzKTtcbiAgfVxuICBpZiAoaGFzUHJlbHVBY3RpdmF0aW9uV2VpZ2h0cykge1xuICAgIGlmICghaXNDaGFubmVsc0xhc3QgJiYgcHJlbHVBY3RpdmF0aW9uV2VpZ2h0cy5zaGFwZS5sZW5ndGggPT09IDEpIHtcbiAgICAgIHByZWx1QWN0aXZhdGlvbldlaWdodHMgPSByZXNoYXBlKHtcbiAgICAgICAgaW5wdXRzOiB7eDogcHJlbHVBY3RpdmF0aW9uV2VpZ2h0c30sXG4gICAgICAgIGJhY2tlbmQsXG4gICAgICAgIGF0dHJzOiB7c2hhcGU6IFtwcmVsdUFjdGl2YXRpb25XZWlnaHRzLnNoYXBlWzBdLCAxLCAxXX1cbiAgICAgIH0pO1xuICAgICAgaW50ZXJtZWRpYXRlcy5wdXNoKHByZWx1QWN0aXZhdGlvbldlaWdodHMpO1xuICAgIH1cbiAgICBpbnB1dFZhci5wdXNoKHByZWx1QWN0aXZhdGlvbldlaWdodHMpO1xuICB9XG4gIGlmIChhY3RpdmF0aW9uID09PSAnbGVha3lyZWx1Jykge1xuICAgIGRpbWVuc2lvbnMucHVzaCh7dHlwZTogJ2Zsb2F0MzInLCBkYXRhOiBbbGVha3lyZWx1QWxwaGFdfSk7XG4gICAgcHJvZ3JhbS51bmlmb3JtcyArPSAnIGFscGhhIDogZjMyLCc7XG4gIH1cbiAgY29uc3Qgb3V0ID0gYmFja2VuZC5ydW5XZWJHUFVQcm9ncmFtKHByb2dyYW0sIGlucHV0VmFyLCB4LmR0eXBlLCBkaW1lbnNpb25zKTtcbiAgZm9yIChjb25zdCBpIG9mIGludGVybWVkaWF0ZXMpIHtcbiAgICBiYWNrZW5kLmRpc3Bvc2VEYXRhKGkuZGF0YUlkKTtcbiAgfVxuICByZXR1cm4gb3V0O1xufVxuIl19","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { backend_util, Conv2D } from '@tensorflow/tfjs-core';\nimport { conv2DImpl } from './Conv2D_impl';\nexport function conv2d(args) {\n    const { inputs, attrs, backend } = args;\n    const { x, filter } = inputs;\n    const { strides, pad, dataFormat, dilations, dimRoundingMode } = attrs;\n    const $dataFormat = backend_util.convertConv2DDataFormat(dataFormat);\n    const convInfo = backend_util.computeConv2DInfo(x.shape, filter.shape, strides, dilations, pad, dimRoundingMode, false /* depthwise */, $dataFormat);\n    return conv2DImpl({ x, filter, convInfo, backend });\n}\nexport const conv2DConfig = {\n    kernelName: Conv2D,\n    backendName: 'webgpu',\n    kernelFunc: conv2d\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ29udjJELmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMva2VybmVscy9Db252MkQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUFDLFlBQVksRUFBRSxNQUFNLEVBQXNELE1BQU0sdUJBQXVCLENBQUM7QUFJaEgsT0FBTyxFQUFDLFVBQVUsRUFBQyxNQUFNLGVBQWUsQ0FBQztBQUV6QyxNQUFNLFVBQVUsTUFBTSxDQUNsQixJQUF3RTtJQUMxRSxNQUFNLEVBQUMsTUFBTSxFQUFFLEtBQUssRUFBRSxPQUFPLEVBQUMsR0FBRyxJQUFJLENBQUM7SUFDdEMsTUFBTSxFQUFDLENBQUMsRUFBRSxNQUFNLEVBQUMsR0FBRyxNQUFNLENBQUM7SUFDM0IsTUFBTSxFQUFDLE9BQU8sRUFBRSxHQUFHLEVBQUUsVUFBVSxFQUFFLFNBQVMsRUFBRSxlQUFlLEVBQUMsR0FBRyxLQUFLLENBQUM7SUFDckUsTUFBTSxXQUFXLEdBQUcsWUFBWSxDQUFDLHVCQUF1QixDQUFDLFVBQVUsQ0FBQyxDQUFDO0lBQ3JFLE1BQU0sUUFBUSxHQUFHLFlBQVksQ0FBQyxpQkFBaUIsQ0FDM0MsQ0FBQyxDQUFDLEtBQXlDLEVBQzNDLE1BQU0sQ0FBQyxLQUF5QyxFQUFFLE9BQU8sRUFBRSxTQUFTLEVBQUUsR0FBRyxFQUN6RSxlQUFlLEVBQUUsS0FBSyxDQUFDLGVBQWUsRUFBRSxXQUFXLENBQUMsQ0FBQztJQUN6RCxPQUFPLFVBQVUsQ0FBQyxFQUFDLENBQUMsRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLE9BQU8sRUFBQyxDQUFDLENBQUM7QUFDcEQsQ0FBQztBQUVELE1BQU0sQ0FBQyxNQUFNLFlBQVksR0FBaUI7SUFDeEMsVUFBVSxFQUFFLE1BQU07SUFDbEIsV0FBVyxFQUFFLFFBQVE7SUFDckIsVUFBVSxFQUFFLE1BQStCO0NBQzVDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7YmFja2VuZF91dGlsLCBDb252MkQsIENvbnYyREF0dHJzLCBDb252MkRJbnB1dHMsIEtlcm5lbENvbmZpZywgS2VybmVsRnVuY30gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcblxuaW1wb3J0IHtXZWJHUFVCYWNrZW5kfSBmcm9tICcuLi9iYWNrZW5kX3dlYmdwdSc7XG5cbmltcG9ydCB7Y29udjJESW1wbH0gZnJvbSAnLi9Db252MkRfaW1wbCc7XG5cbmV4cG9ydCBmdW5jdGlvbiBjb252MmQoXG4gICAgYXJnczoge2lucHV0czogQ29udjJESW5wdXRzLCBhdHRyczogQ29udjJEQXR0cnMsIGJhY2tlbmQ6IFdlYkdQVUJhY2tlbmR9KSB7XG4gIGNvbnN0IHtpbnB1dHMsIGF0dHJzLCBiYWNrZW5kfSA9IGFyZ3M7XG4gIGNvbnN0IHt4LCBmaWx0ZXJ9ID0gaW5wdXRzO1xuICBjb25zdCB7c3RyaWRlcywgcGFkLCBkYXRhRm9ybWF0LCBkaWxhdGlvbnMsIGRpbVJvdW5kaW5nTW9kZX0gPSBhdHRycztcbiAgY29uc3QgJGRhdGFGb3JtYXQgPSBiYWNrZW5kX3V0aWwuY29udmVydENvbnYyRERhdGFGb3JtYXQoZGF0YUZvcm1hdCk7XG4gIGNvbnN0IGNvbnZJbmZvID0gYmFja2VuZF91dGlsLmNvbXB1dGVDb252MkRJbmZvKFxuICAgICAgeC5zaGFwZSBhcyBbbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyXSxcbiAgICAgIGZpbHRlci5zaGFwZSBhcyBbbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyXSwgc3RyaWRlcywgZGlsYXRpb25zLCBwYWQsXG4gICAgICBkaW1Sb3VuZGluZ01vZGUsIGZhbHNlIC8qIGRlcHRod2lzZSAqLywgJGRhdGFGb3JtYXQpO1xuICByZXR1cm4gY29udjJESW1wbCh7eCwgZmlsdGVyLCBjb252SW5mbywgYmFja2VuZH0pO1xufVxuXG5leHBvcnQgY29uc3QgY29udjJEQ29uZmlnOiBLZXJuZWxDb25maWcgPSB7XG4gIGtlcm5lbE5hbWU6IENvbnYyRCxcbiAgYmFja2VuZE5hbWU6ICd3ZWJncHUnLFxuICBrZXJuZWxGdW5jOiBjb252MmQgYXMgdW5rbm93biBhcyBLZXJuZWxGdW5jXG59O1xuIl19","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { getMainHeaderString as main } from './webgpu_program';\nimport { computeDispatch, flatDispatchLayout } from './webgpu_util';\nexport class Conv2DDerInputProgram {\n    constructor(convInfo) {\n        this.variableNames = ['dy', 'W'];\n        this.uniforms = 'filterDims : vec2<i32>, pads : vec2<i32>, strides : vec2<i32>, outBackprop : vec4<i32>,';\n        this.workgroupSize = [64, 1, 1];\n        this.size = false;\n        this.isVec4 = false;\n        this.workPerThread = 1;\n        this.outputShape = convInfo.inShape;\n        this.isChannelsLast = convInfo.dataFormat === 'channelsLast';\n        this.isVec4 = this.isChannelsLast && convInfo.outChannels % 4 === 0 &&\n            convInfo.inChannels % 4 === 0;\n        if (this.isVec4) {\n            // TODO: Expand to any value.\n            this.workPerThread = 2;\n            this.outputComponent = 4;\n            this.workgroupSize = [4, 4, 4];\n            this.dispatchLayout = { x: [3], y: [2], z: [0, 1] };\n            this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize, [4, this.workPerThread, 1]);\n        }\n        else {\n            this.size = true;\n            this.workPerThread = 1;\n            this.workgroupSize = [64, 1, 1];\n            this.dispatchLayout = flatDispatchLayout(this.outputShape);\n            this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize);\n        }\n        this.shaderKey = `conv2DDerInput_${this.isChannelsLast}_${this.isVec4}_${this.workPerThread}`;\n    }\n    getUserCode() {\n        const rowDim = this.isChannelsLast ? 1 : 2;\n        const colDim = this.isChannelsLast ? 2 : 3;\n        const channelDim = this.isChannelsLast ? 3 : 1;\n        const vec4Snippet = `\n    ${main()} {\n      let batch = i32(globalId.z) / uniforms.outShape[1];\n      let r = i32(globalId.z) % uniforms.outShape[1];\n      let c = i32(globalId.y) * ${this.workPerThread};\n      let d1 = i32(globalId.x) * 4;\n\n      let dyCorner = vec2<i32>(r, c) - uniforms.pads;\n\n      // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n      // ? = to be determined. : = across all values in that axis.\n      var dotProd: array<vec4<f32>, ${this.workPerThread}>;\n      for (var i = 0; i < ${this.workPerThread}; i++) {\n        dotProd[i] = vec4<f32>(0.0);\n      }\n      for (var wR = 0; wR < uniforms.filterDims.x; wR = wR + 1) {\n        let dyR = f32(dyCorner.x + wR) / f32(uniforms.strides.x);\n        let wRPerm = uniforms.filterDims.x - 1 - wR;\n        if (dyR < 0.0 || dyR >= f32(uniforms.outBackprop[1]) ||\n            fract(dyR) > 0.0) {\n          continue;\n        }\n        let idyR = i32(dyR);\n\n        for (var wC = 0; wC < uniforms.filterDims.y; wC = wC + 1) {\n          let dyC = f32(dyCorner.y + wC) / f32(uniforms.strides.y);\n          let dyC2 = f32(dyCorner.y + 1 + wC) / f32(uniforms.strides.y);\n          let wCPerm = uniforms.filterDims.y - 1 - wC;\n          var bDyCVal = true;\n          var bDyCVal2 = true;\n          if (dyC < 0.0 || dyC >= f32(uniforms.outBackprop[2]) ||\n              fract(dyC) > 0.0) {\n            bDyCVal = false;\n          }\n          if (dyC2 < 0.0 || dyC2 >= f32(uniforms.outBackprop[2]) ||\n              fract(dyC2) > 0.0) {\n            bDyCVal2 = false;\n          }\n\n          let idyC = i32(dyC);\n          let idyC2 = i32(dyC2);\n          if (bDyCVal && bDyCVal2) {\n            let d2Length = uniforms.outBackprop[3];\n            for (var d2 = 0; d2 < d2Length; d2 = d2 + 4) {\n              let wValue0 = getW(wRPerm, wCPerm, d1, d2);\n              let wValue1 = getW(wRPerm, wCPerm, d1 + 1, d2);\n              let wValue2 = getW(wRPerm, wCPerm, d1 + 2, d2);\n              let wValue3 = getW(wRPerm, wCPerm, d1 + 3, d2);\n              var xValue =  getDy(batch, idyR, idyC, d2);\n              let tmpval = vec4<f32>(dot(xValue, wValue0),\n                                     dot(xValue, wValue1),\n                                     dot(xValue, wValue2),\n                                     dot(xValue, wValue3));\n              dotProd[0] = dotProd[0] + tmpval;\n              xValue = getDy(batch, idyR, idyC2, d2);\n              dotProd[1] = dotProd[1] + vec4<f32>(dot(xValue, wValue0),\n                                                  dot(xValue, wValue1),\n                                                  dot(xValue, wValue2),\n                                                  dot(xValue, wValue3));\n            }\n          } else if (bDyCVal) {\n            let d2Length = uniforms.outBackprop[3];\n            for (var d2 = 0; d2 < d2Length; d2 = d2 + 4) {\n              let wValue0 = getW(wRPerm, wCPerm, d1, d2);\n              let wValue1 = getW(wRPerm, wCPerm, d1 + 1, d2);\n              let wValue2 = getW(wRPerm, wCPerm, d1 + 2, d2);\n              let wValue3 = getW(wRPerm, wCPerm, d1 + 3, d2);\n              var xValue =  getDy(batch, idyR, idyC, d2);\n              let tmpval = vec4<f32>(dot(xValue, wValue0),\n                                     dot(xValue, wValue1),\n                                     dot(xValue, wValue2),\n                                     dot(xValue, wValue3));\n              dotProd[0] = dotProd[0] + tmpval;\n            }\n          } else if (bDyCVal2) {\n            let d2Length = uniforms.outBackprop[3];\n            for (var d2 = 0; d2 < d2Length; d2 = d2 + 4) {\n              let wValue0 = getW(wRPerm, wCPerm, d1, d2);\n              let wValue1 = getW(wRPerm, wCPerm, d1 + 1, d2);\n              let wValue2 = getW(wRPerm, wCPerm, d1 + 2, d2);\n              let wValue3 = getW(wRPerm, wCPerm, d1 + 3, d2);\n              var xValue =  getDy(batch, idyR, idyC2, d2);\n              let tmpval = vec4<f32>(dot(xValue, wValue0),\n                                     dot(xValue, wValue1),\n                                     dot(xValue, wValue2),\n                                     dot(xValue, wValue3));\n              dotProd[1] = dotProd[1] + tmpval;\n            }\n          }\n        }\n      }\n\n      for (var i = 0; i < ${this.workPerThread}; i = i + 1) {\n        let coords = vec4<i32>(batch, r, c + i, d1);\n        if (coordsInBounds4D(coords, uniforms.outShape)) {\n          setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], dotProd[i]);\n        }\n      }\n    }\n    `;\n        return this.isVec4 ?\n            `\n    ${vec4Snippet}\n    ` :\n            `\n    ${main('index')} {\n      if(index < uniforms.size) {\n        let coords = getCoordsFromIndex(index);\n        let batch = coords[0];\n        let d1 = coords[${channelDim}];\n\n        let dyCorner = vec2<i32>(coords[${rowDim}], coords[${colDim}]) - uniforms.pads;\n        let dyRCorner = dyCorner.x;\n        let dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        var dotProd = 0.0;\n        for (var wR = 0; wR < uniforms.filterDims.x; wR = wR + 1) {\n          let dyR = (f32(dyRCorner) + f32(wR)) / f32(uniforms.strides.x);\n          let wRPerm = uniforms.filterDims.x - 1 - wR;\n          if (dyR < 0.0 || dyR >= f32(uniforms.outBackprop[1]) || fract(dyR) > 0.0 ||\n              wRPerm < 0) {\n            continue;\n          }\n          let idyR = i32(dyR);\n\n          for (var wC = 0; wC < uniforms.filterDims.y; wC = wC + 1) {\n            let dyC = (f32(dyCCorner) + f32(wC)) / f32(uniforms.strides.y);\n            let wCPerm = uniforms.filterDims.y - 1 - wC;\n            if (dyC < 0.0 || dyC >= f32(uniforms.outBackprop[2]) ||\n                fract(dyC) > 0.0 || wCPerm < 0) {\n              continue;\n            }\n            let idyC = i32(dyC);\n\n            for (var d2 = 0; d2 < uniforms.outBackprop[3]; d2 = d2 + 1) {\n              let xValue = ${this.isChannelsLast ? 'getDy(batch, idyR, idyC, d2)' :\n                'getDy(batch, d2, idyR, idyC)'};\n              let wValue = getW(wRPerm, wCPerm, d1, d2);\n              dotProd = dotProd + xValue * wValue;\n            }\n          }\n        }\n        setOutputAtIndex(index, dotProd);\n      }\n    }\n  `;\n    }\n}\nexport class Conv2DDerFilterProgram {\n    constructor(convInfo) {\n        this.variableNames = ['x', 'dy'];\n        this.uniforms = 'pads : vec2<i32>, strides : vec2<i32>, batchSize : i32, outHeight : i32, outWidth : i32, inHeight : i32, inWidth : i32,';\n        this.workgroupSize = [64, 1, 1];\n        this.size = true;\n        this.outputShape = convInfo.filterShape;\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize);\n        this.isChannelsLast = convInfo.dataFormat === 'channelsLast';\n        this.shaderKey = `conv2DDerFilter_${this.isChannelsLast}`;\n    }\n    getUserCode() {\n        return `\n    ${main('index')} {\n      if(index < uniforms.size) {\n        let coords = getCoordsFromIndex(index);\n        let wR = coords[0];\n        let wC = coords[1];\n        let d1 = coords[2];\n        let d2 = coords[3];\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        var dotProd = 0.0;\n        for (var b = 0; b < uniforms.batchSize; b = b + 1) {\n          for (var yR = 0; yR < uniforms.outHeight; yR = yR + 1) {\n            let xR = wR + yR * uniforms.strides[0] - uniforms.pads[0];\n            if (xR < 0 || xR >= uniforms.inHeight) {\n              continue;\n            }\n\n            for (var yC = 0; yC < uniforms.outWidth; yC = yC + 1) {\n              let xC = wC + yC * uniforms.strides[1] - uniforms.pads[1];\n\n              if (xC < 0 || xC >= uniforms.inWidth) {\n                continue;\n              }\n\n              if (${this.isChannelsLast}) {\n                let dyValue = getDy(b, yR, yC, d2);\n                let xValue = getX(b, xR, xC, d1);\n                dotProd = dotProd + xValue * dyValue;\n              } else {\n                let dyValue = getDy(b, d2, yR, yC);\n                let xValue = getX(b, d1, xR, xC);\n                dotProd = dotProd + xValue * dyValue;\n              }\n            }\n          }\n        }\n        setOutputAtIndex(index, dotProd);\n      }\n    }\n  `;\n    }\n}\nexport class Conv3DDerFilterProgram {\n    constructor(convInfo) {\n        this.variableNames = ['x', 'dy'];\n        this.uniforms = `pads : vec3<i32>, strides : vec3<i32>, batchSize : i32, outDepth : i32,\n       outHeight : i32, outWidth : i32, inDepth : i32, inHeight : i32, inWidth : i32,`;\n        this.workgroupSize = [64, 1, 1];\n        this.size = true;\n        this.outputShape = convInfo.filterShape;\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize);\n        this.shaderKey = `conv3DDerFilter`;\n    }\n    getUserCode() {\n        return `\n    ${main('index')} {\n      if(index < uniforms.size) {\n        let coords = getCoordsFromIndex(index);\n        let wF = coords.x;\n        let wR = coords.y;\n        let wC = coords.z;\n        let d1 = coords.w;\n        let d2 = coords.u;\n\n        var dotProd = 0.0;\n        for (var b = 0; b < uniforms.batchSize; b++) {\n          for (var yF = 0; yF < uniforms.outDepth; yF++) {\n            let xF = wF + yF * uniforms.strides[0] - uniforms.pads[0];\n            if (xF < 0 || xF >= uniforms.inDepth) {\n              continue;\n            }\n\n            for (var yR = 0; yR < uniforms.outHeight; yR++) {\n              let xR = wR + yR * uniforms.strides[1] - uniforms.pads[1];\n              if (xR < 0 || xR >= uniforms.inHeight) {\n                continue;\n              }\n\n              for (var yC = 0; yC < uniforms.outWidth; yC++) {\n                let xC = wC + yC * uniforms.strides[2] - uniforms.pads[2];\n                if (xC < 0 || xC >= uniforms.inWidth) {\n                  continue;\n                }\n\n                let dyValue = getDy(b, yF, yR, yC, d2);\n                let xValue = getX(b, xF, xR, xC, d1);\n                dotProd += xValue * dyValue;\n              }\n            }\n          }\n        }\n        setOutputAtIndex(index, dotProd);\n      }\n    }\n  `;\n    }\n}\nexport class Conv3DDerInputProgram {\n    constructor(convInfo) {\n        this.variableNames = ['dy', 'W'];\n        this.uniforms = `filterDims : vec3<i32>, pads : vec3<i32>, strides : vec3<i32>,\n      outDepth : i32, outHeight : i32, outWidth : i32, outChannels : i32,`;\n        this.workgroupSize = [64, 1, 1];\n        this.size = true;\n        this.outputShape = convInfo.inShape;\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize);\n        this.shaderKey = `conv3DDerInput`;\n    }\n    getUserCode() {\n        return `\n    ${main('index')} {\n      if(index < uniforms.size) {\n        let coords = getCoordsFromIndex(index);\n        let batch = coords.x;\n        let d1 = coords.u;\n\n        let dyCorner = vec3<i32>(coords.y, coords.z, coords.w) - uniforms.pads;\n        let dyFCorner = dyCorner.x;\n        let dyRCorner = dyCorner.y;\n        let dyCCorner = dyCorner.z;\n\n        var dotProd = 0.0;\n        for (var wF = 0; wF < uniforms.filterDims[0]; wF++) {\n          let dyF = f32(dyFCorner + wF) / f32(uniforms.strides[0]);\n          if (dyF < 0.0 || dyF >= f32(uniforms.outDepth) || fract(dyF) > 0.0) {\n            continue;\n          }\n          let idyF = i32(dyF);\n\n          let wFPerm = uniforms.filterDims[0] - 1 - wF;\n\n          for (var wR = 0; wR < uniforms.filterDims[1]; wR++) {\n            let dyR = f32(dyRCorner + wR) / f32(uniforms.strides[1]);\n\n            if (dyR < 0.0 || dyR >= f32(uniforms.outHeight) || fract(dyR) > 0.0) {\n              continue;\n            }\n            let idyR = i32(dyR);\n\n            let wRPerm = uniforms.filterDims[1] - 1 - wR;\n\n            for (var wC = 0; wC < uniforms.filterDims[2]; wC++) {\n              let dyC = f32(dyCCorner + wC) / f32(uniforms.strides[2]);\n\n              if (dyC < 0.0 || dyC >= f32(uniforms.outWidth) || fract(dyC) > 0.0) {\n                continue;\n              }\n              let idyC = i32(dyC);\n\n              let wCPerm = uniforms.filterDims[2] - 1 - wC;\n\n              for (var d2 = 0; d2 < uniforms.outChannels; d2++) {\n                let xValue = getDy(batch, idyF, idyR, idyC, d2);\n                let wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutputAtIndex(index, dotProd);\n      }\n    }\n  `;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29udl9iYWNrcHJvcF93ZWJncHUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9jb252X2JhY2twcm9wX3dlYmdwdS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFHSCxPQUFPLEVBQUMsbUJBQW1CLElBQUksSUFBSSxFQUFnQixNQUFNLGtCQUFrQixDQUFDO0FBQzVFLE9BQU8sRUFBQyxlQUFlLEVBQUUsa0JBQWtCLEVBQUMsTUFBTSxlQUFlLENBQUM7QUFFbEUsTUFBTSxPQUFPLHFCQUFxQjtJQWVoQyxZQUFZLFFBQWlDO1FBZDdDLGtCQUFhLEdBQUcsQ0FBQyxJQUFJLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFDNUIsYUFBUSxHQUNKLHlGQUF5RixDQUFDO1FBSzlGLGtCQUFhLEdBQTZCLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUVyRCxTQUFJLEdBQUcsS0FBSyxDQUFDO1FBQ2IsV0FBTSxHQUFHLEtBQUssQ0FBQztRQUNmLGtCQUFhLEdBQUcsQ0FBQyxDQUFDO1FBSWhCLElBQUksQ0FBQyxXQUFXLEdBQUcsUUFBUSxDQUFDLE9BQU8sQ0FBQztRQUNwQyxJQUFJLENBQUMsY0FBYyxHQUFHLFFBQVEsQ0FBQyxVQUFVLEtBQUssY0FBYyxDQUFDO1FBQzdELElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLGNBQWMsSUFBSSxRQUFRLENBQUMsV0FBVyxHQUFHLENBQUMsS0FBSyxDQUFDO1lBQy9ELFFBQVEsQ0FBQyxVQUFVLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNsQyxJQUFJLElBQUksQ0FBQyxNQUFNLEVBQUU7WUFDZiw2QkFBNkI7WUFDN0IsSUFBSSxDQUFDLGFBQWEsR0FBRyxDQUFDLENBQUM7WUFDdkIsSUFBSSxDQUFDLGVBQWUsR0FBRyxDQUFDLENBQUM7WUFDekIsSUFBSSxDQUFDLGFBQWEsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDL0IsSUFBSSxDQUFDLGNBQWMsR0FBRyxFQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBQyxDQUFDO1lBQ2xELElBQUksQ0FBQyxRQUFRLEdBQUcsZUFBZSxDQUMzQixJQUFJLENBQUMsY0FBYyxFQUFFLElBQUksQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDLGFBQWEsRUFDekQsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ2pDO2FBQU07WUFDTCxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztZQUNqQixJQUFJLENBQUMsYUFBYSxHQUFHLENBQUMsQ0FBQztZQUN2QixJQUFJLENBQUMsYUFBYSxHQUFHLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztZQUNoQyxJQUFJLENBQUMsY0FBYyxHQUFHLGtCQUFrQixDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztZQUMzRCxJQUFJLENBQUMsUUFBUSxHQUFHLGVBQWUsQ0FDM0IsSUFBSSxDQUFDLGNBQWMsRUFBRSxJQUFJLENBQUMsV0FBVyxFQUFFLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQztTQUNoRTtRQUNELElBQUksQ0FBQyxTQUFTLEdBQUcsa0JBQWtCLElBQUksQ0FBQyxjQUFjLElBQUksSUFBSSxDQUFDLE1BQU0sSUFDakUsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO0lBQzNCLENBQUM7SUFFRCxXQUFXO1FBQ1QsTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDM0MsTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDM0MsTUFBTSxVQUFVLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFL0MsTUFBTSxXQUFXLEdBQUc7TUFDbEIsSUFBSSxFQUFFOzs7a0NBR3NCLElBQUksQ0FBQyxhQUFhOzs7Ozs7O3NDQU9kLElBQUksQ0FBQyxhQUFhOzRCQUM1QixJQUFJLENBQUMsYUFBYTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7NEJBZ0ZsQixJQUFJLENBQUMsYUFBYTs7Ozs7OztLQU96QyxDQUFDO1FBQ0YsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDaEI7TUFDRixXQUFXO0tBQ1osQ0FBQyxDQUFDO1lBQ0M7TUFDRixJQUFJLENBQUMsT0FBTyxDQUFDOzs7OzBCQUlPLFVBQVU7OzBDQUVNLE1BQU0sYUFDcEMsTUFBTTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7NkJBMkJOLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLDhCQUE4QixDQUFDLENBQUM7Z0JBQ2hDLDhCQUE4Qjs7Ozs7Ozs7O0dBUzdELENBQUM7SUFDRixDQUFDO0NBQ0Y7QUFFRCxNQUFNLE9BQU8sc0JBQXNCO0lBWWpDLFlBQVksUUFBaUM7UUFYN0Msa0JBQWEsR0FBRyxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsQ0FBQztRQUM1QixhQUFRLEdBQ0oseUhBQXlILENBQUM7UUFLOUgsa0JBQWEsR0FBNkIsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBRXJELFNBQUksR0FBRyxJQUFJLENBQUM7UUFHVixJQUFJLENBQUMsV0FBVyxHQUFHLFFBQVEsQ0FBQyxXQUFXLENBQUM7UUFDeEMsSUFBSSxDQUFDLGNBQWMsR0FBRyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDM0QsSUFBSSxDQUFDLFFBQVEsR0FBRyxlQUFlLENBQzNCLElBQUksQ0FBQyxjQUFjLEVBQUUsSUFBSSxDQUFDLFdBQVcsRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7UUFDL0QsSUFBSSxDQUFDLGNBQWMsR0FBRyxRQUFRLENBQUMsVUFBVSxLQUFLLGNBQWMsQ0FBQztRQUM3RCxJQUFJLENBQUMsU0FBUyxHQUFHLG1CQUFtQixJQUFJLENBQUMsY0FBYyxFQUFFLENBQUM7SUFDNUQsQ0FBQztJQUVELFdBQVc7UUFDVCxPQUFPO01BQ0wsSUFBSSxDQUFDLE9BQU8sQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkF5QkMsSUFBSSxDQUFDLGNBQWM7Ozs7Ozs7Ozs7Ozs7OztHQWVwQyxDQUFDO0lBQ0YsQ0FBQztDQUNGO0FBRUQsTUFBTSxPQUFPLHNCQUFzQjtJQVlqQyxZQUFZLFFBQWlDO1FBWDdDLGtCQUFhLEdBQUcsQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFDNUIsYUFBUSxHQUNKO3NGQUNnRixDQUFDO1FBS3JGLGtCQUFhLEdBQTZCLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUNyRCxTQUFJLEdBQUcsSUFBSSxDQUFDO1FBR1YsSUFBSSxDQUFDLFdBQVcsR0FBRyxRQUFRLENBQUMsV0FBVyxDQUFDO1FBQ3hDLElBQUksQ0FBQyxjQUFjLEdBQUcsa0JBQWtCLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQzNELElBQUksQ0FBQyxRQUFRLEdBQUcsZUFBZSxDQUMzQixJQUFJLENBQUMsY0FBYyxFQUFFLElBQUksQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBQy9ELElBQUksQ0FBQyxTQUFTLEdBQUcsaUJBQWlCLENBQUM7SUFDckMsQ0FBQztJQUVELFdBQVc7UUFDVCxPQUFPO01BQ0wsSUFBSSxDQUFDLE9BQU8sQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0dBdUNoQixDQUFDO0lBQ0YsQ0FBQztDQUNGO0FBRUQsTUFBTSxPQUFPLHFCQUFxQjtJQVdoQyxZQUFZLFFBQWlDO1FBVjdDLGtCQUFhLEdBQUcsQ0FBQyxJQUFJLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFDNUIsYUFBUSxHQUFHOzBFQUM2RCxDQUFDO1FBS3pFLGtCQUFhLEdBQTZCLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUNyRCxTQUFJLEdBQUcsSUFBSSxDQUFDO1FBR1YsSUFBSSxDQUFDLFdBQVcsR0FBRyxRQUFRLENBQUMsT0FBTyxDQUFDO1FBQ3BDLElBQUksQ0FBQyxjQUFjLEdBQUcsa0JBQWtCLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQzNELElBQUksQ0FBQyxRQUFRLEdBQUcsZUFBZSxDQUMzQixJQUFJLENBQUMsY0FBYyxFQUFFLElBQUksQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBQy9ELElBQUksQ0FBQyxTQUFTLEdBQUcsZ0JBQWdCLENBQUM7SUFDcEMsQ0FBQztJQUVELFdBQVc7UUFDVCxPQUFPO01BQ0wsSUFBSSxDQUFDLE9BQU8sQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztHQW9EaEIsQ0FBQztJQUNGLENBQUM7Q0FDRiIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtiYWNrZW5kX3V0aWx9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5pbXBvcnQge2dldE1haW5IZWFkZXJTdHJpbmcgYXMgbWFpbiwgV2ViR1BVUHJvZ3JhbX0gZnJvbSAnLi93ZWJncHVfcHJvZ3JhbSc7XG5pbXBvcnQge2NvbXB1dGVEaXNwYXRjaCwgZmxhdERpc3BhdGNoTGF5b3V0fSBmcm9tICcuL3dlYmdwdV91dGlsJztcblxuZXhwb3J0IGNsYXNzIENvbnYyRERlcklucHV0UHJvZ3JhbSBpbXBsZW1lbnRzIFdlYkdQVVByb2dyYW0ge1xuICB2YXJpYWJsZU5hbWVzID0gWydkeScsICdXJ107XG4gIHVuaWZvcm1zID1cbiAgICAgICdmaWx0ZXJEaW1zIDogdmVjMjxpMzI+LCBwYWRzIDogdmVjMjxpMzI+LCBzdHJpZGVzIDogdmVjMjxpMzI+LCBvdXRCYWNrcHJvcCA6IHZlYzQ8aTMyPiwnO1xuICBvdXRwdXRTaGFwZTogbnVtYmVyW107XG4gIHNoYWRlcktleTogc3RyaW5nO1xuICBkaXNwYXRjaExheW91dDoge3g6IG51bWJlcltdLCB5PzogbnVtYmVyW10sIHo/OiBudW1iZXJbXX07XG4gIGRpc3BhdGNoOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl07XG4gIHdvcmtncm91cFNpemU6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXSA9IFs2NCwgMSwgMV07XG4gIGlzQ2hhbm5lbHNMYXN0OiBib29sZWFuO1xuICBzaXplID0gZmFsc2U7XG4gIGlzVmVjNCA9IGZhbHNlO1xuICB3b3JrUGVyVGhyZWFkID0gMTtcbiAgb3V0cHV0Q29tcG9uZW50OiBudW1iZXI7XG5cbiAgY29uc3RydWN0b3IoY29udkluZm86IGJhY2tlbmRfdXRpbC5Db252MkRJbmZvKSB7XG4gICAgdGhpcy5vdXRwdXRTaGFwZSA9IGNvbnZJbmZvLmluU2hhcGU7XG4gICAgdGhpcy5pc0NoYW5uZWxzTGFzdCA9IGNvbnZJbmZvLmRhdGFGb3JtYXQgPT09ICdjaGFubmVsc0xhc3QnO1xuICAgIHRoaXMuaXNWZWM0ID0gdGhpcy5pc0NoYW5uZWxzTGFzdCAmJiBjb252SW5mby5vdXRDaGFubmVscyAlIDQgPT09IDAgJiZcbiAgICAgICAgY29udkluZm8uaW5DaGFubmVscyAlIDQgPT09IDA7XG4gICAgaWYgKHRoaXMuaXNWZWM0KSB7XG4gICAgICAvLyBUT0RPOiBFeHBhbmQgdG8gYW55IHZhbHVlLlxuICAgICAgdGhpcy53b3JrUGVyVGhyZWFkID0gMjtcbiAgICAgIHRoaXMub3V0cHV0Q29tcG9uZW50ID0gNDtcbiAgICAgIHRoaXMud29ya2dyb3VwU2l6ZSA9IFs0LCA0LCA0XTtcbiAgICAgIHRoaXMuZGlzcGF0Y2hMYXlvdXQgPSB7eDogWzNdLCB5OiBbMl0sIHo6IFswLCAxXX07XG4gICAgICB0aGlzLmRpc3BhdGNoID0gY29tcHV0ZURpc3BhdGNoKFxuICAgICAgICAgIHRoaXMuZGlzcGF0Y2hMYXlvdXQsIHRoaXMub3V0cHV0U2hhcGUsIHRoaXMud29ya2dyb3VwU2l6ZSxcbiAgICAgICAgICBbNCwgdGhpcy53b3JrUGVyVGhyZWFkLCAxXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2l6ZSA9IHRydWU7XG4gICAgICB0aGlzLndvcmtQZXJUaHJlYWQgPSAxO1xuICAgICAgdGhpcy53b3JrZ3JvdXBTaXplID0gWzY0LCAxLCAxXTtcbiAgICAgIHRoaXMuZGlzcGF0Y2hMYXlvdXQgPSBmbGF0RGlzcGF0Y2hMYXlvdXQodGhpcy5vdXRwdXRTaGFwZSk7XG4gICAgICB0aGlzLmRpc3BhdGNoID0gY29tcHV0ZURpc3BhdGNoKFxuICAgICAgICAgIHRoaXMuZGlzcGF0Y2hMYXlvdXQsIHRoaXMub3V0cHV0U2hhcGUsIHRoaXMud29ya2dyb3VwU2l6ZSk7XG4gICAgfVxuICAgIHRoaXMuc2hhZGVyS2V5ID0gYGNvbnYyRERlcklucHV0XyR7dGhpcy5pc0NoYW5uZWxzTGFzdH1fJHt0aGlzLmlzVmVjNH1fJHtcbiAgICAgICAgdGhpcy53b3JrUGVyVGhyZWFkfWA7XG4gIH1cblxuICBnZXRVc2VyQ29kZSgpOiBzdHJpbmcge1xuICAgIGNvbnN0IHJvd0RpbSA9IHRoaXMuaXNDaGFubmVsc0xhc3QgPyAxIDogMjtcbiAgICBjb25zdCBjb2xEaW0gPSB0aGlzLmlzQ2hhbm5lbHNMYXN0ID8gMiA6IDM7XG4gICAgY29uc3QgY2hhbm5lbERpbSA9IHRoaXMuaXNDaGFubmVsc0xhc3QgPyAzIDogMTtcblxuICAgIGNvbnN0IHZlYzRTbmlwcGV0ID0gYFxuICAgICR7bWFpbigpfSB7XG4gICAgICBsZXQgYmF0Y2ggPSBpMzIoZ2xvYmFsSWQueikgLyB1bmlmb3Jtcy5vdXRTaGFwZVsxXTtcbiAgICAgIGxldCByID0gaTMyKGdsb2JhbElkLnopICUgdW5pZm9ybXMub3V0U2hhcGVbMV07XG4gICAgICBsZXQgYyA9IGkzMihnbG9iYWxJZC55KSAqICR7dGhpcy53b3JrUGVyVGhyZWFkfTtcbiAgICAgIGxldCBkMSA9IGkzMihnbG9iYWxJZC54KSAqIDQ7XG5cbiAgICAgIGxldCBkeUNvcm5lciA9IHZlYzI8aTMyPihyLCBjKSAtIHVuaWZvcm1zLnBhZHM7XG5cbiAgICAgIC8vIENvbnZvbHZlIGR5KD8sID8sIGQyKSB3aXRoIHcoOiwgOiwgZDEsIGQyKSB0byBjb21wdXRlIGR4KHhSLCB4QywgZDEpLlxuICAgICAgLy8gPyA9IHRvIGJlIGRldGVybWluZWQuIDogPSBhY3Jvc3MgYWxsIHZhbHVlcyBpbiB0aGF0IGF4aXMuXG4gICAgICB2YXIgZG90UHJvZDogYXJyYXk8dmVjNDxmMzI+LCAke3RoaXMud29ya1BlclRocmVhZH0+O1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAke3RoaXMud29ya1BlclRocmVhZH07IGkrKykge1xuICAgICAgICBkb3RQcm9kW2ldID0gdmVjNDxmMzI+KDAuMCk7XG4gICAgICB9XG4gICAgICBmb3IgKHZhciB3UiA9IDA7IHdSIDwgdW5pZm9ybXMuZmlsdGVyRGltcy54OyB3UiA9IHdSICsgMSkge1xuICAgICAgICBsZXQgZHlSID0gZjMyKGR5Q29ybmVyLnggKyB3UikgLyBmMzIodW5pZm9ybXMuc3RyaWRlcy54KTtcbiAgICAgICAgbGV0IHdSUGVybSA9IHVuaWZvcm1zLmZpbHRlckRpbXMueCAtIDEgLSB3UjtcbiAgICAgICAgaWYgKGR5UiA8IDAuMCB8fCBkeVIgPj0gZjMyKHVuaWZvcm1zLm91dEJhY2twcm9wWzFdKSB8fFxuICAgICAgICAgICAgZnJhY3QoZHlSKSA+IDAuMCkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGxldCBpZHlSID0gaTMyKGR5Uik7XG5cbiAgICAgICAgZm9yICh2YXIgd0MgPSAwOyB3QyA8IHVuaWZvcm1zLmZpbHRlckRpbXMueTsgd0MgPSB3QyArIDEpIHtcbiAgICAgICAgICBsZXQgZHlDID0gZjMyKGR5Q29ybmVyLnkgKyB3QykgLyBmMzIodW5pZm9ybXMuc3RyaWRlcy55KTtcbiAgICAgICAgICBsZXQgZHlDMiA9IGYzMihkeUNvcm5lci55ICsgMSArIHdDKSAvIGYzMih1bmlmb3Jtcy5zdHJpZGVzLnkpO1xuICAgICAgICAgIGxldCB3Q1Blcm0gPSB1bmlmb3Jtcy5maWx0ZXJEaW1zLnkgLSAxIC0gd0M7XG4gICAgICAgICAgdmFyIGJEeUNWYWwgPSB0cnVlO1xuICAgICAgICAgIHZhciBiRHlDVmFsMiA9IHRydWU7XG4gICAgICAgICAgaWYgKGR5QyA8IDAuMCB8fCBkeUMgPj0gZjMyKHVuaWZvcm1zLm91dEJhY2twcm9wWzJdKSB8fFxuICAgICAgICAgICAgICBmcmFjdChkeUMpID4gMC4wKSB7XG4gICAgICAgICAgICBiRHlDVmFsID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChkeUMyIDwgMC4wIHx8IGR5QzIgPj0gZjMyKHVuaWZvcm1zLm91dEJhY2twcm9wWzJdKSB8fFxuICAgICAgICAgICAgICBmcmFjdChkeUMyKSA+IDAuMCkge1xuICAgICAgICAgICAgYkR5Q1ZhbDIgPSBmYWxzZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBsZXQgaWR5QyA9IGkzMihkeUMpO1xuICAgICAgICAgIGxldCBpZHlDMiA9IGkzMihkeUMyKTtcbiAgICAgICAgICBpZiAoYkR5Q1ZhbCAmJiBiRHlDVmFsMikge1xuICAgICAgICAgICAgbGV0IGQyTGVuZ3RoID0gdW5pZm9ybXMub3V0QmFja3Byb3BbM107XG4gICAgICAgICAgICBmb3IgKHZhciBkMiA9IDA7IGQyIDwgZDJMZW5ndGg7IGQyID0gZDIgKyA0KSB7XG4gICAgICAgICAgICAgIGxldCB3VmFsdWUwID0gZ2V0Vyh3UlBlcm0sIHdDUGVybSwgZDEsIGQyKTtcbiAgICAgICAgICAgICAgbGV0IHdWYWx1ZTEgPSBnZXRXKHdSUGVybSwgd0NQZXJtLCBkMSArIDEsIGQyKTtcbiAgICAgICAgICAgICAgbGV0IHdWYWx1ZTIgPSBnZXRXKHdSUGVybSwgd0NQZXJtLCBkMSArIDIsIGQyKTtcbiAgICAgICAgICAgICAgbGV0IHdWYWx1ZTMgPSBnZXRXKHdSUGVybSwgd0NQZXJtLCBkMSArIDMsIGQyKTtcbiAgICAgICAgICAgICAgdmFyIHhWYWx1ZSA9ICBnZXREeShiYXRjaCwgaWR5UiwgaWR5QywgZDIpO1xuICAgICAgICAgICAgICBsZXQgdG1wdmFsID0gdmVjNDxmMzI+KGRvdCh4VmFsdWUsIHdWYWx1ZTApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvdCh4VmFsdWUsIHdWYWx1ZTEpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvdCh4VmFsdWUsIHdWYWx1ZTIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvdCh4VmFsdWUsIHdWYWx1ZTMpKTtcbiAgICAgICAgICAgICAgZG90UHJvZFswXSA9IGRvdFByb2RbMF0gKyB0bXB2YWw7XG4gICAgICAgICAgICAgIHhWYWx1ZSA9IGdldER5KGJhdGNoLCBpZHlSLCBpZHlDMiwgZDIpO1xuICAgICAgICAgICAgICBkb3RQcm9kWzFdID0gZG90UHJvZFsxXSArIHZlYzQ8ZjMyPihkb3QoeFZhbHVlLCB3VmFsdWUwKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG90KHhWYWx1ZSwgd1ZhbHVlMSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvdCh4VmFsdWUsIHdWYWx1ZTIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb3QoeFZhbHVlLCB3VmFsdWUzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIGlmIChiRHlDVmFsKSB7XG4gICAgICAgICAgICBsZXQgZDJMZW5ndGggPSB1bmlmb3Jtcy5vdXRCYWNrcHJvcFszXTtcbiAgICAgICAgICAgIGZvciAodmFyIGQyID0gMDsgZDIgPCBkMkxlbmd0aDsgZDIgPSBkMiArIDQpIHtcbiAgICAgICAgICAgICAgbGV0IHdWYWx1ZTAgPSBnZXRXKHdSUGVybSwgd0NQZXJtLCBkMSwgZDIpO1xuICAgICAgICAgICAgICBsZXQgd1ZhbHVlMSA9IGdldFcod1JQZXJtLCB3Q1Blcm0sIGQxICsgMSwgZDIpO1xuICAgICAgICAgICAgICBsZXQgd1ZhbHVlMiA9IGdldFcod1JQZXJtLCB3Q1Blcm0sIGQxICsgMiwgZDIpO1xuICAgICAgICAgICAgICBsZXQgd1ZhbHVlMyA9IGdldFcod1JQZXJtLCB3Q1Blcm0sIGQxICsgMywgZDIpO1xuICAgICAgICAgICAgICB2YXIgeFZhbHVlID0gIGdldER5KGJhdGNoLCBpZHlSLCBpZHlDLCBkMik7XG4gICAgICAgICAgICAgIGxldCB0bXB2YWwgPSB2ZWM0PGYzMj4oZG90KHhWYWx1ZSwgd1ZhbHVlMCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG90KHhWYWx1ZSwgd1ZhbHVlMSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG90KHhWYWx1ZSwgd1ZhbHVlMiksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG90KHhWYWx1ZSwgd1ZhbHVlMykpO1xuICAgICAgICAgICAgICBkb3RQcm9kWzBdID0gZG90UHJvZFswXSArIHRtcHZhbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKGJEeUNWYWwyKSB7XG4gICAgICAgICAgICBsZXQgZDJMZW5ndGggPSB1bmlmb3Jtcy5vdXRCYWNrcHJvcFszXTtcbiAgICAgICAgICAgIGZvciAodmFyIGQyID0gMDsgZDIgPCBkMkxlbmd0aDsgZDIgPSBkMiArIDQpIHtcbiAgICAgICAgICAgICAgbGV0IHdWYWx1ZTAgPSBnZXRXKHdSUGVybSwgd0NQZXJtLCBkMSwgZDIpO1xuICAgICAgICAgICAgICBsZXQgd1ZhbHVlMSA9IGdldFcod1JQZXJtLCB3Q1Blcm0sIGQxICsgMSwgZDIpO1xuICAgICAgICAgICAgICBsZXQgd1ZhbHVlMiA9IGdldFcod1JQZXJtLCB3Q1Blcm0sIGQxICsgMiwgZDIpO1xuICAgICAgICAgICAgICBsZXQgd1ZhbHVlMyA9IGdldFcod1JQZXJtLCB3Q1Blcm0sIGQxICsgMywgZDIpO1xuICAgICAgICAgICAgICB2YXIgeFZhbHVlID0gIGdldER5KGJhdGNoLCBpZHlSLCBpZHlDMiwgZDIpO1xuICAgICAgICAgICAgICBsZXQgdG1wdmFsID0gdmVjNDxmMzI+KGRvdCh4VmFsdWUsIHdWYWx1ZTApLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvdCh4VmFsdWUsIHdWYWx1ZTEpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvdCh4VmFsdWUsIHdWYWx1ZTIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvdCh4VmFsdWUsIHdWYWx1ZTMpKTtcbiAgICAgICAgICAgICAgZG90UHJvZFsxXSA9IGRvdFByb2RbMV0gKyB0bXB2YWw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJHt0aGlzLndvcmtQZXJUaHJlYWR9OyBpID0gaSArIDEpIHtcbiAgICAgICAgbGV0IGNvb3JkcyA9IHZlYzQ8aTMyPihiYXRjaCwgciwgYyArIGksIGQxKTtcbiAgICAgICAgaWYgKGNvb3Jkc0luQm91bmRzNEQoY29vcmRzLCB1bmlmb3Jtcy5vdXRTaGFwZSkpIHtcbiAgICAgICAgICBzZXRPdXRwdXRBdENvb3Jkcyhjb29yZHNbMF0sIGNvb3Jkc1sxXSwgY29vcmRzWzJdLCBjb29yZHNbM10sIGRvdFByb2RbaV0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGA7XG4gICAgcmV0dXJuIHRoaXMuaXNWZWM0ID9cbiAgICAgICAgYFxuICAgICR7dmVjNFNuaXBwZXR9XG4gICAgYCA6XG4gICAgICAgIGBcbiAgICAke21haW4oJ2luZGV4Jyl9IHtcbiAgICAgIGlmKGluZGV4IDwgdW5pZm9ybXMuc2l6ZSkge1xuICAgICAgICBsZXQgY29vcmRzID0gZ2V0Q29vcmRzRnJvbUluZGV4KGluZGV4KTtcbiAgICAgICAgbGV0IGJhdGNoID0gY29vcmRzWzBdO1xuICAgICAgICBsZXQgZDEgPSBjb29yZHNbJHtjaGFubmVsRGltfV07XG5cbiAgICAgICAgbGV0IGR5Q29ybmVyID0gdmVjMjxpMzI+KGNvb3Jkc1ske3Jvd0RpbX1dLCBjb29yZHNbJHtcbiAgICAgICAgICAgIGNvbERpbX1dKSAtIHVuaWZvcm1zLnBhZHM7XG4gICAgICAgIGxldCBkeVJDb3JuZXIgPSBkeUNvcm5lci54O1xuICAgICAgICBsZXQgZHlDQ29ybmVyID0gZHlDb3JuZXIueTtcblxuICAgICAgICAvLyBDb252b2x2ZSBkeSg/LCA/LCBkMikgd2l0aCB3KDosIDosIGQxLCBkMikgdG8gY29tcHV0ZSBkeCh4UiwgeEMsIGQxKS5cbiAgICAgICAgLy8gPyA9IHRvIGJlIGRldGVybWluZWQuIDogPSBhY3Jvc3MgYWxsIHZhbHVlcyBpbiB0aGF0IGF4aXMuXG4gICAgICAgIHZhciBkb3RQcm9kID0gMC4wO1xuICAgICAgICBmb3IgKHZhciB3UiA9IDA7IHdSIDwgdW5pZm9ybXMuZmlsdGVyRGltcy54OyB3UiA9IHdSICsgMSkge1xuICAgICAgICAgIGxldCBkeVIgPSAoZjMyKGR5UkNvcm5lcikgKyBmMzIod1IpKSAvIGYzMih1bmlmb3Jtcy5zdHJpZGVzLngpO1xuICAgICAgICAgIGxldCB3UlBlcm0gPSB1bmlmb3Jtcy5maWx0ZXJEaW1zLnggLSAxIC0gd1I7XG4gICAgICAgICAgaWYgKGR5UiA8IDAuMCB8fCBkeVIgPj0gZjMyKHVuaWZvcm1zLm91dEJhY2twcm9wWzFdKSB8fCBmcmFjdChkeVIpID4gMC4wIHx8XG4gICAgICAgICAgICAgIHdSUGVybSA8IDApIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBsZXQgaWR5UiA9IGkzMihkeVIpO1xuXG4gICAgICAgICAgZm9yICh2YXIgd0MgPSAwOyB3QyA8IHVuaWZvcm1zLmZpbHRlckRpbXMueTsgd0MgPSB3QyArIDEpIHtcbiAgICAgICAgICAgIGxldCBkeUMgPSAoZjMyKGR5Q0Nvcm5lcikgKyBmMzIod0MpKSAvIGYzMih1bmlmb3Jtcy5zdHJpZGVzLnkpO1xuICAgICAgICAgICAgbGV0IHdDUGVybSA9IHVuaWZvcm1zLmZpbHRlckRpbXMueSAtIDEgLSB3QztcbiAgICAgICAgICAgIGlmIChkeUMgPCAwLjAgfHwgZHlDID49IGYzMih1bmlmb3Jtcy5vdXRCYWNrcHJvcFsyXSkgfHxcbiAgICAgICAgICAgICAgICBmcmFjdChkeUMpID4gMC4wIHx8IHdDUGVybSA8IDApIHtcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgaWR5QyA9IGkzMihkeUMpO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBkMiA9IDA7IGQyIDwgdW5pZm9ybXMub3V0QmFja3Byb3BbM107IGQyID0gZDIgKyAxKSB7XG4gICAgICAgICAgICAgIGxldCB4VmFsdWUgPSAke1xuICAgICAgICAgICAgdGhpcy5pc0NoYW5uZWxzTGFzdCA/ICdnZXREeShiYXRjaCwgaWR5UiwgaWR5QywgZDIpJyA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2dldER5KGJhdGNoLCBkMiwgaWR5UiwgaWR5QyknfTtcbiAgICAgICAgICAgICAgbGV0IHdWYWx1ZSA9IGdldFcod1JQZXJtLCB3Q1Blcm0sIGQxLCBkMik7XG4gICAgICAgICAgICAgIGRvdFByb2QgPSBkb3RQcm9kICsgeFZhbHVlICogd1ZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzZXRPdXRwdXRBdEluZGV4KGluZGV4LCBkb3RQcm9kKTtcbiAgICAgIH1cbiAgICB9XG4gIGA7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIENvbnYyRERlckZpbHRlclByb2dyYW0gaW1wbGVtZW50cyBXZWJHUFVQcm9ncmFtIHtcbiAgdmFyaWFibGVOYW1lcyA9IFsneCcsICdkeSddO1xuICB1bmlmb3JtcyA9XG4gICAgICAncGFkcyA6IHZlYzI8aTMyPiwgc3RyaWRlcyA6IHZlYzI8aTMyPiwgYmF0Y2hTaXplIDogaTMyLCBvdXRIZWlnaHQgOiBpMzIsIG91dFdpZHRoIDogaTMyLCBpbkhlaWdodCA6IGkzMiwgaW5XaWR0aCA6IGkzMiwnO1xuICBvdXRwdXRTaGFwZTogbnVtYmVyW107XG4gIHNoYWRlcktleTogc3RyaW5nO1xuICBkaXNwYXRjaExheW91dDoge3g6IG51bWJlcltdfTtcbiAgZGlzcGF0Y2g6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXTtcbiAgd29ya2dyb3VwU2l6ZTogW251bWJlciwgbnVtYmVyLCBudW1iZXJdID0gWzY0LCAxLCAxXTtcbiAgaXNDaGFubmVsc0xhc3Q6IGJvb2xlYW47XG4gIHNpemUgPSB0cnVlO1xuXG4gIGNvbnN0cnVjdG9yKGNvbnZJbmZvOiBiYWNrZW5kX3V0aWwuQ29udjJESW5mbykge1xuICAgIHRoaXMub3V0cHV0U2hhcGUgPSBjb252SW5mby5maWx0ZXJTaGFwZTtcbiAgICB0aGlzLmRpc3BhdGNoTGF5b3V0ID0gZmxhdERpc3BhdGNoTGF5b3V0KHRoaXMub3V0cHV0U2hhcGUpO1xuICAgIHRoaXMuZGlzcGF0Y2ggPSBjb21wdXRlRGlzcGF0Y2goXG4gICAgICAgIHRoaXMuZGlzcGF0Y2hMYXlvdXQsIHRoaXMub3V0cHV0U2hhcGUsIHRoaXMud29ya2dyb3VwU2l6ZSk7XG4gICAgdGhpcy5pc0NoYW5uZWxzTGFzdCA9IGNvbnZJbmZvLmRhdGFGb3JtYXQgPT09ICdjaGFubmVsc0xhc3QnO1xuICAgIHRoaXMuc2hhZGVyS2V5ID0gYGNvbnYyRERlckZpbHRlcl8ke3RoaXMuaXNDaGFubmVsc0xhc3R9YDtcbiAgfVxuXG4gIGdldFVzZXJDb2RlKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGBcbiAgICAke21haW4oJ2luZGV4Jyl9IHtcbiAgICAgIGlmKGluZGV4IDwgdW5pZm9ybXMuc2l6ZSkge1xuICAgICAgICBsZXQgY29vcmRzID0gZ2V0Q29vcmRzRnJvbUluZGV4KGluZGV4KTtcbiAgICAgICAgbGV0IHdSID0gY29vcmRzWzBdO1xuICAgICAgICBsZXQgd0MgPSBjb29yZHNbMV07XG4gICAgICAgIGxldCBkMSA9IGNvb3Jkc1syXTtcbiAgICAgICAgbGV0IGQyID0gY29vcmRzWzNdO1xuXG4gICAgICAgIC8vIENvbnZvbHZlIHgoPywgPywgZDEpIHdpdGggZHkoOiwgOiwgZDIpIHRvIGdldCBkdyh3Uiwgd0MsIGQxLCBkMikuXG4gICAgICAgIC8vID8gPSB0byBiZSBkZXRlcm1pbmVkLiA6ID0gYWNyb3NzIGFsbCB2YWx1ZXMgaW4gdGhhdCBheGlzLlxuICAgICAgICB2YXIgZG90UHJvZCA9IDAuMDtcbiAgICAgICAgZm9yICh2YXIgYiA9IDA7IGIgPCB1bmlmb3Jtcy5iYXRjaFNpemU7IGIgPSBiICsgMSkge1xuICAgICAgICAgIGZvciAodmFyIHlSID0gMDsgeVIgPCB1bmlmb3Jtcy5vdXRIZWlnaHQ7IHlSID0geVIgKyAxKSB7XG4gICAgICAgICAgICBsZXQgeFIgPSB3UiArIHlSICogdW5pZm9ybXMuc3RyaWRlc1swXSAtIHVuaWZvcm1zLnBhZHNbMF07XG4gICAgICAgICAgICBpZiAoeFIgPCAwIHx8IHhSID49IHVuaWZvcm1zLmluSGVpZ2h0KSB7XG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb3IgKHZhciB5QyA9IDA7IHlDIDwgdW5pZm9ybXMub3V0V2lkdGg7IHlDID0geUMgKyAxKSB7XG4gICAgICAgICAgICAgIGxldCB4QyA9IHdDICsgeUMgKiB1bmlmb3Jtcy5zdHJpZGVzWzFdIC0gdW5pZm9ybXMucGFkc1sxXTtcblxuICAgICAgICAgICAgICBpZiAoeEMgPCAwIHx8IHhDID49IHVuaWZvcm1zLmluV2lkdGgpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmICgke3RoaXMuaXNDaGFubmVsc0xhc3R9KSB7XG4gICAgICAgICAgICAgICAgbGV0IGR5VmFsdWUgPSBnZXREeShiLCB5UiwgeUMsIGQyKTtcbiAgICAgICAgICAgICAgICBsZXQgeFZhbHVlID0gZ2V0WChiLCB4UiwgeEMsIGQxKTtcbiAgICAgICAgICAgICAgICBkb3RQcm9kID0gZG90UHJvZCArIHhWYWx1ZSAqIGR5VmFsdWU7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IGR5VmFsdWUgPSBnZXREeShiLCBkMiwgeVIsIHlDKTtcbiAgICAgICAgICAgICAgICBsZXQgeFZhbHVlID0gZ2V0WChiLCBkMSwgeFIsIHhDKTtcbiAgICAgICAgICAgICAgICBkb3RQcm9kID0gZG90UHJvZCArIHhWYWx1ZSAqIGR5VmFsdWU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc2V0T3V0cHV0QXRJbmRleChpbmRleCwgZG90UHJvZCk7XG4gICAgICB9XG4gICAgfVxuICBgO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBDb252M0REZXJGaWx0ZXJQcm9ncmFtIGltcGxlbWVudHMgV2ViR1BVUHJvZ3JhbSB7XG4gIHZhcmlhYmxlTmFtZXMgPSBbJ3gnLCAnZHknXTtcbiAgdW5pZm9ybXMgPVxuICAgICAgYHBhZHMgOiB2ZWMzPGkzMj4sIHN0cmlkZXMgOiB2ZWMzPGkzMj4sIGJhdGNoU2l6ZSA6IGkzMiwgb3V0RGVwdGggOiBpMzIsXG4gICAgICAgb3V0SGVpZ2h0IDogaTMyLCBvdXRXaWR0aCA6IGkzMiwgaW5EZXB0aCA6IGkzMiwgaW5IZWlnaHQgOiBpMzIsIGluV2lkdGggOiBpMzIsYDtcbiAgb3V0cHV0U2hhcGU6IG51bWJlcltdO1xuICBzaGFkZXJLZXk6IHN0cmluZztcbiAgZGlzcGF0Y2hMYXlvdXQ6IHt4OiBudW1iZXJbXX07XG4gIGRpc3BhdGNoOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl07XG4gIHdvcmtncm91cFNpemU6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXSA9IFs2NCwgMSwgMV07XG4gIHNpemUgPSB0cnVlO1xuXG4gIGNvbnN0cnVjdG9yKGNvbnZJbmZvOiBiYWNrZW5kX3V0aWwuQ29udjNESW5mbykge1xuICAgIHRoaXMub3V0cHV0U2hhcGUgPSBjb252SW5mby5maWx0ZXJTaGFwZTtcbiAgICB0aGlzLmRpc3BhdGNoTGF5b3V0ID0gZmxhdERpc3BhdGNoTGF5b3V0KHRoaXMub3V0cHV0U2hhcGUpO1xuICAgIHRoaXMuZGlzcGF0Y2ggPSBjb21wdXRlRGlzcGF0Y2goXG4gICAgICAgIHRoaXMuZGlzcGF0Y2hMYXlvdXQsIHRoaXMub3V0cHV0U2hhcGUsIHRoaXMud29ya2dyb3VwU2l6ZSk7XG4gICAgdGhpcy5zaGFkZXJLZXkgPSBgY29udjNERGVyRmlsdGVyYDtcbiAgfVxuXG4gIGdldFVzZXJDb2RlKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGBcbiAgICAke21haW4oJ2luZGV4Jyl9IHtcbiAgICAgIGlmKGluZGV4IDwgdW5pZm9ybXMuc2l6ZSkge1xuICAgICAgICBsZXQgY29vcmRzID0gZ2V0Q29vcmRzRnJvbUluZGV4KGluZGV4KTtcbiAgICAgICAgbGV0IHdGID0gY29vcmRzLng7XG4gICAgICAgIGxldCB3UiA9IGNvb3Jkcy55O1xuICAgICAgICBsZXQgd0MgPSBjb29yZHMuejtcbiAgICAgICAgbGV0IGQxID0gY29vcmRzLnc7XG4gICAgICAgIGxldCBkMiA9IGNvb3Jkcy51O1xuXG4gICAgICAgIHZhciBkb3RQcm9kID0gMC4wO1xuICAgICAgICBmb3IgKHZhciBiID0gMDsgYiA8IHVuaWZvcm1zLmJhdGNoU2l6ZTsgYisrKSB7XG4gICAgICAgICAgZm9yICh2YXIgeUYgPSAwOyB5RiA8IHVuaWZvcm1zLm91dERlcHRoOyB5RisrKSB7XG4gICAgICAgICAgICBsZXQgeEYgPSB3RiArIHlGICogdW5pZm9ybXMuc3RyaWRlc1swXSAtIHVuaWZvcm1zLnBhZHNbMF07XG4gICAgICAgICAgICBpZiAoeEYgPCAwIHx8IHhGID49IHVuaWZvcm1zLmluRGVwdGgpIHtcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvciAodmFyIHlSID0gMDsgeVIgPCB1bmlmb3Jtcy5vdXRIZWlnaHQ7IHlSKyspIHtcbiAgICAgICAgICAgICAgbGV0IHhSID0gd1IgKyB5UiAqIHVuaWZvcm1zLnN0cmlkZXNbMV0gLSB1bmlmb3Jtcy5wYWRzWzFdO1xuICAgICAgICAgICAgICBpZiAoeFIgPCAwIHx8IHhSID49IHVuaWZvcm1zLmluSGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBmb3IgKHZhciB5QyA9IDA7IHlDIDwgdW5pZm9ybXMub3V0V2lkdGg7IHlDKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgeEMgPSB3QyArIHlDICogdW5pZm9ybXMuc3RyaWRlc1syXSAtIHVuaWZvcm1zLnBhZHNbMl07XG4gICAgICAgICAgICAgICAgaWYgKHhDIDwgMCB8fCB4QyA+PSB1bmlmb3Jtcy5pbldpZHRoKSB7XG4gICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBsZXQgZHlWYWx1ZSA9IGdldER5KGIsIHlGLCB5UiwgeUMsIGQyKTtcbiAgICAgICAgICAgICAgICBsZXQgeFZhbHVlID0gZ2V0WChiLCB4RiwgeFIsIHhDLCBkMSk7XG4gICAgICAgICAgICAgICAgZG90UHJvZCArPSB4VmFsdWUgKiBkeVZhbHVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNldE91dHB1dEF0SW5kZXgoaW5kZXgsIGRvdFByb2QpO1xuICAgICAgfVxuICAgIH1cbiAgYDtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQ29udjNERGVySW5wdXRQcm9ncmFtIGltcGxlbWVudHMgV2ViR1BVUHJvZ3JhbSB7XG4gIHZhcmlhYmxlTmFtZXMgPSBbJ2R5JywgJ1cnXTtcbiAgdW5pZm9ybXMgPSBgZmlsdGVyRGltcyA6IHZlYzM8aTMyPiwgcGFkcyA6IHZlYzM8aTMyPiwgc3RyaWRlcyA6IHZlYzM8aTMyPixcbiAgICAgIG91dERlcHRoIDogaTMyLCBvdXRIZWlnaHQgOiBpMzIsIG91dFdpZHRoIDogaTMyLCBvdXRDaGFubmVscyA6IGkzMixgO1xuICBvdXRwdXRTaGFwZTogbnVtYmVyW107XG4gIHNoYWRlcktleTogc3RyaW5nO1xuICBkaXNwYXRjaExheW91dDoge3g6IG51bWJlcltdfTtcbiAgZGlzcGF0Y2g6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXTtcbiAgd29ya2dyb3VwU2l6ZTogW251bWJlciwgbnVtYmVyLCBudW1iZXJdID0gWzY0LCAxLCAxXTtcbiAgc2l6ZSA9IHRydWU7XG5cbiAgY29uc3RydWN0b3IoY29udkluZm86IGJhY2tlbmRfdXRpbC5Db252M0RJbmZvKSB7XG4gICAgdGhpcy5vdXRwdXRTaGFwZSA9IGNvbnZJbmZvLmluU2hhcGU7XG4gICAgdGhpcy5kaXNwYXRjaExheW91dCA9IGZsYXREaXNwYXRjaExheW91dCh0aGlzLm91dHB1dFNoYXBlKTtcbiAgICB0aGlzLmRpc3BhdGNoID0gY29tcHV0ZURpc3BhdGNoKFxuICAgICAgICB0aGlzLmRpc3BhdGNoTGF5b3V0LCB0aGlzLm91dHB1dFNoYXBlLCB0aGlzLndvcmtncm91cFNpemUpO1xuICAgIHRoaXMuc2hhZGVyS2V5ID0gYGNvbnYzRERlcklucHV0YDtcbiAgfVxuXG4gIGdldFVzZXJDb2RlKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGBcbiAgICAke21haW4oJ2luZGV4Jyl9IHtcbiAgICAgIGlmKGluZGV4IDwgdW5pZm9ybXMuc2l6ZSkge1xuICAgICAgICBsZXQgY29vcmRzID0gZ2V0Q29vcmRzRnJvbUluZGV4KGluZGV4KTtcbiAgICAgICAgbGV0IGJhdGNoID0gY29vcmRzLng7XG4gICAgICAgIGxldCBkMSA9IGNvb3Jkcy51O1xuXG4gICAgICAgIGxldCBkeUNvcm5lciA9IHZlYzM8aTMyPihjb29yZHMueSwgY29vcmRzLnosIGNvb3Jkcy53KSAtIHVuaWZvcm1zLnBhZHM7XG4gICAgICAgIGxldCBkeUZDb3JuZXIgPSBkeUNvcm5lci54O1xuICAgICAgICBsZXQgZHlSQ29ybmVyID0gZHlDb3JuZXIueTtcbiAgICAgICAgbGV0IGR5Q0Nvcm5lciA9IGR5Q29ybmVyLno7XG5cbiAgICAgICAgdmFyIGRvdFByb2QgPSAwLjA7XG4gICAgICAgIGZvciAodmFyIHdGID0gMDsgd0YgPCB1bmlmb3Jtcy5maWx0ZXJEaW1zWzBdOyB3RisrKSB7XG4gICAgICAgICAgbGV0IGR5RiA9IGYzMihkeUZDb3JuZXIgKyB3RikgLyBmMzIodW5pZm9ybXMuc3RyaWRlc1swXSk7XG4gICAgICAgICAgaWYgKGR5RiA8IDAuMCB8fCBkeUYgPj0gZjMyKHVuaWZvcm1zLm91dERlcHRoKSB8fCBmcmFjdChkeUYpID4gMC4wKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgbGV0IGlkeUYgPSBpMzIoZHlGKTtcblxuICAgICAgICAgIGxldCB3RlBlcm0gPSB1bmlmb3Jtcy5maWx0ZXJEaW1zWzBdIC0gMSAtIHdGO1xuXG4gICAgICAgICAgZm9yICh2YXIgd1IgPSAwOyB3UiA8IHVuaWZvcm1zLmZpbHRlckRpbXNbMV07IHdSKyspIHtcbiAgICAgICAgICAgIGxldCBkeVIgPSBmMzIoZHlSQ29ybmVyICsgd1IpIC8gZjMyKHVuaWZvcm1zLnN0cmlkZXNbMV0pO1xuXG4gICAgICAgICAgICBpZiAoZHlSIDwgMC4wIHx8IGR5UiA+PSBmMzIodW5pZm9ybXMub3V0SGVpZ2h0KSB8fCBmcmFjdChkeVIpID4gMC4wKSB7XG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IGlkeVIgPSBpMzIoZHlSKTtcblxuICAgICAgICAgICAgbGV0IHdSUGVybSA9IHVuaWZvcm1zLmZpbHRlckRpbXNbMV0gLSAxIC0gd1I7XG5cbiAgICAgICAgICAgIGZvciAodmFyIHdDID0gMDsgd0MgPCB1bmlmb3Jtcy5maWx0ZXJEaW1zWzJdOyB3QysrKSB7XG4gICAgICAgICAgICAgIGxldCBkeUMgPSBmMzIoZHlDQ29ybmVyICsgd0MpIC8gZjMyKHVuaWZvcm1zLnN0cmlkZXNbMl0pO1xuXG4gICAgICAgICAgICAgIGlmIChkeUMgPCAwLjAgfHwgZHlDID49IGYzMih1bmlmb3Jtcy5vdXRXaWR0aCkgfHwgZnJhY3QoZHlDKSA+IDAuMCkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGxldCBpZHlDID0gaTMyKGR5Qyk7XG5cbiAgICAgICAgICAgICAgbGV0IHdDUGVybSA9IHVuaWZvcm1zLmZpbHRlckRpbXNbMl0gLSAxIC0gd0M7XG5cbiAgICAgICAgICAgICAgZm9yICh2YXIgZDIgPSAwOyBkMiA8IHVuaWZvcm1zLm91dENoYW5uZWxzOyBkMisrKSB7XG4gICAgICAgICAgICAgICAgbGV0IHhWYWx1ZSA9IGdldER5KGJhdGNoLCBpZHlGLCBpZHlSLCBpZHlDLCBkMik7XG4gICAgICAgICAgICAgICAgbGV0IHdWYWx1ZSA9IGdldFcod0ZQZXJtLCB3UlBlcm0sIHdDUGVybSwgZDEsIGQyKTtcbiAgICAgICAgICAgICAgICBkb3RQcm9kICs9IHhWYWx1ZSAqIHdWYWx1ZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzZXRPdXRwdXRBdEluZGV4KGluZGV4LCBkb3RQcm9kKTtcbiAgICAgIH1cbiAgICB9XG4gIGA7XG4gIH1cbn1cbiJdfQ==","/**\n * @license\n * Copyright 2022 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { backend_util, Conv2DBackpropFilter } from '@tensorflow/tfjs-core';\nimport { Conv2DDerFilterProgram } from '../conv_backprop_webgpu';\nexport function conv2DBackpropFilter(args) {\n    const { inputs, backend, attrs } = args;\n    const { x, dy } = inputs;\n    const { strides, pad, dataFormat, dimRoundingMode, filterShape } = attrs;\n    const $dataFormat = backend_util.convertConv2DDataFormat(dataFormat);\n    const convInfo = backend_util.computeConv2DInfo(x.shape, filterShape, strides, 1 /* dilations */, pad, dimRoundingMode, false /* depthwise */, $dataFormat);\n    const program = new Conv2DDerFilterProgram(convInfo);\n    const uniformData = [\n        { type: 'int32', data: [convInfo.padInfo.top, convInfo.padInfo.left] },\n        { type: 'int32', data: [convInfo.strideHeight, convInfo.strideWidth] },\n        { type: 'int32', data: [convInfo.batchSize] },\n        { type: 'int32', data: [convInfo.outHeight] },\n        { type: 'int32', data: [convInfo.outWidth] },\n        { type: 'int32', data: [convInfo.inHeight] },\n        { type: 'int32', data: [convInfo.inWidth] }\n    ];\n    return backend.runWebGPUProgram(program, [x, dy], x.dtype, uniformData);\n}\nexport const conv2DBackpropFilterConfig = {\n    kernelName: Conv2DBackpropFilter,\n    backendName: 'webgpu',\n    kernelFunc: conv2DBackpropFilter\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ29udjJEQmFja3Byb3BGaWx0ZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9rZXJuZWxzL0NvbnYyREJhY2twcm9wRmlsdGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sRUFBQyxZQUFZLEVBQUUsb0JBQW9CLEVBQThGLE1BQU0sdUJBQXVCLENBQUM7QUFHdEssT0FBTyxFQUFDLHNCQUFzQixFQUFDLE1BQU0seUJBQXlCLENBQUM7QUFFL0QsTUFBTSxVQUFVLG9CQUFvQixDQUFDLElBSXBDO0lBQ0MsTUFBTSxFQUFDLE1BQU0sRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFDLEdBQUcsSUFBSSxDQUFDO0lBQ3RDLE1BQU0sRUFBQyxDQUFDLEVBQUUsRUFBRSxFQUFDLEdBQUcsTUFBTSxDQUFDO0lBQ3ZCLE1BQU0sRUFBQyxPQUFPLEVBQUUsR0FBRyxFQUFFLFVBQVUsRUFBRSxlQUFlLEVBQUUsV0FBVyxFQUFDLEdBQUcsS0FBSyxDQUFDO0lBRXZFLE1BQU0sV0FBVyxHQUFHLFlBQVksQ0FBQyx1QkFBdUIsQ0FBQyxVQUFVLENBQUMsQ0FBQztJQUNyRSxNQUFNLFFBQVEsR0FBRyxZQUFZLENBQUMsaUJBQWlCLENBQzNDLENBQUMsQ0FBQyxLQUF5QyxFQUFFLFdBQVcsRUFBRSxPQUFPLEVBQ2pFLENBQUMsQ0FBQyxlQUFlLEVBQUUsR0FBRyxFQUFFLGVBQWUsRUFBRSxLQUFLLENBQUMsZUFBZSxFQUM5RCxXQUFXLENBQUMsQ0FBQztJQUVqQixNQUFNLE9BQU8sR0FBRyxJQUFJLHNCQUFzQixDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQ3JELE1BQU0sV0FBVyxHQUFHO1FBQ2xCLEVBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxRQUFRLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxFQUFDO1FBQ3BFLEVBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsQ0FBQyxRQUFRLENBQUMsWUFBWSxFQUFFLFFBQVEsQ0FBQyxXQUFXLENBQUMsRUFBQztRQUNwRSxFQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxFQUFDO1FBQzNDLEVBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLEVBQUM7UUFDM0MsRUFBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsRUFBQztRQUMxQyxFQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxFQUFDO1FBQzFDLEVBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLEVBQUM7S0FDMUMsQ0FBQztJQUNGLE9BQU8sT0FBTyxDQUFDLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsS0FBSyxFQUFFLFdBQVcsQ0FBQyxDQUFDO0FBQzFFLENBQUM7QUFFRCxNQUFNLENBQUMsTUFBTSwwQkFBMEIsR0FBaUI7SUFDdEQsVUFBVSxFQUFFLG9CQUFvQjtJQUNoQyxXQUFXLEVBQUUsUUFBUTtJQUNyQixVQUFVLEVBQUUsb0JBQTZDO0NBQzFELENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7YmFja2VuZF91dGlsLCBDb252MkRCYWNrcHJvcEZpbHRlciwgQ29udjJEQmFja3Byb3BGaWx0ZXJBdHRycywgQ29udjJEQmFja3Byb3BGaWx0ZXJJbnB1dHMsIEtlcm5lbENvbmZpZywgS2VybmVsRnVuYywgVGVuc29ySW5mb30gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcblxuaW1wb3J0IHtXZWJHUFVCYWNrZW5kfSBmcm9tICcuLi9iYWNrZW5kX3dlYmdwdSc7XG5pbXBvcnQge0NvbnYyRERlckZpbHRlclByb2dyYW19IGZyb20gJy4uL2NvbnZfYmFja3Byb3Bfd2ViZ3B1JztcblxuZXhwb3J0IGZ1bmN0aW9uIGNvbnYyREJhY2twcm9wRmlsdGVyKGFyZ3M6IHtcbiAgaW5wdXRzOiBDb252MkRCYWNrcHJvcEZpbHRlcklucHV0cyxcbiAgYmFja2VuZDogV2ViR1BVQmFja2VuZCxcbiAgYXR0cnM6IENvbnYyREJhY2twcm9wRmlsdGVyQXR0cnNcbn0pOiBUZW5zb3JJbmZvIHtcbiAgY29uc3Qge2lucHV0cywgYmFja2VuZCwgYXR0cnN9ID0gYXJncztcbiAgY29uc3Qge3gsIGR5fSA9IGlucHV0cztcbiAgY29uc3Qge3N0cmlkZXMsIHBhZCwgZGF0YUZvcm1hdCwgZGltUm91bmRpbmdNb2RlLCBmaWx0ZXJTaGFwZX0gPSBhdHRycztcblxuICBjb25zdCAkZGF0YUZvcm1hdCA9IGJhY2tlbmRfdXRpbC5jb252ZXJ0Q29udjJERGF0YUZvcm1hdChkYXRhRm9ybWF0KTtcbiAgY29uc3QgY29udkluZm8gPSBiYWNrZW5kX3V0aWwuY29tcHV0ZUNvbnYyREluZm8oXG4gICAgICB4LnNoYXBlIGFzIFtudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXJdLCBmaWx0ZXJTaGFwZSwgc3RyaWRlcyxcbiAgICAgIDEgLyogZGlsYXRpb25zICovLCBwYWQsIGRpbVJvdW5kaW5nTW9kZSwgZmFsc2UgLyogZGVwdGh3aXNlICovLFxuICAgICAgJGRhdGFGb3JtYXQpO1xuXG4gIGNvbnN0IHByb2dyYW0gPSBuZXcgQ29udjJERGVyRmlsdGVyUHJvZ3JhbShjb252SW5mbyk7XG4gIGNvbnN0IHVuaWZvcm1EYXRhID0gW1xuICAgIHt0eXBlOiAnaW50MzInLCBkYXRhOiBbY29udkluZm8ucGFkSW5mby50b3AsIGNvbnZJbmZvLnBhZEluZm8ubGVmdF19LFxuICAgIHt0eXBlOiAnaW50MzInLCBkYXRhOiBbY29udkluZm8uc3RyaWRlSGVpZ2h0LCBjb252SW5mby5zdHJpZGVXaWR0aF19LFxuICAgIHt0eXBlOiAnaW50MzInLCBkYXRhOiBbY29udkluZm8uYmF0Y2hTaXplXX0sXG4gICAge3R5cGU6ICdpbnQzMicsIGRhdGE6IFtjb252SW5mby5vdXRIZWlnaHRdfSxcbiAgICB7dHlwZTogJ2ludDMyJywgZGF0YTogW2NvbnZJbmZvLm91dFdpZHRoXX0sXG4gICAge3R5cGU6ICdpbnQzMicsIGRhdGE6IFtjb252SW5mby5pbkhlaWdodF19LFxuICAgIHt0eXBlOiAnaW50MzInLCBkYXRhOiBbY29udkluZm8uaW5XaWR0aF19XG4gIF07XG4gIHJldHVybiBiYWNrZW5kLnJ1bldlYkdQVVByb2dyYW0ocHJvZ3JhbSwgW3gsIGR5XSwgeC5kdHlwZSwgdW5pZm9ybURhdGEpO1xufVxuXG5leHBvcnQgY29uc3QgY29udjJEQmFja3Byb3BGaWx0ZXJDb25maWc6IEtlcm5lbENvbmZpZyA9IHtcbiAga2VybmVsTmFtZTogQ29udjJEQmFja3Byb3BGaWx0ZXIsXG4gIGJhY2tlbmROYW1lOiAnd2ViZ3B1JyxcbiAga2VybmVsRnVuYzogY29udjJEQmFja3Byb3BGaWx0ZXIgYXMgdW5rbm93biBhcyBLZXJuZWxGdW5jXG59O1xuIl19","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { util } from '@tensorflow/tfjs-core';\nimport { makeMatMulPackedSource, makeMatMulPackedVec4Source } from './matmul_packed_webgpu';\nimport { typeSnippet } from './webgpu_program';\nimport { computeDispatch, computeWorkgroupSizeForConv2d, computeWorkPerThreadForConv2d } from './webgpu_util';\nfunction conv2dTransposeCommonSnippet(innerElementSize = 4) {\n    const getWSnippet = (innerElementSize) => {\n        switch (innerElementSize) {\n            case 1:\n                return 'return W[getIndexFromCoords4D(coord, uniforms.wShape)];';\n            case 4:\n                return `\n            let coord1 = vec4<i32>(coordX, coordY, col + 1, rowInner);\n            let coord2 = vec4<i32>(coordX, coordY, col + 2, rowInner);\n            let coord3 = vec4<i32>(coordX, coordY, col + 3, rowInner);\n            let v0 = W[getIndexFromCoords4D(coord, uniforms.wShape)];\n            let v1 = W[getIndexFromCoords4D(coord1, uniforms.wShape)];\n            let v2 = W[getIndexFromCoords4D(coord2, uniforms.wShape)];\n            let v3 = W[getIndexFromCoords4D(coord3, uniforms.wShape)];\n            return vec4<f32>(v0, v1, v2, v3);\n            `;\n            default:\n                throw new Error(`innerElementSize ${innerElementSize} is not supported.`);\n        }\n    };\n    const readASnippet = `\n      let outRow = row / uniforms.outShape[2];\n      let outCol = row % uniforms.outShape[2];\n\n      let WRow = col / (uniforms.filterDims[1] * uniforms.outBackprop[3]);\n      let WCol = col / uniforms.outBackprop[3] % uniforms.filterDims[1];\n      let xR = f32(outRow - uniforms.pads[0] + WRow) / f32(uniforms.strides[0]);\n      let xC = f32(outCol - uniforms.pads[1] + WCol) / f32(uniforms.strides[1]);\n      if (xR < 0.0 || xR >= f32(uniforms.outBackprop[1]) || fract(xR) > 0.0) {\n        return ${typeSnippet(innerElementSize)}(0.0);\n      }\n      if (xC < 0.0 || xC >= f32(uniforms.outBackprop[2]) || fract(xC) > 0.0) {\n        return ${typeSnippet(innerElementSize)}(0.0);\n      }\n      let coord = vec4<i32>(\n          batch,\n          i32(xR),\n          i32(xC),\n          col % uniforms.outBackprop[3]);\n      return x[getIndexFromCoords4D(coord, uniforms.xShape)/${innerElementSize}];`;\n    const sampleA = `if (row < uniforms.dimAOuter && col < uniforms.dimInner) {\n        ${readASnippet}\n      }\n      return ${typeSnippet(innerElementSize)}(0.0);`;\n    const userCode = `\n  fn mm_readA(batch: i32, row : i32, col : i32) -> ${typeSnippet(innerElementSize)} {\n    ${sampleA}\n  }\n\n  fn mm_readB(batch: i32, row : i32, col : i32) -> ${typeSnippet(innerElementSize)} {\n    let coordX = uniforms.filterDims.x - 1 -\n        row / (uniforms.filterDims[1] * uniforms.outBackprop[3]);\n    let coordY = uniforms.filterDims.y - 1 -\n        (row / uniforms.outBackprop[3]) % uniforms.filterDims[1];\n    if (row < uniforms.dimInner && col < uniforms.dimBOuter &&\n        coordX >= 0 && coordY >= 0) {\n      let rowInner = row % uniforms.outBackprop[3];\n      let coord = vec4<i32>(coordX, coordY, col, rowInner);\n      ${getWSnippet(innerElementSize)}\n    }\n    return ${typeSnippet(innerElementSize)}(0.0);\n  }\n\n  fn mm_write(batch: i32, row : i32, col : i32, valueInput : ${typeSnippet(innerElementSize)}) {\n    if (row < uniforms.dimAOuter && col < uniforms.dimBOuter) {\n      var value = valueInput;\n      let outCoord = vec4<i32>(\n          batch,\n          row / uniforms.outShape[2],\n          row % uniforms.outShape[2],\n          col);\n      result[getIndexFromCoords4D(outCoord, uniforms.outShape)/${innerElementSize}] = value;\n    }\n  }`;\n    return userCode;\n}\nexport class Conv2DDerInputMMProgram {\n    constructor(convInfo) {\n        this.variableNames = ['x', 'W'];\n        this.uniforms = 'filterDims : vec2<i32>, pads : vec2<i32>, strides : vec2<i32>, outBackprop : vec4<i32>, dimAOuter : i32, dimBOuter : i32, dimInner : i32,';\n        this.outputShape = convInfo.inShape;\n        util.assert(convInfo.dataFormat === 'channelsLast', () => 'TODO: NCHW is unimplemented');\n        this.isVec4 =\n            convInfo.inChannels % 4 === 0 && convInfo.outChannels % 4 === 0;\n        this.dispatchLayout = { x: [3], y: [1, 2], z: [0] };\n        this.workgroupSize = computeWorkgroupSizeForConv2d(this.dispatchLayout, this.outputShape, this.isVec4);\n        this.elementsPerThread = computeWorkPerThreadForConv2d(this.dispatchLayout, this.outputShape, this.isVec4);\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize, this.elementsPerThread);\n        if (this.isVec4) {\n            this.outputComponent = 4;\n            this.variableComponents = [4, 1];\n        }\n        this.shaderKey =\n            `conv2DDerInputMM_${this.isVec4}_${this.elementsPerThread}`;\n    }\n    getUserCode() {\n        const matMulSource = this.isVec4 ?\n            makeMatMulPackedVec4Source(this.elementsPerThread, this.workgroupSize) :\n            makeMatMulPackedSource(this.elementsPerThread, this.workgroupSize);\n        const userCode = `\n    ${conv2dTransposeCommonSnippet(this.isVec4 ? 4 : 1)}\n    ${matMulSource}\n    `;\n        return userCode;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29udl9iYWNrcHJvcF9tbV93ZWJncHUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9jb252X2JhY2twcm9wX21tX3dlYmdwdS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQWUsSUFBSSxFQUFDLE1BQU0sdUJBQXVCLENBQUM7QUFFekQsT0FBTyxFQUFDLHNCQUFzQixFQUFFLDBCQUEwQixFQUFDLE1BQU0sd0JBQXdCLENBQUM7QUFDMUYsT0FBTyxFQUFDLFdBQVcsRUFBZ0IsTUFBTSxrQkFBa0IsQ0FBQztBQUM1RCxPQUFPLEVBQUMsZUFBZSxFQUFFLDZCQUE2QixFQUFFLDZCQUE2QixFQUFDLE1BQU0sZUFBZSxDQUFDO0FBRTVHLFNBQVMsNEJBQTRCLENBQUMsZ0JBQWdCLEdBQUcsQ0FBQztJQUN4RCxNQUFNLFdBQVcsR0FBRyxDQUFDLGdCQUF3QixFQUFFLEVBQUU7UUFDL0MsUUFBUSxnQkFBZ0IsRUFBRTtZQUN4QixLQUFLLENBQUM7Z0JBQ0osT0FBTyx5REFBeUQsQ0FBQztZQUNuRSxLQUFLLENBQUM7Z0JBQ0osT0FBTzs7Ozs7Ozs7O2FBU0YsQ0FBQztZQUNSO2dCQUNFLE1BQU0sSUFBSSxLQUFLLENBQ1gsb0JBQW9CLGdCQUFnQixvQkFBb0IsQ0FBQyxDQUFDO1NBQ2pFO0lBQ0gsQ0FBQyxDQUFDO0lBRUYsTUFBTSxZQUFZLEdBQUc7Ozs7Ozs7OztpQkFTTixXQUFXLENBQUMsZ0JBQWdCLENBQUM7OztpQkFHN0IsV0FBVyxDQUFDLGdCQUFnQixDQUFDOzs7Ozs7OzhEQVF4QyxnQkFBZ0IsSUFBSSxDQUFDO0lBRXpCLE1BQU0sT0FBTyxHQUFHO1VBQ1IsWUFBWTs7ZUFFUCxXQUFXLENBQUMsZ0JBQWdCLENBQUMsUUFBUSxDQUFDO0lBRW5ELE1BQU0sUUFBUSxHQUFHO3FEQUViLFdBQVcsQ0FBQyxnQkFBZ0IsQ0FBQztNQUM3QixPQUFPOzs7cURBSVAsV0FBVyxDQUFDLGdCQUFnQixDQUFDOzs7Ozs7Ozs7UUFTM0IsV0FBVyxDQUFDLGdCQUFnQixDQUFDOzthQUV4QixXQUFXLENBQUMsZ0JBQWdCLENBQUM7OzsrREFJcEMsV0FBVyxDQUFDLGdCQUFnQixDQUFDOzs7Ozs7OztpRUFTN0IsZ0JBQWdCOztJQUVsQixDQUFDO0lBQ0gsT0FBTyxRQUFRLENBQUM7QUFDbEIsQ0FBQztBQUVELE1BQU0sT0FBTyx1QkFBdUI7SUFjbEMsWUFBWSxRQUFpQztRQVQ3QyxrQkFBYSxHQUFHLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBRTNCLGFBQVEsR0FDSiwySUFBMkksQ0FBQztRQU85SSxJQUFJLENBQUMsV0FBVyxHQUFHLFFBQVEsQ0FBQyxPQUFPLENBQUM7UUFFcEMsSUFBSSxDQUFDLE1BQU0sQ0FDUCxRQUFRLENBQUMsVUFBVSxLQUFLLGNBQWMsRUFDdEMsR0FBRyxFQUFFLENBQUMsNkJBQTZCLENBQUMsQ0FBQztRQUN6QyxJQUFJLENBQUMsTUFBTTtZQUNQLFFBQVEsQ0FBQyxVQUFVLEdBQUcsQ0FBQyxLQUFLLENBQUMsSUFBSSxRQUFRLENBQUMsV0FBVyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDcEUsSUFBSSxDQUFDLGNBQWMsR0FBRyxFQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBQyxDQUFDO1FBQ2xELElBQUksQ0FBQyxhQUFhLEdBQUcsNkJBQTZCLENBQzlDLElBQUksQ0FBQyxjQUFjLEVBQUUsSUFBSSxDQUFDLFdBQVcsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDeEQsSUFBSSxDQUFDLGlCQUFpQixHQUFHLDZCQUE2QixDQUNsRCxJQUFJLENBQUMsY0FBYyxFQUFFLElBQUksQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBRXhELElBQUksQ0FBQyxRQUFRLEdBQUcsZUFBZSxDQUMzQixJQUFJLENBQUMsY0FBYyxFQUFFLElBQUksQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDLGFBQWEsRUFDekQsSUFBSSxDQUFDLGlCQUFpQixDQUFDLENBQUM7UUFFNUIsSUFBSSxJQUFJLENBQUMsTUFBTSxFQUFFO1lBQ2YsSUFBSSxDQUFDLGVBQWUsR0FBRyxDQUFDLENBQUM7WUFDekIsSUFBSSxDQUFDLGtCQUFrQixHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1NBQ2xDO1FBRUQsSUFBSSxDQUFDLFNBQVM7WUFDVixvQkFBb0IsSUFBSSxDQUFDLE1BQU0sSUFBSSxJQUFJLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztJQUNsRSxDQUFDO0lBRUQsV0FBVztRQUNULE1BQU0sWUFBWSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUM5QiwwQkFBMEIsQ0FBQyxJQUFJLENBQUMsaUJBQWlCLEVBQUUsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUM7WUFDeEUsc0JBQXNCLENBQUMsSUFBSSxDQUFDLGlCQUFpQixFQUFFLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQztRQUN2RSxNQUFNLFFBQVEsR0FBRztNQUNmLDRCQUE0QixDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO01BQ2pELFlBQVk7S0FDYixDQUFDO1FBQ0YsT0FBTyxRQUFRLENBQUM7SUFDbEIsQ0FBQztDQUNGIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge2JhY2tlbmRfdXRpbCwgdXRpbH0gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcblxuaW1wb3J0IHttYWtlTWF0TXVsUGFja2VkU291cmNlLCBtYWtlTWF0TXVsUGFja2VkVmVjNFNvdXJjZX0gZnJvbSAnLi9tYXRtdWxfcGFja2VkX3dlYmdwdSc7XG5pbXBvcnQge3R5cGVTbmlwcGV0LCBXZWJHUFVQcm9ncmFtfSBmcm9tICcuL3dlYmdwdV9wcm9ncmFtJztcbmltcG9ydCB7Y29tcHV0ZURpc3BhdGNoLCBjb21wdXRlV29ya2dyb3VwU2l6ZUZvckNvbnYyZCwgY29tcHV0ZVdvcmtQZXJUaHJlYWRGb3JDb252MmR9IGZyb20gJy4vd2ViZ3B1X3V0aWwnO1xuXG5mdW5jdGlvbiBjb252MmRUcmFuc3Bvc2VDb21tb25TbmlwcGV0KGlubmVyRWxlbWVudFNpemUgPSA0KSB7XG4gIGNvbnN0IGdldFdTbmlwcGV0ID0gKGlubmVyRWxlbWVudFNpemU6IG51bWJlcikgPT4ge1xuICAgIHN3aXRjaCAoaW5uZXJFbGVtZW50U2l6ZSkge1xuICAgICAgY2FzZSAxOlxuICAgICAgICByZXR1cm4gJ3JldHVybiBXW2dldEluZGV4RnJvbUNvb3JkczREKGNvb3JkLCB1bmlmb3Jtcy53U2hhcGUpXTsnO1xuICAgICAgY2FzZSA0OlxuICAgICAgICByZXR1cm4gYFxuICAgICAgICAgICAgbGV0IGNvb3JkMSA9IHZlYzQ8aTMyPihjb29yZFgsIGNvb3JkWSwgY29sICsgMSwgcm93SW5uZXIpO1xuICAgICAgICAgICAgbGV0IGNvb3JkMiA9IHZlYzQ8aTMyPihjb29yZFgsIGNvb3JkWSwgY29sICsgMiwgcm93SW5uZXIpO1xuICAgICAgICAgICAgbGV0IGNvb3JkMyA9IHZlYzQ8aTMyPihjb29yZFgsIGNvb3JkWSwgY29sICsgMywgcm93SW5uZXIpO1xuICAgICAgICAgICAgbGV0IHYwID0gV1tnZXRJbmRleEZyb21Db29yZHM0RChjb29yZCwgdW5pZm9ybXMud1NoYXBlKV07XG4gICAgICAgICAgICBsZXQgdjEgPSBXW2dldEluZGV4RnJvbUNvb3JkczREKGNvb3JkMSwgdW5pZm9ybXMud1NoYXBlKV07XG4gICAgICAgICAgICBsZXQgdjIgPSBXW2dldEluZGV4RnJvbUNvb3JkczREKGNvb3JkMiwgdW5pZm9ybXMud1NoYXBlKV07XG4gICAgICAgICAgICBsZXQgdjMgPSBXW2dldEluZGV4RnJvbUNvb3JkczREKGNvb3JkMywgdW5pZm9ybXMud1NoYXBlKV07XG4gICAgICAgICAgICByZXR1cm4gdmVjNDxmMzI+KHYwLCB2MSwgdjIsIHYzKTtcbiAgICAgICAgICAgIGA7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICBgaW5uZXJFbGVtZW50U2l6ZSAke2lubmVyRWxlbWVudFNpemV9IGlzIG5vdCBzdXBwb3J0ZWQuYCk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHJlYWRBU25pcHBldCA9IGBcbiAgICAgIGxldCBvdXRSb3cgPSByb3cgLyB1bmlmb3Jtcy5vdXRTaGFwZVsyXTtcbiAgICAgIGxldCBvdXRDb2wgPSByb3cgJSB1bmlmb3Jtcy5vdXRTaGFwZVsyXTtcblxuICAgICAgbGV0IFdSb3cgPSBjb2wgLyAodW5pZm9ybXMuZmlsdGVyRGltc1sxXSAqIHVuaWZvcm1zLm91dEJhY2twcm9wWzNdKTtcbiAgICAgIGxldCBXQ29sID0gY29sIC8gdW5pZm9ybXMub3V0QmFja3Byb3BbM10gJSB1bmlmb3Jtcy5maWx0ZXJEaW1zWzFdO1xuICAgICAgbGV0IHhSID0gZjMyKG91dFJvdyAtIHVuaWZvcm1zLnBhZHNbMF0gKyBXUm93KSAvIGYzMih1bmlmb3Jtcy5zdHJpZGVzWzBdKTtcbiAgICAgIGxldCB4QyA9IGYzMihvdXRDb2wgLSB1bmlmb3Jtcy5wYWRzWzFdICsgV0NvbCkgLyBmMzIodW5pZm9ybXMuc3RyaWRlc1sxXSk7XG4gICAgICBpZiAoeFIgPCAwLjAgfHwgeFIgPj0gZjMyKHVuaWZvcm1zLm91dEJhY2twcm9wWzFdKSB8fCBmcmFjdCh4UikgPiAwLjApIHtcbiAgICAgICAgcmV0dXJuICR7dHlwZVNuaXBwZXQoaW5uZXJFbGVtZW50U2l6ZSl9KDAuMCk7XG4gICAgICB9XG4gICAgICBpZiAoeEMgPCAwLjAgfHwgeEMgPj0gZjMyKHVuaWZvcm1zLm91dEJhY2twcm9wWzJdKSB8fCBmcmFjdCh4QykgPiAwLjApIHtcbiAgICAgICAgcmV0dXJuICR7dHlwZVNuaXBwZXQoaW5uZXJFbGVtZW50U2l6ZSl9KDAuMCk7XG4gICAgICB9XG4gICAgICBsZXQgY29vcmQgPSB2ZWM0PGkzMj4oXG4gICAgICAgICAgYmF0Y2gsXG4gICAgICAgICAgaTMyKHhSKSxcbiAgICAgICAgICBpMzIoeEMpLFxuICAgICAgICAgIGNvbCAlIHVuaWZvcm1zLm91dEJhY2twcm9wWzNdKTtcbiAgICAgIHJldHVybiB4W2dldEluZGV4RnJvbUNvb3JkczREKGNvb3JkLCB1bmlmb3Jtcy54U2hhcGUpLyR7XG4gICAgICBpbm5lckVsZW1lbnRTaXplfV07YDtcblxuICBjb25zdCBzYW1wbGVBID0gYGlmIChyb3cgPCB1bmlmb3Jtcy5kaW1BT3V0ZXIgJiYgY29sIDwgdW5pZm9ybXMuZGltSW5uZXIpIHtcbiAgICAgICAgJHtyZWFkQVNuaXBwZXR9XG4gICAgICB9XG4gICAgICByZXR1cm4gJHt0eXBlU25pcHBldChpbm5lckVsZW1lbnRTaXplKX0oMC4wKTtgO1xuXG4gIGNvbnN0IHVzZXJDb2RlID0gYFxuICBmbiBtbV9yZWFkQShiYXRjaDogaTMyLCByb3cgOiBpMzIsIGNvbCA6IGkzMikgLT4gJHtcbiAgICAgIHR5cGVTbmlwcGV0KGlubmVyRWxlbWVudFNpemUpfSB7XG4gICAgJHtzYW1wbGVBfVxuICB9XG5cbiAgZm4gbW1fcmVhZEIoYmF0Y2g6IGkzMiwgcm93IDogaTMyLCBjb2wgOiBpMzIpIC0+ICR7XG4gICAgICB0eXBlU25pcHBldChpbm5lckVsZW1lbnRTaXplKX0ge1xuICAgIGxldCBjb29yZFggPSB1bmlmb3Jtcy5maWx0ZXJEaW1zLnggLSAxIC1cbiAgICAgICAgcm93IC8gKHVuaWZvcm1zLmZpbHRlckRpbXNbMV0gKiB1bmlmb3Jtcy5vdXRCYWNrcHJvcFszXSk7XG4gICAgbGV0IGNvb3JkWSA9IHVuaWZvcm1zLmZpbHRlckRpbXMueSAtIDEgLVxuICAgICAgICAocm93IC8gdW5pZm9ybXMub3V0QmFja3Byb3BbM10pICUgdW5pZm9ybXMuZmlsdGVyRGltc1sxXTtcbiAgICBpZiAocm93IDwgdW5pZm9ybXMuZGltSW5uZXIgJiYgY29sIDwgdW5pZm9ybXMuZGltQk91dGVyICYmXG4gICAgICAgIGNvb3JkWCA+PSAwICYmIGNvb3JkWSA+PSAwKSB7XG4gICAgICBsZXQgcm93SW5uZXIgPSByb3cgJSB1bmlmb3Jtcy5vdXRCYWNrcHJvcFszXTtcbiAgICAgIGxldCBjb29yZCA9IHZlYzQ8aTMyPihjb29yZFgsIGNvb3JkWSwgY29sLCByb3dJbm5lcik7XG4gICAgICAke2dldFdTbmlwcGV0KGlubmVyRWxlbWVudFNpemUpfVxuICAgIH1cbiAgICByZXR1cm4gJHt0eXBlU25pcHBldChpbm5lckVsZW1lbnRTaXplKX0oMC4wKTtcbiAgfVxuXG4gIGZuIG1tX3dyaXRlKGJhdGNoOiBpMzIsIHJvdyA6IGkzMiwgY29sIDogaTMyLCB2YWx1ZUlucHV0IDogJHtcbiAgICAgIHR5cGVTbmlwcGV0KGlubmVyRWxlbWVudFNpemUpfSkge1xuICAgIGlmIChyb3cgPCB1bmlmb3Jtcy5kaW1BT3V0ZXIgJiYgY29sIDwgdW5pZm9ybXMuZGltQk91dGVyKSB7XG4gICAgICB2YXIgdmFsdWUgPSB2YWx1ZUlucHV0O1xuICAgICAgbGV0IG91dENvb3JkID0gdmVjNDxpMzI+KFxuICAgICAgICAgIGJhdGNoLFxuICAgICAgICAgIHJvdyAvIHVuaWZvcm1zLm91dFNoYXBlWzJdLFxuICAgICAgICAgIHJvdyAlIHVuaWZvcm1zLm91dFNoYXBlWzJdLFxuICAgICAgICAgIGNvbCk7XG4gICAgICByZXN1bHRbZ2V0SW5kZXhGcm9tQ29vcmRzNEQob3V0Q29vcmQsIHVuaWZvcm1zLm91dFNoYXBlKS8ke1xuICAgICAgaW5uZXJFbGVtZW50U2l6ZX1dID0gdmFsdWU7XG4gICAgfVxuICB9YDtcbiAgcmV0dXJuIHVzZXJDb2RlO1xufVxuXG5leHBvcnQgY2xhc3MgQ29udjJERGVySW5wdXRNTVByb2dyYW0gaW1wbGVtZW50cyBXZWJHUFVQcm9ncmFtIHtcbiAgb3V0cHV0U2hhcGU6IG51bWJlcltdO1xuICBzaGFkZXJLZXk6IHN0cmluZztcbiAgZGlzcGF0Y2hMYXlvdXQ6IHt4OiBudW1iZXJbXSwgeTogbnVtYmVyW10sIHo6IG51bWJlcltdfTtcbiAgZGlzcGF0Y2g6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXTtcbiAgdmFyaWFibGVOYW1lcyA9IFsneCcsICdXJ107XG4gIHZhcmlhYmxlQ29tcG9uZW50czogbnVtYmVyW107XG4gIHVuaWZvcm1zID1cbiAgICAgICdmaWx0ZXJEaW1zIDogdmVjMjxpMzI+LCBwYWRzIDogdmVjMjxpMzI+LCBzdHJpZGVzIDogdmVjMjxpMzI+LCBvdXRCYWNrcHJvcCA6IHZlYzQ8aTMyPiwgZGltQU91dGVyIDogaTMyLCBkaW1CT3V0ZXIgOiBpMzIsIGRpbUlubmVyIDogaTMyLCc7XG4gIHdvcmtncm91cFNpemU6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXTtcbiAgZWxlbWVudHNQZXJUaHJlYWQ6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXTtcbiAgaXNWZWM0PzogYm9vbGVhbjtcbiAgb3V0cHV0Q29tcG9uZW50OiBudW1iZXI7XG5cbiAgY29uc3RydWN0b3IoY29udkluZm86IGJhY2tlbmRfdXRpbC5Db252MkRJbmZvKSB7XG4gICAgdGhpcy5vdXRwdXRTaGFwZSA9IGNvbnZJbmZvLmluU2hhcGU7XG5cbiAgICB1dGlsLmFzc2VydChcbiAgICAgICAgY29udkluZm8uZGF0YUZvcm1hdCA9PT0gJ2NoYW5uZWxzTGFzdCcsXG4gICAgICAgICgpID0+ICdUT0RPOiBOQ0hXIGlzIHVuaW1wbGVtZW50ZWQnKTtcbiAgICB0aGlzLmlzVmVjNCA9XG4gICAgICAgIGNvbnZJbmZvLmluQ2hhbm5lbHMgJSA0ID09PSAwICYmIGNvbnZJbmZvLm91dENoYW5uZWxzICUgNCA9PT0gMDtcbiAgICB0aGlzLmRpc3BhdGNoTGF5b3V0ID0ge3g6IFszXSwgeTogWzEsIDJdLCB6OiBbMF19O1xuICAgIHRoaXMud29ya2dyb3VwU2l6ZSA9IGNvbXB1dGVXb3JrZ3JvdXBTaXplRm9yQ29udjJkKFxuICAgICAgICB0aGlzLmRpc3BhdGNoTGF5b3V0LCB0aGlzLm91dHB1dFNoYXBlLCB0aGlzLmlzVmVjNCk7XG4gICAgdGhpcy5lbGVtZW50c1BlclRocmVhZCA9IGNvbXB1dGVXb3JrUGVyVGhyZWFkRm9yQ29udjJkKFxuICAgICAgICB0aGlzLmRpc3BhdGNoTGF5b3V0LCB0aGlzLm91dHB1dFNoYXBlLCB0aGlzLmlzVmVjNCk7XG5cbiAgICB0aGlzLmRpc3BhdGNoID0gY29tcHV0ZURpc3BhdGNoKFxuICAgICAgICB0aGlzLmRpc3BhdGNoTGF5b3V0LCB0aGlzLm91dHB1dFNoYXBlLCB0aGlzLndvcmtncm91cFNpemUsXG4gICAgICAgIHRoaXMuZWxlbWVudHNQZXJUaHJlYWQpO1xuXG4gICAgaWYgKHRoaXMuaXNWZWM0KSB7XG4gICAgICB0aGlzLm91dHB1dENvbXBvbmVudCA9IDQ7XG4gICAgICB0aGlzLnZhcmlhYmxlQ29tcG9uZW50cyA9IFs0LCAxXTtcbiAgICB9XG5cbiAgICB0aGlzLnNoYWRlcktleSA9XG4gICAgICAgIGBjb252MkREZXJJbnB1dE1NXyR7dGhpcy5pc1ZlYzR9XyR7dGhpcy5lbGVtZW50c1BlclRocmVhZH1gO1xuICB9XG5cbiAgZ2V0VXNlckNvZGUoKTogc3RyaW5nIHtcbiAgICBjb25zdCBtYXRNdWxTb3VyY2UgPSB0aGlzLmlzVmVjNCA/XG4gICAgICAgIG1ha2VNYXRNdWxQYWNrZWRWZWM0U291cmNlKHRoaXMuZWxlbWVudHNQZXJUaHJlYWQsIHRoaXMud29ya2dyb3VwU2l6ZSkgOlxuICAgICAgICBtYWtlTWF0TXVsUGFja2VkU291cmNlKHRoaXMuZWxlbWVudHNQZXJUaHJlYWQsIHRoaXMud29ya2dyb3VwU2l6ZSk7XG4gICAgY29uc3QgdXNlckNvZGUgPSBgXG4gICAgJHtjb252MmRUcmFuc3Bvc2VDb21tb25TbmlwcGV0KHRoaXMuaXNWZWM0ID8gNCA6IDEpfVxuICAgICR7bWF0TXVsU291cmNlfVxuICAgIGA7XG4gICAgcmV0dXJuIHVzZXJDb2RlO1xuICB9XG59XG4iXX0=","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { backend_util, Conv2DBackpropInput, env } from '@tensorflow/tfjs-core';\nimport { Conv2DDerInputMMProgram } from '../conv_backprop_mm_webgpu';\nimport { Conv2DDerInputProgram } from '../conv_backprop_webgpu';\nexport function conv2DBackpropInput(args) {\n    const { inputs, backend, attrs } = args;\n    const { dy, filter } = inputs;\n    const { inputShape, strides, pad, dataFormat, dimRoundingMode } = attrs;\n    const $dataFormat = backend_util.convertConv2DDataFormat(dataFormat);\n    const convInfo = backend_util.computeConv2DInfo(inputShape, filter.shape, strides, 1 /* dilations */, pad, dimRoundingMode, false, $dataFormat);\n    const dimensions = [\n        { type: 'int32', data: [convInfo.filterHeight, convInfo.filterWidth] },\n        {\n            type: 'int32',\n            data: [\n                convInfo.filterHeight - 1 - convInfo.padInfo.top,\n                convInfo.filterWidth - 1 - convInfo.padInfo.left\n            ]\n        },\n        { type: 'int32', data: [convInfo.strideHeight, convInfo.strideWidth] },\n        {\n            type: 'int32',\n            data: [\n                convInfo.batchSize, convInfo.outHeight, convInfo.outWidth,\n                convInfo.outChannels\n            ]\n        },\n    ];\n    let program;\n    // TODO: Experiment when to use Conv2DDerInputMMProgram algorithm.\n    if (env().getBool('WEBGPU_USE_NAIVE_CONV2D_TRANSPOSE') ||\n        convInfo.dataFormat !== 'channelsLast') {\n        program = new Conv2DDerInputProgram(convInfo);\n    }\n    else {\n        program = new Conv2DDerInputMMProgram(convInfo);\n        const dimAOuter = convInfo.inHeight * convInfo.inWidth;\n        const dimBOuter = convInfo.inChannels;\n        const dimInner = convInfo.filterHeight * convInfo.filterWidth * convInfo.outChannels;\n        dimensions.push({ type: 'uint32', data: [dimAOuter] }, { type: 'uint32', data: [dimBOuter] }, { type: 'uint32', data: [dimInner] });\n    }\n    return backend.runWebGPUProgram(program, [dy, filter], 'float32', dimensions);\n}\nexport const conv2DBackpropInputConfig = {\n    kernelName: Conv2DBackpropInput,\n    backendName: 'webgpu',\n    kernelFunc: conv2DBackpropInput,\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ29udjJEQmFja3Byb3BJbnB1dC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2tlcm5lbHMvQ29udjJEQmFja3Byb3BJbnB1dC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQUMsWUFBWSxFQUFFLG1CQUFtQixFQUF1RCxHQUFHLEVBQTJCLE1BQU0sdUJBQXVCLENBQUM7QUFHNUosT0FBTyxFQUFDLHVCQUF1QixFQUFDLE1BQU0sNEJBQTRCLENBQUM7QUFDbkUsT0FBTyxFQUFDLHFCQUFxQixFQUFDLE1BQU0seUJBQXlCLENBQUM7QUFFOUQsTUFBTSxVQUFVLG1CQUFtQixDQUFDLElBSW5DO0lBQ0MsTUFBTSxFQUFDLE1BQU0sRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFDLEdBQUcsSUFBSSxDQUFDO0lBQ3RDLE1BQU0sRUFBQyxFQUFFLEVBQUUsTUFBTSxFQUFDLEdBQUcsTUFBTSxDQUFDO0lBQzVCLE1BQU0sRUFBQyxVQUFVLEVBQUUsT0FBTyxFQUFFLEdBQUcsRUFBRSxVQUFVLEVBQUUsZUFBZSxFQUFDLEdBQUcsS0FBSyxDQUFDO0lBRXRFLE1BQU0sV0FBVyxHQUFHLFlBQVksQ0FBQyx1QkFBdUIsQ0FBQyxVQUFVLENBQUMsQ0FBQztJQUNyRSxNQUFNLFFBQVEsR0FBRyxZQUFZLENBQUMsaUJBQWlCLENBQzNDLFVBQVUsRUFBRSxNQUFNLENBQUMsS0FBeUMsRUFBRSxPQUFPLEVBQ3JFLENBQUMsQ0FBQyxlQUFlLEVBQUUsR0FBRyxFQUFFLGVBQWUsRUFBRSxLQUFLLEVBQUUsV0FBVyxDQUFDLENBQUM7SUFFakUsTUFBTSxVQUFVLEdBQUc7UUFDakIsRUFBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxDQUFDLFFBQVEsQ0FBQyxZQUFZLEVBQUUsUUFBUSxDQUFDLFdBQVcsQ0FBQyxFQUFDO1FBQ3BFO1lBQ0UsSUFBSSxFQUFFLE9BQU87WUFDYixJQUFJLEVBQUU7Z0JBQ0osUUFBUSxDQUFDLFlBQVksR0FBRyxDQUFDLEdBQUcsUUFBUSxDQUFDLE9BQU8sQ0FBQyxHQUFHO2dCQUNoRCxRQUFRLENBQUMsV0FBVyxHQUFHLENBQUMsR0FBRyxRQUFRLENBQUMsT0FBTyxDQUFDLElBQUk7YUFDakQ7U0FDRjtRQUNELEVBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsQ0FBQyxRQUFRLENBQUMsWUFBWSxFQUFFLFFBQVEsQ0FBQyxXQUFXLENBQUMsRUFBQztRQUNwRTtZQUNFLElBQUksRUFBRSxPQUFPO1lBQ2IsSUFBSSxFQUFFO2dCQUNKLFFBQVEsQ0FBQyxTQUFTLEVBQUUsUUFBUSxDQUFDLFNBQVMsRUFBRSxRQUFRLENBQUMsUUFBUTtnQkFDekQsUUFBUSxDQUFDLFdBQVc7YUFDckI7U0FDRjtLQUNGLENBQUM7SUFDRixJQUFJLE9BQXNELENBQUM7SUFDM0Qsa0VBQWtFO0lBQ2xFLElBQUksR0FBRyxFQUFFLENBQUMsT0FBTyxDQUFDLG1DQUFtQyxDQUFDO1FBQ2xELFFBQVEsQ0FBQyxVQUFVLEtBQUssY0FBYyxFQUFFO1FBQzFDLE9BQU8sR0FBRyxJQUFJLHFCQUFxQixDQUFDLFFBQVEsQ0FBQyxDQUFDO0tBQy9DO1NBQU07UUFDTCxPQUFPLEdBQUcsSUFBSSx1QkFBdUIsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUNoRCxNQUFNLFNBQVMsR0FBRyxRQUFRLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQyxPQUFPLENBQUM7UUFDdkQsTUFBTSxTQUFTLEdBQUcsUUFBUSxDQUFDLFVBQVUsQ0FBQztRQUN0QyxNQUFNLFFBQVEsR0FDVixRQUFRLENBQUMsWUFBWSxHQUFHLFFBQVEsQ0FBQyxXQUFXLEdBQUcsUUFBUSxDQUFDLFdBQVcsQ0FBQztRQUN4RSxVQUFVLENBQUMsSUFBSSxDQUNYLEVBQUMsSUFBSSxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsQ0FBQyxTQUFTLENBQUMsRUFBQyxFQUNuQyxFQUFDLElBQUksRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLENBQUMsU0FBUyxDQUFDLEVBQUMsRUFDbkMsRUFBQyxJQUFJLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxDQUFDLFFBQVEsQ0FBQyxFQUFDLENBQUMsQ0FBQztLQUN6QztJQUNELE9BQU8sT0FBTyxDQUFDLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxDQUFDLEVBQUUsRUFBRSxNQUFNLENBQUMsRUFBRSxTQUFTLEVBQUUsVUFBVSxDQUFDLENBQUM7QUFDaEYsQ0FBQztBQUVELE1BQU0sQ0FBQyxNQUFNLHlCQUF5QixHQUFpQjtJQUNyRCxVQUFVLEVBQUUsbUJBQW1CO0lBQy9CLFdBQVcsRUFBRSxRQUFRO0lBQ3JCLFVBQVUsRUFBRSxtQkFBNEM7Q0FDekQsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtiYWNrZW5kX3V0aWwsIENvbnYyREJhY2twcm9wSW5wdXQsIENvbnYyREJhY2twcm9wSW5wdXRBdHRycywgQ29udjJEQmFja3Byb3BJbnB1dElucHV0cywgZW52LCBLZXJuZWxDb25maWcsIEtlcm5lbEZ1bmN9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7V2ViR1BVQmFja2VuZH0gZnJvbSAnLi4vYmFja2VuZF93ZWJncHUnO1xuaW1wb3J0IHtDb252MkREZXJJbnB1dE1NUHJvZ3JhbX0gZnJvbSAnLi4vY29udl9iYWNrcHJvcF9tbV93ZWJncHUnO1xuaW1wb3J0IHtDb252MkREZXJJbnB1dFByb2dyYW19IGZyb20gJy4uL2NvbnZfYmFja3Byb3Bfd2ViZ3B1JztcblxuZXhwb3J0IGZ1bmN0aW9uIGNvbnYyREJhY2twcm9wSW5wdXQoYXJnczoge1xuICBpbnB1dHM6IENvbnYyREJhY2twcm9wSW5wdXRJbnB1dHMsXG4gIGF0dHJzOiBDb252MkRCYWNrcHJvcElucHV0QXR0cnMsXG4gIGJhY2tlbmQ6IFdlYkdQVUJhY2tlbmRcbn0pIHtcbiAgY29uc3Qge2lucHV0cywgYmFja2VuZCwgYXR0cnN9ID0gYXJncztcbiAgY29uc3Qge2R5LCBmaWx0ZXJ9ID0gaW5wdXRzO1xuICBjb25zdCB7aW5wdXRTaGFwZSwgc3RyaWRlcywgcGFkLCBkYXRhRm9ybWF0LCBkaW1Sb3VuZGluZ01vZGV9ID0gYXR0cnM7XG5cbiAgY29uc3QgJGRhdGFGb3JtYXQgPSBiYWNrZW5kX3V0aWwuY29udmVydENvbnYyRERhdGFGb3JtYXQoZGF0YUZvcm1hdCk7XG4gIGNvbnN0IGNvbnZJbmZvID0gYmFja2VuZF91dGlsLmNvbXB1dGVDb252MkRJbmZvKFxuICAgICAgaW5wdXRTaGFwZSwgZmlsdGVyLnNoYXBlIGFzIFtudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXJdLCBzdHJpZGVzLFxuICAgICAgMSAvKiBkaWxhdGlvbnMgKi8sIHBhZCwgZGltUm91bmRpbmdNb2RlLCBmYWxzZSwgJGRhdGFGb3JtYXQpO1xuXG4gIGNvbnN0IGRpbWVuc2lvbnMgPSBbXG4gICAge3R5cGU6ICdpbnQzMicsIGRhdGE6IFtjb252SW5mby5maWx0ZXJIZWlnaHQsIGNvbnZJbmZvLmZpbHRlcldpZHRoXX0sXG4gICAge1xuICAgICAgdHlwZTogJ2ludDMyJyxcbiAgICAgIGRhdGE6IFtcbiAgICAgICAgY29udkluZm8uZmlsdGVySGVpZ2h0IC0gMSAtIGNvbnZJbmZvLnBhZEluZm8udG9wLFxuICAgICAgICBjb252SW5mby5maWx0ZXJXaWR0aCAtIDEgLSBjb252SW5mby5wYWRJbmZvLmxlZnRcbiAgICAgIF1cbiAgICB9LFxuICAgIHt0eXBlOiAnaW50MzInLCBkYXRhOiBbY29udkluZm8uc3RyaWRlSGVpZ2h0LCBjb252SW5mby5zdHJpZGVXaWR0aF19LFxuICAgIHtcbiAgICAgIHR5cGU6ICdpbnQzMicsXG4gICAgICBkYXRhOiBbXG4gICAgICAgIGNvbnZJbmZvLmJhdGNoU2l6ZSwgY29udkluZm8ub3V0SGVpZ2h0LCBjb252SW5mby5vdXRXaWR0aCxcbiAgICAgICAgY29udkluZm8ub3V0Q2hhbm5lbHNcbiAgICAgIF1cbiAgICB9LFxuICBdO1xuICBsZXQgcHJvZ3JhbTogQ29udjJERGVySW5wdXRQcm9ncmFtfENvbnYyRERlcklucHV0TU1Qcm9ncmFtO1xuICAvLyBUT0RPOiBFeHBlcmltZW50IHdoZW4gdG8gdXNlIENvbnYyRERlcklucHV0TU1Qcm9ncmFtIGFsZ29yaXRobS5cbiAgaWYgKGVudigpLmdldEJvb2woJ1dFQkdQVV9VU0VfTkFJVkVfQ09OVjJEX1RSQU5TUE9TRScpIHx8XG4gICAgICBjb252SW5mby5kYXRhRm9ybWF0ICE9PSAnY2hhbm5lbHNMYXN0Jykge1xuICAgIHByb2dyYW0gPSBuZXcgQ29udjJERGVySW5wdXRQcm9ncmFtKGNvbnZJbmZvKTtcbiAgfSBlbHNlIHtcbiAgICBwcm9ncmFtID0gbmV3IENvbnYyRERlcklucHV0TU1Qcm9ncmFtKGNvbnZJbmZvKTtcbiAgICBjb25zdCBkaW1BT3V0ZXIgPSBjb252SW5mby5pbkhlaWdodCAqIGNvbnZJbmZvLmluV2lkdGg7XG4gICAgY29uc3QgZGltQk91dGVyID0gY29udkluZm8uaW5DaGFubmVscztcbiAgICBjb25zdCBkaW1Jbm5lciA9XG4gICAgICAgIGNvbnZJbmZvLmZpbHRlckhlaWdodCAqIGNvbnZJbmZvLmZpbHRlcldpZHRoICogY29udkluZm8ub3V0Q2hhbm5lbHM7XG4gICAgZGltZW5zaW9ucy5wdXNoKFxuICAgICAgICB7dHlwZTogJ3VpbnQzMicsIGRhdGE6IFtkaW1BT3V0ZXJdfSxcbiAgICAgICAge3R5cGU6ICd1aW50MzInLCBkYXRhOiBbZGltQk91dGVyXX0sXG4gICAgICAgIHt0eXBlOiAndWludDMyJywgZGF0YTogW2RpbUlubmVyXX0pO1xuICB9XG4gIHJldHVybiBiYWNrZW5kLnJ1bldlYkdQVVByb2dyYW0ocHJvZ3JhbSwgW2R5LCBmaWx0ZXJdLCAnZmxvYXQzMicsIGRpbWVuc2lvbnMpO1xufVxuXG5leHBvcnQgY29uc3QgY29udjJEQmFja3Byb3BJbnB1dENvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBDb252MkRCYWNrcHJvcElucHV0LFxuICBiYWNrZW5kTmFtZTogJ3dlYmdwdScsXG4gIGtlcm5lbEZ1bmM6IGNvbnYyREJhY2twcm9wSW5wdXQgYXMgdW5rbm93biBhcyBLZXJuZWxGdW5jLFxufTtcbiJdfQ==","/**\n * @license\n * Copyright 2023 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { getMainHeaderString as main } from './webgpu_program';\nimport { computeDispatch, flatDispatchLayout } from './webgpu_util';\nexport class Conv3DNaiveProgram {\n    constructor(convInfo) {\n        this.variableNames = ['x', 'W'];\n        this.uniforms = 'filterDims: vec3<i32>, pads: vec3<i32>, strides: vec3<i32>, dilations: vec3<i32>,';\n        this.workgroupSize = [64, 1, 1];\n        this.size = true;\n        this.outputShape = convInfo.outShape;\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize);\n        this.shaderKey = `conv3dnaive`;\n    }\n    getUserCode() {\n        const userCode = `\n    ${main('index')} {\n      if (index < uniforms.size) {\n        let coords = getOutputCoords();\n        let batch = coords.x;\n        let d2 = coords.u;\n\n        let xFRCCorner = vec3<i32>(coords.y, coords.z, coords.w) * uniforms.strides - uniforms.pads;\n        let xFCorner = xFRCCorner.x;\n        let xRCorner = xFRCCorner.y;\n        let xCCorner = xFRCCorner.z;\n\n        let inputDepthNearestVec4 = (uniforms.xShape.u / 4) * 4;\n        let inputDepthVec4Remainder = uniforms.xShape.u % 4;\n\n        var dotProd = 0.0;\n        for (var wF = 0; wF < uniforms.filterDims[0]; wF++) {\n          let xF = xFCorner + wF * uniforms.dilations[0];\n          if (xF < 0 || xF >= uniforms.xShape.y) {\n            continue;\n          }\n\n          for (var wR = 0; wR < uniforms.filterDims[1]; wR++) {\n            let xR = xRCorner + wR * uniforms.dilations[1];\n            if (xR < 0 || xR >= uniforms.xShape.z) {\n              continue;\n            }\n\n            for (var wC = 0; wC < uniforms.filterDims[2]; wC++) {\n              let xC = xCCorner + wC * uniforms.dilations[2];\n              if (xC < 0 || xC >= uniforms.xShape.w) {\n                continue;\n              }\n\n              for (var d1 = 0; d1 < inputDepthNearestVec4; d1 += 4) {\n                let xValues = vec4<f32>(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                let wValues = vec4<f32>(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (inputDepthVec4Remainder == 1) {\n                dotProd += getX(batch, xF, xR, xC, inputDepthNearestVec4) *\n                  getW(wF, wR, wC, inputDepthNearestVec4, d2);\n              } else if (inputDepthVec4Remainder == 2) {\n                let xValues = vec2<f32>(\n                  getX(batch, xF, xR, xC, inputDepthNearestVec4),\n                  getX(batch, xF, xR, xC, inputDepthNearestVec4 + 1)\n                );\n                let wValues = vec2<f32>(\n                  getW(wF, wR, wC, inputDepthNearestVec4, d2),\n                  getW(wF, wR, wC, inputDepthNearestVec4 + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (inputDepthVec4Remainder == 3) {\n                let xValues = vec3<f32>(\n                  getX(batch, xF, xR, xC, inputDepthNearestVec4),\n                  getX(batch, xF, xR, xC, inputDepthNearestVec4 + 1),\n                  getX(batch, xF, xR, xC, inputDepthNearestVec4 + 2)\n                );\n                let wValues = vec3<f32>(\n                  getW(wF, wR, wC, inputDepthNearestVec4, d2),\n                  getW(wF, wR, wC, inputDepthNearestVec4 + 1, d2),\n                  getW(wF, wR, wC, inputDepthNearestVec4 + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutputAtIndex(index, dotProd);\n      }\n    }`;\n        return userCode;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29udjNkX25haXZlX3dlYmdwdS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2NvbnYzZF9uYWl2ZV93ZWJncHUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBSUgsT0FBTyxFQUFDLG1CQUFtQixJQUFJLElBQUksRUFBZ0IsTUFBTSxrQkFBa0IsQ0FBQztBQUM1RSxPQUFPLEVBQUMsZUFBZSxFQUFFLGtCQUFrQixFQUFDLE1BQU0sZUFBZSxDQUFDO0FBRWxFLE1BQU0sT0FBTyxrQkFBa0I7SUFXN0IsWUFBWSxRQUFpQztRQU43QyxrQkFBYSxHQUFHLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQzNCLGFBQVEsR0FDSixtRkFBbUYsQ0FBQztRQUN4RixrQkFBYSxHQUE2QixDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDckQsU0FBSSxHQUFHLElBQUksQ0FBQztRQUdWLElBQUksQ0FBQyxXQUFXLEdBQUcsUUFBUSxDQUFDLFFBQVEsQ0FBQztRQUNyQyxJQUFJLENBQUMsY0FBYyxHQUFHLGtCQUFrQixDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUMzRCxJQUFJLENBQUMsUUFBUSxHQUFHLGVBQWUsQ0FDM0IsSUFBSSxDQUFDLGNBQWMsRUFBRSxJQUFJLENBQUMsV0FBVyxFQUFFLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQztRQUUvRCxJQUFJLENBQUMsU0FBUyxHQUFHLGFBQWEsQ0FBQztJQUNqQyxDQUFDO0lBRUQsV0FBVztRQUNULE1BQU0sUUFBUSxHQUFHO01BQ2YsSUFBSSxDQUFDLE9BQU8sQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O01BaUZiLENBQUM7UUFDSCxPQUFPLFFBQVEsQ0FBQztJQUNsQixDQUFDO0NBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMyBHb29nbGUgTExDLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7YmFja2VuZF91dGlsfSBmcm9tICdAdGVuc29yZmxvdy90ZmpzLWNvcmUnO1xuXG5pbXBvcnQge2dldE1haW5IZWFkZXJTdHJpbmcgYXMgbWFpbiwgV2ViR1BVUHJvZ3JhbX0gZnJvbSAnLi93ZWJncHVfcHJvZ3JhbSc7XG5pbXBvcnQge2NvbXB1dGVEaXNwYXRjaCwgZmxhdERpc3BhdGNoTGF5b3V0fSBmcm9tICcuL3dlYmdwdV91dGlsJztcblxuZXhwb3J0IGNsYXNzIENvbnYzRE5haXZlUHJvZ3JhbSBpbXBsZW1lbnRzIFdlYkdQVVByb2dyYW0ge1xuICBvdXRwdXRTaGFwZTogbnVtYmVyW107XG4gIHNoYWRlcktleTogc3RyaW5nO1xuICBkaXNwYXRjaExheW91dDoge3g6IG51bWJlcltdfTtcbiAgZGlzcGF0Y2g6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXTtcbiAgdmFyaWFibGVOYW1lcyA9IFsneCcsICdXJ107XG4gIHVuaWZvcm1zID1cbiAgICAgICdmaWx0ZXJEaW1zOiB2ZWMzPGkzMj4sIHBhZHM6IHZlYzM8aTMyPiwgc3RyaWRlczogdmVjMzxpMzI+LCBkaWxhdGlvbnM6IHZlYzM8aTMyPiwnO1xuICB3b3JrZ3JvdXBTaXplOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl0gPSBbNjQsIDEsIDFdO1xuICBzaXplID0gdHJ1ZTtcblxuICBjb25zdHJ1Y3Rvcihjb252SW5mbzogYmFja2VuZF91dGlsLkNvbnYzREluZm8pIHtcbiAgICB0aGlzLm91dHB1dFNoYXBlID0gY29udkluZm8ub3V0U2hhcGU7XG4gICAgdGhpcy5kaXNwYXRjaExheW91dCA9IGZsYXREaXNwYXRjaExheW91dCh0aGlzLm91dHB1dFNoYXBlKTtcbiAgICB0aGlzLmRpc3BhdGNoID0gY29tcHV0ZURpc3BhdGNoKFxuICAgICAgICB0aGlzLmRpc3BhdGNoTGF5b3V0LCB0aGlzLm91dHB1dFNoYXBlLCB0aGlzLndvcmtncm91cFNpemUpO1xuXG4gICAgdGhpcy5zaGFkZXJLZXkgPSBgY29udjNkbmFpdmVgO1xuICB9XG5cbiAgZ2V0VXNlckNvZGUoKTogc3RyaW5nIHtcbiAgICBjb25zdCB1c2VyQ29kZSA9IGBcbiAgICAke21haW4oJ2luZGV4Jyl9IHtcbiAgICAgIGlmIChpbmRleCA8IHVuaWZvcm1zLnNpemUpIHtcbiAgICAgICAgbGV0IGNvb3JkcyA9IGdldE91dHB1dENvb3JkcygpO1xuICAgICAgICBsZXQgYmF0Y2ggPSBjb29yZHMueDtcbiAgICAgICAgbGV0IGQyID0gY29vcmRzLnU7XG5cbiAgICAgICAgbGV0IHhGUkNDb3JuZXIgPSB2ZWMzPGkzMj4oY29vcmRzLnksIGNvb3Jkcy56LCBjb29yZHMudykgKiB1bmlmb3Jtcy5zdHJpZGVzIC0gdW5pZm9ybXMucGFkcztcbiAgICAgICAgbGV0IHhGQ29ybmVyID0geEZSQ0Nvcm5lci54O1xuICAgICAgICBsZXQgeFJDb3JuZXIgPSB4RlJDQ29ybmVyLnk7XG4gICAgICAgIGxldCB4Q0Nvcm5lciA9IHhGUkNDb3JuZXIuejtcblxuICAgICAgICBsZXQgaW5wdXREZXB0aE5lYXJlc3RWZWM0ID0gKHVuaWZvcm1zLnhTaGFwZS51IC8gNCkgKiA0O1xuICAgICAgICBsZXQgaW5wdXREZXB0aFZlYzRSZW1haW5kZXIgPSB1bmlmb3Jtcy54U2hhcGUudSAlIDQ7XG5cbiAgICAgICAgdmFyIGRvdFByb2QgPSAwLjA7XG4gICAgICAgIGZvciAodmFyIHdGID0gMDsgd0YgPCB1bmlmb3Jtcy5maWx0ZXJEaW1zWzBdOyB3RisrKSB7XG4gICAgICAgICAgbGV0IHhGID0geEZDb3JuZXIgKyB3RiAqIHVuaWZvcm1zLmRpbGF0aW9uc1swXTtcbiAgICAgICAgICBpZiAoeEYgPCAwIHx8IHhGID49IHVuaWZvcm1zLnhTaGFwZS55KSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBmb3IgKHZhciB3UiA9IDA7IHdSIDwgdW5pZm9ybXMuZmlsdGVyRGltc1sxXTsgd1IrKykge1xuICAgICAgICAgICAgbGV0IHhSID0geFJDb3JuZXIgKyB3UiAqIHVuaWZvcm1zLmRpbGF0aW9uc1sxXTtcbiAgICAgICAgICAgIGlmICh4UiA8IDAgfHwgeFIgPj0gdW5pZm9ybXMueFNoYXBlLnopIHtcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvciAodmFyIHdDID0gMDsgd0MgPCB1bmlmb3Jtcy5maWx0ZXJEaW1zWzJdOyB3QysrKSB7XG4gICAgICAgICAgICAgIGxldCB4QyA9IHhDQ29ybmVyICsgd0MgKiB1bmlmb3Jtcy5kaWxhdGlvbnNbMl07XG4gICAgICAgICAgICAgIGlmICh4QyA8IDAgfHwgeEMgPj0gdW5pZm9ybXMueFNoYXBlLncpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGZvciAodmFyIGQxID0gMDsgZDEgPCBpbnB1dERlcHRoTmVhcmVzdFZlYzQ7IGQxICs9IDQpIHtcbiAgICAgICAgICAgICAgICBsZXQgeFZhbHVlcyA9IHZlYzQ8ZjMyPihcbiAgICAgICAgICAgICAgICAgIGdldFgoYmF0Y2gsIHhGLCB4UiwgeEMsIGQxKSxcbiAgICAgICAgICAgICAgICAgIGdldFgoYmF0Y2gsIHhGLCB4UiwgeEMsIGQxICsgMSksXG4gICAgICAgICAgICAgICAgICBnZXRYKGJhdGNoLCB4RiwgeFIsIHhDLCBkMSArIDIpLFxuICAgICAgICAgICAgICAgICAgZ2V0WChiYXRjaCwgeEYsIHhSLCB4QywgZDEgKyAzKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgbGV0IHdWYWx1ZXMgPSB2ZWM0PGYzMj4oXG4gICAgICAgICAgICAgICAgICBnZXRXKHdGLCB3Uiwgd0MsIGQxLCBkMiksXG4gICAgICAgICAgICAgICAgICBnZXRXKHdGLCB3Uiwgd0MsIGQxICsgMSwgZDIpLFxuICAgICAgICAgICAgICAgICAgZ2V0Vyh3Riwgd1IsIHdDLCBkMSArIDIsIGQyKSxcbiAgICAgICAgICAgICAgICAgIGdldFcod0YsIHdSLCB3QywgZDEgKyAzLCBkMilcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgZG90UHJvZCArPSBkb3QoeFZhbHVlcywgd1ZhbHVlcyk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAoaW5wdXREZXB0aFZlYzRSZW1haW5kZXIgPT0gMSkge1xuICAgICAgICAgICAgICAgIGRvdFByb2QgKz0gZ2V0WChiYXRjaCwgeEYsIHhSLCB4QywgaW5wdXREZXB0aE5lYXJlc3RWZWM0KSAqXG4gICAgICAgICAgICAgICAgICBnZXRXKHdGLCB3Uiwgd0MsIGlucHV0RGVwdGhOZWFyZXN0VmVjNCwgZDIpO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKGlucHV0RGVwdGhWZWM0UmVtYWluZGVyID09IDIpIHtcbiAgICAgICAgICAgICAgICBsZXQgeFZhbHVlcyA9IHZlYzI8ZjMyPihcbiAgICAgICAgICAgICAgICAgIGdldFgoYmF0Y2gsIHhGLCB4UiwgeEMsIGlucHV0RGVwdGhOZWFyZXN0VmVjNCksXG4gICAgICAgICAgICAgICAgICBnZXRYKGJhdGNoLCB4RiwgeFIsIHhDLCBpbnB1dERlcHRoTmVhcmVzdFZlYzQgKyAxKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgbGV0IHdWYWx1ZXMgPSB2ZWMyPGYzMj4oXG4gICAgICAgICAgICAgICAgICBnZXRXKHdGLCB3Uiwgd0MsIGlucHV0RGVwdGhOZWFyZXN0VmVjNCwgZDIpLFxuICAgICAgICAgICAgICAgICAgZ2V0Vyh3Riwgd1IsIHdDLCBpbnB1dERlcHRoTmVhcmVzdFZlYzQgKyAxLCBkMilcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGRvdFByb2QgKz0gZG90KHhWYWx1ZXMsIHdWYWx1ZXMpO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKGlucHV0RGVwdGhWZWM0UmVtYWluZGVyID09IDMpIHtcbiAgICAgICAgICAgICAgICBsZXQgeFZhbHVlcyA9IHZlYzM8ZjMyPihcbiAgICAgICAgICAgICAgICAgIGdldFgoYmF0Y2gsIHhGLCB4UiwgeEMsIGlucHV0RGVwdGhOZWFyZXN0VmVjNCksXG4gICAgICAgICAgICAgICAgICBnZXRYKGJhdGNoLCB4RiwgeFIsIHhDLCBpbnB1dERlcHRoTmVhcmVzdFZlYzQgKyAxKSxcbiAgICAgICAgICAgICAgICAgIGdldFgoYmF0Y2gsIHhGLCB4UiwgeEMsIGlucHV0RGVwdGhOZWFyZXN0VmVjNCArIDIpXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBsZXQgd1ZhbHVlcyA9IHZlYzM8ZjMyPihcbiAgICAgICAgICAgICAgICAgIGdldFcod0YsIHdSLCB3QywgaW5wdXREZXB0aE5lYXJlc3RWZWM0LCBkMiksXG4gICAgICAgICAgICAgICAgICBnZXRXKHdGLCB3Uiwgd0MsIGlucHV0RGVwdGhOZWFyZXN0VmVjNCArIDEsIGQyKSxcbiAgICAgICAgICAgICAgICAgIGdldFcod0YsIHdSLCB3QywgaW5wdXREZXB0aE5lYXJlc3RWZWM0ICsgMiwgZDIpXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBkb3RQcm9kICs9IGRvdCh4VmFsdWVzLCB3VmFsdWVzKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzZXRPdXRwdXRBdEluZGV4KGluZGV4LCBkb3RQcm9kKTtcbiAgICAgIH1cbiAgICB9YDtcbiAgICByZXR1cm4gdXNlckNvZGU7XG4gIH1cbn1cbiJdfQ==","/**\n * @license\n * Copyright 2023 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { backend_util, Conv3D, upcastType } from '@tensorflow/tfjs-core';\nimport { Conv3DNaiveProgram } from '../conv3d_naive_webgpu';\nexport function conv3D(args) {\n    const { inputs, backend, attrs } = args;\n    const { x, filter } = inputs;\n    const { strides, pad, dilations } = attrs;\n    const convInfo = backend_util.computeConv3DInfo(x.shape, filter.shape, strides, dilations, pad);\n    const padInfo = [convInfo.padInfo.front, convInfo.padInfo.top, convInfo.padInfo.left];\n    const dimensions = [\n        {\n            type: 'int32',\n            data: [convInfo.filterDepth, convInfo.filterHeight, convInfo.filterWidth]\n        },\n        { type: 'int32', data: [...padInfo] }, {\n            type: 'int32',\n            data: [convInfo.strideDepth, convInfo.strideHeight, convInfo.strideWidth]\n        },\n        {\n            type: 'int32',\n            data: [\n                convInfo.dilationDepth, convInfo.dilationHeight, convInfo.dilationWidth\n            ]\n        }\n    ];\n    const program = new Conv3DNaiveProgram(convInfo);\n    const dtype = upcastType(x.dtype, filter.dtype);\n    return backend.runWebGPUProgram(program, [x, filter], dtype, dimensions);\n}\nexport const conv3DConfig = {\n    kernelName: Conv3D,\n    backendName: 'webgpu',\n    kernelFunc: conv3D,\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ29udjNELmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMva2VybmVscy9Db252M0QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUFDLFlBQVksRUFBRSxNQUFNLEVBQXVELFVBQVUsRUFBQyxNQUFNLHVCQUF1QixDQUFDO0FBRzVILE9BQU8sRUFBQyxrQkFBa0IsRUFBQyxNQUFNLHdCQUF3QixDQUFDO0FBRTFELE1BQU0sVUFBVSxNQUFNLENBQ2xCLElBQXdFO0lBQzFFLE1BQU0sRUFBQyxNQUFNLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBQyxHQUFHLElBQUksQ0FBQztJQUN0QyxNQUFNLEVBQUMsQ0FBQyxFQUFFLE1BQU0sRUFBQyxHQUFHLE1BQU0sQ0FBQztJQUMzQixNQUFNLEVBQUMsT0FBTyxFQUFFLEdBQUcsRUFBRSxTQUFTLEVBQUMsR0FBRyxLQUFLLENBQUM7SUFFeEMsTUFBTSxRQUFRLEdBQUcsWUFBWSxDQUFDLGlCQUFpQixDQUMzQyxDQUFDLENBQUMsS0FBaUQsRUFDbkQsTUFBTSxDQUFDLEtBQWlELEVBQUUsT0FBTyxFQUNqRSxTQUFTLEVBQUUsR0FBRyxDQUFDLENBQUM7SUFFcEIsTUFBTSxPQUFPLEdBQ1QsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLEtBQUssRUFBRSxRQUFRLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxRQUFRLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQzFFLE1BQU0sVUFBVSxHQUFHO1FBQ2pCO1lBQ0UsSUFBSSxFQUFFLE9BQU87WUFDYixJQUFJLEVBQUUsQ0FBQyxRQUFRLENBQUMsV0FBVyxFQUFFLFFBQVEsQ0FBQyxZQUFZLEVBQUUsUUFBUSxDQUFDLFdBQVcsQ0FBQztTQUMxRTtRQUNELEVBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxFQUFDLEVBQUU7WUFDbkMsSUFBSSxFQUFFLE9BQU87WUFDYixJQUFJLEVBQUUsQ0FBQyxRQUFRLENBQUMsV0FBVyxFQUFFLFFBQVEsQ0FBQyxZQUFZLEVBQUUsUUFBUSxDQUFDLFdBQVcsQ0FBQztTQUMxRTtRQUNEO1lBQ0UsSUFBSSxFQUFFLE9BQU87WUFDYixJQUFJLEVBQUU7Z0JBQ0osUUFBUSxDQUFDLGFBQWEsRUFBRSxRQUFRLENBQUMsY0FBYyxFQUFFLFFBQVEsQ0FBQyxhQUFhO2FBQ3hFO1NBQ0Y7S0FDRixDQUFDO0lBQ0YsTUFBTSxPQUFPLEdBQUcsSUFBSSxrQkFBa0IsQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUNqRCxNQUFNLEtBQUssR0FBRyxVQUFVLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDaEQsT0FBTyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxFQUFFLEtBQUssRUFBRSxVQUFVLENBQUMsQ0FBQztBQUMzRSxDQUFDO0FBRUQsTUFBTSxDQUFDLE1BQU0sWUFBWSxHQUFpQjtJQUN4QyxVQUFVLEVBQUUsTUFBTTtJQUNsQixXQUFXLEVBQUUsUUFBUTtJQUNyQixVQUFVLEVBQUUsTUFBMEI7Q0FDdkMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTEMuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtiYWNrZW5kX3V0aWwsIENvbnYzRCwgQ29udjNEQXR0cnMsIENvbnYzRElucHV0cywgS2VybmVsQ29uZmlnLCBLZXJuZWxGdW5jLCB1cGNhc3RUeXBlfSBmcm9tICdAdGVuc29yZmxvdy90ZmpzLWNvcmUnO1xuXG5pbXBvcnQge1dlYkdQVUJhY2tlbmR9IGZyb20gJy4uL2JhY2tlbmRfd2ViZ3B1JztcbmltcG9ydCB7Q29udjNETmFpdmVQcm9ncmFtfSBmcm9tICcuLi9jb252M2RfbmFpdmVfd2ViZ3B1JztcblxuZXhwb3J0IGZ1bmN0aW9uIGNvbnYzRChcbiAgICBhcmdzOiB7aW5wdXRzOiBDb252M0RJbnB1dHMsIGF0dHJzOiBDb252M0RBdHRycywgYmFja2VuZDogV2ViR1BVQmFja2VuZH0pIHtcbiAgY29uc3Qge2lucHV0cywgYmFja2VuZCwgYXR0cnN9ID0gYXJncztcbiAgY29uc3Qge3gsIGZpbHRlcn0gPSBpbnB1dHM7XG4gIGNvbnN0IHtzdHJpZGVzLCBwYWQsIGRpbGF0aW9uc30gPSBhdHRycztcblxuICBjb25zdCBjb252SW5mbyA9IGJhY2tlbmRfdXRpbC5jb21wdXRlQ29udjNESW5mbyhcbiAgICAgIHguc2hhcGUgYXMgW251bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyXSxcbiAgICAgIGZpbHRlci5zaGFwZSBhcyBbbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXJdLCBzdHJpZGVzLFxuICAgICAgZGlsYXRpb25zLCBwYWQpO1xuXG4gIGNvbnN0IHBhZEluZm8gPVxuICAgICAgW2NvbnZJbmZvLnBhZEluZm8uZnJvbnQsIGNvbnZJbmZvLnBhZEluZm8udG9wLCBjb252SW5mby5wYWRJbmZvLmxlZnRdO1xuICBjb25zdCBkaW1lbnNpb25zID0gW1xuICAgIHtcbiAgICAgIHR5cGU6ICdpbnQzMicsXG4gICAgICBkYXRhOiBbY29udkluZm8uZmlsdGVyRGVwdGgsIGNvbnZJbmZvLmZpbHRlckhlaWdodCwgY29udkluZm8uZmlsdGVyV2lkdGhdXG4gICAgfSxcbiAgICB7dHlwZTogJ2ludDMyJywgZGF0YTogWy4uLnBhZEluZm9dfSwge1xuICAgICAgdHlwZTogJ2ludDMyJyxcbiAgICAgIGRhdGE6IFtjb252SW5mby5zdHJpZGVEZXB0aCwgY29udkluZm8uc3RyaWRlSGVpZ2h0LCBjb252SW5mby5zdHJpZGVXaWR0aF1cbiAgICB9LFxuICAgIHtcbiAgICAgIHR5cGU6ICdpbnQzMicsXG4gICAgICBkYXRhOiBbXG4gICAgICAgIGNvbnZJbmZvLmRpbGF0aW9uRGVwdGgsIGNvbnZJbmZvLmRpbGF0aW9uSGVpZ2h0LCBjb252SW5mby5kaWxhdGlvbldpZHRoXG4gICAgICBdXG4gICAgfVxuICBdO1xuICBjb25zdCBwcm9ncmFtID0gbmV3IENvbnYzRE5haXZlUHJvZ3JhbShjb252SW5mbyk7XG4gIGNvbnN0IGR0eXBlID0gdXBjYXN0VHlwZSh4LmR0eXBlLCBmaWx0ZXIuZHR5cGUpO1xuICByZXR1cm4gYmFja2VuZC5ydW5XZWJHUFVQcm9ncmFtKHByb2dyYW0sIFt4LCBmaWx0ZXJdLCBkdHlwZSwgZGltZW5zaW9ucyk7XG59XG5cbmV4cG9ydCBjb25zdCBjb252M0RDb25maWc6IEtlcm5lbENvbmZpZyA9IHtcbiAga2VybmVsTmFtZTogQ29udjNELFxuICBiYWNrZW5kTmFtZTogJ3dlYmdwdScsXG4gIGtlcm5lbEZ1bmM6IGNvbnYzRCBhcyB7fSBhcyBLZXJuZWxGdW5jLFxufTtcbiJdfQ==","/**\n * @license\n * Copyright 2023 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { backend_util, Conv3DBackpropFilterV2 } from '@tensorflow/tfjs-core';\nimport { Conv3DDerFilterProgram } from '../conv_backprop_webgpu';\nexport function conv3DBackpropFilterV2(args) {\n    const { inputs, backend, attrs } = args;\n    const { x, dy } = inputs;\n    const { strides, pad, filterShape } = attrs;\n    const convInfo = backend_util.computeConv3DInfo(x.shape, filterShape, strides, 1 /* dilations */, pad);\n    const program = new Conv3DDerFilterProgram(convInfo);\n    const uniformData = [\n        {\n            type: 'int32',\n            data: [convInfo.padInfo.front, convInfo.padInfo.top, convInfo.padInfo.left]\n        },\n        {\n            type: 'int32',\n            data: [convInfo.strideDepth, convInfo.strideHeight, convInfo.strideWidth]\n        },\n        { type: 'int32', data: [convInfo.batchSize] },\n        { type: 'int32', data: [convInfo.outDepth] },\n        { type: 'int32', data: [convInfo.outHeight] },\n        { type: 'int32', data: [convInfo.outWidth] },\n        { type: 'int32', data: [convInfo.inDepth] },\n        { type: 'int32', data: [convInfo.inHeight] },\n        { type: 'int32', data: [convInfo.inWidth] }\n    ];\n    return backend.runWebGPUProgram(program, [x, dy], dy.dtype, uniformData);\n}\nexport const conv3DBackpropFilterV2Config = {\n    kernelName: Conv3DBackpropFilterV2,\n    backendName: 'webgpu',\n    kernelFunc: conv3DBackpropFilterV2\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ29udjNEQmFja3Byb3BGaWx0ZXJWMi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2tlcm5lbHMvQ29udjNEQmFja3Byb3BGaWx0ZXJWMi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQUMsWUFBWSxFQUFFLHNCQUFzQixFQUFrRyxNQUFNLHVCQUF1QixDQUFDO0FBRzVLLE9BQU8sRUFBQyxzQkFBc0IsRUFBQyxNQUFNLHlCQUF5QixDQUFDO0FBRS9ELE1BQU0sVUFBVSxzQkFBc0IsQ0FBQyxJQUl0QztJQUNDLE1BQU0sRUFBQyxNQUFNLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBQyxHQUFHLElBQUksQ0FBQztJQUN0QyxNQUFNLEVBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBQyxHQUFHLE1BQU0sQ0FBQztJQUN2QixNQUFNLEVBQUMsT0FBTyxFQUFFLEdBQUcsRUFBRSxXQUFXLEVBQUMsR0FBRyxLQUFLLENBQUM7SUFFMUMsTUFBTSxRQUFRLEdBQUcsWUFBWSxDQUFDLGlCQUFpQixDQUMzQyxDQUFDLENBQUMsS0FBaUQsRUFBRSxXQUFXLEVBQUUsT0FBTyxFQUN6RSxDQUFDLENBQUMsZUFBZSxFQUFFLEdBQUcsQ0FBQyxDQUFDO0lBRTVCLE1BQU0sT0FBTyxHQUFHLElBQUksc0JBQXNCLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDckQsTUFBTSxXQUFXLEdBQUc7UUFDbEI7WUFDRSxJQUFJLEVBQUUsT0FBTztZQUNiLElBQUksRUFDQSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFFLFFBQVEsQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLFFBQVEsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDO1NBQzFFO1FBQ0Q7WUFDRSxJQUFJLEVBQUUsT0FBTztZQUNiLElBQUksRUFBRSxDQUFDLFFBQVEsQ0FBQyxXQUFXLEVBQUUsUUFBUSxDQUFDLFlBQVksRUFBRSxRQUFRLENBQUMsV0FBVyxDQUFDO1NBQzFFO1FBQ0QsRUFBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsRUFBQztRQUMzQyxFQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxFQUFDO1FBQzFDLEVBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLEVBQUM7UUFDM0MsRUFBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsRUFBQztRQUMxQyxFQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxFQUFDO1FBQ3pDLEVBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLEVBQUM7UUFDMUMsRUFBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsRUFBQztLQUMxQyxDQUFDO0lBQ0YsT0FBTyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxLQUFLLEVBQUUsV0FBVyxDQUFDLENBQUM7QUFDM0UsQ0FBQztBQUVELE1BQU0sQ0FBQyxNQUFNLDRCQUE0QixHQUFpQjtJQUN4RCxVQUFVLEVBQUUsc0JBQXNCO0lBQ2xDLFdBQVcsRUFBRSxRQUFRO0lBQ3JCLFVBQVUsRUFBRSxzQkFBK0M7Q0FDNUQsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTEMuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtiYWNrZW5kX3V0aWwsIENvbnYzREJhY2twcm9wRmlsdGVyVjIsIENvbnYzREJhY2twcm9wRmlsdGVyVjJBdHRycywgQ29udjNEQmFja3Byb3BGaWx0ZXJWMklucHV0cywgS2VybmVsQ29uZmlnLCBLZXJuZWxGdW5jLCBUZW5zb3JJbmZvfSBmcm9tICdAdGVuc29yZmxvdy90ZmpzLWNvcmUnO1xuXG5pbXBvcnQge1dlYkdQVUJhY2tlbmR9IGZyb20gJy4uL2JhY2tlbmRfd2ViZ3B1JztcbmltcG9ydCB7Q29udjNERGVyRmlsdGVyUHJvZ3JhbX0gZnJvbSAnLi4vY29udl9iYWNrcHJvcF93ZWJncHUnO1xuXG5leHBvcnQgZnVuY3Rpb24gY29udjNEQmFja3Byb3BGaWx0ZXJWMihhcmdzOiB7XG4gIGlucHV0czogQ29udjNEQmFja3Byb3BGaWx0ZXJWMklucHV0cyxcbiAgYXR0cnM6IENvbnYzREJhY2twcm9wRmlsdGVyVjJBdHRycyxcbiAgYmFja2VuZDogV2ViR1BVQmFja2VuZCxcbn0pOiBUZW5zb3JJbmZvIHtcbiAgY29uc3Qge2lucHV0cywgYmFja2VuZCwgYXR0cnN9ID0gYXJncztcbiAgY29uc3Qge3gsIGR5fSA9IGlucHV0cztcbiAgY29uc3Qge3N0cmlkZXMsIHBhZCwgZmlsdGVyU2hhcGV9ID0gYXR0cnM7XG5cbiAgY29uc3QgY29udkluZm8gPSBiYWNrZW5kX3V0aWwuY29tcHV0ZUNvbnYzREluZm8oXG4gICAgICB4LnNoYXBlIGFzIFtudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcl0sIGZpbHRlclNoYXBlLCBzdHJpZGVzLFxuICAgICAgMSAvKiBkaWxhdGlvbnMgKi8sIHBhZCk7XG5cbiAgY29uc3QgcHJvZ3JhbSA9IG5ldyBDb252M0REZXJGaWx0ZXJQcm9ncmFtKGNvbnZJbmZvKTtcbiAgY29uc3QgdW5pZm9ybURhdGEgPSBbXG4gICAge1xuICAgICAgdHlwZTogJ2ludDMyJyxcbiAgICAgIGRhdGE6XG4gICAgICAgICAgW2NvbnZJbmZvLnBhZEluZm8uZnJvbnQsIGNvbnZJbmZvLnBhZEluZm8udG9wLCBjb252SW5mby5wYWRJbmZvLmxlZnRdXG4gICAgfSxcbiAgICB7XG4gICAgICB0eXBlOiAnaW50MzInLFxuICAgICAgZGF0YTogW2NvbnZJbmZvLnN0cmlkZURlcHRoLCBjb252SW5mby5zdHJpZGVIZWlnaHQsIGNvbnZJbmZvLnN0cmlkZVdpZHRoXVxuICAgIH0sXG4gICAge3R5cGU6ICdpbnQzMicsIGRhdGE6IFtjb252SW5mby5iYXRjaFNpemVdfSxcbiAgICB7dHlwZTogJ2ludDMyJywgZGF0YTogW2NvbnZJbmZvLm91dERlcHRoXX0sXG4gICAge3R5cGU6ICdpbnQzMicsIGRhdGE6IFtjb252SW5mby5vdXRIZWlnaHRdfSxcbiAgICB7dHlwZTogJ2ludDMyJywgZGF0YTogW2NvbnZJbmZvLm91dFdpZHRoXX0sXG4gICAge3R5cGU6ICdpbnQzMicsIGRhdGE6IFtjb252SW5mby5pbkRlcHRoXX0sXG4gICAge3R5cGU6ICdpbnQzMicsIGRhdGE6IFtjb252SW5mby5pbkhlaWdodF19LFxuICAgIHt0eXBlOiAnaW50MzInLCBkYXRhOiBbY29udkluZm8uaW5XaWR0aF19XG4gIF07XG4gIHJldHVybiBiYWNrZW5kLnJ1bldlYkdQVVByb2dyYW0ocHJvZ3JhbSwgW3gsIGR5XSwgZHkuZHR5cGUsIHVuaWZvcm1EYXRhKTtcbn1cblxuZXhwb3J0IGNvbnN0IGNvbnYzREJhY2twcm9wRmlsdGVyVjJDb25maWc6IEtlcm5lbENvbmZpZyA9IHtcbiAga2VybmVsTmFtZTogQ29udjNEQmFja3Byb3BGaWx0ZXJWMixcbiAgYmFja2VuZE5hbWU6ICd3ZWJncHUnLFxuICBrZXJuZWxGdW5jOiBjb252M0RCYWNrcHJvcEZpbHRlclYyIGFzIHVua25vd24gYXMgS2VybmVsRnVuY1xufTtcbiJdfQ==","/**\n * @license\n * Copyright 2023 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { backend_util, Conv3DBackpropInputV2 } from '@tensorflow/tfjs-core';\nimport { Conv3DDerInputProgram } from '../conv_backprop_webgpu';\nexport function conv3DBackpropInputV2(args) {\n    const { inputs, backend, attrs } = args;\n    const { dy, filter } = inputs;\n    const { strides, pad, inputShape } = attrs;\n    const convInfo = backend_util.computeConv3DInfo(inputShape, filter.shape, strides, 1 /* dilations */, pad);\n    const program = new Conv3DDerInputProgram(convInfo);\n    const uniformData = [\n        {\n            type: 'int32',\n            data: [convInfo.filterDepth, convInfo.filterHeight, convInfo.filterWidth]\n        },\n        {\n            type: 'int32',\n            data: [\n                convInfo.filterDepth - 1 - convInfo.padInfo.front,\n                convInfo.filterHeight - 1 - convInfo.padInfo.top,\n                convInfo.filterWidth - 1 - convInfo.padInfo.left\n            ]\n        },\n        {\n            type: 'int32',\n            data: [convInfo.strideDepth, convInfo.strideHeight, convInfo.strideWidth]\n        },\n        { type: 'int32', data: [convInfo.outDepth] },\n        { type: 'int32', data: [convInfo.outHeight] },\n        { type: 'int32', data: [convInfo.outWidth] },\n        { type: 'int32', data: [convInfo.outChannels] }\n    ];\n    return backend.runWebGPUProgram(program, [dy, filter], dy.dtype, uniformData);\n}\nexport const conv3DBackpropInputV2Config = {\n    kernelName: Conv3DBackpropInputV2,\n    backendName: 'webgpu',\n    kernelFunc: conv3DBackpropInputV2,\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ29udjNEQmFja3Byb3BJbnB1dFYyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMva2VybmVscy9Db252M0RCYWNrcHJvcElucHV0VjIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUFDLFlBQVksRUFBRSxxQkFBcUIsRUFBZ0csTUFBTSx1QkFBdUIsQ0FBQztBQUd6SyxPQUFPLEVBQUMscUJBQXFCLEVBQUMsTUFBTSx5QkFBeUIsQ0FBQztBQUU5RCxNQUFNLFVBQVUscUJBQXFCLENBQUMsSUFJckM7SUFDQyxNQUFNLEVBQUMsTUFBTSxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUMsR0FBRyxJQUFJLENBQUM7SUFDdEMsTUFBTSxFQUFDLEVBQUUsRUFBRSxNQUFNLEVBQUMsR0FBRyxNQUFNLENBQUM7SUFDNUIsTUFBTSxFQUFDLE9BQU8sRUFBRSxHQUFHLEVBQUUsVUFBVSxFQUFDLEdBQUcsS0FBSyxDQUFDO0lBRXpDLE1BQU0sUUFBUSxHQUFHLFlBQVksQ0FBQyxpQkFBaUIsQ0FDM0MsVUFBVSxFQUFFLE1BQU0sQ0FBQyxLQUFpRCxFQUNwRSxPQUFPLEVBQUUsQ0FBQyxDQUFDLGVBQWUsRUFBRSxHQUFHLENBQUMsQ0FBQztJQUVyQyxNQUFNLE9BQU8sR0FBRyxJQUFJLHFCQUFxQixDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQ3BELE1BQU0sV0FBVyxHQUFHO1FBQ2xCO1lBQ0UsSUFBSSxFQUFFLE9BQU87WUFDYixJQUFJLEVBQUUsQ0FBQyxRQUFRLENBQUMsV0FBVyxFQUFFLFFBQVEsQ0FBQyxZQUFZLEVBQUUsUUFBUSxDQUFDLFdBQVcsQ0FBQztTQUMxRTtRQUNEO1lBQ0UsSUFBSSxFQUFFLE9BQU87WUFDYixJQUFJLEVBQUU7Z0JBQ0osUUFBUSxDQUFDLFdBQVcsR0FBRyxDQUFDLEdBQUcsUUFBUSxDQUFDLE9BQU8sQ0FBQyxLQUFLO2dCQUNqRCxRQUFRLENBQUMsWUFBWSxHQUFHLENBQUMsR0FBRyxRQUFRLENBQUMsT0FBTyxDQUFDLEdBQUc7Z0JBQ2hELFFBQVEsQ0FBQyxXQUFXLEdBQUcsQ0FBQyxHQUFHLFFBQVEsQ0FBQyxPQUFPLENBQUMsSUFBSTthQUNqRDtTQUNGO1FBQ0Q7WUFDRSxJQUFJLEVBQUUsT0FBTztZQUNiLElBQUksRUFBRSxDQUFDLFFBQVEsQ0FBQyxXQUFXLEVBQUUsUUFBUSxDQUFDLFlBQVksRUFBRSxRQUFRLENBQUMsV0FBVyxDQUFDO1NBQzFFO1FBQ0QsRUFBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsRUFBQztRQUMxQyxFQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxFQUFDO1FBQzNDLEVBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLEVBQUM7UUFDMUMsRUFBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsRUFBQztLQUM5QyxDQUFDO0lBRUYsT0FBTyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLENBQUMsRUFBRSxFQUFFLE1BQU0sQ0FBQyxFQUFFLEVBQUUsQ0FBQyxLQUFLLEVBQUUsV0FBVyxDQUFDLENBQUM7QUFDaEYsQ0FBQztBQUVELE1BQU0sQ0FBQyxNQUFNLDJCQUEyQixHQUFpQjtJQUN2RCxVQUFVLEVBQUUscUJBQXFCO0lBQ2pDLFdBQVcsRUFBRSxRQUFRO0lBQ3JCLFVBQVUsRUFBRSxxQkFBOEM7Q0FDM0QsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTEMuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtiYWNrZW5kX3V0aWwsIENvbnYzREJhY2twcm9wSW5wdXRWMiwgQ29udjNEQmFja3Byb3BJbnB1dFYyQXR0cnMsIENvbnYzREJhY2twcm9wSW5wdXRWMklucHV0cywgS2VybmVsQ29uZmlnLCBLZXJuZWxGdW5jLCBUZW5zb3JJbmZvfSBmcm9tICdAdGVuc29yZmxvdy90ZmpzLWNvcmUnO1xuXG5pbXBvcnQge1dlYkdQVUJhY2tlbmR9IGZyb20gJy4uL2JhY2tlbmRfd2ViZ3B1JztcbmltcG9ydCB7Q29udjNERGVySW5wdXRQcm9ncmFtfSBmcm9tICcuLi9jb252X2JhY2twcm9wX3dlYmdwdSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBjb252M0RCYWNrcHJvcElucHV0VjIoYXJnczoge1xuICBpbnB1dHM6IENvbnYzREJhY2twcm9wSW5wdXRWMklucHV0cyxcbiAgYXR0cnM6IENvbnYzREJhY2twcm9wSW5wdXRWMkF0dHJzLFxuICBiYWNrZW5kOiBXZWJHUFVCYWNrZW5kXG59KTogVGVuc29ySW5mbyB7XG4gIGNvbnN0IHtpbnB1dHMsIGJhY2tlbmQsIGF0dHJzfSA9IGFyZ3M7XG4gIGNvbnN0IHtkeSwgZmlsdGVyfSA9IGlucHV0cztcbiAgY29uc3Qge3N0cmlkZXMsIHBhZCwgaW5wdXRTaGFwZX0gPSBhdHRycztcblxuICBjb25zdCBjb252SW5mbyA9IGJhY2tlbmRfdXRpbC5jb21wdXRlQ29udjNESW5mbyhcbiAgICAgIGlucHV0U2hhcGUsIGZpbHRlci5zaGFwZSBhcyBbbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXJdLFxuICAgICAgc3RyaWRlcywgMSAvKiBkaWxhdGlvbnMgKi8sIHBhZCk7XG5cbiAgY29uc3QgcHJvZ3JhbSA9IG5ldyBDb252M0REZXJJbnB1dFByb2dyYW0oY29udkluZm8pO1xuICBjb25zdCB1bmlmb3JtRGF0YSA9IFtcbiAgICB7XG4gICAgICB0eXBlOiAnaW50MzInLFxuICAgICAgZGF0YTogW2NvbnZJbmZvLmZpbHRlckRlcHRoLCBjb252SW5mby5maWx0ZXJIZWlnaHQsIGNvbnZJbmZvLmZpbHRlcldpZHRoXVxuICAgIH0sXG4gICAge1xuICAgICAgdHlwZTogJ2ludDMyJyxcbiAgICAgIGRhdGE6IFtcbiAgICAgICAgY29udkluZm8uZmlsdGVyRGVwdGggLSAxIC0gY29udkluZm8ucGFkSW5mby5mcm9udCxcbiAgICAgICAgY29udkluZm8uZmlsdGVySGVpZ2h0IC0gMSAtIGNvbnZJbmZvLnBhZEluZm8udG9wLFxuICAgICAgICBjb252SW5mby5maWx0ZXJXaWR0aCAtIDEgLSBjb252SW5mby5wYWRJbmZvLmxlZnRcbiAgICAgIF1cbiAgICB9LFxuICAgIHtcbiAgICAgIHR5cGU6ICdpbnQzMicsXG4gICAgICBkYXRhOiBbY29udkluZm8uc3RyaWRlRGVwdGgsIGNvbnZJbmZvLnN0cmlkZUhlaWdodCwgY29udkluZm8uc3RyaWRlV2lkdGhdXG4gICAgfSxcbiAgICB7dHlwZTogJ2ludDMyJywgZGF0YTogW2NvbnZJbmZvLm91dERlcHRoXX0sXG4gICAge3R5cGU6ICdpbnQzMicsIGRhdGE6IFtjb252SW5mby5vdXRIZWlnaHRdfSxcbiAgICB7dHlwZTogJ2ludDMyJywgZGF0YTogW2NvbnZJbmZvLm91dFdpZHRoXX0sXG4gICAge3R5cGU6ICdpbnQzMicsIGRhdGE6IFtjb252SW5mby5vdXRDaGFubmVsc119XG4gIF07XG5cbiAgcmV0dXJuIGJhY2tlbmQucnVuV2ViR1BVUHJvZ3JhbShwcm9ncmFtLCBbZHksIGZpbHRlcl0sIGR5LmR0eXBlLCB1bmlmb3JtRGF0YSk7XG59XG5cbmV4cG9ydCBjb25zdCBjb252M0RCYWNrcHJvcElucHV0VjJDb25maWc6IEtlcm5lbENvbmZpZyA9IHtcbiAga2VybmVsTmFtZTogQ29udjNEQmFja3Byb3BJbnB1dFYyLFxuICBiYWNrZW5kTmFtZTogJ3dlYmdwdScsXG4gIGtlcm5lbEZ1bmM6IGNvbnYzREJhY2twcm9wSW5wdXRWMiBhcyB1bmtub3duIGFzIEtlcm5lbEZ1bmMsXG59O1xuIl19","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Cos } from '@tensorflow/tfjs-core';\nimport { unaryKernelFunc } from '../kernel_utils/kernel_funcs_utils';\nimport { UnaryOpType } from '../unary_op_util';\nexport const cos = unaryKernelFunc({ opType: UnaryOpType.COS });\nexport const cosConfig = {\n    kernelName: Cos,\n    backendName: 'webgpu',\n    kernelFunc: cos\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ29zLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMva2VybmVscy9Db3MudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUFDLEdBQUcsRUFBZSxNQUFNLHVCQUF1QixDQUFDO0FBRXhELE9BQU8sRUFBQyxlQUFlLEVBQUMsTUFBTSxvQ0FBb0MsQ0FBQztBQUVuRSxPQUFPLEVBQUMsV0FBVyxFQUFDLE1BQU0sa0JBQWtCLENBQUM7QUFFN0MsTUFBTSxDQUFDLE1BQU0sR0FBRyxHQUFHLGVBQWUsQ0FBQyxFQUFDLE1BQU0sRUFBRSxXQUFXLENBQUMsR0FBRyxFQUFDLENBQUMsQ0FBQztBQUU5RCxNQUFNLENBQUMsTUFBTSxTQUFTLEdBQWlCO0lBQ3JDLFVBQVUsRUFBRSxHQUFHO0lBQ2YsV0FBVyxFQUFFLFFBQVE7SUFDckIsVUFBVSxFQUFFLEdBQUc7Q0FDaEIsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtDb3MsIEtlcm5lbENvbmZpZ30gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcblxuaW1wb3J0IHt1bmFyeUtlcm5lbEZ1bmN9IGZyb20gJy4uL2tlcm5lbF91dGlscy9rZXJuZWxfZnVuY3NfdXRpbHMnO1xuXG5pbXBvcnQge1VuYXJ5T3BUeXBlfSBmcm9tICcuLi91bmFyeV9vcF91dGlsJztcblxuZXhwb3J0IGNvbnN0IGNvcyA9IHVuYXJ5S2VybmVsRnVuYyh7b3BUeXBlOiBVbmFyeU9wVHlwZS5DT1N9KTtcblxuZXhwb3J0IGNvbnN0IGNvc0NvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBDb3MsXG4gIGJhY2tlbmROYW1lOiAnd2ViZ3B1JyxcbiAga2VybmVsRnVuYzogY29zXG59O1xuIl19","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Cosh } from '@tensorflow/tfjs-core';\nimport { unaryKernelFunc } from '../kernel_utils/kernel_funcs_utils';\nimport { UnaryOpType } from '../unary_op_util';\nexport const cosh = unaryKernelFunc({ opType: UnaryOpType.COSH });\nexport const coshConfig = {\n    kernelName: Cosh,\n    backendName: 'webgpu',\n    kernelFunc: cosh\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ29zaC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2tlcm5lbHMvQ29zaC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQUMsSUFBSSxFQUFlLE1BQU0sdUJBQXVCLENBQUM7QUFFekQsT0FBTyxFQUFDLGVBQWUsRUFBQyxNQUFNLG9DQUFvQyxDQUFDO0FBRW5FLE9BQU8sRUFBQyxXQUFXLEVBQUMsTUFBTSxrQkFBa0IsQ0FBQztBQUU3QyxNQUFNLENBQUMsTUFBTSxJQUFJLEdBQUcsZUFBZSxDQUFDLEVBQUMsTUFBTSxFQUFFLFdBQVcsQ0FBQyxJQUFJLEVBQUMsQ0FBQyxDQUFDO0FBRWhFLE1BQU0sQ0FBQyxNQUFNLFVBQVUsR0FBaUI7SUFDdEMsVUFBVSxFQUFFLElBQUk7SUFDaEIsV0FBVyxFQUFFLFFBQVE7SUFDckIsVUFBVSxFQUFFLElBQUk7Q0FDakIsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtDb3NoLCBLZXJuZWxDb25maWd9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7dW5hcnlLZXJuZWxGdW5jfSBmcm9tICcuLi9rZXJuZWxfdXRpbHMva2VybmVsX2Z1bmNzX3V0aWxzJztcblxuaW1wb3J0IHtVbmFyeU9wVHlwZX0gZnJvbSAnLi4vdW5hcnlfb3BfdXRpbCc7XG5cbmV4cG9ydCBjb25zdCBjb3NoID0gdW5hcnlLZXJuZWxGdW5jKHtvcFR5cGU6IFVuYXJ5T3BUeXBlLkNPU0h9KTtcblxuZXhwb3J0IGNvbnN0IGNvc2hDb25maWc6IEtlcm5lbENvbmZpZyA9IHtcbiAga2VybmVsTmFtZTogQ29zaCxcbiAgYmFja2VuZE5hbWU6ICd3ZWJncHUnLFxuICBrZXJuZWxGdW5jOiBjb3NoXG59O1xuIl19","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { getMainHeaderString as main } from './webgpu_program';\nimport { computeDispatch, flatDispatchLayout } from './webgpu_util';\nexport class CropAndResizeProgram {\n    constructor(channnel, boxShape, cropSize, method) {\n        this.variableNames = ['Image', 'Boxes', 'BoxInd'];\n        this.uniforms = 'extrapolationValue : f32,';\n        this.workgroupSize = [64, 1, 1];\n        this.size = true;\n        const [numBoxes,] = boxShape;\n        this.outputShape = [numBoxes, cropSize[0], cropSize[1], channnel];\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize);\n        this.methodId = method === 'bilinear' ? 1 : 0;\n        this.cropHeightBiggerThan1 = this.outputShape[1] > 1;\n        this.cropWidthBiggerThan1 = this.outputShape[2] > 1;\n        this.shaderKey = `cropAndResize_${this.methodId}_${this.cropHeightBiggerThan1}_${this.cropWidthBiggerThan1}`;\n    }\n    getUserCode() {\n        const [inputHeightFloat, inputWidthFloat] = [`f32(uniforms.imageShape[1] - 1)`, `f32(uniforms.imageShape[2] - 1)`];\n        const [heightRatio, heightScale, inY] = this.cropHeightBiggerThan1 ?\n            [\n                `(${inputHeightFloat} / f32(uniforms.outShape[1] - 1))`,\n                '(y2-y1) * height_ratio',\n                `y1*${inputHeightFloat} + f32(y)*(height_scale)`,\n            ] :\n            [\n                '0.0',\n                '0.0',\n                `0.5 * (y1+y2) * ${inputHeightFloat}`,\n            ];\n        const [widthRatio, widthScale, inX] = this.cropWidthBiggerThan1 ?\n            [\n                `(${inputWidthFloat} / f32(uniforms.outShape[2] - 1))`,\n                '(x2-x1) * width_ratio',\n                `x1*${inputWidthFloat} + f32(x)*(width_scale)`,\n            ] :\n            [\n                '0.0',\n                '0.0',\n                `0.5 * (x1+x2) * ${inputWidthFloat}`,\n            ];\n        // Reference implementation\n        // tslint:disable-next-line:max-line-length\n        // https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/kernels/crop_and_resize_op_gpu.cu.cc\n        const userCode = `\n    ${main('index')} {\n      if (index < uniforms.size) {\n        let coords = getCoordsFromIndex(index);\n        let height_ratio = f32(${heightRatio});\n        let width_ratio = f32(${widthRatio});\n        let b = coords[0];\n        let y = coords[1];\n        let x = coords[2];\n        let d = coords[3];\n        // get box vals\n        let y1 = getBoxes(b, 0);\n        let x1 = getBoxes(b, 1);\n        let y2 = getBoxes(b, 2);\n        let x2 = getBoxes(b, 3);\n        // get image in batch index\n        let bInd = i32(round(getBoxInd(b)));\n        if(bInd < 0 || bInd >= uniforms.outShape[0]) {\n          return;\n        }\n        let height_scale = ${heightScale};\n        let width_scale = ${widthScale};\n        let in_y = ${inY};\n        if( in_y < 0.0 || in_y > ${inputHeightFloat} ) {\n          setOutputAtIndex(index, uniforms.extrapolationValue);\n          return;\n        }\n        let in_x = ${inX};\n        if( in_x < 0.0 || in_x > ${inputWidthFloat} ) {\n          setOutputAtIndex(index, uniforms.extrapolationValue);\n          return;\n        }\n        let sourceFracIndexCR = vec2<f32>(in_x,in_y);\n        if(${this.methodId} == 1) {\n          // Compute the four integer indices.\n          let sourceFloorCR = vec2<i32>(sourceFracIndexCR);\n          let sourceCeilCR = vec2<i32>(ceil(sourceFracIndexCR));\n          let topLeft = getImage(bInd, sourceFloorCR.y, sourceFloorCR.x, d);\n          let bottomLeft = getImage(bInd, sourceCeilCR.y, sourceFloorCR.x, d);\n          let topRight = getImage(bInd, sourceFloorCR.y, sourceCeilCR.x, d);\n          let bottomRight = getImage(bInd, sourceCeilCR.y, sourceCeilCR.x, d);\n          let fracCR = sourceFracIndexCR - vec2<f32>(sourceFloorCR);\n          let top = topLeft + (topRight - topLeft) * fracCR.x;\n          let bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          let newValue = top + (bottom - top) * fracCR.y;\n          setOutputAtIndex(index, newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          let sourceNearestCR = vec2<i32>(floor(\n            sourceFracIndexCR + vec2<f32>(0.5,0.5)));\n          let newValue = getImage(\n            bInd, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutputAtIndex(index, newValue);\n        }\n      }\n    }\n    `;\n        return userCode;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3JvcF9hbmRfcmVzaXplX3dlYmdwdS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2Nyb3BfYW5kX3Jlc2l6ZV93ZWJncHUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUFDLG1CQUFtQixJQUFJLElBQUksRUFBZ0IsTUFBTSxrQkFBa0IsQ0FBQztBQUM1RSxPQUFPLEVBQUMsZUFBZSxFQUFFLGtCQUFrQixFQUFDLE1BQU0sZUFBZSxDQUFDO0FBRWxFLE1BQU0sT0FBTyxvQkFBb0I7SUFhL0IsWUFDSSxRQUFnQixFQUFFLFFBQTBCLEVBQUUsUUFBMEIsRUFDeEUsTUFBNEI7UUFWaEMsa0JBQWEsR0FBRyxDQUFDLE9BQU8sRUFBRSxPQUFPLEVBQUUsUUFBUSxDQUFDLENBQUM7UUFDN0MsYUFBUSxHQUFHLDJCQUEyQixDQUFDO1FBQ3ZDLGtCQUFhLEdBQTZCLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUlyRCxTQUFJLEdBQUcsSUFBSSxDQUFDO1FBS1YsTUFBTSxDQUFDLFFBQVEsRUFBRyxHQUFHLFFBQVEsQ0FBQztRQUM5QixJQUFJLENBQUMsV0FBVyxHQUFHLENBQUMsUUFBUSxFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQUMsRUFBRSxRQUFRLENBQUMsQ0FBQyxDQUFDLEVBQUUsUUFBUSxDQUFDLENBQUM7UUFDbEUsSUFBSSxDQUFDLGNBQWMsR0FBRyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDM0QsSUFBSSxDQUFDLFFBQVEsR0FBRyxlQUFlLENBQzNCLElBQUksQ0FBQyxjQUFjLEVBQUUsSUFBSSxDQUFDLFdBQVcsRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7UUFFL0QsSUFBSSxDQUFDLFFBQVEsR0FBRyxNQUFNLEtBQUssVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUM5QyxJQUFJLENBQUMscUJBQXFCLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDckQsSUFBSSxDQUFDLG9CQUFvQixHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ3BELElBQUksQ0FBQyxTQUFTLEdBQUcsaUJBQWlCLElBQUksQ0FBQyxRQUFRLElBQzNDLElBQUksQ0FBQyxxQkFBcUIsSUFBSSxJQUFJLENBQUMsb0JBQW9CLEVBQUUsQ0FBQztJQUNoRSxDQUFDO0lBRUQsV0FBVztRQUNULE1BQU0sQ0FBQyxnQkFBZ0IsRUFBRSxlQUFlLENBQUMsR0FDckMsQ0FBQyxpQ0FBaUMsRUFBRSxpQ0FBaUMsQ0FBQyxDQUFDO1FBRTNFLE1BQU0sQ0FBQyxXQUFXLEVBQUUsV0FBVyxFQUFFLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDO1lBQ2hFO2dCQUNFLElBQUksZ0JBQWdCLG1DQUFtQztnQkFDdkQsd0JBQXdCO2dCQUN4QixNQUFNLGdCQUFnQiwwQkFBMEI7YUFDakQsQ0FBQyxDQUFDO1lBQ0g7Z0JBQ0UsS0FBSztnQkFDTCxLQUFLO2dCQUNMLG1CQUFtQixnQkFBZ0IsRUFBRTthQUN0QyxDQUFDO1FBQ04sTUFBTSxDQUFDLFVBQVUsRUFBRSxVQUFVLEVBQUUsR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLG9CQUFvQixDQUFDLENBQUM7WUFDN0Q7Z0JBQ0UsSUFBSSxlQUFlLG1DQUFtQztnQkFDdEQsdUJBQXVCO2dCQUN2QixNQUFNLGVBQWUseUJBQXlCO2FBQy9DLENBQUMsQ0FBQztZQUNIO2dCQUNFLEtBQUs7Z0JBQ0wsS0FBSztnQkFDTCxtQkFBbUIsZUFBZSxFQUFFO2FBQ3JDLENBQUM7UUFFTiwyQkFBMkI7UUFDM0IsMkNBQTJDO1FBQzNDLDRHQUE0RztRQUM1RyxNQUFNLFFBQVEsR0FBRztNQUNmLElBQUksQ0FBQyxPQUFPLENBQUM7OztpQ0FHYyxXQUFXO2dDQUNaLFVBQVU7Ozs7Ozs7Ozs7Ozs7Ozs2QkFlYixXQUFXOzRCQUNaLFVBQVU7cUJBQ2pCLEdBQUc7bUNBQ1csZ0JBQWdCOzs7O3FCQUk5QixHQUFHO21DQUNXLGVBQWU7Ozs7O2FBS3JDLElBQUksQ0FBQyxRQUFROzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztLQXVCckIsQ0FBQztRQUNGLE9BQU8sUUFBUSxDQUFDO0lBQ2xCLENBQUM7Q0FDRiIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtnZXRNYWluSGVhZGVyU3RyaW5nIGFzIG1haW4sIFdlYkdQVVByb2dyYW19IGZyb20gJy4vd2ViZ3B1X3Byb2dyYW0nO1xuaW1wb3J0IHtjb21wdXRlRGlzcGF0Y2gsIGZsYXREaXNwYXRjaExheW91dH0gZnJvbSAnLi93ZWJncHVfdXRpbCc7XG5cbmV4cG9ydCBjbGFzcyBDcm9wQW5kUmVzaXplUHJvZ3JhbSBpbXBsZW1lbnRzIFdlYkdQVVByb2dyYW0ge1xuICBvdXRwdXRTaGFwZTogbnVtYmVyW107XG4gIHNoYWRlcktleTogc3RyaW5nO1xuICBkaXNwYXRjaExheW91dDoge3g6IG51bWJlcltdfTtcbiAgZGlzcGF0Y2g6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXTtcbiAgdmFyaWFibGVOYW1lcyA9IFsnSW1hZ2UnLCAnQm94ZXMnLCAnQm94SW5kJ107XG4gIHVuaWZvcm1zID0gJ2V4dHJhcG9sYXRpb25WYWx1ZSA6IGYzMiwnO1xuICB3b3JrZ3JvdXBTaXplOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl0gPSBbNjQsIDEsIDFdO1xuICBtZXRob2RJZDogbnVtYmVyO1xuICBjcm9wSGVpZ2h0QmlnZ2VyVGhhbjE6IGJvb2xlYW47XG4gIGNyb3BXaWR0aEJpZ2dlclRoYW4xOiBib29sZWFuO1xuICBzaXplID0gdHJ1ZTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICAgIGNoYW5ubmVsOiBudW1iZXIsIGJveFNoYXBlOiBbbnVtYmVyLCBudW1iZXJdLCBjcm9wU2l6ZTogW251bWJlciwgbnVtYmVyXSxcbiAgICAgIG1ldGhvZDogJ2JpbGluZWFyJ3wnbmVhcmVzdCcpIHtcbiAgICBjb25zdCBbbnVtQm94ZXMsIF0gPSBib3hTaGFwZTtcbiAgICB0aGlzLm91dHB1dFNoYXBlID0gW251bUJveGVzLCBjcm9wU2l6ZVswXSwgY3JvcFNpemVbMV0sIGNoYW5ubmVsXTtcbiAgICB0aGlzLmRpc3BhdGNoTGF5b3V0ID0gZmxhdERpc3BhdGNoTGF5b3V0KHRoaXMub3V0cHV0U2hhcGUpO1xuICAgIHRoaXMuZGlzcGF0Y2ggPSBjb21wdXRlRGlzcGF0Y2goXG4gICAgICAgIHRoaXMuZGlzcGF0Y2hMYXlvdXQsIHRoaXMub3V0cHV0U2hhcGUsIHRoaXMud29ya2dyb3VwU2l6ZSk7XG5cbiAgICB0aGlzLm1ldGhvZElkID0gbWV0aG9kID09PSAnYmlsaW5lYXInID8gMSA6IDA7XG4gICAgdGhpcy5jcm9wSGVpZ2h0QmlnZ2VyVGhhbjEgPSB0aGlzLm91dHB1dFNoYXBlWzFdID4gMTtcbiAgICB0aGlzLmNyb3BXaWR0aEJpZ2dlclRoYW4xID0gdGhpcy5vdXRwdXRTaGFwZVsyXSA+IDE7XG4gICAgdGhpcy5zaGFkZXJLZXkgPSBgY3JvcEFuZFJlc2l6ZV8ke3RoaXMubWV0aG9kSWR9XyR7XG4gICAgICAgIHRoaXMuY3JvcEhlaWdodEJpZ2dlclRoYW4xfV8ke3RoaXMuY3JvcFdpZHRoQmlnZ2VyVGhhbjF9YDtcbiAgfVxuXG4gIGdldFVzZXJDb2RlKCk6IHN0cmluZyB7XG4gICAgY29uc3QgW2lucHV0SGVpZ2h0RmxvYXQsIGlucHV0V2lkdGhGbG9hdF0gPVxuICAgICAgICBbYGYzMih1bmlmb3Jtcy5pbWFnZVNoYXBlWzFdIC0gMSlgLCBgZjMyKHVuaWZvcm1zLmltYWdlU2hhcGVbMl0gLSAxKWBdO1xuXG4gICAgY29uc3QgW2hlaWdodFJhdGlvLCBoZWlnaHRTY2FsZSwgaW5ZXSA9IHRoaXMuY3JvcEhlaWdodEJpZ2dlclRoYW4xID9cbiAgICAgICAgW1xuICAgICAgICAgIGAoJHtpbnB1dEhlaWdodEZsb2F0fSAvIGYzMih1bmlmb3Jtcy5vdXRTaGFwZVsxXSAtIDEpKWAsXG4gICAgICAgICAgJyh5Mi15MSkgKiBoZWlnaHRfcmF0aW8nLFxuICAgICAgICAgIGB5MSoke2lucHV0SGVpZ2h0RmxvYXR9ICsgZjMyKHkpKihoZWlnaHRfc2NhbGUpYCxcbiAgICAgICAgXSA6XG4gICAgICAgIFtcbiAgICAgICAgICAnMC4wJyxcbiAgICAgICAgICAnMC4wJyxcbiAgICAgICAgICBgMC41ICogKHkxK3kyKSAqICR7aW5wdXRIZWlnaHRGbG9hdH1gLFxuICAgICAgICBdO1xuICAgIGNvbnN0IFt3aWR0aFJhdGlvLCB3aWR0aFNjYWxlLCBpblhdID0gdGhpcy5jcm9wV2lkdGhCaWdnZXJUaGFuMSA/XG4gICAgICAgIFtcbiAgICAgICAgICBgKCR7aW5wdXRXaWR0aEZsb2F0fSAvIGYzMih1bmlmb3Jtcy5vdXRTaGFwZVsyXSAtIDEpKWAsXG4gICAgICAgICAgJyh4Mi14MSkgKiB3aWR0aF9yYXRpbycsXG4gICAgICAgICAgYHgxKiR7aW5wdXRXaWR0aEZsb2F0fSArIGYzMih4KSood2lkdGhfc2NhbGUpYCxcbiAgICAgICAgXSA6XG4gICAgICAgIFtcbiAgICAgICAgICAnMC4wJyxcbiAgICAgICAgICAnMC4wJyxcbiAgICAgICAgICBgMC41ICogKHgxK3gyKSAqICR7aW5wdXRXaWR0aEZsb2F0fWAsXG4gICAgICAgIF07XG5cbiAgICAvLyBSZWZlcmVuY2UgaW1wbGVtZW50YXRpb25cbiAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bWF4LWxpbmUtbGVuZ3RoXG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3RlbnNvcmZsb3cvdGVuc29yZmxvdy9ibG9iL21hc3Rlci90ZW5zb3JmbG93L2NvcmUva2VybmVscy9jcm9wX2FuZF9yZXNpemVfb3BfZ3B1LmN1LmNjXG4gICAgY29uc3QgdXNlckNvZGUgPSBgXG4gICAgJHttYWluKCdpbmRleCcpfSB7XG4gICAgICBpZiAoaW5kZXggPCB1bmlmb3Jtcy5zaXplKSB7XG4gICAgICAgIGxldCBjb29yZHMgPSBnZXRDb29yZHNGcm9tSW5kZXgoaW5kZXgpO1xuICAgICAgICBsZXQgaGVpZ2h0X3JhdGlvID0gZjMyKCR7aGVpZ2h0UmF0aW99KTtcbiAgICAgICAgbGV0IHdpZHRoX3JhdGlvID0gZjMyKCR7d2lkdGhSYXRpb30pO1xuICAgICAgICBsZXQgYiA9IGNvb3Jkc1swXTtcbiAgICAgICAgbGV0IHkgPSBjb29yZHNbMV07XG4gICAgICAgIGxldCB4ID0gY29vcmRzWzJdO1xuICAgICAgICBsZXQgZCA9IGNvb3Jkc1szXTtcbiAgICAgICAgLy8gZ2V0IGJveCB2YWxzXG4gICAgICAgIGxldCB5MSA9IGdldEJveGVzKGIsIDApO1xuICAgICAgICBsZXQgeDEgPSBnZXRCb3hlcyhiLCAxKTtcbiAgICAgICAgbGV0IHkyID0gZ2V0Qm94ZXMoYiwgMik7XG4gICAgICAgIGxldCB4MiA9IGdldEJveGVzKGIsIDMpO1xuICAgICAgICAvLyBnZXQgaW1hZ2UgaW4gYmF0Y2ggaW5kZXhcbiAgICAgICAgbGV0IGJJbmQgPSBpMzIocm91bmQoZ2V0Qm94SW5kKGIpKSk7XG4gICAgICAgIGlmKGJJbmQgPCAwIHx8IGJJbmQgPj0gdW5pZm9ybXMub3V0U2hhcGVbMF0pIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGhlaWdodF9zY2FsZSA9ICR7aGVpZ2h0U2NhbGV9O1xuICAgICAgICBsZXQgd2lkdGhfc2NhbGUgPSAke3dpZHRoU2NhbGV9O1xuICAgICAgICBsZXQgaW5feSA9ICR7aW5ZfTtcbiAgICAgICAgaWYoIGluX3kgPCAwLjAgfHwgaW5feSA+ICR7aW5wdXRIZWlnaHRGbG9hdH0gKSB7XG4gICAgICAgICAgc2V0T3V0cHV0QXRJbmRleChpbmRleCwgdW5pZm9ybXMuZXh0cmFwb2xhdGlvblZhbHVlKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGluX3ggPSAke2luWH07XG4gICAgICAgIGlmKCBpbl94IDwgMC4wIHx8IGluX3ggPiAke2lucHV0V2lkdGhGbG9hdH0gKSB7XG4gICAgICAgICAgc2V0T3V0cHV0QXRJbmRleChpbmRleCwgdW5pZm9ybXMuZXh0cmFwb2xhdGlvblZhbHVlKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHNvdXJjZUZyYWNJbmRleENSID0gdmVjMjxmMzI+KGluX3gsaW5feSk7XG4gICAgICAgIGlmKCR7dGhpcy5tZXRob2RJZH0gPT0gMSkge1xuICAgICAgICAgIC8vIENvbXB1dGUgdGhlIGZvdXIgaW50ZWdlciBpbmRpY2VzLlxuICAgICAgICAgIGxldCBzb3VyY2VGbG9vckNSID0gdmVjMjxpMzI+KHNvdXJjZUZyYWNJbmRleENSKTtcbiAgICAgICAgICBsZXQgc291cmNlQ2VpbENSID0gdmVjMjxpMzI+KGNlaWwoc291cmNlRnJhY0luZGV4Q1IpKTtcbiAgICAgICAgICBsZXQgdG9wTGVmdCA9IGdldEltYWdlKGJJbmQsIHNvdXJjZUZsb29yQ1IueSwgc291cmNlRmxvb3JDUi54LCBkKTtcbiAgICAgICAgICBsZXQgYm90dG9tTGVmdCA9IGdldEltYWdlKGJJbmQsIHNvdXJjZUNlaWxDUi55LCBzb3VyY2VGbG9vckNSLngsIGQpO1xuICAgICAgICAgIGxldCB0b3BSaWdodCA9IGdldEltYWdlKGJJbmQsIHNvdXJjZUZsb29yQ1IueSwgc291cmNlQ2VpbENSLngsIGQpO1xuICAgICAgICAgIGxldCBib3R0b21SaWdodCA9IGdldEltYWdlKGJJbmQsIHNvdXJjZUNlaWxDUi55LCBzb3VyY2VDZWlsQ1IueCwgZCk7XG4gICAgICAgICAgbGV0IGZyYWNDUiA9IHNvdXJjZUZyYWNJbmRleENSIC0gdmVjMjxmMzI+KHNvdXJjZUZsb29yQ1IpO1xuICAgICAgICAgIGxldCB0b3AgPSB0b3BMZWZ0ICsgKHRvcFJpZ2h0IC0gdG9wTGVmdCkgKiBmcmFjQ1IueDtcbiAgICAgICAgICBsZXQgYm90dG9tID0gYm90dG9tTGVmdCArIChib3R0b21SaWdodCAtIGJvdHRvbUxlZnQpICogZnJhY0NSLng7XG4gICAgICAgICAgbGV0IG5ld1ZhbHVlID0gdG9wICsgKGJvdHRvbSAtIHRvcCkgKiBmcmFjQ1IueTtcbiAgICAgICAgICBzZXRPdXRwdXRBdEluZGV4KGluZGV4LCBuZXdWYWx1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gQ29tcHV0ZSB0aGUgY29vcmRpbmF0b3JzIG9mIG5lYXJlc3QgbmVpZ2hib3IgcG9pbnQuXG4gICAgICAgICAgbGV0IHNvdXJjZU5lYXJlc3RDUiA9IHZlYzI8aTMyPihmbG9vcihcbiAgICAgICAgICAgIHNvdXJjZUZyYWNJbmRleENSICsgdmVjMjxmMzI+KDAuNSwwLjUpKSk7XG4gICAgICAgICAgbGV0IG5ld1ZhbHVlID0gZ2V0SW1hZ2UoXG4gICAgICAgICAgICBiSW5kLCBzb3VyY2VOZWFyZXN0Q1IueSwgc291cmNlTmVhcmVzdENSLngsIGQpO1xuICAgICAgICAgIHNldE91dHB1dEF0SW5kZXgoaW5kZXgsIG5ld1ZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBgO1xuICAgIHJldHVybiB1c2VyQ29kZTtcbiAgfVxufVxuIl19","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { CropAndResize } from '@tensorflow/tfjs-core';\nimport { CropAndResizeProgram } from '../crop_and_resize_webgpu';\nexport const cropAndResize = (args) => {\n    const { inputs, backend, attrs } = args;\n    const { image, boxes, boxInd } = inputs;\n    const { cropSize, method, extrapolationValue } = attrs;\n    const program = new CropAndResizeProgram(image.shape[3], boxes.shape, cropSize, method);\n    const uniformData = [{ type: 'float32', data: [extrapolationValue] }];\n    return backend.runWebGPUProgram(program, [image, boxes, boxInd], 'float32', uniformData);\n};\nexport const cropAndResizeConfig = {\n    kernelName: CropAndResize,\n    backendName: 'webgpu',\n    kernelFunc: cropAndResize\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ3JvcEFuZFJlc2l6ZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2tlcm5lbHMvQ3JvcEFuZFJlc2l6ZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQUMsYUFBYSxFQUFnRixNQUFNLHVCQUF1QixDQUFDO0FBR25JLE9BQU8sRUFBQyxvQkFBb0IsRUFBQyxNQUFNLDJCQUEyQixDQUFDO0FBRS9ELE1BQU0sQ0FBQyxNQUFNLGFBQWEsR0FBRyxDQUFDLElBSTdCLEVBQWMsRUFBRTtJQUNmLE1BQU0sRUFBQyxNQUFNLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBQyxHQUFHLElBQUksQ0FBQztJQUN0QyxNQUFNLEVBQUMsS0FBSyxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUMsR0FBRyxNQUFNLENBQUM7SUFDdEMsTUFBTSxFQUFDLFFBQVEsRUFBRSxNQUFNLEVBQUUsa0JBQWtCLEVBQUMsR0FBRyxLQUFLLENBQUM7SUFFckQsTUFBTSxPQUFPLEdBQUcsSUFBSSxvQkFBb0IsQ0FDcEMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsS0FBeUIsRUFBRSxRQUFRLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFDdkUsTUFBTSxXQUFXLEdBQUcsQ0FBQyxFQUFDLElBQUksRUFBRSxTQUFTLEVBQUUsSUFBSSxFQUFFLENBQUMsa0JBQWtCLENBQUMsRUFBQyxDQUFDLENBQUM7SUFDcEUsT0FBTyxPQUFPLENBQUMsZ0JBQWdCLENBQzNCLE9BQU8sRUFBRSxDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUUsTUFBTSxDQUFDLEVBQUUsU0FBUyxFQUFFLFdBQVcsQ0FBQyxDQUFDO0FBQy9ELENBQUMsQ0FBQztBQUVGLE1BQU0sQ0FBQyxNQUFNLG1CQUFtQixHQUFpQjtJQUMvQyxVQUFVLEVBQUUsYUFBYTtJQUN6QixXQUFXLEVBQUUsUUFBUTtJQUNyQixVQUFVLEVBQUUsYUFBc0M7Q0FDbkQsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtDcm9wQW5kUmVzaXplLCBDcm9wQW5kUmVzaXplQXR0cnMsIENyb3BBbmRSZXNpemVJbnB1dHMsIEtlcm5lbENvbmZpZywgS2VybmVsRnVuYywgVGVuc29ySW5mb30gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcblxuaW1wb3J0IHtXZWJHUFVCYWNrZW5kfSBmcm9tICcuLi9iYWNrZW5kX3dlYmdwdSc7XG5pbXBvcnQge0Nyb3BBbmRSZXNpemVQcm9ncmFtfSBmcm9tICcuLi9jcm9wX2FuZF9yZXNpemVfd2ViZ3B1JztcblxuZXhwb3J0IGNvbnN0IGNyb3BBbmRSZXNpemUgPSAoYXJnczoge1xuICBpbnB1dHM6IENyb3BBbmRSZXNpemVJbnB1dHMsXG4gIGJhY2tlbmQ6IFdlYkdQVUJhY2tlbmQsXG4gIGF0dHJzOiBDcm9wQW5kUmVzaXplQXR0cnNcbn0pOiBUZW5zb3JJbmZvID0+IHtcbiAgY29uc3Qge2lucHV0cywgYmFja2VuZCwgYXR0cnN9ID0gYXJncztcbiAgY29uc3Qge2ltYWdlLCBib3hlcywgYm94SW5kfSA9IGlucHV0cztcbiAgY29uc3Qge2Nyb3BTaXplLCBtZXRob2QsIGV4dHJhcG9sYXRpb25WYWx1ZX0gPSBhdHRycztcblxuICBjb25zdCBwcm9ncmFtID0gbmV3IENyb3BBbmRSZXNpemVQcm9ncmFtKFxuICAgICAgaW1hZ2Uuc2hhcGVbM10sIGJveGVzLnNoYXBlIGFzIFtudW1iZXIsIG51bWJlcl0sIGNyb3BTaXplLCBtZXRob2QpO1xuICBjb25zdCB1bmlmb3JtRGF0YSA9IFt7dHlwZTogJ2Zsb2F0MzInLCBkYXRhOiBbZXh0cmFwb2xhdGlvblZhbHVlXX1dO1xuICByZXR1cm4gYmFja2VuZC5ydW5XZWJHUFVQcm9ncmFtKFxuICAgICAgcHJvZ3JhbSwgW2ltYWdlLCBib3hlcywgYm94SW5kXSwgJ2Zsb2F0MzInLCB1bmlmb3JtRGF0YSk7XG59O1xuXG5leHBvcnQgY29uc3QgY3JvcEFuZFJlc2l6ZUNvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBDcm9wQW5kUmVzaXplLFxuICBiYWNrZW5kTmFtZTogJ3dlYmdwdScsXG4gIGtlcm5lbEZ1bmM6IGNyb3BBbmRSZXNpemUgYXMgdW5rbm93biBhcyBLZXJuZWxGdW5jXG59O1xuIl19","/**\n * @license\n * Copyright 2022 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { getMainHeaderString as main } from './webgpu_program';\nimport { computeDispatch, flatDispatchLayout } from './webgpu_util';\nexport var CumOpType;\n(function (CumOpType) {\n    CumOpType[\"Prod\"] = \"*\";\n    CumOpType[\"Sum\"] = \"+\";\n})(CumOpType || (CumOpType = {}));\nexport class CumProgram {\n    constructor(op, shape, exclusive, reverse) {\n        this.variableNames = ['x'];\n        // pow(i32, i32) is not supported, use pow(f32, f32) instead.\n        this.uniforms = 'index : f32,';\n        this.size = true;\n        this.workgroupSize = [128, 1, 1];\n        this.outputShape = shape;\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize);\n        this.exclusive = exclusive;\n        this.reverse = reverse;\n        this.op = op;\n        this.shaderKey = `cum_${this.op}_${this.exclusive}_${this.reverse}`;\n    }\n    getUserCode() {\n        const rank = this.outputShape.length;\n        const initVal = this.op === CumOpType.Prod ? '1.0' : '0.0';\n        const val = this.exclusive ? initVal :\n            `getX(${getCoords(rank, 'coords', this.op)})`;\n        const length = this.outputShape[this.outputShape.length - 1];\n        let condition = '';\n        let idxString = '';\n        // When exclusive is set, the cum op becomes roll op that copies the\n        // value from the previous index based on the direction specified by the\n        // reverse flag.\n        if (this.exclusive) {\n            condition = this.reverse ? `end != ${length - 1}` : 'end != 0';\n            idxString = this.reverse ? 'end + 1' : 'end - 1';\n        }\n        else {\n            condition = this.reverse ? `end + pow2 < ${length}` : 'end >= pow2';\n            idxString = (this.reverse ? 'end + pow2' : 'end - pow2');\n        }\n        return `\n      ${main('index')} {\n       if (index < uniforms.size) {\n         var coords = getCoordsFromIndex(index);\n\n         let end = ${getFinalCoord(rank, 'coords', this.op)};\n         var val = ${val};\n         let pow2 = i32(pow(2.0, uniforms.index));\n         if (${condition}) {\n           let idx = ${idxString};\n           ${getFinalCoord(rank, 'coords', this.op)} = idx;\n           val ${this.op}= getX(${getCoords(rank, 'coords', this.op)});\n         }\n         setOutputAtIndex(index, val);\n       }\n      }\n    `;\n    }\n}\nfunction getCoords(rank, name, op) {\n    if (rank === 1) {\n        return `${name}`;\n    }\n    else if (rank === 2) {\n        return `${name}.x, ${name}.y`;\n    }\n    else if (rank === 3) {\n        return `${name}.x, ${name}.y, ${name}.z`;\n    }\n    else if (rank === 4) {\n        return `${name}.x, ${name}.y, ${name}.z, ${name}.w`;\n    }\n    else {\n        throw Error(`Cumulative ${op} for rank ${rank} is not yet supported`);\n    }\n}\nfunction getFinalCoord(rank, name, op) {\n    if (rank === 1) {\n        return `${name}`;\n    }\n    else if (rank === 2) {\n        return `${name}.y`;\n    }\n    else if (rank === 3) {\n        return `${name}.z`;\n    }\n    else if (rank === 4) {\n        return `${name}.w`;\n    }\n    else {\n        throw Error(`Cumulative ${op} for rank ${rank} is not yet supported`);\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3VtX3dlYmdwdS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2N1bV93ZWJncHUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUFDLG1CQUFtQixJQUFJLElBQUksRUFBZ0IsTUFBTSxrQkFBa0IsQ0FBQztBQUM1RSxPQUFPLEVBQUMsZUFBZSxFQUFFLGtCQUFrQixFQUFDLE1BQU0sZUFBZSxDQUFDO0FBRWxFLE1BQU0sQ0FBTixJQUFZLFNBR1g7QUFIRCxXQUFZLFNBQVM7SUFDbkIsdUJBQVUsQ0FBQTtJQUNWLHNCQUFTLENBQUE7QUFDWCxDQUFDLEVBSFcsU0FBUyxLQUFULFNBQVMsUUFHcEI7QUFFRCxNQUFNLE9BQU8sVUFBVTtJQWNyQixZQUNJLEVBQWEsRUFBRSxLQUFlLEVBQUUsU0FBa0IsRUFBRSxPQUFnQjtRQVZ4RSxrQkFBYSxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7UUFFdEIsNkRBQTZEO1FBQzdELGFBQVEsR0FBRyxjQUFjLENBQUM7UUFDMUIsU0FBSSxHQUFHLElBQUksQ0FBQztRQU9WLElBQUksQ0FBQyxhQUFhLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ2pDLElBQUksQ0FBQyxXQUFXLEdBQUcsS0FBSyxDQUFDO1FBQ3pCLElBQUksQ0FBQyxjQUFjLEdBQUcsa0JBQWtCLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQzNELElBQUksQ0FBQyxRQUFRLEdBQUcsZUFBZSxDQUMzQixJQUFJLENBQUMsY0FBYyxFQUFFLElBQUksQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBQy9ELElBQUksQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDO1FBQzNCLElBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDO1FBQ3ZCLElB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QzlELElBQUksSUFBSSxLQUFLLENBQUMsRUFBRTtRQUNkLE9BQU8sR0FBRyxJQUFJLEVBQUUsQ0FBQztLQUNsQjtTQUFNLElBQUksSUFBSSxLQUFLLENBQUMsRUFBRTtRQUNyQixPQUFPLEdBQUcsSUFBSSxJQUFJLENBQUM7S0FDcEI7U0FBTSxJQUFJLElBQUksS0FBSyxDQUFDLEVBQUU7UUFDckIsT0FBTyxHQUFHLElBQUksSUFBSSxDQUFDO0tBQ3BCO1NBQU0sSUFBSSxJQUFJLEtBQUssQ0FBQyxFQUFFO1FBQ3JCLE9BQU8sR0FBRyxJQUFJLElBQUksQ0FBQztLQUNwQjtTQUFNO1FBQ0wsTUFBTSxLQUFLLENBQUMsY0FBYyxFQUFFLGFBQWEsSUFBSSx1QkFBdUIsQ0FBQyxDQUFDO0tBQ3ZFO0FBQ0gsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtnZXRNYWluSGVhZGVyU3RyaW5nIGFzIG1haW4sIFdlYkdQVVByb2dyYW19IGZyb20gJy4vd2ViZ3B1X3Byb2dyYW0nO1xuaW1wb3J0IHtjb21wdXRlRGlzcGF0Y2gsIGZsYXREaXNwYXRjaExheW91dH0gZnJvbSAnLi93ZWJncHVfdXRpbCc7XG5cbmV4cG9ydCBlbnVtIEN1bU9wVHlwZSB7XG4gIFByb2QgPSAnKicsXG4gIFN1bSA9ICcrJyxcbn1cblxuZXhwb3J0IGNsYXNzIEN1bVByb2dyYW0gaW1wbGVtZW50cyBXZWJHUFVQcm9ncmFtIHtcbiAgb3V0cHV0U2hhcGU6IG51bWJlcltdO1xuICBzaGFkZXJLZXk6IHN0cmluZztcbiAgZGlzcGF0Y2hMYXlvdXQ6IHt4OiBudW1iZXJbXX07XG4gIGRpc3BhdGNoOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl07XG4gIHZhcmlhYmxlTmFtZXMgPSBbJ3gnXTtcbiAgd29ya2dyb3VwU2l6ZTogW251bWJlciwgbnVtYmVyLCBudW1iZXJdO1xuICAvLyBwb3coaTMyLCBpMzIpIGlzIG5vdCBzdXBwb3J0ZWQsIHVzZSBwb3coZjMyLCBmMzIpIGluc3RlYWQuXG4gIHVuaWZvcm1zID0gJ2luZGV4IDogZjMyLCc7XG4gIHNpemUgPSB0cnVlO1xuICBleGNsdXNpdmU6IGJvb2xlYW47XG4gIHJldmVyc2U6IGJvb2xlYW47XG4gIG9wOiBDdW1PcFR5cGU7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgICBvcDogQ3VtT3BUeXBlLCBzaGFwZTogbnVtYmVyW10sIGV4Y2x1c2l2ZTogYm9vbGVhbiwgcmV2ZXJzZTogYm9vbGVhbikge1xuICAgIHRoaXMud29ya2dyb3VwU2l6ZSA9IFsxMjgsIDEsIDFdO1xuICAgIHRoaXMub3V0cHV0U2hhcGUgPSBzaGFwZTtcbiAgICB0aGlzLmRpc3BhdGNoTGF5b3V0ID0gZmxhdERpc3BhdGNoTGF5b3V0KHRoaXMub3V0cHV0U2hhcGUpO1xuICAgIHRoaXMuZGlzcGF0Y2ggPSBjb21wdXRlRGlzcGF0Y2goXG4gICAgICAgIHRoaXMuZGlzcGF0Y2hMYXlvdXQsIHRoaXMub3V0cHV0U2hhcGUsIHRoaXMud29ya2dyb3VwU2l6ZSk7XG4gICAgdGhpcy5leGNsdXNpdmUgPSBleGNsdXNpdmU7XG4gICAgdGhpcy5yZXZlcnNlID0gcmV2ZXJzZTtcbiAgICB0aGlzLm9wID0gb3A7XG4gICAgdGhpcy5zaGFkZXJLZXkgPSBgY3VtXyR7dGhpcy5vcH1fJHt0aGlzLmV4Y2x1c2l2ZX1fJHt0aGlzLnJldmVyc2V9YDtcbiAgfVxuXG4gIGdldFVzZXJDb2RlKCk6IHN0cmluZyB7XG4gICAgY29uc3QgcmFuayA9IHRoaXMub3V0cHV0U2hhcGUubGVuZ3RoO1xuICAgIGNvbnN0IGluaXRWYWwgPSB0aGlzLm9wID09PSBDdW1PcFR5cGUuUHJvZCA/ICcxLjAnIDogJzAuMCc7XG4gICAgY29uc3QgdmFsID0gdGhpcy5leGNsdXNpdmUgPyBpbml0VmFsIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBnZXRYKCR7Z2V0Q29vcmRzKHJhbmssICdjb29yZHMnLCB0aGlzLm9wKX0pYDtcbiAgICBjb25zdCBsZW5ndGggPSB0aGlzLm91dHB1dFNoYXBlW3RoaXMub3V0cHV0U2hhcGUubGVuZ3RoIC0gMV07XG4gICAgbGV0IGNvbmRpdGlvbiA9ICcnO1xuICAgIGxldCBpZHhTdHJpbmcgPSAnJztcbiAgICAvLyBXaGVuIGV4Y2x1c2l2ZSBpcyBzZXQsIHRoZSBjdW0gb3AgYmVjb21lcyByb2xsIG9wIHRoYXQgY29waWVzIHRoZVxuICAgIC8vIHZhbHVlIGZyb20gdGhlIHByZXZpb3VzIGluZGV4IGJhc2VkIG9uIHRoZSBkaXJlY3Rpb24gc3BlY2lmaWVkIGJ5IHRoZVxuICAgIC8vIHJldmVyc2UgZmxhZy5cbiAgICBpZiAodGhpcy5leGNsdXNpdmUpIHtcbiAgICAgIGNvbmRpdGlvbiA9IHRoaXMucmV2ZXJzZSA/IGBlbmQgIT0gJHtsZW5ndGggLSAxfWAgOiAnZW5kICE9IDAnO1xuICAgICAgaWR4U3RyaW5nID0gdGhpcy5yZXZlcnNlID8gJ2VuZCArIDEnIDogJ2VuZCAtIDEnO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25kaXRpb24gPSB0aGlzLnJldmVyc2UgPyBgZW5kICsgcG93MiA8ICR7bGVuZ3RofWAgOiAnZW5kID49IHBvdzInO1xuICAgICAgaWR4U3RyaW5nID0gKHRoaXMucmV2ZXJzZSA/ICdlbmQgKyBwb3cyJyA6ICdlbmQgLSBwb3cyJyk7XG4gICAgfVxuICAgIHJldHVybiBgXG4gICAgICAke21haW4oJ2luZGV4Jyl9IHtcbiAgICAgICBpZiAoaW5kZXggPCB1bmlmb3Jtcy5zaXplKSB7XG4gICAgICAgICB2YXIgY29vcmRzID0gZ2V0Q29vcmRzRnJvbUluZGV4KGluZGV4KTtcblxuICAgICAgICAgbGV0IGVuZCA9ICR7Z2V0RmluYWxDb29yZChyYW5rLCAnY29vcmRzJywgdGhpcy5vcCl9O1xuICAgICAgICAgdmFyIHZhbCA9ICR7dmFsfTtcbiAgICAgICAgIGxldCBwb3cyID0gaTMyKHBvdygyLjAsIHVuaWZvcm1zLmluZGV4KSk7XG4gICAgICAgICBpZiAoJHtjb25kaXRpb259KSB7XG4gICAgICAgICAgIGxldCBpZHggPSAke2lkeFN0cmluZ307XG4gICAgICAgICAgICR7Z2V0RmluYWxDb29yZChyYW5rLCAnY29vcmRzJywgdGhpcy5vcCl9ID0gaWR4O1xuICAgICAgICAgICB2YWwgJHt0aGlzLm9wfT0gZ2V0WCgke2dldENvb3JkcyhyYW5rLCAnY29vcmRzJywgdGhpcy5vcCl9KTtcbiAgICAgICAgIH1cbiAgICAgICAgIHNldE91dHB1dEF0SW5kZXgoaW5kZXgsIHZhbCk7XG4gICAgICAgfVxuICAgICAgfVxuICAgIGA7XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0Q29vcmRzKHJhbms6IG51bWJlciwgbmFtZTogc3RyaW5nLCBvcDogQ3VtT3BUeXBlKTogc3RyaW5nIHtcbiAgaWYgKHJhbmsgPT09IDEpIHtcbiAgICByZXR1cm4gYCR7bmFtZX1gO1xuICB9IGVsc2UgaWYgKHJhbmsgPT09IDIpIHtcbiAgICByZXR1cm4gYCR7bmFtZX0ueCwgJHtuYW1lfS55YDtcbiAgfSBlbHNlIGlmIChyYW5rID09PSAzKSB7XG4gICAgcmV0dXJuIGAke25hbWV9LngsICR7bmFtZX0ueSwgJHtuYW1lfS56YDtcbiAgfSBlbHNlIGlmIChyYW5rID09PSA0KSB7XG4gICAgcmV0dXJuIGAke25hbWV9LngsICR7bmFtZX0ueSwgJHtuYW1lfS56LCAke25hbWV9LndgO1xuICB9IGVsc2Uge1xuICAgIHRocm93IEVycm9yKGBDdW11bGF0aXZlICR7b3B9IGZvciByYW5rICR7cmFua30gaXMgbm90IHlldCBzdXBwb3J0ZWRgKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRGaW5hbENvb3JkKHJhbms6IG51bWJlciwgbmFtZTogc3RyaW5nLCBvcDogQ3VtT3BUeXBlKTogc3RyaW5nIHtcbiAgaWYgKHJhbmsgPT09IDEpIHtcbiAgICByZXR1cm4gYCR7bmFtZX1gO1xuICB9IGVsc2UgaWYgKHJhbmsgPT09IDIpIHtcbiAgICByZXR1cm4gYCR7bmFtZX0ueWA7XG4gIH0gZWxzZSBpZiAocmFuayA9PT0gMykge1xuICAgIHJldHVybiBgJHtuYW1lfS56YDtcbiAgfSBlbHNlIGlmIChyYW5rID09PSA0KSB7XG4gICAgcmV0dXJuIGAke25hbWV9LndgO1xuICB9IGVsc2Uge1xuICAgIHRocm93IEVycm9yKGBDdW11bGF0aXZlICR7b3B9IGZvciByYW5rICR7cmFua30gaXMgbm90IHlldCBzdXBwb3J0ZWRgKTtcbiAgfVxufVxuIl19","/**\n * @license\n * Copyright 2022 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { backend_util } from '@tensorflow/tfjs-core';\nimport { CumProgram } from '../cum_webgpu';\nimport { identity } from './Identity';\nimport { transpose } from './Transpose';\nexport function cumImpl(op, x, backend, axis, exclusive, reverse) {\n    const xRank = x.shape.length;\n    const permutation = backend_util.getAxesPermutation([axis], xRank);\n    let permutedX = x;\n    if (permutation != null) {\n        permutedX = transpose({ inputs: { x }, backend, attrs: { perm: permutation } });\n    }\n    const permutedAxis = backend_util.getInnerMostAxes(1, xRank)[0];\n    if (permutedAxis !== xRank - 1) {\n        throw new Error(`WebGPU cumprod shader expects an inner-most axis=${x.shape.length - 1} ` +\n            `but got axis=${axis}`);\n    }\n    const size = permutedX.shape[permutedAxis];\n    let result = identity({ inputs: { x: permutedX }, backend });\n    // Use cum parallel algorithm, inspired by:\n    // https://developer.nvidia.com/gpugems/gpugems3/part-vi-gpu-computing/chapter-39-parallel-prefix-sum-scan-cuda\n    // Note: although the algorithm is called sum, it works for any associtative\n    // operator with an identity.\n    for (let i = 0; i <= Math.ceil(Math.log2(size)) - 1; i++) {\n        const program = new CumProgram(op, permutedX.shape, false, reverse);\n        const prevResult = result;\n        const uniformData = [{ type: 'float32', data: [i] }];\n        result =\n            backend.runWebGPUProgram(program, [result], result.dtype, uniformData);\n        backend.disposeData(prevResult.dataId);\n    }\n    // For exclusive cum, shift the end result in the direction of product or sum\n    // and add 1 for product or 0 for sum to the front index.\n    if (exclusive) {\n        const program = new CumProgram(op, permutedX.shape, exclusive, reverse);\n        const prevResult = result;\n        const uniformData = [{ type: 'float32', data: [0] }];\n        result =\n            backend.runWebGPUProgram(program, [result], result.dtype, uniformData);\n        backend.disposeData(prevResult.dataId);\n    }\n    if (permutation != null) {\n        const reversePermutation = backend_util.getUndoAxesPermutation(permutation);\n        const reverseTransposedResult = transpose({ inputs: { x: result }, backend, attrs: { perm: reversePermutation } });\n        backend.disposeData(result.dataId);\n        backend.disposeData(permutedX.dataId);\n        return reverseTransposedResult;\n    }\n    return result;\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ3VtX2ltcGwuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9rZXJuZWxzL0N1bV9pbXBsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sRUFBQyxZQUFZLEVBQWEsTUFBTSx1QkFBdUIsQ0FBQztBQUcvRCxPQUFPLEVBQVksVUFBVSxFQUFDLE1BQU0sZUFBZSxDQUFDO0FBRXBELE9BQU8sRUFBQyxRQUFRLEVBQUMsTUFBTSxZQUFZLENBQUM7QUFDcEMsT0FBTyxFQUFDLFNBQVMsRUFBQyxNQUFNLGFBQWEsQ0FBQztBQUV0QyxNQUFNLFVBQVUsT0FBTyxDQUNuQixFQUFhLEVBQUUsQ0FBYSxFQUFFLE9BQXNCLEVBQUUsSUFBWSxFQUNsRSxTQUFrQixFQUFFLE9BQWdCO0lBQ3RDLE1BQU0sS0FBSyxHQUFHLENBQUMsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDO0lBQzdCLE1BQU0sV0FBVyxHQUFHLFlBQVksQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDO0lBQ25FLElBQUksU0FBUyxHQUFHLENBQUMsQ0FBQztJQUNsQixJQUFJLFdBQVcsSUFBSSxJQUFJLEVBQUU7UUFDdkIsU0FBUyxHQUFHLFNBQVMsQ0FBQyxFQUFDLE1BQU0sRUFBRSxFQUFDLENBQUMsRUFBQyxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsRUFBQyxJQUFJLEVBQUUsV0FBVyxFQUFDLEVBQUMsQ0FBQyxDQUFDO0tBQzNFO0lBQ0QsTUFBTSxZQUFZLEdBQUcsWUFBWSxDQUFDLGdCQUFnQixDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUVoRSxJQUFJLFlBQVksS0FBSyxLQUFLLEdBQUcsQ0FBQyxFQUFFO1FBQzlCLE1BQU0sSUFBSSxLQUFLLENBQ1gsb0RBQ0ksQ0FBQyxDQUFDLEtBQUssQ0FBQyxNQUFNLEdBQUcsQ0FBQyxHQUFHO1lBQ3pCLGdCQUFnQixJQUFJLEVBQUUsQ0FBQyxDQUFDO0tBQzdCO0lBQ0QsTUFBTSxJQUFJLEdBQUcsU0FBUyxDQUFDLEtBQUssQ0FBQyxZQUFZLENBQUMsQ0FBQztJQUMzQyxJQUFJLE1BQU0sR0FBRyxRQUFRLENBQUMsRUFBQyxNQUFNLEVBQUUsRUFBQyxDQUFDLEVBQUUsU0FBUyxFQUFDLEVBQUUsT0FBTyxFQUFDLENBQUMsQ0FBQztJQUN6RCwyQ0FBMkM7SUFDM0MsK0dBQStHO0lBQy9HLDRFQUE0RTtJQUM1RSw2QkFBNkI7SUFFN0IsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRTtRQUN4RCxNQUFNLE9BQU8sR0FBRyxJQUFJLFVBQVUsQ0FBQyxFQUFFLEVBQUUsU0FBUyxDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDcEUsTUFBTSxVQUFVLEdBQUcsTUFBTSxDQUFDO1FBQzFCLE1BQU0sV0FBVyxHQUFHLENBQUMsRUFBQyxJQUFJLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQztRQUNuRCxNQUFNO1lBQ0YsT0FBTyxDQUFDLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxDQUFDLE1BQU0sQ0FBQyxFQUFFLE1BQU0sQ0FBQyxLQUFLLEVBQUUsV0FBVyxDQUFDLENBQUM7UUFDM0UsT0FBTyxDQUFDLFdBQVcsQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUM7S0FDeEM7SUFDRCw2RUFBNkU7SUFDN0UseURBQXlEO0lBQ3pELElBQUksU0FBUyxFQUFFO1FBQ2IsTUFBTSxPQUFPLEdBQUcsSUFBSSxVQUFVLENBQUMsRUFBRSxFQUFFLFNBQVMsQ0FBQyxLQUFLLEVBQUUsU0FBUyxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3hFLE1BQU0sVUFBVSxHQUFHLE1BQU0sQ0FBQztRQUMxQixNQUFNLFdBQVcsR0FBRyxDQUFDLEVBQUMsSUFBSSxFQUFFLFNBQVMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBQyxDQUFDLENBQUM7UUFDbkQsTUFBTTtZQUNGLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxNQUFNLENBQUMsRUFBRSxNQUFNLENBQUMsS0FBSyxFQUFFLFdBQVcsQ0FBQyxDQUFDO1FBQzNFLE9BQU8sQ0FBQyxXQUFXLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0tBQ3hDO0lBRUQsSUFBSSxXQUFXLElBQUksSUFBSSxFQUFFO1FBQ3ZCLE1BQU0sa0JBQWtCLEdBQUcsWUFBWSxDQUFDLHNCQUFzQixDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQzVFLE1BQU0sdUJBQXVCLEdBQUcsU0FBUyxDQUNyQyxFQUFDLE1BQU0sRUFBRSxFQUFDLENBQUMsRUFBRSxNQUFNLEVBQUMsRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLEVBQUMsSUFBSSxFQUFFLGtCQUFrQixFQUFDLEVBQUMsQ0FBQyxDQUFDO1FBRXZFLE9BQU8sQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ25DLE9BQU8sQ0FBQyxXQUFXLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBRXRDLE9BQU8sdUJBQXVCLENBQUM7S0FDaEM7SUFFRCxPQUFPLE1BQU0sQ0FBQztBQUNoQixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge2JhY2tlbmRfdXRpbCwgVGVuc29ySW5mb30gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcblxuaW1wb3J0IHtXZWJHUFVCYWNrZW5kfSBmcm9tICcuLi9iYWNrZW5kX3dlYmdwdSc7XG5pbXBvcnQge0N1bU9wVHlwZSwgQ3VtUHJvZ3JhbX0gZnJvbSAnLi4vY3VtX3dlYmdwdSc7XG5cbmltcG9ydCB7aWRlbnRpdHl9IGZyb20gJy4vSWRlbnRpdHknO1xuaW1wb3J0IHt0cmFuc3Bvc2V9IGZyb20gJy4vVHJhbnNwb3NlJztcblxuZXhwb3J0IGZ1bmN0aW9uIGN1bUltcGwoXG4gICAgb3A6IEN1bU9wVHlwZSwgeDogVGVuc29ySW5mbywgYmFja2VuZDogV2ViR1BVQmFja2VuZCwgYXhpczogbnVtYmVyLFxuICAgIGV4Y2x1c2l2ZTogYm9vbGVhbiwgcmV2ZXJzZTogYm9vbGVhbik6IFRlbnNvckluZm8ge1xuICBjb25zdCB4UmFuayA9IHguc2hhcGUubGVuZ3RoO1xuICBjb25zdCBwZXJtdXRhdGlvbiA9IGJhY2tlbmRfdXRpbC5nZXRBeGVzUGVybXV0YXRpb24oW2F4aXNdLCB4UmFuayk7XG4gIGxldCBwZXJtdXRlZFggPSB4O1xuICBpZiAocGVybXV0YXRpb24gIT0gbnVsbCkge1xuICAgIHBlcm11dGVkWCA9IHRyYW5zcG9zZSh7aW5wdXRzOiB7eH0sIGJhY2tlbmQsIGF0dHJzOiB7cGVybTogcGVybXV0YXRpb259fSk7XG4gIH1cbiAgY29uc3QgcGVybXV0ZWRBeGlzID0gYmFja2VuZF91dGlsLmdldElubmVyTW9zdEF4ZXMoMSwgeFJhbmspWzBdO1xuXG4gIGlmIChwZXJtdXRlZEF4aXMgIT09IHhSYW5rIC0gMSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYFdlYkdQVSBjdW1wcm9kIHNoYWRlciBleHBlY3RzIGFuIGlubmVyLW1vc3QgYXhpcz0ke1xuICAgICAgICAgICAgeC5zaGFwZS5sZW5ndGggLSAxfSBgICtcbiAgICAgICAgYGJ1dCBnb3QgYXhpcz0ke2F4aXN9YCk7XG4gIH1cbiAgY29uc3Qgc2l6ZSA9IHBlcm11dGVkWC5zaGFwZVtwZXJtdXRlZEF4aXNdO1xuICBsZXQgcmVzdWx0ID0gaWRlbnRpdHkoe2lucHV0czoge3g6IHBlcm11dGVkWH0sIGJhY2tlbmR9KTtcbiAgLy8gVXNlIGN1bSBwYXJhbGxlbCBhbGdvcml0aG0sIGluc3BpcmVkIGJ5OlxuICAvLyBodHRwczovL2RldmVsb3Blci5udmlkaWEuY29tL2dwdWdlbXMvZ3B1Z2VtczMvcGFydC12aS1ncHUtY29tcHV0aW5nL2NoYXB0ZXItMzktcGFyYWxsZWwtcHJlZml4LXN1bS1zY2FuLWN1ZGFcbiAgLy8gTm90ZTogYWx0aG91Z2ggdGhlIGFsZ29yaXRobSBpcyBjYWxsZWQgc3VtLCBpdCB3b3JrcyBmb3IgYW55IGFzc29jaXRhdGl2ZVxuICAvLyBvcGVyYXRvciB3aXRoIGFuIGlkZW50aXR5LlxuXG4gIGZvciAobGV0IGkgPSAwOyBpIDw9IE1hdGguY2VpbChNYXRoLmxvZzIoc2l6ZSkpIC0gMTsgaSsrKSB7XG4gICAgY29uc3QgcHJvZ3JhbSA9IG5ldyBDdW1Qcm9ncmFtKG9wLCBwZXJtdXRlZFguc2hhcGUsIGZhbHNlLCByZXZlcnNlKTtcbiAgICBjb25zdCBwcmV2UmVzdWx0ID0gcmVzdWx0O1xuICAgIGNvbnN0IHVuaWZvcm1EYXRhID0gW3t0eXBlOiAnZmxvYXQzMicsIGRhdGE6IFtpXX1dO1xuICAgIHJlc3VsdCA9XG4gICAgICAgIGJhY2tlbmQucnVuV2ViR1BVUHJvZ3JhbShwcm9ncmFtLCBbcmVzdWx0XSwgcmVzdWx0LmR0eXBlLCB1bmlmb3JtRGF0YSk7XG4gICAgYmFja2VuZC5kaXNwb3NlRGF0YShwcmV2UmVzdWx0LmRhdGFJZCk7XG4gIH1cbiAgLy8gRm9yIGV4Y2x1c2l2ZSBjdW0sIHNoaWZ0IHRoZSBlbmQgcmVzdWx0IGluIHRoZSBkaXJlY3Rpb24gb2YgcHJvZHVjdCBvciBzdW1cbiAgLy8gYW5kIGFkZCAxIGZvciBwcm9kdWN0IG9yIDAgZm9yIHN1bSB0byB0aGUgZnJvbnQgaW5kZXguXG4gIGlmIChleGNsdXNpdmUpIHtcbiAgICBjb25zdCBwcm9ncmFtID0gbmV3IEN1bVByb2dyYW0ob3AsIHBlcm11dGVkWC5zaGFwZSwgZXhjbHVzaXZlLCByZXZlcnNlKTtcbiAgICBjb25zdCBwcmV2UmVzdWx0ID0gcmVzdWx0O1xuICAgIGNvbnN0IHVuaWZvcm1EYXRhID0gW3t0eXBlOiAnZmxvYXQzMicsIGRhdGE6IFswXX1dO1xuICAgIHJlc3VsdCA9XG4gICAgICAgIGJhY2tlbmQucnVuV2ViR1BVUHJvZ3JhbShwcm9ncmFtLCBbcmVzdWx0XSwgcmVzdWx0LmR0eXBlLCB1bmlmb3JtRGF0YSk7XG4gICAgYmFja2VuZC5kaXNwb3NlRGF0YShwcmV2UmVzdWx0LmRhdGFJZCk7XG4gIH1cblxuICBpZiAocGVybXV0YXRpb24gIT0gbnVsbCkge1xuICAgIGNvbnN0IHJldmVyc2VQZXJtdXRhdGlvbiA9IGJhY2tlbmRfdXRpbC5nZXRVbmRvQXhlc1Blcm11dGF0aW9uKHBlcm11dGF0aW9uKTtcbiAgICBjb25zdCByZXZlcnNlVHJhbnNwb3NlZFJlc3VsdCA9IHRyYW5zcG9zZShcbiAgICAgICAge2lucHV0czoge3g6IHJlc3VsdH0sIGJhY2tlbmQsIGF0dHJzOiB7cGVybTogcmV2ZXJzZVBlcm11dGF0aW9ufX0pO1xuXG4gICAgYmFja2VuZC5kaXNwb3NlRGF0YShyZXN1bHQuZGF0YUlkKTtcbiAgICBiYWNrZW5kLmRpc3Bvc2VEYXRhKHBlcm11dGVkWC5kYXRhSWQpO1xuXG4gICAgcmV0dXJuIHJldmVyc2VUcmFuc3Bvc2VkUmVzdWx0O1xuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cbiJdfQ==","/**\n * @license\n * Copyright 2022 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Cumprod } from '@tensorflow/tfjs-core';\nimport { CumOpType } from '../cum_webgpu';\nimport { cumImpl } from './Cum_impl';\nexport function cumprod(args) {\n    const { inputs, backend, attrs } = args;\n    const { x } = inputs;\n    const { axis, exclusive, reverse } = attrs;\n    return cumImpl(CumOpType.Prod, x, backend, axis, exclusive, reverse);\n}\nexport const cumprodConfig = {\n    kernelName: Cumprod,\n    backendName: 'webgpu',\n    kernelFunc: cumprod\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ3VtcHJvZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2tlcm5lbHMvQ3VtcHJvZC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQUMsT0FBTyxFQUFvRSxNQUFNLHVCQUF1QixDQUFDO0FBR2pILE9BQU8sRUFBQyxTQUFTLEVBQUMsTUFBTSxlQUFlLENBQUM7QUFDeEMsT0FBTyxFQUFDLE9BQU8sRUFBQyxNQUFNLFlBQVksQ0FBQztBQUVuQyxNQUFNLFVBQVUsT0FBTyxDQUNuQixJQUEwRTtJQUU1RSxNQUFNLEVBQUMsTUFBTSxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUMsR0FBRyxJQUFJLENBQUM7SUFDdEMsTUFBTSxFQUFDLENBQUMsRUFBQyxHQUFHLE1BQU0sQ0FBQztJQUNuQixNQUFNLEVBQUMsSUFBSSxFQUFFLFNBQVMsRUFBRSxPQUFPLEVBQUMsR0FBRyxLQUFLLENBQUM7SUFDekMsT0FBTyxPQUFPLENBQUMsU0FBUyxDQUFDLElBQUksRUFBRSxDQUFDLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxTQUFTLEVBQUUsT0FBTyxDQUFDLENBQUM7QUFDdkUsQ0FBQztBQUVELE1BQU0sQ0FBQyxNQUFNLGFBQWEsR0FBaUI7SUFDekMsVUFBVSxFQUFFLE9BQU87SUFDbkIsV0FBVyxFQUFFLFFBQVE7SUFDckIsVUFBVSxFQUFFLE9BQWdDO0NBQzdDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7Q3VtcHJvZCwgQ3VtcHJvZEF0dHJzLCBDdW1wcm9kSW5wdXRzLCBLZXJuZWxDb25maWcsIEtlcm5lbEZ1bmMsIFRlbnNvckluZm99IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7V2ViR1BVQmFja2VuZH0gZnJvbSAnLi4vYmFja2VuZF93ZWJncHUnO1xuaW1wb3J0IHtDdW1PcFR5cGV9IGZyb20gJy4uL2N1bV93ZWJncHUnO1xuaW1wb3J0IHtjdW1JbXBsfSBmcm9tICcuL0N1bV9pbXBsJztcblxuZXhwb3J0IGZ1bmN0aW9uIGN1bXByb2QoXG4gICAgYXJnczoge2lucHV0czogQ3VtcHJvZElucHV0cywgYmFja2VuZDogV2ViR1BVQmFja2VuZCwgYXR0cnM6IEN1bXByb2RBdHRyc30pOlxuICAgIFRlbnNvckluZm8ge1xuICBjb25zdCB7aW5wdXRzLCBiYWNrZW5kLCBhdHRyc30gPSBhcmdzO1xuICBjb25zdCB7eH0gPSBpbnB1dHM7XG4gIGNvbnN0IHtheGlzLCBleGNsdXNpdmUsIHJldmVyc2V9ID0gYXR0cnM7XG4gIHJldHVybiBjdW1JbXBsKEN1bU9wVHlwZS5Qcm9kLCB4LCBiYWNrZW5kLCBheGlzLCBleGNsdXNpdmUsIHJldmVyc2UpO1xufVxuXG5leHBvcnQgY29uc3QgY3VtcHJvZENvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBDdW1wcm9kLFxuICBiYWNrZW5kTmFtZTogJ3dlYmdwdScsXG4gIGtlcm5lbEZ1bmM6IGN1bXByb2QgYXMgdW5rbm93biBhcyBLZXJuZWxGdW5jXG59O1xuIl19","/**\n * @license\n * Copyright 2022 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Cumsum } from '@tensorflow/tfjs-core';\nimport { CumOpType } from '../cum_webgpu';\nimport { cumImpl } from './Cum_impl';\nexport function cumsum(args) {\n    const { inputs, backend, attrs } = args;\n    const { x } = inputs;\n    const { axis, exclusive, reverse } = attrs;\n    return cumImpl(CumOpType.Sum, x, backend, axis, exclusive, reverse);\n}\nexport const cumsumConfig = {\n    kernelName: Cumsum,\n    backendName: 'webgpu',\n    kernelFunc: cumsum\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ3Vtc3VtLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMva2VybmVscy9DdW1zdW0udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUFDLE1BQU0sRUFBa0UsTUFBTSx1QkFBdUIsQ0FBQztBQUc5RyxPQUFPLEVBQUMsU0FBUyxFQUFDLE1BQU0sZUFBZSxDQUFDO0FBQ3hDLE9BQU8sRUFBQyxPQUFPLEVBQUMsTUFBTSxZQUFZLENBQUM7QUFFbkMsTUFBTSxVQUFVLE1BQU0sQ0FDbEIsSUFBd0U7SUFFMUUsTUFBTSxFQUFDLE1BQU0sRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFDLEdBQUcsSUFBSSxDQUFDO0lBQ3RDLE1BQU0sRUFBQyxDQUFDLEVBQUMsR0FBRyxNQUFNLENBQUM7SUFDbkIsTUFBTSxFQUFDLElBQUksRUFBRSxTQUFTLEVBQUUsT0FBTyxFQUFDLEdBQUcsS0FBSyxDQUFDO0lBQ3pDLE9BQU8sT0FBTyxDQUFDLFNBQVMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsU0FBUyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0FBQ3RFLENBQUM7QUFFRCxNQUFNLENBQUMsTUFBTSxZQUFZLEdBQWlCO0lBQ3hDLFVBQVUsRUFBRSxNQUFNO0lBQ2xCLFdBQVcsRUFBRSxRQUFRO0lBQ3JCLFVBQVUsRUFBRSxNQUErQjtDQUM1QyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge0N1bXN1bSwgQ3Vtc3VtQXR0cnMsIEN1bXN1bUlucHV0cywgS2VybmVsQ29uZmlnLCBLZXJuZWxGdW5jLCBUZW5zb3JJbmZvfSBmcm9tICdAdGVuc29yZmxvdy90ZmpzLWNvcmUnO1xuXG5pbXBvcnQge1dlYkdQVUJhY2tlbmR9IGZyb20gJy4uL2JhY2tlbmRfd2ViZ3B1JztcbmltcG9ydCB7Q3VtT3BUeXBlfSBmcm9tICcuLi9jdW1fd2ViZ3B1JztcbmltcG9ydCB7Y3VtSW1wbH0gZnJvbSAnLi9DdW1faW1wbCc7XG5cbmV4cG9ydCBmdW5jdGlvbiBjdW1zdW0oXG4gICAgYXJnczoge2lucHV0czogQ3Vtc3VtSW5wdXRzLCBiYWNrZW5kOiBXZWJHUFVCYWNrZW5kLCBhdHRyczogQ3Vtc3VtQXR0cnN9KTpcbiAgICBUZW5zb3JJbmZvIHtcbiAgY29uc3Qge2lucHV0cywgYmFja2VuZCwgYXR0cnN9ID0gYXJncztcbiAgY29uc3Qge3h9ID0gaW5wdXRzO1xuICBjb25zdCB7YXhpcywgZXhjbHVzaXZlLCByZXZlcnNlfSA9IGF0dHJzO1xuICByZXR1cm4gY3VtSW1wbChDdW1PcFR5cGUuU3VtLCB4LCBiYWNrZW5kLCBheGlzLCBleGNsdXNpdmUsIHJldmVyc2UpO1xufVxuXG5leHBvcnQgY29uc3QgY3Vtc3VtQ29uZmlnOiBLZXJuZWxDb25maWcgPSB7XG4gIGtlcm5lbE5hbWU6IEN1bXN1bSxcbiAgYmFja2VuZE5hbWU6ICd3ZWJncHUnLFxuICBrZXJuZWxGdW5jOiBjdW1zdW0gYXMgdW5rbm93biBhcyBLZXJuZWxGdW5jXG59O1xuIl19","/**\n * @license\n * Copyright 2022 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { DenseBincount, util } from '@tensorflow/tfjs-core';\nimport { BincountProgram } from '../bincount_webgpu';\nimport { fill } from './Fill';\nexport function denseBincount(args) {\n    const { inputs, backend, attrs } = args;\n    const { x, weights } = inputs;\n    const { size, binaryOutput } = attrs;\n    const xRankOne = x.shape.length === 1;\n    const weightsSize = util.sizeFromShape(weights.shape);\n    const hasWeights = weightsSize > 0;\n    const dtype = weights.dtype;\n    const xSize = xRankOne ? [x.shape[0]] : [x.shape[0], x.shape[1]];\n    const outputSize = xRankOne ? [size] : [x.shape[0], size];\n    const output = fill({ backend, attrs: { shape: outputSize, value: 0, dtype } });\n    const program = new BincountProgram(xSize, hasWeights, binaryOutput);\n    const uniformData = [{ type: 'int32', data: [size] }];\n    const bincountInputs = hasWeights ? [x, weights] : [x];\n    const res = backend.runWebGPUProgram(program, bincountInputs, dtype, uniformData, output);\n    return res;\n}\nexport const denseBincountConfig = {\n    kernelName: DenseBincount,\n    backendName: 'webgpu',\n    kernelFunc: denseBincount\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRGVuc2VCaW5jb3VudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2tlcm5lbHMvRGVuc2VCaW5jb3VudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQUMsYUFBYSxFQUFpRixJQUFJLEVBQUMsTUFBTSx1QkFBdUIsQ0FBQztBQUd6SSxPQUFPLEVBQUMsZUFBZSxFQUFDLE1BQU0sb0JBQW9CLENBQUM7QUFFbkQsT0FBTyxFQUFDLElBQUksRUFBQyxNQUFNLFFBQVEsQ0FBQztBQUU1QixNQUFNLFVBQVUsYUFBYSxDQUFDLElBSTdCO0lBQ0MsTUFBTSxFQUFDLE1BQU0sRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFDLEdBQUcsSUFBSSxDQUFDO0lBQ3RDLE1BQU0sRUFBQyxDQUFDLEVBQUUsT0FBTyxFQUFDLEdBQUcsTUFBTSxDQUFDO0lBQzVCLE1BQU0sRUFBQyxJQUFJLEVBQUUsWUFBWSxFQUFDLEdBQUcsS0FBSyxDQUFDO0lBRW5DLE1BQU0sUUFBUSxHQUFHLENBQUMsQ0FBQyxLQUFLLENBQUMsTUFBTSxLQUFLLENBQUMsQ0FBQztJQUN0QyxNQUFNLFdBQVcsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUN0RCxNQUFNLFVBQVUsR0FBRyxXQUFXLEdBQUcsQ0FBQyxDQUFDO0lBQ25DLE1BQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxLQUFLLENBQUM7SUFDNUIsTUFBTSxLQUFLLEdBQ1AsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUN2RCxNQUFNLFVBQVUsR0FDWixRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQztJQUUzQyxNQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsRUFBQyxPQUFPLEVBQUUsS0FBSyxFQUFFLEVBQUMsS0FBSyxFQUFFLFVBQVUsRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFFLEtBQUssRUFBQyxFQUFDLENBQUMsQ0FBQztJQUM1RSxNQUFNLE9BQU8sR0FBRyxJQUFJLGVBQWUsQ0FBQyxLQUFLLEVBQUUsVUFBVSxFQUFFLFlBQVksQ0FBQyxDQUFDO0lBQ3JFLE1BQU0sV0FBVyxHQUFHLENBQUMsRUFBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxDQUFDLElBQUksQ0FBQyxFQUFDLENBQUMsQ0FBQztJQUNwRCxNQUFNLGNBQWMsR0FBaUIsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNyRSxNQUFNLEdBQUcsR0FBRyxPQUFPLENBQUMsZ0JBQWdCLENBQ2hDLE9BQU8sRUFBRSxjQUFjLEVBQUUsS0FBSyxFQUFFLFdBQVcsRUFBRSxNQUFNLENBQUMsQ0FBQztJQUV6RCxPQUFPLEdBQUcsQ0FBQztBQUNiLENBQUM7QUFFRCxNQUFNLENBQUMsTUFBTSxtQkFBbUIsR0FBaUI7SUFDL0MsVUFBVSxFQUFFLGFBQWE7SUFDekIsV0FBVyxFQUFFLFFBQVE7SUFDckIsVUFBVSxFQUFFLGFBQXNDO0NBQ25ELENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7RGVuc2VCaW5jb3VudCwgRGVuc2VCaW5jb3VudEF0dHJzLCBEZW5zZUJpbmNvdW50SW5wdXRzLCBLZXJuZWxDb25maWcsIEtlcm5lbEZ1bmMsIFRlbnNvckluZm8sIHV0aWx9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7V2ViR1BVQmFja2VuZH0gZnJvbSAnLi4vYmFja2VuZF93ZWJncHUnO1xuaW1wb3J0IHtCaW5jb3VudFByb2dyYW19IGZyb20gJy4uL2JpbmNvdW50X3dlYmdwdSc7XG5cbmltcG9ydCB7ZmlsbH0gZnJvbSAnLi9GaWxsJztcblxuZXhwb3J0IGZ1bmN0aW9uIGRlbnNlQmluY291bnQoYXJnczoge1xuICBpbnB1dHM6IERlbnNlQmluY291bnRJbnB1dHMsXG4gIGJhY2tlbmQ6IFdlYkdQVUJhY2tlbmQsXG4gIGF0dHJzOiBEZW5zZUJpbmNvdW50QXR0cnNcbn0pOiBUZW5zb3JJbmZvIHtcbiAgY29uc3Qge2lucHV0cywgYmFja2VuZCwgYXR0cnN9ID0gYXJncztcbiAgY29uc3Qge3gsIHdlaWdodHN9ID0gaW5wdXRzO1xuICBjb25zdCB7c2l6ZSwgYmluYXJ5T3V0cHV0fSA9IGF0dHJzO1xuXG4gIGNvbnN0IHhSYW5rT25lID0geC5zaGFwZS5sZW5ndGggPT09IDE7XG4gIGNvbnN0IHdlaWdodHNTaXplID0gdXRpbC5zaXplRnJvbVNoYXBlKHdlaWdodHMuc2hhcGUpO1xuICBjb25zdCBoYXNXZWlnaHRzID0gd2VpZ2h0c1NpemUgPiAwO1xuICBjb25zdCBkdHlwZSA9IHdlaWdodHMuZHR5cGU7XG4gIGNvbnN0IHhTaXplOiBbbnVtYmVyXXxbbnVtYmVyLCBudW1iZXJdID1cbiAgICAgIHhSYW5rT25lID8gW3guc2hhcGVbMF1dIDogW3guc2hhcGVbMF0sIHguc2hhcGVbMV1dO1xuICBjb25zdCBvdXRwdXRTaXplOiBbbnVtYmVyXXxbbnVtYmVyLCBudW1iZXJdID1cbiAgICAgIHhSYW5rT25lID8gW3NpemVdIDogW3guc2hhcGVbMF0sIHNpemVdO1xuXG4gIGNvbnN0IG91dHB1dCA9IGZpbGwoe2JhY2tlbmQsIGF0dHJzOiB7c2hhcGU6IG91dHB1dFNpemUsIHZhbHVlOiAwLCBkdHlwZX19KTtcbiAgY29uc3QgcHJvZ3JhbSA9IG5ldyBCaW5jb3VudFByb2dyYW0oeFNpemUsIGhhc1dlaWdodHMsIGJpbmFyeU91dHB1dCk7XG4gIGNvbnN0IHVuaWZvcm1EYXRhID0gW3t0eXBlOiAnaW50MzInLCBkYXRhOiBbc2l6ZV19XTtcbiAgY29uc3QgYmluY291bnRJbnB1dHM6IFRlbnNvckluZm9bXSA9IGhhc1dlaWdodHMgPyBbeCwgd2VpZ2h0c10gOiBbeF07XG4gIGNvbnN0IHJlcyA9IGJhY2tlbmQucnVuV2ViR1BVUHJvZ3JhbShcbiAgICAgIHByb2dyYW0sIGJpbmNvdW50SW5wdXRzLCBkdHlwZSwgdW5pZm9ybURhdGEsIG91dHB1dCk7XG5cbiAgcmV0dXJuIHJlcztcbn1cblxuZXhwb3J0IGNvbnN0IGRlbnNlQmluY291bnRDb25maWc6IEtlcm5lbENvbmZpZyA9IHtcbiAga2VybmVsTmFtZTogRGVuc2VCaW5jb3VudCxcbiAgYmFja2VuZE5hbWU6ICd3ZWJncHUnLFxuICBrZXJuZWxGdW5jOiBkZW5zZUJpbmNvdW50IGFzIHVua25vd24gYXMgS2VybmVsRnVuY1xufTtcbiJdfQ==","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { getMainHeaderString as main } from './webgpu_program';\nimport { computeDispatch, flatDispatchLayout } from './webgpu_util';\nexport class DepthToSpaceProgram {\n    constructor(outputShape, dataFormat) {\n        this.variableNames = ['x'];\n        this.workgroupSize = [64, 1, 1];\n        this.size = true;\n        this.uniforms = 'blockSize : i32,';\n        this.outputShape = outputShape;\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize);\n        this.shaderKey = `depthToSpace_${dataFormat}`;\n        this.dataFormat = dataFormat;\n    }\n    getUserCode() {\n        const userCode = `\n      ${main('index')} {\n        if (index < uniforms.size) {\n          let coords = getCoordsFromIndex(index);\n          let b = coords[0];\n          let h = ${this.getHeightCoordString()};\n          let w = ${this.getWidthCoordString()};\n          let d = ${this.getDepthCoordString()};\n\n          let in_h = h / uniforms.blockSize;\n          let offset_h = h % uniforms.blockSize;\n          let in_w = w / uniforms.blockSize;\n          let offset_w = w % uniforms.blockSize;\n          let offset_d = (offset_h * uniforms.blockSize + offset_w) *\n            ${this.getOutputDepthSize()};\n          let in_d = d + offset_d;\n\n          let rlt = ${this.getInputSamplingString()};\n          setOutputAtIndex(index, rlt);\n        }\n      }`;\n        return userCode;\n    }\n    getHeightCoordString() {\n        if (this.dataFormat === 'NHWC') {\n            return `coords[1]`;\n        }\n        else {\n            return `coords[2]`;\n        }\n    }\n    getWidthCoordString() {\n        if (this.dataFormat === 'NHWC') {\n            return `coords[2]`;\n        }\n        else {\n            return `coords[3]`;\n        }\n    }\n    getDepthCoordString() {\n        if (this.dataFormat === 'NHWC') {\n            return `coords[3]`;\n        }\n        else {\n            return `coords[1]`;\n        }\n    }\n    getOutputDepthSize() {\n        if (this.dataFormat === 'NHWC') {\n            return `uniforms.outShape[3]`;\n        }\n        else {\n            return `uniforms.outShape[1]`;\n        }\n    }\n    getInputSamplingString() {\n        if (this.dataFormat === 'NHWC') {\n            return `getX(b, in_h, in_w, in_d)`;\n        }\n        else {\n            return `getX(b, in_d, in_h, in_w)`;\n        }\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVwdGhfdG9fc3BhY2Vfd2ViZ3B1LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMvZGVwdGhfdG9fc3BhY2Vfd2ViZ3B1LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sRUFBQyxtQkFBbUIsSUFBSSxJQUFJLEVBQWdCLE1BQU0sa0JBQWtCLENBQUM7QUFDNUUsT0FBTyxFQUFDLGVBQWUsRUFBRSxrQkFBa0IsRUFBQyxNQUFNLGVBQWUsQ0FBQztBQUVsRSxNQUFNLE9BQU8sbUJBQW1CO0lBVzlCLFlBQVksV0FBcUIsRUFBRSxVQUF5QjtRQVY1RCxrQkFBYSxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7UUFNdEIsa0JBQWEsR0FBNkIsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ3JELFNBQUksR0FBRyxJQUFJLENBQUM7UUFDWixhQUFRLEdBQUcsa0JBQWtCLENBQUM7UUFHNUIsSUFBSSxDQUFDLFdBQVcsR0FBRyxXQUFXLENBQUM7UUFDL0IsSUFBSSxDQUFDLGNBQWMsR0FBRyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDM0QsSUFBSSxDQUFDLFFBQVEsR0FBRyxlQUFlLENBQzNCLElBQUksQ0FBQyxjQUFjLEVBQUUsSUFBSSxDQUFDLFdBQVcsRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7UUFDL0QsSUFBSSxDQUFDLFNBQVMsR0FBRyxnQkFBZ0IsVUFBVSxFQUFFLENBQUM7UUFDOUMsSUFBSSxDQUFDLFVBQVUsR0FBRyxVQUFVLENBQUM7SUFDL0IsQ0FBQztJQUVELFdBQVc7UUFDVCxNQUFNLFFBQVEsR0FBRztRQUNiLElBQUksQ0FBQyxPQUFPLENBQUM7Ozs7b0JBSUQsSUFBSSxDQUFDLG9CQUFvQixFQUFFO29CQUMzQixJQUFJLENBQUMsbUJBQW1CLEVBQUU7b0JBQzFCLElBQUksQ0FBQyxtQkFBbUIsRUFBRTs7Ozs7OztjQU9oQyxJQUFJLENBQUMsa0JBQWtCLEVBQUU7OztzQkFHakIsSUFBSSxDQUFDLHNCQUFzQixFQUFFOzs7UUFHM0MsQ0FBQztRQUNMLE9BQU8sUUFBUSxDQUFDO0lBQ2xCLENBQUM7SUFFTyxvQkFBb0I7UUFDMUIsSUFBSSxJQUFJLENBQUMsVUFBVSxLQUFLLE1BQU0sRUFBRTtZQUM5QixPQUFPLFdBQVcsQ0FBQztTQUNwQjthQUFNO1lBQ0wsT0FBTyxXQUFXLENBQUM7U0FDcEI7SUFDSCxDQUFDO0lBRU8sbUJBQW1CO1FBQ3pCLElBQUksSUFBSSxDQUFDLFVBQVUsS0FBSyxNQUFNLEVBQUU7WUFDOUIsT0FBTyxXQUFXLENBQUM7U0FDcEI7YUFBTTtZQUNMLE9BQU8sV0FBVyxDQUFDO1NBQ3BCO0lBQ0gsQ0FBQztJQUVPLG1CQUFtQjtRQUN6QixJQUFJLElBQUksQ0FBQyxVQUFVLEtBQUssTUFBTSxFQUFFO1lBQzlCLE9BQU8sV0FBVyxDQUFDO1NBQ3BCO2FBQU07WUFDTCxPQUFPLFdBQVcsQ0FBQztTQUNwQjtJQUNILENBQUM7SUFFTyxrQkFBa0I7UUFDeEIsSUFBSSxJQUFJLENBQUMsVUFBVSxLQUFLLE1BQU0sRUFBRTtZQUM5QixPQUFPLHNCQUFzQixDQUFDO1NBQy9CO2FBQU07WUFDTCxPQUFPLHNCQUFzQixDQUFDO1NBQy9CO0lBQ0gsQ0FBQztJQUVPLHNCQUFzQjtRQUM1QixJQUFJLElBQUksQ0FBQyxVQUFVLEtBQUssTUFBTSxFQUFFO1lBQzlCLE9BQU8sMkJBQTJCLENBQUM7U0FDcEM7YUFBTTtZQUNMLE9BQU8sMkJBQTJCLENBQUM7U0FDcEM7SUFDSCxDQUFDO0NBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7Z2V0TWFpbkhlYWRlclN0cmluZyBhcyBtYWluLCBXZWJHUFVQcm9ncmFtfSBmcm9tICcuL3dlYmdwdV9wcm9ncmFtJztcbmltcG9ydCB7Y29tcHV0ZURpc3BhdGNoLCBmbGF0RGlzcGF0Y2hMYXlvdXR9IGZyb20gJy4vd2ViZ3B1X3V0aWwnO1xuXG5leHBvcnQgY2xhc3MgRGVwdGhUb1NwYWNlUHJvZ3JhbSBpbXBsZW1lbnRzIFdlYkdQVVByb2dyYW0ge1xuICB2YXJpYWJsZU5hbWVzID0gWyd4J107XG4gIG91dHB1dFNoYXBlOiBudW1iZXJbXTtcbiAgZGF0YUZvcm1hdDogc3RyaW5nO1xuICBzaGFkZXJLZXk6IHN0cmluZztcbiAgZGlzcGF0Y2hMYXlvdXQ6IHt4OiBudW1iZXJbXX07XG4gIGRpc3BhdGNoOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl07XG4gIHdvcmtncm91cFNpemU6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXSA9IFs2NCwgMSwgMV07XG4gIHNpemUgPSB0cnVlO1xuICB1bmlmb3JtcyA9ICdibG9ja1NpemUgOiBpMzIsJztcblxuICBjb25zdHJ1Y3RvcihvdXRwdXRTaGFwZTogbnVtYmVyW10sIGRhdGFGb3JtYXQ6ICdOSFdDJ3wnTkNIVycpIHtcbiAgICB0aGlzLm91dHB1dFNoYXBlID0gb3V0cHV0U2hhcGU7XG4gICAgdGhpcy5kaXNwYXRjaExheW91dCA9IGZsYXREaXNwYXRjaExheW91dCh0aGlzLm91dHB1dFNoYXBlKTtcbiAgICB0aGlzLmRpc3BhdGNoID0gY29tcHV0ZURpc3BhdGNoKFxuICAgICAgICB0aGlzLmRpc3BhdGNoTGF5b3V0LCB0aGlzLm91dHB1dFNoYXBlLCB0aGlzLndvcmtncm91cFNpemUpO1xuICAgIHRoaXMuc2hhZGVyS2V5ID0gYGRlcHRoVG9TcGFjZV8ke2RhdGFGb3JtYXR9YDtcbiAgICB0aGlzLmRhdGFGb3JtYXQgPSBkYXRhRm9ybWF0O1xuICB9XG5cbiAgZ2V0VXNlckNvZGUoKTogc3RyaW5nIHtcbiAgICBjb25zdCB1c2VyQ29kZSA9IGBcbiAgICAgICR7bWFpbignaW5kZXgnKX0ge1xuICAgICAgICBpZiAoaW5kZXggPCB1bmlmb3Jtcy5zaXplKSB7XG4gICAgICAgICAgbGV0IGNvb3JkcyA9IGdldENvb3Jkc0Zyb21JbmRleChpbmRleCk7XG4gICAgICAgICAgbGV0IGIgPSBjb29yZHNbMF07XG4gICAgICAgICAgbGV0IGggPSAke3RoaXMuZ2V0SGVpZ2h0Q29vcmRTdHJpbmcoKX07XG4gICAgICAgICAgbGV0IHcgPSAke3RoaXMuZ2V0V2lkdGhDb29yZFN0cmluZygpfTtcbiAgICAgICAgICBsZXQgZCA9ICR7dGhpcy5nZXREZXB0aENvb3JkU3RyaW5nKCl9O1xuXG4gICAgICAgICAgbGV0IGluX2ggPSBoIC8gdW5pZm9ybXMuYmxvY2tTaXplO1xuICAgICAgICAgIGxldCBvZmZzZXRfaCA9IGggJSB1bmlmb3Jtcy5ibG9ja1NpemU7XG4gICAgICAgICAgbGV0IGluX3cgPSB3IC8gdW5pZm9ybXMuYmxvY2tTaXplO1xuICAgICAgICAgIGxldCBvZmZzZXRfdyA9IHcgJSB1bmlmb3Jtcy5ibG9ja1NpemU7XG4gICAgICAgICAgbGV0IG9mZnNldF9kID0gKG9mZnNldF9oICogdW5pZm9ybXMuYmxvY2tTaXplICsgb2Zmc2V0X3cpICpcbiAgICAgICAgICAgICR7dGhpcy5nZXRPdXRwdXREZXB0aFNpemUoKX07XG4gICAgICAgICAgbGV0IGluX2QgPSBkICsgb2Zmc2V0X2Q7XG5cbiAgICAgICAgICBsZXQgcmx0ID0gJHt0aGlzLmdldElucHV0U2FtcGxpbmdTdHJpbmcoKX07XG4gICAgICAgICAgc2V0T3V0cHV0QXRJbmRleChpbmRleCwgcmx0KTtcbiAgICAgICAgfVxuICAgICAgfWA7XG4gICAgcmV0dXJuIHVzZXJDb2RlO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRIZWlnaHRDb29yZFN0cmluZygpOiBzdHJpbmcge1xuICAgIGlmICh0aGlzLmRhdGFGb3JtYXQgPT09ICdOSFdDJykge1xuICAgICAgcmV0dXJuIGBjb29yZHNbMV1gO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gYGNvb3Jkc1syXWA7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBnZXRXaWR0aENvb3JkU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgaWYgKHRoaXMuZGF0YUZvcm1hdCA9PT0gJ05IV0MnKSB7XG4gICAgICByZXR1cm4gYGNvb3Jkc1syXWA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBgY29vcmRzWzNdYDtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGdldERlcHRoQ29vcmRTdHJpbmcoKTogc3RyaW5nIHtcbiAgICBpZiAodGhpcy5kYXRhRm9ybWF0ID09PSAnTkhXQycpIHtcbiAgICAgIHJldHVybiBgY29vcmRzWzNdYDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGBjb29yZHNbMV1gO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZ2V0T3V0cHV0RGVwdGhTaXplKCk6IHN0cmluZyB7XG4gICAgaWYgKHRoaXMuZGF0YUZvcm1hdCA9PT0gJ05IV0MnKSB7XG4gICAgICByZXR1cm4gYHVuaWZvcm1zLm91dFNoYXBlWzNdYDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGB1bmlmb3Jtcy5vdXRTaGFwZVsxXWA7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBnZXRJbnB1dFNhbXBsaW5nU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgaWYgKHRoaXMuZGF0YUZvcm1hdCA9PT0gJ05IV0MnKSB7XG4gICAgICByZXR1cm4gYGdldFgoYiwgaW5faCwgaW5fdywgaW5fZClgO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gYGdldFgoYiwgaW5fZCwgaW5faCwgaW5fdylgO1xuICAgIH1cbiAgfVxufVxuIl19","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { DepthToSpace } from '@tensorflow/tfjs-core';\nimport { DepthToSpaceProgram } from '../depth_to_space_webgpu';\nexport function depthToSpace(args) {\n    const { inputs, backend, attrs } = args;\n    const { x } = inputs;\n    const { blockSize, dataFormat } = attrs;\n    const batchSize = x.shape[0];\n    const inputHeight = (dataFormat === 'NHWC') ? x.shape[1] : x.shape[2];\n    const inputWidth = (dataFormat === 'NHWC') ? x.shape[2] : x.shape[3];\n    const inputDepth = (dataFormat === 'NHWC') ? x.shape[3] : x.shape[1];\n    const outputHeight = inputHeight * blockSize;\n    const outputWidth = inputWidth * blockSize;\n    const outputDepth = inputDepth / (blockSize * blockSize);\n    const outputShape = (dataFormat === 'NHWC') ?\n        [batchSize, outputHeight, outputWidth, outputDepth] :\n        [batchSize, outputDepth, outputHeight, outputWidth];\n    const uniformData = [\n        { type: 'int32', data: [blockSize] },\n    ];\n    const program = new DepthToSpaceProgram(outputShape, dataFormat);\n    return backend.runWebGPUProgram(program, [x], x.dtype, uniformData);\n}\nexport const depthToSpaceConfig = {\n    kernelName: DepthToSpace,\n    backendName: 'webgpu',\n    kernelFunc: depthToSpace\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRGVwdGhUb1NwYWNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMva2VybmVscy9EZXB0aFRvU3BhY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUFDLFlBQVksRUFBOEUsTUFBTSx1QkFBdUIsQ0FBQztBQUdoSSxPQUFPLEVBQUMsbUJBQW1CLEVBQUMsTUFBTSwwQkFBMEIsQ0FBQztBQUU3RCxNQUFNLFVBQVUsWUFBWSxDQUFDLElBSTVCO0lBQ0MsTUFBTSxFQUFDLE1BQU0sRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFDLEdBQUcsSUFBSSxDQUFDO0lBQ3RDLE1BQU0sRUFBQyxDQUFDLEVBQUMsR0FBRyxNQUFNLENBQUM7SUFDbkIsTUFBTSxFQUFDLFNBQVMsRUFBRSxVQUFVLEVBQUMsR0FBRyxLQUFLLENBQUM7SUFFdEMsTUFBTSxTQUFTLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUM3QixNQUFNLFdBQVcsR0FBRyxDQUFDLFVBQVUsS0FBSyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUN0RSxNQUFNLFVBQVUsR0FBRyxDQUFDLFVBQVUsS0FBSyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNyRSxNQUFNLFVBQVUsR0FBRyxDQUFDLFVBQVUsS0FBSyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUVyRSxNQUFNLFlBQVksR0FBRyxXQUFXLEdBQUcsU0FBUyxDQUFDO0lBQzdDLE1BQU0sV0FBVyxHQUFHLFVBQVUsR0FBRyxTQUFTLENBQUM7SUFDM0MsTUFBTSxXQUFXLEdBQUcsVUFBVSxHQUFHLENBQUMsU0FBUyxHQUFHLFNBQVMsQ0FBQyxDQUFDO0lBRXpELE1BQU0sV0FBVyxHQUFHLENBQUMsVUFBVSxLQUFLLE1BQU0sQ0FBQyxDQUFDLENBQUM7UUFDekMsQ0FBQyxTQUFTLEVBQUUsWUFBWSxFQUFFLFdBQVcsRUFBRSxXQUFXLENBQUMsQ0FBQyxDQUFDO1FBQ3JELENBQUMsU0FBUyxFQUFFLFdBQVcsRUFBRSxZQUFZLEVBQUUsV0FBVyxDQUFDLENBQUM7SUFFeEQsTUFBTSxXQUFXLEdBQUc7UUFDbEIsRUFBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxDQUFDLFNBQVMsQ0FBQyxFQUFDO0tBQ25DLENBQUM7SUFFRixNQUFNLE9BQU8sR0FBRyxJQUFJLG1CQUFtQixDQUFDLFdBQVcsRUFBRSxVQUFVLENBQUMsQ0FBQztJQUNqRSxPQUFPLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsS0FBSyxFQUFFLFdBQVcsQ0FBQyxDQUFDO0FBQ3RFLENBQUM7QUFFRCxNQUFNLENBQUMsTUFBTSxrQkFBa0IsR0FBaUI7SUFDOUMsVUFBVSxFQUFFLFlBQVk7SUFDeEIsV0FBVyxFQUFFLFFBQVE7SUFDckIsVUFBVSxFQUFFLFlBQXFDO0NBQ2xELENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7RGVwdGhUb1NwYWNlLCBEZXB0aFRvU3BhY2VBdHRycywgRGVwdGhUb1NwYWNlSW5wdXRzLCBLZXJuZWxDb25maWcsIEtlcm5lbEZ1bmMsIFRlbnNvckluZm99IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7V2ViR1BVQmFja2VuZH0gZnJvbSAnLi4vYmFja2VuZF93ZWJncHUnO1xuaW1wb3J0IHtEZXB0aFRvU3BhY2VQcm9ncmFtfSBmcm9tICcuLi9kZXB0aF90b19zcGFjZV93ZWJncHUnO1xuXG5leHBvcnQgZnVuY3Rpb24gZGVwdGhUb1NwYWNlKGFyZ3M6IHtcbiAgaW5wdXRzOiBEZXB0aFRvU3BhY2VJbnB1dHMsXG4gIGJhY2tlbmQ6IFdlYkdQVUJhY2tlbmQsXG4gIGF0dHJzOiBEZXB0aFRvU3BhY2VBdHRyc1xufSk6IFRlbnNvckluZm8ge1xuICBjb25zdCB7aW5wdXRzLCBiYWNrZW5kLCBhdHRyc30gPSBhcmdzO1xuICBjb25zdCB7eH0gPSBpbnB1dHM7XG4gIGNvbnN0IHtibG9ja1NpemUsIGRhdGFGb3JtYXR9ID0gYXR0cnM7XG5cbiAgY29uc3QgYmF0Y2hTaXplID0geC5zaGFwZVswXTtcbiAgY29uc3QgaW5wdXRIZWlnaHQgPSAoZGF0YUZvcm1hdCA9PT0gJ05IV0MnKSA/IHguc2hhcGVbMV0gOiB4LnNoYXBlWzJdO1xuICBjb25zdCBpbnB1dFdpZHRoID0gKGRhdGFGb3JtYXQgPT09ICdOSFdDJykgPyB4LnNoYXBlWzJdIDogeC5zaGFwZVszXTtcbiAgY29uc3QgaW5wdXREZXB0aCA9IChkYXRhRm9ybWF0ID09PSAnTkhXQycpID8geC5zaGFwZVszXSA6IHguc2hhcGVbMV07XG5cbiAgY29uc3Qgb3V0cHV0SGVpZ2h0ID0gaW5wdXRIZWlnaHQgKiBibG9ja1NpemU7XG4gIGNvbnN0IG91dHB1dFdpZHRoID0gaW5wdXRXaWR0aCAqIGJsb2NrU2l6ZTtcbiAgY29uc3Qgb3V0cHV0RGVwdGggPSBpbnB1dERlcHRoIC8gKGJsb2NrU2l6ZSAqIGJsb2NrU2l6ZSk7XG5cbiAgY29uc3Qgb3V0cHV0U2hhcGUgPSAoZGF0YUZvcm1hdCA9PT0gJ05IV0MnKSA/XG4gICAgICBbYmF0Y2hTaXplLCBvdXRwdXRIZWlnaHQsIG91dHB1dFdpZHRoLCBvdXRwdXREZXB0aF0gOlxuICAgICAgW2JhdGNoU2l6ZSwgb3V0cHV0RGVwdGgsIG91dHB1dEhlaWdodCwgb3V0cHV0V2lkdGhdO1xuXG4gIGNvbnN0IHVuaWZvcm1EYXRhID0gW1xuICAgIHt0eXBlOiAnaW50MzInLCBkYXRhOiBbYmxvY2tTaXplXX0sXG4gIF07XG5cbiAgY29uc3QgcHJvZ3JhbSA9IG5ldyBEZXB0aFRvU3BhY2VQcm9ncmFtKG91dHB1dFNoYXBlLCBkYXRhRm9ybWF0KTtcbiAgcmV0dXJuIGJhY2tlbmQucnVuV2ViR1BVUHJvZ3JhbShwcm9ncmFtLCBbeF0sIHguZHR5cGUsIHVuaWZvcm1EYXRhKTtcbn1cblxuZXhwb3J0IGNvbnN0IGRlcHRoVG9TcGFjZUNvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBEZXB0aFRvU3BhY2UsXG4gIGJhY2tlbmROYW1lOiAnd2ViZ3B1JyxcbiAga2VybmVsRnVuYzogZGVwdGhUb1NwYWNlIGFzIHVua25vd24gYXMgS2VybmVsRnVuY1xufTtcbiJdfQ==","/**\n * @license\n * Copyright 2022 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { activationFnSnippet, biasActivationSnippet } from './activation_util';\nimport { getMainHeaderString as main } from './webgpu_program';\nimport { computeDispatch } from './webgpu_util';\nexport class DepthwiseConv2DNCHWSharedProgram {\n    constructor(outputShape, filterHeight, filterWidth, addBias = false, activation = null, hasPreluActivation = false) {\n        this.variableNames = ['x', 'W'];\n        this.uniforms = `pads : vec2<i32>, inDims : vec2<i32>,`;\n        this.workgroupSize = [16, 16, 1];\n        this.outputShape = outputShape;\n        this.dispatchLayout = { x: [3], y: [2], z: [0, 1] };\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize);\n        if (addBias) {\n            this.variableNames.push('bias');\n        }\n        if (hasPreluActivation) {\n            this.variableNames.push('preluActivationWeights');\n        }\n        this.addBias = addBias;\n        this.activation = activation;\n        this.hasPreluActivation = hasPreluActivation;\n        this.filterHeight = filterHeight;\n        this.filterWidth = filterWidth;\n        this.shaderKey = `depthwiseNCHW_${this.activation}_${this.filterHeight}_${this.filterWidth}`;\n    }\n    getUserCode() {\n        const filterSize = this.filterWidth * this.filterHeight;\n        const flatWorkgroupSize = this.workgroupSize[0] * this.workgroupSize[1] * this.workgroupSize[2];\n        const tileAHeight = this.workgroupSize[1] + this.filterHeight - 1;\n        const tileAWidth = this.workgroupSize[0] + this.filterWidth - 1;\n        const userCode = `\n      ${activationFnSnippet(this.activation, this.hasPreluActivation, false, 4)}\n\n      var<workgroup> mm_Asub : array<array<f32, ${tileAWidth}>, ${tileAHeight}>;\n      var<workgroup> mm_Bsub : array<array<f32, ${this.filterWidth}>, ${this.filterHeight}>;\n      fn readX(batch : i32, channel : i32, row : i32, col : i32) -> f32 {\n        var value = 0.0;\n        if (row >=0 && row < uniforms.inDims[0] && col >=0 && col < uniforms.inDims[1])\n        {\n          value = getX(batch, channel, row, col);\n        }\n        return value;\n      }\n\n      ${main()} {\n        let coords = getOutputCoords();\n        let batch = coords[0];\n        let xRCCorner = vec2<i32>(coords.zw) - uniforms.pads;\n        let channelMul = uniforms.wShape[3];\n        let d1 = coords[1] / channelMul;\n        let q = coords[1] % channelMul;\n\n        let inputRowStart = xRCCorner.x;\n        let inputColStart = xRCCorner.y;\n\n        let localRow = i32(localId.y);\n        let localCol = i32(localId.x);\n\n        // Load one tile of X into local memory.\n        for (var inputRow = localRow; inputRow < ${tileAHeight}; inputRow = inputRow + ${this.workgroupSize[1]}) {\n          for (var inputCol = localCol; inputCol < ${tileAWidth}; inputCol = inputCol + ${this.workgroupSize[0]}) {\n            let rowOffset = inputRow - localRow;\n            let colOffset = inputCol - localCol;\n            mm_Asub[inputRow][inputCol] = readX(batch, d1, inputRowStart + rowOffset, inputColStart + colOffset);\n          }\n        }\n\n        // Load one tile of W into local memory.\n        var wIndex = i32(localIndex);\n        ${filterSize < flatWorkgroupSize ?\n            `if (wIndex < ${filterSize})` :\n            `for(; wIndex < ${filterSize}; wIndex = wIndex + ${flatWorkgroupSize})`}\n\n        {\n          let wRow = wIndex / ${this.filterWidth};\n          let wCol = wIndex % ${this.filterWidth};\n          mm_Bsub[wRow][wCol] = getW(wRow, wCol, d1, q);\n        }\n\n        workgroupBarrier();\n\n        var value = 0.0;\n        for (var wR = 0; wR < ${this.filterHeight}; wR = wR + 1) {\n          for (var wC = 0; wC < ${this.filterWidth}; wC = wC + 1) {\n            let xVal = mm_Asub[localRow + wR][localCol + wC];\n            let wVal = mm_Bsub[wR][wC];\n            value = fma(xVal, wVal, value);\n          }\n        }\n        ${biasActivationSnippet(this.addBias, this.activation)}\n        if (coordsInBounds4D(coords, uniforms.outShape)) {\n          setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], value);\n        }\n      }\n    `;\n        return userCode;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVwdGh3aXNlX2NvbnYyZF9uY2h3X3NoYXJlZF93ZWJncHUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9kZXB0aHdpc2VfY29udjJkX25jaHdfc2hhcmVkX3dlYmdwdS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFJSCxPQUFPLEVBQUMsbUJBQW1CLEVBQUUscUJBQXFCLEVBQUMsTUFBTSxtQkFBbUIsQ0FBQztBQUM3RSxPQUFPLEVBQUMsbUJBQW1CLElBQUksSUFBSSxFQUFnQixNQUFNLGtCQUFrQixDQUFDO0FBQzVFLE9BQU8sRUFBQyxlQUFlLEVBQUMsTUFBTSxlQUFlLENBQUM7QUFFOUMsTUFBTSxPQUFPLGdDQUFnQztJQWMzQyxZQUNJLFdBQXFCLEVBQUUsWUFBb0IsRUFBRSxXQUFtQixFQUNoRSxPQUFPLEdBQUcsS0FBSyxFQUFFLGFBQXNDLElBQUksRUFDM0Qsa0JBQWtCLEdBQUcsS0FBSztRQVo5QixrQkFBYSxHQUFHLENBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQzNCLGFBQVEsR0FBRyx1Q0FBdUMsQ0FBQztRQUNuRCxrQkFBYSxHQUE2QixDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFXcEQsSUFBSSxDQUFDLFdBQVcsR0FBRyxXQUFXLENBQUM7UUFDL0IsSUFBSSxDQUFDLGNBQWMsR0FBRyxFQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBQyxDQUFDO1FBQ2xELElBQUksQ0FBQyxRQUFRLEdBQUcsZUFBZSxDQUMzQixJQUFJLENBQUMsY0FBYyxFQUFFLElBQUksQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBRS9ELElBQUksT0FBTyxFQUFFO1lBQ1gsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7U0FDakM7UUFDRCxJQUFJLGtCQUFrQixFQUFFO1lBQ3RCLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLHdCQUF3QixDQUFDLENBQUM7U0FDbkQ7UUFFRCxJQUFJLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQztRQUN2QixJQUFJLENBQUMsVUFBVSxHQUFHLFVBQVUsQ0FBQztRQUM3QixJQUFJLENBQUMsa0JBQWtCLEdBQUcsa0JBQWtCLENBQUM7UUFDN0MsSUFBSSxDQUFDLFlBQVksR0FBRyxZQUFZLENBQUM7UUFDakMsSUFBSSxDQUFDLFdBQVcsR0FBRyxXQUFXLENBQUM7UUFDL0IsSUFBSSxDQUFDLFNBQVMsR0FBRyxpQkFBaUIsSUFBSSxDQUFDLFVBQVUsSUFBSSxJQUFJLENBQUMsWUFBWSxJQUNsRSxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7SUFDekIsQ0FBQztJQUVELFdBQVc7UUFDVCxNQUFNLFVBQVUsR0FBRyxJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUM7UUFDeEQsTUFBTSxpQkFBaUIsR0FDbkIsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDMUUsTUFBTSxXQUFXLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsWUFBWSxHQUFHLENBQUMsQ0FBQztRQUNsRSxNQUFNLFVBQVUsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxXQUFXLEdBQUcsQ0FBQyxDQUFDO1FBRWhFLE1BQU0sUUFBUSxHQUFHO1FBQ2IsbUJBQW1CLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUMsa0JBQWtCLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQzs7a0RBRTdCLFVBQVUsTUFBTSxXQUFXO2tEQUMzQixJQUFJLENBQUMsV0FBVyxNQUMxRCxJQUFJLENBQUMsWUFBWTs7Ozs7Ozs7OztRQVVqQixJQUFJLEVBQUU7Ozs7Ozs7Ozs7Ozs7OzttREFnQk4sV0FBVywyQkFBMkIsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUM7cURBRTNELFVBQVUsMkJBQTJCLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDOzs7Ozs7Ozs7VUFVMUQsVUFBVSxHQUFHLGlCQUFpQixDQUFDLENBQUM7WUFDNUIsZ0JBQWdCLFVBQVUsR0FBRyxDQUFDLENBQUM7WUFDL0Isa0JBQWtCLFVBQVUsdUJBQ3hCLGlCQUFpQixHQUFHOzs7Z0NBR0osSUFBSSxDQUFDLFdBQVc7Z0NBQ2hCLElBQUksQ0FBQyxXQUFXOzs7Ozs7O2dDQU9oQixJQUFJLENBQUMsWUFBWTtrQ0FDZixJQUFJLENBQUMsV0FBVzs7Ozs7O1VBTXhDLHFCQUFxQixDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQzs7Ozs7S0FLekQsQ0FBQztRQUNGLE9BQU8sUUFBUSxDQUFDO0lBQ2xCLENBQUM7Q0FDRiIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtiYWNrZW5kX3V0aWx9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7YWN0aXZhdGlvbkZuU25pcHBldCwgYmlhc0FjdGl2YXRpb25TbmlwcGV0fSBmcm9tICcuL2FjdGl2YXRpb25fdXRpbCc7XG5pbXBvcnQge2dldE1haW5IZWFkZXJTdHJpbmcgYXMgbWFpbiwgV2ViR1BVUHJvZ3JhbX0gZnJvbSAnLi93ZWJncHVfcHJvZ3JhbSc7XG5pbXBvcnQge2NvbXB1dGVEaXNwYXRjaH0gZnJvbSAnLi93ZWJncHVfdXRpbCc7XG5cbmV4cG9ydCBjbGFzcyBEZXB0aHdpc2VDb252MkROQ0hXU2hhcmVkUHJvZ3JhbSBpbXBsZW1lbnRzIFdlYkdQVVByb2dyYW0ge1xuICBvdXRwdXRTaGFwZTogbnVtYmVyW107XG4gIHNoYWRlcktleTogc3RyaW5nO1xuICBkaXNwYXRjaExheW91dDoge3g6IG51bWJlcltdLCB5OiBudW1iZXJbXSwgejogbnVtYmVyW119O1xuICBkaXNwYXRjaDogW251bWJlciwgbnVtYmVyLCBudW1iZXJdO1xuICB2YXJpYWJsZU5hbWVzID0gWyd4JywgJ1cnXTtcbiAgdW5pZm9ybXMgPSBgcGFkcyA6IHZlYzI8aTMyPiwgaW5EaW1zIDogdmVjMjxpMzI+LGA7XG4gIHdvcmtncm91cFNpemU6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXSA9IFsxNiwgMTYsIDFdO1xuICBhZGRCaWFzOiBib29sZWFuO1xuICBhY3RpdmF0aW9uOiBiYWNrZW5kX3V0aWwuQWN0aXZhdGlvbjtcbiAgaGFzUHJlbHVBY3RpdmF0aW9uOiBib29sZWFuO1xuICBmaWx0ZXJIZWlnaHQ6IG51bWJlcjtcbiAgZmlsdGVyV2lkdGg6IG51bWJlcjtcblxuICBjb25zdHJ1Y3RvcihcbiAgICAgIG91dHB1dFNoYXBlOiBudW1iZXJbXSwgZmlsdGVySGVpZ2h0OiBudW1iZXIsIGZpbHRlcldpZHRoOiBudW1iZXIsXG4gICAgICBhZGRCaWFzID0gZmFsc2UsIGFjdGl2YXRpb246IGJhY2tlbmRfdXRpbC5BY3RpdmF0aW9uID0gbnVsbCxcbiAgICAgIGhhc1ByZWx1QWN0aXZhdGlvbiA9IGZhbHNlKSB7XG4gICAgdGhpcy5vdXRwdXRTaGFwZSA9IG91dHB1dFNoYXBlO1xuICAgIHRoaXMuZGlzcGF0Y2hMYXlvdXQgPSB7eDogWzNdLCB5OiBbMl0sIHo6IFswLCAxXX07XG4gICAgdGhpcy5kaXNwYXRjaCA9IGNvbXB1dGVEaXNwYXRjaChcbiAgICAgICAgdGhpcy5kaXNwYXRjaExheW91dCwgdGhpcy5vdXRwdXRTaGFwZSwgdGhpcy53b3JrZ3JvdXBTaXplKTtcblxuICAgIGlmIChhZGRCaWFzKSB7XG4gICAgICB0aGlzLnZhcmlhYmxlTmFtZXMucHVzaCgnYmlhcycpO1xuICAgIH1cbiAgICBpZiAoaGFzUHJlbHVBY3RpdmF0aW9uKSB7XG4gICAgICB0aGlzLnZhcmlhYmxlTmFtZXMucHVzaCgncHJlbHVBY3RpdmF0aW9uV2VpZ2h0cycpO1xuICAgIH1cblxuICAgIHRoaXMuYWRkQmlhcyA9IGFkZEJpYXM7XG4gICAgdGhpcy5hY3RpdmF0aW9uID0gYWN0aXZhdGlvbjtcbiAgICB0aGlzLmhhc1ByZWx1QWN0aXZhdGlvbiA9IGhhc1ByZWx1QWN0aXZhdGlvbjtcbiAgICB0aGlzLmZpbHRlckhlaWdodCA9IGZpbHRlckhlaWdodDtcbiAgICB0aGlzLmZpbHRlcldpZHRoID0gZmlsdGVyV2lkdGg7XG4gICAgdGhpcy5zaGFkZXJLZXkgPSBgZGVwdGh3aXNlTkNIV18ke3RoaXMuYWN0aXZhdGlvbn1fJHt0aGlzLmZpbHRlckhlaWdodH1fJHtcbiAgICAgICAgdGhpcy5maWx0ZXJXaWR0aH1gO1xuICB9XG5cbiAgZ2V0VXNlckNvZGUoKTogc3RyaW5nIHtcbiAgICBjb25zdCBmaWx0ZXJTaXplID0gdGhpcy5maWx0ZXJXaWR0aCAqIHRoaXMuZmlsdGVySGVpZ2h0O1xuICAgIGNvbnN0IGZsYXRXb3JrZ3JvdXBTaXplID1cbiAgICAgICAgdGhpcy53b3JrZ3JvdXBTaXplWzBdICogdGhpcy53b3JrZ3JvdXBTaXplWzFdICogdGhpcy53b3JrZ3JvdXBTaXplWzJdO1xuICAgIGNvbnN0IHRpbGVBSGVpZ2h0ID0gdGhpcy53b3JrZ3JvdXBTaXplWzFdICsgdGhpcy5maWx0ZXJIZWlnaHQgLSAxO1xuICAgIGNvbnN0IHRpbGVBV2lkdGggPSB0aGlzLndvcmtncm91cFNpemVbMF0gKyB0aGlzLmZpbHRlcldpZHRoIC0gMTtcblxuICAgIGNvbnN0IHVzZXJDb2RlID0gYFxuICAgICAgJHthY3RpdmF0aW9uRm5TbmlwcGV0KHRoaXMuYWN0aXZhdGlvbiwgdGhpcy5oYXNQcmVsdUFjdGl2YXRpb24sIGZhbHNlLCA0KX1cblxuICAgICAgdmFyPHdvcmtncm91cD4gbW1fQXN1YiA6IGFycmF5PGFycmF5PGYzMiwgJHt0aWxlQVdpZHRofT4sICR7dGlsZUFIZWlnaHR9PjtcbiAgICAgIHZhcjx3b3JrZ3JvdXA+IG1tX0JzdWIgOiBhcnJheTxhcnJheTxmMzIsICR7dGhpcy5maWx0ZXJXaWR0aH0+LCAke1xuICAgICAgICB0aGlzLmZpbHRlckhlaWdodH0+O1xuICAgICAgZm4gcmVhZFgoYmF0Y2ggOiBpMzIsIGNoYW5uZWwgOiBpMzIsIHJvdyA6IGkzMiwgY29sIDogaTMyKSAtPiBmMzIge1xuICAgICAgICB2YXIgdmFsdWUgPSAwLjA7XG4gICAgICAgIGlmIChyb3cgPj0wICYmIHJvdyA8IHVuaWZvcm1zLmluRGltc1swXSAmJiBjb2wgPj0wICYmIGNvbCA8IHVuaWZvcm1zLmluRGltc1sxXSlcbiAgICAgICAge1xuICAgICAgICAgIHZhbHVlID0gZ2V0WChiYXRjaCwgY2hhbm5lbCwgcm93LCBjb2wpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH1cblxuICAgICAgJHttYWluKCl9IHtcbiAgICAgICAgbGV0IGNvb3JkcyA9IGdldE91dHB1dENvb3JkcygpO1xuICAgICAgICBsZXQgYmF0Y2ggPSBjb29yZHNbMF07XG4gICAgICAgIGxldCB4UkNDb3JuZXIgPSB2ZWMyPGkzMj4oY29vcmRzLnp3KSAtIHVuaWZvcm1zLnBhZHM7XG4gICAgICAgIGxldCBjaGFubmVsTXVsID0gdW5pZm9ybXMud1NoYXBlWzNdO1xuICAgICAgICBsZXQgZDEgPSBjb29yZHNbMV0gLyBjaGFubmVsTXVsO1xuICAgICAgICBsZXQgcSA9IGNvb3Jkc1sxXSAlIGNoYW5uZWxNdWw7XG5cbiAgICAgICAgbGV0IGlucHV0Um93U3RhcnQgPSB4UkNDb3JuZXIueDtcbiAgICAgICAgbGV0IGlucHV0Q29sU3RhcnQgPSB4UkNDb3JuZXIueTtcblxuICAgICAgICBsZXQgbG9jYWxSb3cgPSBpMzIobG9jYWxJZC55KTtcbiAgICAgICAgbGV0IGxvY2FsQ29sID0gaTMyKGxvY2FsSWQueCk7XG5cbiAgICAgICAgLy8gTG9hZCBvbmUgdGlsZSBvZiBYIGludG8gbG9jYWwgbWVtb3J5LlxuICAgICAgICBmb3IgKHZhciBpbnB1dFJvdyA9IGxvY2FsUm93OyBpbnB1dFJvdyA8ICR7XG4gICAgICAgIHRpbGVBSGVpZ2h0fTsgaW5wdXRSb3cgPSBpbnB1dFJvdyArICR7dGhpcy53b3JrZ3JvdXBTaXplWzFdfSkge1xuICAgICAgICAgIGZvciAodmFyIGlucHV0Q29sID0gbG9jYWxDb2w7IGlucHV0Q29sIDwgJHtcbiAgICAgICAgdGlsZUFXaWR0aH07IGlucHV0Q29sID0gaW5wdXRDb2wgKyAke3RoaXMud29ya2dyb3VwU2l6ZVswXX0pIHtcbiAgICAgICAgICAgIGxldCByb3dPZmZzZXQgPSBpbnB1dFJvdyAtIGxvY2FsUm93O1xuICAgICAgICAgICAgbGV0IGNvbE9mZnNldCA9IGlucHV0Q29sIC0gbG9jYWxDb2w7XG4gICAgICAgICAgICBtbV9Bc3ViW2lucHV0Um93XVtpbnB1dENvbF0gPSByZWFkWChiYXRjaCwgZDEsIGlucHV0Um93U3RhcnQgKyByb3dPZmZzZXQsIGlucHV0Q29sU3RhcnQgKyBjb2xPZmZzZXQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIExvYWQgb25lIHRpbGUgb2YgVyBpbnRvIGxvY2FsIG1lbW9yeS5cbiAgICAgICAgdmFyIHdJbmRleCA9IGkzMihsb2NhbEluZGV4KTtcbiAgICAgICAgJHtcbiAgICAgICAgZmlsdGVyU2l6ZSA8IGZsYXRXb3JrZ3JvdXBTaXplID9cbiAgICAgICAgICAgIGBpZiAod0luZGV4IDwgJHtmaWx0ZXJTaXplfSlgIDpcbiAgICAgICAgICAgIGBmb3IoOyB3SW5kZXggPCAke2ZpbHRlclNpemV9OyB3SW5kZXggPSB3SW5kZXggKyAke1xuICAgICAgICAgICAgICAgIGZsYXRXb3JrZ3JvdXBTaXplfSlgfVxuXG4gICAgICAgIHtcbiAgICAgICAgICBsZXQgd1JvdyA9IHdJbmRleCAvICR7dGhpcy5maWx0ZXJXaWR0aH07XG4gICAgICAgICAgbGV0IHdDb2wgPSB3SW5kZXggJSAke3RoaXMuZmlsdGVyV2lkdGh9O1xuICAgICAgICAgIG1tX0JzdWJbd1Jvd11bd0NvbF0gPSBnZXRXKHdSb3csIHdDb2wsIGQxLCBxKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHdvcmtncm91cEJhcnJpZXIoKTtcblxuICAgICAgICB2YXIgdmFsdWUgPSAwLjA7XG4gICAgICAgIGZvciAodmFyIHdSID0gMDsgd1IgPCAke3RoaXMuZmlsdGVySGVpZ2h0fTsgd1IgPSB3UiArIDEpIHtcbiAgICAgICAgICBmb3IgKHZhciB3QyA9IDA7IHdDIDwgJHt0aGlzLmZpbHRlcldpZHRofTsgd0MgPSB3QyArIDEpIHtcbiAgICAgICAgICAgIGxldCB4VmFsID0gbW1fQXN1Yltsb2NhbFJvdyArIHdSXVtsb2NhbENvbCArIHdDXTtcbiAgICAgICAgICAgIGxldCB3VmFsID0gbW1fQnN1Ylt3Ul1bd0NdO1xuICAgICAgICAgICAgdmFsdWUgPSBmbWEoeFZhbCwgd1ZhbCwgdmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAke2JpYXNBY3RpdmF0aW9uU25pcHBldCh0aGlzLmFkZEJpYXMsIHRoaXMuYWN0aXZhdGlvbil9XG4gICAgICAgIGlmIChjb29yZHNJbkJvdW5kczREKGNvb3JkcywgdW5pZm9ybXMub3V0U2hhcGUpKSB7XG4gICAgICAgICAgc2V0T3V0cHV0QXRDb29yZHMoY29vcmRzWzBdLCBjb29yZHNbMV0sIGNvb3Jkc1syXSwgY29vcmRzWzNdLCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICBgO1xuICAgIHJldHVybiB1c2VyQ29kZTtcbiAgfVxufVxuIl19","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { util } from '@tensorflow/tfjs-core';\nimport { activationFnSnippet, biasActivationSnippet } from './activation_util';\nimport { getMainHeaderString as main } from './webgpu_program';\nimport { computeDispatch, flatDispatchLayout } from './webgpu_util';\nexport class DepthwiseConv2DVec4Program {\n    constructor(convInfo, addBias = false, activation = null, hasPreluActivation = false) {\n        this.variableNames = ['x', 'W'];\n        this.uniforms = 'pads : vec2<i32>, inDims : vec2<i32>, virtualWidth : i32,';\n        this.workgroupSize = [64, 1, 1];\n        this.workPerThread = 4;\n        this.outputComponent = 4;\n        this.outputShape = convInfo.outShape;\n        this.virtualWidth = Math.ceil(this.outputShape[2] / this.workPerThread) *\n            this.workPerThread;\n        const virtualOutputShape = [\n            this.outputShape[0], this.outputShape[1], this.virtualWidth,\n            this.outputShape[3]\n        ];\n        this.dispatchLayout = flatDispatchLayout(virtualOutputShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, virtualOutputShape, this.workgroupSize, [this.outputComponent * this.workPerThread, 1, 1]);\n        util.assert(convInfo.dataFormat === 'channelsLast', () => 'TODO: NCHW is unimplemented');\n        if (addBias) {\n            this.variableNames.push('bias');\n        }\n        if (hasPreluActivation) {\n            this.variableNames.push('preluActivationWeights');\n        }\n        this.convInfo = convInfo;\n        this.addBias = addBias;\n        this.activation = activation;\n        this.hasPreluActivation = hasPreluActivation;\n        this.shaderKey =\n            `depthwiseVec4_${activation}_${this.convInfo.filterHeight}_${this.convInfo.filterWidth}_${this.convInfo.strideHeight}_${this.convInfo.strideWidth}_${this.workPerThread}`;\n    }\n    getUserCode() {\n        const xNumber = (this.workPerThread - 1) * this.convInfo.strideWidth +\n            this.convInfo.filterWidth;\n        const strideHeight = this.convInfo.strideHeight;\n        const strideWidth = this.convInfo.strideWidth;\n        const userCode = `\n      ${activationFnSnippet(this.activation, this.hasPreluActivation, true, 4)}\n      fn readX(batch : i32, row : i32, col : i32, channel : i32) -> vec4<f32> {\n        var value = vec4<f32>(0.0);\n        if (col >=0 && col < uniforms.inDims[1]) {\n          value = getX(batch, row, col, channel);\n        }\n        return value;\n      }\n\n      ${main('index')} {\n        let width0 = uniforms.outShape[3] / ${this.outputComponent};\n        let d1 = (index % width0) * ${this.outputComponent};\n        var index1 = index / width0;\n        let width1 = uniforms.virtualWidth / ${this.workPerThread};\n        let c = (index1 % width1) * ${this.workPerThread};\n        index1 = index1 / width1;\n        let r = index1 % uniforms.outShape[1];\n        let batch = index1 / uniforms.outShape[1];\n\n        let xRCCorner = vec2<i32>(r, c) * vec2<i32>(${strideHeight}, ${strideWidth}) - uniforms.pads;\n\n        let xRCorner = xRCCorner.x;\n        let xCCorner = xRCCorner.y;\n        var xVals : array<vec4<f32>, ${xNumber}>;\n        var dotProd : array<vec4<f32>, ${this.workPerThread}>;\n        for (var i = 0; i < ${this.workPerThread}; i++) {\n          dotProd[i] = vec4<f32>(0.0);\n        }\n\n        // Use constant instead of uniform can give better performance.\n        for (var wR = 0; wR < ${this.convInfo.filterHeight}; wR = wR + 1) {\n          let xR = xRCorner + wR;\n          if (xR >=0 && xR < uniforms.inDims[0]) {\n            for (var i = 0; i < ${xNumber}; i++) {\n              xVals[i] = readX(batch, xR, xCCorner + i, d1);\n            }\n            for (var wC = 0; wC < ${this.convInfo.filterWidth}; wC = wC + 1) {\n              let wValue = getW(wR, wC, d1, 0);\n              for (var i = 0; i < ${this.workPerThread}; i++) {\n                dotProd[i] = fma(xVals[i * ${strideWidth} + wC], wValue, dotProd[i]);\n              }\n            }\n          }\n        }\n\n        for (var i = 0; i < ${this.workPerThread}; i = i + 1) {\n          let coords = vec4<i32>(batch, r, c + i, d1);\n          if (coordsInBounds4D(coords, uniforms.outShape)) {\n            var value = dotProd[i];\n            ${biasActivationSnippet(this.addBias, this.activation)}\n            setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], value);\n          }\n        }\n      }\n    `;\n        return userCode;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVwdGh3aXNlX2NvbnYyZF92ZWM0X3dlYmdwdS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2RlcHRod2lzZV9jb252MmRfdmVjNF93ZWJncHUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUFlLElBQUksRUFBQyxNQUFNLHVCQUF1QixDQUFDO0FBQ3pELE9BQU8sRUFBQyxtQkFBbUIsRUFBRSxxQkFBcUIsRUFBQyxNQUFNLG1CQUFtQixDQUFDO0FBQzdFLE9BQU8sRUFBQyxtQkFBbUIsSUFBSSxJQUFJLEVBQWdCLE1BQU0sa0JBQWtCLENBQUM7QUFDNUUsT0FBTyxFQUFDLGVBQWUsRUFBRSxrQkFBa0IsRUFBQyxNQUFNLGVBQWUsQ0FBQztBQUVsRSxNQUFNLE9BQU8sMEJBQTBCO0lBZ0JyQyxZQUNJLFFBQWlDLEVBQUUsT0FBTyxHQUFHLEtBQUssRUFDbEQsYUFBc0MsSUFBSSxFQUFFLGtCQUFrQixHQUFHLEtBQUs7UUFiMUUsa0JBQWEsR0FBRyxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQztRQUMzQixhQUFRLEdBQUcsMkRBQTJELENBQUM7UUFDdkUsa0JBQWEsR0FBNkIsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ3JELGtCQUFhLEdBQUcsQ0FBQyxDQUFDO1FBS2xCLG9CQUFlLEdBQUcsQ0FBQyxDQUFDO1FBTWxCLElBQUksQ0FBQyxXQUFXLEdBQUcsUUFBUSxDQUFDLFFBQVEsQ0FBQztRQUNyQyxJQUFJLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDO1lBQ25FLElBQUksQ0FBQyxhQUFhLENBQUM7UUFDdkIsTUFBTSxrQkFBa0IsR0FBRztZQUN6QixJ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bGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7YmFja2VuZF91dGlsLCB1dGlsfSBmcm9tICdAdGVuc29yZmxvdy90ZmpzLWNvcmUnO1xuaW1wb3J0IHthY3RpdmF0aW9uRm5TbmlwcGV0LCBiaWFzQWN0aXZhdGlvblNuaXBwZXR9IGZyb20gJy4vYWN0aXZhdGlvbl91dGlsJztcbmltcG9ydCB7Z2V0TWFpbkhlYWRlclN0cmluZyBhcyBtYWluLCBXZWJHUFVQcm9ncmFtfSBmcm9tICcuL3dlYmdwdV9wcm9ncmFtJztcbmltcG9ydCB7Y29tcHV0ZURpc3BhdGNoLCBmbGF0RGlzcGF0Y2hMYXlvdXR9IGZyb20gJy4vd2ViZ3B1X3V0aWwnO1xuXG5leHBvcnQgY2xhc3MgRGVwdGh3aXNlQ29udjJEVmVjNFByb2dyYW0gaW1wbGVtZW50cyBXZWJHUFVQcm9ncmFtIHtcbiAgb3V0cHV0U2hhcGU6IG51bWJlcltdO1xuICBzaGFkZXJLZXk6IHN0cmluZztcbiAgZGlzcGF0Y2hMYXlvdXQ6IHt4OiBudW1iZXJbXX07XG4gIGRpc3BhdGNoOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl07XG4gIHZhcmlhYmxlTmFtZXMgPSBbJ3gnLCAnVyddO1xuICB1bmlmb3JtcyA9ICdwYWRzIDogdmVjMjxpMzI+LCBpbkRpbXMgOiB2ZWMyPGkzMj4sIHZpcnR1YWxXaWR0aCA6IGkzMiwnO1xuICB3b3JrZ3JvdXBTaXplOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl0gPSBbNjQsIDEsIDFdO1xuICB3b3JrUGVyVGhyZWFkID0gNDtcbiAgY29udkluZm86IGJhY2tlbmRfdXRpbC5Db252MkRJbmZvO1xuICBhZGRCaWFzOiBib29sZWFuO1xuICBhY3RpdmF0aW9uOiBiYWNrZW5kX3V0aWwuQWN0aXZhdGlvbjtcbiAgaGFzUHJlbHVBY3RpdmF0aW9uOiBib29sZWFuO1xuICBvdXRwdXRDb21wb25lbnQgPSA0O1xuICB2aXJ0dWFsV2lkdGg6IG51bWJlcjtcblxuICBjb25zdHJ1Y3RvcihcbiAgICAgIGNvbnZJbmZvOiBiYWNrZW5kX3V0aWwuQ29udjJESW5mbywgYWRkQmlhcyA9IGZhbHNlLFxuICAgICAgYWN0aXZhdGlvbjogYmFja2VuZF91dGlsLkFjdGl2YXRpb24gPSBudWxsLCBoYXNQcmVsdUFjdGl2YXRpb24gPSBmYWxzZSkge1xuICAgIHRoaXMub3V0cHV0U2hhcGUgPSBjb252SW5mby5vdXRTaGFwZTtcbiAgICB0aGlzLnZpcnR1YWxXaWR0aCA9IE1hdGguY2VpbCh0aGlzLm91dHB1dFNoYXBlWzJdIC8gdGhpcy53b3JrUGVyVGhyZWFkKSAqXG4gICAgICAgIHRoaXMud29ya1BlclRocmVhZDtcbiAgICBjb25zdCB2aXJ0dWFsT3V0cHV0U2hhcGUgPSBbXG4gICAgICB0aGlzLm91dHB1dFNoYXBlWzBdLCB0aGlzLm91dHB1dFNoYXBlWzFdLCB0aGlzLnZpcnR1YWxXaWR0aCxcbiAgICAgIHRoaXMub3V0cHV0U2hhcGVbM11cbiAgICBdO1xuICAgIHRoaXMuZGlzcGF0Y2hMYXlvdXQgPSBmbGF0RGlzcGF0Y2hMYXlvdXQodmlydHVhbE91dHB1dFNoYXBlKTtcblxuICAgIHRoaXMuZGlzcGF0Y2ggPSBjb21wdXRlRGlzcGF0Y2goXG4gICAgICAgIHRoaXMuZGlzcGF0Y2hMYXlvdXQsIHZpcnR1YWxPdXRwdXRTaGFwZSwgdGhpcy53b3JrZ3JvdXBTaXplLFxuICAgICAgICBbdGhpcy5vdXRwdXRDb21wb25lbnQgKiB0aGlzLndvcmtQZXJUaHJlYWQsIDEsIDFdKTtcblxuICAgIHV0aWwuYXNzZXJ0KFxuICAgICAgICBjb252SW5mby5kYXRhRm9ybWF0ID09PSAnY2hhbm5lbHNMYXN0JyxcbiAgICAgICAgKCkgPT4gJ1RPRE86IE5DSFcgaXMgdW5pbXBsZW1lbnRlZCcpO1xuXG4gICAgaWYgKGFkZEJpYXMpIHtcbiAgICAgIHRoaXMudmFyaWFibGVOYW1lcy5wdXNoKCdiaWFzJyk7XG4gICAgfVxuICAgIGlmIChoYXNQcmVsdUFjdGl2YXRpb24pIHtcbiAgICAgIHRoaXMudmFyaWFibGVOYW1lcy5wdXNoKCdwcmVsdUFjdGl2YXRpb25XZWlnaHRzJyk7XG4gICAgfVxuXG4gICAgdGhpcy5jb252SW5mbyA9IGNvbnZJbmZvO1xuICAgIHRoaXMuYWRkQmlhcyA9IGFkZEJpYXM7XG4gICAgdGhpcy5hY3RpdmF0aW9uID0gYWN0aXZhdGlvbjtcbiAgICB0aGlzLmhhc1ByZWx1QWN0aXZhdGlvbiA9IGhhc1ByZWx1QWN0aXZhdGlvbjtcblxuICAgIHRoaXMuc2hhZGVyS2V5ID1cbiAgICAgICAgYGRlcHRod2lzZVZlYzRfJHthY3RpdmF0aW9ufV8ke3RoaXMuY29udkluZm8uZmlsdGVySGVpZ2h0fV8ke1xuICAgICAgICAgICAgdGhpcy5jb252SW5mby5maWx0ZXJXaWR0aH1fJHt0aGlzLmNvbnZJbmZvLnN0cmlkZUhlaWdodH1fJHtcbiAgICAgICAgICAgIHRoaXMuY29udkluZm8uc3RyaWRlV2lkdGh9XyR7dGhpcy53b3JrUGVyVGhyZWFkfWA7XG4gIH1cblxuICBnZXRVc2VyQ29kZSgpOiBzdHJpbmcge1xuICAgIGNvbnN0IHhOdW1iZXIgPSAodGhpcy53b3JrUGVyVGhyZWFkIC0gMSkgKiB0aGlzLmNvbnZJbmZvLnN0cmlkZVdpZHRoICtcbiAgICAgICAgdGhpcy5jb252SW5mby5maWx0ZXJXaWR0aDtcbiAgICBjb25zdCBzdHJpZGVIZWlnaHQgPSB0aGlzLmNvbnZJbmZvLnN0cmlkZUhlaWdodDtcbiAgICBjb25zdCBzdHJpZGVXaWR0aCA9IHRoaXMuY29udkluZm8uc3RyaWRlV2lkdGg7XG5cbiAgICBjb25zdCB1c2VyQ29kZSA9IGBcbiAgICAgICR7YWN0aXZhdGlvbkZuU25pcHBldCh0aGlzLmFjdGl2YXRpb24sIHRoaXMuaGFzUHJlbHVBY3RpdmF0aW9uLCB0cnVlLCA0KX1cbiAgICAgIGZuIHJlYWRYKGJhdGNoIDogaTMyLCByb3cgOiBpMzIsIGNvbCA6IGkzMiwgY2hhbm5lbCA6IGkzMikgLT4gdmVjNDxmMzI+IHtcbiAgICAgICAgdmFyIHZhbHVlID0gdmVjNDxmMzI+KDAuMCk7XG4gICAgICAgIGlmIChjb2wgPj0wICYmIGNvbCA8IHVuaWZvcm1zLmluRGltc1sxXSkge1xuICAgICAgICAgIHZhbHVlID0gZ2V0WChiYXRjaCwgcm93LCBjb2wsIGNoYW5uZWwpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH1cblxuICAgICAgJHttYWluKCdpbmRleCcpfSB7XG4gICAgICAgIGxldCB3aWR0aDAgPSB1bmlmb3Jtcy5vdXRTaGFwZVszXSAvICR7dGhpcy5vdXRwdXRDb21wb25lbnR9O1xuICAgICAgICBsZXQgZDEgPSAoaW5kZXggJSB3aWR0aDApICogJHt0aGlzLm91dHB1dENvbXBvbmVudH07XG4gICAgICAgIHZhciBpbmRleDEgPSBpbmRleCAvIHdpZHRoMDtcbiAgICAgICAgbGV0IHdpZHRoMSA9IHVuaWZvcm1zLnZpcnR1YWxXaWR0aCAvICR7dGhpcy53b3JrUGVyVGhyZWFkfTtcbiAgICAgICAgbGV0IGMgPSAoaW5kZXgxICUgd2lkdGgxKSAqICR7dGhpcy53b3JrUGVyVGhyZWFkfTtcbiAgICAgICAgaW5kZXgxID0gaW5kZXgxIC8gd2lkdGgxO1xuICAgICAgICBsZXQgciA9IGluZGV4MSAlIHVuaWZvcm1zLm91dFNoYXBlWzFdO1xuICAgICAgICBsZXQgYmF0Y2ggPSBpbmRleDEgLyB1bmlmb3Jtcy5vdXRTaGFwZVsxXTtcblxuICAgICAgICBsZXQgeFJDQ29ybmVyID0gdmVjMjxpMzI+KHIsIGMpICogdmVjMjxpMzI+KCR7c3RyaWRlSGVpZ2h0fSwgJHtcbiAgICAgICAgc3RyaWRlV2lkdGh9KSAtIHVuaWZvcm1zLnBhZHM7XG5cbiAgICAgICAgbGV0IHhSQ29ybmVyID0geFJDQ29ybmVyLng7XG4gICAgICAgIGxldCB4Q0Nvcm5lciA9IHhSQ0Nvcm5lci55O1xuICAgICAgICB2YXIgeFZhbHMgOiBhcnJheTx2ZWM0PGYzMj4sICR7eE51bWJlcn0+O1xuICAgICAgICB2YXIgZG90UHJvZCA6IGFycmF5PHZlYzQ8ZjMyPiwgJHt0aGlzLndvcmtQZXJUaHJlYWR9PjtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAke3RoaXMud29ya1BlclRocmVhZH07IGkrKykge1xuICAgICAgICAgIGRvdFByb2RbaV0gPSB2ZWM0PGYzMj4oMC4wKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFVzZSBjb25zdGFudCBpbnN0ZWFkIG9mIHVuaWZvcm0gY2FuIGdpdmUgYmV0dGVyIHBlcmZvcm1hbmNlLlxuICAgICAgICBmb3IgKHZhciB3UiA9IDA7IHdSIDwgJHt0aGlzLmNvbnZJbmZvLmZpbHRlckhlaWdodH07IHdSID0gd1IgKyAxKSB7XG4gICAgICAgICAgbGV0IHhSID0geFJDb3JuZXIgKyB3UjtcbiAgICAgICAgICBpZiAoeFIgPj0wICYmIHhSIDwgdW5pZm9ybXMuaW5EaW1zWzBdKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICR7eE51bWJlcn07IGkrKykge1xuICAgICAgICAgICAgICB4VmFsc1tpXSA9IHJlYWRYKGJhdGNoLCB4UiwgeENDb3JuZXIgKyBpLCBkMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciB3QyA9IDA7IHdDIDwgJHt0aGlzLmNvbnZJbmZvLmZpbHRlcldpZHRofTsgd0MgPSB3QyArIDEpIHtcbiAgICAgICAgICAgICAgbGV0IHdWYWx1ZSA9IGdldFcod1IsIHdDLCBkMSwgMCk7XG4gICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJHt0aGlzLndvcmtQZXJUaHJlYWR9OyBpKyspIHtcbiAgICAgICAgICAgICAgICBkb3RQcm9kW2ldID0gZm1hKHhWYWxzW2kgKiAke1xuICAgICAgICBzdHJpZGVXaWR0aH0gKyB3Q10sIHdWYWx1ZSwgZG90UHJvZFtpXSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICR7dGhpcy53b3JrUGVyVGhyZWFkfTsgaSA9IGkgKyAxKSB7XG4gICAgICAgICAgbGV0IGNvb3JkcyA9IHZlYzQ8aTMyPihiYXRjaCwgciwgYyArIGksIGQxKTtcbiAgICAgICAgICBpZiAoY29vcmRzSW5Cb3VuZHM0RChjb29yZHMsIHVuaWZvcm1zLm91dFNoYXBlKSkge1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gZG90UHJvZFtpXTtcbiAgICAgICAgICAgICR7Ymlhc0FjdGl2YXRpb25TbmlwcGV0KHRoaXMuYWRkQmlhcywgdGhpcy5hY3RpdmF0aW9uKX1cbiAgICAgICAgICAgIHNldE91dHB1dEF0Q29vcmRzKGNvb3Jkc1swXSwgY29vcmRzWzFdLCBjb29yZHNbMl0sIGNvb3Jkc1szXSwgdmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIGA7XG4gICAgcmV0dXJuIHVzZXJDb2RlO1xuICB9XG59XG4iXX0=","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { activationFnSnippet, biasActivationSnippet } from './activation_util';\nimport { getMainHeaderString as main } from './webgpu_program';\nimport { computeDispatch, flatDispatchLayout } from './webgpu_util';\nexport class DepthwiseConv2DProgram {\n    constructor(convInfo, addBias = false, activation = null, hasPreluActivation = false) {\n        this.variableNames = ['x', 'W'];\n        this.uniforms = `pads : vec2<i32>, inDims : vec2<i32>, filterHeight : i32,\n      filterWidth : i32, strides : vec2<i32>, dilations : vec2<i32>,`;\n        // This is an experimental value.\n        this.workgroupSize = [256, 1, 1];\n        this.size = true;\n        this.outputShape = convInfo.outShape;\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize);\n        this.isChannelsLast = convInfo.dataFormat === 'channelsLast';\n        if (addBias) {\n            this.variableNames.push('bias');\n        }\n        if (hasPreluActivation) {\n            this.variableNames.push('preluActivationWeights');\n        }\n        this.convInfo = convInfo;\n        this.addBias = addBias;\n        this.activation = activation;\n        this.hasPreluActivation = hasPreluActivation;\n        this.shaderKey = `depthwise_${this.activation}_${this.isChannelsLast}`;\n    }\n    getUserCode() {\n        const getXSnippet = this.isChannelsLast ? 'getX(batch, xR, xC, d1);' :\n            'getX(batch, d1, xR, xC);';\n        const userCode = `\n      ${activationFnSnippet(this.activation, this.hasPreluActivation, false, 4)}\n\n      ${main('index')} {\n        if (index < uniforms.size) {\n          let coords = getOutputCoords();\n          let batch = coords[0];\n          let xRCCorner = vec2<i32>(coords.${this.isChannelsLast ? 'yz' : 'zw'}) * uniforms.strides - uniforms.pads;\n          let d2 = coords[${this.isChannelsLast ? 3 : 1}];\n          let channelMul = uniforms.wShape[3];\n          let d1 = d2 / channelMul;\n          let q = d2 % channelMul;\n\n          let inputRowStart = xRCCorner.x;\n          let inputColStart = xRCCorner.y;\n          let inputRowEnd = inputRowStart + uniforms.filterHeight *\n              uniforms.dilations[0];\n          let inputColEnd = inputColStart + uniforms.filterWidth *\n              uniforms.dilations[1];\n\n          // Convolve x(?, ?, d1)|x(d1, ?, ?) with w(:, :, d1, q) to get\n          // y(yR, yC, d2)|y(d2, yR, yC). ? = to be determined. : = across all\n          // values in that axis. x(?, ?, d1) and y(yR, yC, d2) is for NHWC.\n          // x(d1, ?, ?) and y(d2, yR, yC) is for NCHW.\n          var value = 0.0;\n\n          // Extract if checking out of for loop for performance.\n          if (inputRowStart >= 0 && inputColStart >= 0 &&\n            inputRowEnd < uniforms.inDims[0] &&\n                inputColEnd < uniforms.inDims[1]) {\n              for (var wR = 0; wR < uniforms.filterHeight; wR = wR + 1) {\n                let xR = inputRowStart + wR * uniforms.dilations[0];\n\n                for (var wC = 0; wC < uniforms.filterWidth; wC = wC + 1) {\n                  let xC = inputColStart + wC * uniforms.dilations[1];\n\n                  let xVal = ${getXSnippet};\n                  let wVal = getW(wR, wC, d1, q);\n                  value = value + xVal * wVal;\n                }\n              }\n            } else {\n              for (var wR = 0; wR < uniforms.filterHeight; wR = wR + 1) {\n                let xR = inputRowStart + wR * uniforms.dilations[0];\n\n                if (xR < 0 || xR >= uniforms.inDims[0]) {\n                  continue;\n                }\n\n                for (var wC = 0; wC < uniforms.filterWidth; wC = wC + 1) {\n                  let xC = inputColStart + wC * uniforms.dilations[1];\n\n                  if (xC < 0 || xC >= uniforms.inDims[1]) {\n                    continue;\n                  }\n\n                  let xVal = ${getXSnippet};\n                  let wVal = getW(wR, wC, d1, q);\n                  value = value + xVal * wVal;\n                }\n              }\n            }\n            ${biasActivationSnippet(this.addBias, this.activation)}\n          setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], value);\n        }\n      }\n    `;\n        return userCode;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVwdGh3aXNlX2NvbnYyZF93ZWJncHUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9kZXB0aHdpc2VfY29udjJkX3dlYmdwdS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFJSCxPQUFPLEVBQUMsbUJBQW1CLEVBQUUscUJBQXFCLEVBQUMsTUFBTSxtQkFBbUIsQ0FBQztBQUM3RSxPQUFPLEVBQUMsbUJBQW1CLElBQUksSUFBSSxFQUFnQixNQUFNLGtCQUFrQixDQUFDO0FBQzVFLE9BQU8sRUFBQyxlQUFlLEVBQUUsa0JBQWtCLEVBQUMsTUFBTSxlQUFlLENBQUM7QUFFbEUsTUFBTSxPQUFPLHNCQUFzQjtJQWlCakMsWUFDSSxRQUFpQyxFQUFFLE9BQU8sR0FBRyxLQUFLLEVBQ2xELGFBQXNDLElBQUksRUFBRSxrQkFBa0IsR0FBRyxLQUFLO1FBZDFFLGtCQUFhLEdBQUcsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFDM0IsYUFBUSxHQUFHO3FFQUN3RCxDQUFDO1FBQ3BFLGlDQUFpQztRQUNqQyxrQkFBYSxHQUE2QixDQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFNdEQsU0FBSSxHQUFHLElBQUksQ0FBQztRQUtWLElBQUksQ0FBQyxXQUFXLEdBQUcsUUFBUSxDQUFDLFFBQVEsQ0FBQztRQUNyQyxJQUFJLENBQUMsY0FBYyxHQUFHLGtCQUFrQixDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUMzRCxJQUFJLENBQUMsUUFBUSxHQUFHLGVBQWUsQ0FDM0IsSUFBSSxDQUFDLGNBQWMsRUFBRSxJQUFJLENBQUMsV0FBVyxFQUFFLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQztRQUMvRCxJQUFJLENBQUMsY0FBYyxHQUFHLFFBQVEsQ0FBQyxVQUFVLEtBQUssY0FBYyxDQUFDO1FBRTdELElBQUksT0FBTyxFQUFFO1lBQ1gsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7U0FDakM7UUFDRCxJQUFJLGtCQUFrQixFQUFFO1lBQ3RCLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLHdCQUF3QixDQUFDLENBQUM7U0FDbkQ7UUFFRCxJQUFJLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQztRQUN6QixJQUFJLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQztRQUN2QixJQUFJLENBQUMsVUFBVSxHQUFHLFVBQVUsQ0FBQztRQUM3QixJQUFJLENBQUMsa0JBQWtCLEdBQUcsa0JBQWtCLENBQUM7UUFDN0MsSUFBSSxDQUFDLFNBQVMsR0FBRyxhQUFhLElBQUksQ0FBQyxVQUFVLElBQUksSUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFDO0lBQ3pFLENBQUM7SUFFRCxXQUFXO1FBQ1QsTUFBTSxXQUFXLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsMEJBQTBCLENBQUMsQ0FBQztZQUM1QiwwQkFBMEIsQ0FBQztRQUVyRSxNQUFNLFFBQVEsR0FBRztRQUNiLG1CQUFtQixDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDLGtCQUFrQixFQUFFLEtBQUssRUFBRSxDQUFDLENBQUM7O1FBRXZFLElBQUksQ0FBQyxPQUFPLENBQUM7Ozs7NkNBS2IsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJOzRCQUNiLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzsrQkE0QnhCLFdBQVc7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OytCQW9CWCxXQUFXOzs7Ozs7Y0FNNUIscUJBQXFCLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDOzs7O0tBSTdELENBQUM7UUFDRixPQUFPLFFBQVEsQ0FBQztJQUNsQixDQUFDO0NBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7YmFja2VuZF91dGlsfSBmcm9tICdAdGVuc29yZmxvdy90ZmpzLWNvcmUnO1xuXG5pbXBvcnQge2FjdGl2YXRpb25GblNuaXBwZXQsIGJpYXNBY3RpdmF0aW9uU25pcHBldH0gZnJvbSAnLi9hY3RpdmF0aW9uX3V0aWwnO1xuaW1wb3J0IHtnZXRNYWluSGVhZGVyU3RyaW5nIGFzIG1haW4sIFdlYkdQVVByb2dyYW19IGZyb20gJy4vd2ViZ3B1X3Byb2dyYW0nO1xuaW1wb3J0IHtjb21wdXRlRGlzcGF0Y2gsIGZsYXREaXNwYXRjaExheW91dH0gZnJvbSAnLi93ZWJncHVfdXRpbCc7XG5cbmV4cG9ydCBjbGFzcyBEZXB0aHdpc2VDb252MkRQcm9ncmFtIGltcGxlbWVudHMgV2ViR1BVUHJvZ3JhbSB7XG4gIG91dHB1dFNoYXBlOiBudW1iZXJbXTtcbiAgc2hhZGVyS2V5OiBzdHJpbmc7XG4gIGRpc3BhdGNoTGF5b3V0OiB7eDogbnVtYmVyW10sIHk/OiBudW1iZXJbXSwgej86IG51bWJlcltdfTtcbiAgZGlzcGF0Y2g6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXTtcbiAgdmFyaWFibGVOYW1lcyA9IFsneCcsICdXJ107XG4gIHVuaWZvcm1zID0gYHBhZHMgOiB2ZWMyPGkzMj4sIGluRGltcyA6IHZlYzI8aTMyPiwgZmlsdGVySGVpZ2h0IDogaTMyLFxuICAgICAgZmlsdGVyV2lkdGggOiBpMzIsIHN0cmlkZXMgOiB2ZWMyPGkzMj4sIGRpbGF0aW9ucyA6IHZlYzI8aTMyPixgO1xuICAvLyBUaGlzIGlzIGFuIGV4cGVyaW1lbnRhbCB2YWx1ZS5cbiAgd29ya2dyb3VwU2l6ZTogW251bWJlciwgbnVtYmVyLCBudW1iZXJdID0gWzI1NiwgMSwgMV07XG4gIGNvbnZJbmZvOiBiYWNrZW5kX3V0aWwuQ29udjJESW5mbztcbiAgYWRkQmlhczogYm9vbGVhbjtcbiAgYWN0aXZhdGlvbjogYmFja2VuZF91dGlsLkFjdGl2YXRpb247XG4gIGhhc1ByZWx1QWN0aXZhdGlvbjogYm9vbGVhbjtcbiAgaXNDaGFubmVsc0xhc3Q6IGJvb2xlYW47XG4gIHNpemUgPSB0cnVlO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgICAgY29udkluZm86IGJhY2tlbmRfdXRpbC5Db252MkRJbmZvLCBhZGRCaWFzID0gZmFsc2UsXG4gICAgICBhY3RpdmF0aW9uOiBiYWNrZW5kX3V0aWwuQWN0aXZhdGlvbiA9IG51bGwsIGhhc1ByZWx1QWN0aXZhdGlvbiA9IGZhbHNlKSB7XG4gICAgdGhpcy5vdXRwdXRTaGFwZSA9IGNvbnZJbmZvLm91dFNoYXBlO1xuICAgIHRoaXMuZGlzcGF0Y2hMYXlvdXQgPSBmbGF0RGlzcGF0Y2hMYXlvdXQodGhpcy5vdXRwdXRTaGFwZSk7XG4gICAgdGhpcy5kaXNwYXRjaCA9IGNvbXB1dGVEaXNwYXRjaChcbiAgICAgICAgdGhpcy5kaXNwYXRjaExheW91dCwgdGhpcy5vdXRwdXRTaGFwZSwgdGhpcy53b3JrZ3JvdXBTaXplKTtcbiAgICB0aGlzLmlzQ2hhbm5lbHNMYXN0ID0gY29udkluZm8uZGF0YUZvcm1hdCA9PT0gJ2NoYW5uZWxzTGFzdCc7XG5cbiAgICBpZiAoYWRkQmlhcykge1xuICAgICAgdGhpcy52YXJpYWJsZU5hbWVzLnB1c2goJ2JpYXMnKTtcbiAgICB9XG4gICAgaWYgKGhhc1ByZWx1QWN0aXZhdGlvbikge1xuICAgICAgdGhpcy52YXJpYWJsZU5hbWVzLnB1c2goJ3ByZWx1QWN0aXZhdGlvbldlaWdodHMnKTtcbiAgICB9XG5cbiAgICB0aGlzLmNvbnZJbmZvID0gY29udkluZm87XG4gICAgdGhpcy5hZGRCaWFzID0gYWRkQmlhcztcbiAgICB0aGlzLmFjdGl2YXRpb24gPSBhY3RpdmF0aW9uO1xuICAgIHRoaXMuaGFzUHJlbHVBY3RpdmF0aW9uID0gaGFzUHJlbHVBY3RpdmF0aW9uO1xuICAgIHRoaXMuc2hhZGVyS2V5ID0gYGRlcHRod2lzZV8ke3RoaXMuYWN0aXZhdGlvbn1fJHt0aGlzLmlzQ2hhbm5lbHNMYXN0fWA7XG4gIH1cblxuICBnZXRVc2VyQ29kZSgpOiBzdHJpbmcge1xuICAgIGNvbnN0IGdldFhTbmlwcGV0ID0gdGhpcy5pc0NoYW5uZWxzTGFzdCA/ICdnZXRYKGJhdGNoLCB4UiwgeEMsIGQxKTsnIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZ2V0WChiYXRjaCwgZDEsIHhSLCB4Qyk7JztcblxuICAgIGNvbnN0IHVzZXJDb2RlID0gYFxuICAgICAgJHthY3RpdmF0aW9uRm5TbmlwcGV0KHRoaXMuYWN0aXZhdGlvbiwgdGhpcy5oYXNQcmVsdUFjdGl2YXRpb24sIGZhbHNlLCA0KX1cblxuICAgICAgJHttYWluKCdpbmRleCcpfSB7XG4gICAgICAgIGlmIChpbmRleCA8IHVuaWZvcm1zLnNpemUpIHtcbiAgICAgICAgICBsZXQgY29vcmRzID0gZ2V0T3V0cHV0Q29vcmRzKCk7XG4gICAgICAgICAgbGV0IGJhdGNoID0gY29vcmRzWzBdO1xuICAgICAgICAgIGxldCB4UkNDb3JuZXIgPSB2ZWMyPGkzMj4oY29vcmRzLiR7XG4gICAgICAgIHRoaXMuaXNDaGFubmVsc0xhc3QgPyAneXonIDogJ3p3J30pICogdW5pZm9ybXMuc3RyaWRlcyAtIHVuaWZvcm1zLnBhZHM7XG4gICAgICAgICAgbGV0IGQyID0gY29vcmRzWyR7dGhpcy5pc0NoYW5uZWxzTGFzdCA/IDMgOiAxfV07XG4gICAgICAgICAgbGV0IGNoYW5uZWxNdWwgPSB1bmlmb3Jtcy53U2hhcGVbM107XG4gICAgICAgICAgbGV0IGQxID0gZDIgLyBjaGFubmVsTXVsO1xuICAgICAgICAgIGxldCBxID0gZDIgJSBjaGFubmVsTXVsO1xuXG4gICAgICAgICAgbGV0IGlucHV0Um93U3RhcnQgPSB4UkNDb3JuZXIueDtcbiAgICAgICAgICBsZXQgaW5wdXRDb2xTdGFydCA9IHhSQ0Nvcm5lci55O1xuICAgICAgICAgIGxldCBpbnB1dFJvd0VuZCA9IGlucHV0Um93U3RhcnQgKyB1bmlmb3Jtcy5maWx0ZXJIZWlnaHQgKlxuICAgICAgICAgICAgICB1bmlmb3Jtcy5kaWxhdGlvbnNbMF07XG4gICAgICAgICAgbGV0IGlucHV0Q29sRW5kID0gaW5wdXRDb2xTdGFydCArIHVuaWZvcm1zLmZpbHRlcldpZHRoICpcbiAgICAgICAgICAgICAgdW5pZm9ybXMuZGlsYXRpb25zWzFdO1xuXG4gICAgICAgICAgLy8gQ29udm9sdmUgeCg/LCA/LCBkMSl8eChkMSwgPywgPykgd2l0aCB3KDosIDosIGQxLCBxKSB0byBnZXRcbiAgICAgICAgICAvLyB5KHlSLCB5QywgZDIpfHkoZDIsIHlSLCB5QykuID8gPSB0byBiZSBkZXRlcm1pbmVkLiA6ID0gYWNyb3NzIGFsbFxuICAgICAgICAgIC8vIHZhbHVlcyBpbiB0aGF0IGF4aXMuIHgoPywgPywgZDEpIGFuZCB5KHlSLCB5QywgZDIpIGlzIGZvciBOSFdDLlxuICAgICAgICAgIC8vIHgoZDEsID8sID8pIGFuZCB5KGQyLCB5UiwgeUMpIGlzIGZvciBOQ0hXLlxuICAgICAgICAgIHZhciB2YWx1ZSA9IDAuMDtcblxuICAgICAgICAgIC8vIEV4dHJhY3QgaWYgY2hlY2tpbmcgb3V0IG9mIGZvciBsb29wIGZvciBwZXJmb3JtYW5jZS5cbiAgICAgICAgICBpZiAoaW5wdXRSb3dTdGFydCA+PSAwICYmIGlucHV0Q29sU3RhcnQgPj0gMCAmJlxuICAgICAgICAgICAgaW5wdXRSb3dFbmQgPCB1bmlmb3Jtcy5pbkRpbXNbMF0gJiZcbiAgICAgICAgICAgICAgICBpbnB1dENvbEVuZCA8IHVuaWZvcm1zLmluRGltc1sxXSkge1xuICAgICAgICAgICAgICBmb3IgKHZhciB3UiA9IDA7IHdSIDwgdW5pZm9ybXMuZmlsdGVySGVpZ2h0OyB3UiA9IHdSICsgMSkge1xuICAgICAgICAgICAgICAgIGxldCB4UiA9IGlucHV0Um93U3RhcnQgKyB3UiAqIHVuaWZvcm1zLmRpbGF0aW9uc1swXTtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIHdDID0gMDsgd0MgPCB1bmlmb3Jtcy5maWx0ZXJXaWR0aDsgd0MgPSB3QyArIDEpIHtcbiAgICAgICAgICAgICAgICAgIGxldCB4QyA9IGlucHV0Q29sU3RhcnQgKyB3QyAqIHVuaWZvcm1zLmRpbGF0aW9uc1sxXTtcblxuICAgICAgICAgICAgICAgICAgbGV0IHhWYWwgPSAke2dldFhTbmlwcGV0fTtcbiAgICAgICAgICAgICAgICAgIGxldCB3VmFsID0gZ2V0Vyh3Uiwgd0MsIGQxLCBxKTtcbiAgICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUgKyB4VmFsICogd1ZhbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGZvciAodmFyIHdSID0gMDsgd1IgPCB1bmlmb3Jtcy5maWx0ZXJIZWlnaHQ7IHdSID0gd1IgKyAxKSB7XG4gICAgICAgICAgICAgICAgbGV0IHhSID0gaW5wdXRSb3dTdGFydCArIHdSICogdW5pZm9ybXMuZGlsYXRpb25zWzBdO1xuXG4gICAgICAgICAgICAgICAgaWYgKHhSIDwgMCB8fCB4UiA+PSB1bmlmb3Jtcy5pbkRpbXNbMF0pIHtcbiAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZvciAodmFyIHdDID0gMDsgd0MgPCB1bmlmb3Jtcy5maWx0ZXJXaWR0aDsgd0MgPSB3QyArIDEpIHtcbiAgICAgICAgICAgICAgICAgIGxldCB4QyA9IGlucHV0Q29sU3RhcnQgKyB3QyAqIHVuaWZvcm1zLmRpbGF0aW9uc1sxXTtcblxuICAgICAgICAgICAgICAgICAgaWYgKHhDIDwgMCB8fCB4QyA+PSB1bmlmb3Jtcy5pbkRpbXNbMV0pIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgIGxldCB4VmFsID0gJHtnZXRYU25pcHBldH07XG4gICAgICAgICAgICAgICAgICBsZXQgd1ZhbCA9IGdldFcod1IsIHdDLCBkMSwgcSk7XG4gICAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlICsgeFZhbCAqIHdWYWw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAke2JpYXNBY3RpdmF0aW9uU25pcHBldCh0aGlzLmFkZEJpYXMsIHRoaXMuYWN0aXZhdGlvbil9XG4gICAgICAgICAgc2V0T3V0cHV0QXRDb29yZHMoY29vcmRzWzBdLCBjb29yZHNbMV0sIGNvb3Jkc1syXSwgY29vcmRzWzNdLCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICBgO1xuICAgIHJldHVybiB1c2VyQ29kZTtcbiAgfVxufVxuIl19","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { backend_util, DepthwiseConv2dNative } from '@tensorflow/tfjs-core';\nimport { DepthwiseConv2DNCHWSharedProgram } from '../depthwise_conv2d_nchw_shared_webgpu';\nimport { DepthwiseConv2DVec4Program } from '../depthwise_conv2d_vec4_webgpu';\nimport { DepthwiseConv2DProgram } from '../depthwise_conv2d_webgpu';\nexport function depthwiseConv2dNative(args) {\n    const { inputs, backend, attrs } = args;\n    const { x, filter } = inputs;\n    const { strides, pad, dataFormat, dilations, dimRoundingMode } = attrs;\n    const $dataFormat = backend_util.convertConv2DDataFormat(dataFormat);\n    let $dilations = dilations;\n    if ($dilations == null) {\n        $dilations = [1, 1];\n    }\n    const convInfo = backend_util.computeConv2DInfo(x.shape, filter.shape, strides, $dilations, pad, dimRoundingMode, true /* depthwise */, $dataFormat);\n    const dimensions = [\n        { type: 'int32', data: [convInfo.padInfo.top, convInfo.padInfo.left] },\n        { type: 'int32', data: [convInfo.inHeight, convInfo.inWidth] },\n    ];\n    const isChannelsLast = convInfo.dataFormat === 'channelsLast';\n    let program;\n    if (!isChannelsLast && convInfo.inHeight > 16 && convInfo.inWidth > 16 &&\n        convInfo.strideHeight === 1 && convInfo.strideWidth === 1 &&\n        convInfo.dilationWidth === 1 && convInfo.dilationHeight === 1 &&\n        convInfo.inChannels === convInfo.outChannels) {\n        program = new DepthwiseConv2DNCHWSharedProgram(convInfo.outShape, convInfo.filterHeight, convInfo.filterWidth);\n    }\n    else if (isChannelsLast && convInfo.outHeight > 4 && convInfo.outWidth > 4 &&\n        convInfo.strideWidth <= 2 &&\n        convInfo.inChannels === convInfo.outChannels &&\n        convInfo.dilationHeight === 1 && convInfo.dilationWidth === 1 &&\n        convInfo.inChannels % 4 === 0) {\n        program = new DepthwiseConv2DVec4Program(convInfo);\n        dimensions.push({ type: 'int32', data: [program.virtualWidth] });\n    }\n    else {\n        program = new DepthwiseConv2DProgram(convInfo);\n        dimensions.push({ type: 'int32', data: [convInfo.filterHeight] }, { type: 'int32', data: [convInfo.filterWidth] }, { type: 'int32', data: [convInfo.strideHeight, convInfo.strideWidth] }, {\n            type: 'int32',\n            data: [convInfo.dilationHeight, convInfo.dilationWidth]\n        });\n    }\n    return backend.runWebGPUProgram(program, [x, filter], x.dtype, dimensions);\n}\nexport const depthwiseConv2dNativeConfig = {\n    kernelName: DepthwiseConv2dNative,\n    backendName: 'webgpu',\n    kernelFunc: depthwiseConv2dNative,\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRGVwdGh3aXNlQ29udjJkTmF0aXZlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMva2VybmVscy9EZXB0aHdpc2VDb252MmROYXRpdmUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUFDLFlBQVksRUFBRSxxQkFBcUIsRUFBb0YsTUFBTSx1QkFBdUIsQ0FBQztBQUc3SixPQUFPLEVBQUMsZ0NBQWdDLEVBQUMsTUFBTSx3Q0FBd0MsQ0FBQztBQUN4RixPQUFPLEVBQUMsMEJBQTBCLEVBQUMsTUFBTSxpQ0FBaUMsQ0FBQztBQUMzRSxPQUFPLEVBQUMsc0JBQXNCLEVBQUMsTUFBTSw0QkFBNEIsQ0FBQztBQUVsRSxNQUFNLFVBQVUscUJBQXFCLENBQUMsSUFJckM7SUFDQyxNQUFNLEVBQUMsTUFBTSxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUMsR0FBRyxJQUFJLENBQUM7SUFDdEMsTUFBTSxFQUFDLENBQUMsRUFBRSxNQUFNLEVBQUMsR0FBRyxNQUFNLENBQUM7SUFDM0IsTUFBTSxFQUFDLE9BQU8sRUFBRSxHQUFHLEVBQUUsVUFBVSxFQUFFLFNBQVMsRUFBRSxlQUFlLEVBQUMsR0FBRyxLQUFLLENBQUM7SUFDckUsTUFBTSxXQUFXLEdBQUcsWUFBWSxDQUFDLHVCQUF1QixDQUFDLFVBQVUsQ0FBQyxDQUFDO0lBQ3JFLElBQUksVUFBVSxHQUFHLFNBQVMsQ0FBQztJQUMzQixJQUFJLFVBQVUsSUFBSSxJQUFJLEVBQUU7UUFDdEIsVUFBVSxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0tBQ3JCO0lBRUQsTUFBTSxRQUFRLEdBQUcsWUFBWSxDQUFDLGlCQUFpQixDQUMzQyxDQUFDLENBQUMsS0FBeUMsRUFDM0MsTUFBTSxDQUFDLEtBQXlDLEVBQUUsT0FBTyxFQUFFLFVBQVUsRUFDckUsR0FBRyxF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Q29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge2JhY2tlbmRfdXRpbCwgRGVwdGh3aXNlQ29udjJkTmF0aXZlLCBEZXB0aHdpc2VDb252MmROYXRpdmVBdHRycywgRGVwdGh3aXNlQ29udjJkTmF0aXZlSW5wdXRzLCBLZXJuZWxDb25maWcsIEtlcm5lbEZ1bmN9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7V2ViR1BVQmFja2VuZH0gZnJvbSAnLi4vYmFja2VuZF93ZWJncHUnO1xuaW1wb3J0IHtEZXB0aHdpc2VDb252MkROQ0hXU2hhcmVkUHJvZ3JhbX0gZnJvbSAnLi4vZGVwdGh3aXNlX2NvbnYyZF9uY2h3X3NoYXJlZF93ZWJncHUnO1xuaW1wb3J0IHtEZXB0aHdpc2VDb252MkRWZWM0UHJvZ3JhbX0gZnJvbSAnLi4vZGVwdGh3aXNlX2NvbnYyZF92ZWM0X3dlYmdwdSc7XG5pbXBvcnQge0RlcHRod2lzZUNvbnYyRFByb2dyYW19IGZyb20gJy4uL2RlcHRod2lzZV9jb252MmRfd2ViZ3B1JztcblxuZXhwb3J0IGZ1bmN0aW9uIGRlcHRod2lzZUNvbnYyZE5hdGl2ZShhcmdzOiB7XG4gIGlucHV0czogRGVwdGh3aXNlQ29udjJkTmF0aXZlSW5wdXRzLFxuICBhdHRyczogRGVwdGh3aXNlQ29udjJkTmF0aXZlQXR0cnMsXG4gIGJhY2tlbmQ6IFdlYkdQVUJhY2tlbmRcbn0pIHtcbiAgY29uc3Qge2lucHV0cywgYmFja2VuZCwgYXR0cnN9ID0gYXJncztcbiAgY29uc3Qge3gsIGZpbHRlcn0gPSBpbnB1dHM7XG4gIGNvbnN0IHtzdHJpZGVzLCBwYWQsIGRhdGFGb3JtYXQsIGRpbGF0aW9ucywgZGltUm91bmRpbmdNb2RlfSA9IGF0dHJzO1xuICBjb25zdCAkZGF0YUZvcm1hdCA9IGJhY2tlbmRfdXRpbC5jb252ZXJ0Q29udjJERGF0YUZvcm1hdChkYXRhRm9ybWF0KTtcbiAgbGV0ICRkaWxhdGlvbnMgPSBkaWxhdGlvbnM7XG4gIGlmICgkZGlsYXRpb25zID09IG51bGwpIHtcbiAgICAkZGlsYXRpb25zID0gWzEsIDFdO1xuICB9XG5cbiAgY29uc3QgY29udkluZm8gPSBiYWNrZW5kX3V0aWwuY29tcHV0ZUNvbnYyREluZm8oXG4gICAgICB4LnNoYXBlIGFzIFtudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXJdLFxuICAgICAgZmlsdGVyLnNoYXBlIGFzIFtudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXJdLCBzdHJpZGVzLCAkZGlsYXRpb25zLFxuICAgICAgcGFkLCBkaW1Sb3VuZGluZ01vZGUsIHRydWUgLyogZGVwdGh3aXNlICovLCAkZGF0YUZvcm1hdCk7XG4gIGNvbnN0IGRpbWVuc2lvbnMgPSBbXG4gICAge3R5cGU6ICdpbnQzMicsIGRhdGE6IFtjb252SW5mby5wYWRJbmZvLnRvcCwgY29udkluZm8ucGFkSW5mby5sZWZ0XX0sXG4gICAge3R5cGU6ICdpbnQzMicsIGRhdGE6IFtjb252SW5mby5pbkhlaWdodCwgY29udkluZm8uaW5XaWR0aF19LFxuICBdO1xuXG4gIGNvbnN0IGlzQ2hhbm5lbHNMYXN0ID0gY29udkluZm8uZGF0YUZvcm1hdCA9PT0gJ2NoYW5uZWxzTGFzdCc7XG4gIGxldCBwcm9ncmFtOiBEZXB0aHdpc2VDb252MkRQcm9ncmFtfERlcHRod2lzZUNvbnYyRFZlYzRQcm9ncmFtfFxuICAgICAgRGVwdGh3aXNlQ29udjJETkNIV1NoYXJlZFByb2dyYW07XG4gIGlmICghaXNDaGFubmVsc0xhc3QgJiYgY29udkluZm8uaW5IZWlnaHQgPiAxNiAmJiBjb252SW5mby5pbldpZHRoID4gMTYgJiZcbiAgICAgIGNvbnZJbmZvLnN0cmlkZUhlaWdodCA9PT0gMSAmJiBjb252SW5mby5zdHJpZGVXaWR0aCA9PT0gMSAmJlxuICAgICAgY29udkluZm8uZGlsYXRpb25XaWR0aCA9PT0gMSAmJiBjb252SW5mby5kaWxhdGlvbkhlaWdodCA9PT0gMSAmJlxuICAgICAgY29udkluZm8uaW5DaGFubmVscyA9PT0gY29udkluZm8ub3V0Q2hhbm5lbHMpIHtcbiAgICBwcm9ncmFtID0gbmV3IERlcHRod2lzZUNvbnYyRE5DSFdTaGFyZWRQcm9ncmFtKFxuICAgICAgICBjb252SW5mby5vdXRTaGFwZSwgY29udkluZm8uZmlsdGVySGVpZ2h0LCBjb252SW5mby5maWx0ZXJXaWR0aCk7XG4gIH0gZWxzZSBpZiAoXG4gICAgICBpc0NoYW5uZWxzTGFzdCAmJiBjb252SW5mby5vdXRIZWlnaHQgPiA0ICYmIGNvbnZJbmZvLm91dFdpZHRoID4gNCAmJlxuICAgICAgY29udkluZm8uc3RyaWRlV2lkdGggPD0gMiAmJlxuICAgICAgY29udkluZm8uaW5DaGFubmVscyA9PT0gY29udkluZm8ub3V0Q2hhbm5lbHMgJiZcbiAgICAgIGNvbnZJbmZvLmRpbGF0aW9uSGVpZ2h0ID09PSAxICYmIGNvbnZJbmZvLmRpbGF0aW9uV2lkdGggPT09IDEgJiZcbiAgICAgIGNvbnZJbmZvLmluQ2hhbm5lbHMgJSA0ID09PSAwKSB7XG4gICAgcHJvZ3JhbSA9IG5ldyBEZXB0aHdpc2VDb252MkRWZWM0UHJvZ3JhbShjb252SW5mbyk7XG4gICAgZGltZW5zaW9ucy5wdXNoKHt0eXBlOiAnaW50MzInLCBkYXRhOiBbcHJvZ3JhbS52aXJ0dWFsV2lkdGhdfSk7XG4gIH0gZWxzZSB7XG4gICAgcHJvZ3JhbSA9IG5ldyBEZXB0aHdpc2VDb252MkRQcm9ncmFtKGNvbnZJbmZvKTtcbiAgICBkaW1lbnNpb25zLnB1c2goXG4gICAgICAgIHt0eXBlOiAnaW50MzInLCBkYXRhOiBbY29udkluZm8uZmlsdGVySGVpZ2h0XX0sXG4gICAgICAgIHt0eXBlOiAnaW50MzInLCBkYXRhOiBbY29udkluZm8uZmlsdGVyV2lkdGhdfSxcbiAgICAgICAge3R5cGU6ICdpbnQzMicsIGRhdGE6IFtjb252SW5mby5zdHJpZGVIZWlnaHQsIGNvbnZJbmZvLnN0cmlkZVdpZHRoXX0sIHtcbiAgICAgICAgICB0eXBlOiAnaW50MzInLFxuICAgICAgICAgIGRhdGE6IFtjb252SW5mby5kaWxhdGlvbkhlaWdodCwgY29udkluZm8uZGlsYXRpb25XaWR0aF1cbiAgICAgICAgfSk7XG4gIH1cblxuICByZXR1cm4gYmFja2VuZC5ydW5XZWJHUFVQcm9ncmFtKHByb2dyYW0sIFt4LCBmaWx0ZXJdLCB4LmR0eXBlLCBkaW1lbnNpb25zKTtcbn1cblxuZXhwb3J0IGNvbnN0IGRlcHRod2lzZUNvbnYyZE5hdGl2ZUNvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBEZXB0aHdpc2VDb252MmROYXRpdmUsXG4gIGJhY2tlbmROYW1lOiAnd2ViZ3B1JyxcbiAga2VybmVsRnVuYzogZGVwdGh3aXNlQ29udjJkTmF0aXZlIGFzIHVua25vd24gYXMgS2VybmVsRnVuYyxcbn07XG4iXX0=","/**\n * @license\n * Copyright 2023 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { getMainHeaderString as main } from './webgpu_program';\nimport { computeDispatch, flatDispatchLayout } from './webgpu_util';\nexport class DepthwiseConv2DDerFilterProgram {\n    constructor(convInfo) {\n        this.variableNames = ['x', 'dy'];\n        this.uniforms = `strides : vec2<i32>, pads : vec2<i32>, filterDims : vec2<i32>, outHeight : i32,\n      outWidth : i32, inHeight : i32, inWidth : i32, batchSize : i32, channelMul : i32,`;\n        this.workgroupSize = [64, 1, 1];\n        this.size = true;\n        this.outputShape = convInfo.filterShape;\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize);\n        this.shaderKey = `depthwise_conv2d_backprop_filter`;\n    }\n    getUserCode() {\n        const userCode = `\n      ${main('index')} {\n      if (index < uniforms.size) {\n        let coords = getCoordsFromIndex(index);\n        let wR = coords[0];\n        let wC = coords[1];\n        let d1 = coords[2];\n        let dm = coords[3];\n        let d2 = d1 * uniforms.channelMul + dm;\n\n        var dotProd = 0.0;\n        for (var b = 0; b < uniforms.batchSize; b++) {\n          for (var yR = 0; yR < uniforms.outHeight; yR++) {\n            let xR = wR + yR * uniforms.strides[0] - uniforms.pads[0];\n\n            if (xR < 0 || xR >= uniforms.inHeight) {\n              continue;\n            }\n\n            for (var yC = 0; yC < uniforms.outWidth; yC++) {\n              let xC = wC + yC * uniforms.strides[1] - uniforms.pads[1];\n\n              if (xC < 0 || xC >= uniforms.inWidth) {\n                continue;\n              }\n\n              let dyValue = getDy(b, yR, yC, d2);\n              let xValue = getX(b, xR, xC, d1);\n              dotProd += xValue * dyValue;\n            }\n          }\n        }\n        setOutputAtIndex(index, dotProd);\n      }\n    }\n    `;\n        return userCode;\n    }\n}\nexport class DepthwiseConv2DDerInputProgram {\n    constructor(convInfo) {\n        this.variableNames = ['dy', 'W'];\n        this.uniforms = `strides : vec2<i32>, pads : vec2<i32>, filterDims : vec2<i32>,\n       outHeight : i32, outWidth : i32, channelMul : i32,`;\n        this.workgroupSize = [64, 1, 1];\n        this.size = true;\n        this.outputShape = convInfo.inShape;\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize);\n        this.shaderKey = `depthwise_conv2d_backprop_input`;\n    }\n    getUserCode() {\n        const userCode = `\n      ${main('index')} {\n      if (index < uniforms.size) {\n        let coords = getCoordsFromIndex(index);\n        let batch = coords[0];\n        let d1 = coords[3];\n        let dyCorner = coords.yz - uniforms.pads;\n        let dyRCorner = dyCorner.x;\n        let dyCCorner = dyCorner.y;\n\n        var dotProd = 0.0;\n        for (var wR = 0; wR < uniforms.filterDims[0]; wR++) {\n          let dyR = f32(dyRCorner + wR) / f32(uniforms.strides[0]);\n\n          if (dyR < 0.0 || dyR >= f32(uniforms.outHeight) || fract(dyR) > 0.0) {\n            continue;\n          }\n\n          let idyR = i32(dyR);\n          let wRPerm = uniforms.filterDims[0] - 1 - wR;\n\n          for (var wC = 0; wC < uniforms.filterDims[1]; wC++) {\n            let dyC = f32(dyCCorner + wC) / f32(uniforms.strides[1]);\n\n            if (dyC < 0.0 || dyC >= f32(uniforms.outWidth) || fract(dyC) > 0.0) {\n              continue;\n            }\n\n            let idyC = i32(dyC);\n            let wCPerm = uniforms.filterDims[1] - 1 - wC;\n\n            for (var dm = 0; dm < uniforms.channelMul; dm++) {\n              let d2 = d1 * uniforms.channelMul + dm;\n              let xValue = getDy(batch, idyR, idyC, d2);\n              let wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutputAtIndex(index, dotProd);\n      }\n    }\n    `;\n        return userCode;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29udl9iYWNrcHJvcF9kZXB0aHdpc2Vfd2ViZ3B1LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMvY29udl9iYWNrcHJvcF9kZXB0aHdpc2Vfd2ViZ3B1LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUdILE9BQU8sRUFBQyxtQkFBbUIsSUFBSSxJQUFJLEVBQWdCLE1BQU0sa0JBQWtCLENBQUM7QUFDNUUsT0FBTyxFQUFDLGVBQWUsRUFBRSxrQkFBa0IsRUFBQyxNQUFNLGVBQWUsQ0FBQztBQUVsRSxNQUFNLE9BQU8sK0JBQStCO0lBWTFDLFlBQVksUUFBaUM7UUFQN0Msa0JBQWEsR0FBRyxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsQ0FBQztRQUM1QixhQUFRLEdBQ0o7d0ZBQ2tGLENBQUM7UUFDdkYsa0JBQWEsR0FBNkIsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ3JELFNBQUksR0FBRyxJQUFJLENBQUM7UUFHVixJQUFJLENBQUMsV0FBVyxHQUFHLFFBQVEsQ0FBQyxXQUFXLENBQUM7UUFFeEMsSUFBSSxDQUFDLGNBQWMsR0FBRyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7UUFFM0QsSUFBSSxDQUFDLFFBQVEsR0FBRyxlQUFlLENBQzNCLElBQUksQ0FBQyxjQUFjLEVBQUUsSUFBSSxDQUFDLFdBQVcsRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7UUFFL0QsSUFBSSxDQUFDLFNBQVMsR0FBRyxrQ0FBa0MsQ0FBQztJQUN0RCxDQUFDO0lBRUQsV0FBVztRQUNULE1BQU0sUUFBUSxHQUFHO1FBQ2IsSUFBSSxDQUFDLE9BQU8sQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztLQWtDaEIsQ0FBQztRQUNGLE9BQU8sUUFBUSxDQUFDO0lBQ2xCLENBQUM7Q0FDRjtBQUVELE1BQU0sT0FBTyw4QkFBOEI7SUFXekMsWUFBWSxRQUFpQztRQU43QyxrQkFBYSxHQUFHLENBQUMsSUFBSSxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQzVCLGFBQVEsR0FBRzswREFDNkMsQ0FBQztRQUN6RCxrQkFBYSxHQUE2QixDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDckQsU0FBSSxHQUFHLElBQUksQ0FBQztRQUdWLElBQUksQ0FBQyxXQUFXLEdBQUcsUUFBUSxDQUFDLE9BQU8sQ0FBQztRQUVwQyxJQUFJLENBQUMsY0FBYyxHQUFHLGtCQUFrQixDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUUzRCxJQUFJLENBQUMsUUFBUSxHQUFHLGVBQWUsQ0FDM0IsSUFBSSxDQUFDLGNBQWMsRUFBRSxJQUFJLENBQUMsV0FBVyxFQUFFLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQztRQUUvRCxJQUFJLENBQUMsU0FBUyxHQUFHLGlDQUFpQyxDQUFDO0lBQ3JELENBQUM7SUFFRCxXQUFXO1FBQ1QsTUFBTSxRQUFRLEdBQUc7UUFDYixJQUFJLENBQUMsT0FBTyxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztLQXlDaEIsQ0FBQztRQUNGLE9BQU8sUUFBUSxDQUFDO0lBQ2xCLENBQUM7Q0FDRiIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTEMuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtiYWNrZW5kX3V0aWx9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5pbXBvcnQge2dldE1haW5IZWFkZXJTdHJpbmcgYXMgbWFpbiwgV2ViR1BVUHJvZ3JhbX0gZnJvbSAnLi93ZWJncHVfcHJvZ3JhbSc7XG5pbXBvcnQge2NvbXB1dGVEaXNwYXRjaCwgZmxhdERpc3BhdGNoTGF5b3V0fSBmcm9tICcuL3dlYmdwdV91dGlsJztcblxuZXhwb3J0IGNsYXNzIERlcHRod2lzZUNvbnYyRERlckZpbHRlclByb2dyYW0gaW1wbGVtZW50cyBXZWJHUFVQcm9ncmFtIHtcbiAgb3V0cHV0U2hhcGU6IG51bWJlcltdO1xuICBzaGFkZXJLZXk6IHN0cmluZztcbiAgZGlzcGF0Y2hMYXlvdXQ6IHt4OiBudW1iZXJbXX07XG4gIGRpc3BhdGNoOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl07XG4gIHZhcmlhYmxlTmFtZXMgPSBbJ3gnLCAnZHknXTtcbiAgdW5pZm9ybXMgPVxuICAgICAgYHN0cmlkZXMgOiB2ZWMyPGkzMj4sIHBhZHMgOiB2ZWMyPGkzMj4sIGZpbHRlckRpbXMgOiB2ZWMyPGkzMj4sIG91dEhlaWdodCA6IGkzMixcbiAgICAgIG91dFdpZHRoIDogaTMyLCBpbkhlaWdodCA6IGkzMiwgaW5XaWR0aCA6IGkzMiwgYmF0Y2hTaXplIDogaTMyLCBjaGFubmVsTXVsIDogaTMyLGA7XG4gIHdvcmtncm91cFNpemU6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXSA9IFs2NCwgMSwgMV07XG4gIHNpemUgPSB0cnVlO1xuXG4gIGNvbnN0cnVjdG9yKGNvbnZJbmZvOiBiYWNrZW5kX3V0aWwuQ29udjJESW5mbykge1xuICAgIHRoaXMub3V0cHV0U2hhcGUgPSBjb252SW5mby5maWx0ZXJTaGFwZTtcblxuICAgIHRoaXMuZGlzcGF0Y2hMYXlvdXQgPSBmbGF0RGlzcGF0Y2hMYXlvdXQodGhpcy5vdXRwdXRTaGFwZSk7XG5cbiAgICB0aGlzLmRpc3BhdGNoID0gY29tcHV0ZURpc3BhdGNoKFxuICAgICAgICB0aGlzLmRpc3BhdGNoTGF5b3V0LCB0aGlzLm91dHB1dFNoYXBlLCB0aGlzLndvcmtncm91cFNpemUpO1xuXG4gICAgdGhpcy5zaGFkZXJLZXkgPSBgZGVwdGh3aXNlX2NvbnYyZF9iYWNrcHJvcF9maWx0ZXJgO1xuICB9XG5cbiAgZ2V0VXNlckNvZGUoKTogc3RyaW5nIHtcbiAgICBjb25zdCB1c2VyQ29kZSA9IGBcbiAgICAgICR7bWFpbignaW5kZXgnKX0ge1xuICAgICAgaWYgKGluZGV4IDwgdW5pZm9ybXMuc2l6ZSkge1xuICAgICAgICBsZXQgY29vcmRzID0gZ2V0Q29vcmRzRnJvbUluZGV4KGluZGV4KTtcbiAgICAgICAgbGV0IHdSID0gY29vcmRzWzBdO1xuICAgICAgICBsZXQgd0MgPSBjb29yZHNbMV07XG4gICAgICAgIGxldCBkMSA9IGNvb3Jkc1syXTtcbiAgICAgICAgbGV0IGRtID0gY29vcmRzWzNdO1xuICAgICAgICBsZXQgZDIgPSBkMSAqIHVuaWZvcm1zLmNoYW5uZWxNdWwgKyBkbTtcblxuICAgICAgICB2YXIgZG90UHJvZCA9IDAuMDtcbiAgICAgICAgZm9yICh2YXIgYiA9IDA7IGIgPCB1bmlmb3Jtcy5iYXRjaFNpemU7IGIrKykge1xuICAgICAgICAgIGZvciAodmFyIHlSID0gMDsgeVIgPCB1bmlmb3Jtcy5vdXRIZWlnaHQ7IHlSKyspIHtcbiAgICAgICAgICAgIGxldCB4UiA9IHdSICsgeVIgKiB1bmlmb3Jtcy5zdHJpZGVzWzBdIC0gdW5pZm9ybXMucGFkc1swXTtcblxuICAgICAgICAgICAgaWYgKHhSIDwgMCB8fCB4UiA+PSB1bmlmb3Jtcy5pbkhlaWdodCkge1xuICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9yICh2YXIgeUMgPSAwOyB5QyA8IHVuaWZvcm1zLm91dFdpZHRoOyB5QysrKSB7XG4gICAgICAgICAgICAgIGxldCB4QyA9IHdDICsgeUMgKiB1bmlmb3Jtcy5zdHJpZGVzWzFdIC0gdW5pZm9ybXMucGFkc1sxXTtcblxuICAgICAgICAgICAgICBpZiAoeEMgPCAwIHx8IHhDID49IHVuaWZvcm1zLmluV2lkdGgpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGxldCBkeVZhbHVlID0gZ2V0RHkoYiwgeVIsIHlDLCBkMik7XG4gICAgICAgICAgICAgIGxldCB4VmFsdWUgPSBnZXRYKGIsIHhSLCB4QywgZDEpO1xuICAgICAgICAgICAgICBkb3RQcm9kICs9IHhWYWx1ZSAqIGR5VmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNldE91dHB1dEF0SW5kZXgoaW5kZXgsIGRvdFByb2QpO1xuICAgICAgfVxuICAgIH1cbiAgICBgO1xuICAgIHJldHVybiB1c2VyQ29kZTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgRGVwdGh3aXNlQ29udjJERGVySW5wdXRQcm9ncmFtIGltcGxlbWVudHMgV2ViR1BVUHJvZ3JhbSB7XG4gIG91dHB1dFNoYXBlOiBudW1iZXJbXTtcbiAgc2hhZGVyS2V5OiBzdHJpbmc7XG4gIGRpc3BhdGNoTGF5b3V0OiB7eDogbnVtYmVyW119O1xuICBkaXNwYXRjaDogW251bWJlciwgbnVtYmVyLCBudW1iZXJdO1xuICB2YXJpYWJsZU5hbWVzID0gWydkeScsICdXJ107XG4gIHVuaWZvcm1zID0gYHN0cmlkZXMgOiB2ZWMyPGkzMj4sIHBhZHMgOiB2ZWMyPGkzMj4sIGZpbHRlckRpbXMgOiB2ZWMyPGkzMj4sXG4gICAgICAgb3V0SGVpZ2h0IDogaTMyLCBvdXRXaWR0aCA6IGkzMiwgY2hhbm5lbE11bCA6IGkzMixgO1xuICB3b3JrZ3JvdXBTaXplOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl0gPSBbNjQsIDEsIDFdO1xuICBzaXplID0gdHJ1ZTtcblxuICBjb25zdHJ1Y3Rvcihjb252SW5mbzogYmFja2VuZF91dGlsLkNvbnYyREluZm8pIHtcbiAgICB0aGlzLm91dHB1dFNoYXBlID0gY29udkluZm8uaW5TaGFwZTtcblxuICAgIHRoaXMuZGlzcGF0Y2hMYXlvdXQgPSBmbGF0RGlzcGF0Y2hMYXlvdXQodGhpcy5vdXRwdXRTaGFwZSk7XG5cbiAgICB0aGlzLmRpc3BhdGNoID0gY29tcHV0ZURpc3BhdGNoKFxuICAgICAgICB0aGlzLmRpc3BhdGNoTGF5b3V0LCB0aGlzLm91dHB1dFNoYXBlLCB0aGlzLndvcmtncm91cFNpemUpO1xuXG4gICAgdGhpcy5zaGFkZXJLZXkgPSBgZGVwdGh3aXNlX2NvbnYyZF9iYWNrcHJvcF9pbnB1dGA7XG4gIH1cblxuICBnZXRVc2VyQ29kZSgpOiBzdHJpbmcge1xuICAgIGNvbnN0IHVzZXJDb2RlID0gYFxuICAgICAgJHttYWluKCdpbmRleCcpfSB7XG4gICAgICBpZiAoaW5kZXggPCB1bmlmb3Jtcy5zaXplKSB7XG4gICAgICAgIGxldCBjb29yZHMgPSBnZXRDb29yZHNGcm9tSW5kZXgoaW5kZXgpO1xuICAgICAgICBsZXQgYmF0Y2ggPSBjb29yZHNbMF07XG4gICAgICAgIGxldCBkMSA9IGNvb3Jkc1szXTtcbiAgICAgICAgbGV0IGR5Q29ybmVyID0gY29vcmRzLnl6IC0gdW5pZm9ybXMucGFkcztcbiAgICAgICAgbGV0IGR5UkNvcm5lciA9IGR5Q29ybmVyLng7XG4gICAgICAgIGxldCBkeUNDb3JuZXIgPSBkeUNvcm5lci55O1xuXG4gICAgICAgIHZhciBkb3RQcm9kID0gMC4wO1xuICAgICAgICBmb3IgKHZhciB3UiA9IDA7IHdSIDwgdW5pZm9ybXMuZmlsdGVyRGltc1swXTsgd1IrKykge1xuICAgICAgICAgIGxldCBkeVIgPSBmMzIoZHlSQ29ybmVyICsgd1IpIC8gZjMyKHVuaWZvcm1zLnN0cmlkZXNbMF0pO1xuXG4gICAgICAgICAgaWYgKGR5UiA8IDAuMCB8fCBkeVIgPj0gZjMyKHVuaWZvcm1zLm91dEhlaWdodCkgfHwgZnJhY3QoZHlSKSA+IDAuMCkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbGV0IGlkeVIgPSBpMzIoZHlSKTtcbiAgICAgICAgICBsZXQgd1JQZXJtID0gdW5pZm9ybXMuZmlsdGVyRGltc1swXSAtIDEgLSB3UjtcblxuICAgICAgICAgIGZvciAodmFyIHdDID0gMDsgd0MgPCB1bmlmb3Jtcy5maWx0ZXJEaW1zWzFdOyB3QysrKSB7XG4gICAgICAgICAgICBsZXQgZHlDID0gZjMyKGR5Q0Nvcm5lciArIHdDKSAvIGYzMih1bmlmb3Jtcy5zdHJpZGVzWzFdKTtcblxuICAgICAgICAgICAgaWYgKGR5QyA8IDAuMCB8fCBkeUMgPj0gZjMyKHVuaWZvcm1zLm91dFdpZHRoKSB8fCBmcmFjdChkeUMpID4gMC4wKSB7XG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgaWR5QyA9IGkzMihkeUMpO1xuICAgICAgICAgICAgbGV0IHdDUGVybSA9IHVuaWZvcm1zLmZpbHRlckRpbXNbMV0gLSAxIC0gd0M7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGRtID0gMDsgZG0gPCB1bmlmb3Jtcy5jaGFubmVsTXVsOyBkbSsrKSB7XG4gICAgICAgICAgICAgIGxldCBkMiA9IGQxICogdW5pZm9ybXMuY2hhbm5lbE11bCArIGRtO1xuICAgICAgICAgICAgICBsZXQgeFZhbHVlID0gZ2V0RHkoYmF0Y2gsIGlkeVIsIGlkeUMsIGQyKTtcbiAgICAgICAgICAgICAgbGV0IHdWYWx1ZSA9IGdldFcod1JQZXJtLCB3Q1Blcm0sIGQxLCBkbSk7XG4gICAgICAgICAgICAgIGRvdFByb2QgKz0geFZhbHVlICogd1ZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzZXRPdXRwdXRBdEluZGV4KGluZGV4LCBkb3RQcm9kKTtcbiAgICAgIH1cbiAgICB9XG4gICAgYDtcbiAgICByZXR1cm4gdXNlckNvZGU7XG4gIH1cbn1cbiJdfQ==","/**\n * @license\n * Copyright 2023 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { backend_util, DepthwiseConv2dNativeBackpropFilter } from '@tensorflow/tfjs-core';\nimport { DepthwiseConv2DDerFilterProgram } from '../conv_backprop_depthwise_webgpu';\nexport function depthwiseConv2dNativeBackpropFilter(args) {\n    const { inputs, backend, attrs } = args;\n    const { x, dy } = inputs;\n    const { strides, dilations, pad, dimRoundingMode, filterShape } = attrs;\n    const convInfo = backend_util.computeConv2DInfo(x.shape, filterShape, strides, dilations, pad, dimRoundingMode, true /* depthwise */);\n    const program = new DepthwiseConv2DDerFilterProgram(convInfo);\n    const uniformData = [\n        { type: 'int32', data: [convInfo.strideHeight, convInfo.strideWidth] },\n        { type: 'int32', data: [convInfo.padInfo.top, convInfo.padInfo.left] },\n        { type: 'int32', data: [convInfo.filterHeight, convInfo.filterWidth] },\n        { type: 'int32', data: [convInfo.outHeight] },\n        { type: 'int32', data: [convInfo.outWidth] },\n        { type: 'int32', data: [convInfo.inHeight] },\n        { type: 'int32', data: [convInfo.inWidth] },\n        { type: 'int32', data: [convInfo.batchSize] },\n        { type: 'int32', data: [convInfo.outChannels / convInfo.inChannels] }\n    ];\n    return backend.runWebGPUProgram(program, [x, dy], 'float32', uniformData);\n}\nexport const depthwiseConv2dNativeBackpropFilterConfig = {\n    kernelName: DepthwiseConv2dNativeBackpropFilter,\n    backendName: 'webgpu',\n    kernelFunc: depthwiseConv2dNativeBackpropFilter\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRGVwdGh3aXNlQ29udjJkTmF0aXZlQmFja3Byb3BGaWx0ZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9rZXJuZWxzL0RlcHRod2lzZUNvbnYyZE5hdGl2ZUJhY2twcm9wRmlsdGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sRUFBQyxZQUFZLEVBQUUsbUNBQW1DLEVBQWdILE1BQU0sdUJBQXVCLENBQUM7QUFHdk0sT0FBTyxFQUFDLCtCQUErQixFQUFDLE1BQU0sbUNBQW1DLENBQUM7QUFFbEYsTUFBTSxVQUFVLG1DQUFtQyxDQUFDLElBSW5EO0lBQ0MsTUFBTSxFQUFDLE1BQU0sRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFDLEdBQUcsSUFBSSxDQUFDO0lBQ3RDLE1BQU0sRUFBQyxDQUFDLEVBQUUsRUFBRSxFQUFDLEdBQUcsTUFBTSxDQUFDO0lBQ3ZCLE1BQU0sRUFBQyxPQUFPLEVBQUUsU0FBUyxFQUFFLEdBQUcsRUFBRSxlQUFlLEVBQUUsV0FBVyxFQUFDLEdBQUcsS0FBSyxDQUFDO0lBRXRFLE1BQU0sUUFBUSxHQUFHLFlBQVksQ0FBQyxpQkFBaUIsQ0FDM0MsQ0FBQyxDQUFDLEtBQXlDLEVBQUUsV0FBVyxFQUFFLE9BQU8sRUFDakUsU0FBUyxFQUFFLEdBQUcsRUFBRSxlQUFlLEVBQUUsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDO0lBRTNELE1BQU0sT0FBTyxHQUFHLElBQUksK0JBQStCLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDOUQsTUFBTSxXQUFXLEdBQUc7UUFDbEIsRUFBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxDQUFDLFFBQVEsQ0FBQyxZQUFZLEVBQUUsUUFBUSxDQUFDLFdBQVcsQ0FBQyxFQUFDO1FBQ3BFLEVBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxRQUFRLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxFQUFDO1FBQ3BFLEVBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsQ0FBQyxRQUFRLENBQUMsWUFBWSxFQUFFLFFBQVEsQ0FBQyxXQUFXLENBQUMsRUFBQztRQUNwRSxFQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxFQUFDO1FBQzNDLEVBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLEVBQUM7UUFDMUMsRUFBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsRUFBQztRQUMxQyxFQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxFQUFDO1FBQ3pDLEVBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLEVBQUM7UUFDM0MsRUFBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxDQUFDLFFBQVEsQ0FBQyxXQUFXLEdBQUcsUUFBUSxDQUFDLFVBQVUsQ0FBQyxFQUFDO0tBQ3BFLENBQUM7SUFDRixPQUFPLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsU0FBUyxFQUFFLFdBQVcsQ0FBQyxDQUFDO0FBQzVFLENBQUM7QUFFRCxNQUFNLENBQUMsTUFBTSx5Q0FBeUMsR0FBaUI7SUFDckUsVUFBVSxFQUFFLG1DQUFtQztJQUMvQyxXQUFXLEVBQUUsUUFBUTtJQUNyQixVQUFVLEVBQUUsbUNBQTREO0NBQ3pFLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMyBHb29nbGUgTExDLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7YmFja2VuZF91dGlsLCBEZXB0aHdpc2VDb252MmROYXRpdmVCYWNrcHJvcEZpbHRlciwgRGVwdGh3aXNlQ29udjJkTmF0aXZlQmFja3Byb3BGaWx0ZXJBdHRycywgRGVwdGh3aXNlQ29udjJkTmF0aXZlQmFja3Byb3BGaWx0ZXJJbnB1dHMsIEtlcm5lbENvbmZpZywgS2VybmVsRnVuY30gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcblxuaW1wb3J0IHtXZWJHUFVCYWNrZW5kfSBmcm9tICcuLi9iYWNrZW5kX3dlYmdwdSc7XG5pbXBvcnQge0RlcHRod2lzZUNvbnYyRERlckZpbHRlclByb2dyYW19IGZyb20gJy4uL2NvbnZfYmFja3Byb3BfZGVwdGh3aXNlX3dlYmdwdSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBkZXB0aHdpc2VDb252MmROYXRpdmVCYWNrcHJvcEZpbHRlcihhcmdzOiB7XG4gIGlucHV0czogRGVwdGh3aXNlQ29udjJkTmF0aXZlQmFja3Byb3BGaWx0ZXJJbnB1dHMsXG4gIGF0dHJzOiBEZXB0aHdpc2VDb252MmROYXRpdmVCYWNrcHJvcEZpbHRlckF0dHJzLFxuICBiYWNrZW5kOiBXZWJHUFVCYWNrZW5kXG59KSB7XG4gIGNvbnN0IHtpbnB1dHMsIGJhY2tlbmQsIGF0dHJzfSA9IGFyZ3M7XG4gIGNvbnN0IHt4LCBkeX0gPSBpbnB1dHM7XG4gIGNvbnN0IHtzdHJpZGVzLCBkaWxhdGlvbnMsIHBhZCwgZGltUm91bmRpbmdNb2RlLCBmaWx0ZXJTaGFwZX0gPSBhdHRycztcblxuICBjb25zdCBjb252SW5mbyA9IGJhY2tlbmRfdXRpbC5jb21wdXRlQ29udjJESW5mbyhcbiAgICAgIHguc2hhcGUgYXMgW251bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcl0sIGZpbHRlclNoYXBlLCBzdHJpZGVzLFxuICAgICAgZGlsYXRpb25zLCBwYWQsIGRpbVJvdW5kaW5nTW9kZSwgdHJ1ZSAvKiBkZXB0aHdpc2UgKi8pO1xuXG4gIGNvbnN0IHByb2dyYW0gPSBuZXcgRGVwdGh3aXNlQ29udjJERGVyRmlsdGVyUHJvZ3JhbShjb252SW5mbyk7XG4gIGNvbnN0IHVuaWZvcm1EYXRhID0gW1xuICAgIHt0eXBlOiAnaW50MzInLCBkYXRhOiBbY29udkluZm8uc3RyaWRlSGVpZ2h0LCBjb252SW5mby5zdHJpZGVXaWR0aF19LFxuICAgIHt0eXBlOiAnaW50MzInLCBkYXRhOiBbY29udkluZm8ucGFkSW5mby50b3AsIGNvbnZJbmZvLnBhZEluZm8ubGVmdF19LFxuICAgIHt0eXBlOiAnaW50MzInLCBkYXRhOiBbY29udkluZm8uZmlsdGVySGVpZ2h0LCBjb252SW5mby5maWx0ZXJXaWR0aF19LFxuICAgIHt0eXBlOiAnaW50MzInLCBkYXRhOiBbY29udkluZm8ub3V0SGVpZ2h0XX0sXG4gICAge3R5cGU6ICdpbnQzMicsIGRhdGE6IFtjb252SW5mby5vdXRXaWR0aF19LFxuICAgIHt0eXBlOiAnaW50MzInLCBkYXRhOiBbY29udkluZm8uaW5IZWlnaHRdfSxcbiAgICB7dHlwZTogJ2ludDMyJywgZGF0YTogW2NvbnZJbmZvLmluV2lkdGhdfSxcbiAgICB7dHlwZTogJ2ludDMyJywgZGF0YTogW2NvbnZJbmZvLmJhdGNoU2l6ZV19LFxuICAgIHt0eXBlOiAnaW50MzInLCBkYXRhOiBbY29udkluZm8ub3V0Q2hhbm5lbHMgLyBjb252SW5mby5pbkNoYW5uZWxzXX1cbiAgXTtcbiAgcmV0dXJuIGJhY2tlbmQucnVuV2ViR1BVUHJvZ3JhbShwcm9ncmFtLCBbeCwgZHldLCAnZmxvYXQzMicsIHVuaWZvcm1EYXRhKTtcbn1cblxuZXhwb3J0IGNvbnN0IGRlcHRod2lzZUNvbnYyZE5hdGl2ZUJhY2twcm9wRmlsdGVyQ29uZmlnOiBLZXJuZWxDb25maWcgPSB7XG4gIGtlcm5lbE5hbWU6IERlcHRod2lzZUNvbnYyZE5hdGl2ZUJhY2twcm9wRmlsdGVyLFxuICBiYWNrZW5kTmFtZTogJ3dlYmdwdScsXG4gIGtlcm5lbEZ1bmM6IGRlcHRod2lzZUNvbnYyZE5hdGl2ZUJhY2twcm9wRmlsdGVyIGFzIHVua25vd24gYXMgS2VybmVsRnVuY1xufTtcbiJdfQ==","/**\n * @license\n * Copyright 2023 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { backend_util, DepthwiseConv2dNativeBackpropInput } from '@tensorflow/tfjs-core';\nimport { DepthwiseConv2DDerInputProgram } from '../conv_backprop_depthwise_webgpu';\nexport function depthwiseConv2dNativeBackpropInput(args) {\n    const { inputs, backend, attrs } = args;\n    const { dy, filter } = inputs;\n    const { strides, dilations, pad, dimRoundingMode, inputShape } = attrs;\n    const convInfo = backend_util.computeConv2DInfo(inputShape, filter.shape, strides, dilations, pad, dimRoundingMode, true /* depthwise */);\n    const program = new DepthwiseConv2DDerInputProgram(convInfo);\n    const uniformData = [\n        { type: 'int32', data: [convInfo.strideHeight, convInfo.strideWidth] }, {\n            type: 'int32',\n            data: [\n                convInfo.filterHeight - 1 - convInfo.padInfo.top,\n                convInfo.filterWidth - 1 - convInfo.padInfo.left\n            ]\n        },\n        { type: 'int32', data: [convInfo.filterHeight, convInfo.filterWidth] },\n        { type: 'int32', data: [convInfo.outHeight] },\n        { type: 'int32', data: [convInfo.outWidth] },\n        { type: 'int32', data: [convInfo.outChannels / convInfo.inChannels] }\n    ];\n    return backend.runWebGPUProgram(program, [dy, filter], dy.dtype, uniformData);\n}\nexport const depthwiseConv2dNativeBackpropInputConfig = {\n    kernelName: DepthwiseConv2dNativeBackpropInput,\n    backendName: 'webgpu',\n    kernelFunc: depthwiseConv2dNativeBackpropInput\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRGVwdGh3aXNlQ29udjJkTmF0aXZlQmFja3Byb3BJbnB1dC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2tlcm5lbHMvRGVwdGh3aXNlQ29udjJkTmF0aXZlQmFja3Byb3BJbnB1dC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQUMsWUFBWSxFQUFFLGtDQUFrQyxFQUE4RyxNQUFNLHVCQUF1QixDQUFDO0FBR3BNLE9BQU8sRUFBQyw4QkFBOEIsRUFBQyxNQUFNLG1DQUFtQyxDQUFDO0FBRWpGLE1BQU0sVUFBVSxrQ0FBa0MsQ0FBQyxJQUlsRDtJQUNDLE1BQU0sRUFBQyxNQUFNLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBQyxHQUFHLElBQUksQ0FBQztJQUN0QyxNQUFNLEVBQUMsRUFBRSxFQUFFLE1BQU0sRUFBQyxHQUFHLE1BQU0sQ0FBQztJQUM1QixNQUFNLEVBQUMsT0FBTyxFQUFFLFNBQVMsRUFBRSxHQUFHLEVBQUUsZUFBZSxFQUFFLFVBQVUsRUFBQyxHQUFHLEtBQUssQ0FBQztJQUVyRSxNQUFNLFFBQVEsR0FBRyxZQUFZLENBQUMsaUJBQWlCLENBQzNDLFVBQVUsRUFBRSxNQUFNLENBQUMsS0FBeUMsRUFBRSxPQUFPLEVBQ3JFLFNBQVMsRUFBRSxHQUFHLEVBQUUsZUFBZSxFQUFFLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQztJQUUzRCxNQUFNLE9BQU8sR0FBRyxJQUFJLDhCQUE4QixDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQzdELE1BQU0sV0FBVyxHQUFHO1FBQ2xCLEVBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsQ0FBQyxRQUFRLENBQUMsWUFBWSxFQUFFLFFBQVEsQ0FBQyxXQUFXLENBQUMsRUFBQyxFQUFFO1lBQ3BFLElBQUksRUFBRSxPQUFPO1lBQ2IsSUFBSSxFQUFFO2dCQUNKLFFBQVEsQ0FBQyxZQUFZLEdBQUcsQ0FBQyxHQUFHLFFBQVEsQ0FBQyxPQUFPLENBQUMsR0FBRztnQkFDaEQsUUFBUSxDQUFDLFdBQVcsR0FBRyxDQUFDLEdBQUcsUUFBUSxDQUFDLE9BQU8sQ0FBQyxJQUFJO2FBQ2pEO1NBQ0Y7UUFDRCxFQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLENBQUMsUUFBUSxDQUFDLFlBQVksRUFBRSxRQUFRLENBQUMsV0FBVyxDQUFDLEVBQUM7UUFDcEUsRUFBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsRUFBQztRQUMzQyxFQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxFQUFDO1FBQzFDLEVBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsQ0FBQyxRQUFRLENBQUMsV0FBVyxHQUFHLFFBQVEsQ0FBQyxVQUFVLENBQUMsRUFBQztLQUNwRSxDQUFDO0lBQ0YsT0FBTyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLENBQUMsRUFBRSxFQUFFLE1BQU0sQ0FBQyxFQUFFLEVBQUUsQ0FBQyxLQUFLLEVBQUUsV0FBVyxDQUFDLENBQUM7QUFDaEYsQ0FBQztBQUVELE1BQU0sQ0FBQyxNQUFNLHdDQUF3QyxHQUFpQjtJQUNwRSxVQUFVLEVBQUUsa0NBQWtDO0lBQzlDLFdBQVcsRUFBRSxRQUFRO0lBQ3JCLFVBQVUsRUFBRSxrQ0FBMkQ7Q0FDeEUsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTEMuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtiYWNrZW5kX3V0aWwsIERlcHRod2lzZUNvbnYyZE5hdGl2ZUJhY2twcm9wSW5wdXQsIERlcHRod2lzZUNvbnYyZE5hdGl2ZUJhY2twcm9wSW5wdXRBdHRycywgRGVwdGh3aXNlQ29udjJkTmF0aXZlQmFja3Byb3BJbnB1dElucHV0cywgS2VybmVsQ29uZmlnLCBLZXJuZWxGdW5jfSBmcm9tICdAdGVuc29yZmxvdy90ZmpzLWNvcmUnO1xuXG5pbXBvcnQge1dlYkdQVUJhY2tlbmR9IGZyb20gJy4uL2JhY2tlbmRfd2ViZ3B1JztcbmltcG9ydCB7RGVwdGh3aXNlQ29udjJERGVySW5wdXRQcm9ncmFtfSBmcm9tICcuLi9jb252X2JhY2twcm9wX2RlcHRod2lzZV93ZWJncHUnO1xuXG5leHBvcnQgZnVuY3Rpb24gZGVwdGh3aXNlQ29udjJkTmF0aXZlQmFja3Byb3BJbnB1dChhcmdzOiB7XG4gIGlucHV0czogRGVwdGh3aXNlQ29udjJkTmF0aXZlQmFja3Byb3BJbnB1dElucHV0cyxcbiAgYXR0cnM6IERlcHRod2lzZUNvbnYyZE5hdGl2ZUJhY2twcm9wSW5wdXRBdHRycyxcbiAgYmFja2VuZDogV2ViR1BVQmFja2VuZFxufSkge1xuICBjb25zdCB7aW5wdXRzLCBiYWNrZW5kLCBhdHRyc30gPSBhcmdzO1xuICBjb25zdCB7ZHksIGZpbHRlcn0gPSBpbnB1dHM7XG4gIGNvbnN0IHtzdHJpZGVzLCBkaWxhdGlvbnMsIHBhZCwgZGltUm91bmRpbmdNb2RlLCBpbnB1dFNoYXBlfSA9IGF0dHJzO1xuXG4gIGNvbnN0IGNvbnZJbmZvID0gYmFja2VuZF91dGlsLmNvbXB1dGVDb252MkRJbmZvKFxuICAgICAgaW5wdXRTaGFwZSwgZmlsdGVyLnNoYXBlIGFzIFtudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXJdLCBzdHJpZGVzLFxuICAgICAgZGlsYXRpb25zLCBwYWQsIGRpbVJvdW5kaW5nTW9kZSwgdHJ1ZSAvKiBkZXB0aHdpc2UgKi8pO1xuXG4gIGNvbnN0IHByb2dyYW0gPSBuZXcgRGVwdGh3aXNlQ29udjJERGVySW5wdXRQcm9ncmFtKGNvbnZJbmZvKTtcbiAgY29uc3QgdW5pZm9ybURhdGEgPSBbXG4gICAge3R5cGU6ICdpbnQzMicsIGRhdGE6IFtjb252SW5mby5zdHJpZGVIZWlnaHQsIGNvbnZJbmZvLnN0cmlkZVdpZHRoXX0sIHtcbiAgICAgIHR5cGU6ICdpbnQzMicsXG4gICAgICBkYXRhOiBbXG4gICAgICAgIGNvbnZJbmZvLmZpbHRlckhlaWdodCAtIDEgLSBjb252SW5mby5wYWRJbmZvLnRvcCxcbiAgICAgICAgY29udkluZm8uZmlsdGVyV2lkdGggLSAxIC0gY29udkluZm8ucGFkSW5mby5sZWZ0XG4gICAgICBdXG4gICAgfSxcbiAgICB7dHlwZTogJ2ludDMyJywgZGF0YTogW2NvbnZJbmZvLmZpbHRlckhlaWdodCwgY29udkluZm8uZmlsdGVyV2lkdGhdfSxcbiAgICB7dHlwZTogJ2ludDMyJywgZGF0YTogW2NvbnZJbmZvLm91dEhlaWdodF19LFxuICAgIHt0eXBlOiAnaW50MzInLCBkYXRhOiBbY29udkluZm8ub3V0V2lkdGhdfSxcbiAgICB7dHlwZTogJ2ludDMyJywgZGF0YTogW2NvbnZJbmZvLm91dENoYW5uZWxzIC8gY29udkluZm8uaW5DaGFubmVsc119XG4gIF07XG4gIHJldHVybiBiYWNrZW5kLnJ1bldlYkdQVVByb2dyYW0ocHJvZ3JhbSwgW2R5LCBmaWx0ZXJdLCBkeS5kdHlwZSwgdW5pZm9ybURhdGEpO1xufVxuXG5leHBvcnQgY29uc3QgZGVwdGh3aXNlQ29udjJkTmF0aXZlQmFja3Byb3BJbnB1dENvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBEZXB0aHdpc2VDb252MmROYXRpdmVCYWNrcHJvcElucHV0LFxuICBiYWNrZW5kTmFtZTogJ3dlYmdwdScsXG4gIGtlcm5lbEZ1bmM6IGRlcHRod2lzZUNvbnYyZE5hdGl2ZUJhY2twcm9wSW5wdXQgYXMgdW5rbm93biBhcyBLZXJuZWxGdW5jXG59O1xuIl19","/**\n * @license\n * Copyright 2022 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { getMainHeaderString as main } from './webgpu_program';\nimport { computeDispatch, flatDispatchLayout } from './webgpu_util';\nexport class DiagProgram {\n    constructor(size) {\n        this.variableNames = ['x'];\n        this.workgroupSize = [64, 1, 1];\n        this.size = true;\n        this.outputShape = [size, size];\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize);\n        this.shaderKey = 'diag';\n    }\n    getUserCode() {\n        const userCode = `\n      ${main('index')} {\n        if (index < uniforms.size) {\n          let coords = getOutputCoords();\n          let value = select(0.0, getX(coords[0]), coords[0] == coords[1]);\n          setOutputAtIndex(index, value);\n        }\n      }\n    `;\n        return userCode;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGlhZ193ZWJncHUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9kaWFnX3dlYmdwdS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQUMsbUJBQW1CLElBQUksSUFBSSxFQUFnQixNQUFNLGtCQUFrQixDQUFDO0FBQzVFLE9BQU8sRUFBQyxlQUFlLEVBQUUsa0JBQWtCLEVBQUMsTUFBTSxlQUFlLENBQUM7QUFFbEUsTUFBTSxPQUFPLFdBQVc7SUFTdEIsWUFBWSxJQUFZO1FBSnhCLGtCQUFhLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUN0QixrQkFBYSxHQUE2QixDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDckQsU0FBSSxHQUFHLElBQUksQ0FBQztRQUdWLElBQUksQ0FBQyxXQUFXLEdBQUcsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFDaEMsSUFBSSxDQUFDLGNBQWMsR0FBRyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDM0QsSUFBSSxDQUFDLFFBQVEsR0FBRyxlQUFlLENBQzNCLElBQUksQ0FBQyxjQUFjLEVBQUUsSUFBSSxDQUFDLFdBQVcsRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7UUFFL0QsSUFBSSxDQUFDLFNBQVMsR0FBRyxNQUFNLENBQUM7SUFDMUIsQ0FBQztJQUVELFdBQVc7UUFDVCxNQUFNLFFBQVEsR0FBRztRQUNiLElBQUksQ0FBQyxPQUFPLENBQUM7Ozs7Ozs7S0FPaEIsQ0FBQztRQUNGLE9BQU8sUUFBUSxDQUFDO0lBQ2xCLENBQUM7Q0FDRiIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTEMuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtnZXRNYWluSGVhZGVyU3RyaW5nIGFzIG1haW4sIFdlYkdQVVByb2dyYW19IGZyb20gJy4vd2ViZ3B1X3Byb2dyYW0nO1xuaW1wb3J0IHtjb21wdXRlRGlzcGF0Y2gsIGZsYXREaXNwYXRjaExheW91dH0gZnJvbSAnLi93ZWJncHVfdXRpbCc7XG5cbmV4cG9ydCBjbGFzcyBEaWFnUHJvZ3JhbSBpbXBsZW1lbnRzIFdlYkdQVVByb2dyYW0ge1xuICBvdXRwdXRTaGFwZTogbnVtYmVyW107XG4gIHNoYWRlcktleTogc3RyaW5nO1xuICBkaXNwYXRjaExheW91dDoge3g6IG51bWJlcltdfTtcbiAgZGlzcGF0Y2g6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXTtcbiAgdmFyaWFibGVOYW1lcyA9IFsneCddO1xuICB3b3JrZ3JvdXBTaXplOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl0gPSBbNjQsIDEsIDFdO1xuICBzaXplID0gdHJ1ZTtcblxuICBjb25zdHJ1Y3RvcihzaXplOiBudW1iZXIpIHtcbiAgICB0aGlzLm91dHB1dFNoYXBlID0gW3NpemUsIHNpemVdO1xuICAgIHRoaXMuZGlzcGF0Y2hMYXlvdXQgPSBmbGF0RGlzcGF0Y2hMYXlvdXQodGhpcy5vdXRwdXRTaGFwZSk7XG4gICAgdGhpcy5kaXNwYXRjaCA9IGNvbXB1dGVEaXNwYXRjaChcbiAgICAgICAgdGhpcy5kaXNwYXRjaExheW91dCwgdGhpcy5vdXRwdXRTaGFwZSwgdGhpcy53b3JrZ3JvdXBTaXplKTtcblxuICAgIHRoaXMuc2hhZGVyS2V5ID0gJ2RpYWcnO1xuICB9XG5cbiAgZ2V0VXNlckNvZGUoKTogc3RyaW5nIHtcbiAgICBjb25zdCB1c2VyQ29kZSA9IGBcbiAgICAgICR7bWFpbignaW5kZXgnKX0ge1xuICAgICAgICBpZiAoaW5kZXggPCB1bmlmb3Jtcy5zaXplKSB7XG4gICAgICAgICAgbGV0IGNvb3JkcyA9IGdldE91dHB1dENvb3JkcygpO1xuICAgICAgICAgIGxldCB2YWx1ZSA9IHNlbGVjdCgwLjAsIGdldFgoY29vcmRzWzBdKSwgY29vcmRzWzBdID09IGNvb3Jkc1sxXSk7XG4gICAgICAgICAgc2V0T3V0cHV0QXRJbmRleChpbmRleCwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgYDtcbiAgICByZXR1cm4gdXNlckNvZGU7XG4gIH1cbn1cbiJdfQ==","/**\n * @license\n * Copyright 2022 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Diag, util } from '@tensorflow/tfjs-core';\nimport { DiagProgram } from '../diag_webgpu';\nimport { reshape } from './Reshape';\nexport function diag(args) {\n    const { inputs, backend } = args;\n    const { x } = inputs;\n    const outShape = [...x.shape, ...x.shape];\n    const xSize = util.sizeFromShape(x.shape);\n    const flat = reshape({ inputs: { x }, backend, attrs: { shape: [xSize] } });\n    const program = new DiagProgram(xSize);\n    const res = backend.runWebGPUProgram(program, [flat], flat.dtype);\n    const out = reshape({ inputs: { x: res }, backend, attrs: { shape: outShape } });\n    backend.disposeData(flat.dataId);\n    backend.disposeData(res.dataId);\n    return out;\n}\nexport const diagConfig = {\n    kernelName: Diag,\n    backendName: 'webgpu',\n    kernelFunc: diag\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRGlhZy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2tlcm5lbHMvRGlhZy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQUMsSUFBSSxFQUFvRCxJQUFJLEVBQUMsTUFBTSx1QkFBdUIsQ0FBQztBQUduRyxPQUFPLEVBQUMsV0FBVyxFQUFDLE1BQU0sZ0JBQWdCLENBQUM7QUFDM0MsT0FBTyxFQUFDLE9BQU8sRUFBQyxNQUFNLFdBQVcsQ0FBQztBQUVsQyxNQUFNLFVBQVUsSUFBSSxDQUFDLElBQWtEO0lBRXJFLE1BQU0sRUFBQyxNQUFNLEVBQUUsT0FBTyxFQUFDLEdBQUcsSUFBSSxDQUFDO0lBQy9CLE1BQU0sRUFBQyxDQUFDLEVBQUMsR0FBRyxNQUFNLENBQUM7SUFFbkIsTUFBTSxRQUFRLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxLQUFLLEVBQUUsR0FBRyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDMUMsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUM7SUFFMUMsTUFBTSxJQUFJLEdBQUcsT0FBTyxDQUFDLEVBQUMsTUFBTSxFQUFFLEVBQUMsQ0FBQyxFQUFDLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxFQUFDLEtBQUssRUFBRSxDQUFDLEtBQUssQ0FBQyxFQUFDLEVBQUMsQ0FBQyxDQUFDO0lBRXRFLE1BQU0sT0FBTyxHQUFHLElBQUksV0FBVyxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ3ZDLE1BQU0sR0FBRyxHQUFHLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxJQUFJLENBQUMsRUFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7SUFFbEUsTUFBTSxHQUFHLEdBQUcsT0FBTyxDQUFDLEVBQUMsTUFBTSxFQUFFLEVBQUMsQ0FBQyxFQUFFLEdBQUcsRUFBQyxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsRUFBQyxLQUFLLEVBQUUsUUFBUSxFQUFDLEVBQUMsQ0FBQyxDQUFDO0lBRTNFLE9BQU8sQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ2pDLE9BQU8sQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBRWhDLE9BQU8sR0FBRyxDQUFDO0FBQ2IsQ0FBQztBQUVELE1BQU0sQ0FBQyxNQUFNLFVBQVUsR0FBaUI7SUFDdEMsVUFBVSxFQUFFLElBQUk7SUFDaEIsV0FBVyxFQUFFLFFBQVE7SUFDckIsVUFBVSxFQUFFLElBQTZCO0NBQzFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7RGlhZywgRGlhZ0lucHV0cywgS2VybmVsQ29uZmlnLCBLZXJuZWxGdW5jLCBUZW5zb3JJbmZvLCB1dGlsfSBmcm9tICdAdGVuc29yZmxvdy90ZmpzLWNvcmUnO1xuXG5pbXBvcnQge1dlYkdQVUJhY2tlbmR9IGZyb20gJy4uL2JhY2tlbmRfd2ViZ3B1JztcbmltcG9ydCB7RGlhZ1Byb2dyYW19IGZyb20gJy4uL2RpYWdfd2ViZ3B1JztcbmltcG9ydCB7cmVzaGFwZX0gZnJvbSAnLi9SZXNoYXBlJztcblxuZXhwb3J0IGZ1bmN0aW9uIGRpYWcoYXJnczoge2lucHV0czogRGlhZ0lucHV0cywgYmFja2VuZDogV2ViR1BVQmFja2VuZH0pOlxuICAgIFRlbnNvckluZm8ge1xuICBjb25zdCB7aW5wdXRzLCBiYWNrZW5kfSA9IGFyZ3M7XG4gIGNvbnN0IHt4fSA9IGlucHV0cztcblxuICBjb25zdCBvdXRTaGFwZSA9IFsuLi54LnNoYXBlLCAuLi54LnNoYXBlXTtcbiAgY29uc3QgeFNpemUgPSB1dGlsLnNpemVGcm9tU2hhcGUoeC5zaGFwZSk7XG5cbiAgY29uc3QgZmxhdCA9IHJlc2hhcGUoe2lucHV0czoge3h9LCBiYWNrZW5kLCBhdHRyczoge3NoYXBlOiBbeFNpemVdfX0pO1xuXG4gIGNvbnN0IHByb2dyYW0gPSBuZXcgRGlhZ1Byb2dyYW0oeFNpemUpO1xuICBjb25zdCByZXMgPSBiYWNrZW5kLnJ1bldlYkdQVVByb2dyYW0ocHJvZ3JhbSwgW2ZsYXRdLCBmbGF0LmR0eXBlKTtcblxuICBjb25zdCBvdXQgPSByZXNoYXBlKHtpbnB1dHM6IHt4OiByZXN9LCBiYWNrZW5kLCBhdHRyczoge3NoYXBlOiBvdXRTaGFwZX19KTtcblxuICBiYWNrZW5kLmRpc3Bvc2VEYXRhKGZsYXQuZGF0YUlkKTtcbiAgYmFja2VuZC5kaXNwb3NlRGF0YShyZXMuZGF0YUlkKTtcblxuICByZXR1cm4gb3V0O1xufVxuXG5leHBvcnQgY29uc3QgZGlhZ0NvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBEaWFnLFxuICBiYWNrZW5kTmFtZTogJ3dlYmdwdScsXG4gIGtlcm5lbEZ1bmM6IGRpYWcgYXMgdW5rbm93biBhcyBLZXJuZWxGdW5jXG59O1xuIl19","/**\n * @license\n * Copyright 2022 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { getMainHeaderString as main } from './webgpu_program';\nimport { computeDispatch, flatDispatchLayout } from './webgpu_util';\nexport class Dilation2DProgram {\n    constructor(convInfo) {\n        this.variableNames = ['x', 'w'];\n        this.uniforms = 'filterDims: vec2<i32>, pads: vec2<i32>, strides: vec2<i32>, dilations: vec2<i32>';\n        this.workgroupSize = [64, 1, 1];\n        this.size = true;\n        this.outputShape = convInfo.outShape;\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize);\n        this.shaderKey = 'dilation2d';\n    }\n    getUserCode() {\n        const userCode = `\n       ${main('index')} {\n         if (index < uniforms.size) {\n           let neg_infinity = -3.4e38;\n           let coords = getOutputCoords();\n           let batch = coords.x;\n           let d1 = coords.w;\n           let outTopLeftCorner = coords.yz * uniforms.strides - uniforms.pads;\n           let hBeg = outTopLeftCorner.x;\n           let wBeg = outTopLeftCorner.y;\n\n           var curVal = neg_infinity;\n           for (var h = 0; h < uniforms.filterDims[0]; h = h + 1) {\n             let hIn = hBeg + h * uniforms.dilations[0];\n\n             if (hIn >= 0 && hIn < uniforms.xShape[1]) {\n               for (var w = 0; w < uniforms.filterDims[1]; w = w + 1) {\n                 let wIn = wBeg + w * uniforms.dilations[1];\n\n                 if (wIn >= 0 && wIn < uniforms.xShape[2]) {\n                   let val = getX(batch, hIn, wIn, d1) + getW(h, w, d1);\n                   if (val > curVal) {\n                     curVal = val;\n                   }\n                 }\n               }\n             }\n           }\n\n           setOutputAtIndex(index, curVal);\n         }\n       }\n     `;\n        return userCode;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGlsYXRpb25fd2ViZ3B1LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMvZGlsYXRpb25fd2ViZ3B1LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUlILE9BQU8sRUFBQyxtQkFBbUIsSUFBSSxJQUFJLEVBQWdCLE1BQU0sa0JBQWtCLENBQUM7QUFDNUUsT0FBTyxFQUFDLGVBQWUsRUFBRSxrQkFBa0IsRUFBQyxNQUFNLGVBQWUsQ0FBQztBQUVsRSxNQUFNLE9BQU8saUJBQWlCO0lBVzVCLFlBQVksUUFBaUM7UUFON0Msa0JBQWEsR0FBRyxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQztRQUMzQixhQUFRLEdBQ0osa0ZBQWtGLENBQUM7UUFDdkYsa0JBQWEsR0FBNkIsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ3JELFNBQUksR0FBRyxJQUFJLENBQUM7UUFHVixJQUFJLENBQUMsV0FBVyxHQUFHLFFBQVEsQ0FBQyxRQUFRLENBQUM7UUFDckMsSUFBSSxDQUFDLGNBQWMsR0FBRyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDM0QsSUFBSSxDQUFDLFFBQVEsR0FBRyxlQUFlLENBQzNCLElBQUksQ0FBQyxjQUFjLEVBQUUsSUFBSSxDQUFDLFdBQVcsRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7UUFFL0QsSUFBSSxDQUFDLFNBQVMsR0FBRyxZQUFZLENBQUM7SUFDaEMsQ0FBQztJQUVELFdBQVc7UUFDVCxNQUFNLFFBQVEsR0FBRztTQUNaLElBQUksQ0FBQyxPQUFPLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7TUErQmhCLENBQUM7UUFDSCxPQUFPLFFBQVEsQ0FBQztJQUNsQixDQUFDO0NBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7YmFja2VuZF91dGlsfSBmcm9tICdAdGVuc29yZmxvdy90ZmpzLWNvcmUnO1xuXG5pbXBvcnQge2dldE1haW5IZWFkZXJTdHJpbmcgYXMgbWFpbiwgV2ViR1BVUHJvZ3JhbX0gZnJvbSAnLi93ZWJncHVfcHJvZ3JhbSc7XG5pbXBvcnQge2NvbXB1dGVEaXNwYXRjaCwgZmxhdERpc3BhdGNoTGF5b3V0fSBmcm9tICcuL3dlYmdwdV91dGlsJztcblxuZXhwb3J0IGNsYXNzIERpbGF0aW9uMkRQcm9ncmFtIGltcGxlbWVudHMgV2ViR1BVUHJvZ3JhbSB7XG4gIG91dHB1dFNoYXBlOiBudW1iZXJbXTtcbiAgc2hhZGVyS2V5OiBzdHJpbmc7XG4gIGRpc3BhdGNoTGF5b3V0OiB7eDogbnVtYmVyW119O1xuICBkaXNwYXRjaDogW251bWJlciwgbnVtYmVyLCBudW1iZXJdO1xuICB2YXJpYWJsZU5hbWVzID0gWyd4JywgJ3cnXTtcbiAgdW5pZm9ybXMgPVxuICAgICAgJ2ZpbHRlckRpbXM6IHZlYzI8aTMyPiwgcGFkczogdmVjMjxpMzI+LCBzdHJpZGVzOiB2ZWMyPGkzMj4sIGRpbGF0aW9uczogdmVjMjxpMzI+JztcbiAgd29ya2dyb3VwU2l6ZTogW251bWJlciwgbnVtYmVyLCBudW1iZXJdID0gWzY0LCAxLCAxXTtcbiAgc2l6ZSA9IHRydWU7XG5cbiAgY29uc3RydWN0b3IoY29udkluZm86IGJhY2tlbmRfdXRpbC5Db252MkRJbmZvKSB7XG4gICAgdGhpcy5vdXRwdXRTaGFwZSA9IGNvbnZJbmZvLm91dFNoYXBlO1xuICAgIHRoaXMuZGlzcGF0Y2hMYXlvdXQgPSBmbGF0RGlzcGF0Y2hMYXlvdXQodGhpcy5vdXRwdXRTaGFwZSk7XG4gICAgdGhpcy5kaXNwYXRjaCA9IGNvbXB1dGVEaXNwYXRjaChcbiAgICAgICAgdGhpcy5kaXNwYXRjaExheW91dCwgdGhpcy5vdXRwdXRTaGFwZSwgdGhpcy53b3JrZ3JvdXBTaXplKTtcblxuICAgIHRoaXMuc2hhZGVyS2V5ID0gJ2RpbGF0aW9uMmQnO1xuICB9XG5cbiAgZ2V0VXNlckNvZGUoKTogc3RyaW5nIHtcbiAgICBjb25zdCB1c2VyQ29kZSA9IGBcbiAgICAgICAke21haW4oJ2luZGV4Jyl9IHtcbiAgICAgICAgIGlmIChpbmRleCA8IHVuaWZvcm1zLnNpemUpIHtcbiAgICAgICAgICAgbGV0IG5lZ19pbmZpbml0eSA9IC0zLjRlMzg7XG4gICAgICAgICAgIGxldCBjb29yZHMgPSBnZXRPdXRwdXRDb29yZHMoKTtcbiAgICAgICAgICAgbGV0IGJhdGNoID0gY29vcmRzLng7XG4gICAgICAgICAgIGxldCBkMSA9IGNvb3Jkcy53O1xuICAgICAgICAgICBsZXQgb3V0VG9wTGVmdENvcm5lciA9IGNvb3Jkcy55eiAqIHVuaWZvcm1zLnN0cmlkZXMgLSB1bmlmb3Jtcy5wYWRzO1xuICAgICAgICAgICBsZXQgaEJlZyA9IG91dFRvcExlZnRDb3JuZXIueDtcbiAgICAgICAgICAgbGV0IHdCZWcgPSBvdXRUb3BMZWZ0Q29ybmVyLnk7XG5cbiAgICAgICAgICAgdmFyIGN1clZhbCA9IG5lZ19pbmZpbml0eTtcbiAgICAgICAgICAgZm9yICh2YXIgaCA9IDA7IGggPCB1bmlmb3Jtcy5maWx0ZXJEaW1zWzBdOyBoID0gaCArIDEpIHtcbiAgICAgICAgICAgICBsZXQgaEluID0gaEJlZyArIGggKiB1bmlmb3Jtcy5kaWxhdGlvbnNbMF07XG5cbiAgICAgICAgICAgICBpZiAoaEluID49IDAgJiYgaEluIDwgdW5pZm9ybXMueFNoYXBlWzFdKSB7XG4gICAgICAgICAgICAgICBmb3IgKHZhciB3ID0gMDsgdyA8IHVuaWZvcm1zLmZpbHRlckRpbXNbMV07IHcgPSB3ICsgMSkge1xuICAgICAgICAgICAgICAgICBsZXQgd0luID0gd0JlZyArIHcgKiB1bmlmb3Jtcy5kaWxhdGlvbnNbMV07XG5cbiAgICAgICAgICAgICAgICAgaWYgKHdJbiA+PSAwICYmIHdJbiA8IHVuaWZvcm1zLnhTaGFwZVsyXSkge1xuICAgICAgICAgICAgICAgICAgIGxldCB2YWwgPSBnZXRYKGJhdGNoLCBoSW4sIHdJbiwgZDEpICsgZ2V0VyhoLCB3LCBkMSk7XG4gICAgICAgICAgICAgICAgICAgaWYgKHZhbCA+IGN1clZhbCkge1xuICAgICAgICAgICAgICAgICAgICAgY3VyVmFsID0gdmFsO1xuICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgIH1cbiAgICAgICAgICAgfVxuXG4gICAgICAgICAgIHNldE91dHB1dEF0SW5kZXgoaW5kZXgsIGN1clZhbCk7XG4gICAgICAgICB9XG4gICAgICAgfVxuICAgICBgO1xuICAgIHJldHVybiB1c2VyQ29kZTtcbiAgfVxufVxuIl19","/**\n * @license\n * Copyright 2022 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { backend_util, Dilation2D } from '@tensorflow/tfjs-core';\nimport { Dilation2DProgram } from '../dilation_webgpu';\nexport function dilation2D(args) {\n    const { inputs, backend, attrs } = args;\n    const { x, filter } = inputs;\n    const { strides, pad, dilations } = attrs;\n    const convInfo = backend_util.computeDilation2DInfo(x.shape, filter.shape, strides, pad, 'NHWC' /* dataFormat */, dilations);\n    const padInfo = [convInfo.padInfo.top, convInfo.padInfo.left];\n    const uniformData = [\n        { type: 'int32', data: [convInfo.filterHeight, convInfo.filterWidth] },\n        { type: 'int32', data: [...padInfo] },\n        { type: 'int32', data: [convInfo.strideHeight, convInfo.strideWidth] },\n        { type: 'int32', data: [convInfo.dilationHeight, convInfo.dilationWidth] }\n    ];\n    const program = new Dilation2DProgram(convInfo);\n    const out = backend.runWebGPUProgram(program, [x, filter], x.dtype, uniformData);\n    return out;\n}\nexport const dilation2DConfig = {\n    kernelName: Dilation2D,\n    backendName: 'webgpu',\n    kernelFunc: dilation2D\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRGlsYXRpb24yRC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2tlcm5lbHMvRGlsYXRpb24yRC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQUMsWUFBWSxFQUFFLFVBQVUsRUFBMEUsTUFBTSx1QkFBdUIsQ0FBQztBQUd4SSxPQUFPLEVBQUMsaUJBQWlCLEVBQUMsTUFBTSxvQkFBb0IsQ0FBQztBQUVyRCxNQUFNLFVBQVUsVUFBVSxDQUFDLElBSTFCO0lBQ0MsTUFBTSxFQUFDLE1BQU0sRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFDLEdBQUcsSUFBSSxDQUFDO0lBQ3RDLE1BQU0sRUFBQyxDQUFDLEVBQUUsTUFBTSxFQUFDLEdBQUcsTUFBTSxDQUFDO0lBQzNCLE1BQU0sRUFBQyxPQUFPLEVBQUUsR0FBRyxFQUFFLFNBQVMsRUFBQyxHQUFHLEtBQUssQ0FBQztJQUV4QyxNQUFNLFFBQVEsR0FBRyxZQUFZLENBQUMscUJBQXFCLENBQy9DLENBQUMsQ0FBQyxLQUF5QyxFQUMzQyxNQUFNLENBQUMsS0FBaUMsRUFBRSxPQUFPLEVBQUUsR0FBRyxFQUN0RCxNQUFNLENBQUMsZ0JBQWdCLEVBQUUsU0FBUyxDQUFDLENBQUM7SUFDeEMsTUFBTSxPQUFPLEdBQUcsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxRQUFRLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQzlELE1BQU0sV0FBVyxHQUFHO1FBQ2xCLEVBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsQ0FBQyxRQUFRLENBQUMsWUFBWSxFQUFFLFFBQVEsQ0FBQyxXQUFXLENBQUMsRUFBQztRQUNwRSxFQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLENBQUMsR0FBRyxPQUFPLENBQUMsRUFBQztRQUNuQyxFQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLENBQUMsUUFBUSxDQUFDLFlBQVksRUFBRSxRQUFRLENBQUMsV0FBVyxDQUFDLEVBQUM7UUFDcEUsRUFBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxDQUFDLFFBQVEsQ0FBQyxjQUFjLEVBQUUsUUFBUSxDQUFDLGFBQWEsQ0FBQyxFQUFDO0tBQ3pFLENBQUM7SUFFRixNQUFNLE9BQU8sR0FBRyxJQUFJLGlCQUFpQixDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQ2hELE1BQU0sR0FBRyxHQUNMLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEtBQUssRUFBRSxXQUFXLENBQUMsQ0FBQztJQUV6RSxPQUFPLEdBQUcsQ0FBQztBQUNiLENBQUM7QUFFRCxNQUFNLENBQUMsTUFBTSxnQkFBZ0IsR0FBaUI7SUFDNUMsVUFBVSxFQUFFLFVBQVU7SUFDdEIsV0FBVyxFQUFFLFFBQVE7SUFDckIsVUFBVSxFQUFFLFVBQW1DO0NBQ2hELENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7YmFja2VuZF91dGlsLCBEaWxhdGlvbjJELCBEaWxhdGlvbjJEQXR0cnMsIERpbGF0aW9uMkRJbnB1dHMsIEtlcm5lbENvbmZpZywgS2VybmVsRnVuYywgVGVuc29ySW5mb30gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcblxuaW1wb3J0IHtXZWJHUFVCYWNrZW5kfSBmcm9tICcuLi9iYWNrZW5kX3dlYmdwdSc7XG5pbXBvcnQge0RpbGF0aW9uMkRQcm9ncmFtfSBmcm9tICcuLi9kaWxhdGlvbl93ZWJncHUnO1xuXG5leHBvcnQgZnVuY3Rpb24gZGlsYXRpb24yRChhcmdzOiB7XG4gIGlucHV0czogRGlsYXRpb24yRElucHV0cyxcbiAgYXR0cnM6IERpbGF0aW9uMkRBdHRycyxcbiAgYmFja2VuZDogV2ViR1BVQmFja2VuZFxufSk6IFRlbnNvckluZm8ge1xuICBjb25zdCB7aW5wdXRzLCBiYWNrZW5kLCBhdHRyc30gPSBhcmdzO1xuICBjb25zdCB7eCwgZmlsdGVyfSA9IGlucHV0cztcbiAgY29uc3Qge3N0cmlkZXMsIHBhZCwgZGlsYXRpb25zfSA9IGF0dHJzO1xuXG4gIGNvbnN0IGNvbnZJbmZvID0gYmFja2VuZF91dGlsLmNvbXB1dGVEaWxhdGlvbjJESW5mbyhcbiAgICAgIHguc2hhcGUgYXMgW251bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcl0sXG4gICAgICBmaWx0ZXIuc2hhcGUgYXMgW251bWJlciwgbnVtYmVyLCBudW1iZXJdLCBzdHJpZGVzLCBwYWQsXG4gICAgICAnTkhXQycgLyogZGF0YUZvcm1hdCAqLywgZGlsYXRpb25zKTtcbiAgY29uc3QgcGFkSW5mbyA9IFtjb252SW5mby5wYWRJbmZvLnRvcCwgY29udkluZm8ucGFkSW5mby5sZWZ0XTtcbiAgY29uc3QgdW5pZm9ybURhdGEgPSBbXG4gICAge3R5cGU6ICdpbnQzMicsIGRhdGE6IFtjb252SW5mby5maWx0ZXJIZWlnaHQsIGNvbnZJbmZvLmZpbHRlcldpZHRoXX0sXG4gICAge3R5cGU6ICdpbnQzMicsIGRhdGE6IFsuLi5wYWRJbmZvXX0sXG4gICAge3R5cGU6ICdpbnQzMicsIGRhdGE6IFtjb252SW5mby5zdHJpZGVIZWlnaHQsIGNvbnZJbmZvLnN0cmlkZVdpZHRoXX0sXG4gICAge3R5cGU6ICdpbnQzMicsIGRhdGE6IFtjb252SW5mby5kaWxhdGlvbkhlaWdodCwgY29udkluZm8uZGlsYXRpb25XaWR0aF19XG4gIF07XG5cbiAgY29uc3QgcHJvZ3JhbSA9IG5ldyBEaWxhdGlvbjJEUHJvZ3JhbShjb252SW5mbyk7XG4gIGNvbnN0IG91dCA9XG4gICAgICBiYWNrZW5kLnJ1bldlYkdQVVByb2dyYW0ocHJvZ3JhbSwgW3gsIGZpbHRlcl0sIHguZHR5cGUsIHVuaWZvcm1EYXRhKTtcblxuICByZXR1cm4gb3V0O1xufVxuXG5leHBvcnQgY29uc3QgZGlsYXRpb24yRENvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBEaWxhdGlvbjJELFxuICBiYWNrZW5kTmFtZTogJ3dlYmdwdScsXG4gIGtlcm5lbEZ1bmM6IGRpbGF0aW9uMkQgYXMgdW5rbm93biBhcyBLZXJuZWxGdW5jXG59O1xuIl19","/**\n * @license\n * Copyright 2023 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { atomicAddSnippet } from './shader_util';\nimport { getMainHeaderString as main } from './webgpu_program';\nimport { computeDispatch, flatDispatchLayout } from './webgpu_util';\nexport class Dilation2DBackpropInputProgram {\n    constructor(convInfo, outputDtype) {\n        this.variableNames = ['x', 'w', 'dy'];\n        this.uniforms = 'filterDims: vec2<i32>, pads: vec2<i32>, strides: vec2<i32>, dilations: vec2<i32>, dySize: i32,';\n        this.workgroupSize = [64, 1, 1];\n        this.atomic = true;\n        this.outputShape = convInfo.inShape;\n        this.dispatchLayout = flatDispatchLayout(convInfo.outShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, convInfo.outShape, this.workgroupSize);\n        if (outputDtype !== 'float32' && outputDtype !== 'int32') {\n            throw new Error(`Dilation2DBackpropInput only supports float32 and int32\n          types, does not support ${outputDtype} type.`);\n        }\n        this.type = outputDtype;\n        this.shaderKey = 'dilation2DBackpropInput';\n    }\n    getUserCode() {\n        // This implementation follows the TF c++ cuda implementation:\n        // https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/kernels/dilation_ops_gpu.cu.cc\n        const userCode = `\n       ${main('index')} {\n         if (index < uniforms.dySize) {\n           let coords = getDyCoordsFromIndex(index);\n           let b = coords[0];\n           let r = coords[1];\n           let c = coords[2];\n           let d = coords[3];\n\n           let dyCorner = vec2<i32>(r, c) * uniforms.strides - uniforms.pads;\n           var curVal = -3.4e38;  // neg_infinity\n           var xRMax = 0;\n           var xCMax = 0;\n\n           // In the case of multiple argmax branches, we only back-propagate\n           // along the last branch, i.e., the one with largest value of\n           // 'wR * uniforms.filterDims[1] + wC', similarly to the max-pooling\n           // backward routines.\n           for (var wR = 0; wR < uniforms.filterDims[0]; wR++) {\n             let xR = dyCorner.x + wR * uniforms.dilations[0];\n\n             if (xR >= 0 && xR < uniforms.xShape[1]) {\n               for (var wC = 0; wC < uniforms.filterDims[1]; wC++) {\n                 let xC = dyCorner.y + wC * uniforms.dilations[1];\n\n                 if (xC >= 0 && xC < uniforms.xShape[2]) {\n                   let val = getX(b, xR, xC, d) + getW(wR, wC, d);\n                   if (val > curVal) {\n                     curVal = val;\n                     xRMax = xR;\n                     xCMax = xC;\n                   }\n                 }\n               }\n             }\n           }\n\n           let flatIndexIn = d + uniforms.xShape[3] *\n               (xCMax + uniforms.xShape[2] * (xRMax + uniforms.xShape[1] * b));\n           let value = getDy(b, r, c, d);\n           ${atomicAddSnippet('&result[flatIndexIn]', 'value', this.type)}\n         }\n       }\n     `;\n        return userCode;\n    }\n}\nexport class Dilation2DBackpropFilterProgram {\n    constructor(convInfo, shape, outputDtype) {\n        this.variableNames = ['x', 'w', 'dy'];\n        this.uniforms = 'filterDims: vec2<i32>, pads: vec2<i32>, strides: vec2<i32>, dilations: vec2<i32>, dySize: i32,';\n        this.workgroupSize = [64, 1, 1];\n        this.atomic = true;\n        this.outputShape = convInfo.filterShape;\n        this.dispatchLayout = flatDispatchLayout(convInfo.outShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, convInfo.outShape, this.workgroupSize);\n        if (outputDtype !== 'float32' && outputDtype !== 'int32') {\n            throw new Error(`Dilation2DBackpropFilter only supports float32 and int32\n          types, does not support ${outputDtype} type.`);\n        }\n        this.type = outputDtype;\n        this.shaderKey = 'dilation2DBackpropFilter';\n    }\n    getUserCode() {\n        // This implementation follows the TF c++ cuda implementation:\n        // https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/kernels/dilation_ops_gpu.cu.cc\n        const userCode = `\n       ${main('index')} {\n         if (index < uniforms.dySize) {\n           let coords = getDyCoordsFromIndex(index);\n           let b = coords[0];\n           let r = coords[1];\n           let c = coords[2];\n           let d = coords[3];\n\n           let dyCorner = vec2<i32>(r, c) * uniforms.strides - uniforms.pads;\n           var curVal = -3.4e38;  // neg_infinity\n           var wRMax = 0;\n           var wCMax = 0;\n\n           // In the case of multiple argmax branches, we only back-propagate\n           // along the last branch, i.e., the one with largest value of\n           // 'wR * uniforms.filterDims[1] + wC', similarly to the max-pooling\n           // backward routines.\n           for (var wR = 0; wR < uniforms.filterDims[0]; wR++) {\n             let xR = dyCorner.x + wR * uniforms.dilations[0];\n\n             if (xR >= 0 && xR < uniforms.xShape[1]) {\n               for (var wC = 0; wC < uniforms.filterDims[1]; wC++) {\n                 let xC = dyCorner.y + wC * uniforms.dilations[1];\n\n                 if (xC >= 0 && xC < uniforms.xShape[2]) {\n                   let val = getX(b, xR, xC, d) + getW(wR, wC, d);\n                   if (val > curVal) {\n                     curVal = val;\n                     wRMax = wR;\n                     wCMax = wC;\n                   }\n                 }\n               }\n             }\n           }\n\n           let flatIndexIn = d + uniforms.wShape[2] * (wCMax + wRMax * uniforms.wShape[1]);\n           let value = getDy(b, r, c, d);\n           ${atomicAddSnippet('&result[flatIndexIn]', 'value', this.type)}\n         }\n       }\n     `;\n        return userCode;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGlsYXRpb25fYmFja3Byb3Bfd2ViZ3B1LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMvZGlsYXRpb25fYmFja3Byb3Bfd2ViZ3B1LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUlILE9BQU8sRUFBQyxnQkFBZ0IsRUFBQyxNQUFNLGVBQWUsQ0FBQztBQUMvQyxPQUFPLEVBQUMsbUJBQW1CLElBQUksSUFBSSxFQUFnQixNQUFNLGtCQUFrQixDQUFDO0FBQzVFLE9BQU8sRUFBQyxlQUFlLEVBQUUsa0JBQWtCLEVBQUMsTUFBTSxlQUFlLENBQUM7QUFFbEUsTUFBTSxPQUFPLDhCQUE4QjtJQVl6QyxZQUFZLFFBQWlDLEVBQUUsV0FBcUI7UUFQcEUsa0JBQWEsR0FBRyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFDakMsYUFBUSxHQUNKLGdHQUFnRyxDQUFDO1FBQ3JHLGtCQUFhLEdBQTZCLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUNyRCxXQUFNLEdBQUcsSUFBSSxDQUFDO1FBSVosSUFBSSxDQUFDLFdBQVcsR0FBRyxRQUFRLENBQUMsT0FBTyxDQUFDO1FBQ3BDLElBQUksQ0FBQyxjQUFjLEdBQUcsa0JBQWtCLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQzVELElBQUksQ0FBQyxRQUFRLEdBQUcsZUFBZSxDQUMzQixJQUFJLENBQUMsY0FBYyxFQUFFLFFBQVEsQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBRWhFLElBQUksV0FBVyxLQUFLLFNBQVMsSUFBSSxXQUFXLEtBQUssT0FBTyxFQUFFO1lBQ3hELE1BQU0sSUFBSSxLQUFLLENBQUM7b0NBQ2MsV0FBVyxRQUFRLENBQUMsQ0FBQztTQUNwRDtRQUNELElBQUksQ0FBQyxJQUFJLEdBQUcsV0FBVyxDQUFDO1FBQ3hCLElBQUksQ0FBQyxTQUFTLEdBQUcseUJBQXlCLENBQUM7SUFDN0MsQ0FBQztJQUVELFdBQVc7UUFDVCw4REFBOEQ7UUFDOUQsc0dBQXNHO1FBQ3RHLE1BQU0sUUFBUSxHQUFHO1NBQ1osSUFBSSxDQUFDLE9BQU8sQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O2FBd0NkLGdCQUFnQixDQUNaLHNCQUFzQixFQUFFLE9BQU8sRUFBRSxJQUFJLENBQUMsSUFBMkIsQ0FBQzs7O01BR3hFLENBQUM7UUFDSCxPQUFPLFFBQVEsQ0FBQztJQUNsQixDQUFDO0NBQ0Y7QUFFRCxNQUFNLE9BQU8sK0JBQStCO0lBWTFDLFlBQ0ksUUFBaUMsRUFBRSxLQUFlLEVBQ2xELFdBQXFCO1FBVHpCLGtCQUFhLEdBQUcsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQ2pDLGFBQVEsR0FDSixnR0FBZ0csQ0FBQztRQUNyRyxrQkFBYSxHQUE2QixDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDckQsV0FBTSxHQUFHLElBQUksQ0FBQztRQU1aLElBQUksQ0FBQyxXQUFXLEdBQUcsUUFBUSxDQUFDLFdBQVcsQ0FBQztRQUN4QyxJQUFJLENBQUMsY0FBYyxHQUFHLGtCQUFrQixDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUM1RCxJQUFJLENBQUMsUUFBUSxHQUFHLGVBQWUsQ0FDM0IsSUFBSSxDQUFDLGNBQWMsRUFBRSxRQUFRLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQztRQUVoRSxJQUFJLFdBQVcsS0FBSyxTQUFTLElBQUksV0FBVyxLQUFLLE9BQU8sRUFBRTtZQUN4RCxNQUFNLElBQUksS0FBSyxDQUFDO29DQUNjLFdBQVcsUUFBUSxDQUFDLENBQUM7U0FDcEQ7UUFDRCxJQUFJLENBQUMsSUFBSSxHQUFHLFdBQVcsQ0FBQztRQUN4QixJQUFJLENBQUMsU0FBUyxHQUFHLDBCQUEwQixDQUFDO0lBQzlDLENBQUM7SUFFRCxXQUFXO1FBQ1QsOERBQThEO1FBQzlELHNHQUFzRztRQUN0RyxNQUFNLFFBQVEsR0FBRztTQUNaLElBQUksQ0FBQyxPQUFPLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O2FBdUNkLGdCQUFnQixDQUNaLHNCQUFzQixFQUFFLE9BQU8sRUFBRSxJQUFJLENBQUMsSUFBMkIsQ0FBQzs7O01BR3hFLENBQUM7UUFDSCxPQUFPLFFBQVEsQ0FBQztJQUNsQixDQUFDO0NBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMyBHb29nbGUgTExDLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7YmFja2VuZF91dGlsLCBEYXRhVHlwZX0gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcblxuaW1wb3J0IHthdG9taWNBZGRTbmlwcGV0fSBmcm9tICcuL3NoYWRlcl91dGlsJztcbmltcG9ydCB7Z2V0TWFpbkhlYWRlclN0cmluZyBhcyBtYWluLCBXZWJHUFVQcm9ncmFtfSBmcm9tICcuL3dlYmdwdV9wcm9ncmFtJztcbmltcG9ydCB7Y29tcHV0ZURpc3BhdGNoLCBmbGF0RGlzcGF0Y2hMYXlvdXR9IGZyb20gJy4vd2ViZ3B1X3V0aWwnO1xuXG5leHBvcnQgY2xhc3MgRGlsYXRpb24yREJhY2twcm9wSW5wdXRQcm9ncmFtIGltcGxlbWVudHMgV2ViR1BVUHJvZ3JhbSB7XG4gIG91dHB1dFNoYXBlOiBudW1iZXJbXTtcbiAgc2hhZGVyS2V5OiBzdHJpbmc7XG4gIGRpc3BhdGNoTGF5b3V0OiB7eDogbnVtYmVyW119O1xuICBkaXNwYXRjaDogW251bWJlciwgbnVtYmVyLCBudW1iZXJdO1xuICB2YXJpYWJsZU5hbWVzID0gWyd4JywgJ3cnLCAnZHknXTtcbiAgdW5pZm9ybXMgPVxuICAgICAgJ2ZpbHRlckRpbXM6IHZlYzI8aTMyPiwgcGFkczogdmVjMjxpMzI+LCBzdHJpZGVzOiB2ZWMyPGkzMj4sIGRpbGF0aW9uczogdmVjMjxpMzI+LCBkeVNpemU6IGkzMiwnO1xuICB3b3JrZ3JvdXBTaXplOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl0gPSBbNjQsIDEsIDFdO1xuICBhdG9taWMgPSB0cnVlO1xuICB0eXBlOiBEYXRhVHlwZTtcblxuICBjb25zdHJ1Y3Rvcihjb252SW5mbzogYmFja2VuZF91dGlsLkNvbnYyREluZm8sIG91dHB1dER0eXBlOiBEYXRhVHlwZSkge1xuICAgIHRoaXMub3V0cHV0U2hhcGUgPSBjb252SW5mby5pblNoYXBlO1xuICAgIHRoaXMuZGlzcGF0Y2hMYXlvdXQgPSBmbGF0RGlzcGF0Y2hMYXlvdXQoY29udkluZm8ub3V0U2hhcGUpO1xuICAgIHRoaXMuZGlzcGF0Y2ggPSBjb21wdXRlRGlzcGF0Y2goXG4gICAgICAgIHRoaXMuZGlzcGF0Y2hMYXlvdXQsIGNvbnZJbmZvLm91dFNoYXBlLCB0aGlzLndvcmtncm91cFNpemUpO1xuXG4gICAgaWYgKG91dHB1dER0eXBlICE9PSAnZmxvYXQzMicgJiYgb3V0cHV0RHR5cGUgIT09ICdpbnQzMicpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRGlsYXRpb24yREJhY2twcm9wSW5wdXQgb25seSBzdXBwb3J0cyBmbG9hdDMyIGFuZCBpbnQzMlxuICAgICAgICAgIHR5cGVzLCBkb2VzIG5vdCBzdXBwb3J0ICR7b3V0cHV0RHR5cGV9IHR5cGUuYCk7XG4gICAgfVxuICAgIHRoaXMudHlwZSA9IG91dHB1dER0eXBlO1xuICAgIHRoaXMuc2hhZGVyS2V5ID0gJ2RpbGF0aW9uMkRCYWNrcHJvcElucHV0JztcbiAgfVxuXG4gIGdldFVzZXJDb2RlKCk6IHN0cmluZyB7XG4gICAgLy8gVGhpcyBpbXBsZW1lbnRhdGlvbiBmb2xsb3dzIHRoZSBURiBjKysgY3VkYSBpbXBsZW1lbnRhdGlvbjpcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vdGVuc29yZmxvdy90ZW5zb3JmbG93L2Jsb2IvbWFzdGVyL3RlbnNvcmZsb3cvY29yZS9rZXJuZWxzL2RpbGF0aW9uX29wc19ncHUuY3UuY2NcbiAgICBjb25zdCB1c2VyQ29kZSA9IGBcbiAgICAgICAke21haW4oJ2luZGV4Jyl9IHtcbiAgICAgICAgIGlmIChpbmRleCA8IHVuaWZvcm1zLmR5U2l6ZSkge1xuICAgICAgICAgICBsZXQgY29vcmRzID0gZ2V0RHlDb29yZHNGcm9tSW5kZXgoaW5kZXgpO1xuICAgICAgICAgICBsZXQgYiA9IGNvb3Jkc1swXTtcbiAgICAgICAgICAgbGV0IHIgPSBjb29yZHNbMV07XG4gICAgICAgICAgIGxldCBjID0gY29vcmRzWzJdO1xuICAgICAgICAgICBsZXQgZCA9IGNvb3Jkc1szXTtcblxuICAgICAgICAgICBsZXQgZHlDb3JuZXIgPSB2ZWMyPGkzMj4ociwgYykgKiB1bmlmb3Jtcy5zdHJpZGVzIC0gdW5pZm9ybXMucGFkcztcbiAgICAgICAgICAgdmFyIGN1clZhbCA9IC0zLjRlMzg7ICAvLyBuZWdfaW5maW5pdHlcbiAgICAgICAgICAgdmFyIHhSTWF4ID0gMDtcbiAgICAgICAgICAgdmFyIHhDTWF4ID0gMDtcblxuICAgICAgICAgICAvLyBJbiB0aGUgY2FzZSBvZiBtdWx0aXBsZSBhcmdtYXggYnJhbmNoZXMsIHdlIG9ubHkgYmFjay1wcm9wYWdhdGVcbiAgICAgICAgICAgLy8gYWxvbmcgdGhlIGxhc3QgYnJhbmNoLCBpLmUuLCB0aGUgb25lIHdpdGggbGFyZ2VzdCB2YWx1ZSBvZlxuICAgICAgICAgICAvLyAnd1IgKiB1bmlmb3Jtcy5maWx0ZXJEaW1zWzFdICsgd0MnLCBzaW1pbGFybHkgdG8gdGhlIG1heC1wb29saW5nXG4gICAgICAgICAgIC8vIGJhY2t3YXJkIHJvdXRpbmVzLlxuICAgICAgICAgICBmb3IgKHZhciB3UiA9IDA7IHdSIDwgdW5pZm9ybXMuZmlsdGVyRGltc1swXTsgd1IrKykge1xuICAgICAgICAgICAgIGxldCB4UiA9IGR5Q29ybmVyLnggKyB3UiAqIHVuaWZvcm1zLmRpbGF0aW9uc1swXTtcblxuICAgICAgICAgICAgIGlmICh4UiA+PSAwICYmIHhSIDwgdW5pZm9ybXMueFNoYXBlWzFdKSB7XG4gICAgICAgICAgICAgICBmb3IgKHZhciB3QyA9IDA7IHdDIDwgdW5pZm9ybXMuZmlsdGVyRGltc1sxXTsgd0MrKykge1xuICAgICAgICAgICAgICAgICBsZXQgeEMgPSBkeUNvcm5lci55ICsgd0MgKiB1bmlmb3Jtcy5kaWxhdGlvbnNbMV07XG5cbiAgICAgICAgICAgICAgICAgaWYgKHhDID49IDAgJiYgeEMgPCB1bmlmb3Jtcy54U2hhcGVbMl0pIHtcbiAgICAgICAgICAgICAgICAgICBsZXQgdmFsID0gZ2V0WChiLCB4UiwgeEMsIGQpICsgZ2V0Vyh3Uiwgd0MsIGQpO1xuICAgICAgICAgICAgICAgICAgIGlmICh2YWwgPiBjdXJWYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgIGN1clZhbCA9IHZhbDtcbiAgICAgICAgICAgICAgICAgICAgIHhSTWF4ID0geFI7XG4gICAgICAgICAgICAgICAgICAgICB4Q01heCA9IHhDO1xuICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgIH1cbiAgICAgICAgICAgfVxuXG4gICAgICAgICAgIGxldCBmbGF0SW5kZXhJbiA9IGQgKyB1bmlmb3Jtcy54U2hhcGVbM10gKlxuICAgICAgICAgICAgICAgKHhDTWF4ICsgdW5pZm9ybXMueFNoYXBlWzJdICogKHhSTWF4ICsgdW5pZm9ybXMueFNoYXBlWzFdICogYikpO1xuICAgICAgICAgICBsZXQgdmFsdWUgPSBnZXREeShiLCByLCBjLCBkKTtcbiAgICAgICAgICAgJHtcbiAgICAgICAgYXRvbWljQWRkU25pcHBldChcbiAgICAgICAgICAgICcmcmVzdWx0W2ZsYXRJbmRleEluXScsICd2YWx1ZScsIHRoaXMudHlwZSBhcyAnZmxvYXQzMicgfCAnaW50MzInKX1cbiAgICAgICAgIH1cbiAgICAgICB9XG4gICAgIGA7XG4gICAgcmV0dXJuIHVzZXJDb2RlO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBEaWxhdGlvbjJEQmFja3Byb3BGaWx0ZXJQcm9ncmFtIGltcGxlbWVudHMgV2ViR1BVUHJvZ3JhbSB7XG4gIG91dHB1dFNoYXBlOiBudW1iZXJbXTtcbiAgc2hhZGVyS2V5OiBzdHJpbmc7XG4gIGRpc3BhdGNoTGF5b3V0OiB7eDogbnVtYmVyW119O1xuICBkaXNwYXRjaDogW251bWJlciwgbnVtYmVyLCBudW1iZXJdO1xuICB2YXJpYWJsZU5hbWVzID0gWyd4JywgJ3cnLCAnZHknXTtcbiAgdW5pZm9ybXMgPVxuICAgICAgJ2ZpbHRlckRpbXM6IHZlYzI8aTMyPiwgcGFkczogdmVjMjxpMzI+LCBzdHJpZGVzOiB2ZWMyPGkzMj4sIGRpbGF0aW9uczogdmVjMjxpMzI+LCBkeVNpemU6IGkzMiwnO1xuICB3b3JrZ3JvdXBTaXplOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl0gPSBbNjQsIDEsIDFdO1xuICBhdG9taWMgPSB0cnVlO1xuICB0eXBlOiBEYXRhVHlwZTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICAgIGNvbnZJbmZvOiBiYWNrZW5kX3V0aWwuQ29udjJESW5mbywgc2hhcGU6IG51bWJlcltdLFxuICAgICAgb3V0cHV0RHR5cGU6IERhdGFUeXBlKSB7XG4gICAgdGhpcy5vdXRwdXRTaGFwZSA9IGNvbnZJbmZvLmZpbHRlclNoYXBlO1xuICAgIHRoaXMuZGlzcGF0Y2hMYXlvdXQgPSBmbGF0RGlzcGF0Y2hMYXlvdXQoY29udkluZm8ub3V0U2hhcGUpO1xuICAgIHRoaXMuZGlzcGF0Y2ggPSBjb21wdXRlRGlzcGF0Y2goXG4gICAgICAgIHRoaXMuZGlzcGF0Y2hMYXlvdXQsIGNvbnZJbmZvLm91dFNoYXBlLCB0aGlzLndvcmtncm91cFNpemUpO1xuXG4gICAgaWYgKG91dHB1dER0eXBlICE9PSAnZmxvYXQzMicgJiYgb3V0cHV0RHR5cGUgIT09ICdpbnQzMicpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRGlsYXRpb24yREJhY2twcm9wRmlsdGVyIG9ubHkgc3VwcG9ydHMgZmxvYXQzMiBhbmQgaW50MzJcbiAgICAgICAgICB0eXBlcywgZG9lcyBub3Qgc3VwcG9ydCAke291dHB1dER0eXBlfSB0eXBlLmApO1xuICAgIH1cbiAgICB0aGlzLnR5cGUgPSBvdXRwdXREdHlwZTtcbiAgICB0aGlzLnNoYWRlcktleSA9ICdkaWxhdGlvbjJEQmFja3Byb3BGaWx0ZXInO1xuICB9XG5cbiAgZ2V0VXNlckNvZGUoKTogc3RyaW5nIHtcbiAgICAvLyBUaGlzIGltcGxlbWVudGF0aW9uIGZvbGxvd3MgdGhlIFRGIGMrKyBjdWRhIGltcGxlbWVudGF0aW9uOlxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS90ZW5zb3JmbG93L3RlbnNvcmZsb3cvYmxvYi9tYXN0ZXIvdGVuc29yZmxvdy9jb3JlL2tlcm5lbHMvZGlsYXRpb25fb3BzX2dwdS5jdS5jY1xuICAgIGNvbnN0IHVzZXJDb2RlID0gYFxuICAgICAgICR7bWFpbignaW5kZXgnKX0ge1xuICAgICAgICAgaWYgKGluZGV4IDwgdW5pZm9ybXMuZHlTaXplKSB7XG4gICAgICAgICAgIGxldCBjb29yZHMgPSBnZXREeUNvb3Jkc0Zyb21JbmRleChpbmRleCk7XG4gICAgICAgICAgIGxldCBiID0gY29vcmRzWzBdO1xuICAgICAgICAgICBsZXQgciA9IGNvb3Jkc1sxXTtcbiAgICAgICAgICAgbGV0IGMgPSBjb29yZHNbMl07XG4gICAgICAgICAgIGxldCBkID0gY29vcmRzWzNdO1xuXG4gICAgICAgICAgIGxldCBkeUNvcm5lciA9IHZlYzI8aTMyPihyLCBjKSAqIHVuaWZvcm1zLnN0cmlkZXMgLSB1bmlmb3Jtcy5wYWRzO1xuICAgICAgICAgICB2YXIgY3VyVmFsID0gLTMuNGUzODsgIC8vIG5lZ19pbmZpbml0eVxuICAgICAgICAgICB2YXIgd1JNYXggPSAwO1xuICAgICAgICAgICB2YXIgd0NNYXggPSAwO1xuXG4gICAgICAgICAgIC8vIEluIHRoZSBjYXNlIG9mIG11bHRpcGxlIGFyZ21heCBicmFuY2hlcywgd2Ugb25seSBiYWNrLXByb3BhZ2F0ZVxuICAgICAgICAgICAvLyBhbG9uZyB0aGUgbGFzdCBicmFuY2gsIGkuZS4sIHRoZSBvbmUgd2l0aCBsYXJnZXN0IHZhbHVlIG9mXG4gICAgICAgICAgIC8vICd3UiAqIHVuaWZvcm1zLmZpbHRlckRpbXNbMV0gKyB3QycsIHNpbWlsYXJseSB0byB0aGUgbWF4LXBvb2xpbmdcbiAgICAgICAgICAgLy8gYmFja3dhcmQgcm91dGluZXMuXG4gICAgICAgICAgIGZvciAodmFyIHdSID0gMDsgd1IgPCB1bmlmb3Jtcy5maWx0ZXJEaW1zWzBdOyB3UisrKSB7XG4gICAgICAgICAgICAgbGV0IHhSID0gZHlDb3JuZXIueCArIHdSICogdW5pZm9ybXMuZGlsYXRpb25zWzBdO1xuXG4gICAgICAgICAgICAgaWYgKHhSID49IDAgJiYgeFIgPCB1bmlmb3Jtcy54U2hhcGVbMV0pIHtcbiAgICAgICAgICAgICAgIGZvciAodmFyIHdDID0gMDsgd0MgPCB1bmlmb3Jtcy5maWx0ZXJEaW1zWzFdOyB3QysrKSB7XG4gICAgICAgICAgICAgICAgIGxldCB4QyA9IGR5Q29ybmVyLnkgKyB3QyAqIHVuaWZvcm1zLmRpbGF0aW9uc1sxXTtcblxuICAgICAgICAgICAgICAgICBpZiAoeEMgPj0gMCAmJiB4QyA8IHVuaWZvcm1zLnhTaGFwZVsyXSkge1xuICAgICAgICAgICAgICAgICAgIGxldCB2YWwgPSBnZXRYKGIsIHhSLCB4QywgZCkgKyBnZXRXKHdSLCB3QywgZCk7XG4gICAgICAgICAgICAgICAgICAgaWYgKHZhbCA+IGN1clZhbCkge1xuICAgICAgICAgICAgICAgICAgICAgY3VyVmFsID0gdmFsO1xuICAgICAgICAgICAgICAgICAgICAgd1JNYXggPSB3UjtcbiAgICAgICAgICAgICAgICAgICAgIHdDTWF4ID0gd0M7XG4gICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgfVxuICAgICAgICAgICB9XG5cbiAgICAgICAgICAgbGV0IGZsYXRJbmRleEluID0gZCArIHVuaWZvcm1zLndTaGFwZVsyXSAqICh3Q01heCArIHdSTWF4ICogdW5pZm9ybXMud1NoYXBlWzFdKTtcbiAgICAgICAgICAgbGV0IHZhbHVlID0gZ2V0RHkoYiwgciwgYywgZCk7XG4gICAgICAgICAgICR7XG4gICAgICAgIGF0b21pY0FkZFNuaXBwZXQoXG4gICAgICAgICAgICAnJnJlc3VsdFtmbGF0SW5kZXhJbl0nLCAndmFsdWUnLCB0aGlzLnR5cGUgYXMgJ2Zsb2F0MzInIHwgJ2ludDMyJyl9XG4gICAgICAgICB9XG4gICAgICAgfVxuICAgICBgO1xuICAgIHJldHVybiB1c2VyQ29kZTtcbiAgfVxufVxuIl19","/**\n * @license\n * Copyright 2023 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { backend_util, Dilation2DBackpropFilter, util } from '@tensorflow/tfjs-core';\nimport { Dilation2DBackpropFilterProgram } from '../dilation_backprop_webgpu';\nimport { fill } from './Fill';\nexport function dilation2DBackpropFilter(args) {\n    const { inputs, backend, attrs } = args;\n    const { x, filter, dy } = inputs;\n    const { strides, pad, dilations } = attrs;\n    const convInfo = backend_util.computeDilation2DInfo(x.shape, filter.shape, strides, pad, 'NHWC' /* dataFormat */, dilations);\n    const dtype = filter.dtype;\n    const program = new Dilation2DBackpropFilterProgram(convInfo, filter.shape, dtype);\n    const uniformData = [\n        { type: 'int32', data: [convInfo.filterHeight, convInfo.filterWidth] },\n        { type: 'int32', data: [convInfo.padInfo.top, convInfo.padInfo.left] },\n        { type: 'int32', data: [convInfo.strideHeight, convInfo.strideWidth] },\n        { type: 'int32', data: [convInfo.dilationHeight, convInfo.dilationWidth] },\n        { type: 'int32', data: [util.sizeFromShape(convInfo.outShape)] }\n    ];\n    const output = fill({ backend, attrs: { shape: filter.shape, value: 0, dtype } });\n    return backend.runWebGPUProgram(program, [x, filter, dy], dtype, uniformData, output);\n}\nexport const dilation2DBackpropFilterConfig = {\n    kernelName: Dilation2DBackpropFilter,\n    backendName: 'webgpu',\n    kernelFunc: dilation2DBackpropFilter\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRGlsYXRpb24yREJhY2twcm9wRmlsdGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMva2VybmVscy9EaWxhdGlvbjJEQmFja3Byb3BGaWx0ZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUFDLFlBQVksRUFBbUIsd0JBQXdCLEVBQXdFLElBQUksRUFBQyxNQUFNLHVCQUF1QixDQUFDO0FBRzFLLE9BQU8sRUFBQywrQkFBK0IsRUFBQyxNQUFNLDZCQUE2QixDQUFDO0FBQzVFLE9BQU8sRUFBQyxJQUFJLEVBQUMsTUFBTSxRQUFRLENBQUM7QUFFNUIsTUFBTSxVQUFVLHdCQUF3QixDQUFDLElBSXhDO0lBQ0MsTUFBTSxFQUFDLE1BQU0sRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFDLEdBQUcsSUFBSSxDQUFDO0lBQ3RDLE1BQU0sRUFBQyxDQUFDLEVBQUUsTUFBTSxFQUFFLEVBQUUsRUFBQyxHQUFHLE1BQU0sQ0FBQztJQUMvQixNQUFNLEVBQUMsT0FBTyxFQUFFLEdBQUcsRUFBRSxTQUFTLEVBQUMsR0FBRyxLQUFLLENBQUM7SUFFeEMsTUFBTSxRQUFRLEdBQUcsWUFBWSxDQUFDLHFCQUFxQixDQUMvQyxDQUFDLENBQUMsS0FBeUMsRUFDM0MsTUFBTSxDQUFDLEtBQWlDLEVBQUUsT0FBTyxFQUFFLEdBQUcsRUFDdEQsTUFBTSxDQUFDLGdCQUFnQixFQUFFLFNBQVMsQ0FBQyxDQUFDO0lBRXhDLE1BQU0sS0FBSyxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUM7SUFDM0IsTUFBTSxPQUFPLEdBQ1QsSUFBSSwrQkFBK0IsQ0FBQyxRQUFRLEVBQUUsTUFBTSxDQUFDLEtBQUssRUFBRSxLQUFLLENBQUMsQ0FBQztJQUN2RSxNQUFNLFdBQVcsR0FBRztRQUNsQixFQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLENBQUMsUUFBUSxDQUFDLFlBQVksRUFBRSxRQUFRLENBQUMsV0FBVyxDQUFDLEVBQUM7UUFDcEUsRUFBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLFFBQVEsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEVBQUM7UUFDcEUsRUFBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxDQUFDLFFBQVEsQ0FBQyxZQUFZLEVBQUUsUUFBUSxDQUFDLFdBQVcsQ0FBQyxFQUFDO1FBQ3BFLEVBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsQ0FBQyxRQUFRLENBQUMsY0FBYyxFQUFFLFFBQVEsQ0FBQyxhQUFhLENBQUMsRUFBQztRQUN4RSxFQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLENBQUMsRUFBQztLQUMvRCxDQUFDO0lBQ0YsTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLEVBQUMsT0FBTyxFQUFFLEtBQUssRUFBRSxFQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsS0FBSyxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUUsS0FBSyxFQUFDLEVBQUMsQ0FBQyxDQUFDO0lBQzlFLE9BQU8sT0FBTyxDQUFDLGdCQUFnQixDQUMzQixPQUFPLEVBQUUsQ0FBQyxDQUFDLEVBQUUsTUFBTSxFQUFFLEVBQUUsQ0FBQyxFQUFFLEtBQUssRUFBRSxXQUFXLEVBQUUsTUFBTSxDQUFDLENBQUM7QUFDNUQsQ0FBQztBQUVELE1BQU0sQ0FBQyxNQUFNLDhCQUE4QixHQUFpQjtJQUMxRCxVQUFVLEVBQUUsd0JBQXdCO0lBQ3BDLFdBQVcsRUFBRSxRQUFRO0lBQ3JCLFVBQVUsRUFBRSx3QkFBaUQ7Q0FDOUQsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTEMuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtiYWNrZW5kX3V0aWwsIERpbGF0aW9uMkRBdHRycywgRGlsYXRpb24yREJhY2twcm9wRmlsdGVyLCBEaWxhdGlvbjJEQmFja3Byb3BGaWx0ZXJJbnB1dHMsIEtlcm5lbENvbmZpZywgS2VybmVsRnVuYywgVGVuc29ySW5mbywgdXRpbH0gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcblxuaW1wb3J0IHtXZWJHUFVCYWNrZW5kfSBmcm9tICcuLi9iYWNrZW5kX3dlYmdwdSc7XG5pbXBvcnQge0RpbGF0aW9uMkRCYWNrcHJvcEZpbHRlclByb2dyYW19IGZyb20gJy4uL2RpbGF0aW9uX2JhY2twcm9wX3dlYmdwdSc7XG5pbXBvcnQge2ZpbGx9IGZyb20gJy4vRmlsbCc7XG5cbmV4cG9ydCBmdW5jdGlvbiBkaWxhdGlvbjJEQmFja3Byb3BGaWx0ZXIoYXJnczoge1xuICBpbnB1dHM6IERpbGF0aW9uMkRCYWNrcHJvcEZpbHRlcklucHV0cyxcbiAgYXR0cnM6IERpbGF0aW9uMkRBdHRycyxcbiAgYmFja2VuZDogV2ViR1BVQmFja2VuZFxufSk6IFRlbnNvckluZm8ge1xuICBjb25zdCB7aW5wdXRzLCBiYWNrZW5kLCBhdHRyc30gPSBhcmdzO1xuICBjb25zdCB7eCwgZmlsdGVyLCBkeX0gPSBpbnB1dHM7XG4gIGNvbnN0IHtzdHJpZGVzLCBwYWQsIGRpbGF0aW9uc30gPSBhdHRycztcblxuICBjb25zdCBjb252SW5mbyA9IGJhY2tlbmRfdXRpbC5jb21wdXRlRGlsYXRpb24yREluZm8oXG4gICAgICB4LnNoYXBlIGFzIFtudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXJdLFxuICAgICAgZmlsdGVyLnNoYXBlIGFzIFtudW1iZXIsIG51bWJlciwgbnVtYmVyXSwgc3RyaWRlcywgcGFkLFxuICAgICAgJ05IV0MnIC8qIGRhdGFGb3JtYXQgKi8sIGRpbGF0aW9ucyk7XG5cbiAgY29uc3QgZHR5cGUgPSBmaWx0ZXIuZHR5cGU7XG4gIGNvbnN0IHByb2dyYW0gPVxuICAgICAgbmV3IERpbGF0aW9uMkRCYWNrcHJvcEZpbHRlclByb2dyYW0oY29udkluZm8sIGZpbHRlci5zaGFwZSwgZHR5cGUpO1xuICBjb25zdCB1bmlmb3JtRGF0YSA9IFtcbiAgICB7dHlwZTogJ2ludDMyJywgZGF0YTogW2NvbnZJbmZvLmZpbHRlckhlaWdodCwgY29udkluZm8uZmlsdGVyV2lkdGhdfSxcbiAgICB7dHlwZTogJ2ludDMyJywgZGF0YTogW2NvbnZJbmZvLnBhZEluZm8udG9wLCBjb252SW5mby5wYWRJbmZvLmxlZnRdfSxcbiAgICB7dHlwZTogJ2ludDMyJywgZGF0YTogW2NvbnZJbmZvLnN0cmlkZUhlaWdodCwgY29udkluZm8uc3RyaWRlV2lkdGhdfSxcbiAgICB7dHlwZTogJ2ludDMyJywgZGF0YTogW2NvbnZJbmZvLmRpbGF0aW9uSGVpZ2h0LCBjb252SW5mby5kaWxhdGlvbldpZHRoXX0sXG4gICAge3R5cGU6ICdpbnQzMicsIGRhdGE6IFt1dGlsLnNpemVGcm9tU2hhcGUoY29udkluZm8ub3V0U2hhcGUpXX1cbiAgXTtcbiAgY29uc3Qgb3V0cHV0ID0gZmlsbCh7YmFja2VuZCwgYXR0cnM6IHtzaGFwZTogZmlsdGVyLnNoYXBlLCB2YWx1ZTogMCwgZHR5cGV9fSk7XG4gIHJldHVybiBiYWNrZW5kLnJ1bldlYkdQVVByb2dyYW0oXG4gICAgICBwcm9ncmFtLCBbeCwgZmlsdGVyLCBkeV0sIGR0eXBlLCB1bmlmb3JtRGF0YSwgb3V0cHV0KTtcbn1cblxuZXhwb3J0IGNvbnN0IGRpbGF0aW9uMkRCYWNrcHJvcEZpbHRlckNvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBEaWxhdGlvbjJEQmFja3Byb3BGaWx0ZXIsXG4gIGJhY2tlbmROYW1lOiAnd2ViZ3B1JyxcbiAga2VybmVsRnVuYzogZGlsYXRpb24yREJhY2twcm9wRmlsdGVyIGFzIHVua25vd24gYXMgS2VybmVsRnVuY1xufTtcbiJdfQ==","/**\n * @license\n * Copyright 2023 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { backend_util, Dilation2DBackpropInput, util } from '@tensorflow/tfjs-core';\nimport { Dilation2DBackpropInputProgram } from '../dilation_backprop_webgpu';\nimport { fill } from './Fill';\nexport function dilation2DBackpropInput(args) {\n    const { inputs, backend, attrs } = args;\n    const { x, filter, dy } = inputs;\n    const { strides, pad, dilations } = attrs;\n    const convInfo = backend_util.computeDilation2DInfo(x.shape, filter.shape, strides, pad, 'NHWC' /* dataFormat */, dilations);\n    const dtype = x.dtype;\n    const program = new Dilation2DBackpropInputProgram(convInfo, dtype);\n    const uniformData = [\n        { type: 'int32', data: [convInfo.filterHeight, convInfo.filterWidth] },\n        { type: 'int32', data: [convInfo.padInfo.top, convInfo.padInfo.left] },\n        { type: 'int32', data: [convInfo.strideHeight, convInfo.strideWidth] },\n        { type: 'int32', data: [convInfo.dilationHeight, convInfo.dilationWidth] },\n        { type: 'int32', data: [util.sizeFromShape(convInfo.outShape)] }\n    ];\n    const output = fill({ backend, attrs: { shape: convInfo.inShape, value: 0, dtype } });\n    return backend.runWebGPUProgram(program, [x, filter, dy], dtype, uniformData, output);\n}\nexport const dilation2DBackpropInputConfig = {\n    kernelName: Dilation2DBackpropInput,\n    backendName: 'webgpu',\n    kernelFunc: dilation2DBackpropInput\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRGlsYXRpb24yREJhY2twcm9wSW5wdXQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9rZXJuZWxzL0RpbGF0aW9uMkRCYWNrcHJvcElucHV0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sRUFBQyxZQUFZLEVBQW1CLHVCQUF1QixFQUF1RSxJQUFJLEVBQUMsTUFBTSx1QkFBdUIsQ0FBQztBQUd4SyxPQUFPLEVBQUMsOEJBQThCLEVBQUMsTUFBTSw2QkFBNkIsQ0FBQztBQUMzRSxPQUFPLEVBQUMsSUFBSSxFQUFDLE1BQU0sUUFBUSxDQUFDO0FBRTVCLE1BQU0sVUFBVSx1QkFBdUIsQ0FBQyxJQUl2QztJQUNDLE1BQU0sRUFBQyxNQUFNLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBQyxHQUFHLElBQUksQ0FBQztJQUN0QyxNQUFNLEVBQUMsQ0FBQyxFQUFFLE1BQU0sRUFBRSxFQUFFLEVBQUMsR0FBRyxNQUFNLENBQUM7SUFDL0IsTUFBTSxFQUFDLE9BQU8sRUFBRSxHQUFHLEVBQUUsU0FBUyxFQUFDLEdBQUcsS0FBSyxDQUFDO0lBRXhDLE1BQU0sUUFBUSxHQUFHLFlBQVksQ0FBQyxxQkFBcUIsQ0FDL0MsQ0FBQyxDQUFDLEtBQXlDLEVBQzNDLE1BQU0sQ0FBQyxLQUFpQyxFQUFFLE9BQU8sRUFBRSxHQUFHLEVBQ3RELE1BQU0sQ0FBQyxnQkFBZ0IsRUFBRSxTQUFTLENBQUMsQ0FBQztJQUV4QyxNQUFNLEtBQUssR0FBRyxDQUFDLENBQUMsS0FBSyxDQUFDO0lBQ3RCLE1BQU0sT0FBTyxHQUFHLElBQUksOEJBQThCLENBQUMsUUFBUSxFQUFFLEtBQUssQ0FBQyxDQUFDO0lBQ3BFLE1BQU0sV0FBVyxHQUFHO1FBQ2xCLEVBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsQ0FBQyxRQUFRLENBQUMsWUFBWSxFQUFFLFFBQVEsQ0FBQyxXQUFXLENBQUMsRUFBQztRQUNwRSxFQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsUUFBUSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFBQztRQUNwRSxFQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLENBQUMsUUFBUSxDQUFDLFlBQVksRUFBRSxRQUFRLENBQUMsV0FBVyxDQUFDLEVBQUM7UUFDcEUsRUFBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxDQUFDLFFBQVEsQ0FBQyxjQUFjLEVBQUUsUUFBUSxDQUFDLGFBQWEsQ0FBQyxFQUFDO1FBQ3hFLEVBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFDO0tBQy9ELENBQUM7SUFDRixNQUFNLE1BQU0sR0FDUixJQUFJLENBQUMsRUFBQyxPQUFPLEVBQUUsS0FBSyxFQUFFLEVBQUMsS0FBSyxFQUFFLFFBQVEsQ0FBQyxPQUFPLEVBQUUsS0FBSyxFQUFFLENBQUMsRUFBRSxLQUFLLEVBQUMsRUFBQyxDQUFDLENBQUM7SUFDdkUsT0FBTyxPQUFPLENBQUMsZ0JBQWdCLENBQzNCLE9BQU8sRUFBRSxDQUFDLENBQUMsRUFBRSxNQUFNLEVBQUUsRUFBRSxDQUFDLEVBQUUsS0FBSyxFQUFFLFdBQVcsRUFBRSxNQUFNLENBQUMsQ0FBQztBQUM1RCxDQUFDO0FBRUQsTUFBTSxDQUFDLE1BQU0sNkJBQTZCLEdBQWlCO0lBQ3pELFVBQVUsRUFBRSx1QkFBdUI7SUFDbkMsV0FBVyxFQUFFLFFBQVE7SUFDckIsVUFBVSxFQUFFLHVCQUFnRDtDQUM3RCxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjMgR29vZ2xlIExMQy5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge2JhY2tlbmRfdXRpbCwgRGlsYXRpb24yREF0dHJzLCBEaWxhdGlvbjJEQmFja3Byb3BJbnB1dCwgRGlsYXRpb24yREJhY2twcm9wSW5wdXRJbnB1dHMsIEtlcm5lbENvbmZpZywgS2VybmVsRnVuYywgVGVuc29ySW5mbywgdXRpbH0gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcblxuaW1wb3J0IHtXZWJHUFVCYWNrZW5kfSBmcm9tICcuLi9iYWNrZW5kX3dlYmdwdSc7XG5pbXBvcnQge0RpbGF0aW9uMkRCYWNrcHJvcElucHV0UHJvZ3JhbX0gZnJvbSAnLi4vZGlsYXRpb25fYmFja3Byb3Bfd2ViZ3B1JztcbmltcG9ydCB7ZmlsbH0gZnJvbSAnLi9GaWxsJztcblxuZXhwb3J0IGZ1bmN0aW9uIGRpbGF0aW9uMkRCYWNrcHJvcElucHV0KGFyZ3M6IHtcbiAgaW5wdXRzOiBEaWxhdGlvbjJEQmFja3Byb3BJbnB1dElucHV0cyxcbiAgYXR0cnM6IERpbGF0aW9uMkRBdHRycyxcbiAgYmFja2VuZDogV2ViR1BVQmFja2VuZFxufSk6IFRlbnNvckluZm8ge1xuICBjb25zdCB7aW5wdXRzLCBiYWNrZW5kLCBhdHRyc30gPSBhcmdzO1xuICBjb25zdCB7eCwgZmlsdGVyLCBkeX0gPSBpbnB1dHM7XG4gIGNvbnN0IHtzdHJpZGVzLCBwYWQsIGRpbGF0aW9uc30gPSBhdHRycztcblxuICBjb25zdCBjb252SW5mbyA9IGJhY2tlbmRfdXRpbC5jb21wdXRlRGlsYXRpb24yREluZm8oXG4gICAgICB4LnNoYXBlIGFzIFtudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXJdLFxuICAgICAgZmlsdGVyLnNoYXBlIGFzIFtudW1iZXIsIG51bWJlciwgbnVtYmVyXSwgc3RyaWRlcywgcGFkLFxuICAgICAgJ05IV0MnIC8qIGRhdGFGb3JtYXQgKi8sIGRpbGF0aW9ucyk7XG5cbiAgY29uc3QgZHR5cGUgPSB4LmR0eXBlO1xuICBjb25zdCBwcm9ncmFtID0gbmV3IERpbGF0aW9uMkRCYWNrcHJvcElucHV0UHJvZ3JhbShjb252SW5mbywgZHR5cGUpO1xuICBjb25zdCB1bmlmb3JtRGF0YSA9IFtcbiAgICB7dHlwZTogJ2ludDMyJywgZGF0YTogW2NvbnZJbmZvLmZpbHRlckhlaWdodCwgY29udkluZm8uZmlsdGVyV2lkdGhdfSxcbiAgICB7dHlwZTogJ2ludDMyJywgZGF0YTogW2NvbnZJbmZvLnBhZEluZm8udG9wLCBjb252SW5mby5wYWRJbmZvLmxlZnRdfSxcbiAgICB7dHlwZTogJ2ludDMyJywgZGF0YTogW2NvbnZJbmZvLnN0cmlkZUhlaWdodCwgY29udkluZm8uc3RyaWRlV2lkdGhdfSxcbiAgICB7dHlwZTogJ2ludDMyJywgZGF0YTogW2NvbnZJbmZvLmRpbGF0aW9uSGVpZ2h0LCBjb252SW5mby5kaWxhdGlvbldpZHRoXX0sXG4gICAge3R5cGU6ICdpbnQzMicsIGRhdGE6IFt1dGlsLnNpemVGcm9tU2hhcGUoY29udkluZm8ub3V0U2hhcGUpXX1cbiAgXTtcbiAgY29uc3Qgb3V0cHV0ID1cbiAgICAgIGZpbGwoe2JhY2tlbmQsIGF0dHJzOiB7c2hhcGU6IGNvbnZJbmZvLmluU2hhcGUsIHZhbHVlOiAwLCBkdHlwZX19KTtcbiAgcmV0dXJuIGJhY2tlbmQucnVuV2ViR1BVUHJvZ3JhbShcbiAgICAgIHByb2dyYW0sIFt4LCBmaWx0ZXIsIGR5XSwgZHR5cGUsIHVuaWZvcm1EYXRhLCBvdXRwdXQpO1xufVxuXG5leHBvcnQgY29uc3QgZGlsYXRpb24yREJhY2twcm9wSW5wdXRDb25maWc6IEtlcm5lbENvbmZpZyA9IHtcbiAga2VybmVsTmFtZTogRGlsYXRpb24yREJhY2twcm9wSW5wdXQsXG4gIGJhY2tlbmROYW1lOiAnd2ViZ3B1JyxcbiAga2VybmVsRnVuYzogZGlsYXRpb24yREJhY2twcm9wSW5wdXQgYXMgdW5rbm93biBhcyBLZXJuZWxGdW5jXG59O1xuIl19","/**\n * @license\n * Copyright 2023 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { getMainHeaderString as main, PixelsOpType } from './webgpu_program';\nimport { computeDispatch, flatDispatchLayout } from './webgpu_util';\nexport class DrawProgram {\n    constructor(outShape, type, textureFormat) {\n        this.variableNames = ['Image'];\n        this.uniforms = 'alpha: f32,';\n        this.workgroupSize = [64, 1, 1];\n        this.pixelsOpType = PixelsOpType.DRAW;\n        this.size = true;\n        this.outputShape = outShape;\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize);\n        this.type = type;\n        this.textureFormat = textureFormat;\n        this.shaderKey = `draw_${type}_${textureFormat}`;\n    }\n    getUserCode() {\n        let calculateResult;\n        const value = this.type === 'float32' ? 'value' : 'value / 255.0';\n        calculateResult = `\n      if (uniforms.numChannels == 1) {\n        rgba[0] = ${value};\n        rgba[1] = ${value};\n        rgba[2] = ${value};\n      } else {\n        rgba[d] = ${value};\n      }`;\n        const userCode = `\n       @group(0) @binding(0) var outImage : texture_storage_2d<${this.textureFormat}, write>;\n       ${main('index')} {\n         if (index < uniforms.size) {\n           var rgba = vec4<f32>(0.0, 0.0, 0.0, uniforms.alpha);\n           for (var d = 0; d < uniforms.numChannels; d = d + 1) {\n             let value = f32(inBuf[index * uniforms.numChannels + d]);\n             ${calculateResult}\n           }\n           rgba.x = rgba.x * rgba.w;\n           rgba.y = rgba.y * rgba.w;\n           rgba.z = rgba.z * rgba.w;\n           let coords = getCoordsFromIndex(index);\n           textureStore(outImage, vec2<i32>(coords.yx), rgba);\n         }\n       }\n      `;\n        return userCode;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZHJhd193ZWJncHUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9kcmF3X3dlYmdwdS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFJSCxPQUFPLEVBQUMsbUJBQW1CLElBQUksSUFBSSxFQUFFLFlBQVksRUFBZ0IsTUFBTSxrQkFBa0IsQ0FBQztBQUMxRixPQUFPLEVBQUMsZUFBZSxFQUFFLGtCQUFrQixFQUFDLE1BQU0sZUFBZSxDQUFDO0FBRWxFLE1BQU0sT0FBTyxXQUFXO0lBYXRCLFlBQ0ksUUFBa0IsRUFBRSxJQUFjLEVBQUUsYUFBK0I7UUFidkUsa0JBQWEsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQzFCLGFBQVEsR0FBRyxhQUFhLENBQUM7UUFLekIsa0JBQWEsR0FBNkIsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBR3JELGlCQUFZLEdBQUcsWUFBWSxDQUFDLElBQUksQ0FBQztRQUNqQyxTQUFJLEdBQUcsSUFBSSxDQUFDO1FBSVYsSUFBSSxDQUFDLFdBQVcsR0FBRyxRQUFRLENBQUM7UUFDNUIsSUFBSSxDQUFDLGNBQWMsR0FBRyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDM0QsSUFBSSxDQUFDLFFBQVEsR0FBRyxlQUFlLENBQzNCLElBQUksQ0FBQyxjQUFjLEVBQUUsSUFBSSxDQUFDLFdBQVcsRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7UUFDL0QsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7UUFDakIsSUFBSSxDQUFDLGFBQWEsR0FBRyxhQUFhLENBQUM7UUFDbkMsSUFBSSxDQUFDLFNBQVMsR0FBRyxRQUFRLElBQUksSUFBSSxhQUFhLEVBQUUsQ0FBQztJQUNuRCxDQUFDO0lBRUQsV0FBVztRQUNULElBQUksZUFBZSxDQUFDO1FBQ3BCLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxJQUFJLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLGVBQWUsQ0FBQztRQUNsRSxlQUFlLEdBQUc7O29CQUVGLEtBQUs7b0JBQ0wsS0FBSztvQkFDTCxLQUFLOztvQkFFTCxLQUFLO1FBQ2pCLENBQUM7UUFFTCxNQUFNLFFBQVEsR0FBRztpRUFFYixJQUFJLENBQUMsYUFBYTtTQUNqQixJQUFJLENBQUMsT0FBTyxDQUFDOzs7OztlQUtQLGVBQWU7Ozs7Ozs7OztPQVN2QixDQUFDO1FBQ0osT0FBTyxRQUFRLENBQUM7SUFDbEIsQ0FBQztDQUNGIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjMgR29vZ2xlIExMQy5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge0RhdGFUeXBlfSBmcm9tICdAdGVuc29yZmxvdy90ZmpzLWNvcmUnO1xuXG5pbXBvcnQge2dldE1haW5IZWFkZXJTdHJpbmcgYXMgbWFpbiwgUGl4ZWxzT3BUeXBlLCBXZWJHUFVQcm9ncmFtfSBmcm9tICcuL3dlYmdwdV9wcm9ncmFtJztcbmltcG9ydCB7Y29tcHV0ZURpc3BhdGNoLCBmbGF0RGlzcGF0Y2hMYXlvdXR9IGZyb20gJy4vd2ViZ3B1X3V0aWwnO1xuXG5leHBvcnQgY2xhc3MgRHJhd1Byb2dyYW0gaW1wbGVtZW50cyBXZWJHUFVQcm9ncmFtIHtcbiAgdmFyaWFibGVOYW1lcyA9IFsnSW1hZ2UnXTtcbiAgdW5pZm9ybXMgPSAnYWxwaGE6IGYzMiwnO1xuICBvdXRwdXRTaGFwZTogbnVtYmVyW107XG4gIHNoYWRlcktleTogc3RyaW5nO1xuICBkaXNwYXRjaExheW91dDoge3g6IG51bWJlcltdfTtcbiAgZGlzcGF0Y2g6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXTtcbiAgd29ya2dyb3VwU2l6ZTogW251bWJlciwgbnVtYmVyLCBudW1iZXJdID0gWzY0LCAxLCAxXTtcbiAgdHlwZTogRGF0YVR5cGU7XG4gIHRleHR1cmVGb3JtYXQ6IEdQVVRleHR1cmVGb3JtYXQ7XG4gIHBpeGVsc09wVHlwZSA9IFBpeGVsc09wVHlwZS5EUkFXO1xuICBzaXplID0gdHJ1ZTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICAgIG91dFNoYXBlOiBudW1iZXJbXSwgdHlwZTogRGF0YVR5cGUsIHRleHR1cmVGb3JtYXQ6IEdQVVRleHR1cmVGb3JtYXQpIHtcbiAgICB0aGlzLm91dHB1dFNoYXBlID0gb3V0U2hhcGU7XG4gICAgdGhpcy5kaXNwYXRjaExheW91dCA9IGZsYXREaXNwYXRjaExheW91dCh0aGlzLm91dHB1dFNoYXBlKTtcbiAgICB0aGlzLmRpc3BhdGNoID0gY29tcHV0ZURpc3BhdGNoKFxuICAgICAgICB0aGlzLmRpc3BhdGNoTGF5b3V0LCB0aGlzLm91dHB1dFNoYXBlLCB0aGlzLndvcmtncm91cFNpemUpO1xuICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgdGhpcy50ZXh0dXJlRm9ybWF0ID0gdGV4dHVyZUZvcm1hdDtcbiAgICB0aGlzLnNoYWRlcktleSA9IGBkcmF3XyR7dHlwZX1fJHt0ZXh0dXJlRm9ybWF0fWA7XG4gIH1cblxuICBnZXRVc2VyQ29kZSgpOiBzdHJpbmcge1xuICAgIGxldCBjYWxjdWxhdGVSZXN1bHQ7XG4gICAgY29uc3QgdmFsdWUgPSB0aGlzLnR5cGUgPT09ICdmbG9hdDMyJyA/ICd2YWx1ZScgOiAndmFsdWUgLyAyNTUuMCc7XG4gICAgY2FsY3VsYXRlUmVzdWx0ID0gYFxuICAgICAgaWYgKHVuaWZvcm1zLm51bUNoYW5uZWxzID09IDEpIHtcbiAgICAgICAgcmdiYVswXSA9ICR7dmFsdWV9O1xuICAgICAgICByZ2JhWzFdID0gJHt2YWx1ZX07XG4gICAgICAgIHJnYmFbMl0gPSAke3ZhbHVlfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJnYmFbZF0gPSAke3ZhbHVlfTtcbiAgICAgIH1gO1xuXG4gICAgY29uc3QgdXNlckNvZGUgPSBgXG4gICAgICAgQGdyb3VwKDApIEBiaW5kaW5nKDApIHZhciBvdXRJbWFnZSA6IHRleHR1cmVfc3RvcmFnZV8yZDwke1xuICAgICAgICB0aGlzLnRleHR1cmVGb3JtYXR9LCB3cml0ZT47XG4gICAgICAgJHttYWluKCdpbmRleCcpfSB7XG4gICAgICAgICBpZiAoaW5kZXggPCB1bmlmb3Jtcy5zaXplKSB7XG4gICAgICAgICAgIHZhciByZ2JhID0gdmVjNDxmMzI+KDAuMCwgMC4wLCAwLjAsIHVuaWZvcm1zLmFscGhhKTtcbiAgICAgICAgICAgZm9yICh2YXIgZCA9IDA7IGQgPCB1bmlmb3Jtcy5udW1DaGFubmVsczsgZCA9IGQgKyAxKSB7XG4gICAgICAgICAgICAgbGV0IHZhbHVlID0gZjMyKGluQnVmW2luZGV4ICogdW5pZm9ybXMubnVtQ2hhbm5lbHMgKyBkXSk7XG4gICAgICAgICAgICAgJHtjYWxjdWxhdGVSZXN1bHR9XG4gICAgICAgICAgIH1cbiAgICAgICAgICAgcmdiYS54ID0gcmdiYS54ICogcmdiYS53O1xuICAgICAgICAgICByZ2JhLnkgPSByZ2JhLnkgKiByZ2JhLnc7XG4gICAgICAgICAgIHJnYmEueiA9IHJnYmEueiAqIHJnYmEudztcbiAgICAgICAgICAgbGV0IGNvb3JkcyA9IGdldENvb3Jkc0Zyb21JbmRleChpbmRleCk7XG4gICAgICAgICAgIHRleHR1cmVTdG9yZShvdXRJbWFnZSwgdmVjMjxpMzI+KGNvb3Jkcy55eCksIHJnYmEpO1xuICAgICAgICAgfVxuICAgICAgIH1cbiAgICAgIGA7XG4gICAgcmV0dXJuIHVzZXJDb2RlO1xuICB9XG59XG4iXX0=","/**\n * @license\n * Copyright 2023 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use backend file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Draw, } from '@tensorflow/tfjs-core';\nimport { DrawProgram } from '../draw_webgpu';\nexport function draw(args) {\n    const { inputs, backend, attrs } = args;\n    const { image } = inputs;\n    const { canvas, options } = attrs;\n    const [height, width] = image.shape.slice(0, 2);\n    const { imageOptions } = options || {};\n    const alpha = (imageOptions === null || imageOptions === void 0 ? void 0 : imageOptions.alpha) || 1;\n    //  'rgba8unorm' should work on macOS according to\n    //  https://bugs.chromium.org/p/chromium/issues/detail?id=1298618. But\n    //  failed on macOS/M2. So use 'bgra8unorm' first when available.\n    const format = backend.device.features.has('bgra8unorm-storage') ?\n        'bgra8unorm' :\n        'rgba8unorm';\n    const outShape = [height, width];\n    const program = new DrawProgram(outShape, image.dtype, format);\n    canvas.width = width;\n    canvas.height = height;\n    const backendName = 'webgpu';\n    let gpuContext = canvas.getContext(backendName);\n    let canvasWebGPU;\n    if (!gpuContext) {\n        canvasWebGPU = new OffscreenCanvas(width, height);\n        gpuContext = canvasWebGPU.getContext(backendName);\n    }\n    const numChannels = image.shape.length === 3 ? image.shape[2] : 1;\n    gpuContext.configure({\n        device: backend.device,\n        format,\n        usage: GPUTextureUsage.STORAGE_BINDING,\n        alphaMode: 'premultiplied'\n    });\n    const outputDtype = 'int32';\n    const output = backend.makeTensorInfo(outShape, outputDtype);\n    const info = backend.tensorMap.get(output.dataId);\n    info.resource = gpuContext.getCurrentTexture();\n    info.external = true;\n    const uniformData = [{ type: 'uint32', data: [numChannels] }, { type: 'float32', data: [alpha] }];\n    backend.runWebGPUProgram(program, [image], outputDtype, uniformData, output);\n    if (canvasWebGPU) {\n        const canvas2dContext = canvas.getContext('2d');\n        if (!canvas2dContext) {\n            throw new Error(`Please make sure this canvas has only been used for 2d or webgpu context!`);\n        }\n        canvas2dContext.drawImage(canvasWebGPU, 0, 0);\n    }\n    backend.disposeData(output.dataId);\n    return image;\n}\nexport const drawConfig = {\n    kernelName: Draw,\n    backendName: 'webgpu',\n    kernelFunc: draw\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRHJhdy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2tlcm5lbHMvRHJhdy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFHSCxPQUFPLEVBQUMsSUFBSSxHQUF5QixNQUFNLHVCQUF1QixDQUFDO0FBR25FLE9BQU8sRUFBQyxXQUFXLEVBQUMsTUFBTSxnQkFBZ0IsQ0FBQztBQUUzQyxNQUFNLFVBQVUsSUFBSSxDQUNoQixJQUFvRTtJQUV0RSxNQUFNLEVBQUMsTUFBTSxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUMsR0FBRyxJQUFJLENBQUM7SUFDdEMsTUFBTSxFQUFDLEtBQUssRUFBQyxHQUFHLE1BQU0sQ0FBQztJQUN2QixNQUFNLEVBQUMsTUFBTSxFQUFFLE9BQU8sRUFBQyxHQUFHLEtBQUssQ0FBQztJQUNoQyxNQUFNLENBQUMsTUFBTSxFQUFFLEtBQUssQ0FBQyxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUNoRCxNQUFNLEVBQUMsWUFBWSxFQUFDLEdBQUcsT0FBTyxJQUFJLEVBQUUsQ0FBQztJQUNyQyxNQUFNLEtBQUssR0FBRyxDQUFBLFlBQVksYUFBWixZQUFZLHVCQUFaLFlBQVksQ0FBRyxLQUFLLEtBQUksQ0FBQyxDQUFDO0lBRXhDLGtEQUFrRDtJQUNsRCxzRUFBc0U7SUFDdEUsaUVBQWlFO0lBQ2pFLE1BQU0sTUFBTSxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLENBQUM7UUFDOUQsWUFBWSxDQUFDLENBQUM7UUFDZCxZQUFZLENBQUM7SUFDakIsTUFBTSxRQUFRLEdBQUcsQ0FBQyxNQUFNLEVBQUUsS0FBSyxDQUFDLENBQUM7SUFDakMsTUFBTSxPQUFPLEdBQUcsSUFBSSxXQUFXLENBQUMsUUFBUSxFQUFFLEtBQUssQ0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFDL0QsTUFBTSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7SUFDckIsTUFBTSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7SUFDdkIsTUFBTSxXQUFXLEdBQUcsUUFBUSxDQUFDO0lBQzdCLElBQUksVUFBVSxHQUFHLE1BQU0sQ0FBQyxVQUFVLENBQUMsV0FBVyxDQUFDLENBQUM7SUFDaEQsSUFBSSxZQUFZLENBQUM7SUFDakIsSUFBSSxDQUFDLFVBQVUsRUFBRTtRQUNmLFlBQVksR0FBRyxJQUFJLGVBQWUsQ0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLENBQUM7UUFDbEQsVUFBVSxHQUFHLFlBQVksQ0FBQyxVQUFVLENBQUMsV0FBVyxDQUFDLENBQUM7S0FDbkQ7SUFDRCxNQUFNLFdBQVcsR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDLE1BQU0sS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNsRSxVQUFVLENBQUMsU0FBUyxDQUFDO1FBQ25CLE1BQU0sRUFBRSxPQUFPLENBQUMsTUFBTTtRQUN0QixNQUFNO1FBQ04sS0FBSyxFQUFFLGVBQWUsQ0FBQyxlQUFlO1FBQ3RDLFNBQVMsRUFBRSxlQUFlO0tBQzNCLENBQUMsQ0FBQztJQUVILE1BQU0sV0FBVyxHQUFHLE9BQU8sQ0FBQztJQUM1QixNQUFNLE1BQU0sR0FBRyxPQUFPLENBQUMsY0FBYyxDQUFDLFFBQVEsRUFBRSxXQUFXLENBQUMsQ0FBQztJQUM3RCxNQUFNLElBQUksR0FBRyxPQUFPLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDbEQsSUFBSSxDQUFDLFFBQVEsR0FBRyxVQUFVLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztJQUMvQyxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQztJQUVyQixNQUFNLFdBQVcsR0FDYixDQUFDLEVBQUMsSUFBSSxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsQ0FBQyxXQUFXLENBQUMsRUFBQyxFQUFFLEVBQUMsSUFBSSxFQUFFLFNBQVMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxLQUFLLENBQUMsRUFBQyxDQUFDLENBQUM7SUFDOUUsT0FBTyxDQUFDLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxDQUFDLEtBQUssQ0FBQyxFQUFFLFdBQVcsRUFBRSxXQUFXLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFFN0UsSUFBSSxZQUFZLEVBQUU7UUFDaEIsTUFBTSxlQUFlLEdBQUcsTUFBTSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNoRCxJQUFJLENBQUMsZUFBZSxFQUFFO1lBQ3BCLE1BQU0sSUFBSSxLQUFLLENBQ1gsMkVBQTJFLENBQUMsQ0FBQztTQUNsRjtRQUNELGVBQWUsQ0FBQyxTQUFTLENBQUMsWUFBWSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztLQUMvQztJQUNELE9BQU8sQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ25DLE9BQU8sS0FBSyxDQUFDO0FBQ2YsQ0FBQztBQUVELE1BQU0sQ0FBQyxNQUFNLFVBQVUsR0FBaUI7SUFDdEMsVUFBVSxFQUFFLElBQUk7SUFDaEIsV0FBVyxFQUFFLFFBQVE7SUFDckIsVUFBVSxFQUFFLElBQTZCO0NBQzFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMyBHb29nbGUgTExDLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSBiYWNrZW5kIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7S2VybmVsQ29uZmlnLCBLZXJuZWxGdW5jLCBUZW5zb3JJbmZvfSBmcm9tICdAdGVuc29yZmxvdy90ZmpzLWNvcmUnO1xuaW1wb3J0IHtEcmF3LCBEcmF3QXR0cnMsIERyYXdJbnB1dHMsfSBmcm9tICdAdGVuc29yZmxvdy90ZmpzLWNvcmUnO1xuXG5pbXBvcnQge1dlYkdQVUJhY2tlbmR9IGZyb20gJy4uL2JhY2tlbmRfd2ViZ3B1JztcbmltcG9ydCB7RHJhd1Byb2dyYW19IGZyb20gJy4uL2RyYXdfd2ViZ3B1JztcblxuZXhwb3J0IGZ1bmN0aW9uIGRyYXcoXG4gICAgYXJnczoge2lucHV0czogRHJhd0lucHV0cywgYmFja2VuZDogV2ViR1BVQmFja2VuZCwgYXR0cnM6IERyYXdBdHRyc30pOlxuICAgIFRlbnNvckluZm8ge1xuICBjb25zdCB7aW5wdXRzLCBiYWNrZW5kLCBhdHRyc30gPSBhcmdzO1xuICBjb25zdCB7aW1hZ2V9ID0gaW5wdXRzO1xuICBjb25zdCB7Y2FudmFzLCBvcHRpb25zfSA9IGF0dHJzO1xuICBjb25zdCBbaGVpZ2h0LCB3aWR0aF0gPSBpbWFnZS5zaGFwZS5zbGljZSgwLCAyKTtcbiAgY29uc3Qge2ltYWdlT3B0aW9uc30gPSBvcHRpb25zIHx8IHt9O1xuICBjb25zdCBhbHBoYSA9IGltYWdlT3B0aW9ucyA/LmFscGhhIHx8IDE7XG5cbiAgLy8gICdyZ2JhOHVub3JtJyBzaG91bGQgd29yayBvbiBtYWNPUyBhY2NvcmRpbmcgdG9cbiAgLy8gIGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTEyOTg2MTguIEJ1dFxuICAvLyAgZmFpbGVkIG9uIG1hY09TL00yLiBTbyB1c2UgJ2JncmE4dW5vcm0nIGZpcnN0IHdoZW4gYXZhaWxhYmxlLlxuICBjb25zdCBmb3JtYXQgPSBiYWNrZW5kLmRldmljZS5mZWF0dXJlcy5oYXMoJ2JncmE4dW5vcm0tc3RvcmFnZScpID9cbiAgICAgICdiZ3JhOHVub3JtJyA6XG4gICAgICAncmdiYTh1bm9ybSc7XG4gIGNvbnN0IG91dFNoYXBlID0gW2hlaWdodCwgd2lkdGhdO1xuICBjb25zdCBwcm9ncmFtID0gbmV3IERyYXdQcm9ncmFtKG91dFNoYXBlLCBpbWFnZS5kdHlwZSwgZm9ybWF0KTtcbiAgY2FudmFzLndpZHRoID0gd2lkdGg7XG4gIGNhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7XG4gIGNvbnN0IGJhY2tlbmROYW1lID0gJ3dlYmdwdSc7XG4gIGxldCBncHVDb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoYmFja2VuZE5hbWUpO1xuICBsZXQgY2FudmFzV2ViR1BVO1xuICBpZiAoIWdwdUNvbnRleHQpIHtcbiAgICBjYW52YXNXZWJHUFUgPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpO1xuICAgIGdwdUNvbnRleHQgPSBjYW52YXNXZWJHUFUuZ2V0Q29udGV4dChiYWNrZW5kTmFtZSk7XG4gIH1cbiAgY29uc3QgbnVtQ2hhbm5lbHMgPSBpbWFnZS5zaGFwZS5sZW5ndGggPT09IDMgPyBpbWFnZS5zaGFwZVsyXSA6IDE7XG4gIGdwdUNvbnRleHQuY29uZmlndXJlKHtcbiAgICBkZXZpY2U6IGJhY2tlbmQuZGV2aWNlLFxuICAgIGZvcm1hdCxcbiAgICB1c2FnZTogR1BVVGV4dHVyZVVzYWdlLlNUT1JBR0VfQklORElORyxcbiAgICBhbHBoYU1vZGU6ICdwcmVtdWx0aXBsaWVkJ1xuICB9KTtcblxuICBjb25zdCBvdXRwdXREdHlwZSA9ICdpbnQzMic7XG4gIGNvbnN0IG91dHB1dCA9IGJhY2tlbmQubWFrZVRlbnNvckluZm8ob3V0U2hhcGUsIG91dHB1dER0eXBlKTtcbiAgY29uc3QgaW5mbyA9IGJhY2tlbmQudGVuc29yTWFwLmdldChvdXRwdXQuZGF0YUlkKTtcbiAgaW5mby5yZXNvdXJjZSA9IGdwdUNvbnRleHQuZ2V0Q3VycmVudFRleHR1cmUoKTtcbiAgaW5mby5leHRlcm5hbCA9IHRydWU7XG5cbiAgY29uc3QgdW5pZm9ybURhdGEgPVxuICAgICAgW3t0eXBlOiAndWludDMyJywgZGF0YTogW251bUNoYW5uZWxzXX0sIHt0eXBlOiAnZmxvYXQzMicsIGRhdGE6IFthbHBoYV19XTtcbiAgYmFja2VuZC5ydW5XZWJHUFVQcm9ncmFtKHByb2dyYW0sIFtpbWFnZV0sIG91dHB1dER0eXBlLCB1bmlmb3JtRGF0YSwgb3V0cHV0KTtcblxuICBpZiAoY2FudmFzV2ViR1BVKSB7XG4gICAgY29uc3QgY2FudmFzMmRDb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgaWYgKCFjYW52YXMyZENvbnRleHQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBgUGxlYXNlIG1ha2Ugc3VyZSB0aGlzIGNhbnZhcyBoYXMgb25seSBiZWVuIHVzZWQgZm9yIDJkIG9yIHdlYmdwdSBjb250ZXh0IWApO1xuICAgIH1cbiAgICBjYW52YXMyZENvbnRleHQuZHJhd0ltYWdlKGNhbnZhc1dlYkdQVSwgMCwgMCk7XG4gIH1cbiAgYmFja2VuZC5kaXNwb3NlRGF0YShvdXRwdXQuZGF0YUlkKTtcbiAgcmV0dXJuIGltYWdlO1xufVxuXG5leHBvcnQgY29uc3QgZHJhd0NvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBEcmF3LFxuICBiYWNrZW5kTmFtZTogJ3dlYmdwdScsXG4gIGtlcm5lbEZ1bmM6IGRyYXcgYXMgdW5rbm93biBhcyBLZXJuZWxGdW5jXG59O1xuIl19","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Multiply } from '@tensorflow/tfjs-core';\nimport { BinaryOpType } from '../binary_op_util';\nimport { binaryKernelFunc } from '../kernel_utils/kernel_funcs_utils';\nimport { multiplyImplCPU as cpuMultiply } from '../kernel_utils/shared';\nexport const multiplyKernelFunc = binaryKernelFunc({\n    opType: BinaryOpType.MUL,\n    cpuKernelImpl: cpuMultiply,\n    supportsComplex: true\n});\nexport const multiplyConfig = {\n    kernelName: Multiply,\n    backendName: 'webgpu',\n    kernelFunc: multiplyKernelFunc\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTXVsdGlwbHkuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9rZXJuZWxzL011bHRpcGx5LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sRUFBZSxRQUFRLEVBQUMsTUFBTSx1QkFBdUIsQ0FBQztBQUU3RCxPQUFPLEVBQUMsWUFBWSxFQUFDLE1BQU0sbUJBQW1CLENBQUM7QUFDL0MsT0FBTyxFQUFDLGdCQUFnQixFQUFDLE1BQU0sb0NBQW9DLENBQUM7QUFDcEUsT0FBTyxFQUFDLGVBQWUsSUFBSSxXQUFXLEVBQUMsTUFBTSx3QkFBd0IsQ0FBQztBQUV0RSxNQUFNLENBQUMsTUFBTSxrQkFBa0IsR0FBRyxnQkFBZ0IsQ0FBQztJQUNqRCxNQUFNLEVBQUUsWUFBWSxDQUFDLEdBQUc7SUFDeEIsYUFBYSxFQUFFLFdBQVc7SUFDMUIsZUFBZSxFQUFFLElBQUk7Q0FDdEIsQ0FBQyxDQUFDO0FBRUgsTUFBTSxDQUFDLE1BQU0sY0FBYyxHQUFpQjtJQUMxQyxVQUFVLEVBQUUsUUFBUTtJQUNwQixXQUFXLEVBQUUsUUFBUTtJQUNyQixVQUFVLEVBQUUsa0JBQWtCO0NBQy9CLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7S2VybmVsQ29uZmlnLCBNdWx0aXBseX0gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcblxuaW1wb3J0IHtCaW5hcnlPcFR5cGV9IGZyb20gJy4uL2JpbmFyeV9vcF91dGlsJztcbmltcG9ydCB7YmluYXJ5S2VybmVsRnVuY30gZnJvbSAnLi4va2VybmVsX3V0aWxzL2tlcm5lbF9mdW5jc191dGlscyc7XG5pbXBvcnQge211bHRpcGx5SW1wbENQVSBhcyBjcHVNdWx0aXBseX0gZnJvbSAnLi4va2VybmVsX3V0aWxzL3NoYXJlZCc7XG5cbmV4cG9ydCBjb25zdCBtdWx0aXBseUtlcm5lbEZ1bmMgPSBiaW5hcnlLZXJuZWxGdW5jKHtcbiAgb3BUeXBlOiBCaW5hcnlPcFR5cGUuTVVMLFxuICBjcHVLZXJuZWxJbXBsOiBjcHVNdWx0aXBseSxcbiAgc3VwcG9ydHNDb21wbGV4OiB0cnVlXG59KTtcblxuZXhwb3J0IGNvbnN0IG11bHRpcGx5Q29uZmlnOiBLZXJuZWxDb25maWcgPSB7XG4gIGtlcm5lbE5hbWU6IE11bHRpcGx5LFxuICBiYWNrZW5kTmFtZTogJ3dlYmdwdScsXG4gIGtlcm5lbEZ1bmM6IG11bHRpcGx5S2VybmVsRnVuY1xufTtcbiJdfQ==","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Sum } from '@tensorflow/tfjs-core';\nimport { reduce } from '../kernel_utils/reduce';\nexport function sum(args) {\n    const { inputs, backend, attrs } = args;\n    const { x } = inputs;\n    const { axis, keepDims } = attrs;\n    return reduce(x, axis, keepDims, 'sum', backend);\n}\nexport const sumConfig = {\n    kernelName: Sum,\n    backendName: 'webgpu',\n    kernelFunc: sum\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU3VtLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMva2VybmVscy9TdW0udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUEyQixHQUFHLEVBQWtDLE1BQU0sdUJBQXVCLENBQUM7QUFHckcsT0FBTyxFQUFDLE1BQU0sRUFBQyxNQUFNLHdCQUF3QixDQUFDO0FBRTlDLE1BQU0sVUFBVSxHQUFHLENBQ2YsSUFBa0U7SUFFcEUsTUFBTSxFQUFDLE1BQU0sRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFDLEdBQUcsSUFBSSxDQUFDO0lBQ3RDLE1BQU0sRUFBQyxDQUFDLEVBQUMsR0FBRyxNQUFNLENBQUM7SUFDbkIsTUFBTSxFQUFDLElBQUksRUFBRSxRQUFRLEVBQUMsR0FBRyxLQUFLLENBQUM7SUFFL0IsT0FBTyxNQUFNLENBQUMsQ0FBQyxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUUsS0FBSyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0FBQ25ELENBQUM7QUFFRCxNQUFNLENBQUMsTUFBTSxTQUFTLEdBQWlCO0lBQ3JDLFVBQVUsRUFBRSxHQUFHO0lBQ2YsV0FBVyxFQUFFLFFBQVE7SUFDckIsVUFBVSxFQUFFLEdBQTRCO0NBQ3pDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7S2VybmVsQ29uZmlnLCBLZXJuZWxGdW5jLCBTdW0sIFN1bUF0dHJzLCBTdW1JbnB1dHMsIFRlbnNvckluZm99IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7V2ViR1BVQmFja2VuZH0gZnJvbSAnLi4vYmFja2VuZF93ZWJncHUnO1xuaW1wb3J0IHtyZWR1Y2V9IGZyb20gJy4uL2tlcm5lbF91dGlscy9yZWR1Y2UnO1xuXG5leHBvcnQgZnVuY3Rpb24gc3VtKFxuICAgIGFyZ3M6IHtpbnB1dHM6IFN1bUlucHV0cywgYmFja2VuZDogV2ViR1BVQmFja2VuZCwgYXR0cnM6IFN1bUF0dHJzfSk6XG4gICAgVGVuc29ySW5mbyB7XG4gIGNvbnN0IHtpbnB1dHMsIGJhY2tlbmQsIGF0dHJzfSA9IGFyZ3M7XG4gIGNvbnN0IHt4fSA9IGlucHV0cztcbiAgY29uc3Qge2F4aXMsIGtlZXBEaW1zfSA9IGF0dHJzO1xuXG4gIHJldHVybiByZWR1Y2UoeCwgYXhpcywga2VlcERpbXMsICdzdW0nLCBiYWNrZW5kKTtcbn1cblxuZXhwb3J0IGNvbnN0IHN1bUNvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBTdW0sXG4gIGJhY2tlbmROYW1lOiAnd2ViZ3B1JyxcbiAga2VybmVsRnVuYzogc3VtIGFzIHVua25vd24gYXMgS2VybmVsRnVuY1xufTtcbiJdfQ==","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { backend_util, Einsum, util } from '@tensorflow/tfjs-core';\nimport { multiplyKernelFunc } from './Multiply';\nimport { reshape } from './Reshape';\nimport { sum } from './Sum';\nimport { transpose } from './Transpose';\nexport function einsum(args) {\n    const { inputs, backend, attrs } = args;\n    const { equation } = attrs;\n    const tensors = inputs;\n    const { allDims, summedDims, idDims } = backend_util.decodeEinsumEquation(equation, tensors.length);\n    backend_util.checkEinsumDimSizes(allDims.length, idDims, tensors);\n    const { path, steps } = backend_util.getEinsumComputePath(summedDims, idDims);\n    const nSteps = steps.length;\n    let out = null;\n    let numDimsRemaining = allDims.length;\n    const tensorsToDispose = [];\n    for (let i = 0; i < nSteps; ++i) {\n        for (const idTerm of steps[i]) {\n            const { permutationIndices: perm, expandDims: dimsToExpand } = backend_util.getEinsumPermutation(numDimsRemaining, idDims[idTerm]);\n            let x;\n            if (backend_util.isIdentityPermutation(perm)) {\n                x = tensors[idTerm];\n            }\n            else {\n                x = transpose({ inputs: { x: tensors[idTerm] }, backend, attrs: { perm } });\n                tensorsToDispose.push(x);\n            }\n            const targetShape = x.shape.slice();\n            for (let k = 0; k < dimsToExpand.length; ++k) {\n                targetShape.splice(dimsToExpand[k], 0, 1);\n            }\n            if (!util.arraysEqual(x.shape, targetShape)) {\n                x = reshape({ inputs: { x }, backend, attrs: { shape: targetShape } });\n                tensorsToDispose.push(x);\n            }\n            if (out === null) {\n                out = x;\n            }\n            else {\n                // tslint:disable-next-line: no-unnecessary-type-assertion\n                out =\n                    multiplyKernelFunc({ inputs: { a: x, b: out }, backend });\n                tensorsToDispose.push(out);\n            }\n        }\n        if (i < nSteps - 1) {\n            if (path[i] >= 0) {\n                out = sum({\n                    inputs: { x: out },\n                    backend,\n                    attrs: {\n                        axis: path[i] - (allDims.length - numDimsRemaining),\n                        keepDims: false\n                    }\n                });\n                tensorsToDispose.push(out);\n            }\n            numDimsRemaining--;\n        }\n    }\n    // Clean up intermediate tensors.\n    for (const tensorInfo of tensorsToDispose) {\n        if (tensorInfo === out) {\n            continue;\n        }\n        backend.disposeData(tensorInfo.dataId);\n    }\n    return out;\n}\nexport const einsumConfig = {\n    kernelName: Einsum,\n    backendName: 'webgpu',\n    kernelFunc: einsum\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRWluc3VtLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMva2VybmVscy9FaW5zdW0udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUFDLFlBQVksRUFBRSxNQUFNLEVBQTJFLElBQUksRUFBQyxNQUFNLHVCQUF1QixDQUFDO0FBSTFJLE9BQU8sRUFBQyxrQkFBa0IsRUFBQyxNQUFNLFlBQVksQ0FBQztBQUM5QyxPQUFPLEVBQUMsT0FBTyxFQUFDLE1BQU0sV0FBVyxDQUFDO0FBQ2xDLE9BQU8sRUFBQyxHQUFHLEVBQUMsTUFBTSxPQUFPLENBQUM7QUFDMUIsT0FBTyxFQUFDLFNBQVMsRUFBQyxNQUFNLGFBQWEsQ0FBQztBQUV0QyxNQUFNLFVBQVUsTUFBTSxDQUNsQixJQUF3RTtJQUUxRSxNQUFNLEVBQUMsTUFBTSxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUMsR0FBRyxJQUFJLENBQUM7SUFDdEMsTUFBTSxFQUFDLFFBQVEsRUFBQyxHQUFHLEtBQUssQ0FBQztJQUN6QixNQUFNLE9BQU8sR0FBRyxNQUFrQixDQUFDO0lBRW5DLE1BQU0sRUFBQyxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sRUFBQyxHQUMvQixZQUFZLENBQUMsb0JBQW9CLENBQUMsUUFBUSxFQUFFLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUNoRSxZQUFZLENBQUMsbUJBQW1CLENBQUMsT0FBTyxDQUFDLE1BQU0sRUFBRSxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDbEUsTUFBTSxFQUFDLElBQUksRUFBRSxLQUFLLEVBQUMsR0FBRyxZQUFZLENBQUMsb0JBQW9CLENBQUMsVUFBVSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0lBRTVFLE1BQU0sTUFBTSxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUM7SUFDNUIsSUFBSSxHQUFHLEdBQW9CLElB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QUFJLFVBQVUsS0FBSyxHQUFHLEVBQUU7WUFDdEIsU0FBUztTQUNWO1FBQ0QsT0FBTyxDQUFDLFdBQVcsQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLENBQUM7S0FDeEM7SUFFRCxPQUFPLEdBQUcsQ0FBQztBQUNiLENBQUM7QUFFRCxNQUFNLENBQUMsTUFBTSxZQUFZLEdBQWlCO0lBQ3hDLFVBQVUsRUFBRSxNQUFNO0lBQ2xCLFdBQVcsRUFBRSxRQUFRO0lBQ3JCLFVBQVUsRUFBRSxNQUErQjtDQUM1QyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge2JhY2tlbmRfdXRpbCwgRWluc3VtLCBFaW5zdW1BdHRycywgRWluc3VtSW5wdXRzLCBLZXJuZWxDb25maWcsIEtlcm5lbEZ1bmMsIFRlbnNvciwgVGVuc29ySW5mbywgdXRpbH0gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcblxuaW1wb3J0IHtXZWJHUFVCYWNrZW5kfSBmcm9tICcuLi9iYWNrZW5kX3dlYmdwdSc7XG5cbmltcG9ydCB7bXVsdGlwbHlLZXJuZWxGdW5jfSBmcm9tICcuL011bHRpcGx5JztcbmltcG9ydCB7cmVzaGFwZX0gZnJvbSAnLi9SZXNoYXBlJztcbmltcG9ydCB7c3VtfSBmcm9tICcuL1N1bSc7XG5pbXBvcnQge3RyYW5zcG9zZX0gZnJvbSAnLi9UcmFuc3Bvc2UnO1xuXG5leHBvcnQgZnVuY3Rpb24gZWluc3VtKFxuICAgIGFyZ3M6IHtpbnB1dHM6IEVpbnN1bUlucHV0cywgYmFja2VuZDogV2ViR1BVQmFja2VuZCwgYXR0cnM6IEVpbnN1bUF0dHJzfSk6XG4gICAgVGVuc29ySW5mbyB7XG4gIGNvbnN0IHtpbnB1dHMsIGJhY2tlbmQsIGF0dHJzfSA9IGFyZ3M7XG4gIGNvbnN0IHtlcXVhdGlvbn0gPSBhdHRycztcbiAgY29uc3QgdGVuc29ycyA9IGlucHV0cyBhcyBUZW5zb3JbXTtcblxuICBjb25zdCB7YWxsRGltcywgc3VtbWVkRGltcywgaWREaW1zfSA9XG4gICAgICBiYWNrZW5kX3V0aWwuZGVjb2RlRWluc3VtRXF1YXRpb24oZXF1YXRpb24sIHRlbnNvcnMubGVuZ3RoKTtcbiAgYmFja2VuZF91dGlsLmNoZWNrRWluc3VtRGltU2l6ZXMoYWxsRGltcy5sZW5ndGgsIGlkRGltcywgdGVuc29ycyk7XG4gIGNvbnN0IHtwYXRoLCBzdGVwc30gPSBiYWNrZW5kX3V0aWwuZ2V0RWluc3VtQ29tcHV0ZVBhdGgoc3VtbWVkRGltcywgaWREaW1zKTtcblxuICBjb25zdCBuU3RlcHMgPSBzdGVwcy5sZW5ndGg7XG4gIGxldCBvdXQ6IFRlbnNvckluZm98bnVsbCA9IG51bGw7XG4gIGxldCBudW1EaW1zUmVtYWluaW5nID0gYWxsRGltcy5sZW5ndGg7XG4gIGNvbnN0IHRlbnNvcnNUb0Rpc3Bvc2U6IFRlbnNvckluZm9bXSA9IFtdO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IG5TdGVwczsgKytpKSB7XG4gICAgZm9yIChjb25zdCBpZFRlcm0gb2Ygc3RlcHNbaV0pIHtcbiAgICAgIGNvbnN0IHtwZXJtdXRhdGlvbkluZGljZXM6IHBlcm0sIGV4cGFuZERpbXM6IGRpbXNUb0V4cGFuZH0gPVxuICAgICAgICAgIGJhY2tlbmRfdXRpbC5nZXRFaW5zdW1QZXJtdXRhdGlvbihudW1EaW1zUmVtYWluaW5nLCBpZERpbXNbaWRUZXJtXSk7XG4gICAgICBsZXQgeDogVGVuc29ySW5mbztcbiAgICAgIGlmIChiYWNrZW5kX3V0aWwuaXNJZGVudGl0eVBlcm11dGF0aW9uKHBlcm0pKSB7XG4gICAgICAgIHggPSB0ZW5zb3JzW2lkVGVybV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB4ID0gdHJhbnNwb3NlKHtpbnB1dHM6IHt4OiB0ZW5zb3JzW2lkVGVybV19LCBiYWNrZW5kLCBhdHRyczoge3Blcm19fSk7XG4gICAgICAgIHRlbnNvcnNUb0Rpc3Bvc2UucHVzaCh4KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHRhcmdldFNoYXBlOiBudW1iZXJbXSA9IHguc2hhcGUuc2xpY2UoKTtcbiAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgZGltc1RvRXhwYW5kLmxlbmd0aDsgKytrKSB7XG4gICAgICAgIHRhcmdldFNoYXBlLnNwbGljZShkaW1zVG9FeHBhbmRba10sIDAsIDEpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXV0aWwuYXJyYXlzRXF1YWwoeC5zaGFwZSwgdGFyZ2V0U2hhcGUpKSB7XG4gICAgICAgIHggPSByZXNoYXBlKHtpbnB1dHM6IHt4fSwgYmFja2VuZCwgYXR0cnM6IHtzaGFwZTogdGFyZ2V0U2hhcGV9fSk7XG4gICAgICAgIHRlbnNvcnNUb0Rpc3Bvc2UucHVzaCh4KTtcbiAgICAgIH1cbiAgICAgIGlmIChvdXQgPT09IG51bGwpIHtcbiAgICAgICAgb3V0ID0geDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTogbm8tdW5uZWNlc3NhcnktdHlwZS1hc3NlcnRpb25cbiAgICAgICAgb3V0ID1cbiAgICAgICAgICAgIG11bHRpcGx5S2VybmVsRnVuYyh7aW5wdXRzOiB7YTogeCwgYjogb3V0fSwgYmFja2VuZH0pIGFzIFRlbnNvckluZm87XG4gICAgICAgIHRlbnNvcnNUb0Rpc3Bvc2UucHVzaChvdXQpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaSA8IG5TdGVwcyAtIDEpIHtcbiAgICAgIGlmIChwYXRoW2ldID49IDApIHtcbiAgICAgICAgb3V0ID0gc3VtKHtcbiAgICAgICAgICBpbnB1dHM6IHt4OiBvdXR9LFxuICAgICAgICAgIGJhY2tlbmQsXG4gICAgICAgICAgYXR0cnM6IHtcbiAgICAgICAgICAgIGF4aXM6IHBhdGhbaV0gLSAoYWxsRGltcy5sZW5ndGggLSBudW1EaW1zUmVtYWluaW5nKSxcbiAgICAgICAgICAgIGtlZXBEaW1zOiBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRlbnNvcnNUb0Rpc3Bvc2UucHVzaChvdXQpO1xuICAgICAgfVxuICAgICAgbnVtRGltc1JlbWFpbmluZy0tO1xuICAgIH1cbiAgfVxuXG4gIC8vIENsZWFuIHVwIGludGVybWVkaWF0ZSB0ZW5zb3JzLlxuICBmb3IgKGNvbnN0IHRlbnNvckluZm8gb2YgdGVuc29yc1RvRGlzcG9zZSkge1xuICAgIGlmICh0ZW5zb3JJbmZvID09PSBvdXQpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBiYWNrZW5kLmRpc3Bvc2VEYXRhKHRlbnNvckluZm8uZGF0YUlkKTtcbiAgfVxuXG4gIHJldHVybiBvdXQ7XG59XG5cbmV4cG9ydCBjb25zdCBlaW5zdW1Db25maWc6IEtlcm5lbENvbmZpZyA9IHtcbiAga2VybmVsTmFtZTogRWluc3VtLFxuICBiYWNrZW5kTmFtZTogJ3dlYmdwdScsXG4gIGtlcm5lbEZ1bmM6IGVpbnN1bSBhcyB1bmtub3duIGFzIEtlcm5lbEZ1bmNcbn07XG4iXX0=","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Elu } from '@tensorflow/tfjs-core';\nimport { unaryKernelFunc } from '../kernel_utils/kernel_funcs_utils';\nimport { UnaryOpType } from '../unary_op_util';\nexport const elu = unaryKernelFunc({ opType: UnaryOpType.ELU });\nexport const eluConfig = {\n    kernelName: Elu,\n    backendName: 'webgpu',\n    kernelFunc: elu\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRWx1LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMva2VybmVscy9FbHUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUFDLEdBQUcsRUFBZSxNQUFNLHVCQUF1QixDQUFDO0FBQ3hELE9BQU8sRUFBQyxlQUFlLEVBQUMsTUFBTSxvQ0FBb0MsQ0FBQztBQUNuRSxPQUFPLEVBQUMsV0FBVyxFQUFDLE1BQU0sa0JBQWtCLENBQUM7QUFFN0MsTUFBTSxDQUFDLE1BQU0sR0FBRyxHQUFHLGVBQWUsQ0FBQyxFQUFDLE1BQU0sRUFBRSxXQUFXLENBQUMsR0FBRyxFQUFDLENBQUMsQ0FBQztBQUU5RCxNQUFNLENBQUMsTUFBTSxTQUFTLEdBQWlCO0lBQ3JDLFVBQVUsRUFBRSxHQUFHO0lBQ2YsV0FBVyxFQUFFLFFBQVE7SUFDckIsVUFBVSxFQUFFLEdBQUc7Q0FDaEIsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtFbHUsIEtlcm5lbENvbmZpZ30gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcbmltcG9ydCB7dW5hcnlLZXJuZWxGdW5jfSBmcm9tICcuLi9rZXJuZWxfdXRpbHMva2VybmVsX2Z1bmNzX3V0aWxzJztcbmltcG9ydCB7VW5hcnlPcFR5cGV9IGZyb20gJy4uL3VuYXJ5X29wX3V0aWwnO1xuXG5leHBvcnQgY29uc3QgZWx1ID0gdW5hcnlLZXJuZWxGdW5jKHtvcFR5cGU6IFVuYXJ5T3BUeXBlLkVMVX0pO1xuXG5leHBvcnQgY29uc3QgZWx1Q29uZmlnOiBLZXJuZWxDb25maWcgPSB7XG4gIGtlcm5lbE5hbWU6IEVsdSxcbiAgYmFja2VuZE5hbWU6ICd3ZWJncHUnLFxuICBrZXJuZWxGdW5jOiBlbHVcbn07XG4iXX0=","/**\n * @license\n * Copyright 2023 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { EluGrad } from '@tensorflow/tfjs-core';\nimport { BinaryOpType } from '../binary_op_util';\nimport { BinaryOpProgram } from '../binary_op_webgpu';\nexport const eluGrad = (args) => {\n    const { inputs, backend } = args;\n    const { dy, y } = inputs;\n    const program = new BinaryOpProgram(BinaryOpType.ELU_DER, dy.shape, y.shape);\n    return backend.runWebGPUProgram(program, [dy, y], dy.dtype);\n};\nexport const eluGradConfig = {\n    kernelName: EluGrad,\n    backendName: 'webgpu',\n    kernelFunc: eluGrad\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRWx1R3JhZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2tlcm5lbHMvRWx1R3JhZC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQUMsT0FBTyxFQUFzRCxNQUFNLHVCQUF1QixDQUFDO0FBR25HLE9BQU8sRUFBQyxZQUFZLEVBQUMsTUFBTSxtQkFBbUIsQ0FBQztBQUMvQyxPQUFPLEVBQUMsZUFBZSxFQUFDLE1BQU0scUJBQXFCLENBQUM7QUFFcEQsTUFBTSxDQUFDLE1BQU0sT0FBTyxHQUNoQixDQUFDLElBQXFELEVBQWMsRUFBRTtJQUNwRSxNQUFNLEVBQUMsTUFBTSxFQUFFLE9BQU8sRUFBQyxHQUFHLElBQUksQ0FBQztJQUMvQixNQUFNLEVBQUMsRUFBRSxFQUFFLENBQUMsRUFBQyxHQUFHLE1BQU0sQ0FBQztJQUV2QixNQUFNLE9BQU8sR0FDVCxJQUFJLGVBQWUsQ0FBQyxZQUFZLENBQUMsT0FBTyxFQUFFLEVBQUUsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ2pFLE9BQU8sT0FBTyxDQUFDLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDOUQsQ0FBQyxDQUFDO0FBRU4sTUFBTSxDQUFDLE1BQU0sYUFBYSxHQUFpQjtJQUN6QyxVQUFVLEVBQUUsT0FBTztJQUNuQixXQUFXLEVBQUUsUUFBUTtJQUNyQixVQUFVLEVBQUUsT0FBZ0M7Q0FDN0MsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTEMuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtFbHVHcmFkLCBFbHVHcmFkSW5wdXRzLCBLZXJuZWxDb25maWcsIEtlcm5lbEZ1bmMsIFRlbnNvckluZm99IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7V2ViR1BVQmFja2VuZH0gZnJvbSAnLi4vYmFja2VuZF93ZWJncHUnO1xuaW1wb3J0IHtCaW5hcnlPcFR5cGV9IGZyb20gJy4uL2JpbmFyeV9vcF91dGlsJztcbmltcG9ydCB7QmluYXJ5T3BQcm9ncmFtfSBmcm9tICcuLi9iaW5hcnlfb3Bfd2ViZ3B1JztcblxuZXhwb3J0IGNvbnN0IGVsdUdyYWQgPVxuICAgIChhcmdzOiB7aW5wdXRzOiBFbHVHcmFkSW5wdXRzLCBiYWNrZW5kOiBXZWJHUFVCYWNrZW5kfSk6IFRlbnNvckluZm8gPT4ge1xuICAgICAgY29uc3Qge2lucHV0cywgYmFja2VuZH0gPSBhcmdzO1xuICAgICAgY29uc3Qge2R5LCB5fSA9IGlucHV0cztcblxuICAgICAgY29uc3QgcHJvZ3JhbSA9XG4gICAgICAgICAgbmV3IEJpbmFyeU9wUHJvZ3JhbShCaW5hcnlPcFR5cGUuRUxVX0RFUiwgZHkuc2hhcGUsIHkuc2hhcGUpO1xuICAgICAgcmV0dXJuIGJhY2tlbmQucnVuV2ViR1BVUHJvZ3JhbShwcm9ncmFtLCBbZHksIHldLCBkeS5kdHlwZSk7XG4gICAgfTtcblxuZXhwb3J0IGNvbnN0IGVsdUdyYWRDb25maWc6IEtlcm5lbENvbmZpZyA9IHtcbiAga2VybmVsTmFtZTogRWx1R3JhZCxcbiAgYmFja2VuZE5hbWU6ICd3ZWJncHUnLFxuICBrZXJuZWxGdW5jOiBlbHVHcmFkIGFzIHVua25vd24gYXMgS2VybmVsRnVuY1xufTtcbiJdfQ==","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Equal } from '@tensorflow/tfjs-core';\nimport { BinaryOpType } from '../binary_op_util';\nimport { binaryKernelFunc } from '../kernel_utils/kernel_funcs_utils';\nimport { equalImplCPU as cpuEqual } from '../kernel_utils/shared';\nexport const equal = binaryKernelFunc({ opType: BinaryOpType.EQUAL, dtype: 'bool', cpuKernelImpl: cpuEqual });\nexport const equalConfig = {\n    kernelName: Equal,\n    backendName: 'webgpu',\n    kernelFunc: equal\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRXF1YWwuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9rZXJuZWxzL0VxdWFsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sRUFBQyxLQUFLLEVBQWUsTUFBTSx1QkFBdUIsQ0FBQztBQUUxRCxPQUFPLEVBQUMsWUFBWSxFQUFDLE1BQU0sbUJBQW1CLENBQUM7QUFDL0MsT0FBTyxFQUFDLGdCQUFnQixFQUFDLE1BQU0sb0NBQW9DLENBQUM7QUFDcEUsT0FBTyxFQUFDLFlBQVksSUFBSSxRQUFRLEVBQUMsTUFBTSx3QkFBd0IsQ0FBQztBQUVoRSxNQUFNLENBQUMsTUFBTSxLQUFLLEdBQUcsZ0JBQWdCLENBQ2pDLEVBQUMsTUFBTSxFQUFFLFlBQVksQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxhQUFhLEVBQUUsUUFBUSxFQUFDLENBQUMsQ0FBQztBQUUxRSxNQUFNLENBQUMsTUFBTSxXQUFXLEdBQWlCO0lBQ3ZDLFVBQVUsRUFBRSxLQUFLO0lBQ2pCLFdBQVcsRUFBRSxRQUFRO0lBQ3JCLFVBQVUsRUFBRSxLQUFLO0NBQ2xCLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7RXF1YWwsIEtlcm5lbENvbmZpZ30gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcblxuaW1wb3J0IHtCaW5hcnlPcFR5cGV9IGZyb20gJy4uL2JpbmFyeV9vcF91dGlsJztcbmltcG9ydCB7YmluYXJ5S2VybmVsRnVuY30gZnJvbSAnLi4va2VybmVsX3V0aWxzL2tlcm5lbF9mdW5jc191dGlscyc7XG5pbXBvcnQge2VxdWFsSW1wbENQVSBhcyBjcHVFcXVhbH0gZnJvbSAnLi4va2VybmVsX3V0aWxzL3NoYXJlZCc7XG5cbmV4cG9ydCBjb25zdCBlcXVhbCA9IGJpbmFyeUtlcm5lbEZ1bmMoXG4gICAge29wVHlwZTogQmluYXJ5T3BUeXBlLkVRVUFMLCBkdHlwZTogJ2Jvb2wnLCBjcHVLZXJuZWxJbXBsOiBjcHVFcXVhbH0pO1xuXG5leHBvcnQgY29uc3QgZXF1YWxDb25maWc6IEtlcm5lbENvbmZpZyA9IHtcbiAga2VybmVsTmFtZTogRXF1YWwsXG4gIGJhY2tlbmROYW1lOiAnd2ViZ3B1JyxcbiAga2VybmVsRnVuYzogZXF1YWxcbn07XG4iXX0=","/**\n * @license\n * Copyright 2022 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Erf } from '@tensorflow/tfjs-core';\nimport { unaryKernelFunc } from '../kernel_utils/kernel_funcs_utils';\nimport { UnaryOpType } from '../unary_op_util';\nexport const erf = unaryKernelFunc({ opType: UnaryOpType.ERF });\nexport const erfConfig = {\n    kernelName: Erf,\n    backendName: 'webgpu',\n    kernelFunc: erf\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRXJmLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMva2VybmVscy9FcmYudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUFDLEdBQUcsRUFBZSxNQUFNLHVCQUF1QixDQUFDO0FBRXhELE9BQU8sRUFBQyxlQUFlLEVBQUMsTUFBTSxvQ0FBb0MsQ0FBQztBQUVuRSxPQUFPLEVBQUMsV0FBVyxFQUFDLE1BQU0sa0JBQWtCLENBQUM7QUFFN0MsTUFBTSxDQUFDLE1BQU0sR0FBRyxHQUFHLGVBQWUsQ0FBQyxFQUFDLE1BQU0sRUFBRSxXQUFXLENBQUMsR0FBRyxFQUFDLENBQUMsQ0FBQztBQUU5RCxNQUFNLENBQUMsTUFBTSxTQUFTLEdBQWlCO0lBQ3JDLFVBQVUsRUFBRSxHQUFHO0lBQ2YsV0FBVyxFQUFFLFFBQVE7SUFDckIsVUFBVSxFQUFFLEdBQUc7Q0FDaEIsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTEMuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtFcmYsIEtlcm5lbENvbmZpZ30gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcblxuaW1wb3J0IHt1bmFyeUtlcm5lbEZ1bmN9IGZyb20gJy4uL2tlcm5lbF91dGlscy9rZXJuZWxfZnVuY3NfdXRpbHMnO1xuXG5pbXBvcnQge1VuYXJ5T3BUeXBlfSBmcm9tICcuLi91bmFyeV9vcF91dGlsJztcblxuZXhwb3J0IGNvbnN0IGVyZiA9IHVuYXJ5S2VybmVsRnVuYyh7b3BUeXBlOiBVbmFyeU9wVHlwZS5FUkZ9KTtcblxuZXhwb3J0IGNvbnN0IGVyZkNvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBFcmYsXG4gIGJhY2tlbmROYW1lOiAnd2ViZ3B1JyxcbiAga2VybmVsRnVuYzogZXJmXG59O1xuIl19","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Exp } from '@tensorflow/tfjs-core';\nimport { unaryKernelFunc } from '../kernel_utils/kernel_funcs_utils';\nimport { expImplCPU } from '../kernel_utils/shared';\nimport { UnaryOpType } from '../unary_op_util';\nexport const exp = unaryKernelFunc({\n    opType: UnaryOpType.EXP,\n    cpuKernelImpl: expImplCPU,\n    dtype: 'float32',\n});\nexport const expConfig = {\n    kernelName: Exp,\n    backendName: 'webgpu',\n    kernelFunc: exp\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRXhwLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMva2VybmVscy9FeHAudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUFDLEdBQUcsRUFBZSxNQUFNLHVCQUF1QixDQUFDO0FBQ3hELE9BQU8sRUFBQyxlQUFlLEVBQUMsTUFBTSxvQ0FBb0MsQ0FBQztBQUNuRSxPQUFPLEVBQUMsVUFBVSxFQUFDLE1BQU0sd0JBQXdCLENBQUM7QUFDbEQsT0FBTyxFQUFDLFdBQVcsRUFBQyxNQUFNLGtCQUFrQixDQUFDO0FBRTdDLE1BQU0sQ0FBQyxNQUFNLEdBQUcsR0FBRyxlQUFlLENBQUM7SUFDakMsTUFBTSxFQUFFLFdBQVcsQ0FBQyxHQUFHO0lBQ3ZCLGFBQWEsRUFBRSxVQUFVO0lBQ3pCLEtBQUssRUFBRSxTQUFTO0NBQ2pCLENBQUMsQ0FBQztBQUVILE1BQU0sQ0FBQyxNQUFNLFNBQVMsR0FBaUI7SUFDckMsVUFBVSxFQUFFLEdBQUc7SUFDZixXQUFXLEVBQUUsUUFBUTtJQUNyQixVQUFVLEVBQUUsR0FBRztDQUNoQixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge0V4cCwgS2VybmVsQ29uZmlnfSBmcm9tICdAdGVuc29yZmxvdy90ZmpzLWNvcmUnO1xuaW1wb3J0IHt1bmFyeUtlcm5lbEZ1bmN9IGZyb20gJy4uL2tlcm5lbF91dGlscy9rZXJuZWxfZnVuY3NfdXRpbHMnO1xuaW1wb3J0IHtleHBJbXBsQ1BVfSBmcm9tICcuLi9rZXJuZWxfdXRpbHMvc2hhcmVkJztcbmltcG9ydCB7VW5hcnlPcFR5cGV9IGZyb20gJy4uL3VuYXJ5X29wX3V0aWwnO1xuXG5leHBvcnQgY29uc3QgZXhwID0gdW5hcnlLZXJuZWxGdW5jKHtcbiAgb3BUeXBlOiBVbmFyeU9wVHlwZS5FWFAsXG4gIGNwdUtlcm5lbEltcGw6IGV4cEltcGxDUFUsXG4gIGR0eXBlOiAnZmxvYXQzMicsXG59KTtcblxuZXhwb3J0IGNvbnN0IGV4cENvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBFeHAsXG4gIGJhY2tlbmROYW1lOiAnd2ViZ3B1JyxcbiAga2VybmVsRnVuYzogZXhwXG59O1xuIl19","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the License);\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an AS IS BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { ExpandDims, util } from '@tensorflow/tfjs-core';\nimport { reshape } from './Reshape';\nexport function expandDims(args) {\n    const { inputs, attrs, backend } = args;\n    const { dim } = attrs;\n    const { input } = inputs;\n    const inputRank = input.shape.length;\n    const newShape = input.shape.slice();\n    let $dim = dim;\n    if (dim < 0) {\n        // Negative value is counted from the tail of rank.\n        util.assert(-(inputRank + 1) <= dim, () => `Axis must be in the interval [${-(inputRank + 1)}, ${inputRank}]`);\n        $dim = inputRank + dim + 1;\n    }\n    newShape.splice($dim, 0, 1);\n    return reshape({ inputs: { x: input }, backend, attrs: { shape: newShape } });\n}\nexport const expandDimsConfig = {\n    kernelName: ExpandDims,\n    backendName: 'webgpu',\n    kernelFunc: expandDims,\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRXhwYW5kRGltcy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2tlcm5lbHMvRXhwYW5kRGltcy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQUMsVUFBVSxFQUEyRSxJQUFJLEVBQUMsTUFBTSx1QkFBdUIsQ0FBQztBQUdoSSxPQUFPLEVBQUMsT0FBTyxFQUFDLE1BQU0sV0FBVyxDQUFDO0FBRWxDLE1BQU0sVUFBVSxVQUFVLENBQUMsSUFJMUI7SUFDQyxNQUFNLEVBQUMsTUFBTSxFQUFFLEtBQUssRUFBRSxPQUFPLEVBQUMsR0FBRyxJQUFJLENBQUM7SUFDdEMsTUFBTSxFQUFDLEdBQUcsRUFBQyxHQUFHLEtBQUssQ0FBQztJQUNwQixNQUFNLEVBQUMsS0FBSyxFQUFDLEdBQUcsTUFBTSxDQUFDO0lBRXZCLE1BQU0sU0FBUyxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDO0lBQ3JDLE1BQU0sUUFBUSxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUMsS0FBSyxFQUFFLENBQUM7SUFDckMsSUFBSSxJQUFJLEdBQUcsR0FBRyxDQUFDO0lBQ2YsSUFBSSxHQUFHLEdBQUcsQ0FBQyxFQUFFO1FBQ1gsbURBQW1EO1FBQ25ELElBQUksQ0FBQyxNQUFNLENBQ1AsQ0FBQyxDQUFDLFNBQVMsR0FBRyxDQUFDLENBQUMsSUFBSSxHQUFHLEVBQ3ZCLEdBQUcsRUFBRSxDQUFDLGlDQUFpQyxDQUFFLENBQUMsU0FBUyxHQUFHLENBQUMsQ0FBQyxLQUNwRCxTQUFTLEdBQUcsQ0FBQyxDQUFDO1FBQ3RCLElBQUksR0FBRyxTQUFTLEdBQUcsR0FBRyxHQUFHLENBQUMsQ0FBQztLQUM1QjtJQUNELFFBQVEsQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUU1QixPQUFPLE9BQU8sQ0FBQyxFQUFDLE1BQU0sRUFBRSxFQUFDLENBQUMsRUFBRSxLQUFLLEVBQUMsRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLEVBQUMsS0FBSyxFQUFFLFFBQVEsRUFBQyxFQUFDLENBQUMsQ0FBQztBQUMxRSxDQUFDO0FBRUQsTUFBTSxDQUFDLE1BQU0sZ0JBQWdCLEdBQWlCO0lBQzVDLFVBQVUsRUFBRSxVQUFVO0lBQ3RCLFdBQVcsRUFBRSxRQUFRO0lBQ3JCLFVBQVUsRUFBRSxVQUFtQztDQUNoRCxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBMaWNlbnNlKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIEFTIElTIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtFeHBhbmREaW1zLCBFeHBhbmREaW1zQXR0cnMsIEV4cGFuZERpbXNJbnB1dHMsIEtlcm5lbENvbmZpZywgS2VybmVsRnVuYywgVGVuc29ySW5mbywgdXRpbH0gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcblxuaW1wb3J0IHtXZWJHUFVCYWNrZW5kfSBmcm9tICcuLi9iYWNrZW5kX3dlYmdwdSc7XG5pbXBvcnQge3Jlc2hhcGV9IGZyb20gJy4vUmVzaGFwZSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBleHBhbmREaW1zKGFyZ3M6IHtcbiAgaW5wdXRzOiBFeHBhbmREaW1zSW5wdXRzLFxuICBhdHRyczogRXhwYW5kRGltc0F0dHJzLFxuICBiYWNrZW5kOiBXZWJHUFVCYWNrZW5kXG59KTogVGVuc29ySW5mbyB7XG4gIGNvbnN0IHtpbnB1dHMsIGF0dHJzLCBiYWNrZW5kfSA9IGFyZ3M7XG4gIGNvbnN0IHtkaW19ID0gYXR0cnM7XG4gIGNvbnN0IHtpbnB1dH0gPSBpbnB1dHM7XG5cbiAgY29uc3QgaW5wdXRSYW5rID0gaW5wdXQuc2hhcGUubGVuZ3RoO1xuICBjb25zdCBuZXdTaGFwZSA9IGlucHV0LnNoYXBlLnNsaWNlKCk7XG4gIGxldCAkZGltID0gZGltO1xuICBpZiAoZGltIDwgMCkge1xuICAgIC8vIE5lZ2F0aXZlIHZhbHVlIGlzIGNvdW50ZWQgZnJvbSB0aGUgdGFpbCBvZiByYW5rLlxuICAgIHV0aWwuYXNzZXJ0KFxuICAgICAgICAtKGlucHV0UmFuayArIDEpIDw9IGRpbSxcbiAgICAgICAgKCkgPT4gYEF4aXMgbXVzdCBiZSBpbiB0aGUgaW50ZXJ2YWwgWyR7LSAoaW5wdXRSYW5rICsgMSl9LCAke1xuICAgICAgICAgICAgaW5wdXRSYW5rfV1gKTtcbiAgICAkZGltID0gaW5wdXRSYW5rICsgZGltICsgMTtcbiAgfVxuICBuZXdTaGFwZS5zcGxpY2UoJGRpbSwgMCwgMSk7XG5cbiAgcmV0dXJuIHJlc2hhcGUoe2lucHV0czoge3g6IGlucHV0fSwgYmFja2VuZCwgYXR0cnM6IHtzaGFwZTogbmV3U2hhcGV9fSk7XG59XG5cbmV4cG9ydCBjb25zdCBleHBhbmREaW1zQ29uZmlnOiBLZXJuZWxDb25maWcgPSB7XG4gIGtlcm5lbE5hbWU6IEV4cGFuZERpbXMsXG4gIGJhY2tlbmROYW1lOiAnd2ViZ3B1JyxcbiAga2VybmVsRnVuYzogZXhwYW5kRGltcyBhcyB1bmtub3duIGFzIEtlcm5lbEZ1bmMsXG59O1xuIl19","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Expm1 } from '@tensorflow/tfjs-core';\nimport { unaryKernelFunc } from '../kernel_utils/kernel_funcs_utils';\nimport { expm1ImplCPU } from '../kernel_utils/shared';\nimport { UnaryOpType } from '../unary_op_util';\nexport const expm1 = unaryKernelFunc({ opType: UnaryOpType.EXPM1, cpuKernelImpl: expm1ImplCPU });\nexport const expm1Config = {\n    kernelName: Expm1,\n    backendName: 'webgpu',\n    kernelFunc: expm1\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRXhwbTEuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9rZXJuZWxzL0V4cG0xLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sRUFBQyxLQUFLLEVBQWUsTUFBTSx1QkFBdUIsQ0FBQztBQUMxRCxPQUFPLEVBQUMsZUFBZSxFQUFDLE1BQU0sb0NBQW9DLENBQUM7QUFDbkUsT0FBTyxFQUFDLFlBQVksRUFBQyxNQUFNLHdCQUF3QixDQUFDO0FBQ3BELE9BQU8sRUFBQyxXQUFXLEVBQUMsTUFBTSxrQkFBa0IsQ0FBQztBQUU3QyxNQUFNLENBQUMsTUFBTSxLQUFLLEdBQ2QsZUFBZSxDQUFDLEVBQUMsTUFBTSxFQUFFLFdBQVcsQ0FBQyxLQUFLLEVBQUUsYUFBYSxFQUFFLFlBQVksRUFBQyxDQUFDLENBQUM7QUFFOUUsTUFBTSxDQUFDLE1BQU0sV0FBVyxHQUFpQjtJQUN2QyxVQUFVLEVBQUUsS0FBSztJQUNqQixXQUFXLEVBQUUsUUFBUTtJQUNyQixVQUFVLEVBQUUsS0FBSztDQUNsQixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge0V4cG0xLCBLZXJuZWxDb25maWd9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5pbXBvcnQge3VuYXJ5S2VybmVsRnVuY30gZnJvbSAnLi4va2VybmVsX3V0aWxzL2tlcm5lbF9mdW5jc191dGlscyc7XG5pbXBvcnQge2V4cG0xSW1wbENQVX0gZnJvbSAnLi4va2VybmVsX3V0aWxzL3NoYXJlZCc7XG5pbXBvcnQge1VuYXJ5T3BUeXBlfSBmcm9tICcuLi91bmFyeV9vcF91dGlsJztcblxuZXhwb3J0IGNvbnN0IGV4cG0xID1cbiAgICB1bmFyeUtlcm5lbEZ1bmMoe29wVHlwZTogVW5hcnlPcFR5cGUuRVhQTTEsIGNwdUtlcm5lbEltcGw6IGV4cG0xSW1wbENQVX0pO1xuXG5leHBvcnQgY29uc3QgZXhwbTFDb25maWc6IEtlcm5lbENvbmZpZyA9IHtcbiAga2VybmVsTmFtZTogRXhwbTEsXG4gIGJhY2tlbmROYW1lOiAnd2ViZ3B1JyxcbiAga2VybmVsRnVuYzogZXhwbTFcbn07XG4iXX0=","/**\n * @license\n * Copyright 2022 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { getMainHeaderString as main } from './webgpu_program';\nimport { computeDispatch, flatDispatchLayout } from './webgpu_util';\nexport class FFTProgram {\n    constructor(component, shape) {\n        this.variableNames = ['real', 'imag'];\n        this.outputShape = [];\n        this.uniforms = 'exponentMultiplier : f32, denominator: f32,';\n        this.workgroupSize = [64, 1, 1];\n        this.size = true;\n        this.outputShape = shape;\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize);\n        this.component = component;\n        this.shaderKey = `fft_${component}`;\n    }\n    getUserCode() {\n        const opString = this.component === 'real' ?\n            'return real * expR - imag * expI;' :\n            'return real * expI + imag * expR;';\n        const userCode = `\n    fn unaryOpComplex(real: f32, expR: f32, imag: f32, expI: f32) -> f32 {\n      ${opString}\n    }\n\n    fn mulMatDFT(batch: i32, index: i32) -> f32 {\n      let indexRatio = f32(index) / f32(uniforms.realShape[1]);\n      let exponentMultiplierTimesIndexRatio =\n          uniforms.exponentMultiplier * indexRatio;\n\n      var result = 0.0;\n\n      for (var i = 0; i < uniforms.realShape[1]; i = i + 1) {\n        // x = (-2|2 * PI / N) * index * i;\n        let x = exponentMultiplierTimesIndexRatio * f32(i);\n        let expR = cos(x);\n        let expI = sin(x);\n        let real = getReal(batch, i);\n        let imag = getImag(batch, i);\n\n        result = result +\n            unaryOpComplex(real, expR, imag, expI) / uniforms.denominator;\n      }\n\n      return result;\n    }\n\n    ${main('index')} {\n      if (index < uniforms.size) {\n        let coords = getOutputCoords();\n        setOutputAtIndex(index, mulMatDFT(coords[0], coords[1]));\n      }\n    }\n  `;\n        return userCode;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmZ0X3dlYmdwdS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2ZmdF93ZWJncHUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUFDLG1CQUFtQixJQUFJLElBQUksRUFBZ0IsTUFBTSxrQkFBa0IsQ0FBQztBQUM1RSxPQUFPLEVBQUMsZUFBZSxFQUFFLGtCQUFrQixFQUFDLE1BQU0sZUFBZSxDQUFDO0FBRWxFLE1BQU0sT0FBTyxVQUFVO0lBV3JCLFlBQVksU0FBd0IsRUFBRSxLQUF1QjtRQVY3RCxrQkFBYSxHQUFhLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBQzNDLGdCQUFXLEdBQWEsRUFBRSxDQUFDO1FBSTNCLGFBQVEsR0FBRyw2Q0FBNkMsQ0FBQztRQUN6RCxrQkFBYSxHQUE2QixDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDckQsU0FBSSxHQUFHLElBQUksQ0FBQztRQUlWLElBQUksQ0FBQyxXQUFXLEdBQUcsS0FBSyxDQUFDO1FBQ3pCLElBQUksQ0FBQyxjQUFjLEdBQUcsa0JBQWtCLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQzNELElBQUksQ0FBQyxRQUFRLEdBQUcsZUFBZSxDQUMzQixJQUFJLENBQUMsY0FBYyxFQUFFLElBQUksQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBRS9ELElBQUksQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDO1FBQzNCLElBQUksQ0FBQyxTQUFTLEdBQUcsT0FBTyxTQUFTLEVBQUUsQ0FBQztJQUN0QyxDQUFDO0lBRUQsV0FBVztRQUNULE1BQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxTQUFTLEtBQUssTUFBTSxDQUFDLENBQUM7WUFDeEMsbUNBQW1DLENBQUMsQ0FBQztZQUNyQyxtQ0FBbUMsQ0FBQztRQUN4QyxNQUFNLFFBQVEsR0FBRzs7UUFFYixRQUFROzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O01BeUJWLElBQUksQ0FBQyxPQUFPLENBQUM7Ozs7OztHQU1oQixDQUFDO1FBQ0EsT0FBTyxRQUFRLENBQUM7SUFDbEIsQ0FBQztDQUNGIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQy5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge2dldE1haW5IZWFkZXJTdHJpbmcgYXMgbWFpbiwgV2ViR1BVUHJvZ3JhbX0gZnJvbSAnLi93ZWJncHVfcHJvZ3JhbSc7XG5pbXBvcnQge2NvbXB1dGVEaXNwYXRjaCwgZmxhdERpc3BhdGNoTGF5b3V0fSBmcm9tICcuL3dlYmdwdV91dGlsJztcblxuZXhwb3J0IGNsYXNzIEZGVFByb2dyYW0gaW1wbGVtZW50cyBXZWJHUFVQcm9ncmFtIHtcbiAgdmFyaWFibGVOYW1lczogc3RyaW5nW10gPSBbJ3JlYWwnLCAnaW1hZyddO1xuICBvdXRwdXRTaGFwZTogbnVtYmVyW10gPSBbXTtcbiAgc2hhZGVyS2V5OiBzdHJpbmc7XG4gIGRpc3BhdGNoTGF5b3V0OiB7eDogbnVtYmVyW119O1xuICBkaXNwYXRjaDogW251bWJlciwgbnVtYmVyLCBudW1iZXJdO1xuICB1bmlmb3JtcyA9ICdleHBvbmVudE11bHRpcGxpZXIgOiBmMzIsIGRlbm9taW5hdG9yOiBmMzIsJztcbiAgd29ya2dyb3VwU2l6ZTogW251bWJlciwgbnVtYmVyLCBudW1iZXJdID0gWzY0LCAxLCAxXTtcbiAgc2l6ZSA9IHRydWU7XG4gIGNvbXBvbmVudDogc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKGNvbXBvbmVudDogJ3JlYWwnfCdpbWFnJywgc2hhcGU6IFtudW1iZXIsIG51bWJlcl0pIHtcbiAgICB0aGlzLm91dHB1dFNoYXBlID0gc2hhcGU7XG4gICAgdGhpcy5kaXNwYXRjaExheW91dCA9IGZsYXREaXNwYXRjaExheW91dCh0aGlzLm91dHB1dFNoYXBlKTtcbiAgICB0aGlzLmRpc3BhdGNoID0gY29tcHV0ZURpc3BhdGNoKFxuICAgICAgICB0aGlzLmRpc3BhdGNoTGF5b3V0LCB0aGlzLm91dHB1dFNoYXBlLCB0aGlzLndvcmtncm91cFNpemUpO1xuXG4gICAgdGhpcy5jb21wb25lbnQgPSBjb21wb25lbnQ7XG4gICAgdGhpcy5zaGFkZXJLZXkgPSBgZmZ0XyR7Y29tcG9uZW50fWA7XG4gIH1cblxuICBnZXRVc2VyQ29kZSgpOiBzdHJpbmcge1xuICAgIGNvbnN0IG9wU3RyaW5nID0gdGhpcy5jb21wb25lbnQgPT09ICdyZWFsJyA/XG4gICAgICAgICdyZXR1cm4gcmVhbCAqIGV4cFIgLSBpbWFnICogZXhwSTsnIDpcbiAgICAgICAgJ3JldHVybiByZWFsICogZXhwSSArIGltYWcgKiBleHBSOyc7XG4gICAgY29uc3QgdXNlckNvZGUgPSBgXG4gICAgZm4gdW5hcnlPcENvbXBsZXgocmVhbDogZjMyLCBleHBSOiBmMzIsIGltYWc6IGYzMiwgZXhwSTogZjMyKSAtPiBmMzIge1xuICAgICAgJHtvcFN0cmluZ31cbiAgICB9XG5cbiAgICBmbiBtdWxNYXRERlQoYmF0Y2g6IGkzMiwgaW5kZXg6IGkzMikgLT4gZjMyIHtcbiAgICAgIGxldCBpbmRleFJhdGlvID0gZjMyKGluZGV4KSAvIGYzMih1bmlmb3Jtcy5yZWFsU2hhcGVbMV0pO1xuICAgICAgbGV0IGV4cG9uZW50TXVsdGlwbGllclRpbWVzSW5kZXhSYXRpbyA9XG4gICAgICAgICAgdW5pZm9ybXMuZXhwb25lbnRNdWx0aXBsaWVyICogaW5kZXhSYXRpbztcblxuICAgICAgdmFyIHJlc3VsdCA9IDAuMDtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB1bmlmb3Jtcy5yZWFsU2hhcGVbMV07IGkgPSBpICsgMSkge1xuICAgICAgICAvLyB4ID0gKC0yfDIgKiBQSSAvIE4pICogaW5kZXggKiBpO1xuICAgICAgICBsZXQgeCA9IGV4cG9uZW50TXVsdGlwbGllclRpbWVzSW5kZXhSYXRpbyAqIGYzMihpKTtcbiAgICAgICAgbGV0IGV4cFIgPSBjb3MoeCk7XG4gICAgICAgIGxldCBleHBJID0gc2luKHgpO1xuICAgICAgICBsZXQgcmVhbCA9IGdldFJlYWwoYmF0Y2gsIGkpO1xuICAgICAgICBsZXQgaW1hZyA9IGdldEltYWcoYmF0Y2gsIGkpO1xuXG4gICAgICAgIHJlc3VsdCA9IHJlc3VsdCArXG4gICAgICAgICAgICB1bmFyeU9wQ29tcGxleChyZWFsLCBleHBSLCBpbWFnLCBleHBJKSAvIHVuaWZvcm1zLmRlbm9taW5hdG9yO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgICR7bWFpbignaW5kZXgnKX0ge1xuICAgICAgaWYgKGluZGV4IDwgdW5pZm9ybXMuc2l6ZSkge1xuICAgICAgICBsZXQgY29vcmRzID0gZ2V0T3V0cHV0Q29vcmRzKCk7XG4gICAgICAgIHNldE91dHB1dEF0SW5kZXgoaW5kZXgsIG11bE1hdERGVChjb29yZHNbMF0sIGNvb3Jkc1sxXSkpO1xuICAgICAgfVxuICAgIH1cbiAgYDtcbiAgICByZXR1cm4gdXNlckNvZGU7XG4gIH1cbn1cbiJdfQ==","/**\n * @license\n * Copyright 2022 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { util } from '@tensorflow/tfjs-core';\nimport { FFTProgram } from '../fft_webgpu';\nimport { complex } from './Complex';\nimport { reshape } from './Reshape';\nexport function fftImpl(x, inverse, backend) {\n    const xData = backend.tensorMap.get(x.dataId);\n    const inputSize = util.sizeFromShape(x.shape);\n    // Collapse all outer dimensions to a single batch dimension.\n    const innerDimensionSize = x.shape[x.shape.length - 1];\n    const batch = inputSize / innerDimensionSize;\n    const toDispose = [];\n    const input2D = reshape({ inputs: { x }, backend, attrs: { shape: [batch, innerDimensionSize] } });\n    toDispose.push(input2D);\n    const xShape = input2D.shape;\n    const realProgram = new FFTProgram('real', xShape);\n    const imagProgram = new FFTProgram('imag', xShape);\n    const inputs = [\n        {\n            dataId: xData.complexTensorInfos.real.dataId,\n            dtype: xData.complexTensorInfos.real.dtype,\n            shape: xShape\n        },\n        {\n            dataId: xData.complexTensorInfos.imag.dataId,\n            dtype: xData.complexTensorInfos.imag.dtype,\n            shape: xShape\n        }\n    ];\n    const exponentMultiplier = inverse ? 2.0 * Math.PI : -2.0 * Math.PI;\n    const denominator = inverse ? xShape[1] : 1.0;\n    const uniformData = [\n        { type: 'float32', data: [exponentMultiplier] },\n        { type: 'float32', data: [denominator] }\n    ];\n    const realPart = backend.runWebGPUProgram(realProgram, inputs, 'float32', uniformData);\n    toDispose.push(realPart);\n    const imagPart = backend.runWebGPUProgram(imagProgram, inputs, 'float32', uniformData);\n    toDispose.push(imagPart);\n    const complexOutput = complex({ inputs: { real: realPart, imag: imagPart }, backend });\n    toDispose.push(complexOutput);\n    const complexOutputReshaped = reshape({ inputs: { x: complexOutput }, backend, attrs: { shape: x.shape } });\n    toDispose.forEach(t => backend.disposeData(t.dataId));\n    return complexOutputReshaped;\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRkZUX2ltcGwuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9rZXJuZWxzL0ZGVF9pbXBsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sRUFBYSxJQUFJLEVBQUMsTUFBTSx1QkFBdUIsQ0FBQztBQUd2RCxPQUFPLEVBQUMsVUFBVSxFQUFDLE1BQU0sZUFBZSxDQUFDO0FBRXpDLE9BQU8sRUFBQyxPQUFPLEVBQUMsTUFBTSxXQUFXLENBQUM7QUFDbEMsT0FBTyxFQUFDLE9BQU8sRUFBQyxNQUFNLFdBQVcsQ0FBQztBQUVsQyxNQUFNLFVBQVUsT0FBTyxDQUNuQixDQUFhLEVBQUUsT0FBZ0IsRUFBRSxPQUFzQjtJQUN6RCxNQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUM7SUFFOUMsTUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDOUMsNkRBQTZEO0lBQzdELE1BQU0sa0JBQWtCLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQztJQUN2RCxNQUFNLEtBQUssR0FBRyxTQUFTLEdBQUcsa0JBQWtCLENBQUM7SUFFN0MsTUFBTSxTQUFTLEdBQUcsRUFBRSxDQUFDO0lBQ3JCLE1BQU0sT0FBTyxHQUFHLE9BQU8sQ0FDbkIsRUFBQyxNQUFNLEVBQUUsRUFBQyxDQUFDLEVBQUMsRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLEVBQUMsS0FBSyxFQUFFLENBQUMsS0FBSyxFQUFFLGtCQUFrQixDQUFDLEVBQUMsRUFBQyxDQUFDLENBQUM7SUFDekUsU0FBUyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUV4QixNQUFNLE1BQU0sR0FBRyxPQUFPLENBQUMsS0FBeUIsQ0FBQztJQUNqRCxNQUFNLFdBQVcsR0FBRyxJQUFJLFVBQVUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFDbkQsTUFBTSxXQUFXLEdBQUcsSUFBSSxVQUFVLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0lBRW5ELE1BQU0sTUFBTSxHQUFHO1FBQ2I7WUFDRSxNQUFNLEVBQUUsS0FBSyxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxNQUFNO1lBQzVDLEtBQUssRUFBRSxLQUFLLENBQUMsa0JBQWtCLENBQUMsSUFBSSxDQUFDLEtBQUs7WUFDMUMsS0FBSyxFQUFFLE1BQU07U0FDZDtRQUNEO1lBQ0UsTUFBTSxFQUFFLEtBQUssQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsTUFBTTtZQUM1QyxLQUFLLEVBQUUsS0FBSyxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxLQUFLO1lBQzFDLEtBQUssRUFBRSxNQUFNO1NBQ2Q7S0FDRixDQUFDO0lBRUYsTUFBTSxrQkFBa0IsR0FBRyxPQUFPLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDO0lBQ3BFLE1BQU0sV0FBVyxHQUFHLE9BQU8sQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUM7SUFDOUMsTUFBTSxXQUFXLEdBQUc7UUFDbEIsRUFBQyxJQUFJLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxDQUFDLGtCQUFrQixDQUFDLEVBQUM7UUFDN0MsRUFBQyxJQUFJLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxDQUFDLFdBQVcsQ0FBQyxFQUFDO0tBQ3ZDLENBQUM7SUFFRixNQUFNLFFBQVEsR0FDVixPQUFPLENBQUMsZ0JBQWdCLENBQUMsV0FBVyxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUUsV0FBVyxDQUFDLENBQUM7SUFDMUUsU0FBUyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUN6QixNQUFNLFFBQVEsR0FDVixPQUFPLENBQUMsZ0JBQWdCLENBQUMsV0FBVyxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUUsV0FBVyxDQUFDLENBQUM7SUFDMUUsU0FBUyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUV6QixNQUFNLGFBQWEsR0FDZixPQUFPLENBQUMsRUFBQyxNQUFNLEVBQUUsRUFBQyxJQUFJLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUMsRUFBRSxPQUFPLEVBQUMsQ0FBQyxDQUFDO0lBQ2pFLFNBQVMsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7SUFFOUIsTUFBTSxxQkFBcUIsR0FDdkIsT0FBTyxDQUFDLEVBQUMsTUFBTSxFQUFFLEVBQUMsQ0FBQyxFQUFFLGFBQWEsRUFBQyxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsRUFBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLEtBQUssRUFBQyxFQUFDLENBQUMsQ0FBQztJQUU1RSxTQUFTLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztJQUV0RCxPQUFPLHFCQUFxQixDQUFDO0FBQy9CLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7VGVuc29ySW5mbywgdXRpbH0gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcblxuaW1wb3J0IHtXZWJHUFVCYWNrZW5kfSBmcm9tICcuLi9iYWNrZW5kX3dlYmdwdSc7XG5pbXBvcnQge0ZGVFByb2dyYW19IGZyb20gJy4uL2ZmdF93ZWJncHUnO1xuXG5pbXBvcnQge2NvbXBsZXh9IGZyb20gJy4vQ29tcGxleCc7XG5pbXBvcnQge3Jlc2hhcGV9IGZyb20gJy4vUmVzaGFwZSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBmZnRJbXBsKFxuICAgIHg6IFRlbnNvckluZm8sIGludmVyc2U6IGJvb2xlYW4sIGJhY2tlbmQ6IFdlYkdQVUJhY2tlbmQpOiBUZW5zb3JJbmZvIHtcbiAgY29uc3QgeERhdGEgPSBiYWNrZW5kLnRlbnNvck1hcC5nZXQoeC5kYXRhSWQpO1xuXG4gIGNvbnN0IGlucHV0U2l6ZSA9IHV0aWwuc2l6ZUZyb21TaGFwZSh4LnNoYXBlKTtcbiAgLy8gQ29sbGFwc2UgYWxsIG91dGVyIGRpbWVuc2lvbnMgdG8gYSBzaW5nbGUgYmF0Y2ggZGltZW5zaW9uLlxuICBjb25zdCBpbm5lckRpbWVuc2lvblNpemUgPSB4LnNoYXBlW3guc2hhcGUubGVuZ3RoIC0gMV07XG4gIGNvbnN0IGJhdGNoID0gaW5wdXRTaXplIC8gaW5uZXJEaW1lbnNpb25TaXplO1xuXG4gIGNvbnN0IHRvRGlzcG9zZSA9IFtdO1xuICBjb25zdCBpbnB1dDJEID0gcmVzaGFwZShcbiAgICAgIHtpbnB1dHM6IHt4fSwgYmFja2VuZCwgYXR0cnM6IHtzaGFwZTogW2JhdGNoLCBpbm5lckRpbWVuc2lvblNpemVdfX0pO1xuICB0b0Rpc3Bvc2UucHVzaChpbnB1dDJEKTtcblxuICBjb25zdCB4U2hhcGUgPSBpbnB1dDJELnNoYXBlIGFzIFtudW1iZXIsIG51bWJlcl07XG4gIGNvbnN0IHJlYWxQcm9ncmFtID0gbmV3IEZGVFByb2dyYW0oJ3JlYWwnLCB4U2hhcGUpO1xuICBjb25zdCBpbWFnUHJvZ3JhbSA9IG5ldyBGRlRQcm9ncmFtKCdpbWFnJywgeFNoYXBlKTtcblxuICBjb25zdCBpbnB1dHMgPSBbXG4gICAge1xuICAgICAgZGF0YUlkOiB4RGF0YS5jb21wbGV4VGVuc29ySW5mb3MucmVhbC5kYXRhSWQsXG4gICAgICBkdHlwZTogeERhdGEuY29tcGxleFRlbnNvckluZm9zLnJlYWwuZHR5cGUsXG4gICAgICBzaGFwZTogeFNoYXBlXG4gICAgfSxcbiAgICB7XG4gICAgICBkYXRhSWQ6IHhEYXRhLmNvbXBsZXhUZW5zb3JJbmZvcy5pbWFnLmRhdGFJZCxcbiAgICAgIGR0eXBlOiB4RGF0YS5jb21wbGV4VGVuc29ySW5mb3MuaW1hZy5kdHlwZSxcbiAgICAgIHNoYXBlOiB4U2hhcGVcbiAgICB9XG4gIF07XG5cbiAgY29uc3QgZXhwb25lbnRNdWx0aXBsaWVyID0gaW52ZXJzZSA/IDIuMCAqIE1hdGguUEkgOiAtMi4wICogTWF0aC5QSTtcbiAgY29uc3QgZGVub21pbmF0b3IgPSBpbnZlcnNlID8geFNoYXBlWzFdIDogMS4wO1xuICBjb25zdCB1bmlmb3JtRGF0YSA9IFtcbiAgICB7dHlwZTogJ2Zsb2F0MzInLCBkYXRhOiBbZXhwb25lbnRNdWx0aXBsaWVyXX0sXG4gICAge3R5cGU6ICdmbG9hdDMyJywgZGF0YTogW2Rlbm9taW5hdG9yXX1cbiAgXTtcblxuICBjb25zdCByZWFsUGFydCA9XG4gICAgICBiYWNrZW5kLnJ1bldlYkdQVVByb2dyYW0ocmVhbFByb2dyYW0sIGlucHV0cywgJ2Zsb2F0MzInLCB1bmlmb3JtRGF0YSk7XG4gIHRvRGlzcG9zZS5wdXNoKHJlYWxQYXJ0KTtcbiAgY29uc3QgaW1hZ1BhcnQgPVxuICAgICAgYmFja2VuZC5ydW5XZWJHUFVQcm9ncmFtKGltYWdQcm9ncmFtLCBpbnB1dHMsICdmbG9hdDMyJywgdW5pZm9ybURhdGEpO1xuICB0b0Rpc3Bvc2UucHVzaChpbWFnUGFydCk7XG5cbiAgY29uc3QgY29tcGxleE91dHB1dCA9XG4gICAgICBjb21wbGV4KHtpbnB1dHM6IHtyZWFsOiByZWFsUGFydCwgaW1hZzogaW1hZ1BhcnR9LCBiYWNrZW5kfSk7XG4gIHRvRGlzcG9zZS5wdXNoKGNvbXBsZXhPdXRwdXQpO1xuXG4gIGNvbnN0IGNvbXBsZXhPdXRwdXRSZXNoYXBlZCA9XG4gICAgICByZXNoYXBlKHtpbnB1dHM6IHt4OiBjb21wbGV4T3V0cHV0fSwgYmFja2VuZCwgYXR0cnM6IHtzaGFwZTogeC5zaGFwZX19KTtcblxuICB0b0Rpc3Bvc2UuZm9yRWFjaCh0ID0+IGJhY2tlbmQuZGlzcG9zZURhdGEodC5kYXRhSWQpKTtcblxuICByZXR1cm4gY29tcGxleE91dHB1dFJlc2hhcGVkO1xufVxuIl19","/**\n * @license\n * Copyright 2022 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { FFT } from '@tensorflow/tfjs-core';\nimport { fftImpl } from './FFT_impl';\nexport function fft(args) {\n    const { inputs, backend } = args;\n    const { input } = inputs;\n    return fftImpl(input, false /* inverse */, backend);\n}\nexport const fftConfig = {\n    kernelName: FFT,\n    backendName: 'webgpu',\n    kernelFunc: fft\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRkZULmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMva2VybmVscy9GRlQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUFDLEdBQUcsRUFBc0MsTUFBTSx1QkFBdUIsQ0FBQztBQUkvRSxPQUFPLEVBQUMsT0FBTyxFQUFDLE1BQU0sWUFBWSxDQUFDO0FBRW5DLE1BQU0sVUFBVSxHQUFHLENBQUMsSUFBaUQ7SUFFbkUsTUFBTSxFQUFDLE1BQU0sRUFBRSxPQUFPLEVBQUMsR0FBRyxJQUFJLENBQUM7SUFDL0IsTUFBTSxFQUFDLEtBQUssRUFBQyxHQUFHLE1BQU0sQ0FBQztJQUV2QixPQUFPLE9BQU8sQ0FBQyxLQUFLLEVBQUUsS0FBSyxDQUFDLGFBQWEsRUFBRSxPQUFPLENBQUMsQ0FBQztBQUN0RCxDQUFDO0FBRUQsTUFBTSxDQUFDLE1BQU0sU0FBUyxHQUFpQjtJQUNyQyxVQUFVLEVBQUUsR0FBRztJQUNmLFdBQVcsRUFBRSxRQUFRO0lBQ3JCLFVBQVUsRUFBRSxHQUFHO0NBQ2hCLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7RkZULCBGRlRJbnB1dHMsIEtlcm5lbENvbmZpZywgVGVuc29ySW5mb30gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcblxuaW1wb3J0IHtXZWJHUFVCYWNrZW5kfSBmcm9tICcuLi9iYWNrZW5kX3dlYmdwdSc7XG5cbmltcG9ydCB7ZmZ0SW1wbH0gZnJvbSAnLi9GRlRfaW1wbCc7XG5cbmV4cG9ydCBmdW5jdGlvbiBmZnQoYXJnczoge2lucHV0czogRkZUSW5wdXRzLCBiYWNrZW5kOiBXZWJHUFVCYWNrZW5kfSk6XG4gICAgVGVuc29ySW5mbyB7XG4gIGNvbnN0IHtpbnB1dHMsIGJhY2tlbmR9ID0gYXJncztcbiAgY29uc3Qge2lucHV0fSA9IGlucHV0cztcblxuICByZXR1cm4gZmZ0SW1wbChpbnB1dCwgZmFsc2UgLyogaW52ZXJzZSAqLywgYmFja2VuZCk7XG59XG5cbmV4cG9ydCBjb25zdCBmZnRDb25maWc6IEtlcm5lbENvbmZpZyA9IHtcbiAga2VybmVsTmFtZTogRkZULFxuICBiYWNrZW5kTmFtZTogJ3dlYmdwdScsXG4gIGtlcm5lbEZ1bmM6IGZmdFxufTtcbiJdfQ==","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { getMainHeaderString as main } from './webgpu_program';\nimport { computeDispatch, flatDispatchLayout } from './webgpu_util';\nexport class FlipLeftRightProgram {\n    constructor(imageShape) {\n        this.outputShape = [];\n        this.variableNames = ['x'];\n        this.workgroupSize = [64, 1, 1];\n        this.size = true;\n        this.outputShape = imageShape;\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize);\n        this.shaderKey = 'flipLeftRight';\n    }\n    getUserCode() {\n        const userCode = `\n      ${main('index')} {\n        if (index < uniforms.size) {\n          let coords = getCoordsFromIndex(index);\n          let coordX = uniforms.xShape[2] - coords[2] - 1;\n          let outputValue = getX(coords[0], coords[1], coordX, coords[3]);\n          setOutputAtIndex(index, outputValue);\n        }\n      }\n    `;\n        return userCode;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmxpcF9sZWZ0X3JpZ2h0X3dlYmdwdS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2ZsaXBfbGVmdF9yaWdodF93ZWJncHUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUFDLG1CQUFtQixJQUFJLElBQUksRUFBZ0IsTUFBTSxrQkFBa0IsQ0FBQztBQUM1RSxPQUFPLEVBQUMsZUFBZSxFQUFFLGtCQUFrQixFQUFDLE1BQU0sZUFBZSxDQUFDO0FBRWxFLE1BQU0sT0FBTyxvQkFBb0I7SUFTL0IsWUFBWSxVQUE0QztRQVJ4RCxnQkFBVyxHQUFhLEVBQUUsQ0FBQztRQUkzQixrQkFBYSxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDdEIsa0JBQWEsR0FBNkIsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ3JELFNBQUksR0FBRyxJQUFJLENBQUM7UUFHVixJQUFJLENBQUMsV0FBVyxHQUFHLFVBQVUsQ0FBQztRQUM5QixJQUFJLENBQUMsY0FBYyxHQUFHLGtCQUFrQixDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUMzRCxJQUFJLENBQUMsUUFBUSxHQUFHLGVBQWUsQ0FDM0IsSUFBSSxDQUFDLGNBQWMsRUFBRSxJQUFJLENBQUMsV0FBVyxFQUFFLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQztRQUMvRCxJQUFJLENBQUMsU0FBUyxHQUFHLGVBQWUsQ0FBQztJQUNuQyxDQUFDO0lBRUQsV0FBVztRQUNULE1BQU0sUUFBUSxHQUFHO1FBQ2IsSUFBSSxDQUFDLE9BQU8sQ0FBQzs7Ozs7Ozs7S0FRaEIsQ0FBQztRQUNGLE9BQU8sUUFBUSxDQUFDO0lBQ2xCLENBQUM7Q0FDRiIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtnZXRNYWluSGVhZGVyU3RyaW5nIGFzIG1haW4sIFdlYkdQVVByb2dyYW19IGZyb20gJy4vd2ViZ3B1X3Byb2dyYW0nO1xuaW1wb3J0IHtjb21wdXRlRGlzcGF0Y2gsIGZsYXREaXNwYXRjaExheW91dH0gZnJvbSAnLi93ZWJncHVfdXRpbCc7XG5cbmV4cG9ydCBjbGFzcyBGbGlwTGVmdFJpZ2h0UHJvZ3JhbSBpbXBsZW1lbnRzIFdlYkdQVVByb2dyYW0ge1xuICBvdXRwdXRTaGFwZTogbnVtYmVyW10gPSBbXTtcbiAgc2hhZGVyS2V5OiBzdHJpbmc7XG4gIGRpc3BhdGNoTGF5b3V0OiB7eDogbnVtYmVyW119O1xuICBkaXNwYXRjaDogW251bWJlciwgbnVtYmVyLCBudW1iZXJdO1xuICB2YXJpYWJsZU5hbWVzID0gWyd4J107XG4gIHdvcmtncm91cFNpemU6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXSA9IFs2NCwgMSwgMV07XG4gIHNpemUgPSB0cnVlO1xuXG4gIGNvbnN0cnVjdG9yKGltYWdlU2hhcGU6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXJdKSB7XG4gICAgdGhpcy5vdXRwdXRTaGFwZSA9IGltYWdlU2hhcGU7XG4gICAgdGhpcy5kaXNwYXRjaExheW91dCA9IGZsYXREaXNwYXRjaExheW91dCh0aGlzLm91dHB1dFNoYXBlKTtcbiAgICB0aGlzLmRpc3BhdGNoID0gY29tcHV0ZURpc3BhdGNoKFxuICAgICAgICB0aGlzLmRpc3BhdGNoTGF5b3V0LCB0aGlzLm91dHB1dFNoYXBlLCB0aGlzLndvcmtncm91cFNpemUpO1xuICAgIHRoaXMuc2hhZGVyS2V5ID0gJ2ZsaXBMZWZ0UmlnaHQnO1xuICB9XG5cbiAgZ2V0VXNlckNvZGUoKTogc3RyaW5nIHtcbiAgICBjb25zdCB1c2VyQ29kZSA9IGBcbiAgICAgICR7bWFpbignaW5kZXgnKX0ge1xuICAgICAgICBpZiAoaW5kZXggPCB1bmlmb3Jtcy5zaXplKSB7XG4gICAgICAgICAgbGV0IGNvb3JkcyA9IGdldENvb3Jkc0Zyb21JbmRleChpbmRleCk7XG4gICAgICAgICAgbGV0IGNvb3JkWCA9IHVuaWZvcm1zLnhTaGFwZVsyXSAtIGNvb3Jkc1syXSAtIDE7XG4gICAgICAgICAgbGV0IG91dHB1dFZhbHVlID0gZ2V0WChjb29yZHNbMF0sIGNvb3Jkc1sxXSwgY29vcmRYLCBjb29yZHNbM10pO1xuICAgICAgICAgIHNldE91dHB1dEF0SW5kZXgoaW5kZXgsIG91dHB1dFZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIGA7XG4gICAgcmV0dXJuIHVzZXJDb2RlO1xuICB9XG59XG4iXX0=","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { FlipLeftRight } from '@tensorflow/tfjs-core';\nimport { FlipLeftRightProgram } from '../flip_left_right_webgpu';\nexport const flipLeftRightConfig = {\n    kernelName: FlipLeftRight,\n    backendName: 'webgpu',\n    kernelFunc: ({ inputs, backend }) => {\n        const { image } = inputs;\n        const webgpuBackend = backend;\n        const program = new FlipLeftRightProgram(image.shape);\n        const output = webgpuBackend.runWebGPUProgram(program, [image], image.dtype);\n        return output;\n    }\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRmxpcExlZnRSaWdodC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2tlcm5lbHMvRmxpcExlZnRSaWdodC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFHSCxPQUFPLEVBQUMsYUFBYSxFQUFzQixNQUFNLHVCQUF1QixDQUFDO0FBR3pFLE9BQU8sRUFBQyxvQkFBb0IsRUFBQyxNQUFNLDJCQUEyQixDQUFDO0FBRS9ELE1BQU0sQ0FBQyxNQUFNLG1CQUFtQixHQUFpQjtJQUM3QyxVQUFVLEVBQUUsYUFBYTtJQUN6QixXQUFXLEVBQUUsUUFBUTtJQUNyQixVQUFVLEVBQUUsQ0FBQyxFQUFDLE1BQU0sRUFBRSxPQUFPLEVBQUMsRUFBRSxFQUFFO1FBQ2hDLE1BQU0sRUFBQyxLQUFLLEVBQUMsR0FBRyxNQUE2QixDQUFDO1FBQzlDLE1BQU0sYUFBYSxHQUFHLE9BQXdCLENBQUM7UUFFL0MsTUFBTSxPQUFPLEdBQUcsSUFBSSxvQkFBb0IsQ0FBRSxLQUFrQixDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3BFLE1BQU0sTUFBTSxHQUNSLGFBQWEsQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxLQUFLLENBQUMsRUFBRSxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDbEUsT0FBTyxNQUFNLENBQUM7SUFDbEIsQ0FBQztDQUNGLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7S2VybmVsQ29uZmlnLCBUZW5zb3I0RH0gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcbmltcG9ydCB7RmxpcExlZnRSaWdodCwgRmxpcExlZnRSaWdodElucHV0c30gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcblxuaW1wb3J0IHtXZWJHUFVCYWNrZW5kfSBmcm9tICcuLi9iYWNrZW5kX3dlYmdwdSc7XG5pbXBvcnQge0ZsaXBMZWZ0UmlnaHRQcm9ncmFtfSBmcm9tICcuLi9mbGlwX2xlZnRfcmlnaHRfd2ViZ3B1JztcblxuZXhwb3J0IGNvbnN0IGZsaXBMZWZ0UmlnaHRDb25maWc6IEtlcm5lbENvbmZpZyA9IHtcbiAgICBrZXJuZWxOYW1lOiBGbGlwTGVmdFJpZ2h0LFxuICAgIGJhY2tlbmROYW1lOiAnd2ViZ3B1JyxcbiAgICBrZXJuZWxGdW5jOiAoe2lucHV0cywgYmFja2VuZH0pID0+IHtcbiAgICAgIGNvbnN0IHtpbWFnZX0gPSBpbnB1dHMgYXMgRmxpcExlZnRSaWdodElucHV0cztcbiAgICAgIGNvbnN0IHdlYmdwdUJhY2tlbmQgPSBiYWNrZW5kIGFzIFdlYkdQVUJhY2tlbmQ7XG5cbiAgICAgIGNvbnN0IHByb2dyYW0gPSBuZXcgRmxpcExlZnRSaWdodFByb2dyYW0oKGltYWdlIGFzIFRlbnNvcjREKS5zaGFwZSk7XG4gICAgICBjb25zdCBvdXRwdXQgPVxuICAgICAgICAgIHdlYmdwdUJhY2tlbmQucnVuV2ViR1BVUHJvZ3JhbShwcm9ncmFtLCBbaW1hZ2VdLCBpbWFnZS5kdHlwZSk7XG4gICAgICByZXR1cm4gb3V0cHV0O1xuICB9XG59O1xuIl19","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Floor } from '@tensorflow/tfjs-core';\nimport { unaryKernelFunc } from '../kernel_utils/kernel_funcs_utils';\nimport { floorImplCPU } from '../kernel_utils/shared';\nimport { UnaryOpType } from '../unary_op_util';\nexport const floor = unaryKernelFunc({ opType: UnaryOpType.FLOOR, cpuKernelImpl: floorImplCPU });\nexport const floorConfig = {\n    kernelName: Floor,\n    backendName: 'webgpu',\n    kernelFunc: floor\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRmxvb3IuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9rZXJuZWxzL0Zsb29yLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sRUFBQyxLQUFLLEVBQWUsTUFBTSx1QkFBdUIsQ0FBQztBQUMxRCxPQUFPLEVBQUMsZUFBZSxFQUFDLE1BQU0sb0NBQW9DLENBQUM7QUFDbkUsT0FBTyxFQUFDLFlBQVksRUFBQyxNQUFNLHdCQUF3QixDQUFDO0FBQ3BELE9BQU8sRUFBQyxXQUFXLEVBQUMsTUFBTSxrQkFBa0IsQ0FBQztBQUU3QyxNQUFNLENBQUMsTUFBTSxLQUFLLEdBQ2QsZUFBZSxDQUFDLEVBQUMsTUFBTSxFQUFFLFdBQVcsQ0FBQyxLQUFLLEVBQUUsYUFBYSxFQUFFLFlBQVksRUFBQyxDQUFDLENBQUM7QUFFOUUsTUFBTSxDQUFDLE1BQU0sV0FBVyxHQUFpQjtJQUN2QyxVQUFVLEVBQUUsS0FBSztJQUNqQixXQUFXLEVBQUUsUUFBUTtJQUNyQixVQUFVLEVBQUUsS0FBSztDQUNsQixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7Rmxvb3IsIEtlcm5lbENvbmZpZ30gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcbmltcG9ydCB7dW5hcnlLZXJuZWxGdW5jfSBmcm9tICcuLi9rZXJuZWxfdXRpbHMva2VybmVsX2Z1bmNzX3V0aWxzJztcbmltcG9ydCB7Zmxvb3JJbXBsQ1BVfSBmcm9tICcuLi9rZXJuZWxfdXRpbHMvc2hhcmVkJztcbmltcG9ydCB7VW5hcnlPcFR5cGV9IGZyb20gJy4uL3VuYXJ5X29wX3V0aWwnO1xuXG5leHBvcnQgY29uc3QgZmxvb3IgPVxuICAgIHVuYXJ5S2VybmVsRnVuYyh7b3BUeXBlOiBVbmFyeU9wVHlwZS5GTE9PUiwgY3B1S2VybmVsSW1wbDogZmxvb3JJbXBsQ1BVfSk7XG5cbmV4cG9ydCBjb25zdCBmbG9vckNvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBGbG9vcixcbiAgYmFja2VuZE5hbWU6ICd3ZWJncHUnLFxuICBrZXJuZWxGdW5jOiBmbG9vclxufTtcbiJdfQ==","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { FloorDiv } from '@tensorflow/tfjs-core';\nimport { BinaryOpType } from '../binary_op_util';\nimport { binaryKernelFunc } from '../kernel_utils/kernel_funcs_utils';\nimport { floorDivImplCPU } from '../kernel_utils/shared';\nexport const floorDiv = binaryKernelFunc({\n    opType: BinaryOpType.FLOOR_DIV,\n    cpuKernelImpl: floorDivImplCPU,\n    dtype: 'int32'\n});\nexport const floorDivConfig = {\n    kernelName: FloorDiv,\n    backendName: 'webgpu',\n    kernelFunc: floorDiv\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRmxvb3JEaXYuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9rZXJuZWxzL0Zsb29yRGl2LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sRUFBQyxRQUFRLEVBQWUsTUFBTSx1QkFBdUIsQ0FBQztBQUU3RCxPQUFPLEVBQUMsWUFBWSxFQUFDLE1BQU0sbUJBQW1CLENBQUM7QUFDL0MsT0FBTyxFQUFDLGdCQUFnQixFQUFDLE1BQU0sb0NBQW9DLENBQUM7QUFDcEUsT0FBTyxFQUFDLGVBQWUsRUFBQyxNQUFNLHdCQUF3QixDQUFDO0FBRXZELE1BQU0sQ0FBQyxNQUFNLFFBQVEsR0FBRyxnQkFBZ0IsQ0FBQztJQUN2QyxNQUFNLEVBQUUsWUFBWSxDQUFDLFNBQVM7SUFDOUIsYUFBYSxFQUFFLGVBQWU7SUFDOUIsS0FBSyxFQUFFLE9BQU87Q0FDZixDQUFDLENBQUM7QUFFSCxNQUFNLENBQUMsTUFBTSxjQUFjLEdBQWlCO0lBQzFDLFVBQVUsRUFBRSxRQUFRO0lBQ3BCLFdBQVcsRUFBRSxRQUFRO0lBQ3JCLFVBQVUsRUFBRSxRQUFRO0NBQ3JCLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7Rmxvb3JEaXYsIEtlcm5lbENvbmZpZ30gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcblxuaW1wb3J0IHtCaW5hcnlPcFR5cGV9IGZyb20gJy4uL2JpbmFyeV9vcF91dGlsJztcbmltcG9ydCB7YmluYXJ5S2VybmVsRnVuY30gZnJvbSAnLi4va2VybmVsX3V0aWxzL2tlcm5lbF9mdW5jc191dGlscyc7XG5pbXBvcnQge2Zsb29yRGl2SW1wbENQVX0gZnJvbSAnLi4va2VybmVsX3V0aWxzL3NoYXJlZCc7XG5cbmV4cG9ydCBjb25zdCBmbG9vckRpdiA9IGJpbmFyeUtlcm5lbEZ1bmMoe1xuICBvcFR5cGU6IEJpbmFyeU9wVHlwZS5GTE9PUl9ESVYsXG4gIGNwdUtlcm5lbEltcGw6IGZsb29yRGl2SW1wbENQVSxcbiAgZHR5cGU6ICdpbnQzMidcbn0pO1xuXG5leHBvcnQgY29uc3QgZmxvb3JEaXZDb25maWc6IEtlcm5lbENvbmZpZyA9IHtcbiAga2VybmVsTmFtZTogRmxvb3JEaXYsXG4gIGJhY2tlbmROYW1lOiAnd2ViZ3B1JyxcbiAga2VybmVsRnVuYzogZmxvb3JEaXZcbn07XG4iXX0=","/**\n * @license\n * Copyright 2022 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { getMainHeaderString as main, PixelsOpType } from './webgpu_program';\nimport { computeDispatch, flatDispatchLayout } from './webgpu_util';\nexport class FromPixelsProgram {\n    constructor(outputShape, numChannels, importVideo = false) {\n        this.pixelsOpType = PixelsOpType.FROM_PIXELS;\n        this.outputShape = [0];\n        this.variableNames = [];\n        this.workgroupSize = [256, 1, 1]; // The empirical value.\n        this.outputShape = outputShape;\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize, [numChannels, 1, 1]);\n        this.importVideo = importVideo;\n        this.shaderKey = `fromPixels_${this.importVideo}`;\n    }\n    getUserCode() {\n        const textureLoad = this.importVideo ?\n            'textureLoad(src, vec2<i32>(coords.yx));' :\n            'textureLoad(src, vec2<i32>(coords.yx), 0)';\n        const textureType = this.importVideo ? 'texture_external' : 'texture_2d<f32>';\n        return `\n      @binding(1) @group(0) var src: ${textureType};\n      ${main('index')} {\n        let flatIndex = index * uniforms.numChannels;\n        if (flatIndex < uniforms.size) {\n          let coords = getCoordsFromIndex(flatIndex);\n          let values = ${textureLoad};\n          for (var i = 0; i < uniforms.numChannels; i = i + 1) {\n            result[flatIndex + i] = i32(floor(255.0 * values[i]));\n          }\n        }\n      }\n  `;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZnJvbV9waXhlbHNfd2ViZ3B1LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMvZnJvbV9waXhlbHNfd2ViZ3B1LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sRUFBQyxtQkFBbUIsSUFBSSxJQUFJLEVBQUUsWUFBWSxFQUFnQixNQUFNLGtCQUFrQixDQUFDO0FBQzFGLE9BQU8sRUFBQyxlQUFlLEVBQUUsa0JBQWtCLEVBQUMsTUFBTSxlQUFlLENBQUM7QUFFbEUsTUFBTSxPQUFPLGlCQUFpQjtJQVc1QixZQUFZLFdBQXFCLEVBQUUsV0FBbUIsRUFBRSxXQUFXLEdBQUcsS0FBSztRQVIzRSxpQkFBWSxHQUFHLFlBQVksQ0FBQyxXQUFXLENBQUM7UUFDeEMsZ0JBQVcsR0FBYSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRzVCLGtCQUFhLEdBQWEsRUFBRSxDQUFDO1FBQzdCLGtCQUFhLEdBQ1QsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUUsdUJBQXVCO1FBR3ZDLElBQUksQ0FBQyxXQUFXLEdBQUcsV0FBVyxDQUFDO1FBQy9CLElBQUksQ0FBQyxjQUFjLEdBQUcsa0JBQWtCLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQzNELElBQUksQ0FBQyxRQUFRLEdBQUcsZUFBZSxDQUMzQixJQUFJLENBQUMsY0FBYyxFQUFFLElBQUksQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDLGFBQWEsRUFDekQsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFekIsSUFBSSxDQUFDLFdBQVcsR0FBRyxXQUFXLENBQUM7UUFDL0IsSUFBSSxDQUFDLFNBQVMsR0FBRyxjQUFjLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztJQUNwRCxDQUFDO0lBRUQsV0FBVztRQUNULE1BQU0sV0FBVyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztZQUNsQyx5Q0FBeUMsQ0FBQyxDQUFDO1lBQzNDLDJDQUEyQyxDQUFDO1FBQ2hELE1BQU0sV0FBVyxHQUNiLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLGtCQUFrQixDQUFDLENBQUMsQ0FBQyxpQkFBaUIsQ0FBQztRQUM5RCxPQUFPO3VDQUM0QixXQUFXO1FBQzFDLElBQUksQ0FBQyxPQUFPLENBQUM7Ozs7eUJBSUksV0FBVzs7Ozs7O0dBTWpDLENBQUM7SUFDRixDQUFDO0NBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7Z2V0TWFpbkhlYWRlclN0cmluZyBhcyBtYWluLCBQaXhlbHNPcFR5cGUsIFdlYkdQVVByb2dyYW19IGZyb20gJy4vd2ViZ3B1X3Byb2dyYW0nO1xuaW1wb3J0IHtjb21wdXRlRGlzcGF0Y2gsIGZsYXREaXNwYXRjaExheW91dH0gZnJvbSAnLi93ZWJncHVfdXRpbCc7XG5cbmV4cG9ydCBjbGFzcyBGcm9tUGl4ZWxzUHJvZ3JhbSBpbXBsZW1lbnRzIFdlYkdQVVByb2dyYW0ge1xuICBkaXNwYXRjaDogW251bWJlciwgbnVtYmVyLCBudW1iZXJdO1xuICBkaXNwYXRjaExheW91dDoge3g6IG51bWJlcltdfTtcbiAgcGl4ZWxzT3BUeXBlID0gUGl4ZWxzT3BUeXBlLkZST01fUElYRUxTO1xuICBvdXRwdXRTaGFwZTogbnVtYmVyW10gPSBbMF07XG4gIHNoYWRlcktleTogc3RyaW5nO1xuICBpbXBvcnRWaWRlbzogYm9vbGVhbjtcbiAgdmFyaWFibGVOYW1lczogc3RyaW5nW10gPSBbXTtcbiAgd29ya2dyb3VwU2l6ZTogW251bWJlciwgbnVtYmVyLCBudW1iZXJdID1cbiAgICAgIFsyNTYsIDEsIDFdOyAgLy8gVGhlIGVtcGlyaWNhbCB2YWx1ZS5cblxuICBjb25zdHJ1Y3RvcihvdXRwdXRTaGFwZTogbnVtYmVyW10sIG51bUNoYW5uZWxzOiBudW1iZXIsIGltcG9ydFZpZGVvID0gZmFsc2UpIHtcbiAgICB0aGlzLm91dHB1dFNoYXBlID0gb3V0cHV0U2hhcGU7XG4gICAgdGhpcy5kaXNwYXRjaExheW91dCA9IGZsYXREaXNwYXRjaExheW91dCh0aGlzLm91dHB1dFNoYXBlKTtcbiAgICB0aGlzLmRpc3BhdGNoID0gY29tcHV0ZURpc3BhdGNoKFxuICAgICAgICB0aGlzLmRpc3BhdGNoTGF5b3V0LCB0aGlzLm91dHB1dFNoYXBlLCB0aGlzLndvcmtncm91cFNpemUsXG4gICAgICAgIFtudW1DaGFubmVscywgMSwgMV0pO1xuXG4gICAgdGhpcy5pbXBvcnRWaWRlbyA9IGltcG9ydFZpZGVvO1xuICAgIHRoaXMuc2hhZGVyS2V5ID0gYGZyb21QaXhlbHNfJHt0aGlzLmltcG9ydFZpZGVvfWA7XG4gIH1cblxuICBnZXRVc2VyQ29kZSgpOiBzdHJpbmcge1xuICAgIGNvbnN0IHRleHR1cmVMb2FkID0gdGhpcy5pbXBvcnRWaWRlbyA/XG4gICAgICAgICd0ZXh0dXJlTG9hZChzcmMsIHZlYzI8aTMyPihjb29yZHMueXgpKTsnIDpcbiAgICAgICAgJ3RleHR1cmVMb2FkKHNyYywgdmVjMjxpMzI+KGNvb3Jkcy55eCksIDApJztcbiAgICBjb25zdCB0ZXh0dXJlVHlwZSA9XG4gICAgICAgIHRoaXMuaW1wb3J0VmlkZW8gPyAndGV4dHVyZV9leHRlcm5hbCcgOiAndGV4dHVyZV8yZDxmMzI+JztcbiAgICByZXR1cm4gYFxuICAgICAgQGJpbmRpbmcoMSkgQGdyb3VwKDApIHZhciBzcmM6ICR7dGV4dHVyZVR5cGV9O1xuICAgICAgJHttYWluKCdpbmRleCcpfSB7XG4gICAgICAgIGxldCBmbGF0SW5kZXggPSBpbmRleCAqIHVuaWZvcm1zLm51bUNoYW5uZWxzO1xuICAgICAgICBpZiAoZmxhdEluZGV4IDwgdW5pZm9ybXMuc2l6ZSkge1xuICAgICAgICAgIGxldCBjb29yZHMgPSBnZXRDb29yZHNGcm9tSW5kZXgoZmxhdEluZGV4KTtcbiAgICAgICAgICBsZXQgdmFsdWVzID0gJHt0ZXh0dXJlTG9hZH07XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB1bmlmb3Jtcy5udW1DaGFubmVsczsgaSA9IGkgKyAxKSB7XG4gICAgICAgICAgICByZXN1bHRbZmxhdEluZGV4ICsgaV0gPSBpMzIoZmxvb3IoMjU1LjAgKiB2YWx1ZXNbaV0pKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgYDtcbiAgfVxufVxuIl19","/**\n * @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use backend file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { env } from '@tensorflow/tfjs-core';\nimport { FromPixels, util } from '@tensorflow/tfjs-core';\nimport { FromPixelsProgram } from '../from_pixels_webgpu';\nexport const fromPixelsConfig = {\n    kernelName: FromPixels,\n    backendName: 'webgpu',\n    kernelFunc: fromPixels,\n};\nlet fromPixels2DContext;\nlet willReadFrequently = env().getBool('CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU');\nexport function fromPixels(args) {\n    const { inputs, backend, attrs } = args;\n    let { pixels } = inputs;\n    const { numChannels } = attrs;\n    if (pixels == null) {\n        throw new Error('pixels passed to tf.browser.fromPixels() can not be null');\n    }\n    const isVideo = typeof (HTMLVideoElement) !== 'undefined' &&\n        pixels instanceof HTMLVideoElement;\n    const isImage = typeof (HTMLImageElement) !== 'undefined' &&\n        pixels instanceof HTMLImageElement;\n    const isCanvas = (typeof (HTMLCanvasElement) !== 'undefined' &&\n        pixels instanceof HTMLCanvasElement) ||\n        (typeof (OffscreenCanvas) !== 'undefined' &&\n            pixels instanceof OffscreenCanvas);\n    const isImageBitmap = typeof (ImageBitmap) !== 'undefined' && pixels instanceof ImageBitmap;\n    const [width, height] = isVideo ?\n        [\n            pixels.videoWidth,\n            pixels.videoHeight\n        ] :\n        [pixels.width, pixels.height];\n    const outputShape = [height, width, numChannels];\n    const importVideo = env().getBool('WEBGPU_IMPORT_EXTERNAL_TEXTURE') && isVideo;\n    const isVideoOrImage = isVideo || isImage;\n    if (isImageBitmap || isCanvas || isVideoOrImage) {\n        let resource;\n        if (importVideo) {\n            resource = backend.device.importExternalTexture({ source: pixels });\n        }\n        else {\n            if (isVideoOrImage) {\n                const newWillReadFrequently = env().getBool('CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU');\n                if (fromPixels2DContext == null ||\n                    newWillReadFrequently !== willReadFrequently) {\n                    willReadFrequently = newWillReadFrequently;\n                    fromPixels2DContext = document.createElement('canvas').getContext('2d', { willReadFrequently });\n                }\n                fromPixels2DContext.canvas.width = width;\n                fromPixels2DContext.canvas.height = height;\n                fromPixels2DContext.drawImage(pixels, 0, 0, width, height);\n                pixels = fromPixels2DContext.canvas;\n            }\n            const usage = GPUTextureUsage.COPY_DST |\n                GPUTextureUsage.RENDER_ATTACHMENT | GPUTextureUsage.TEXTURE_BINDING;\n            const format = 'rgba8unorm';\n            const texture = backend.textureManager.acquireTexture(outputShape[1], outputShape[0], format, usage);\n            backend.queue.copyExternalImageToTexture({ source: pixels }, { texture }, [outputShape[1], outputShape[0]]);\n            resource = texture;\n        }\n        const size = util.sizeFromShape(outputShape);\n        const strides = util.computeStrides(outputShape);\n        const program = new FromPixelsProgram(outputShape, numChannels, importVideo);\n        const uniformData = [\n            { type: 'uint32', data: [size] }, { type: 'uint32', data: [numChannels] },\n            { type: 'uint32', data: [...strides] }\n        ];\n        const input = backend.makeTensorInfo([height, width], 'int32');\n        const info = backend.tensorMap.get(input.dataId);\n        info.resource = resource;\n        const result = backend.runWebGPUProgram(program, [input], 'int32', uniformData);\n        backend.disposeData(input.dataId);\n        return result;\n    }\n    // TODO: Encoding should happen on GPU once we no longer have to download\n    // image data to the CPU.\n    const imageData = pixels.data;\n    let pixelArray = imageData;\n    if (numChannels != null && numChannels !== 4) {\n        pixelArray = new Uint8Array(pixels.width * pixels.height * numChannels);\n        const dataLength = imageData.length;\n        let j = 0;\n        for (let i = 0; i < dataLength; i++) {\n            if (i % 4 < numChannels) {\n                pixelArray[j++] = imageData[i];\n            }\n        }\n    }\n    const output = backend.makeTensorInfo(outputShape, 'int32', new Int32Array(pixelArray));\n    backend.uploadToGPU(output.dataId);\n    return output;\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRnJvbVBpeGVscy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2tlcm5lbHMvRnJvbVBpeGVscy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQUMsR0FBRyxFQUEyQixNQUFNLHVCQUF1QixDQUFDO0FBQ3BFLE9BQU8sRUFBQyxVQUFVLEVBQXFDLElBQUksRUFBQyxNQUFNLHVCQUF1QixDQUFDO0FBSTFGLE9BQU8sRUFBQyxpQkFBaUIsRUFBQyxNQUFNLHVCQUF1QixDQUFDO0FBRXhELE1BQU0sQ0FBQyxNQUFNLGdCQUFnQixHQUFpQjtJQUM1QyxVQUFVLEVBQUUsVUFBVTtJQUN0QixXQUFXLEVBQUUsUUFBUTtJQUNyQixVQUFVLEVBQUUsVUFBbUM7Q0FDaEQsQ0FBQztBQUVGLElBQUksbUJBQTZDLENBQUM7QUFDbEQsSUFBSSxrQkFBa0IsR0FBRyxHQUFHLEVBQUUsQ0FBQyxPQUFPLENBQUMsdUNBQXVDLENBQUMsQ0FBQztBQUVoRixNQUFNLFVBQVUsVUFBVSxDQUFDLElBSTFCO0lBQ0MsTUFBTSxFQUFDLE1BQU0sRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFDLEdBQUcsSUFBSSxDQUFDO0lBQ3RDLElBQUksRUFBQyxNQUFNLEVBQUMsR0FBRyxNQUFNLENBQUM7SUFDdEIsTUFBTSxFQUFDLFdBQVcsRUFBQyxHQUFHLEtBQUssQ0FBQztJQUU1QixJQUFJLE1BQU0sSUFBSSxJQUFJLEVBQUU7UUFDbEIsTUFBTSxJQUFJLEtBQUssQ0FBQywwREFBMEQsQ0FBQyxDQUFDO0tBQzdFO0lBRUQsTUFBTSxPQUFPLEdBQUcsT0FBTyxDQUFDLGdCQUFnQixDQUFDLEtBQUssV0FBVztRQUNyRCxNQUFNLFlBQVksZ0JBQWdCLENBQUM7SUFDdkMsTUFBTSxPQUFPLEdBQUcsT0FBTyxDQUFDLGdCQUFnQixDQUFDLEtBQUssV0FB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QUMsS0FBSyxHQUFHLE1BQU0sQ0FBQyxNQUFNLEdBQUcsV0FBVyxDQUFDLENBQUM7UUFFeEUsTUFBTSxVQUFVLEdBQUcsU0FBUyxDQUFDLE1BQU0sQ0FBQztRQUNwQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDVixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsVUFBVSxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQ25DLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxXQUFXLEVBQUU7Z0JBQ3ZCLFVBQVUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQzthQUNoQztTQUNGO0tBQ0Y7SUFFRCxNQUFNLE1BQU0sR0FDUixPQUFPLENBQUMsY0FBYyxDQUFDLFdBQVcsRUFBRSxPQUFPLEVBQUUsSUFBSSxVQUFVLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQztJQUM3RSxPQUFPLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUNuQyxPQUFPLE1BQU0sQ0FBQztBQUNoQixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgYmFja2VuZCBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge2VudiwgS2VybmVsQ29uZmlnLCBLZXJuZWxGdW5jfSBmcm9tICdAdGVuc29yZmxvdy90ZmpzLWNvcmUnO1xuaW1wb3J0IHtGcm9tUGl4ZWxzLCBGcm9tUGl4ZWxzQXR0cnMsIEZyb21QaXhlbHNJbnB1dHMsIHV0aWx9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5pbXBvcnQge2JhY2tlbmRfdXRpbCwgVGVuc29ySW5mb30gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcblxuaW1wb3J0IHtXZWJHUFVCYWNrZW5kfSBmcm9tICcuLi9iYWNrZW5kX3dlYmdwdSc7XG5pbXBvcnQge0Zyb21QaXhlbHNQcm9ncmFtfSBmcm9tICcuLi9mcm9tX3BpeGVsc193ZWJncHUnO1xuXG5leHBvcnQgY29uc3QgZnJvbVBpeGVsc0NvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBGcm9tUGl4ZWxzLFxuICBiYWNrZW5kTmFtZTogJ3dlYmdwdScsXG4gIGtlcm5lbEZ1bmM6IGZyb21QaXhlbHMgYXMgdW5rbm93biBhcyBLZXJuZWxGdW5jLFxufTtcblxubGV0IGZyb21QaXhlbHMyRENvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcbmxldCB3aWxsUmVhZEZyZXF1ZW50bHkgPSBlbnYoKS5nZXRCb29sKCdDQU5WQVMyRF9XSUxMX1JFQURfRlJFUVVFTlRMWV9GT1JfR1BVJyk7XG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tUGl4ZWxzKGFyZ3M6IHtcbiAgaW5wdXRzOiBGcm9tUGl4ZWxzSW5wdXRzLFxuICBiYWNrZW5kOiBXZWJHUFVCYWNrZW5kLFxuICBhdHRyczogRnJvbVBpeGVsc0F0dHJzXG59KTogVGVuc29ySW5mbyB7XG4gIGNvbnN0IHtpbnB1dHMsIGJhY2tlbmQsIGF0dHJzfSA9IGFyZ3M7XG4gIGxldCB7cGl4ZWxzfSA9IGlucHV0cztcbiAgY29uc3Qge251bUNoYW5uZWxzfSA9IGF0dHJzO1xuXG4gIGlmIChwaXhlbHMgPT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBFcnJvcigncGl4ZWxzIHBhc3NlZCB0byB0Zi5icm93c2VyLmZyb21QaXhlbHMoKSBjYW4gbm90IGJlIG51bGwnKTtcbiAgfVxuXG4gIGNvbnN0IGlzVmlkZW8gPSB0eXBlb2YgKEhUTUxWaWRlb0VsZW1lbnQpICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgcGl4ZWxzIGluc3RhbmNlb2YgSFRNTFZpZGVvRWxlbWVudDtcbiAgY29uc3QgaXNJbWFnZSA9IHR5cGVvZiAoSFRNTEltYWdlRWxlbWVudCkgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICBwaXhlbHMgaW5zdGFuY2VvZiBIVE1MSW1hZ2VFbGVtZW50O1xuICBjb25zdCBpc0NhbnZhcyA9ICh0eXBlb2YgKEhUTUxDYW52YXNFbGVtZW50KSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICAgICAgICAgICAgcGl4ZWxzIGluc3RhbmNlb2YgSFRNTENhbnZhc0VsZW1lbnQpIHx8XG4gICAgICAodHlwZW9mIChPZmZzY3JlZW5DYW52YXMpICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgIHBpeGVscyBpbnN0YW5jZW9mIE9mZnNjcmVlbkNhbnZhcyk7XG4gIGNvbnN0IGlzSW1hZ2VCaXRtYXAgPVxuICAgICAgdHlwZW9mIChJbWFnZUJpdG1hcCkgIT09ICd1bmRlZmluZWQnICYmIHBpeGVscyBpbnN0YW5jZW9mIEltYWdlQml0bWFwO1xuXG4gIGNvbnN0IFt3aWR0aCwgaGVpZ2h0XSA9IGlzVmlkZW8gP1xuICAgICAgW1xuICAgICAgICAocGl4ZWxzIGFzIEhUTUxWaWRlb0VsZW1lbnQpLnZpZGVvV2lkdGgsXG4gICAgICAgIChwaXhlbHMgYXMgSFRNTFZpZGVvRWxlbWVudCkudmlkZW9IZWlnaHRcbiAgICAgIF0gOlxuICAgICAgW3BpeGVscy53aWR0aCwgcGl4ZWxzLmhlaWdodF07XG4gIGNvbnN0IG91dHB1dFNoYXBlID0gW2hlaWdodCwgd2lkdGgsIG51bUNoYW5uZWxzXTtcblxuICBjb25zdCBpbXBvcnRWaWRlbyA9XG4gICAgICBlbnYoKS5nZXRCb29sKCdXRUJHUFVfSU1QT1JUX0VYVEVSTkFMX1RFWFRVUkUnKSAmJiBpc1ZpZGVvO1xuICBjb25zdCBpc1ZpZGVvT3JJbWFnZSA9IGlzVmlkZW8gfHwgaXNJbWFnZTtcbiAgaWYgKGlzSW1hZ2VCaXRtYXAgfHwgaXNDYW52YXMgfHwgaXNWaWRlb09ySW1hZ2UpIHtcbiAgICBsZXQgcmVzb3VyY2U7XG4gICAgaWYgKGltcG9ydFZpZGVvKSB7XG4gICAgICByZXNvdXJjZSA9IGJhY2tlbmQuZGV2aWNlLmltcG9ydEV4dGVybmFsVGV4dHVyZShcbiAgICAgICAgICB7c291cmNlOiBwaXhlbHMgYXMgSFRNTFZpZGVvRWxlbWVudH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoaXNWaWRlb09ySW1hZ2UpIHtcbiAgICAgICAgY29uc3QgbmV3V2lsbFJlYWRGcmVxdWVudGx5ID1cbiAgICAgICAgICAgIGVudigpLmdldEJvb2woJ0NBTlZBUzJEX1dJTExfUkVBRF9GUkVRVUVOVExZX0ZPUl9HUFUnKTtcbiAgICAgICAgaWYgKGZyb21QaXhlbHMyRENvbnRleHQgPT0gbnVsbCB8fFxuICAgICAgICAgICAgbmV3V2lsbFJlYWRGcmVxdWVudGx5ICE9PSB3aWxsUmVhZEZyZXF1ZW50bHkpIHtcbiAgICAgICAgICB3aWxsUmVhZEZyZXF1ZW50bHkgPSBuZXdXaWxsUmVhZEZyZXF1ZW50bHk7XG4gICAgICAgICAgZnJvbVBpeGVsczJEQ29udGV4dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpLmdldENvbnRleHQoXG4gICAgICAgICAgICAgICcyZCcsIHt3aWxsUmVhZEZyZXF1ZW50bHl9KTtcbiAgICAgICAgfVxuICAgICAgICBmcm9tUGl4ZWxzMkRDb250ZXh0LmNhbnZhcy53aWR0aCA9IHdpZHRoO1xuICAgICAgICBmcm9tUGl4ZWxzMkRDb250ZXh0LmNhbnZhcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgIGZyb21QaXhlbHMyRENvbnRleHQuZHJhd0ltYWdlKFxuICAgICAgICAgICAgcGl4ZWxzIGFzIEhUTUxWaWRlb0VsZW1lbnQgfCBIVE1MSW1hZ2VFbGVtZW50LCAwLCAwLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgcGl4ZWxzID0gZnJvbVBpeGVsczJEQ29udGV4dC5jYW52YXM7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHVzYWdlID0gR1BVVGV4dHVyZVVzYWdlLkNPUFlfRFNUIHxcbiAgICAgICAgICBHUFVUZXh0dXJlVXNhZ2UuUkVOREVSX0FUVEFDSE1FTlQgfCBHUFVUZXh0dXJlVXNhZ2UuVEVYVFVSRV9CSU5ESU5HO1xuICAgICAgY29uc3QgZm9ybWF0ID0gJ3JnYmE4dW5vcm0nIGFzIEdQVVRleHR1cmVGb3JtYXQ7XG4gICAgICBjb25zdCB0ZXh0dXJlID0gYmFja2VuZC50ZXh0dXJlTWFuYWdlci5hY3F1aXJlVGV4dHVyZShcbiAgICAgICAgICBvdXRwdXRTaGFwZVsxXSwgb3V0cHV0U2hhcGVbMF0sIGZvcm1hdCwgdXNhZ2UpO1xuICAgICAgYmFja2VuZC5xdWV1ZS5jb3B5RXh0ZXJuYWxJbWFnZVRvVGV4dHVyZShcbiAgICAgICAgICB7c291cmNlOiBwaXhlbHMgYXMgSFRNTENhbnZhc0VsZW1lbnQgfCBJbWFnZUJpdG1hcH0sIHt0ZXh0dXJlfSxcbiAgICAgICAgICBbb3V0cHV0U2hhcGVbMV0sIG91dHB1dFNoYXBlWzBdXSk7XG4gICAgICByZXNvdXJjZSA9IHRleHR1cmU7XG4gICAgfVxuXG4gICAgY29uc3Qgc2l6ZSA9IHV0aWwuc2l6ZUZyb21TaGFwZShvdXRwdXRTaGFwZSk7XG4gICAgY29uc3Qgc3RyaWRlcyA9IHV0aWwuY29tcHV0ZVN0cmlkZXMob3V0cHV0U2hhcGUpO1xuICAgIGNvbnN0IHByb2dyYW0gPVxuICAgICAgICBuZXcgRnJvbVBpeGVsc1Byb2dyYW0ob3V0cHV0U2hhcGUsIG51bUNoYW5uZWxzLCBpbXBvcnRWaWRlbyk7XG5cbiAgICBjb25zdCB1bmlmb3JtRGF0YSA9IFtcbiAgICAgIHt0eXBlOiAndWludDMyJywgZGF0YTogW3NpemVdfSwge3R5cGU6ICd1aW50MzInLCBkYXRhOiBbbnVtQ2hhbm5lbHNdfSxcbiAgICAgIHt0eXBlOiAndWludDMyJywgZGF0YTogWy4uLnN0cmlkZXNdfVxuICAgIF07XG4gICAgY29uc3QgaW5wdXQgPSBiYWNrZW5kLm1ha2VUZW5zb3JJbmZvKFtoZWlnaHQsIHdpZHRoXSwgJ2ludDMyJyk7XG4gICAgY29uc3QgaW5mbyA9IGJhY2tlbmQudGVuc29yTWFwLmdldChpbnB1dC5kYXRhSWQpO1xuICAgIGluZm8ucmVzb3VyY2UgPSByZXNvdXJjZTtcblxuICAgIGNvbnN0IHJlc3VsdCA9XG4gICAgICAgIGJhY2tlbmQucnVuV2ViR1BVUHJvZ3JhbShwcm9ncmFtLCBbaW5wdXRdLCAnaW50MzInLCB1bmlmb3JtRGF0YSk7XG4gICAgYmFja2VuZC5kaXNwb3NlRGF0YShpbnB1dC5kYXRhSWQpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvLyBUT0RPOiBFbmNvZGluZyBzaG91bGQgaGFwcGVuIG9uIEdQVSBvbmNlIHdlIG5vIGxvbmdlciBoYXZlIHRvIGRvd25sb2FkXG4gIC8vIGltYWdlIGRhdGEgdG8gdGhlIENQVS5cbiAgY29uc3QgaW1hZ2VEYXRhID0gKHBpeGVscyBhcyBJbWFnZURhdGEgfCBiYWNrZW5kX3V0aWwuUGl4ZWxEYXRhKS5kYXRhO1xuICBsZXQgcGl4ZWxBcnJheSA9IGltYWdlRGF0YTtcbiAgaWYgKG51bUNoYW5uZWxzICE9IG51bGwgJiYgbnVtQ2hhbm5lbHMgIT09IDQpIHtcbiAgICBwaXhlbEFycmF5ID0gbmV3IFVpbnQ4QXJyYXkocGl4ZWxzLndpZHRoICogcGl4ZWxzLmhlaWdodCAqIG51bUNoYW5uZWxzKTtcblxuICAgIGNvbnN0IGRhdGFMZW5ndGggPSBpbWFnZURhdGEubGVuZ3RoO1xuICAgIGxldCBqID0gMDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGFMZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGkgJSA0IDwgbnVtQ2hhbm5lbHMpIHtcbiAgICAgICAgcGl4ZWxBcnJheVtqKytdID0gaW1hZ2VEYXRhW2ldO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNvbnN0IG91dHB1dCA9XG4gICAgICBiYWNrZW5kLm1ha2VUZW5zb3JJbmZvKG91dHB1dFNoYXBlLCAnaW50MzInLCBuZXcgSW50MzJBcnJheShwaXhlbEFycmF5KSk7XG4gIGJhY2tlbmQudXBsb2FkVG9HUFUob3V0cHV0LmRhdGFJZCk7XG4gIHJldHVybiBvdXRwdXQ7XG59XG4iXX0=","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { backend_util } from '@tensorflow/tfjs-core';\nimport { getMainHeaderString as main } from './webgpu_program';\nimport { computeDispatch, flatDispatchLayout } from './webgpu_util';\nexport class BatchNormProgram {\n    constructor(xShape, meanShape, varianceShape, offsetShape, scaleShape) {\n        this.uniforms = 'varianceEpsilon : f32,';\n        // This is an experimental value.\n        this.workgroupSize = [128, 1, 1];\n        this.size = true;\n        this.variableNames = ['x', 'mean', 'variance'];\n        backend_util.assertAndGetBroadcastShape(xShape, meanShape);\n        backend_util.assertAndGetBroadcastShape(xShape, varianceShape);\n        this.outputShape = xShape;\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize);\n        if (offsetShape != null) {\n            backend_util.assertAndGetBroadcastShape(xShape, offsetShape);\n            this.variableNames.push('offset');\n        }\n        if (scaleShape != null) {\n            backend_util.assertAndGetBroadcastShape(xShape, scaleShape);\n            this.variableNames.push('scale');\n        }\n        this.offsetShape = offsetShape;\n        this.scaleShape = scaleShape;\n        this.shaderKey = 'batchNorm';\n    }\n    getUserCode() {\n        let offsetSnippet = '0.0';\n        if (this.offsetShape != null) {\n            offsetSnippet = 'getOffsetByOutputIndex(index)';\n        }\n        let scaleSnippet = '1.0';\n        if (this.scaleShape != null) {\n            scaleSnippet = 'getScaleByOutputIndex(index)';\n        }\n        const userCode = `\n      ${main('index')} {\n        if (index < uniforms.size)\n        {\n          let xValue = getXByOutputIndex(index);\n          let meanValue = getMeanByOutputIndex(index);\n          let varianValue = getVarianceByOutputIndex(index);\n          let offsetValue = ${offsetSnippet};\n          let scaleValue = ${scaleSnippet};\n          let inv = scaleValue * inverseSqrt(varianValue + f32(uniforms.varianceEpsilon));\n          setOutputAtIndex(index,dot(vec3<f32>(xValue, -meanValue, offsetValue), vec3<f32>(inv, inv, 1.0)));\n        }\n      }\n  `;\n        return userCode;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmF0Y2hub3JtX3dlYmdwdS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2JhdGNobm9ybV93ZWJncHUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUFDLFlBQVksRUFBQyxNQUFNLHVCQUF1QixDQUFDO0FBQ25ELE9BQU8sRUFBQyxtQkFBbUIsSUFBSSxJQUFJLEVBQWdCLE1BQU0sa0JBQWtCLENBQUM7QUFDNUUsT0FBTyxFQUFDLGVBQWUsRUFBRSxrQkFBa0IsRUFBQyxNQUFNLGVBQWUsQ0FBQztBQUVsRSxNQUFNLE9BQU8sZ0JBQWdCO0lBYzNCLFlBQ0ksTUFBZ0IsRUFBRSxTQUFtQixFQUFFLGFBQXVCLEVBQzlELFdBQTBCLEVBQUUsVUFBeUI7UUFWekQsYUFBUSxHQUFHLHdCQUF3QixDQUFDO1FBQ3BDLGlDQUFpQztRQUNqQyxrQkFBYSxHQUE2QixDQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFJdEQsU0FBSSxHQUFHLElBQUksQ0FBQztRQUtWLElBQUksQ0FBQyxhQUFhLEdBQUcsQ0FBQyxHQUFHLEVBQUUsTUFBTSxFQUFFLFVBQVUsQ0FBQyxDQUFDO1FBQy9DLFlBQVksQ0FBQywwQkFBMEIsQ0FBQyxNQUFNLEVBQUUsU0FBUyxDQUFDLENBQUM7UUFDM0QsWUFBWSxDQUFDLDBCQUEwQixDQUFDLE1BQU0sRUFBRSxhQUFhLENBQUMsQ0FBQztRQUMvRCxJQUFJLENBQUMsV0FBVyxHQUFHLE1BQU0sQ0FBQztRQUMxQixJQUFJLENBQUMsY0FBYyxHQUFHLGtCQUFrQixDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUMzRCxJQUFJLENBQUMsUUFBUSxHQUFHLGVBQWUsQ0FDM0IsSUFBSSxDQUFDLGNBQWMsRUFBRSxJQUFJLENBQUMsV0FBVyxFQUFFLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQztRQUUvRCxJQUFJLFdBQVcsSUFBSSxJQUFJLEVBQUU7WUFDdkIsWUFBWSxDQUFDLDBCQUEwQixDQUFDLE1BQU0sRUFBRSxXQUFXLENBQUMsQ0FBQztZQUM3RCxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztTQUNuQztRQUNELElBQUksVUFBVSxJQUFJLElBQUksRUFBRTtZQUN0QixZQUFZLENBQUMsMEJBQTBCLENBQUMsTUFBTSxFQUFFLFVBQVUsQ0FBQyxDQUFDO1lBQzVELElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1NBQ2xDO1FBQ0QsSUFBSSxDQUFDLFdBQVcsR0FBRyxXQUFXLENBQUM7UUFDL0IsSUFBSSxDQUFDLFVBQVUsR0FBRyxVQUFVLENBQUM7UUFDN0IsSUFBSSxDQUFDLFNBQVMsR0FBRyxXQUFXLENBQUM7SUFDL0IsQ0FBQztJQUVELFdBQVc7UUFDVCxJQUFJLGFBQWEsR0FBRyxLQUFLLENBQUM7UUFDMUIsSUFBSSxJQUFJLENBQUMsV0FBVyxJQUFJLElBQUksRUFBRTtZQUM1QixhQUFhLEdBQUcsK0JBQStCLENBQUM7U0FDakQ7UUFFRCxJQUFJLFlBQVksR0FBRyxLQUFLLENBQUM7UUFDekIsSUFBSSxJQUFJLENBQUMsVUFBVSxJQUFJLElBQUksRUFBRTtZQUMzQixZQUFZLEdBQUcsOEJBQThCLENBQUM7U0FDL0M7UUFFRCxNQUFNLFFBQVEsR0FBRztRQUNiLElBQUksQ0FBQyxPQUFPLENBQUM7Ozs7Ozs4QkFNUyxhQUFhOzZCQUNkLFlBQVk7Ozs7O0dBS3RDLENBQUM7UUFDQSxPQUFPLFFBQVEsQ0FBQztJQUNsQixDQUFDO0NBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7YmFja2VuZF91dGlsfSBmcm9tICdAdGVuc29yZmxvdy90ZmpzLWNvcmUnO1xuaW1wb3J0IHtnZXRNYWluSGVhZGVyU3RyaW5nIGFzIG1haW4sIFdlYkdQVVByb2dyYW19IGZyb20gJy4vd2ViZ3B1X3Byb2dyYW0nO1xuaW1wb3J0IHtjb21wdXRlRGlzcGF0Y2gsIGZsYXREaXNwYXRjaExheW91dH0gZnJvbSAnLi93ZWJncHVfdXRpbCc7XG5cbmV4cG9ydCBjbGFzcyBCYXRjaE5vcm1Qcm9ncmFtIGltcGxlbWVudHMgV2ViR1BVUHJvZ3JhbSB7XG4gIG91dHB1dFNoYXBlOiBudW1iZXJbXTtcbiAgc2hhZGVyS2V5OiBzdHJpbmc7XG4gIGRpc3BhdGNoTGF5b3V0OiB7eDogbnVtYmVyW10sIHk/OiBudW1iZXJbXSwgej86IG51bWJlcltdfTtcbiAgZGlzcGF0Y2g6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXTtcbiAgdmFyaWFibGVOYW1lczogc3RyaW5nW107XG4gIHVuaWZvcm1zID0gJ3ZhcmlhbmNlRXBzaWxvbiA6IGYzMiwnO1xuICAvLyBUaGlzIGlzIGFuIGV4cGVyaW1lbnRhbCB2YWx1ZS5cbiAgd29ya2dyb3VwU2l6ZTogW251bWJlciwgbnVtYmVyLCBudW1iZXJdID0gWzEyOCwgMSwgMV07XG4gIG9mZnNldFNoYXBlOiBudW1iZXJbXXxudWxsO1xuICBzY2FsZVNoYXBlOiBudW1iZXJbXXxudWxsO1xuICB2YXJpYW5jZUVwc2lsb246IG51bWJlcjtcbiAgc2l6ZSA9IHRydWU7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgICB4U2hhcGU6IG51bWJlcltdLCBtZWFuU2hhcGU6IG51bWJlcltdLCB2YXJpYW5jZVNoYXBlOiBudW1iZXJbXSxcbiAgICAgIG9mZnNldFNoYXBlOiBudW1iZXJbXXxudWxsLCBzY2FsZVNoYXBlOiBudW1iZXJbXXxudWxsKSB7XG4gICAgdGhpcy52YXJpYWJsZU5hbWVzID0gWyd4JywgJ21lYW4nLCAndmFyaWFuY2UnXTtcbiAgICBiYWNrZW5kX3V0aWwuYXNzZXJ0QW5kR2V0QnJvYWRjYXN0U2hhcGUoeFNoYXBlLCBtZWFuU2hhcGUpO1xuICAgIGJhY2tlbmRfdXRpbC5hc3NlcnRBbmRHZXRCcm9hZGNhc3RTaGFwZSh4U2hhcGUsIHZhcmlhbmNlU2hhcGUpO1xuICAgIHRoaXMub3V0cHV0U2hhcGUgPSB4U2hhcGU7XG4gICAgdGhpcy5kaXNwYXRjaExheW91dCA9IGZsYXREaXNwYXRjaExheW91dCh0aGlzLm91dHB1dFNoYXBlKTtcbiAgICB0aGlzLmRpc3BhdGNoID0gY29tcHV0ZURpc3BhdGNoKFxuICAgICAgICB0aGlzLmRpc3BhdGNoTGF5b3V0LCB0aGlzLm91dHB1dFNoYXBlLCB0aGlzLndvcmtncm91cFNpemUpO1xuXG4gICAgaWYgKG9mZnNldFNoYXBlICE9IG51bGwpIHtcbiAgICAgIGJhY2tlbmRfdXRpbC5hc3NlcnRBbmRHZXRCcm9hZGNhc3RTaGFwZSh4U2hhcGUsIG9mZnNldFNoYXBlKTtcbiAgICAgIHRoaXMudmFyaWFibGVOYW1lcy5wdXNoKCdvZmZzZXQnKTtcbiAgICB9XG4gICAgaWYgKHNjYWxlU2hhcGUgIT0gbnVsbCkge1xuICAgICAgYmFja2VuZF91dGlsLmFzc2VydEFuZEdldEJyb2FkY2FzdFNoYXBlKHhTaGFwZSwgc2NhbGVTaGFwZSk7XG4gICAgICB0aGlzLnZhcmlhYmxlTmFtZXMucHVzaCgnc2NhbGUnKTtcbiAgICB9XG4gICAgdGhpcy5vZmZzZXRTaGFwZSA9IG9mZnNldFNoYXBlO1xuICAgIHRoaXMuc2NhbGVTaGFwZSA9IHNjYWxlU2hhcGU7XG4gICAgdGhpcy5zaGFkZXJLZXkgPSAnYmF0Y2hOb3JtJztcbiAgfVxuXG4gIGdldFVzZXJDb2RlKCk6IHN0cmluZyB7XG4gICAgbGV0IG9mZnNldFNuaXBwZXQgPSAnMC4wJztcbiAgICBpZiAodGhpcy5vZmZzZXRTaGFwZSAhPSBudWxsKSB7XG4gICAgICBvZmZzZXRTbmlwcGV0ID0gJ2dldE9mZnNldEJ5T3V0cHV0SW5kZXgoaW5kZXgpJztcbiAgICB9XG5cbiAgICBsZXQgc2NhbGVTbmlwcGV0ID0gJzEuMCc7XG4gICAgaWYgKHRoaXMuc2NhbGVTaGFwZSAhPSBudWxsKSB7XG4gICAgICBzY2FsZVNuaXBwZXQgPSAnZ2V0U2NhbGVCeU91dHB1dEluZGV4KGluZGV4KSc7XG4gICAgfVxuXG4gICAgY29uc3QgdXNlckNvZGUgPSBgXG4gICAgICAke21haW4oJ2luZGV4Jyl9IHtcbiAgICAgICAgaWYgKGluZGV4IDwgdW5pZm9ybXMuc2l6ZSlcbiAgICAgICAge1xuICAgICAgICAgIGxldCB4VmFsdWUgPSBnZXRYQnlPdXRwdXRJbmRleChpbmRleCk7XG4gICAgICAgICAgbGV0IG1lYW5WYWx1ZSA9IGdldE1lYW5CeU91dHB1dEluZGV4KGluZGV4KTtcbiAgICAgICAgICBsZXQgdmFyaWFuVmFsdWUgPSBnZXRWYXJpYW5jZUJ5T3V0cHV0SW5kZXgoaW5kZXgpO1xuICAgICAgICAgIGxldCBvZmZzZXRWYWx1ZSA9ICR7b2Zmc2V0U25pcHBldH07XG4gICAgICAgICAgbGV0IHNjYWxlVmFsdWUgPSAke3NjYWxlU25pcHBldH07XG4gICAgICAgICAgbGV0IGludiA9IHNjYWxlVmFsdWUgKiBpbnZlcnNlU3FydCh2YXJpYW5WYWx1ZSArIGYzMih1bmlmb3Jtcy52YXJpYW5jZUVwc2lsb24pKTtcbiAgICAgICAgICBzZXRPdXRwdXRBdEluZGV4KGluZGV4LGRvdCh2ZWMzPGYzMj4oeFZhbHVlLCAtbWVhblZhbHVlLCBvZmZzZXRWYWx1ZSksIHZlYzM8ZjMyPihpbnYsIGludiwgMS4wKSkpO1xuICAgICAgICB9XG4gICAgICB9XG4gIGA7XG4gICAgcmV0dXJuIHVzZXJDb2RlO1xuICB9XG59XG4iXX0=","/**\n * @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { FusedBatchNorm } from '@tensorflow/tfjs-core';\nimport { BatchNormProgram } from '../batchnorm_webgpu';\nexport const fusedBatchNormConfig = {\n    kernelName: FusedBatchNorm,\n    backendName: 'webgpu',\n    kernelFunc: ({ inputs, attrs, backend }) => {\n        const { x, scale, offset, mean, variance } = inputs;\n        const { varianceEpsilon } = attrs;\n        const webGPUBackend = backend;\n        const batchNormInputs = [x, mean, variance];\n        let offsetShape = null;\n        if (offset != null) {\n            offsetShape = offset.shape;\n            batchNormInputs.push(offset);\n        }\n        let scaleShape = null;\n        if (scale != null) {\n            scaleShape = scale.shape;\n            batchNormInputs.push(scale);\n        }\n        const program = new BatchNormProgram(x.shape, mean.shape, variance.shape, offsetShape, scaleShape);\n        const uniformData = [{ type: 'float32', data: [varianceEpsilon] }];\n        return webGPUBackend.runWebGPUProgram(program, batchNormInputs, x.dtype, uniformData);\n    }\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRnVzZWRCYXRjaE5vcm0uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9rZXJuZWxzL0Z1c2VkQmF0Y2hOb3JtLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sRUFBQyxjQUFjLEVBQWtFLE1BQU0sdUJBQXVCLENBQUM7QUFJdEgsT0FBTyxFQUFDLGdCQUFnQixFQUFDLE1BQU0scUJBQXFCLENBQUM7QUFFckQsTUFBTSxDQUFDLE1BQU0sb0JBQW9CLEdBQWlCO0lBQ2hELFVBQVUsRUFBRSxjQUFjO0lBQzFCLFdBQVcsRUFBRSxRQUFRO0lBQ3JCLFVBQVUsRUFBRSxDQUFDLEVBQUMsTUFBTSxFQUFFLEtBQUssRUFBRSxPQUFPLEVBQUMsRUFBRSxFQUFFO1FBQ3ZDLE1BQU0sRUFBQyxDQUFDLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFDLEdBQUcsTUFBOEIsQ0FBQztRQUMxRSxNQUFNLEVBQUMsZUFBZSxFQUFDLEdBQUcsS0FBdUMsQ0FBQztRQUNsRSxNQUFNLGFBQWEsR0FBRyxPQUF3QixDQUFDO1FBQy9DLE1BQU0sZUFBZSxHQUFHLENBQUMsQ0FBVyxFQUFFLElBQWMsRUFBRSxRQUFrQixDQUFDLENBQUM7UUFDMUUsSUFBSSxXQUFXLEdBQUcsSUFBSSxDQUFDO1FBQ3ZCLElBQUksTUFBTSxJQUFJLElBQUksRUFBRTtZQUNsQixXQUFXLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQztZQUMzQixlQUFlLENBQUMsSUFBSSxDQUFDLE1BQWdCLENBQUMsQ0FBQztTQUN4QztRQUNELElBQUksVUFBVSxHQUFHLElBQUksQ0FBQztRQUN0QixJQUFJLEtBQUssSUFBSSxJQUFJLEVBQUU7WUFDakIsVUFBVSxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUM7WUFDekIsZUFBZSxDQUFDLElBQUksQ0FBQyxLQUFlLENBQUMsQ0FBQztTQUN2QztRQUNELE1BQU0sT0FBTyxHQUFHLElBQUksZ0JBQWdCLENBQ2hDLENBQUMsQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLEtBQUssRUFBRSxRQUFRLENBQUMsS0FBSyxFQUFFLFdBQVcsRUFBRSxVQUFVLENBQUMsQ0FBQztRQUNsRSxNQUFNLFdBQVcsR0FBRyxDQUFDLEVBQUMsSUFBSSxFQUFFLFNBQVMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxlQUFlLENBQUMsRUFBQyxDQUFDLENBQUM7UUFDakUsT0FBTyxhQUFhLENBQUMsZ0JBQWdCLENBQ2pDLE9BQU8sRUFBRSxlQUFlLEVBQUUsQ0FBQyxDQUFDLEtBQUssRUFBRSxXQUFXLENBQUMsQ0FBQztJQUN0RCxDQUFDO0NBQ0YsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtGdXNlZEJhdGNoTm9ybSwgRnVzZWRCYXRjaE5vcm1BdHRycywgRnVzZWRCYXRjaE5vcm1JbnB1dHMsIEtlcm5lbENvbmZpZywgVGVuc29yfSBmcm9tICdAdGVuc29yZmxvdy90ZmpzLWNvcmUnO1xuXG5pbXBvcnQge1dlYkdQVUJhY2tlbmR9IGZyb20gJy4uL2JhY2tlbmRfd2ViZ3B1JztcblxuaW1wb3J0IHtCYXRjaE5vcm1Qcm9ncmFtfSBmcm9tICcuLi9iYXRjaG5vcm1fd2ViZ3B1JztcblxuZXhwb3J0IGNvbnN0IGZ1c2VkQmF0Y2hOb3JtQ29uZmlnOiBLZXJuZWxDb25maWcgPSB7XG4gIGtlcm5lbE5hbWU6IEZ1c2VkQmF0Y2hOb3JtLFxuICBiYWNrZW5kTmFtZTogJ3dlYmdwdScsXG4gIGtlcm5lbEZ1bmM6ICh7aW5wdXRzLCBhdHRycywgYmFja2VuZH0pID0+IHtcbiAgICBjb25zdCB7eCwgc2NhbGUsIG9mZnNldCwgbWVhbiwgdmFyaWFuY2V9ID0gaW5wdXRzIGFzIEZ1c2VkQmF0Y2hOb3JtSW5wdXRzO1xuICAgIGNvbnN0IHt2YXJpYW5jZUVwc2lsb259ID0gYXR0cnMgYXMgdW5rbm93biBhcyBGdXNlZEJhdGNoTm9ybUF0dHJzO1xuICAgIGNvbnN0IHdlYkdQVUJhY2tlbmQgPSBiYWNrZW5kIGFzIFdlYkdQVUJhY2tlbmQ7XG4gICAgY29uc3QgYmF0Y2hOb3JtSW5wdXRzID0gW3ggYXMgVGVuc29yLCBtZWFuIGFzIFRlbnNvciwgdmFyaWFuY2UgYXMgVGVuc29yXTtcbiAgICBsZXQgb2Zmc2V0U2hhcGUgPSBudWxsO1xuICAgIGlmIChvZmZzZXQgIT0gbnVsbCkge1xuICAgICAgb2Zmc2V0U2hhcGUgPSBvZmZzZXQuc2hhcGU7XG4gICAgICBiYXRjaE5vcm1JbnB1dHMucHVzaChvZmZzZXQgYXMgVGVuc29yKTtcbiAgICB9XG4gICAgbGV0IHNjYWxlU2hhcGUgPSBudWxsO1xuICAgIGlmIChzY2FsZSAhPSBudWxsKSB7XG4gICAgICBzY2FsZVNoYXBlID0gc2NhbGUuc2hhcGU7XG4gICAgICBiYXRjaE5vcm1JbnB1dHMucHVzaChzY2FsZSBhcyBUZW5zb3IpO1xuICAgIH1cbiAgICBjb25zdCBwcm9ncmFtID0gbmV3IEJhdGNoTm9ybVByb2dyYW0oXG4gICAgICAgIHguc2hhcGUsIG1lYW4uc2hhcGUsIHZhcmlhbmNlLnNoYXBlLCBvZmZzZXRTaGFwZSwgc2NhbGVTaGFwZSk7XG4gICAgY29uc3QgdW5pZm9ybURhdGEgPSBbe3R5cGU6ICdmbG9hdDMyJywgZGF0YTogW3ZhcmlhbmNlRXBzaWxvbl19XTtcbiAgICByZXR1cm4gd2ViR1BVQmFja2VuZC5ydW5XZWJHUFVQcm9ncmFtKFxuICAgICAgICBwcm9ncmFtLCBiYXRjaE5vcm1JbnB1dHMsIHguZHR5cGUsIHVuaWZvcm1EYXRhKTtcbiAgfVxufTtcbiJdfQ==","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { backend_util, FusedConv2D } from '@tensorflow/tfjs-core';\nimport { conv2DImpl } from './Conv2D_impl';\nexport function fusedConv2d(args) {\n    const { inputs, backend, attrs } = args;\n    const { x, filter, bias, preluActivationWeights } = inputs;\n    const { strides, pad, dataFormat, dilations, dimRoundingMode, activation, leakyreluAlpha } = attrs;\n    const $dataFormat = backend_util.convertConv2DDataFormat(dataFormat);\n    const convInfo = backend_util.computeConv2DInfo(x.shape, filter.shape, strides, dilations, pad, dimRoundingMode, false /* depthwise */, $dataFormat);\n    return conv2DImpl({\n        x,\n        filter,\n        convInfo,\n        backend,\n        bias,\n        preluActivationWeights,\n        leakyreluAlpha,\n        activation\n    });\n}\nexport const fusedConv2DConfig = {\n    kernelName: FusedConv2D,\n    backendName: 'webgpu',\n    kernelFunc: fusedConv2d,\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRnVzZWRDb252MkQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9rZXJuZWxzL0Z1c2VkQ29udjJELnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sRUFBQyxZQUFZLEVBQUUsV0FBVyxFQUFnRSxNQUFNLHVCQUF1QixDQUFDO0FBSS9ILE9BQU8sRUFBQyxVQUFVLEVBQUMsTUFBTSxlQUFlLENBQUM7QUFFekMsTUFBTSxVQUFVLFdBQVcsQ0FBQyxJQUkzQjtJQUNDLE1BQU0sRUFBQyxNQUFNLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBQyxHQUFHLElBQUksQ0FBQztJQUN0QyxNQUFNLEVBQUMsQ0FBQyxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsc0JBQXNCLEVBQUMsR0FBRyxNQUFNLENBQUM7SUFDekQsTUFBTSxFQUNKLE9BQU8sRUFDUCxHQUFHLEVBQ0gsVUFBVSxFQUNWLFNBQVMsRUFDVCxlQUFlLEVBQ2YsVUFBVSxFQUNWLGNBQWMsRUFDZixHQUFHLEtBQUssQ0FBQztJQUVWLE1BQU0sV0FBVyxHQUFHLFlBQVksQ0FBQyx1QkFBdUIsQ0FBQyxVQUFVLENBQUMsQ0FBQztJQUNyRSxNQUFNLFFBQVEsR0FBRyxZQUFZLENBQUMsaUJBQWlCLENBQzNDLENBQUMsQ0FBQyxLQUF5QyxFQUMzQyxNQUFNLENBQUMsS0FBeUMsRUFBRSxPQUFPLEVBQUUsU0FBUyxFQUFFLEdBQUcsRUFDekUsZUFBZSxFQUFFLEtBQUssQ0FBQyxlQUFlLEVBQUUsV0FBVyxDQUFDLENBQUM7SUFFekQsT0FBTyxVQUFVLENBQUM7UUFDaEIsQ0FBQztRQUNELE1BQU07UUFDTixRQUFRO1FBQ1IsT0FBTztRQUNQLElBQUk7UUFDSixzQkFBc0I7UUFDdEIsY0FBYztRQUNkLFVBQVU7S0FDWCxDQUFDLENBQUM7QUFDTCxDQUFDO0FBRUQsTUFBTSxDQUFDLE1BQU0saUJBQWlCLEdBQWlCO0lBQzdDLFVBQVUsRUFBRSxXQUFXO0lBQ3ZCLFdBQVcsRUFBRSxRQUFRO0lBQ3JCLFVBQVUsRUFBRSxXQUFvQztDQUNqRCxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge2JhY2tlbmRfdXRpbCwgRnVzZWRDb252MkQsIEZ1c2VkQ29udjJEQXR0cnMsIEZ1c2VkQ29udjJESW5wdXRzLCBLZXJuZWxDb25maWcsIEtlcm5lbEZ1bmN9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7V2ViR1BVQmFja2VuZH0gZnJvbSAnLi4vYmFja2VuZF93ZWJncHUnO1xuXG5pbXBvcnQge2NvbnYyREltcGx9IGZyb20gJy4vQ29udjJEX2ltcGwnO1xuXG5leHBvcnQgZnVuY3Rpb24gZnVzZWRDb252MmQoYXJnczoge1xuICBpbnB1dHM6IEZ1c2VkQ29udjJESW5wdXRzLFxuICBhdHRyczogRnVzZWRDb252MkRBdHRycyxcbiAgYmFja2VuZDogV2ViR1BVQmFja2VuZFxufSkge1xuICBjb25zdCB7aW5wdXRzLCBiYWNrZW5kLCBhdHRyc30gPSBhcmdzO1xuICBjb25zdCB7eCwgZmlsdGVyLCBiaWFzLCBwcmVsdUFjdGl2YXRpb25XZWlnaHRzfSA9IGlucHV0cztcbiAgY29uc3Qge1xuICAgIHN0cmlkZXMsXG4gICAgcGFkLFxuICAgIGRhdGFGb3JtYXQsXG4gICAgZGlsYXRpb25zLFxuICAgIGRpbVJvdW5kaW5nTW9kZSxcbiAgICBhY3RpdmF0aW9uLFxuICAgIGxlYWt5cmVsdUFscGhhXG4gIH0gPSBhdHRycztcblxuICBjb25zdCAkZGF0YUZvcm1hdCA9IGJhY2tlbmRfdXRpbC5jb252ZXJ0Q29udjJERGF0YUZvcm1hdChkYXRhRm9ybWF0KTtcbiAgY29uc3QgY29udkluZm8gPSBiYWNrZW5kX3V0aWwuY29tcHV0ZUNvbnYyREluZm8oXG4gICAgICB4LnNoYXBlIGFzIFtudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXJdLFxuICAgICAgZmlsdGVyLnNoYXBlIGFzIFtudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXJdLCBzdHJpZGVzLCBkaWxhdGlvbnMsIHBhZCxcbiAgICAgIGRpbVJvdW5kaW5nTW9kZSwgZmFsc2UgLyogZGVwdGh3aXNlICovLCAkZGF0YUZvcm1hdCk7XG5cbiAgcmV0dXJuIGNvbnYyREltcGwoe1xuICAgIHgsXG4gICAgZmlsdGVyLFxuICAgIGNvbnZJbmZvLFxuICAgIGJhY2tlbmQsXG4gICAgYmlhcyxcbiAgICBwcmVsdUFjdGl2YXRpb25XZWlnaHRzLFxuICAgIGxlYWt5cmVsdUFscGhhLFxuICAgIGFjdGl2YXRpb25cbiAgfSk7XG59XG5cbmV4cG9ydCBjb25zdCBmdXNlZENvbnYyRENvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBGdXNlZENvbnYyRCxcbiAgYmFja2VuZE5hbWU6ICd3ZWJncHUnLFxuICBrZXJuZWxGdW5jOiBmdXNlZENvbnYyZCBhcyB1bmtub3duIGFzIEtlcm5lbEZ1bmMsXG59O1xuIl19","/**\n * @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { backend_util, FusedDepthwiseConv2D, util } from '@tensorflow/tfjs-core';\nimport { DepthwiseConv2DVec4Program } from '../depthwise_conv2d_vec4_webgpu';\nimport { DepthwiseConv2DProgram } from '../depthwise_conv2d_webgpu';\nexport function fusedDepthwiseConv2D(args) {\n    const { inputs, backend, attrs } = args;\n    const { x, filter, bias, preluActivationWeights } = inputs;\n    const { strides, pad, dilations, dimRoundingMode, activation, leakyreluAlpha } = attrs;\n    let $dilations = dilations;\n    if ($dilations == null) {\n        $dilations = [1, 1];\n    }\n    util.assert(backend_util.eitherStridesOrDilationsAreOne(strides, $dilations), () => 'Error in depthwiseConv2d: Either strides or dilations must be ' +\n        `1. Got strides ${strides} and dilations '${$dilations}'`);\n    const convInfo = backend_util.computeConv2DInfo(x.shape, filter.shape, strides, $dilations, pad, dimRoundingMode, true /* depthwise */);\n    const programInputs = [x, filter];\n    const hasBias = bias != null;\n    const hasPreluActivationWeights = preluActivationWeights != null;\n    if (hasBias) {\n        programInputs.push(bias);\n    }\n    if (hasPreluActivationWeights) {\n        programInputs.push(preluActivationWeights);\n    }\n    const dimensions = [\n        { type: 'int32', data: [convInfo.padInfo.top, convInfo.padInfo.left] },\n        { type: 'int32', data: [convInfo.inHeight, convInfo.inWidth] },\n    ];\n    let program;\n    if (convInfo.outHeight > 4 && convInfo.outWidth > 4 &&\n        convInfo.strideWidth <= 2 &&\n        convInfo.inChannels === convInfo.outChannels &&\n        convInfo.dilationHeight === 1 && convInfo.dilationWidth === 1 &&\n        convInfo.inChannels % 4 === 0) {\n        program = new DepthwiseConv2DVec4Program(convInfo, hasBias, activation, hasPreluActivationWeights);\n        dimensions.push({ type: 'int32', data: [program.virtualWidth] });\n    }\n    else {\n        program = new DepthwiseConv2DProgram(convInfo, hasBias, activation, hasPreluActivationWeights);\n        dimensions.push({ type: 'int32', data: [convInfo.filterHeight] }, { type: 'int32', data: [convInfo.filterWidth] }, { type: 'int32', data: [convInfo.strideHeight, convInfo.strideWidth] }, {\n            type: 'int32',\n            data: [convInfo.dilationHeight, convInfo.dilationWidth]\n        });\n    }\n    if (activation === 'leakyrelu') {\n        dimensions.push({ type: 'float32', data: [leakyreluAlpha] });\n        program.uniforms += ' alpha : f32,';\n    }\n    const result = backend.runWebGPUProgram(program, programInputs, 'float32', dimensions);\n    return result;\n}\nexport const fusedDepthwiseConv2DConfig = {\n    kernelName: FusedDepthwiseConv2D,\n    backendName: 'webgpu',\n    kernelFunc: fusedDepthwiseConv2D,\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRnVzZWREZXB0aHdpc2VDb252MkQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9rZXJuZWxzL0Z1c2VkRGVwdGh3aXNlQ29udjJELnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sRUFBQyxZQUFZLEVBQUUsb0JBQW9CLEVBQStGLElBQUksRUFBQyxNQUFNLHVCQUF1QixDQUFDO0FBRzVLLE9BQU8sRUFBQywwQkFBMEIsRUFBQyxNQUFNLGlDQUFpQyxDQUFDO0FBQzNFLE9BQU8sRUFBQyxzQkFBc0IsRUFBQyxNQUFNLDRCQUE0QixDQUFDO0FBRWxFLE1BQU0sVUFBVSxvQkFBb0IsQ0FBQyxJQUlwQztJQUNDLE1BQU0sRUFBQyxNQUFNLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBQyxHQUFHLElBQUksQ0FBQztJQUN0QyxNQUFNLEVBQUMsQ0FBQyxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsc0JBQXNCLEVBQUMsR0FBRyxNQUFNLENBQUM7SUFDekQsTUFBTSxFQUFDLE9BQU8sRUFBRSxHQUFHLEVBQUUsU0FBUyxFQUFFLGVBQWUsRUFBRSxVQUFVLEVBQUUsY0FBYyxFQUFDLEdBQ3hFLEtBQUssQ0FBQztJQUVWLElBQUksVUFBVSxHQUFHLFNBQVMsQ0FBQztJQUMzQixJQUFJLFVBQVUsSUFBSSxJQUFJLEVBQUU7UUFDdEIsVUFBVSxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0tBQ3JCO0lBRUQsSUFBSSxDQUFDLE1BQU0sQ0FDUCxZQUFZLENBQUMsOEJBQThCLENBQUMsT0FBTyxFQUFFLFVBQVUsQ0FBQyxFQUNoRSxHQUFHLEVBQUUsQ0FBQyxnRUFBZ0U7UUFDbEUsa0JBQWtCLE9BQU8sbUJBQW1CLFVBQVUsR0FBRyxDQUFDLENBQUM7SUFFbkUsTUFBTSxRQUFRLEdBQUcsWUFBWSxDQUFDLGlCQUFp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QixDQUFDO0FBRUQsTUFBTSxDQUFDLE1BQU0sMEJBQTBCLEdBQWlCO0lBQ3RELFVBQVUsRUFBRSxvQkFBb0I7SUFDaEMsV0FBVyxFQUFFLFFBQVE7SUFDckIsVUFBVSxFQUFFLG9CQUE2QztDQUMxRCxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge2JhY2tlbmRfdXRpbCwgRnVzZWREZXB0aHdpc2VDb252MkQsIEZ1c2VkRGVwdGh3aXNlQ29udjJEQXR0cnMsIEZ1c2VkRGVwdGh3aXNlQ29udjJESW5wdXRzLCBLZXJuZWxDb25maWcsIEtlcm5lbEZ1bmMsIFRlbnNvckluZm8sIHV0aWx9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7V2ViR1BVQmFja2VuZH0gZnJvbSAnLi4vYmFja2VuZF93ZWJncHUnO1xuaW1wb3J0IHtEZXB0aHdpc2VDb252MkRWZWM0UHJvZ3JhbX0gZnJvbSAnLi4vZGVwdGh3aXNlX2NvbnYyZF92ZWM0X3dlYmdwdSc7XG5pbXBvcnQge0RlcHRod2lzZUNvbnYyRFByb2dyYW19IGZyb20gJy4uL2RlcHRod2lzZV9jb252MmRfd2ViZ3B1JztcblxuZXhwb3J0IGZ1bmN0aW9uIGZ1c2VkRGVwdGh3aXNlQ29udjJEKGFyZ3M6IHtcbiAgaW5wdXRzOiBGdXNlZERlcHRod2lzZUNvbnYyRElucHV0cyxcbiAgYXR0cnM6IEZ1c2VkRGVwdGh3aXNlQ29udjJEQXR0cnMsXG4gIGJhY2tlbmQ6IFdlYkdQVUJhY2tlbmRcbn0pIHtcbiAgY29uc3Qge2lucHV0cywgYmFja2VuZCwgYXR0cnN9ID0gYXJncztcbiAgY29uc3Qge3gsIGZpbHRlciwgYmlhcywgcHJlbHVBY3RpdmF0aW9uV2VpZ2h0c30gPSBpbnB1dHM7XG4gIGNvbnN0IHtzdHJpZGVzLCBwYWQsIGRpbGF0aW9ucywgZGltUm91bmRpbmdNb2RlLCBhY3RpdmF0aW9uLCBsZWFreXJlbHVBbHBoYX0gPVxuICAgICAgYXR0cnM7XG5cbiAgbGV0ICRkaWxhdGlvbnMgPSBkaWxhdGlvbnM7XG4gIGlmICgkZGlsYXRpb25zID09IG51bGwpIHtcbiAgICAkZGlsYXRpb25zID0gWzEsIDFdO1xuICB9XG5cbiAgdXRpbC5hc3NlcnQoXG4gICAgICBiYWNrZW5kX3V0aWwuZWl0aGVyU3RyaWRlc09yRGlsYXRpb25zQXJlT25lKHN0cmlkZXMsICRkaWxhdGlvbnMpLFxuICAgICAgKCkgPT4gJ0Vycm9yIGluIGRlcHRod2lzZUNvbnYyZDogRWl0aGVyIHN0cmlkZXMgb3IgZGlsYXRpb25zIG11c3QgYmUgJyArXG4gICAgICAgICAgYDEuIEdvdCBzdHJpZGVzICR7c3RyaWRlc30gYW5kIGRpbGF0aW9ucyAnJHskZGlsYXRpb25zfSdgKTtcblxuICBjb25zdCBjb252SW5mbyA9IGJhY2tlbmRfdXRpbC5jb21wdXRlQ29udjJESW5mbyhcbiAgICAgIHguc2hhcGUgYXMgW251bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcl0sXG4gICAgICBmaWx0ZXIuc2hhcGUgYXMgW251bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcl0sIHN0cmlkZXMsICRkaWxhdGlvbnMsXG4gICAgICBwYWQsIGRpbVJvdW5kaW5nTW9kZSwgdHJ1ZSAvKiBkZXB0aHdpc2UgKi8pO1xuXG4gIGNvbnN0IHByb2dyYW1JbnB1dHM6IFRlbnNvckluZm9bXSA9IFt4LCBmaWx0ZXJdO1xuXG4gIGNvbnN0IGhhc0JpYXMgPSBiaWFzICE9IG51bGw7XG4gIGNvbnN0IGhhc1ByZWx1QWN0aXZhdGlvbldlaWdodHMgPSBwcmVsdUFjdGl2YXRpb25XZWlnaHRzICE9IG51bGw7XG5cbiAgaWYgKGhhc0JpYXMpIHtcbiAgICBwcm9ncmFtSW5wdXRzLnB1c2goYmlhcyk7XG4gIH1cbiAgaWYgKGhhc1ByZWx1QWN0aXZhdGlvbldlaWdodHMpIHtcbiAgICBwcm9ncmFtSW5wdXRzLnB1c2gocHJlbHVBY3RpdmF0aW9uV2VpZ2h0cyk7XG4gIH1cblxuICBjb25zdCBkaW1lbnNpb25zID0gW1xuICAgIHt0eXBlOiAnaW50MzInLCBkYXRhOiBbY29udkluZm8ucGFkSW5mby50b3AsIGNvbnZJbmZvLnBhZEluZm8ubGVmdF19LFxuICAgIHt0eXBlOiAnaW50MzInLCBkYXRhOiBbY29udkluZm8uaW5IZWlnaHQsIGNvbnZJbmZvLmluV2lkdGhdfSxcbiAgXTtcblxuICBsZXQgcHJvZ3JhbTogRGVwdGh3aXNlQ29udjJEUHJvZ3JhbXxEZXB0aHdpc2VDb252MkRWZWM0UHJvZ3JhbTtcbiAgaWYgKGNvbnZJbmZvLm91dEhlaWdodCA+IDQgJiYgY29udkluZm8ub3V0V2lkdGggPiA0ICYmXG4gICAgICBjb252SW5mby5zdHJpZGVXaWR0aCA8PSAyICYmXG4gICAgICBjb252SW5mby5pbkNoYW5uZWxzID09PSBjb252SW5mby5vdXRDaGFubmVscyAmJlxuICAgICAgY29udkluZm8uZGlsYXRpb25IZWlnaHQgPT09IDEgJiYgY29udkluZm8uZGlsYXRpb25XaWR0aCA9PT0gMSAmJlxuICAgICAgY29udkluZm8uaW5DaGFubmVscyAlIDQgPT09IDApIHtcbiAgICBwcm9ncmFtID0gbmV3IERlcHRod2lzZUNvbnYyRFZlYzRQcm9ncmFtKFxuICAgICAgICBjb252SW5mbywgaGFzQmlhcywgYWN0aXZhdGlvbiwgaGFzUHJlbHVBY3RpdmF0aW9uV2VpZ2h0cyk7XG4gICAgZGltZW5zaW9ucy5wdXNoKHt0eXBlOiAnaW50MzInLCBkYXRhOiBbcHJvZ3JhbS52aXJ0dWFsV2lkdGhdfSk7XG4gIH0gZWxzZSB7XG4gICAgcHJvZ3JhbSA9IG5ldyBEZXB0aHdpc2VDb252MkRQcm9ncmFtKFxuICAgICAgICBjb252SW5mbywgaGFzQmlhcywgYWN0aXZhdGlvbiwgaGFzUHJlbHVBY3RpdmF0aW9uV2VpZ2h0cyk7XG4gICAgZGltZW5zaW9ucy5wdXNoKFxuICAgICAgICB7dHlwZTogJ2ludDMyJywgZGF0YTogW2NvbnZJbmZvLmZpbHRlckhlaWdodF19LFxuICAgICAgICB7dHlwZTogJ2ludDMyJywgZGF0YTogW2NvbnZJbmZvLmZpbHRlcldpZHRoXX0sXG4gICAgICAgIHt0eXBlOiAnaW50MzInLCBkYXRhOiBbY29udkluZm8uc3RyaWRlSGVpZ2h0LCBjb252SW5mby5zdHJpZGVXaWR0aF19LCB7XG4gICAgICAgICAgdHlwZTogJ2ludDMyJyxcbiAgICAgICAgICBkYXRhOiBbY29udkluZm8uZGlsYXRpb25IZWlnaHQsIGNvbnZJbmZvLmRpbGF0aW9uV2lkdGhdXG4gICAgICAgIH0pO1xuICB9XG4gIGlmIChhY3RpdmF0aW9uID09PSAnbGVha3lyZWx1Jykge1xuICAgIGRpbWVuc2lvbnMucHVzaCh7dHlwZTogJ2Zsb2F0MzInLCBkYXRhOiBbbGVha3lyZWx1QWxwaGFdfSk7XG4gICAgcHJvZ3JhbS51bmlmb3JtcyArPSAnIGFscGhhIDogZjMyLCc7XG4gIH1cbiAgY29uc3QgcmVzdWx0ID1cbiAgICAgIGJhY2tlbmQucnVuV2ViR1BVUHJvZ3JhbShwcm9ncmFtLCBwcm9ncmFtSW5wdXRzLCAnZmxvYXQzMicsIGRpbWVuc2lvbnMpO1xuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmV4cG9ydCBjb25zdCBmdXNlZERlcHRod2lzZUNvbnYyRENvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBGdXNlZERlcHRod2lzZUNvbnYyRCxcbiAgYmFja2VuZE5hbWU6ICd3ZWJncHUnLFxuICBrZXJuZWxGdW5jOiBmdXNlZERlcHRod2lzZUNvbnYyRCBhcyB1bmtub3duIGFzIEtlcm5lbEZ1bmMsXG59O1xuIl19","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { getCoordsDataType, getMainHeaderString as main } from './webgpu_program';\nimport { computeDispatch, flatDispatchLayout } from './webgpu_util';\nexport class GatherNDProgram {\n    constructor(sliceDim, shape) {\n        this.variableNames = ['A', 'indices'];\n        this.workgroupSize = [64, 1, 1];\n        this.size = true;\n        this.outputShape = shape;\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize);\n        this.shaderKey = `gathernd_${sliceDim}`;\n        this.sliceDim = sliceDim;\n        this.uniforms = `sliceDim : i32, strides : ${getCoordsDataType(sliceDim)},`;\n    }\n    getUserCode() {\n        let strideString;\n        if (this.sliceDim > 1) {\n            strideString = 'uniforms.strides[j]';\n        }\n        else {\n            strideString = 'uniforms.strides';\n        }\n        const userCode = `\n      ${main('index')} {\n        if (index < uniforms.size) {\n          let coords = getCoordsFromIndex(index);\n          var flattenIndex = 0;\n          for (var j = 0; j < uniforms.sliceDim; j = j + 1) {\n            let indexTemp = i32(round(getIndices(coords[0], j)));\n            let strideNum = ${strideString};\n            flattenIndex = flattenIndex + indexTemp * strideNum;\n          }\n\n          setOutputAtIndex(index, getA(flattenIndex, coords[1]));\n        }\n      }\n      `;\n        return userCode;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2F0aGVyX25kX3dlYmdwdS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2dhdGhlcl9uZF93ZWJncHUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUFDLGlCQUFpQixFQUFFLG1CQUFtQixJQUFJLElBQUksRUFBZ0IsTUFBTSxrQkFBa0IsQ0FBQztBQUMvRixPQUFPLEVBQUMsZUFBZSxFQUFFLGtCQUFrQixFQUFDLE1BQU0sZUFBZSxDQUFDO0FBRWxFLE1BQU0sT0FBTyxlQUFlO0lBVTFCLFlBQVksUUFBZ0IsRUFBRSxLQUFlO1FBTDdDLGtCQUFhLEdBQWEsQ0FBQyxHQUFHLEVBQUUsU0FBUyxDQUFDLENBQUM7UUFFM0Msa0JBQWEsR0FBNkIsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ3JELFNBQUksR0FBRyxJQUFJLENBQUM7UUFHVixJQUFJLENBQUMsV0FBVyxHQUFHLEtBQUssQ0FBQztRQUN6QixJQUFJLENBQUMsY0FBYyxHQUFHLGtCQUFrQixDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUMzRCxJQUFJLENBQUMsUUFBUSxHQUFHLGVBQWUsQ0FDM0IsSUFBSSxDQUFDLGNBQWMsRUFBRSxJQUFJLENBQUMsV0FBVyxFQUFFLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQztRQUMvRCxJQUFJLENBQUMsU0FBUyxHQUFHLFlBQVksUUFBUSxFQUFFLENBQUM7UUFDeEMsSUFBSSxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUM7UUFDekIsSUFBSSxDQUFDLFFBQVEsR0FBRyw2QkFBNkIsaUJBQWlCLENBQUMsUUFBUSxDQUFDLEdBQUcsQ0FBQztJQUM5RSxDQUFDO0lBRUQsV0FBVztRQUNULElBQUksWUFBWSxDQUFDO1FBQ2pCLElBQUksSUFBSSxDQUFDLFFBQVEsR0FBRyxDQUFDLEVBQUU7WUFDckIsWUFBWSxHQUFHLHFCQUFxQixDQUFDO1NBQ3RDO2FBQU07WUFDTCxZQUFZLEdBQUcsa0JBQWtCLENBQUM7U0FDbkM7UUFDRCxNQUFNLFFBQVEsR0FBRztRQUNiLElBQUksQ0FBQyxPQUFPLENBQUM7Ozs7Ozs4QkFNUyxZQUFZOzs7Ozs7O09BT25DLENBQUM7UUFDSixPQUFPLFFBQVEsQ0FBQztJQUNsQixDQUFDO0NBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7Z2V0Q29vcmRzRGF0YVR5cGUsIGdldE1haW5IZWFkZXJTdHJpbmcgYXMgbWFpbiwgV2ViR1BVUHJvZ3JhbX0gZnJvbSAnLi93ZWJncHVfcHJvZ3JhbSc7XG5pbXBvcnQge2NvbXB1dGVEaXNwYXRjaCwgZmxhdERpc3BhdGNoTGF5b3V0fSBmcm9tICcuL3dlYmdwdV91dGlsJztcblxuZXhwb3J0IGNsYXNzIEdhdGhlck5EUHJvZ3JhbSBpbXBsZW1lbnRzIFdlYkdQVVByb2dyYW0ge1xuICBvdXRwdXRTaGFwZTogbnVtYmVyW107XG4gIHNoYWRlcktleTogc3RyaW5nO1xuICBkaXNwYXRjaExheW91dDoge3g6IG51bWJlcltdfTtcbiAgZGlzcGF0Y2g6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXTtcbiAgdmFyaWFibGVOYW1lczogc3RyaW5nW10gPSBbJ0EnLCAnaW5kaWNlcyddO1xuICB1bmlmb3Jtczogc3RyaW5nO1xuICB3b3JrZ3JvdXBTaXplOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl0gPSBbNjQsIDEsIDFdO1xuICBzaXplID0gdHJ1ZTtcbiAgc2xpY2VEaW06IG51bWJlcjtcbiAgY29uc3RydWN0b3Ioc2xpY2VEaW06IG51bWJlciwgc2hhcGU6IG51bWJlcltdKSB7XG4gICAgdGhpcy5vdXRwdXRTaGFwZSA9IHNoYXBlO1xuICAgIHRoaXMuZGlzcGF0Y2hMYXlvdXQgPSBmbGF0RGlzcGF0Y2hMYXlvdXQodGhpcy5vdXRwdXRTaGFwZSk7XG4gICAgdGhpcy5kaXNwYXRjaCA9IGNvbXB1dGVEaXNwYXRjaChcbiAgICAgICAgdGhpcy5kaXNwYXRjaExheW91dCwgdGhpcy5vdXRwdXRTaGFwZSwgdGhpcy53b3JrZ3JvdXBTaXplKTtcbiAgICB0aGlzLnNoYWRlcktleSA9IGBnYXRoZXJuZF8ke3NsaWNlRGltfWA7XG4gICAgdGhpcy5zbGljZURpbSA9IHNsaWNlRGltO1xuICAgIHRoaXMudW5pZm9ybXMgPSBgc2xpY2VEaW0gOiBpMzIsIHN0cmlkZXMgOiAke2dldENvb3Jkc0RhdGFUeXBlKHNsaWNlRGltKX0sYDtcbiAgfVxuXG4gIGdldFVzZXJDb2RlKCk6IHN0cmluZyB7XG4gICAgbGV0IHN0cmlkZVN0cmluZztcbiAgICBpZiAodGhpcy5zbGljZURpbSA+IDEpIHtcbiAgICAgIHN0cmlkZVN0cmluZyA9ICd1bmlmb3Jtcy5zdHJpZGVzW2pdJztcbiAgICB9IGVsc2Uge1xuICAgICAgc3RyaWRlU3RyaW5nID0gJ3VuaWZvcm1zLnN0cmlkZXMnO1xuICAgIH1cbiAgICBjb25zdCB1c2VyQ29kZSA9IGBcbiAgICAgICR7bWFpbignaW5kZXgnKX0ge1xuICAgICAgICBpZiAoaW5kZXggPCB1bmlmb3Jtcy5zaXplKSB7XG4gICAgICAgICAgbGV0IGNvb3JkcyA9IGdldENvb3Jkc0Zyb21JbmRleChpbmRleCk7XG4gICAgICAgICAgdmFyIGZsYXR0ZW5JbmRleCA9IDA7XG4gICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB1bmlmb3Jtcy5zbGljZURpbTsgaiA9IGogKyAxKSB7XG4gICAgICAgICAgICBsZXQgaW5kZXhUZW1wID0gaTMyKHJvdW5kKGdldEluZGljZXMoY29vcmRzWzBdLCBqKSkpO1xuICAgICAgICAgICAgbGV0IHN0cmlkZU51bSA9ICR7c3RyaWRlU3RyaW5nfTtcbiAgICAgICAgICAgIGZsYXR0ZW5JbmRleCA9IGZsYXR0ZW5JbmRleCArIGluZGV4VGVtcCAqIHN0cmlkZU51bTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzZXRPdXRwdXRBdEluZGV4KGluZGV4LCBnZXRBKGZsYXR0ZW5JbmRleCwgY29vcmRzWzFdKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGA7XG4gICAgcmV0dXJuIHVzZXJDb2RlO1xuICB9XG59XG4iXX0=","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { backend_util, GatherNd, util } from '@tensorflow/tfjs-core';\nimport { GatherNDProgram } from '../gather_nd_webgpu';\nimport { gatherNdImplCPU } from '../kernel_utils/shared';\nimport { reshape } from './Reshape';\nexport function gatherNd(args) {\n    const { inputs, backend } = args;\n    const { params, indices } = inputs;\n    const indicesShape = indices.shape;\n    const sliceRank = indicesShape[indicesShape.length - 1];\n    const paramsSize = util.sizeFromShape(params.shape);\n    const [resultShape, numSlices, sliceSize, strides] = backend_util.prepareAndValidate(params, indices);\n    const flattenIndices = reshape({ inputs: { x: indices }, backend, attrs: { shape: [numSlices, sliceRank] } });\n    const flattenX = reshape({\n        inputs: { x: params },\n        backend,\n        attrs: { shape: [(util.sizeFromShape(params.shape) / sliceSize), sliceSize] }\n    });\n    if (backend.shouldExecuteOnCPU([params, indices]) ||\n        params.dtype === 'string') {\n        const indicesData = backend.readSync(indices.dataId);\n        const paramsBuf = backend.bufferSync(params);\n        const outValue = gatherNdImplCPU(indicesData, paramsBuf, params.dtype, numSlices, sliceRank, sliceSize, strides, params.shape, paramsSize);\n        return backend.makeTensorInfo(resultShape, params.dtype, outValue.values);\n    }\n    const program = new GatherNDProgram(sliceRank, [numSlices, sliceSize]);\n    const uniformData = [{ type: 'int32', data: [sliceRank] }, { type: 'int32', data: strides }];\n    const res = backend.runWebGPUProgram(program, [flattenX, flattenIndices], flattenX.dtype, uniformData);\n    const reshaped = reshape({ inputs: { x: res }, backend, attrs: { shape: resultShape } });\n    backend.disposeData(flattenIndices.dataId);\n    backend.disposeData(flattenX.dataId);\n    backend.disposeData(res.dataId);\n    return reshaped;\n}\nexport const gatherNdConfig = {\n    kernelName: GatherNd,\n    backendName: 'webgpu',\n    kernelFunc: gatherNd\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiR2F0aGVyTmQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9rZXJuZWxzL0dhdGhlck5kLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sRUFBQyxZQUFZLEVBQUUsUUFBUSxFQUEwRSxJQUFJLEVBQUMsTUFBTSx1QkFBdUIsQ0FBQztBQUczSSxPQUFPLEVBQUMsZUFBZSxFQUFDLE1BQU0scUJBQXFCLENBQUM7QUFDcEQsT0FBTyxFQUFDLGVBQWUsRUFBQyxNQUFNLHdCQUF3QixDQUFDO0FBRXZELE9BQU8sRUFBQyxPQUFPLEVBQUMsTUFBTSxXQUFXLENBQUM7QUFFbEMsTUFBTSxVQUFVLFFBQVEsQ0FDcEIsSUFBc0Q7SUFDeEQsTUFBTSxFQUFDLE1BQU0sRUFBRSxPQUFPLEVBQUMsR0FBRyxJQUFJLENBQUM7SUFDL0IsTUFBTSxFQUFDLE1BQU0sRUFBRSxPQUFPLEVBQUMsR0FBRyxNQUFNLENBQUM7SUFFakMsTUFBTSxZQUFZLEdBQUcsT0FBTyxDQUFDLEtBQUssQ0FBQztJQUNuQyxNQUFNLFNBQVMsR0FBRyxZQUFZLENBQUMsWUFBWSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQztJQUN4RCxNQUFNLFVBQVUsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUVwRCxNQUFNLENBQUMsV0FBVyxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsT0FBTyxDQUFDLEdBQzlDLFlBQVksQ0FBQyxrQkFBa0IsQ0FBQyxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFFckQsTUFBTSxjQUFjLEdBQUcsT0FBTyxDQUMxQixFQUFDLE1BQU0sRUFBRSxFQUFDLENBQUMsRUFBRSxPQUFPLEVBQUMsRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLEVBQUMsS0FBSyxFQUFFLENBQUMsU0FBUyxFQUFFLFNBQVMsQ0FBQyxFQUFDLEVBQUMsQ0FBQyxDQUFDO0lBQzdFLE1BQU0sUUFBUSxHQUFHLE9BQU8sQ0FBQztRQUN2QixNQUFNLEVBQUUsRUFBQyxDQUFDLEVBQUUsTUFBTSxFQUFDO1FBQ25CLE9BQU87UUFDUCxLQUFLLEVBQUUsRUFBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxHQUFHLFNBQVMsQ0FBQyxFQUFFLFNBQVMsQ0FBQyxFQUFDO0tBQzVFLENBQUMsQ0FBQztJQUNILElBQUksT0FBTyxDQUFDLGtCQUFrQixDQUFDLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQzdDLE1BQU0sQ0FBQyxLQUFLLEtBQUssUUFBUSxFQUFFO1FBQzdCLE1BQU0sV0FBVyxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBZSxDQUFDO1FBQ25FLE1BQU0sU0FBUyxHQUFHLE9BQU8sQ0FBQyxVQUFVLENBQWtCLE1BQU0sQ0FBQyxDQUFDO1FBQzlELE1BQU0sUUFBUSxHQUFHLGVBQWUsQ0FDNUIsV0FBVyxFQUFFLFNBQVMsRUFBRSxNQUFNLENBQUMsS0FBSyxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUNyRSxPQUFPLEVBQUUsTUFBTSxDQUFDLEtBQUssRUFBRSxVQUFVLENBQUMsQ0FBQztRQUV2QyxPQUFPLE9BQU8sQ0FBQyxjQUFjLENBQUMsV0FBVyxFQUFFLE1BQU0sQ0FBQyxLQUFLLEVBQUUsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0tBQzNFO0lBQ0QsTUFBTSxPQUFPLEdBQUcsSUFBSSxlQUFlLENBQUMsU0FBUyxFQUFFLENBQUMsU0FBUyxFQUFFLFNBQVMsQ0FBQyxDQUFDLENBQUM7SUFDdkUsTUFBTSxXQUFXLEdBQ2IsQ0FBQyxFQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLENBQUMsU0FBUyxDQUFDLEVBQUMsRUFBRSxFQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBQyxDQUFDLENBQUM7SUFDekUsTUFBTSxHQUFHLEdBQUcsT0FBTyxDQUFDLGdCQUFnQixDQUNoQyxPQUFPLEVBQUUsQ0FBQyxRQUFRLEVBQUUsY0FBYyxDQUFDLEVBQUUsUUFBUSxDQUFDLEtBQUssRUFBRSxXQUFXLENBQUMsQ0FBQztJQUV0RSxNQUFNLFFBQVEsR0FDVixPQUFPLENBQUMsRUFBQyxNQUFNLEVBQUUsRUFBQyxDQUFDLEVBQUUsR0FBRyxFQUFDLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxFQUFDLEtBQUssRUFBRSxXQUFXLEVBQUMsRUFBQyxDQUFDLENBQUM7SUFFdEUsT0FBTyxDQUFDLFdBQVcsQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDM0MsT0FBTyxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDckMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUM7SUFFaEMsT0FBTyxRQUFRLENBQUM7QUFDbEIsQ0FBQztBQUVELE1BQU0sQ0FBQyxNQUFNLGNBQWMsR0FBaUI7SUFDMUMsVUFBVSxFQUFFLFFBQVE7SUFDcEIsV0FBVyxFQUFFLFFBQVE7SUFDckIsVUFBVSxFQUFFLFFBQWlDO0NBQzlDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7YmFja2VuZF91dGlsLCBHYXRoZXJOZCwgR2F0aGVyTmRJbnB1dHMsIEtlcm5lbENvbmZpZywgS2VybmVsRnVuYywgUmFuaywgVGVuc29ySW5mbywgVHlwZWRBcnJheSwgdXRpbH0gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcblxuaW1wb3J0IHtXZWJHUFVCYWNrZW5kfSBmcm9tICcuLi9iYWNrZW5kX3dlYmdwdSc7XG5pbXBvcnQge0dhdGhlck5EUHJvZ3JhbX0gZnJvbSAnLi4vZ2F0aGVyX25kX3dlYmdwdSc7XG5pbXBvcnQge2dhdGhlck5kSW1wbENQVX0gZnJvbSAnLi4va2VybmVsX3V0aWxzL3NoYXJlZCc7XG5cbmltcG9ydCB7cmVzaGFwZX0gZnJvbSAnLi9SZXNoYXBlJztcblxuZXhwb3J0IGZ1bmN0aW9uIGdhdGhlck5kKFxuICAgIGFyZ3M6IHtpbnB1dHM6IEdhdGhlck5kSW5wdXRzLCBiYWNrZW5kOiBXZWJHUFVCYWNrZW5kfSk6IFRlbnNvckluZm8ge1xuICBjb25zdCB7aW5wdXRzLCBiYWNrZW5kfSA9IGFyZ3M7XG4gIGNvbnN0IHtwYXJhbXMsIGluZGljZXN9ID0gaW5wdXRzO1xuXG4gIGNvbnN0IGluZGljZXNTaGFwZSA9IGluZGljZXMuc2hhcGU7XG4gIGNvbnN0IHNsaWNlUmFuayA9IGluZGljZXNTaGFwZVtpbmRpY2VzU2hhcGUubGVuZ3RoIC0gMV07XG4gIGNvbnN0IHBhcmFtc1NpemUgPSB1dGlsLnNpemVGcm9tU2hhcGUocGFyYW1zLnNoYXBlKTtcblxuICBjb25zdCBbcmVzdWx0U2hhcGUsIG51bVNsaWNlcywgc2xpY2VTaXplLCBzdHJpZGVzXSA9XG4gICAgICBiYWNrZW5kX3V0aWwucHJlcGFyZUFuZFZhbGlkYXRlKHBhcmFtcywgaW5kaWNlcyk7XG5cbiAgY29uc3QgZmxhdHRlbkluZGljZXMgPSByZXNoYXBlKFxuICAgICAge2lucHV0czoge3g6IGluZGljZXN9LCBiYWNrZW5kLCBhdHRyczoge3NoYXBlOiBbbnVtU2xpY2VzLCBzbGljZVJhbmtdfX0pO1xuICBjb25zdCBmbGF0dGVuWCA9IHJlc2hhcGUoe1xuICAgIGlucHV0czoge3g6IHBhcmFtc30sXG4gICAgYmFja2VuZCxcbiAgICBhdHRyczoge3NoYXBlOiBbKHV0aWwuc2l6ZUZyb21TaGFwZShwYXJhbXMuc2hhcGUpIC8gc2xpY2VTaXplKSwgc2xpY2VTaXplXX1cbiAgfSk7XG4gIGlmIChiYWNrZW5kLnNob3VsZEV4ZWN1dGVPbkNQVShbcGFyYW1zLCBpbmRpY2VzXSkgfHxcbiAgICAgIHBhcmFtcy5kdHlwZSA9PT0gJ3N0cmluZycpIHtcbiAgICBjb25zdCBpbmRpY2VzRGF0YSA9IGJhY2tlbmQucmVhZFN5bmMoaW5kaWNlcy5kYXRhSWQpIGFzIFR5cGVkQXJyYXk7XG4gICAgY29uc3QgcGFyYW1zQnVmID0gYmFja2VuZC5idWZmZXJTeW5jPFJhbmssICdmbG9hdDMyJz4ocGFyYW1zKTtcbiAgICBjb25zdCBvdXRWYWx1ZSA9IGdhdGhlck5kSW1wbENQVShcbiAgICAgICAgaW5kaWNlc0RhdGEsIHBhcmFtc0J1ZiwgcGFyYW1zLmR0eXBlLCBudW1TbGljZXMsIHNsaWNlUmFuaywgc2xpY2VTaXplLFxuICAgICAgICBzdHJpZGVzLCBwYXJhbXMuc2hhcGUsIHBhcmFtc1NpemUpO1xuXG4gICAgcmV0dXJuIGJhY2tlbmQubWFrZVRlbnNvckluZm8ocmVzdWx0U2hhcGUsIHBhcmFtcy5kdHlwZSwgb3V0VmFsdWUudmFsdWVzKTtcbiAgfVxuICBjb25zdCBwcm9ncmFtID0gbmV3IEdhdGhlck5EUHJvZ3JhbShzbGljZVJhbmssIFtudW1TbGljZXMsIHNsaWNlU2l6ZV0pO1xuICBjb25zdCB1bmlmb3JtRGF0YSA9XG4gICAgICBbe3R5cGU6ICdpbnQzMicsIGRhdGE6IFtzbGljZVJhbmtdfSwge3R5cGU6ICdpbnQzMicsIGRhdGE6IHN0cmlkZXN9XTtcbiAgY29uc3QgcmVzID0gYmFja2VuZC5ydW5XZWJHUFVQcm9ncmFtKFxuICAgICAgcHJvZ3JhbSwgW2ZsYXR0ZW5YLCBmbGF0dGVuSW5kaWNlc10sIGZsYXR0ZW5YLmR0eXBlLCB1bmlmb3JtRGF0YSk7XG5cbiAgY29uc3QgcmVzaGFwZWQgPVxuICAgICAgcmVzaGFwZSh7aW5wdXRzOiB7eDogcmVzfSwgYmFja2VuZCwgYXR0cnM6IHtzaGFwZTogcmVzdWx0U2hhcGV9fSk7XG5cbiAgYmFja2VuZC5kaXNwb3NlRGF0YShmbGF0dGVuSW5kaWNlcy5kYXRhSWQpO1xuICBiYWNrZW5kLmRpc3Bvc2VEYXRhKGZsYXR0ZW5YLmRhdGFJZCk7XG4gIGJhY2tlbmQuZGlzcG9zZURhdGEocmVzLmRhdGFJZCk7XG5cbiAgcmV0dXJuIHJlc2hhcGVkO1xufVxuXG5leHBvcnQgY29uc3QgZ2F0aGVyTmRDb25maWc6IEtlcm5lbENvbmZpZyA9IHtcbiAga2VybmVsTmFtZTogR2F0aGVyTmQsXG4gIGJhY2tlbmROYW1lOiAnd2ViZ3B1JyxcbiAga2VybmVsRnVuYzogZ2F0aGVyTmQgYXMgdW5rbm93biBhcyBLZXJuZWxGdW5jXG59O1xuIl19","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { getMainHeaderString as main } from './webgpu_program';\nimport { computeDispatch, flatDispatchLayout } from './webgpu_util';\nexport class GatherProgram {\n    constructor(aShape, outputShape) {\n        this.variableNames = ['A', 'indices'];\n        this.workgroupSize = [64, 1, 1];\n        this.size = true;\n        this.outputShape = aShape.slice();\n        this.aShape = aShape;\n        this.outputShape = outputShape;\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize);\n        this.shaderKey = `gather`;\n    }\n    getUserCode() {\n        const sourceCoords = getSourceCoords(this.aShape);\n        const userCode = `\n      ${main('index')} {\n        if (index < uniforms.size) {\n          let resRC = getCoordsFromIndex(index);\n          let indexZ = i32(getIndices(resRC.x, resRC.z));\n          let inBounds = select(0.0, 1.0, indexZ >= 0 && indexZ < uniforms.aShape[2]);\n          setOutputAtIndex(index, inBounds * getA(${sourceCoords}));\n        }\n      }\n    `;\n        return userCode;\n    }\n}\n// The input and output are always flattened into rank 4 tensors.\nfunction getSourceCoords(aShape) {\n    const currentCoords = ['resRC.x', 'resRC.y', 'resRC.z', 'resRC.w'];\n    const sourceCoords = [];\n    for (let i = 0; i < aShape.length; i++) {\n        if (i === 2) {\n            sourceCoords.push('indexZ');\n        }\n        else {\n            sourceCoords.push(`${currentCoords[i]}`);\n        }\n    }\n    return sourceCoords.join();\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2F0aGVyX3dlYmdwdS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2dhdGhlcl93ZWJncHUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUFDLG1CQUFtQixJQUFJLElBQUksRUFBZ0IsTUFBTSxrQkFBa0IsQ0FBQztBQUM1RSxPQUFPLEVBQUMsZUFBZSxFQUFFLGtCQUFrQixFQUFDLE1BQU0sZUFBZSxDQUFDO0FBRWxFLE1BQU0sT0FBTyxhQUFhO0lBVXhCLFlBQVksTUFBZ0IsRUFBRSxXQUFxQjtRQUxuRCxrQkFBYSxHQUFhLENBQUMsR0FBRyxFQUFFLFNBQVMsQ0FBQyxDQUFDO1FBQzNDLGtCQUFhLEdBQTZCLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUVyRCxTQUFJLEdBQUcsSUFBSSxDQUFDO1FBR1YsSUFBSSxDQUFDLFdBQVcsR0FBRyxNQUFNLENBQUMsS0FBSyxFQUFFLENBQUM7UUFDbEMsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7UUFDckIsSUFBSSxDQUFDLFdBQVcsR0FBRyxXQUFXLENBQUM7UUFDL0IsSUFBSSxDQUFDLGNBQWMsR0FBRyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDM0QsSUFBSSxDQUFDLFFBQVEsR0FBRyxlQUFlLENBQzNCLElBQUksQ0FBQyxjQUFjLEVBQUUsSUFBSSxDQUFDLFdBQVcsRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7UUFDL0QsSUFBSSxDQUFDLFNBQVMsR0FBRyxRQUFRLENBQUM7SUFDNUIsQ0FBQztJQUVELFdBQVc7UUFDVCxNQUFNLFlBQVksR0FBRyxlQUFlLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ2xELE1BQU0sUUFBUSxHQUFHO1FBQ2IsSUFBSSxDQUFDLE9BQU8sQ0FBQzs7Ozs7b0RBSytCLFlBQVk7OztLQUczRCxDQUFDO1FBQ0YsT0FBTyxRQUFRLENBQUM7SUFDbEIsQ0FBQztDQUNGO0FBRUQsaUVBQWlFO0FBQ2pFLFNBQVMsZUFBZSxDQUFDLE1BQWdCO0lBQ3ZDLE1BQU0sYUFBYSxHQUFHLENBQUMsU0FBUyxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsU0FBUyxDQUFDLENBQUM7SUFDbkUsTUFBTSxZQUFZLEdBQUcsRUFBRSxDQUFDO0lBQ3hCLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxNQUFNLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO1FBQ3RDLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRTtZQUNYLFlBQVksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7U0FDN0I7YUFBTTtZQUNMLFlBQVksQ0FBQyxJQUFJLENBQUMsR0FBRyxhQUFhLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1NBQzFDO0tBQ0Y7SUFDRCxPQUFPLFlBQVksQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUM3QixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge2dldE1haW5IZWFkZXJTdHJpbmcgYXMgbWFpbiwgV2ViR1BVUHJvZ3JhbX0gZnJvbSAnLi93ZWJncHVfcHJvZ3JhbSc7XG5pbXBvcnQge2NvbXB1dGVEaXNwYXRjaCwgZmxhdERpc3BhdGNoTGF5b3V0fSBmcm9tICcuL3dlYmdwdV91dGlsJztcblxuZXhwb3J0IGNsYXNzIEdhdGhlclByb2dyYW0gaW1wbGVtZW50cyBXZWJHUFVQcm9ncmFtIHtcbiAgb3V0cHV0U2hhcGU6IG51bWJlcltdO1xuICBzaGFkZXJLZXk6IHN0cmluZztcbiAgZGlzcGF0Y2hMYXlvdXQ6IHt4OiBudW1iZXJbXX07XG4gIGRpc3BhdGNoOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl07XG4gIHZhcmlhYmxlTmFtZXM6IHN0cmluZ1tdID0gWydBJywgJ2luZGljZXMnXTtcbiAgd29ya2dyb3VwU2l6ZTogW251bWJlciwgbnVtYmVyLCBudW1iZXJdID0gWzY0LCAxLCAxXTtcbiAgYVNoYXBlOiBudW1iZXJbXTtcbiAgc2l6ZSA9IHRydWU7XG5cbiAgY29uc3RydWN0b3IoYVNoYXBlOiBudW1iZXJbXSwgb3V0cHV0U2hhcGU6IG51bWJlcltdKSB7XG4gICAgdGhpcy5vdXRwdXRTaGFwZSA9IGFTaGFwZS5zbGljZSgpO1xuICAgIHRoaXMuYVNoYXBlID0gYVNoYXBlO1xuICAgIHRoaXMub3V0cHV0U2hhcGUgPSBvdXRwdXRTaGFwZTtcbiAgICB0aGlzLmRpc3BhdGNoTGF5b3V0ID0gZmxhdERpc3BhdGNoTGF5b3V0KHRoaXMub3V0cHV0U2hhcGUpO1xuICAgIHRoaXMuZGlzcGF0Y2ggPSBjb21wdXRlRGlzcGF0Y2goXG4gICAgICAgIHRoaXMuZGlzcGF0Y2hMYXlvdXQsIHRoaXMub3V0cHV0U2hhcGUsIHRoaXMud29ya2dyb3VwU2l6ZSk7XG4gICAgdGhpcy5zaGFkZXJLZXkgPSBgZ2F0aGVyYDtcbiAgfVxuXG4gIGdldFVzZXJDb2RlKCk6IHN0cmluZyB7XG4gICAgY29uc3Qgc291cmNlQ29vcmRzID0gZ2V0U291cmNlQ29vcmRzKHRoaXMuYVNoYXBlKTtcbiAgICBjb25zdCB1c2VyQ29kZSA9IGBcbiAgICAgICR7bWFpbignaW5kZXgnKX0ge1xuICAgICAgICBpZiAoaW5kZXggPCB1bmlmb3Jtcy5zaXplKSB7XG4gICAgICAgICAgbGV0IHJlc1JDID0gZ2V0Q29vcmRzRnJvbUluZGV4KGluZGV4KTtcbiAgICAgICAgICBsZXQgaW5kZXhaID0gaTMyKGdldEluZGljZXMocmVzUkMueCwgcmVzUkMueikpO1xuICAgICAgICAgIGxldCBpbkJvdW5kcyA9IHNlbGVjdCgwLjAsIDEuMCwgaW5kZXhaID49IDAgJiYgaW5kZXhaIDwgdW5pZm9ybXMuYVNoYXBlWzJdKTtcbiAgICAgICAgICBzZXRPdXRwdXRBdEluZGV4KGluZGV4LCBpbkJvdW5kcyAqIGdldEEoJHtzb3VyY2VDb29yZHN9KSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICBgO1xuICAgIHJldHVybiB1c2VyQ29kZTtcbiAgfVxufVxuXG4vLyBUaGUgaW5wdXQgYW5kIG91dHB1dCBhcmUgYWx3YXlzIGZsYXR0ZW5lZCBpbnRvIHJhbmsgNCB0ZW5zb3JzLlxuZnVuY3Rpb24gZ2V0U291cmNlQ29vcmRzKGFTaGFwZTogbnVtYmVyW10pOiBzdHJpbmcge1xuICBjb25zdCBjdXJyZW50Q29vcmRzID0gWydyZXNSQy54JywgJ3Jlc1JDLnknLCAncmVzUkMueicsICdyZXNSQy53J107XG4gIGNvbnN0IHNvdXJjZUNvb3JkcyA9IFtdO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGFTaGFwZS5sZW5ndGg7IGkrKykge1xuICAgIGlmIChpID09PSAyKSB7XG4gICAgICBzb3VyY2VDb29yZHMucHVzaCgnaW5kZXhaJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNvdXJjZUNvb3Jkcy5wdXNoKGAke2N1cnJlbnRDb29yZHNbaV19YCk7XG4gICAgfVxuICB9XG4gIHJldHVybiBzb3VyY2VDb29yZHMuam9pbigpO1xufVxuIl19","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { backend_util, buffer, GatherV2, util } from '@tensorflow/tfjs-core';\nimport { GatherProgram } from '../gather_webgpu';\nimport { gatherV2ImplCPU } from '../kernel_utils/shared';\nimport { reshape } from './Reshape';\nexport function gatherV2(args) {\n    const { inputs, backend, attrs } = args;\n    const { x, indices } = inputs;\n    const { axis, batchDims } = attrs;\n    // Unlike WebGL, WebGPU won't check if index is out of bound by calling\n    // backend.readSync() function in debug mode.\n    const parsedAxis = util.parseAxisParam(axis, x.shape)[0];\n    const shapeInfo = backend_util.segment_util.collectGatherOpShapeInfo(x, indices, parsedAxis, batchDims);\n    const indicesSize = util.sizeFromShape(indices.shape);\n    const toDispose = [];\n    const flattenX = reshape({\n        inputs: { x },\n        backend,\n        attrs: {\n            shape: [\n                shapeInfo.batchSize, shapeInfo.outerSize, shapeInfo.dimSize,\n                shapeInfo.sliceSize\n            ]\n        }\n    });\n    const flattenIndex = reshape({\n        inputs: { x: indices },\n        backend,\n        attrs: { shape: [shapeInfo.batchSize, indicesSize / shapeInfo.batchSize] }\n    });\n    toDispose.push(flattenX);\n    toDispose.push(flattenIndex);\n    const flattenOutputShape = [\n        shapeInfo.batchSize, shapeInfo.outerSize, indicesSize / shapeInfo.batchSize,\n        shapeInfo.sliceSize\n    ];\n    if (backend.shouldExecuteOnCPU([x, indices])) {\n        const indicesTensorData = backend.tensorMap.get(flattenIndex.dataId);\n        const indicesValues = indicesTensorData.values;\n        const indicesBuffer = buffer(flattenIndex.shape, flattenIndex.dtype, indicesValues);\n        const flattenXTensorData = backend.tensorMap.get(flattenX.dataId);\n        const xValues = flattenXTensorData.values;\n        const xBuffer = buffer(flattenX.shape, flattenX.dtype, xValues);\n        const outBuf = gatherV2ImplCPU(xBuffer, indicesBuffer, flattenOutputShape);\n        toDispose.forEach(t => backend.disposeData(t.dataId));\n        return backend.makeTensorInfo(shapeInfo.outputShape, outBuf.dtype, outBuf.values);\n    }\n    const program = new GatherProgram(flattenX.shape, flattenOutputShape);\n    const res = backend.runWebGPUProgram(program, [flattenX, flattenIndex], flattenX.dtype);\n    toDispose.push(res);\n    const reshaped = reshape({ inputs: { x: res }, backend, attrs: { shape: shapeInfo.outputShape } });\n    toDispose.forEach(t => backend.disposeData(t.dataId));\n    return reshaped;\n}\nexport const gatherV2Config = {\n    kernelName: GatherV2,\n    backendName: 'webgpu',\n    kernelFunc: gatherV2\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiR2F0aGVyVjIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9rZXJuZWxzL0dhdGhlclYyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sRUFBQyxZQUFZLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBdUcsSUFBSSxFQUFDLE1BQU0sdUJBQXVCLENBQUM7QUFHaEwsT0FBTyxFQUFDLGFBQWEsRUFBQyxNQUFNLGtCQUFrQixDQUFDO0FBQy9DLE9BQU8sRUFBQyxlQUFlLEVBQUMsTUFBTSx3QkFBd0IsQ0FBQztBQUV2RCxPQUFPLEVBQUMsT0FBTyxFQUFDLE1BQU0sV0FBVyxDQUFDO0FBRWxDLE1BQU0sVUFBVSxRQUFRLENBQ3BCLElBQzBFO0lBRTVFLE1BQU0sRUFBQyxNQUFNLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBQyxHQUFHLElBQUksQ0FBQztJQUN0QyxNQUFNLEVBQUMsQ0FBQyxFQUFFLE9BQU8sRUFBQyxHQUFHLE1BQU0sQ0FBQztJQUM1QixNQUFNLEVBQUMsSUFBSSxFQUFFLFNBQVMsRUFBQyxHQUFHLEtBQUssQ0FBQztJQUVoQyx1RUFBdUU7SUFDdkUsNkNBQTZDO0lBQzdDLE1BQU0sVUFBVSxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUV6RCxNQUFNLFNBQVMsR0FBRyxZQUFZLENBQUMsWUFBWSxDQUFDLHdCQUF3QixDQUNoRSxDQUFDLEVBQUUsT0FBTyxFQUFFLFVBQVUsRUFBRSxTQUFTLENBQUMsQ0FBQztJQUV2QyxNQUFNLFdBQVcsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUV0RCxNQUFNLFNBQVMsR0FBRyxFQUFFLENBQUM7SUFFckIsTUFBTSxRQUFRLEdB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LENBQUM7SUFDdEQsT0FBTyxRQUFRLENBQUM7QUFDbEIsQ0FBQztBQUVELE1BQU0sQ0FBQyxNQUFNLGNBQWMsR0FBaUI7SUFDMUMsVUFBVSxFQUFFLFFBQVE7SUFDcEIsV0FBVyxFQUFFLFFBQVE7SUFDckIsVUFBVSxFQUFFLFFBQWlDO0NBQzlDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7YmFja2VuZF91dGlsLCBidWZmZXIsIEdhdGhlclYyLCBHYXRoZXJWMkF0dHJzLCBHYXRoZXJWMklucHV0cywgS2VybmVsQ29uZmlnLCBLZXJuZWxGdW5jLCBSYW5rLCBUZW5zb3JCdWZmZXIsIFRlbnNvckluZm8sIFR5cGVkQXJyYXksIHV0aWx9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7V2ViR1BVQmFja2VuZH0gZnJvbSAnLi4vYmFja2VuZF93ZWJncHUnO1xuaW1wb3J0IHtHYXRoZXJQcm9ncmFtfSBmcm9tICcuLi9nYXRoZXJfd2ViZ3B1JztcbmltcG9ydCB7Z2F0aGVyVjJJbXBsQ1BVfSBmcm9tICcuLi9rZXJuZWxfdXRpbHMvc2hhcmVkJztcblxuaW1wb3J0IHtyZXNoYXBlfSBmcm9tICcuL1Jlc2hhcGUnO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2F0aGVyVjIoXG4gICAgYXJnczpcbiAgICAgICAge2lucHV0czogR2F0aGVyVjJJbnB1dHMsIGJhY2tlbmQ6IFdlYkdQVUJhY2tlbmQsIGF0dHJzOiBHYXRoZXJWMkF0dHJzfSk6XG4gICAgVGVuc29ySW5mbyB7XG4gIGNvbnN0IHtpbnB1dHMsIGJhY2tlbmQsIGF0dHJzfSA9IGFyZ3M7XG4gIGNvbnN0IHt4LCBpbmRpY2VzfSA9IGlucHV0cztcbiAgY29uc3Qge2F4aXMsIGJhdGNoRGltc30gPSBhdHRycztcblxuICAvLyBVbmxpa2UgV2ViR0wsIFdlYkdQVSB3b24ndCBjaGVjayBpZiBpbmRleCBpcyBvdXQgb2YgYm91bmQgYnkgY2FsbGluZ1xuICAvLyBiYWNrZW5kLnJlYWRTeW5jKCkgZnVuY3Rpb24gaW4gZGVidWcgbW9kZS5cbiAgY29uc3QgcGFyc2VkQXhpcyA9IHV0aWwucGFyc2VBeGlzUGFyYW0oYXhpcywgeC5zaGFwZSlbMF07XG5cbiAgY29uc3Qgc2hhcGVJbmZvID0gYmFja2VuZF91dGlsLnNlZ21lbnRfdXRpbC5jb2xsZWN0R2F0aGVyT3BTaGFwZUluZm8oXG4gICAgICB4LCBpbmRpY2VzLCBwYXJzZWRBeGlzLCBiYXRjaERpbXMpO1xuXG4gIGNvbnN0IGluZGljZXNTaXplID0gdXRpbC5zaXplRnJvbVNoYXBlKGluZGljZXMuc2hhcGUpO1xuXG4gIGNvbnN0IHRvRGlzcG9zZSA9IFtdO1xuXG4gIGNvbnN0IGZsYXR0ZW5YID0gcmVzaGFwZSh7XG4gICAgaW5wdXRzOiB7eH0sXG4gICAgYmFja2VuZCxcbiAgICBhdHRyczoge1xuICAgICAgc2hhcGU6IFtcbiAgICAgICAgc2hhcGVJbmZvLmJhdGNoU2l6ZSwgc2hhcGVJbmZvLm91dGVyU2l6ZSwgc2hhcGVJbmZvLmRpbVNpemUsXG4gICAgICAgIHNoYXBlSW5mby5zbGljZVNpemVcbiAgICAgIF1cbiAgICB9XG4gIH0pO1xuXG4gIGNvbnN0IGZsYXR0ZW5JbmRleCA9IHJlc2hhcGUoe1xuICAgIGlucHV0czoge3g6IGluZGljZXN9LFxuICAgIGJhY2tlbmQsXG4gICAgYXR0cnM6IHtzaGFwZTogW3NoYXBlSW5mby5iYXRjaFNpemUsIGluZGljZXNTaXplIC8gc2hhcGVJbmZvLmJhdGNoU2l6ZV19XG4gIH0pO1xuXG4gIHRvRGlzcG9zZS5wdXNoKGZsYXR0ZW5YKTtcbiAgdG9EaXNwb3NlLnB1c2goZmxhdHRlbkluZGV4KTtcblxuICBjb25zdCBmbGF0dGVuT3V0cHV0U2hhcGUgPSBbXG4gICAgc2hhcGVJbmZvLmJhdGNoU2l6ZSwgc2hhcGVJbmZvLm91dGVyU2l6ZSwgaW5kaWNlc1NpemUgLyBzaGFwZUluZm8uYmF0Y2hTaXplLFxuICAgIHNoYXBlSW5mby5zbGljZVNpemVcbiAgXTtcblxuICBpZiAoYmFja2VuZC5zaG91bGRFeGVjdXRlT25DUFUoW3gsIGluZGljZXNdKSkge1xuICAgIGNvbnN0IGluZGljZXNUZW5zb3JEYXRhID0gYmFja2VuZC50ZW5zb3JNYXAuZ2V0KGZsYXR0ZW5JbmRleC5kYXRhSWQpO1xuICAgIGNvbnN0IGluZGljZXNWYWx1ZXMgPSBpbmRpY2VzVGVuc29yRGF0YS52YWx1ZXMgYXMgVHlwZWRBcnJheTtcbiAgICBjb25zdCBpbmRpY2VzQnVmZmVyID1cbiAgICAgICAgYnVmZmVyKGZsYXR0ZW5JbmRleC5zaGFwZSwgZmxhdHRlbkluZGV4LmR0eXBlLCBpbmRpY2VzVmFsdWVzKSBhc1xuICAgICAgICBUZW5zb3JCdWZmZXI8UmFuaz47XG4gICAgY29uc3QgZmxhdHRlblhUZW5zb3JEYXRhID0gYmFja2VuZC50ZW5zb3JNYXAuZ2V0KGZsYXR0ZW5YLmRhdGFJZCk7XG4gICAgY29uc3QgeFZhbHVlcyA9IGZsYXR0ZW5YVGVuc29yRGF0YS52YWx1ZXMgYXMgVHlwZWRBcnJheTtcbiAgICBjb25zdCB4QnVmZmVyID1cbiAgICAgICAgYnVmZmVyKGZsYXR0ZW5YLnNoYXBlLCBmbGF0dGVuWC5kdHlwZSwgeFZhbHVlcykgYXMgVGVuc29yQnVmZmVyPFJhbms+O1xuICAgIGNvbnN0IG91dEJ1ZiA9IGdhdGhlclYySW1wbENQVSh4QnVmZmVyLCBpbmRpY2VzQnVmZmVyLCBmbGF0dGVuT3V0cHV0U2hhcGUpO1xuXG4gICAgdG9EaXNwb3NlLmZvckVhY2godCA9PiBiYWNrZW5kLmRpc3Bvc2VEYXRhKHQuZGF0YUlkKSk7XG5cbiAgICByZXR1cm4gYmFja2VuZC5tYWtlVGVuc29ySW5mbyhcbiAgICAgICAgc2hhcGVJbmZvLm91dHB1dFNoYXBlLCBvdXRCdWYuZHR5cGUsIG91dEJ1Zi52YWx1ZXMgYXMgVHlwZWRBcnJheSk7XG4gIH1cblxuICBjb25zdCBwcm9ncmFtID0gbmV3IEdhdGhlclByb2dyYW0oZmxhdHRlblguc2hhcGUsIGZsYXR0ZW5PdXRwdXRTaGFwZSk7XG4gIGNvbnN0IHJlcyA9IGJhY2tlbmQucnVuV2ViR1BVUHJvZ3JhbShcbiAgICAgIHByb2dyYW0sIFtmbGF0dGVuWCwgZmxhdHRlbkluZGV4XSwgZmxhdHRlblguZHR5cGUpO1xuICB0b0Rpc3Bvc2UucHVzaChyZXMpO1xuXG4gIGNvbnN0IHJlc2hhcGVkID0gcmVzaGFwZShcbiAgICAgIHtpbnB1dHM6IHt4OiByZXN9LCBiYWNrZW5kLCBhdHRyczoge3NoYXBlOiBzaGFwZUluZm8ub3V0cHV0U2hhcGV9fSk7XG4gIHRvRGlzcG9zZS5mb3JFYWNoKHQgPT4gYmFja2VuZC5kaXNwb3NlRGF0YSh0LmRhdGFJZCkpO1xuICByZXR1cm4gcmVzaGFwZWQ7XG59XG5cbmV4cG9ydCBjb25zdCBnYXRoZXJWMkNvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBHYXRoZXJWMixcbiAgYmFja2VuZE5hbWU6ICd3ZWJncHUnLFxuICBrZXJuZWxGdW5jOiBnYXRoZXJWMiBhcyB1bmtub3duIGFzIEtlcm5lbEZ1bmNcbn07XG4iXX0=","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Greater } from '@tensorflow/tfjs-core';\nimport { BinaryOpType } from '../binary_op_util';\nimport { binaryKernelFunc } from '../kernel_utils/kernel_funcs_utils';\nimport { greaterImplCPU as cpuGreater } from '../kernel_utils/shared';\nexport const greater = binaryKernelFunc({\n    opType: BinaryOpType.GREATER,\n    cpuKernelImpl: cpuGreater,\n    dtype: 'bool',\n});\nexport const greaterConfig = {\n    kernelName: Greater,\n    backendName: 'webgpu',\n    kernelFunc: greater\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiR3JlYXRlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2tlcm5lbHMvR3JlYXRlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQUMsT0FBTyxFQUFlLE1BQU0sdUJBQXVCLENBQUM7QUFFNUQsT0FBTyxFQUFDLFlBQVksRUFBQyxNQUFNLG1CQUFtQixDQUFDO0FBQy9DLE9BQU8sRUFBQyxnQkFBZ0IsRUFBQyxNQUFNLG9DQUFvQyxDQUFDO0FBQ3BFLE9BQU8sRUFBQyxjQUFjLElBQUksVUFBVSxFQUFDLE1BQU0sd0JBQXdCLENBQUM7QUFFcEUsTUFBTSxDQUFDLE1BQU0sT0FBTyxHQUFHLGdCQUFnQixDQUFDO0lBQ3RDLE1BQU0sRUFBRSxZQUFZLENBQUMsT0FBTztJQUM1QixhQUFhLEVBQUUsVUFBVTtJQUN6QixLQUFLLEVBQUUsTUFBTTtDQUNkLENBQUMsQ0FBQztBQUVILE1BQU0sQ0FBQyxNQUFNLGFBQWEsR0FBaUI7SUFDekMsVUFBVSxFQUFFLE9BQU87SUFDbkIsV0FBVyxFQUFFLFFBQVE7SUFDckIsVUFBVSxFQUFFLE9BQU87Q0FDcEIsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtHcmVhdGVyLCBLZXJuZWxDb25maWd9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7QmluYXJ5T3BUeXBlfSBmcm9tICcuLi9iaW5hcnlfb3BfdXRpbCc7XG5pbXBvcnQge2JpbmFyeUtlcm5lbEZ1bmN9IGZyb20gJy4uL2tlcm5lbF91dGlscy9rZXJuZWxfZnVuY3NfdXRpbHMnO1xuaW1wb3J0IHtncmVhdGVySW1wbENQVSBhcyBjcHVHcmVhdGVyfSBmcm9tICcuLi9rZXJuZWxfdXRpbHMvc2hhcmVkJztcblxuZXhwb3J0IGNvbnN0IGdyZWF0ZXIgPSBiaW5hcnlLZXJuZWxGdW5jKHtcbiAgb3BUeXBlOiBCaW5hcnlPcFR5cGUuR1JFQVRFUixcbiAgY3B1S2VybmVsSW1wbDogY3B1R3JlYXRlcixcbiAgZHR5cGU6ICdib29sJyxcbn0pO1xuXG5leHBvcnQgY29uc3QgZ3JlYXRlckNvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBHcmVhdGVyLFxuICBiYWNrZW5kTmFtZTogJ3dlYmdwdScsXG4gIGtlcm5lbEZ1bmM6IGdyZWF0ZXJcbn07XG4iXX0=","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { GreaterEqual } from '@tensorflow/tfjs-core';\nimport { BinaryOpType } from '../binary_op_util';\nimport { binaryKernelFunc } from '../kernel_utils/kernel_funcs_utils';\nimport { greaterEqualImplCPU as cpuGreaterEqual } from '../kernel_utils/shared';\nexport const greaterEqual = binaryKernelFunc({\n    opType: BinaryOpType.GREATER_EQUAL,\n    dtype: 'bool',\n    cpuKernelImpl: cpuGreaterEqual\n});\nexport const greaterEqualConfig = {\n    kernelName: GreaterEqual,\n    backendName: 'webgpu',\n    kernelFunc: greaterEqual\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiR3JlYXRlckVxdWFsLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMva2VybmVscy9HcmVhdGVyRXF1YWwudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUFDLFlBQVksRUFBZSxNQUFNLHVCQUF1QixDQUFDO0FBRWpFLE9BQU8sRUFBQyxZQUFZLEVBQUMsTUFBTSxtQkFBbUIsQ0FBQztBQUMvQyxPQUFPLEVBQUMsZ0JBQWdCLEVBQUMsTUFBTSxvQ0FBb0MsQ0FBQztBQUNwRSxPQUFPLEVBQUMsbUJBQW1CLElBQUksZUFBZSxFQUFDLE1BQU0sd0JBQXdCLENBQUM7QUFFOUUsTUFBTSxDQUFDLE1BQU0sWUFBWSxHQUFHLGdCQUFnQixDQUFDO0lBQzNDLE1BQU0sRUFBRSxZQUFZLENBQUMsYUFBYTtJQUNsQyxLQUFLLEVBQUUsTUFBTTtJQUNiLGFBQWEsRUFBRSxlQUFlO0NBQy9CLENBQUMsQ0FBQztBQUVILE1BQU0sQ0FBQyxNQUFNLGtCQUFrQixHQUFpQjtJQUM5QyxVQUFVLEVBQUUsWUFBWTtJQUN4QixXQUFXLEVBQUUsUUFBUTtJQUNyQixVQUFVLEVBQUUsWUFBWTtDQUN6QixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge0dyZWF0ZXJFcXVhbCwgS2VybmVsQ29uZmlnfSBmcm9tICdAdGVuc29yZmxvdy90ZmpzLWNvcmUnO1xuXG5pbXBvcnQge0JpbmFyeU9wVHlwZX0gZnJvbSAnLi4vYmluYXJ5X29wX3V0aWwnO1xuaW1wb3J0IHtiaW5hcnlLZXJuZWxGdW5jfSBmcm9tICcuLi9rZXJuZWxfdXRpbHMva2VybmVsX2Z1bmNzX3V0aWxzJztcbmltcG9ydCB7Z3JlYXRlckVxdWFsSW1wbENQVSBhcyBjcHVHcmVhdGVyRXF1YWx9IGZyb20gJy4uL2tlcm5lbF91dGlscy9zaGFyZWQnO1xuXG5leHBvcnQgY29uc3QgZ3JlYXRlckVxdWFsID0gYmluYXJ5S2VybmVsRnVuYyh7XG4gIG9wVHlwZTogQmluYXJ5T3BUeXBlLkdSRUFURVJfRVFVQUwsXG4gIGR0eXBlOiAnYm9vbCcsXG4gIGNwdUtlcm5lbEltcGw6IGNwdUdyZWF0ZXJFcXVhbFxufSk7XG5cbmV4cG9ydCBjb25zdCBncmVhdGVyRXF1YWxDb25maWc6IEtlcm5lbENvbmZpZyA9IHtcbiAga2VybmVsTmFtZTogR3JlYXRlckVxdWFsLFxuICBiYWNrZW5kTmFtZTogJ3dlYmdwdScsXG4gIGtlcm5lbEZ1bmM6IGdyZWF0ZXJFcXVhbFxufTtcbiJdfQ==","/**\n * @license\n * Copyright 2022 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { IFFT } from '@tensorflow/tfjs-core';\nimport { fftImpl } from './FFT_impl';\nexport function ifft(args) {\n    const { inputs, backend } = args;\n    const { input } = inputs;\n    return fftImpl(input, true /* inverse */, backend);\n}\nexport const ifftConfig = {\n    kernelName: IFFT,\n    backendName: 'webgpu',\n    kernelFunc: ifft\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiSUZGVC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2tlcm5lbHMvSUZGVC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQUMsSUFBSSxFQUF1QyxNQUFNLHVCQUF1QixDQUFDO0FBSWpGLE9BQU8sRUFBQyxPQUFPLEVBQUMsTUFBTSxZQUFZLENBQUM7QUFFbkMsTUFBTSxVQUFVLElBQUksQ0FBQyxJQUFrRDtJQUVyRSxNQUFNLEVBQUMsTUFBTSxFQUFFLE9BQU8sRUFBQyxHQUFHLElBQUksQ0FBQztJQUMvQixNQUFNLEVBQUMsS0FBSyxFQUFDLEdBQUcsTUFBTSxDQUFDO0lBRXZCLE9BQU8sT0FBTyxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsYUFBYSxFQUFFLE9BQU8sQ0FBQyxDQUFDO0FBQ3JELENBQUM7QUFFRCxNQUFNLENBQUMsTUFBTSxVQUFVLEdBQWlCO0lBQ3RDLFVBQVUsRUFBRSxJQUFJO0lBQ2hCLFdBQVcsRUFBRSxRQUFRO0lBQ3JCLFVBQVUsRUFBRSxJQUFJO0NBQ2pCLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7SUZGVCwgSUZGVElucHV0cywgS2VybmVsQ29uZmlnLCBUZW5zb3JJbmZvfSBmcm9tICdAdGVuc29yZmxvdy90ZmpzLWNvcmUnO1xuXG5pbXBvcnQge1dlYkdQVUJhY2tlbmR9IGZyb20gJy4uL2JhY2tlbmRfd2ViZ3B1JztcblxuaW1wb3J0IHtmZnRJbXBsfSBmcm9tICcuL0ZGVF9pbXBsJztcblxuZXhwb3J0IGZ1bmN0aW9uIGlmZnQoYXJnczoge2lucHV0czogSUZGVElucHV0cywgYmFja2VuZDogV2ViR1BVQmFja2VuZH0pOlxuICAgIFRlbnNvckluZm8ge1xuICBjb25zdCB7aW5wdXRzLCBiYWNrZW5kfSA9IGFyZ3M7XG4gIGNvbnN0IHtpbnB1dH0gPSBpbnB1dHM7XG5cbiAgcmV0dXJuIGZmdEltcGwoaW5wdXQsIHRydWUgLyogaW52ZXJzZSAqLywgYmFja2VuZCk7XG59XG5cbmV4cG9ydCBjb25zdCBpZmZ0Q29uZmlnOiBLZXJuZWxDb25maWcgPSB7XG4gIGtlcm5lbE5hbWU6IElGRlQsXG4gIGJhY2tlbmROYW1lOiAnd2ViZ3B1JyxcbiAga2VybmVsRnVuYzogaWZmdFxufTtcbiJdfQ==","/**\n * @license\n * Copyright 2022 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { IsFinite } from '@tensorflow/tfjs-core';\nimport { unaryKernelFunc } from '../kernel_utils/kernel_funcs_utils';\nimport { UnaryOpType } from '../unary_op_util';\nexport const isFinite = unaryKernelFunc({ opType: UnaryOpType.IS_FINITE, dtype: 'bool' });\nexport const isFiniteConfig = {\n    kernelName: IsFinite,\n    backendName: 'webgpu',\n    kernelFunc: isFinite\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiSXNGaW5pdGUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9rZXJuZWxzL0lzRmluaXRlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sRUFBQyxRQUFRLEVBQWUsTUFBTSx1QkFBdUIsQ0FBQztBQUU3RCxPQUFPLEVBQUMsZUFBZSxFQUFDLE1BQU0sb0NBQW9DLENBQUM7QUFFbkUsT0FBTyxFQUFDLFdBQVcsRUFBQyxNQUFNLGtCQUFrQixDQUFDO0FBRTdDLE1BQU0sQ0FBQyxNQUFNLFFBQVEsR0FDakIsZUFBZSxDQUFDLEVBQUMsTUFBTSxFQUFFLFdBQVcsQ0FBQyxTQUFTLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBQyxDQUFDLENBQUM7QUFFcEUsTUFBTSxDQUFDLE1BQU0sY0FBYyxHQUFpQjtJQUMxQyxVQUFVLEVBQUUsUUFBUTtJQUNwQixXQUFXLEVBQUUsUUFBUTtJQUNyQixVQUFVLEVBQUUsUUFBUTtDQUNyQixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQy5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge0lzRmluaXRlLCBLZXJuZWxDb25maWd9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7dW5hcnlLZXJuZWxGdW5jfSBmcm9tICcuLi9rZXJuZWxfdXRpbHMva2VybmVsX2Z1bmNzX3V0aWxzJztcblxuaW1wb3J0IHtVbmFyeU9wVHlwZX0gZnJvbSAnLi4vdW5hcnlfb3BfdXRpbCc7XG5cbmV4cG9ydCBjb25zdCBpc0Zpbml0ZSA9XG4gICAgdW5hcnlLZXJuZWxGdW5jKHtvcFR5cGU6IFVuYXJ5T3BUeXBlLklTX0ZJTklURSwgZHR5cGU6ICdib29sJ30pO1xuXG5leHBvcnQgY29uc3QgaXNGaW5pdGVDb25maWc6IEtlcm5lbENvbmZpZyA9IHtcbiAga2VybmVsTmFtZTogSXNGaW5pdGUsXG4gIGJhY2tlbmROYW1lOiAnd2ViZ3B1JyxcbiAga2VybmVsRnVuYzogaXNGaW5pdGVcbn07XG4iXX0=","/**\n * @license\n * Copyright 2022 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { IsInf } from '@tensorflow/tfjs-core';\nimport { unaryKernelFunc } from '../kernel_utils/kernel_funcs_utils';\nimport { UnaryOpType } from '../unary_op_util';\nexport const isInf = unaryKernelFunc({ opType: UnaryOpType.IS_INF, dtype: 'bool' });\nexport const isInfConfig = {\n    kernelName: IsInf,\n    backendName: 'webgpu',\n    kernelFunc: isInf\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiSXNJbmYuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9rZXJuZWxzL0lzSW5mLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sRUFBQyxLQUFLLEVBQWUsTUFBTSx1QkFBdUIsQ0FBQztBQUUxRCxPQUFPLEVBQUMsZUFBZSxFQUFDLE1BQU0sb0NBQW9DLENBQUM7QUFFbkUsT0FBTyxFQUFDLFdBQVcsRUFBQyxNQUFNLGtCQUFrQixDQUFDO0FBRTdDLE1BQU0sQ0FBQyxNQUFNLEtBQUssR0FDZCxlQUFlLENBQUMsRUFBQyxNQUFNLEVBQUUsV0FBVyxDQUFDLE1BQU0sRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFDLENBQUMsQ0FBQztBQUVqRSxNQUFNLENBQUMsTUFBTSxXQUFXLEdBQWlCO0lBQ3ZDLFVBQVUsRUFBRSxLQUFLO0lBQ2pCLFdBQVcsRUFBRSxRQUFRO0lBQ3JCLFVBQVUsRUFBRSxLQUFLO0NBQ2xCLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7SXNJbmYsIEtlcm5lbENvbmZpZ30gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcblxuaW1wb3J0IHt1bmFyeUtlcm5lbEZ1bmN9IGZyb20gJy4uL2tlcm5lbF91dGlscy9rZXJuZWxfZnVuY3NfdXRpbHMnO1xuXG5pbXBvcnQge1VuYXJ5T3BUeXBlfSBmcm9tICcuLi91bmFyeV9vcF91dGlsJztcblxuZXhwb3J0IGNvbnN0IGlzSW5mID1cbiAgICB1bmFyeUtlcm5lbEZ1bmMoe29wVHlwZTogVW5hcnlPcFR5cGUuSVNfSU5GLCBkdHlwZTogJ2Jvb2wnfSk7XG5cbmV4cG9ydCBjb25zdCBpc0luZkNvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBJc0luZixcbiAgYmFja2VuZE5hbWU6ICd3ZWJncHUnLFxuICBrZXJuZWxGdW5jOiBpc0luZlxufTtcbiJdfQ==","/**\n * @license\n * Copyright 2022 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { IsNan } from '@tensorflow/tfjs-core';\nimport { unaryKernelFunc } from '../kernel_utils/kernel_funcs_utils';\nimport { UnaryOpType } from '../unary_op_util';\nexport const isNaN = unaryKernelFunc({ opType: UnaryOpType.IS_NAN, dtype: 'bool' });\nexport const isNaNConfig = {\n    kernelName: IsNan,\n    backendName: 'webgpu',\n    kernelFunc: isNaN\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiSXNOYU4uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9rZXJuZWxzL0lzTmFOLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sRUFBQyxLQUFLLEVBQWUsTUFBTSx1QkFBdUIsQ0FBQztBQUMxRCxPQUFPLEVBQUMsZUFBZSxFQUFDLE1BQU0sb0NBQW9DLENBQUM7QUFDbkUsT0FBTyxFQUFDLFdBQVcsRUFBQyxNQUFNLGtCQUFrQixDQUFDO0FBRTdDLE1BQU0sQ0FBQyxNQUFNLEtBQUssR0FDZCxlQUFlLENBQUMsRUFBQyxNQUFNLEVBQUUsV0FBVyxDQUFDLE1BQU0sRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFDLENBQUMsQ0FBQztBQUVqRSxNQUFNLENBQUMsTUFBTSxXQUFXLEdBQWlCO0lBQ3ZDLFVBQVUsRUFBRSxLQUFLO0lBQ2pCLFdBQVcsRUFBRSxRQUFRO0lBQ3JCLFVBQVUsRUFBRSxLQUFLO0NBQ2xCLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7SXNOYW4sIEtlcm5lbENvbmZpZ30gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcbmltcG9ydCB7dW5hcnlLZXJuZWxGdW5jfSBmcm9tICcuLi9rZXJuZWxfdXRpbHMva2VybmVsX2Z1bmNzX3V0aWxzJztcbmltcG9ydCB7VW5hcnlPcFR5cGV9IGZyb20gJy4uL3VuYXJ5X29wX3V0aWwnO1xuXG5leHBvcnQgY29uc3QgaXNOYU4gPVxuICAgIHVuYXJ5S2VybmVsRnVuYyh7b3BUeXBlOiBVbmFyeU9wVHlwZS5JU19OQU4sIGR0eXBlOiAnYm9vbCd9KTtcblxuZXhwb3J0IGNvbnN0IGlzTmFOQ29uZmlnOiBLZXJuZWxDb25maWcgPSB7XG4gIGtlcm5lbE5hbWU6IElzTmFuLFxuICBiYWNrZW5kTmFtZTogJ3dlYmdwdScsXG4gIGtlcm5lbEZ1bmM6IGlzTmFOXG59O1xuIl19","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { LeakyRelu } from '@tensorflow/tfjs-core';\nimport { UnaryOpType } from '../unary_op_util';\nimport { UnaryOpProgram } from '../unary_op_webgpu';\nexport function leakyRelu(args) {\n    const { inputs, backend, attrs } = args;\n    const { x } = inputs;\n    const { alpha } = attrs;\n    const uniformData = [{ type: 'float32', data: [alpha] }];\n    const program = new UnaryOpProgram(x.shape, UnaryOpType.LEAKYRELU, 'alpha : f32,');\n    return backend.runWebGPUProgram(program, [x], 'float32', uniformData);\n}\nexport const leakyReluConfig = {\n    kernelName: LeakyRelu,\n    backendName: 'webgpu',\n    kernelFunc: leakyRelu\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTGVha3lSZWx1LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMva2VybmVscy9MZWFreVJlbHUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUEyQixTQUFTLEVBQThDLE1BQU0sdUJBQXVCLENBQUM7QUFHdkgsT0FBTyxFQUFDLFdBQVcsRUFBQyxNQUFNLGtCQUFrQixDQUFDO0FBQzdDLE9BQU8sRUFBQyxjQUFjLEVBQUMsTUFBTSxvQkFBb0IsQ0FBQztBQUVsRCxNQUFNLFVBQVUsU0FBUyxDQUFDLElBSXpCO0lBQ0MsTUFBTSxFQUFDLE1BQU0sRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFDLEdBQUcsSUFBSSxDQUFDO0lBQ3RDLE1BQU0sRUFBQyxDQUFDLEVBQUMsR0FBRyxNQUFNLENBQUM7SUFDbkIsTUFBTSxFQUFDLEtBQUssRUFBQyxHQUFHLEtBQUssQ0FBQztJQUN0QixNQUFNLFdBQVcsR0FBRyxDQUFDLEVBQUMsSUFBSSxFQUFFLFNBQVMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxLQUFLLENBQUMsRUFBQyxDQUFDLENBQUM7SUFDdkQsTUFBTSxPQUFPLEdBQ1QsSUFBSSxjQUFjLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBRSxXQUFXLENBQUMsU0FBUyxFQUFFLGNBQWMsQ0FBQyxDQUFDO0lBQ3ZFLE9BQU8sT0FBTyxDQUFDLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLFNBQVMsRUFBRSxXQUFXLENBQUMsQ0FBQztBQUN4RSxDQUFDO0FBRUQsTUFBTSxDQUFDLE1BQU0sZUFBZSxHQUFpQjtJQUMzQyxVQUFVLEVBQUUsU0FBUztJQUNyQixXQUFXLEVBQUUsUUFBUTtJQUNyQixVQUFVLEVBQUUsU0FBa0M7Q0FDL0MsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtLZXJuZWxDb25maWcsIEtlcm5lbEZ1bmMsIExlYWt5UmVsdSwgTGVha3lSZWx1QXR0cnMsIExlYWt5UmVsdUlucHV0cywgVGVuc29ySW5mb30gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcblxuaW1wb3J0IHtXZWJHUFVCYWNrZW5kfSBmcm9tICcuLi9iYWNrZW5kX3dlYmdwdSc7XG5pbXBvcnQge1VuYXJ5T3BUeXBlfSBmcm9tICcuLi91bmFyeV9vcF91dGlsJztcbmltcG9ydCB7VW5hcnlPcFByb2dyYW19IGZyb20gJy4uL3VuYXJ5X29wX3dlYmdwdSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBsZWFreVJlbHUoYXJnczoge1xuICBpbnB1dHM6IExlYWt5UmVsdUlucHV0cyxcbiAgYmFja2VuZDogV2ViR1BVQmFja2VuZCxcbiAgYXR0cnM6IExlYWt5UmVsdUF0dHJzXG59KTogVGVuc29ySW5mbyB7XG4gIGNvbnN0IHtpbnB1dHMsIGJhY2tlbmQsIGF0dHJzfSA9IGFyZ3M7XG4gIGNvbnN0IHt4fSA9IGlucHV0cztcbiAgY29uc3Qge2FscGhhfSA9IGF0dHJzO1xuICBjb25zdCB1bmlmb3JtRGF0YSA9IFt7dHlwZTogJ2Zsb2F0MzInLCBkYXRhOiBbYWxwaGFdfV07XG4gIGNvbnN0IHByb2dyYW0gPVxuICAgICAgbmV3IFVuYXJ5T3BQcm9ncmFtKHguc2hhcGUsIFVuYXJ5T3BUeXBlLkxFQUtZUkVMVSwgJ2FscGhhIDogZjMyLCcpO1xuICByZXR1cm4gYmFja2VuZC5ydW5XZWJHUFVQcm9ncmFtKHByb2dyYW0sIFt4XSwgJ2Zsb2F0MzInLCB1bmlmb3JtRGF0YSk7XG59XG5cbmV4cG9ydCBjb25zdCBsZWFreVJlbHVDb25maWc6IEtlcm5lbENvbmZpZyA9IHtcbiAga2VybmVsTmFtZTogTGVha3lSZWx1LFxuICBiYWNrZW5kTmFtZTogJ3dlYmdwdScsXG4gIGtlcm5lbEZ1bmM6IGxlYWt5UmVsdSBhcyB1bmtub3duIGFzIEtlcm5lbEZ1bmNcbn07XG4iXX0=","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Less } from '@tensorflow/tfjs-core';\nimport { BinaryOpType } from '../binary_op_util';\nimport { binaryKernelFunc } from '../kernel_utils/kernel_funcs_utils';\nimport { lessImplCPU as cpuLess } from '../kernel_utils/shared';\nexport const less = binaryKernelFunc({ opType: BinaryOpType.LESS, dtype: 'bool', cpuKernelImpl: cpuLess });\nexport const lessConfig = {\n    kernelName: Less,\n    backendName: 'webgpu',\n    kernelFunc: less\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTGVzcy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2tlcm5lbHMvTGVzcy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQWUsSUFBSSxFQUFDLE1BQU0sdUJBQXVCLENBQUM7QUFFekQsT0FBTyxFQUFDLFlBQVksRUFBQyxNQUFNLG1CQUFtQixDQUFDO0FBQy9DLE9BQU8sRUFBQyxnQkFBZ0IsRUFBQyxNQUFNLG9DQUFvQyxDQUFDO0FBQ3BFLE9BQU8sRUFBQyxXQUFXLElBQUksT0FBTyxFQUFDLE1BQU0sd0JBQXdCLENBQUM7QUFFOUQsTUFBTSxDQUFDLE1BQU0sSUFBSSxHQUFHLGdCQUFnQixDQUNoQyxFQUFDLE1BQU0sRUFBRSxZQUFZLENBQUMsSUFBSSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsYUFBYSxFQUFFLE9BQU8sRUFBQyxDQUFDLENBQUM7QUFFeEUsTUFBTSxDQUFDLE1BQU0sVUFBVSxHQUFpQjtJQUN0QyxVQUFVLEVBQUUsSUFBSTtJQUNoQixXQUFXLEVBQUUsUUFBUTtJQUNyQixVQUFVLEVBQUUsSUFBSTtDQUNqQixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge0tlcm5lbENvbmZpZywgTGVzc30gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcblxuaW1wb3J0IHtCaW5hcnlPcFR5cGV9IGZyb20gJy4uL2JpbmFyeV9vcF91dGlsJztcbmltcG9ydCB7YmluYXJ5S2VybmVsRnVuY30gZnJvbSAnLi4va2VybmVsX3V0aWxzL2tlcm5lbF9mdW5jc191dGlscyc7XG5pbXBvcnQge2xlc3NJbXBsQ1BVIGFzIGNwdUxlc3N9IGZyb20gJy4uL2tlcm5lbF91dGlscy9zaGFyZWQnO1xuXG5leHBvcnQgY29uc3QgbGVzcyA9IGJpbmFyeUtlcm5lbEZ1bmMoXG4gICAge29wVHlwZTogQmluYXJ5T3BUeXBlLkxFU1MsIGR0eXBlOiAnYm9vbCcsIGNwdUtlcm5lbEltcGw6IGNwdUxlc3N9KTtcblxuZXhwb3J0IGNvbnN0IGxlc3NDb25maWc6IEtlcm5lbENvbmZpZyA9IHtcbiAga2VybmVsTmFtZTogTGVzcyxcbiAgYmFja2VuZE5hbWU6ICd3ZWJncHUnLFxuICBrZXJuZWxGdW5jOiBsZXNzXG59O1xuIl19","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { LessEqual } from '@tensorflow/tfjs-core';\nimport { BinaryOpType } from '../binary_op_util';\nimport { binaryKernelFunc } from '../kernel_utils/kernel_funcs_utils';\nimport { lessEqualImplCPU as cpuLessEqual } from '../kernel_utils/shared';\nexport const lessEqual = binaryKernelFunc({\n    opType: BinaryOpType.LESS_EQUAL,\n    dtype: 'bool',\n    cpuKernelImpl: cpuLessEqual\n});\nexport const lessEqualConfig = {\n    kernelName: LessEqual,\n    backendName: 'webgpu',\n    kernelFunc: lessEqual\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTGVzc0VxdWFsLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMva2VybmVscy9MZXNzRXF1YWwudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUFlLFNBQVMsRUFBQyxNQUFNLHVCQUF1QixDQUFDO0FBRTlELE9BQU8sRUFBQyxZQUFZLEVBQUMsTUFBTSxtQkFBbUIsQ0FBQztBQUMvQyxPQUFPLEVBQUMsZ0JBQWdCLEVBQUMsTUFBTSxvQ0FBb0MsQ0FBQztBQUNwRSxPQUFPLEVBQUMsZ0JBQWdCLElBQUksWUFBWSxFQUFDLE1BQU0sd0JBQXdCLENBQUM7QUFFeEUsTUFBTSxDQUFDLE1BQU0sU0FBUyxHQUFHLGdCQUFnQixDQUFDO0lBQ3hDLE1BQU0sRUFBRSxZQUFZLENBQUMsVUFBVTtJQUMvQixLQUFLLEVBQUUsTUFBTTtJQUNiLGFBQWEsRUFBRSxZQUFZO0NBQzVCLENBQUMsQ0FBQztBQUVILE1BQU0sQ0FBQyxNQUFNLGVBQWUsR0FBaUI7SUFDM0MsVUFBVSxFQUFFLFNBQVM7SUFDckIsV0FBVyxFQUFFLFFBQVE7SUFDckIsVUFBVSxFQUFFLFNBQVM7Q0FDdEIsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtLZXJuZWxDb25maWcsIExlc3NFcXVhbH0gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcblxuaW1wb3J0IHtCaW5hcnlPcFR5cGV9IGZyb20gJy4uL2JpbmFyeV9vcF91dGlsJztcbmltcG9ydCB7YmluYXJ5S2VybmVsRnVuY30gZnJvbSAnLi4va2VybmVsX3V0aWxzL2tlcm5lbF9mdW5jc191dGlscyc7XG5pbXBvcnQge2xlc3NFcXVhbEltcGxDUFUgYXMgY3B1TGVzc0VxdWFsfSBmcm9tICcuLi9rZXJuZWxfdXRpbHMvc2hhcmVkJztcblxuZXhwb3J0IGNvbnN0IGxlc3NFcXVhbCA9IGJpbmFyeUtlcm5lbEZ1bmMoe1xuICBvcFR5cGU6IEJpbmFyeU9wVHlwZS5MRVNTX0VRVUFMLFxuICBkdHlwZTogJ2Jvb2wnLFxuICBjcHVLZXJuZWxJbXBsOiBjcHVMZXNzRXF1YWxcbn0pO1xuXG5leHBvcnQgY29uc3QgbGVzc0VxdWFsQ29uZmlnOiBLZXJuZWxDb25maWcgPSB7XG4gIGtlcm5lbE5hbWU6IExlc3NFcXVhbCxcbiAgYmFja2VuZE5hbWU6ICd3ZWJncHUnLFxuICBrZXJuZWxGdW5jOiBsZXNzRXF1YWxcbn07XG4iXX0=","/**\n * @license\n * Copyright 2022 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { getMainHeaderString as main } from './webgpu_program';\nimport { computeDispatch, flatDispatchLayout } from './webgpu_util';\nexport class LinSpaceProgram {\n    constructor(shape) {\n        this.variableNames = [];\n        this.outputShape = [];\n        this.uniforms = 'start : f32, step : f32,';\n        this.workgroupSize = [64, 1, 1];\n        this.size = true;\n        this.outputShape = [shape];\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize);\n        this.shaderKey = 'linSpace';\n    }\n    getUserCode() {\n        const userCode = `\n      ${main('index')} {\n        if (index < uniforms.size) {\n          setOutputAtIndex(index, uniforms.start + f32(index) * uniforms.step);\n        }\n      }\n    `;\n        return userCode;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGluX3NwYWNlX3dlYmdwdS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2xpbl9zcGFjZV93ZWJncHUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUFDLG1CQUFtQixJQUFJLElBQUksRUFBZ0IsTUFBTSxrQkFBa0IsQ0FBQztBQUM1RSxPQUFPLEVBQUMsZUFBZSxFQUFFLGtCQUFrQixFQUFDLE1BQU0sZUFBZSxDQUFDO0FBRWxFLE1BQU0sT0FBTyxlQUFlO0lBVTFCLFlBQVksS0FBYTtRQVR6QixrQkFBYSxHQUFhLEVBQUUsQ0FBQztRQUM3QixnQkFBVyxHQUFhLEVBQUUsQ0FBQztRQUkzQixhQUFRLEdBQUcsMEJBQTBCLENBQUM7UUFDdEMsa0JBQWEsR0FBNkIsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ3JELFNBQUksR0FBRyxJQUFJLENBQUM7UUFHVixJQUFJLENBQUMsV0FBVyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDM0IsSUFBSSxDQUFDLGNBQWMsR0FBRyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDM0QsSUFBSSxDQUFDLFFBQVEsR0FBRyxlQUFlLENBQzNCLElBQUksQ0FBQyxjQUFjLEVBQUUsSUFBSSxDQUFDLFdBQVcsRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7UUFFL0QsSUFBSSxDQUFDLFNBQVMsR0FBRyxVQUFVLENBQUM7SUFDOUIsQ0FBQztJQUVELFdBQVc7UUFDVCxNQUFNLFFBQVEsR0FBRztRQUNiLElBQUksQ0FBQyxPQUFPLENBQUM7Ozs7O0tBS2hCLENBQUM7UUFDRixPQUFPLFFBQVEsQ0FBQztJQUNsQixDQUFDO0NBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7Z2V0TWFpbkhlYWRlclN0cmluZyBhcyBtYWluLCBXZWJHUFVQcm9ncmFtfSBmcm9tICcuL3dlYmdwdV9wcm9ncmFtJztcbmltcG9ydCB7Y29tcHV0ZURpc3BhdGNoLCBmbGF0RGlzcGF0Y2hMYXlvdXR9IGZyb20gJy4vd2ViZ3B1X3V0aWwnO1xuXG5leHBvcnQgY2xhc3MgTGluU3BhY2VQcm9ncmFtIGltcGxlbWVudHMgV2ViR1BVUHJvZ3JhbSB7XG4gIHZhcmlhYmxlTmFtZXM6IHN0cmluZ1tdID0gW107XG4gIG91dHB1dFNoYXBlOiBudW1iZXJbXSA9IFtdO1xuICBzaGFkZXJLZXk6IHN0cmluZztcbiAgZGlzcGF0Y2hMYXlvdXQ6IHt4OiBudW1iZXJbXX07XG4gIGRpc3BhdGNoOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl07XG4gIHVuaWZvcm1zID0gJ3N0YXJ0IDogZjMyLCBzdGVwIDogZjMyLCc7XG4gIHdvcmtncm91cFNpemU6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXSA9IFs2NCwgMSwgMV07XG4gIHNpemUgPSB0cnVlO1xuXG4gIGNvbnN0cnVjdG9yKHNoYXBlOiBudW1iZXIpIHtcbiAgICB0aGlzLm91dHB1dFNoYXBlID0gW3NoYXBlXTtcbiAgICB0aGlzLmRpc3BhdGNoTGF5b3V0ID0gZmxhdERpc3BhdGNoTGF5b3V0KHRoaXMub3V0cHV0U2hhcGUpO1xuICAgIHRoaXMuZGlzcGF0Y2ggPSBjb21wdXRlRGlzcGF0Y2goXG4gICAgICAgIHRoaXMuZGlzcGF0Y2hMYXlvdXQsIHRoaXMub3V0cHV0U2hhcGUsIHRoaXMud29ya2dyb3VwU2l6ZSk7XG5cbiAgICB0aGlzLnNoYWRlcktleSA9ICdsaW5TcGFjZSc7XG4gIH1cblxuICBnZXRVc2VyQ29kZSgpOiBzdHJpbmcge1xuICAgIGNvbnN0IHVzZXJDb2RlID0gYFxuICAgICAgJHttYWluKCdpbmRleCcpfSB7XG4gICAgICAgIGlmIChpbmRleCA8IHVuaWZvcm1zLnNpemUpIHtcbiAgICAgICAgICBzZXRPdXRwdXRBdEluZGV4KGluZGV4LCB1bmlmb3Jtcy5zdGFydCArIGYzMihpbmRleCkgKiB1bmlmb3Jtcy5zdGVwKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIGA7XG4gICAgcmV0dXJuIHVzZXJDb2RlO1xuICB9XG59XG4iXX0=","/**\n * @license\n * Copyright 2022 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { LinSpace } from '@tensorflow/tfjs-core';\nimport { LinSpaceProgram } from '../lin_space_webgpu';\nexport function linSpace(args) {\n    const { backend, attrs } = args;\n    const { start, stop, num } = attrs;\n    const step = (stop - start) / (num - 1);\n    const program = new LinSpaceProgram(num);\n    const uniformData = [{ type: 'float32', data: [start] }, { type: 'float32', data: [step] }];\n    return backend.runWebGPUProgram(program, [], 'float32', uniformData);\n}\nexport const linSpaceConfig = {\n    kernelName: LinSpace,\n    backendName: 'webgpu',\n    kernelFunc: linSpace\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTGluU3BhY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9rZXJuZWxzL0xpblNwYWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sRUFBMkIsUUFBUSxFQUE0QixNQUFNLHVCQUF1QixDQUFDO0FBR3BHLE9BQU8sRUFBQyxlQUFlLEVBQUMsTUFBTSxxQkFBcUIsQ0FBQztBQUVwRCxNQUFNLFVBQVUsUUFBUSxDQUFDLElBQW9EO0lBRTNFLE1BQU0sRUFBQyxPQUFPLEVBQUUsS0FBSyxFQUFDLEdBQUcsSUFBSSxDQUFDO0lBQzlCLE1BQU0sRUFBQyxLQUFLLEVBQUUsSUFBSSxFQUFFLEdBQUcsRUFBQyxHQUFHLEtBQUssQ0FBQztJQUNqQyxNQUFNLElBQUksR0FBRyxDQUFDLElBQUksR0FBRyxLQUFLLENBQUMsR0FBRyxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQztJQUV4QyxNQUFNLE9BQU8sR0FBRyxJQUFJLGVBQWUsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUN6QyxNQUFNLFdBQVcsR0FDYixDQUFDLEVBQUMsSUFBSSxFQUFFLFNBQVMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxLQUFLLENBQUMsRUFBQyxFQUFFLEVBQUMsSUFBSSxFQUFFLFNBQVMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxJQUFJLENBQUMsRUFBQyxDQUFDLENBQUM7SUFDeEUsT0FBTyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLEVBQUUsRUFBRSxTQUFTLEVBQUUsV0FBVyxDQUFDLENBQUM7QUFDdkUsQ0FBQztBQUVELE1BQU0sQ0FBQyxNQUFNLGNBQWMsR0FBaUI7SUFDMUMsVUFBVSxFQUFFLFFBQVE7SUFDcEIsV0FBVyxFQUFFLFFBQVE7SUFDckIsVUFBVSxFQUFFLFFBQWlDO0NBQzlDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7S2VybmVsQ29uZmlnLCBLZXJuZWxGdW5jLCBMaW5TcGFjZSwgTGluU3BhY2VBdHRycywgVGVuc29ySW5mb30gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcblxuaW1wb3J0IHtXZWJHUFVCYWNrZW5kfSBmcm9tICcuLi9iYWNrZW5kX3dlYmdwdSc7XG5pbXBvcnQge0xpblNwYWNlUHJvZ3JhbX0gZnJvbSAnLi4vbGluX3NwYWNlX3dlYmdwdSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBsaW5TcGFjZShhcmdzOiB7YmFja2VuZDogV2ViR1BVQmFja2VuZCwgYXR0cnM6IExpblNwYWNlQXR0cnN9KTpcbiAgICBUZW5zb3JJbmZvIHtcbiAgY29uc3Qge2JhY2tlbmQsIGF0dHJzfSA9IGFyZ3M7XG4gIGNvbnN0IHtzdGFydCwgc3RvcCwgbnVtfSA9IGF0dHJzO1xuICBjb25zdCBzdGVwID0gKHN0b3AgLSBzdGFydCkgLyAobnVtIC0gMSk7XG5cbiAgY29uc3QgcHJvZ3JhbSA9IG5ldyBMaW5TcGFjZVByb2dyYW0obnVtKTtcbiAgY29uc3QgdW5pZm9ybURhdGEgPVxuICAgICAgW3t0eXBlOiAnZmxvYXQzMicsIGRhdGE6IFtzdGFydF19LCB7dHlwZTogJ2Zsb2F0MzInLCBkYXRhOiBbc3RlcF19XTtcbiAgcmV0dXJuIGJhY2tlbmQucnVuV2ViR1BVUHJvZ3JhbShwcm9ncmFtLCBbXSwgJ2Zsb2F0MzInLCB1bmlmb3JtRGF0YSk7XG59XG5cbmV4cG9ydCBjb25zdCBsaW5TcGFjZUNvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBMaW5TcGFjZSxcbiAgYmFja2VuZE5hbWU6ICd3ZWJncHUnLFxuICBrZXJuZWxGdW5jOiBsaW5TcGFjZSBhcyB1bmtub3duIGFzIEtlcm5lbEZ1bmNcbn07XG4iXX0=","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Log } from '@tensorflow/tfjs-core';\nimport { unaryKernelFunc } from '../kernel_utils/kernel_funcs_utils';\nimport { logImplCPU } from '../kernel_utils/shared';\nimport { UnaryOpType } from '../unary_op_util';\nexport const log = unaryKernelFunc({ opType: UnaryOpType.LOG, cpuKernelImpl: logImplCPU });\nexport const logConfig = {\n    kernelName: Log,\n    backendName: 'webgpu',\n    kernelFunc: log\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTG9nLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMva2VybmVscy9Mb2cudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUFlLEdBQUcsRUFBQyxNQUFNLHVCQUF1QixDQUFDO0FBQ3hELE9BQU8sRUFBQyxlQUFlLEVBQUMsTUFBTSxvQ0FBb0MsQ0FBQztBQUNuRSxPQUFPLEVBQUMsVUFBVSxFQUFDLE1BQU0sd0JBQXdCLENBQUM7QUFDbEQsT0FBTyxFQUFDLFdBQVcsRUFBQyxNQUFNLGtCQUFrQixDQUFDO0FBRTdDLE1BQU0sQ0FBQyxNQUFNLEdBQUcsR0FDWixlQUFlLENBQUMsRUFBQyxNQUFNLEVBQUUsV0FBVyxDQUFDLEdBQUcsRUFBRSxhQUFhLEVBQUUsVUFBVSxFQUFDLENBQUMsQ0FBQztBQUUxRSxNQUFNLENBQUMsTUFBTSxTQUFTLEdBQWlCO0lBQ3JDLFVBQVUsRUFBRSxHQUFHO0lBQ2YsV0FBVyxFQUFFLFFBQVE7SUFDckIsVUFBVSxFQUFFLEdBQUc7Q0FDaEIsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtLZXJuZWxDb25maWcsIExvZ30gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcbmltcG9ydCB7dW5hcnlLZXJuZWxGdW5jfSBmcm9tICcuLi9rZXJuZWxfdXRpbHMva2VybmVsX2Z1bmNzX3V0aWxzJztcbmltcG9ydCB7bG9nSW1wbENQVX0gZnJvbSAnLi4va2VybmVsX3V0aWxzL3NoYXJlZCc7XG5pbXBvcnQge1VuYXJ5T3BUeXBlfSBmcm9tICcuLi91bmFyeV9vcF91dGlsJztcblxuZXhwb3J0IGNvbnN0IGxvZyA9XG4gICAgdW5hcnlLZXJuZWxGdW5jKHtvcFR5cGU6IFVuYXJ5T3BUeXBlLkxPRywgY3B1S2VybmVsSW1wbDogbG9nSW1wbENQVX0pO1xuXG5leHBvcnQgY29uc3QgbG9nQ29uZmlnOiBLZXJuZWxDb25maWcgPSB7XG4gIGtlcm5lbE5hbWU6IExvZyxcbiAgYmFja2VuZE5hbWU6ICd3ZWJncHUnLFxuICBrZXJuZWxGdW5jOiBsb2dcbn07XG4iXX0=","/**\n * @license\n * Copyright 2022 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Log1p } from '@tensorflow/tfjs-core';\nimport { unaryKernelFunc } from '../kernel_utils/kernel_funcs_utils';\nimport { UnaryOpType } from '../unary_op_util';\nexport const log1p = unaryKernelFunc({ opType: UnaryOpType.LOG1P });\nexport const log1pConfig = {\n    kernelName: Log1p,\n    backendName: 'webgpu',\n    kernelFunc: log1p\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTG9nMXAuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9rZXJuZWxzL0xvZzFwLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sRUFBZSxLQUFLLEVBQUMsTUFBTSx1QkFBdUIsQ0FBQztBQUUxRCxPQUFPLEVBQUMsZUFBZSxFQUFDLE1BQU0sb0NBQW9DLENBQUM7QUFFbkUsT0FBTyxFQUFDLFdBQVcsRUFBQyxNQUFNLGtCQUFrQixDQUFDO0FBRTdDLE1BQU0sQ0FBQyxNQUFNLEtBQUssR0FBRyxlQUFlLENBQUMsRUFBQyxNQUFNLEVBQUUsV0FBVyxDQUFDLEtBQUssRUFBQyxDQUFDLENBQUM7QUFFbEUsTUFBTSxDQUFDLE1BQU0sV0FBVyxHQUFpQjtJQUN2QyxVQUFVLEVBQUUsS0FBSztJQUNqQixXQUFXLEVBQUUsUUFBUTtJQUNyQixVQUFVLEVBQUUsS0FBSztDQUNsQixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQy5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge0tlcm5lbENvbmZpZywgTG9nMXB9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7dW5hcnlLZXJuZWxGdW5jfSBmcm9tICcuLi9rZXJuZWxfdXRpbHMva2VybmVsX2Z1bmNzX3V0aWxzJztcblxuaW1wb3J0IHtVbmFyeU9wVHlwZX0gZnJvbSAnLi4vdW5hcnlfb3BfdXRpbCc7XG5cbmV4cG9ydCBjb25zdCBsb2cxcCA9IHVuYXJ5S2VybmVsRnVuYyh7b3BUeXBlOiBVbmFyeU9wVHlwZS5MT0cxUH0pO1xuXG5leHBvcnQgY29uc3QgbG9nMXBDb25maWc6IEtlcm5lbENvbmZpZyA9IHtcbiAga2VybmVsTmFtZTogTG9nMXAsXG4gIGJhY2tlbmROYW1lOiAnd2ViZ3B1JyxcbiAga2VybmVsRnVuYzogbG9nMXBcbn07XG4iXX0=","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { LogicalAnd } from '@tensorflow/tfjs-core';\nimport { BinaryOpType } from '../binary_op_util';\nimport { binaryKernelFunc } from '../kernel_utils/kernel_funcs_utils';\nexport const logicalAnd = binaryKernelFunc({ opType: BinaryOpType.LOGICAL_AND, dtype: 'bool' });\nexport const logicalAndConfig = {\n    kernelName: LogicalAnd,\n    backendName: 'webgpu',\n    kernelFunc: logicalAnd\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTG9naWNhbEFuZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2tlcm5lbHMvTG9naWNhbEFuZC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQWUsVUFBVSxFQUFDLE1BQU0sdUJBQXVCLENBQUM7QUFFL0QsT0FBTyxFQUFDLFlBQVksRUFBQyxNQUFNLG1CQUFtQixDQUFDO0FBQy9DLE9BQU8sRUFBQyxnQkFBZ0IsRUFBQyxNQUFNLG9DQUFvQyxDQUFDO0FBRXBFLE1BQU0sQ0FBQyxNQUFNLFVBQVUsR0FDbkIsZ0JBQWdCLENBQUMsRUFBQyxNQUFNLEVBQUUsWUFBWSxDQUFDLFdBQVcsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFDLENBQUMsQ0FBQztBQUV4RSxNQUFNLENBQUMsTUFBTSxnQkFBZ0IsR0FBaUI7SUFDNUMsVUFBVSxFQUFFLFVBQVU7SUFDdEIsV0FBVyxFQUFFLFFBQVE7SUFDckIsVUFBVSxFQUFFLFVBQVU7Q0FDdkIsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtLZXJuZWxDb25maWcsIExvZ2ljYWxBbmR9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7QmluYXJ5T3BUeXBlfSBmcm9tICcuLi9iaW5hcnlfb3BfdXRpbCc7XG5pbXBvcnQge2JpbmFyeUtlcm5lbEZ1bmN9IGZyb20gJy4uL2tlcm5lbF91dGlscy9rZXJuZWxfZnVuY3NfdXRpbHMnO1xuXG5leHBvcnQgY29uc3QgbG9naWNhbEFuZCA9XG4gICAgYmluYXJ5S2VybmVsRnVuYyh7b3BUeXBlOiBCaW5hcnlPcFR5cGUuTE9HSUNBTF9BTkQsIGR0eXBlOiAnYm9vbCd9KTtcblxuZXhwb3J0IGNvbnN0IGxvZ2ljYWxBbmRDb25maWc6IEtlcm5lbENvbmZpZyA9IHtcbiAga2VybmVsTmFtZTogTG9naWNhbEFuZCxcbiAgYmFja2VuZE5hbWU6ICd3ZWJncHUnLFxuICBrZXJuZWxGdW5jOiBsb2dpY2FsQW5kXG59O1xuIl19","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { LogicalNot } from '@tensorflow/tfjs-core';\nimport { unaryKernelFunc } from '../kernel_utils/kernel_funcs_utils';\nimport { UnaryOpType } from '../unary_op_util';\nexport const logicalNot = unaryKernelFunc({ opType: UnaryOpType.LOGICAL_NOT });\nexport const logicalNotConfig = {\n    kernelName: LogicalNot,\n    backendName: 'webgpu',\n    kernelFunc: logicalNot\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTG9naWNhbE5vdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2tlcm5lbHMvTG9naWNhbE5vdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQWUsVUFBVSxFQUFDLE1BQU0sdUJBQXVCLENBQUM7QUFFL0QsT0FBTyxFQUFDLGVBQWUsRUFBQyxNQUFNLG9DQUFvQyxDQUFDO0FBRW5FLE9BQU8sRUFBQyxXQUFXLEVBQUMsTUFBTSxrQkFBa0IsQ0FBQztBQUU3QyxNQUFNLENBQUMsTUFBTSxVQUFVLEdBQUcsZUFBZSxDQUFDLEVBQUMsTUFBTSxFQUFFLFdBQVcsQ0FBQyxXQUFXLEVBQUMsQ0FBQyxDQUFDO0FBRTdFLE1BQU0sQ0FBQyxNQUFNLGdCQUFnQixHQUFpQjtJQUM1QyxVQUFVLEVBQUUsVUFBVTtJQUN0QixXQUFXLEVBQUUsUUFBUTtJQUNyQixVQUFVLEVBQUUsVUFBVTtDQUN2QixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge0tlcm5lbENvbmZpZywgTG9naWNhbE5vdH0gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcblxuaW1wb3J0IHt1bmFyeUtlcm5lbEZ1bmN9IGZyb20gJy4uL2tlcm5lbF91dGlscy9rZXJuZWxfZnVuY3NfdXRpbHMnO1xuXG5pbXBvcnQge1VuYXJ5T3BUeXBlfSBmcm9tICcuLi91bmFyeV9vcF91dGlsJztcblxuZXhwb3J0IGNvbnN0IGxvZ2ljYWxOb3QgPSB1bmFyeUtlcm5lbEZ1bmMoe29wVHlwZTogVW5hcnlPcFR5cGUuTE9HSUNBTF9OT1R9KTtcblxuZXhwb3J0IGNvbnN0IGxvZ2ljYWxOb3RDb25maWc6IEtlcm5lbENvbmZpZyA9IHtcbiAga2VybmVsTmFtZTogTG9naWNhbE5vdCxcbiAgYmFja2VuZE5hbWU6ICd3ZWJncHUnLFxuICBrZXJuZWxGdW5jOiBsb2dpY2FsTm90XG59O1xuIl19","/**\n * @license\n * Copyright 2022 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { LogicalOr } from '@tensorflow/tfjs-core';\nimport { BinaryOpType } from '../binary_op_util';\nimport { binaryKernelFunc } from '../kernel_utils/kernel_funcs_utils';\nexport const logicalOr = binaryKernelFunc({ opType: BinaryOpType.LOGICAL_OR });\nexport const logicalOrConfig = {\n    kernelName: LogicalOr,\n    backendName: 'webgpu',\n    kernelFunc: logicalOr\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTG9naWNhbE9yLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMva2VybmVscy9Mb2dpY2FsT3IudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUFlLFNBQVMsRUFBQyxNQUFNLHVCQUF1QixDQUFDO0FBRTlELE9BQU8sRUFBQyxZQUFZLEVBQUMsTUFBTSxtQkFBbUIsQ0FBQztBQUMvQyxPQUFPLEVBQUMsZ0JBQWdCLEVBQUMsTUFBTSxvQ0FBb0MsQ0FBQztBQUVwRSxNQUFNLENBQUMsTUFBTSxTQUFTLEdBQUcsZ0JBQWdCLENBQUMsRUFBQyxNQUFNLEVBQUUsWUFBWSxDQUFDLFVBQVUsRUFBQyxDQUFDLENBQUM7QUFFN0UsTUFBTSxDQUFDLE1BQU0sZUFBZSxHQUFpQjtJQUMzQyxVQUFVLEVBQUUsU0FBUztJQUNyQixXQUFXLEVBQUUsUUFBUTtJQUNyQixVQUFVLEVBQUUsU0FBUztDQUN0QixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQy5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge0tlcm5lbENvbmZpZywgTG9naWNhbE9yfSBmcm9tICdAdGVuc29yZmxvdy90ZmpzLWNvcmUnO1xuXG5pbXBvcnQge0JpbmFyeU9wVHlwZX0gZnJvbSAnLi4vYmluYXJ5X29wX3V0aWwnO1xuaW1wb3J0IHtiaW5hcnlLZXJuZWxGdW5jfSBmcm9tICcuLi9rZXJuZWxfdXRpbHMva2VybmVsX2Z1bmNzX3V0aWxzJztcblxuZXhwb3J0IGNvbnN0IGxvZ2ljYWxPciA9IGJpbmFyeUtlcm5lbEZ1bmMoe29wVHlwZTogQmluYXJ5T3BUeXBlLkxPR0lDQUxfT1J9KTtcblxuZXhwb3J0IGNvbnN0IGxvZ2ljYWxPckNvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBMb2dpY2FsT3IsXG4gIGJhY2tlbmROYW1lOiAnd2ViZ3B1JyxcbiAga2VybmVsRnVuYzogbG9naWNhbE9yXG59O1xuIl19","/**\n * @license\n * Copyright 2022 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { util } from '@tensorflow/tfjs-core';\nimport { getMainHeaderString as main } from './webgpu_program';\nimport { computeDispatch, flatDispatchLayout } from './webgpu_util';\nconst powOperatorSnippet = `\n  var powValue = 0.0;\n  let basis = uniforms.bias + uniforms.alpha * sum;\n  if (uniforms.beta == 0.5) {\n    powValue = inverseSqrt(basis);\n  } else if (uniforms.beta == 1.0) {\n    powValue = 1.0 / basis;\n  } else {\n    powValue = exp(log(basis) * (-uniforms.beta));\n  }\n`;\nexport class LRNProgram {\n    constructor(xShape) {\n        this.outputShape = [];\n        this.variableNames = ['x'];\n        this.uniforms = 'radius : i32, bias : f32, alpha : f32, beta : f32,';\n        this.workgroupSize = [64, 1, 1];\n        this.size = true;\n        this.outputShape = xShape;\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize);\n        this.shaderKey = 'lrn';\n    }\n    getUserCode() {\n        const userCode = `\n    ${main('index')} {\n      if (index < uniforms.size) {\n        let coords = getOutputCoords();\n        let b = coords[0];\n        let r = coords[1];\n        let c = coords[2];\n        let d = coords[3];\n\n        let x = getX(b, r, c, d);\n        var sum = 0.0;\n        for (var i = -uniforms.radius; i <= uniforms.radius; i = i + 1) {\n          let idx = d + i;\n          if (idx >= 0 && idx < uniforms.xShape[3]) {\n            let z = getX(b, r, c, idx);\n            sum = sum + z * z;\n          }\n        }\n        ${powOperatorSnippet}\n\n        setOutputAtIndex(index, x * powValue);\n      }\n    }\n  `;\n        return userCode;\n    }\n}\nexport class LRNSharedProgram {\n    constructor(xShape, radius) {\n        this.outputShape = [];\n        this.variableNames = ['x'];\n        this.uniforms = 'radius : i32, bias : f32, alpha : f32, beta : f32,';\n        this.workgroupSize = [256, 1, 1];\n        this.maxAllowRadius = 16;\n        util.assert(radius <= this.maxAllowRadius, () => `Radius must be less than or equal to ${this.maxAllowRadius}, current radius is ${radius}`);\n        this.outputShape = xShape;\n        // The reason why not using this.workgroupSize[0] + 2 * maxAllowRadius here\n        // is to make sure that there is only one time global memory load access for\n        // each thread.\n        this.elementsPerWorkgroup = this.workgroupSize[0] - 2 * this.maxAllowRadius;\n        this.dispatchLayout = { x: [3], y: [2], z: [0, 1] };\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, [\n            this.elementsPerWorkgroup, this.workgroupSize[1], this.workgroupSize[2]\n        ]);\n        this.shaderKey = 'lrn_shared';\n    }\n    getUserCode() {\n        const userCode = `\n    var <workgroup>lrnSub: array<f32, ${this.workgroupSize[0]}>;\n    const elementsPerWorkgroup = ${this.elementsPerWorkgroup};\n    const maxAllowRadius = ${this.maxAllowRadius};\n\n    ${main()} {\n      let localDepth = i32(localId.x);\n      let workgroupDepth = i32(workgroupId.x) * elementsPerWorkgroup;\n      let xDepth = workgroupDepth + localDepth - maxAllowRadius;\n      let b = i32(globalId.z) / uniforms.xShape[1];\n      let r = i32(globalId.z) - b * uniforms.xShape[1];\n      let c = i32(globalId.y);\n      let d = workgroupDepth + localDepth;\n\n      var x = 0.0;\n      if (xDepth >= 0 && xDepth < uniforms.xShape[3]) {\n        x = getX(b, r, c, xDepth);\n      }\n      lrnSub[localDepth] = x;\n      workgroupBarrier();\n\n      if (localDepth < elementsPerWorkgroup && d < uniforms.outShape[3]) {\n        var sum = 0.0;\n        let index = localDepth + maxAllowRadius;\n        for (var i = -uniforms.radius; i <= uniforms.radius; i = i + 1) {\n          let z = lrnSub[index + i];\n          sum = sum + z * z;\n        }\n        ${powOperatorSnippet}\n\n        setOutputAtCoords(b, r, c, d, lrnSub[index] * powValue);\n      }\n    } `;\n        return userCode;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibHJuX3dlYmdwdS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2xybl93ZWJncHUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUFDLElBQUksRUFBQyxNQUFNLHVCQUF1QixDQUFDO0FBQzNDLE9BQU8sRUFBQyxtQkFBbUIsSUFBSSxJQUFJLEVBQWdCLE1BQU0sa0JBQWtCLENBQUM7QUFDNUUsT0FBTyxFQUFDLGVBQWUsRUFBRSxrQkFBa0IsRUFBQyxNQUFNLGVBQWUsQ0FBQztBQUVsRSxNQUFNLGtCQUFrQixHQUFHOzs7Ozs7Ozs7O0NBVTFCLENBQUM7QUFFRixNQUFNLE9BQU8sVUFBVTtJQVVyQixZQUFZLE1BQWdCO1FBVDVCLGdCQUFXLEdBQWEsRUFBRSxDQUFDO1FBSTNCLGtCQUFhLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUN0QixhQUFRLEdBQUcsb0RBQW9ELENBQUM7UUFDaEUsa0JBQWEsR0FBNkIsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ3JELFNBQUksR0FBRyxJQUFJLENBQUM7UUFHVixJQUFJLENBQUMsV0FBVyxHQUFHLE1BQU0sQ0FBQztRQUMxQixJQUFJLENBQUMsY0FBYyxHQUFHLGtCQUFrQixDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUMzRCxJQUFJLENBQUMsUUFBUSxHQUFHLGVBQWUsQ0FDM0IsSUFBSSxDQUFDLGNBQWMsRUFBRSxJQUFJLENBQUMsV0FBVyxFQUFFLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQztRQUMvRCxJQUFJLENBQUMsU0FBUyxHQUFHLEtBQUssQ0FBQztJQUN6QixDQUFDO0lBRUQsV0FBVztRQUNULE1BQU0sUUFBUSxHQUFHO01BQ2YsSUFBSSxDQUFDLE9BQU8sQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7VUFpQlQsa0JBQWtCOzs7OztHQUt6QixDQUFDO1FBQ0EsT0FBTyxRQUFRLENBQUM7SUFDbEIsQ0FBQztDQUNGO0FBRUQsTUFBTSxPQUFPLGdCQUFnQjtJQVczQixZQUFZLE1BQWdCLEVBQUUsTUFBYztRQVY1QyxnQkFBVyxHQUFhLEVBQUUsQ0FBQztRQUkzQixrQkFBYSxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDdEIsYUFBUSxHQUFHLG9EQUFvRCxDQUFDO1FBQ2hFLGtCQUFhLEdBQTZCLENBQUMsR0FBRyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUN0RCxtQkFBYyxHQUFHLEVBQUUsQ0FBQztRQUlsQixJQUFJLENBQUMsTUFBTSxDQUNQLE1BQU0sSUFBSSxJQUFJLENBQUMsY0FBYyxFQUM3QixHQUFHLEVBQUUsQ0FBQyx3Q0FDRixJQUFJLENBQUMsY0FBYyx1QkFBdUIsTUFBTSxFQUFFLENBQUMsQ0FBQztRQUU1RCxJQUFJLENBQUMsV0FBVyxHQUFHLE1BQU0sQ0FBQztRQUMxQiwyRUFBMkU7UUFDM0UsNEVBQTRFO1FBQzVFLGVBQWU7UUFDZixJQUFJLENBQUMsb0JBQW9CLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQztRQUM1RSxJQUFJLENBQUMsY0FBYyxHQUFHLEVBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFDLENBQUM7UUFDbEQsSUFBSSxDQUFDLFFBQVEsR0FBRyxlQUFlLENBQUMsSUFBSSxDQUFDLGNBQWMsRUFBRSxJQUFJLENBQUMsV0FBVyxFQUFFO1lBQ3JFLElBQUksQ0FBQyxvQkFBb0IsRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDO1NBQ3hFLENBQUMsQ0FBQztRQUNILElBQUksQ0FBQyxTQUFTLEdBQUcsWUFBWSxDQUFDO0lBQ2hDLENBQUM7SUFFRCxXQUFXO1FBQ1QsTUFBTSxRQUFRLEdBQUc7d0NBQ21CLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDO21DQUMxQixJQUFJLENBQUMsb0JBQW9COzZCQUMvQixJQUFJLENBQUMsY0FBYzs7TUFFMUMsSUFBSSxFQUFFOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztVQXVCRixrQkFBa0I7Ozs7T0FJckIsQ0FBQztRQUNKLE9BQU8sUUFBUSxDQUFDO0lBQ2xCLENBQUM7Q0FDRiIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTEMuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHt1dGlsfSBmcm9tICdAdGVuc29yZmxvdy90ZmpzLWNvcmUnO1xuaW1wb3J0IHtnZXRNYWluSGVhZGVyU3RyaW5nIGFzIG1haW4sIFdlYkdQVVByb2dyYW19IGZyb20gJy4vd2ViZ3B1X3Byb2dyYW0nO1xuaW1wb3J0IHtjb21wdXRlRGlzcGF0Y2gsIGZsYXREaXNwYXRjaExheW91dH0gZnJvbSAnLi93ZWJncHVfdXRpbCc7XG5cbmNvbnN0IHBvd09wZXJhdG9yU25pcHBldCA9IGBcbiAgdmFyIHBvd1ZhbHVlID0gMC4wO1xuICBsZXQgYmFzaXMgPSB1bmlmb3Jtcy5iaWFzICsgdW5pZm9ybXMuYWxwaGEgKiBzdW07XG4gIGlmICh1bmlmb3Jtcy5iZXRhID09IDAuNSkge1xuICAgIHBvd1ZhbHVlID0gaW52ZXJzZVNxcnQoYmFzaXMpO1xuICB9IGVsc2UgaWYgKHVuaWZvcm1zLmJldGEgPT0gMS4wKSB7XG4gICAgcG93VmFsdWUgPSAxLjAgLyBiYXNpcztcbiAgfSBlbHNlIHtcbiAgICBwb3dWYWx1ZSA9IGV4cChsb2coYmFzaXMpICogKC11bmlmb3Jtcy5iZXRhKSk7XG4gIH1cbmA7XG5cbmV4cG9ydCBjbGFzcyBMUk5Qcm9ncmFtIGltcGxlbWVudHMgV2ViR1BVUHJvZ3JhbSB7XG4gIG91dHB1dFNoYXBlOiBudW1iZXJbXSA9IFtdO1xuICBzaGFkZXJLZXk6IHN0cmluZztcbiAgZGlzcGF0Y2hMYXlvdXQ6IHt4OiBudW1iZXJbXX07XG4gIGRpc3BhdGNoOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl07XG4gIHZhcmlhYmxlTmFtZXMgPSBbJ3gnXTtcbiAgdW5pZm9ybXMgPSAncmFkaXVzIDogaTMyLCBiaWFzIDogZjMyLCBhbHBoYSA6IGYzMiwgYmV0YSA6IGYzMiwnO1xuICB3b3JrZ3JvdXBTaXplOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl0gPSBbNjQsIDEsIDFdO1xuICBzaXplID0gdHJ1ZTtcblxuICBjb25zdHJ1Y3Rvcih4U2hhcGU6IG51bWJlcltdKSB7XG4gICAgdGhpcy5vdXRwdXRTaGFwZSA9IHhTaGFwZTtcbiAgICB0aGlzLmRpc3BhdGNoTGF5b3V0ID0gZmxhdERpc3BhdGNoTGF5b3V0KHRoaXMub3V0cHV0U2hhcGUpO1xuICAgIHRoaXMuZGlzcGF0Y2ggPSBjb21wdXRlRGlzcGF0Y2goXG4gICAgICAgIHRoaXMuZGlzcGF0Y2hMYXlvdXQsIHRoaXMub3V0cHV0U2hhcGUsIHRoaXMud29ya2dyb3VwU2l6ZSk7XG4gICAgdGhpcy5zaGFkZXJLZXkgPSAnbHJuJztcbiAgfVxuXG4gIGdldFVzZXJDb2RlKCk6IHN0cmluZyB7XG4gICAgY29uc3QgdXNlckNvZGUgPSBgXG4gICAgJHttYWluKCdpbmRleCcpfSB7XG4gICAgICBpZiAoaW5kZXggPCB1bmlmb3Jtcy5zaXplKSB7XG4gICAgICAgIGxldCBjb29yZHMgPSBnZXRPdXRwdXRDb29yZHMoKTtcbiAgICAgICAgbGV0IGIgPSBjb29yZHNbMF07XG4gICAgICAgIGxldCByID0gY29vcmRzWzFdO1xuICAgICAgICBsZXQgYyA9IGNvb3Jkc1syXTtcbiAgICAgICAgbGV0IGQgPSBjb29yZHNbM107XG5cbiAgICAgICAgbGV0IHggPSBnZXRYKGIsIHIsIGMsIGQpO1xuICAgICAgICB2YXIgc3VtID0gMC4wO1xuICAgICAgICBmb3IgKHZhciBpID0gLXVuaWZvcm1zLnJhZGl1czsgaSA8PSB1bmlmb3Jtcy5yYWRpdXM7IGkgPSBpICsgMSkge1xuICAgICAgICAgIGxldCBpZHggPSBkICsgaTtcbiAgICAgICAgICBpZiAoaWR4ID49IDAgJiYgaWR4IDwgdW5pZm9ybXMueFNoYXBlWzNdKSB7XG4gICAgICAgICAgICBsZXQgeiA9IGdldFgoYiwgciwgYywgaWR4KTtcbiAgICAgICAgICAgIHN1bSA9IHN1bSArIHogKiB6O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAke3Bvd09wZXJhdG9yU25pcHBldH1cblxuICAgICAgICBzZXRPdXRwdXRBdEluZGV4KGluZGV4LCB4ICogcG93VmFsdWUpO1xuICAgICAgfVxuICAgIH1cbiAgYDtcbiAgICByZXR1cm4gdXNlckNvZGU7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIExSTlNoYXJlZFByb2dyYW0gaW1wbGVtZW50cyBXZWJHUFVQcm9ncmFtIHtcbiAgb3V0cHV0U2hhcGU6IG51bWJlcltdID0gW107XG4gIHNoYWRlcktleTogc3RyaW5nO1xuICBkaXNwYXRjaExheW91dDoge3g6IG51bWJlcltdLCB5OiBudW1iZXJbXSwgejogbnVtYmVyW119O1xuICBkaXNwYXRjaDogW251bWJlciwgbnVtYmVyLCBudW1iZXJdO1xuICB2YXJpYWJsZU5hbWVzID0gWyd4J107XG4gIHVuaWZvcm1zID0gJ3JhZGl1cyA6IGkzMiwgYmlhcyA6IGYzMiwgYWxwaGEgOiBmMzIsIGJldGEgOiBmMzIsJztcbiAgd29ya2dyb3VwU2l6ZTogW251bWJlciwgbnVtYmVyLCBudW1iZXJdID0gWzI1NiwgMSwgMV07XG4gIG1heEFsbG93UmFkaXVzID0gMTY7XG4gIGVsZW1lbnRzUGVyV29ya2dyb3VwOiBudW1iZXI7XG5cbiAgY29uc3RydWN0b3IoeFNoYXBlOiBudW1iZXJbXSwgcmFkaXVzOiBudW1iZXIpIHtcbiAgICB1dGlsLmFzc2VydChcbiAgICAgICAgcmFkaXVzIDw9IHRoaXMubWF4QWxsb3dSYWRpdXMsXG4gICAgICAgICgpID0+IGBSYWRpdXMgbXVzdCBiZSBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gJHtcbiAgICAgICAgICAgIHRoaXMubWF4QWxsb3dSYWRpdXN9LCBjdXJyZW50IHJhZGl1cyBpcyAke3JhZGl1c31gKTtcblxuICAgIHRoaXMub3V0cHV0U2hhcGUgPSB4U2hhcGU7XG4gICAgLy8gVGhlIHJlYXNvbiB3aHkgbm90IHVzaW5nIHRoaXMud29ya2dyb3VwU2l6ZVswXSArIDIgKiBtYXhBbGxvd1JhZGl1cyBoZXJlXG4gICAgLy8gaXMgdG8gbWFrZSBzdXJlIHRoYXQgdGhlcmUgaXMgb25seSBvbmUgdGltZSBnbG9iYWwgbWVtb3J5IGxvYWQgYWNjZXNzIGZvclxuICAgIC8vIGVhY2ggdGhyZWFkLlxuICAgIHRoaXMuZWxlbWVudHNQZXJXb3JrZ3JvdXAgPSB0aGlzLndvcmtncm91cFNpemVbMF0gLSAyICogdGhpcy5tYXhBbGxvd1JhZGl1cztcbiAgICB0aGlzLmRpc3BhdGNoTGF5b3V0ID0ge3g6IFszXSwgeTogWzJdLCB6OiBbMCwgMV19O1xuICAgIHRoaXMuZGlzcGF0Y2ggPSBjb21wdXRlRGlzcGF0Y2godGhpcy5kaXNwYXRjaExheW91dCwgdGhpcy5vdXRwdXRTaGFwZSwgW1xuICAgICAgdGhpcy5lbGVtZW50c1Blcldvcmtncm91cCwgdGhpcy53b3JrZ3JvdXBTaXplWzFdLCB0aGlzLndvcmtncm91cFNpemVbMl1cbiAgICBdKTtcbiAgICB0aGlzLnNoYWRlcktleSA9ICdscm5fc2hhcmVkJztcbiAgfVxuXG4gIGdldFVzZXJDb2RlKCk6IHN0cmluZyB7XG4gICAgY29uc3QgdXNlckNvZGUgPSBgXG4gICAgdmFyIDx3b3JrZ3JvdXA+bHJuU3ViOiBhcnJheTxmMzIsICR7dGhpcy53b3JrZ3JvdXBTaXplWzBdfT47XG4gICAgY29uc3QgZWxlbWVudHNQZXJXb3JrZ3JvdXAgPSAke3RoaXMuZWxlbWVudHNQZXJXb3JrZ3JvdXB9O1xuICAgIGNvbnN0IG1heEFsbG93UmFkaXVzID0gJHt0aGlzLm1heEFsbG93UmFkaXVzfTtcblxuICAgICR7bWFpbigpfSB7XG4gICAgICBsZXQgbG9jYWxEZXB0aCA9IGkzMihsb2NhbElkLngpO1xuICAgICAgbGV0IHdvcmtncm91cERlcHRoID0gaTMyKHdvcmtncm91cElkLngpICogZWxlbWVudHNQZXJXb3JrZ3JvdXA7XG4gICAgICBsZXQgeERlcHRoID0gd29ya2dyb3VwRGVwdGggKyBsb2NhbERlcHRoIC0gbWF4QWxsb3dSYWRpdXM7XG4gICAgICBsZXQgYiA9IGkzMihnbG9iYWxJZC56KSAvIHVuaWZvcm1zLnhTaGFwZVsxXTtcbiAgICAgIGxldCByID0gaTMyKGdsb2JhbElkLnopIC0gYiAqIHVuaWZvcm1zLnhTaGFwZVsxXTtcbiAgICAgIGxldCBjID0gaTMyKGdsb2JhbElkLnkpO1xuICAgICAgbGV0IGQgPSB3b3JrZ3JvdXBEZXB0aCArIGxvY2FsRGVwdGg7XG5cbiAgICAgIHZhciB4ID0gMC4wO1xuICAgICAgaWYgKHhEZXB0aCA+PSAwICYmIHhEZXB0aCA8IHVuaWZvcm1zLnhTaGFwZVszXSkge1xuICAgICAgICB4ID0gZ2V0WChiLCByLCBjLCB4RGVwdGgpO1xuICAgICAgfVxuICAgICAgbHJuU3ViW2xvY2FsRGVwdGhdID0geDtcbiAgICAgIHdvcmtncm91cEJhcnJpZXIoKTtcblxuICAgICAgaWYgKGxvY2FsRGVwdGggPCBlbGVtZW50c1Blcldvcmtncm91cCAmJiBkIDwgdW5pZm9ybXMub3V0U2hhcGVbM10pIHtcbiAgICAgICAgdmFyIHN1bSA9IDAuMDtcbiAgICAgICAgbGV0IGluZGV4ID0gbG9jYWxEZXB0aCArIG1heEFsbG93UmFkaXVzO1xuICAgICAgICBmb3IgKHZhciBpID0gLXVuaWZvcm1zLnJhZGl1czsgaSA8PSB1bmlmb3Jtcy5yYWRpdXM7IGkgPSBpICsgMSkge1xuICAgICAgICAgIGxldCB6ID0gbHJuU3ViW2luZGV4ICsgaV07XG4gICAgICAgICAgc3VtID0gc3VtICsgeiAqIHo7XG4gICAgICAgIH1cbiAgICAgICAgJHtwb3dPcGVyYXRvclNuaXBwZXR9XG5cbiAgICAgICAgc2V0T3V0cHV0QXRDb29yZHMoYiwgciwgYywgZCwgbHJuU3ViW2luZGV4XSAqIHBvd1ZhbHVlKTtcbiAgICAgIH1cbiAgICB9IGA7XG4gICAgcmV0dXJuIHVzZXJDb2RlO1xuICB9XG59XG4iXX0=","/**\n * @license\n * Copyright 2022 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { LRN } from '@tensorflow/tfjs-core';\nimport { LRNProgram, LRNSharedProgram } from '../lrn_webgpu';\nexport function lrn(args) {\n    const { inputs, backend, attrs } = args;\n    const { x } = inputs;\n    const { depthRadius, bias, alpha, beta } = attrs;\n    // When the adjacent channels is less than or equal to 16, which could cover\n    // most cases, we use shared memory version to get better performance.\n    // The theoretical adjacent channels may be very large, but the shared memory\n    // size of hardware is limited, so we use the naive version when the adjacent\n    // channels is large.\n    let program;\n    if (depthRadius > 16) {\n        program = new LRNProgram(x.shape);\n    }\n    else {\n        program = new LRNSharedProgram(x.shape, depthRadius);\n    }\n    const uniformData = [\n        { type: 'int32', data: [depthRadius] }, { type: 'float32', data: [bias] },\n        { type: 'float32', data: [alpha] }, { type: 'float32', data: [beta] }\n    ];\n    const res = backend.runWebGPUProgram(program, [x], x.dtype, uniformData);\n    return res;\n}\nexport const lrnConfig = {\n    kernelName: LRN,\n    backendName: 'webgpu',\n    kernelFunc: lrn\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTFJOLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMva2VybmVscy9MUk4udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUEyQixHQUFHLEVBQWtDLE1BQU0sdUJBQXVCLENBQUM7QUFHckcsT0FBTyxFQUFDLFVBQVUsRUFBRSxnQkFBZ0IsRUFBQyxNQUFNLGVBQWUsQ0FBQztBQUUzRCxNQUFNLFVBQVUsR0FBRyxDQUNmLElBQWtFO0lBRXBFLE1BQU0sRUFBQyxNQUFNLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBQyxHQUFHLElBQUksQ0FBQztJQUN0QyxNQUFNLEVBQUMsQ0FBQyxFQUFDLEdBQUcsTUFBTSxDQUFDO0lBQ25CLE1BQU0sRUFBQyxXQUFXLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUMsR0FBRyxLQUFLLENBQUM7SUFFL0MsNEVBQTRFO0lBQzVFLHNFQUFzRTtJQUN0RSw2RUFBNkU7SUFDN0UsNkVBQTZFO0lBQzdFLHFCQUFxQjtJQUNyQixJQUFJLE9BQW9DLENBQUM7SUFDekMsSUFBSSxXQUFXLEdBQUcsRUFBRSxFQUFFO1FBQ3BCLE9BQU8sR0FBRyxJQUFJLFVBQVUsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUM7S0FDbkM7U0FBTTtRQUNMLE9BQU8sR0FBRyxJQUFJLGdCQUFnQixDQUFDLENBQUMsQ0FBQyxLQUFLLEVBQUUsV0FBVyxDQUFDLENBQUM7S0FDdEQ7SUFDRCxNQUFNLFdBQVcsR0FBRztRQUNsQixFQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLENBQUMsV0FBVyxDQUFDLEVBQUMsRUFBRSxFQUFDLElBQUksRUFBRSxTQUFTLEVBQUUsSUFBSSxFQUFFLENBQUMsSUFBSSxDQUFDLEVBQUM7UUFDckUsRUFBQyxJQUFJLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxDQUFDLEtBQUssQ0FBQyxFQUFDLEVBQUUsRUFBQyxJQUFJLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxDQUFDLElBQUksQ0FBQyxFQUFDO0tBQ2xFLENBQUM7SUFDRixNQUFNLEdBQUcsR0FBRyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEtBQUssRUFBRSxXQUFXLENBQUMsQ0FBQztJQUV6RSxPQUFPLEdBQUcsQ0FBQztBQUNiLENBQUM7QUFFRCxNQUFNLENBQUMsTUFBTSxTQUFTLEdBQWlCO0lBQ3JDLFVBQVUsRUFBRSxHQUFHO0lBQ2YsV0FBVyxFQUFFLFFBQVE7SUFDckIsVUFBVSxFQUFFLEdBQTRCO0NBQ3pDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7S2VybmVsQ29uZmlnLCBLZXJuZWxGdW5jLCBMUk4sIExSTkF0dHJzLCBMUk5JbnB1dHMsIFRlbnNvckluZm99IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7V2ViR1BVQmFja2VuZH0gZnJvbSAnLi4vYmFja2VuZF93ZWJncHUnO1xuaW1wb3J0IHtMUk5Qcm9ncmFtLCBMUk5TaGFyZWRQcm9ncmFtfSBmcm9tICcuLi9scm5fd2ViZ3B1JztcblxuZXhwb3J0IGZ1bmN0aW9uIGxybihcbiAgICBhcmdzOiB7aW5wdXRzOiBMUk5JbnB1dHMsIGJhY2tlbmQ6IFdlYkdQVUJhY2tlbmQsIGF0dHJzOiBMUk5BdHRyc30pOlxuICAgIFRlbnNvckluZm8ge1xuICBjb25zdCB7aW5wdXRzLCBiYWNrZW5kLCBhdHRyc30gPSBhcmdzO1xuICBjb25zdCB7eH0gPSBpbnB1dHM7XG4gIGNvbnN0IHtkZXB0aFJhZGl1cywgYmlhcywgYWxwaGEsIGJldGF9ID0gYXR0cnM7XG5cbiAgLy8gV2hlbiB0aGUgYWRqYWNlbnQgY2hhbm5lbHMgaXMgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIDE2LCB3aGljaCBjb3VsZCBjb3ZlclxuICAvLyBtb3N0IGNhc2VzLCB3ZSB1c2Ugc2hhcmVkIG1lbW9yeSB2ZXJzaW9uIHRvIGdldCBiZXR0ZXIgcGVyZm9ybWFuY2UuXG4gIC8vIFRoZSB0aGVvcmV0aWNhbCBhZGphY2VudCBjaGFubmVscyBtYXkgYmUgdmVyeSBsYXJnZSwgYnV0IHRoZSBzaGFyZWQgbWVtb3J5XG4gIC8vIHNpemUgb2YgaGFyZHdhcmUgaXMgbGltaXRlZCwgc28gd2UgdXNlIHRoZSBuYWl2ZSB2ZXJzaW9uIHdoZW4gdGhlIGFkamFjZW50XG4gIC8vIGNoYW5uZWxzIGlzIGxhcmdlLlxuICBsZXQgcHJvZ3JhbTogTFJOUHJvZ3JhbXxMUk5TaGFyZWRQcm9ncmFtO1xuICBpZiAoZGVwdGhSYWRpdXMgPiAxNikge1xuICAgIHByb2dyYW0gPSBuZXcgTFJOUHJvZ3JhbSh4LnNoYXBlKTtcbiAgfSBlbHNlIHtcbiAgICBwcm9ncmFtID0gbmV3IExSTlNoYXJlZFByb2dyYW0oeC5zaGFwZSwgZGVwdGhSYWRpdXMpO1xuICB9XG4gIGNvbnN0IHVuaWZvcm1EYXRhID0gW1xuICAgIHt0eXBlOiAnaW50MzInLCBkYXRhOiBbZGVwdGhSYWRpdXNdfSwge3R5cGU6ICdmbG9hdDMyJywgZGF0YTogW2JpYXNdfSxcbiAgICB7dHlwZTogJ2Zsb2F0MzInLCBkYXRhOiBbYWxwaGFdfSwge3R5cGU6ICdmbG9hdDMyJywgZGF0YTogW2JldGFdfVxuICBdO1xuICBjb25zdCByZXMgPSBiYWNrZW5kLnJ1bldlYkdQVVByb2dyYW0ocHJvZ3JhbSwgW3hdLCB4LmR0eXBlLCB1bmlmb3JtRGF0YSk7XG5cbiAgcmV0dXJuIHJlcztcbn1cblxuZXhwb3J0IGNvbnN0IGxybkNvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBMUk4sXG4gIGJhY2tlbmROYW1lOiAnd2ViZ3B1JyxcbiAga2VybmVsRnVuYzogbHJuIGFzIHVua25vd24gYXMgS2VybmVsRnVuY1xufTtcbiJdfQ==","/**\n * @license\n * Copyright 2023 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { getMainHeaderString as main } from './webgpu_program';\nimport { computeDispatch, flatDispatchLayout } from './webgpu_util';\nexport class LRNGradProgram {\n    constructor(inputShape) {\n        this.outputShape = [];\n        this.variableNames = ['inputImage', 'outputImage', 'dy'];\n        this.uniforms = 'depthRadius : i32, bias : f32, alpha : f32, beta : f32,';\n        this.workgroupSize = [64, 1, 1];\n        this.size = true;\n        this.outputShape = inputShape;\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize);\n        this.shaderKey = 'lrn_grad';\n    }\n    getUserCode() {\n        const userCode = `\n    ${main('index')} {\n      if (index < uniforms.size) {\n        let coords = getOutputCoords();\n        let b = coords[0];\n        let r = coords[1];\n        let c = coords[2];\n\n        let MIN_DEPTH_BEGIN = 0;\n        let MAX_DEPTH_END = uniforms.outShape[3];\n        var result = 0.0;\n        for (var d = MIN_DEPTH_BEGIN; d < MAX_DEPTH_END; d++) {\n          let depthBegin = max(MIN_DEPTH_BEGIN, d - uniforms.depthRadius);\n          let depthEnd = min(MAX_DEPTH_END, d + uniforms.depthRadius + 1);\n\n          var norm = 0.0;\n          for (var k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; k++) {\n            if (k < depthBegin) {\n              continue;\n            } else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            } else {\n              break;\n            }\n          }\n\n          norm = uniforms.alpha * norm + uniforms.bias;\n\n          for (var k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; k++) {\n            if (k < depthBegin) {\n              continue;\n            } else if (k >= depthBegin && k < depthEnd) {\n              var dyi = -2.0 * uniforms.alpha * uniforms.beta\n                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d) / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * uniforms.beta);\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            } else {\n              break;\n            }\n          }\n        }\n\n        setOutputAtIndex(index, result);\n      }\n    }\n  `;\n        return userCode;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibHJuX2dyYWRfd2ViZ3B1LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMvbHJuX2dyYWRfd2ViZ3B1LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sRUFBQyxtQkFBbUIsSUFBSSxJQUFJLEVBQWdCLE1BQU0sa0JBQWtCLENBQUM7QUFDNUUsT0FBTyxFQUFDLGVBQWUsRUFBRSxrQkFBa0IsRUFBQyxNQUFNLGVBQWUsQ0FBQztBQUVsRSxNQUFNLE9BQU8sY0FBYztJQVV6QixZQUFZLFVBQW9CO1FBVGhDLGdCQUFXLEdBQWEsRUFBRSxDQUFDO1FBSTNCLGtCQUFhLEdBQUcsQ0FBQyxZQUFZLEVBQUUsYUFBYSxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQ3BELGFBQVEsR0FBRyx5REFBeUQsQ0FBQztRQUNyRSxrQkFBYSxHQUE2QixDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDckQsU0FBSSxHQUFHLElBQUksQ0FBQztRQUdWLElBQUksQ0FBQyxXQUFXLEdBQUcsVUFBVSxDQUFDO1FBQzlCLElBQUksQ0FBQyxjQUFjLEdBQUcsa0JBQWtCLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQzNELElBQUksQ0FBQyxRQUFRLEdBQUcsZUFBZSxDQUMzQixJQUFJLENBQUMsY0FBYyxFQUFFLElBQUksQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBQy9ELElBQUksQ0FBQyxTQUFTLEdBQUcsVUFBVSxDQUFDO0lBQzlCLENBQUM7SUFFRCxXQUFXO1FBQ1QsTUFBTSxRQUFRLEdBQUc7TUFDZixJQUFJLENBQUMsT0FBTyxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0dBaURoQixDQUFDO1FBQ0EsT0FBTyxRQUFRLENBQUM7SUFDbEIsQ0FBQztDQUNGIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjMgR29vZ2xlIExMQy5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge2dldE1haW5IZWFkZXJTdHJpbmcgYXMgbWFpbiwgV2ViR1BVUHJvZ3JhbX0gZnJvbSAnLi93ZWJncHVfcHJvZ3JhbSc7XG5pbXBvcnQge2NvbXB1dGVEaXNwYXRjaCwgZmxhdERpc3BhdGNoTGF5b3V0fSBmcm9tICcuL3dlYmdwdV91dGlsJztcblxuZXhwb3J0IGNsYXNzIExSTkdyYWRQcm9ncmFtIGltcGxlbWVudHMgV2ViR1BVUHJvZ3JhbSB7XG4gIG91dHB1dFNoYXBlOiBudW1iZXJbXSA9IFtdO1xuICBzaGFkZXJLZXk6IHN0cmluZztcbiAgZGlzcGF0Y2hMYXlvdXQ6IHt4OiBudW1iZXJbXX07XG4gIGRpc3BhdGNoOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl07XG4gIHZhcmlhYmxlTmFtZXMgPSBbJ2lucHV0SW1hZ2UnLCAnb3V0cHV0SW1hZ2UnLCAnZHknXTtcbiAgdW5pZm9ybXMgPSAnZGVwdGhSYWRpdXMgOiBpMzIsIGJpYXMgOiBmMzIsIGFscGhhIDogZjMyLCBiZXRhIDogZjMyLCc7XG4gIHdvcmtncm91cFNpemU6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXSA9IFs2NCwgMSwgMV07XG4gIHNpemUgPSB0cnVlO1xuXG4gIGNvbnN0cnVjdG9yKGlucHV0U2hhcGU6IG51bWJlcltdKSB7XG4gICAgdGhpcy5vdXRwdXRTaGFwZSA9IGlucHV0U2hhcGU7XG4gICAgdGhpcy5kaXNwYXRjaExheW91dCA9IGZsYXREaXNwYXRjaExheW91dCh0aGlzLm91dHB1dFNoYXBlKTtcbiAgICB0aGlzLmRpc3BhdGNoID0gY29tcHV0ZURpc3BhdGNoKFxuICAgICAgICB0aGlzLmRpc3BhdGNoTGF5b3V0LCB0aGlzLm91dHB1dFNoYXBlLCB0aGlzLndvcmtncm91cFNpemUpO1xuICAgIHRoaXMuc2hhZGVyS2V5ID0gJ2xybl9ncmFkJztcbiAgfVxuXG4gIGdldFVzZXJDb2RlKCk6IHN0cmluZyB7XG4gICAgY29uc3QgdXNlckNvZGUgPSBgXG4gICAgJHttYWluKCdpbmRleCcpfSB7XG4gICAgICBpZiAoaW5kZXggPCB1bmlmb3Jtcy5zaXplKSB7XG4gICAgICAgIGxldCBjb29yZHMgPSBnZXRPdXRwdXRDb29yZHMoKTtcbiAgICAgICAgbGV0IGIgPSBjb29yZHNbMF07XG4gICAgICAgIGxldCByID0gY29vcmRzWzFdO1xuICAgICAgICBsZXQgYyA9IGNvb3Jkc1syXTtcblxuICAgICAgICBsZXQgTUlOX0RFUFRIX0JFR0lOID0gMDtcbiAgICAgICAgbGV0IE1BWF9ERVBUSF9FTkQgPSB1bmlmb3Jtcy5vdXRTaGFwZVszXTtcbiAgICAgICAgdmFyIHJlc3VsdCA9IDAuMDtcbiAgICAgICAgZm9yICh2YXIgZCA9IE1JTl9ERVBUSF9CRUdJTjsgZCA8IE1BWF9ERVBUSF9FTkQ7IGQrKykge1xuICAgICAgICAgIGxldCBkZXB0aEJlZ2luID0gbWF4KE1JTl9ERVBUSF9CRUdJTiwgZCAtIHVuaWZvcm1zLmRlcHRoUmFkaXVzKTtcbiAgICAgICAgICBsZXQgZGVwdGhFbmQgPSBtaW4oTUFYX0RFUFRIX0VORCwgZCArIHVuaWZvcm1zLmRlcHRoUmFkaXVzICsgMSk7XG5cbiAgICAgICAgICB2YXIgbm9ybSA9IDAuMDtcbiAgICAgICAgICBmb3IgKHZhciBrID0gTUlOX0RFUFRIX0JFR0lOOyBrIDwgTUFYX0RFUFRIX0VORDsgaysrKSB7XG4gICAgICAgICAgICBpZiAoayA8IGRlcHRoQmVnaW4pIHtcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGsgPj0gZGVwdGhCZWdpbiAmJiBrIDwgZGVwdGhFbmQpIHtcbiAgICAgICAgICAgICAgbm9ybSArPSBnZXRJbnB1dEltYWdlKGIsIHIsIGMsIGspICogZ2V0SW5wdXRJbWFnZShiLCByLCBjLCBrKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIG5vcm0gPSB1bmlmb3Jtcy5hbHBoYSAqIG5vcm0gKyB1bmlmb3Jtcy5iaWFzO1xuXG4gICAgICAgICAgZm9yICh2YXIgayA9IE1JTl9ERVBUSF9CRUdJTjsgayA8IE1BWF9ERVBUSF9FTkQ7IGsrKykge1xuICAgICAgICAgICAgaWYgKGsgPCBkZXB0aEJlZ2luKSB7XG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChrID49IGRlcHRoQmVnaW4gJiYgayA8IGRlcHRoRW5kKSB7XG4gICAgICAgICAgICAgIHZhciBkeWkgPSAtMi4wICogdW5pZm9ybXMuYWxwaGEgKiB1bmlmb3Jtcy5iZXRhXG4gICAgICAgICAgICAgICAgKiBnZXRJbnB1dEltYWdlKGIsIHIsIGMsIGspICogZ2V0T3V0cHV0SW1hZ2UoYiwgciwgYywgZCkgLyBub3JtO1xuICAgICAgICAgICAgICBpZiAoayA9PSBkKSB7XG4gICAgICAgICAgICAgICAgZHlpICs9IHBvdyhub3JtLCAtMS4wICogdW5pZm9ybXMuYmV0YSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKGsgPT0gY29vcmRzWzNdKSB7XG4gICAgICAgICAgICAgICAgZHlpICo9IGdldER5KGIsIHIsIGMsIGQpO1xuICAgICAgICAgICAgICAgIHJlc3VsdCArPSBkeWk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHNldE91dHB1dEF0SW5kZXgoaW5kZXgsIHJlc3VsdCk7XG4gICAgICB9XG4gICAgfVxuICBgO1xuICAgIHJldHVybiB1c2VyQ29kZTtcbiAgfVxufVxuIl19","/**\n * @license\n * Copyright 2023 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { LRNGrad } from '@tensorflow/tfjs-core';\nimport { LRNGradProgram } from '../lrn_grad_webgpu';\nexport function lrnGrad(args) {\n    const { inputs, backend, attrs } = args;\n    const { x, y, dy } = inputs;\n    const { depthRadius, bias, alpha, beta } = attrs;\n    const program = new LRNGradProgram(x.shape);\n    const uniformData = [\n        { type: 'int32', data: [depthRadius] }, { type: 'float32', data: [bias] },\n        { type: 'float32', data: [alpha] }, { type: 'float32', data: [beta] }\n    ];\n    const res = backend.runWebGPUProgram(program, [x, y, dy], x.dtype, uniformData);\n    return res;\n}\nexport const lrnGradConfig = {\n    kernelName: LRNGrad,\n    backendName: 'webgpu',\n    kernelFunc: lrnGrad\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTFJOR3JhZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2tlcm5lbHMvTFJOR3JhZC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQTJCLE9BQU8sRUFBMEMsTUFBTSx1QkFBdUIsQ0FBQztBQUdqSCxPQUFPLEVBQUMsY0FBYyxFQUFDLE1BQU0sb0JBQW9CLENBQUM7QUFFbEQsTUFBTSxVQUFVLE9BQU8sQ0FDbkIsSUFBMEU7SUFFNUUsTUFBTSxFQUFDLE1BQU0sRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFDLEdBQUcsSUFBSSxDQUFDO0lBQ3RDLE1BQU0sRUFBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBQyxHQUFHLE1BQU0sQ0FBQztJQUMxQixNQUFNLEVBQUMsV0FBVyxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFDLEdBQUcsS0FBSyxDQUFDO0lBRS9DLE1BQU0sT0FBTyxHQUFHLElBQUksY0FBYyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUM1QyxNQUFNLFdBQVcsR0FBRztRQUNsQixFQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLENBQUMsV0FBVyxDQUFDLEVBQUMsRUFBRSxFQUFDLElBQUksRUFBRSxTQUFTLEVBQUUsSUFBSSxFQUFFLENBQUMsSUFBSSxDQUFDLEVBQUM7UUFDckUsRUFBQyxJQUFJLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxDQUFDLEtBQUssQ0FBQyxFQUFDLEVBQUUsRUFBQyxJQUFJLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxDQUFDLElBQUksQ0FBQyxFQUFDO0tBQ2xFLENBQUM7SUFDRixNQUFNLEdBQUcsR0FDTCxPQUFPLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsS0FBSyxFQUFFLFdBQVcsQ0FBQyxDQUFDO0lBRXhFLE9BQU8sR0FBRyxDQUFDO0FBQ2IsQ0FBQztBQUVELE1BQU0sQ0FBQyxNQUFNLGFBQWEsR0FBaUI7SUFDekMsVUFBVSxFQUFFLE9BQU87SUFDbkIsV0FBVyxFQUFFLFFBQVE7SUFDckIsVUFBVSxFQUFFLE9BQWdDO0NBQzdDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMyBHb29nbGUgTExDLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7S2VybmVsQ29uZmlnLCBLZXJuZWxGdW5jLCBMUk5HcmFkLCBMUk5HcmFkQXR0cnMsIExSTkdyYWRJbnB1dHMsIFRlbnNvckluZm99IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7V2ViR1BVQmFja2VuZH0gZnJvbSAnLi4vYmFja2VuZF93ZWJncHUnO1xuaW1wb3J0IHtMUk5HcmFkUHJvZ3JhbX0gZnJvbSAnLi4vbHJuX2dyYWRfd2ViZ3B1JztcblxuZXhwb3J0IGZ1bmN0aW9uIGxybkdyYWQoXG4gICAgYXJnczoge2lucHV0czogTFJOR3JhZElucHV0cywgYmFja2VuZDogV2ViR1BVQmFja2VuZCwgYXR0cnM6IExSTkdyYWRBdHRyc30pOlxuICAgIFRlbnNvckluZm8ge1xuICBjb25zdCB7aW5wdXRzLCBiYWNrZW5kLCBhdHRyc30gPSBhcmdzO1xuICBjb25zdCB7eCwgeSwgZHl9ID0gaW5wdXRzO1xuICBjb25zdCB7ZGVwdGhSYWRpdXMsIGJpYXMsIGFscGhhLCBiZXRhfSA9IGF0dHJzO1xuXG4gIGNvbnN0IHByb2dyYW0gPSBuZXcgTFJOR3JhZFByb2dyYW0oeC5zaGFwZSk7XG4gIGNvbnN0IHVuaWZvcm1EYXRhID0gW1xuICAgIHt0eXBlOiAnaW50MzInLCBkYXRhOiBbZGVwdGhSYWRpdXNdfSwge3R5cGU6ICdmbG9hdDMyJywgZGF0YTogW2JpYXNdfSxcbiAgICB7dHlwZTogJ2Zsb2F0MzInLCBkYXRhOiBbYWxwaGFdfSwge3R5cGU6ICdmbG9hdDMyJywgZGF0YTogW2JldGFdfVxuICBdO1xuICBjb25zdCByZXMgPVxuICAgICAgYmFja2VuZC5ydW5XZWJHUFVQcm9ncmFtKHByb2dyYW0sIFt4LCB5LCBkeV0sIHguZHR5cGUsIHVuaWZvcm1EYXRhKTtcblxuICByZXR1cm4gcmVzO1xufVxuXG5leHBvcnQgY29uc3QgbHJuR3JhZENvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBMUk5HcmFkLFxuICBiYWNrZW5kTmFtZTogJ3dlYmdwdScsXG4gIGtlcm5lbEZ1bmM6IGxybkdyYWQgYXMgdW5rbm93biBhcyBLZXJuZWxGdW5jXG59O1xuIl19","/**\n * @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Maximum } from '@tensorflow/tfjs-core';\nimport { BinaryOpType } from '../binary_op_util';\nimport { binaryKernelFunc } from '../kernel_utils/kernel_funcs_utils';\nimport { maximumImplCPU as cpuMaximum } from '../kernel_utils/shared';\nexport const maximum = binaryKernelFunc({\n    opType: BinaryOpType.MAX,\n    cpuKernelImpl: cpuMaximum,\n});\nexport const maximumConfig = {\n    kernelName: Maximum,\n    backendName: 'webgpu',\n    kernelFunc: maximum\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWF4aW11bS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2tlcm5lbHMvTWF4aW11bS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQWUsT0FBTyxFQUFDLE1BQU0sdUJBQXVCLENBQUM7QUFFNUQsT0FBTyxFQUFDLFlBQVksRUFBQyxNQUFNLG1CQUFtQixDQUFDO0FBQy9DLE9BQU8sRUFBQyxnQkFBZ0IsRUFBQyxNQUFNLG9DQUFvQyxDQUFDO0FBQ3BFLE9BQU8sRUFBQyxjQUFjLElBQUksVUFBVSxFQUFDLE1BQU0sd0JBQXdCLENBQUM7QUFFcEUsTUFBTSxDQUFDLE1BQU0sT0FBTyxHQUFHLGdCQUFnQixDQUFDO0lBQ3RDLE1BQU0sRUFBRSxZQUFZLENBQUMsR0FBRztJQUN4QixhQUFhLEVBQUUsVUFBVTtDQUMxQixDQUFDLENBQUM7QUFFSCxNQUFNLENBQUMsTUFBTSxhQUFhLEdBQWlCO0lBQ3pDLFVBQVUsRUFBRSxPQUFPO0lBQ25CLFdBQVcsRUFBRSxRQUFRO0lBQ3JCLFVBQVUsRUFBRSxPQUFPO0NBQ3BCLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7S2VybmVsQ29uZmlnLCBNYXhpbXVtfSBmcm9tICdAdGVuc29yZmxvdy90ZmpzLWNvcmUnO1xuXG5pbXBvcnQge0JpbmFyeU9wVHlwZX0gZnJvbSAnLi4vYmluYXJ5X29wX3V0aWwnO1xuaW1wb3J0IHtiaW5hcnlLZXJuZWxGdW5jfSBmcm9tICcuLi9rZXJuZWxfdXRpbHMva2VybmVsX2Z1bmNzX3V0aWxzJztcbmltcG9ydCB7bWF4aW11bUltcGxDUFUgYXMgY3B1TWF4aW11bX0gZnJvbSAnLi4va2VybmVsX3V0aWxzL3NoYXJlZCc7XG5cbmV4cG9ydCBjb25zdCBtYXhpbXVtID0gYmluYXJ5S2VybmVsRnVuYyh7XG4gIG9wVHlwZTogQmluYXJ5T3BUeXBlLk1BWCxcbiAgY3B1S2VybmVsSW1wbDogY3B1TWF4aW11bSxcbn0pO1xuXG5leHBvcnQgY29uc3QgbWF4aW11bUNvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBNYXhpbXVtLFxuICBiYWNrZW5kTmFtZTogJ3dlYmdwdScsXG4gIGtlcm5lbEZ1bmM6IG1heGltdW1cbn07XG4iXX0=","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { backend_util, MaxPool } from '@tensorflow/tfjs-core';\nimport { poolImpl } from './Pool_impl';\nexport function maxPool(args) {\n    const { inputs, backend, attrs } = args;\n    const { x } = inputs;\n    const { filterSize, strides, pad, dimRoundingMode } = attrs;\n    const dilations = 1;\n    const convInfo = backend_util.computePool2DInfo(x.shape, filterSize, strides, dilations, pad, dimRoundingMode);\n    return poolImpl(x, convInfo, 'max', backend);\n}\nexport const maxPoolConfig = {\n    kernelName: MaxPool,\n    backendName: 'webgpu',\n    kernelFunc: maxPool\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWF4UG9vbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2tlcm5lbHMvTWF4UG9vbC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFDSCxPQUFPLEVBQUMsWUFBWSxFQUE0QixPQUFPLEVBQTBDLE1BQU0sdUJBQXVCLENBQUM7QUFHL0gsT0FBTyxFQUFDLFFBQVEsRUFBQyxNQUFNLGFBQWEsQ0FBQztBQUVyQyxNQUFNLFVBQVUsT0FBTyxDQUNuQixJQUEwRTtJQUU1RSxNQUFNLEVBQUMsTUFBTSxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUMsR0FBRyxJQUFJLENBQUM7SUFDdEMsTUFBTSxFQUFDLENBQUMsRUFBQyxHQUFHLE1BQU0sQ0FBQztJQUNuQixNQUFNLEVBQUMsVUFBVSxFQUFFLE9BQU8sRUFBRSxHQUFHLEVBQUUsZUFBZSxFQUFDLEdBQUcsS0FBSyxDQUFDO0lBQzFELE1BQU0sU0FBUyxHQUFHLENBQUMsQ0FBQztJQUNwQixNQUFNLFFBQVEsR0FBRyxZQUFZLENBQUMsaUJBQWlCLENBQzNDLENBQUMsQ0FBQyxLQUF5QyxFQUFFLFVBQVUsRUFBRSxPQUFPLEVBQ2hFLFNBQVMsRUFBRSxHQUFHLEVBQUUsZUFBZSxDQUFDLENBQUM7SUFFckMsT0FBTyxRQUFRLENBQUMsQ0FBQyxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQUUsT0FBTyxDQUFDLENBQUM7QUFDL0MsQ0FBQztBQUVELE1BQU0sQ0FBQyxNQUFNLGFBQWEsR0FBaUI7SUFDekMsVUFBVSxFQUFFLE9BQU87SUFDbkIsV0FBVyxFQUFFLFFBQVE7SUFDckIsVUFBVSxFQUFFLE9BQWdDO0NBQzdDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5pbXBvcnQge2JhY2tlbmRfdXRpbCwgS2VybmVsQ29uZmlnLCBLZXJuZWxGdW5jLCBNYXhQb29sLCBNYXhQb29sQXR0cnMsIE1heFBvb2xJbnB1dHMsIFRlbnNvckluZm99IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7V2ViR1BVQmFja2VuZH0gZnJvbSAnLi4vYmFja2VuZF93ZWJncHUnO1xuaW1wb3J0IHtwb29sSW1wbH0gZnJvbSAnLi9Qb29sX2ltcGwnO1xuXG5leHBvcnQgZnVuY3Rpb24gbWF4UG9vbChcbiAgICBhcmdzOiB7aW5wdXRzOiBNYXhQb29sSW5wdXRzLCBiYWNrZW5kOiBXZWJHUFVCYWNrZW5kLCBhdHRyczogTWF4UG9vbEF0dHJzfSk6XG4gICAgVGVuc29ySW5mbyB7XG4gIGNvbnN0IHtpbnB1dHMsIGJhY2tlbmQsIGF0dHJzfSA9IGFyZ3M7XG4gIGNvbnN0IHt4fSA9IGlucHV0cztcbiAgY29uc3Qge2ZpbHRlclNpemUsIHN0cmlkZXMsIHBhZCwgZGltUm91bmRpbmdNb2RlfSA9IGF0dHJzO1xuICBjb25zdCBkaWxhdGlvbnMgPSAxO1xuICBjb25zdCBjb252SW5mbyA9IGJhY2tlbmRfdXRpbC5jb21wdXRlUG9vbDJESW5mbyhcbiAgICAgIHguc2hhcGUgYXMgW251bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcl0sIGZpbHRlclNpemUsIHN0cmlkZXMsXG4gICAgICBkaWxhdGlvbnMsIHBhZCwgZGltUm91bmRpbmdNb2RlKTtcblxuICByZXR1cm4gcG9vbEltcGwoeCwgY29udkluZm8sICdtYXgnLCBiYWNrZW5kKTtcbn1cblxuZXhwb3J0IGNvbnN0IG1heFBvb2xDb25maWc6IEtlcm5lbENvbmZpZyA9IHtcbiAga2VybmVsTmFtZTogTWF4UG9vbCxcbiAgYmFja2VuZE5hbWU6ICd3ZWJncHUnLFxuICBrZXJuZWxGdW5jOiBtYXhQb29sIGFzIHVua25vd24gYXMgS2VybmVsRnVuY1xufTtcbiJdfQ==","/**\n * @license\n * Copyright 2023 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { backend_util, MaxPool3D } from '@tensorflow/tfjs-core';\nimport { Pool3DProgram } from '../pool_webgpu';\nexport function maxPool3d(args) {\n    const { inputs, backend, attrs } = args;\n    const { x } = inputs;\n    const { filterSize, strides, pad, dataFormat, dimRoundingMode } = attrs;\n    const dilations = [1, 1, 1];\n    const convInfo = backend_util.computePool3DInfo(x.shape, filterSize, strides, dilations, pad, dimRoundingMode, dataFormat);\n    const maxPoolProgram = new Pool3DProgram(convInfo, 'max');\n    const dimensions = [\n        {\n            type: 'int32',\n            data: [convInfo.strideDepth, convInfo.strideHeight, convInfo.strideWidth]\n        },\n        {\n            type: 'int32',\n            data: [convInfo.padInfo.front, convInfo.padInfo.top, convInfo.padInfo.left]\n        },\n        {\n            type: 'int32',\n            data: [convInfo.inDepth, convInfo.inHeight, convInfo.inWidth]\n        },\n        {\n            type: 'int32',\n            data: [\n                convInfo.effectiveFilterDepth, convInfo.effectiveFilterHeight,\n                convInfo.effectiveFilterWidth\n            ]\n        }\n    ];\n    return backend.runWebGPUProgram(maxPoolProgram, [x], x.dtype, dimensions);\n}\nexport const maxPool3DConfig = {\n    kernelName: MaxPool3D,\n    backendName: 'webgpu',\n    kernelFunc: maxPool3d\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWF4UG9vbDNELmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMva2VybmVscy9NYXhQb29sM0QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBQ0gsT0FBTyxFQUFDLFlBQVksRUFBNEIsU0FBUyxFQUE4QyxNQUFNLHVCQUF1QixDQUFDO0FBR3JJLE9BQU8sRUFBQyxhQUFhLEVBQUMsTUFBTSxnQkFBZ0IsQ0FBQztBQUU3QyxNQUFNLFVBQVUsU0FBUyxDQUFDLElBSXpCO0lBQ0MsTUFBTSxFQUFDLE1BQU0sRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFDLEdBQUcsSUFBSSxDQUFDO0lBQ3RDLE1BQU0sRUFBQyxDQUFDLEVBQUMsR0FBRyxNQUFNLENBQUM7SUFDbkIsTUFBTSxFQUFDLFVBQVUsRUFBRSxPQUFPLEVBQUUsR0FBRyxFQUFFLFVBQVUsRUFBRSxlQUFlLEVBQUMsR0FBRyxLQUFLLENBQUM7SUFDdEUsTUFBTSxTQUFTLEdBQTZCLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUV0RCxNQUFNLFFBQVEsR0FBRyxZQUFZLENBQUMsaUJBQWlCLENBQzNDLENBQUMsQ0FBQyxLQUFpRCxFQUFFLFVBQVUsRUFBRSxPQUFPLEVBQ3hFLFNBQVMsRUFBRSxHQUFHLEVBQUUsZUFBZSxFQUFFLFVBQVUsQ0FBQyxDQUFDO0lBQ2pELE1BQU0sY0FBYyxHQUFHLElBQUksYUFBYSxDQUFDLFFBQVEsRUFBRSxLQUFLLENBQUMsQ0FBQztJQUMxRCxNQUFNLFVBQVUsR0FBRztRQUNqQjtZQUNFLElBQUksRUFBRSxPQUFPO1lBQ2IsSUFBSSxFQUFFLENBQUMsUUFBUSxDQUFDLFdBQVcsRUFBRSxRQUFRLENBQUMsWUFBWSxFQUFFLFFBQVEsQ0FBQyxXQUFXLENBQUM7U0FDMUU7UUFDRDtZQUNFLElBQUksRUFBRSxPQUFPO1lBQ2IsSUFBSSxFQUNBLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsUUFBUSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsUUFBUSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUM7U0FDMUU7UUFDRDtZQUNFLElBQUksRUFBRSxPQUFPO1lBQ2IsSUFBSSxFQUFFLENBQUMsUUFBUSxDQUFDLE9BQU8sRUFBRSxRQUFRLENBQUMsUUFBUSxFQUFFLFFBQVEsQ0FBQyxPQUFPLENBQUM7U0FDOUQ7UUFDRDtZQUNFLElBQUksRUFBRSxPQUFPO1lBQ2IsSUFBSSxFQUFFO2dCQUNKLFFBQVEsQ0FBQyxvQkFBb0IsRUFBRSxRQUFRLENBQUMscUJBQXFCO2dCQUM3RCxRQUFRLENBQUMsb0JBQW9CO2FBQzlCO1NBQ0Y7S0FDRixDQUFDO0lBQ0YsT0FBTyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsY0FBYyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEtBQUssRUFBRSxVQUFVLENBQUMsQ0FBQztBQUM1RSxDQUFDO0FBRUQsTUFBTSxDQUFDLE1BQU0sZUFBZSxHQUFpQjtJQUMzQyxVQUFVLEVBQUUsU0FBUztJQUNyQixXQUFXLEVBQUUsUUFBUTtJQUNyQixVQUFVLEVBQUUsU0FBa0M7Q0FDL0MsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTEMuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cbmltcG9ydCB7YmFja2VuZF91dGlsLCBLZXJuZWxDb25maWcsIEtlcm5lbEZ1bmMsIE1heFBvb2wzRCwgTWF4UG9vbDNEQXR0cnMsIE1heFBvb2wzRElucHV0cywgVGVuc29ySW5mb30gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcblxuaW1wb3J0IHtXZWJHUFVCYWNrZW5kfSBmcm9tICcuLi9iYWNrZW5kX3dlYmdwdSc7XG5pbXBvcnQge1Bvb2wzRFByb2dyYW19IGZyb20gJy4uL3Bvb2xfd2ViZ3B1JztcblxuZXhwb3J0IGZ1bmN0aW9uIG1heFBvb2wzZChhcmdzOiB7XG4gIGlucHV0czogTWF4UG9vbDNESW5wdXRzLFxuICBiYWNrZW5kOiBXZWJHUFVCYWNrZW5kLFxuICBhdHRyczogTWF4UG9vbDNEQXR0cnNcbn0pOiBUZW5zb3JJbmZvIHtcbiAgY29uc3Qge2lucHV0cywgYmFja2VuZCwgYXR0cnN9ID0gYXJncztcbiAgY29uc3Qge3h9ID0gaW5wdXRzO1xuICBjb25zdCB7ZmlsdGVyU2l6ZSwgc3RyaWRlcywgcGFkLCBkYXRhRm9ybWF0LCBkaW1Sb3VuZGluZ01vZGV9ID0gYXR0cnM7XG4gIGNvbnN0IGRpbGF0aW9uczogW251bWJlciwgbnVtYmVyLCBudW1iZXJdID0gWzEsIDEsIDFdO1xuXG4gIGNvbnN0IGNvbnZJbmZvID0gYmFja2VuZF91dGlsLmNvbXB1dGVQb29sM0RJbmZvKFxuICAgICAgeC5zaGFwZSBhcyBbbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXJdLCBmaWx0ZXJTaXplLCBzdHJpZGVzLFxuICAgICAgZGlsYXRpb25zLCBwYWQsIGRpbVJvdW5kaW5nTW9kZSwgZGF0YUZvcm1hdCk7XG4gIGNvbnN0IG1heFBvb2xQcm9ncmFtID0gbmV3IFBvb2wzRFByb2dyYW0oY29udkluZm8sICdtYXgnKTtcbiAgY29uc3QgZGltZW5zaW9ucyA9IFtcbiAgICB7XG4gICAgICB0eXBlOiAnaW50MzInLFxuICAgICAgZGF0YTogW2NvbnZJbmZvLnN0cmlkZURlcHRoLCBjb252SW5mby5zdHJpZGVIZWlnaHQsIGNvbnZJbmZvLnN0cmlkZVdpZHRoXVxuICAgIH0sXG4gICAge1xuICAgICAgdHlwZTogJ2ludDMyJyxcbiAgICAgIGRhdGE6XG4gICAgICAgICAgW2NvbnZJbmZvLnBhZEluZm8uZnJvbnQsIGNvbnZJbmZvLnBhZEluZm8udG9wLCBjb252SW5mby5wYWRJbmZvLmxlZnRdXG4gICAgfSxcbiAgICB7XG4gICAgICB0eXBlOiAnaW50MzInLFxuICAgICAgZGF0YTogW2NvbnZJbmZvLmluRGVwdGgsIGNvbnZJbmZvLmluSGVpZ2h0LCBjb252SW5mby5pbldpZHRoXVxuICAgIH0sXG4gICAge1xuICAgICAgdHlwZTogJ2ludDMyJyxcbiAgICAgIGRhdGE6IFtcbiAgICAgICAgY29udkluZm8uZWZmZWN0aXZlRmlsdGVyRGVwdGgsIGNvbnZJbmZvLmVmZmVjdGl2ZUZpbHRlckhlaWdodCxcbiAgICAgICAgY29udkluZm8uZWZmZWN0aXZlRmlsdGVyV2lkdGhcbiAgICAgIF1cbiAgICB9XG4gIF07XG4gIHJldHVybiBiYWNrZW5kLnJ1bldlYkdQVVByb2dyYW0obWF4UG9vbFByb2dyYW0sIFt4XSwgeC5kdHlwZSwgZGltZW5zaW9ucyk7XG59XG5cbmV4cG9ydCBjb25zdCBtYXhQb29sM0RDb25maWc6IEtlcm5lbENvbmZpZyA9IHtcbiAga2VybmVsTmFtZTogTWF4UG9vbDNELFxuICBiYWNrZW5kTmFtZTogJ3dlYmdwdScsXG4gIGtlcm5lbEZ1bmM6IG1heFBvb2wzZCBhcyB1bmtub3duIGFzIEtlcm5lbEZ1bmNcbn07XG4iXX0=","/**\n * @license\n * Copyright 2023 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { getMainHeaderString as main } from './webgpu_program';\nimport { computeDispatch, flatDispatchLayout } from './webgpu_util';\nexport class MaxPool2DBackpropProgram {\n    constructor(convInfo) {\n        this.variableNames = ['dy', 'maxPos'];\n        this.uniforms = `strides : vec2<i32>, pads : vec2<i32>, dilations : vec2<i32>, filterDims : vec2<i32>,\n       outHeight : i32, outWidth : i32`;\n        this.workgroupSize = [64, 1, 1];\n        this.size = true;\n        this.outputShape = convInfo.inShape;\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize);\n        this.shaderKey = 'maxPool2DBackprop';\n    }\n    getUserCode() {\n        const userCode = `\n      ${main('index')} {\n      if (index < uniforms.size) {\n        let coords = getCoordsFromIndex(index);\n        let batch = coords[0];\n        let d = coords[3];\n\n        let dyRCCorner = vec2<i32>(coords.yz) - uniforms.pads;\n        let dyRCorner = dyRCCorner.x;\n        let dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        var dotProd = 0.0;\n        let lastIndex = uniforms.filterDims[0] * uniforms.filterDims[1] - 1;\n        for (var wR = 0; wR < uniforms.filterDims[0]; wR += uniforms.dilations[0]) {\n          let dyR = f32(dyRCorner + wR) / f32(uniforms.strides[0]);\n\n          if (dyR < 0.0 || dyR >= f32(uniforms.outHeight) || fract(dyR) > 0.0) {\n            continue;\n          }\n          let idyR = i32(dyR);\n\n          for (var wC = 0; wC < uniforms.filterDims[1]; wC += uniforms.dilations[1]) {\n            let dyC = f32(dyCCorner + wC) / f32(uniforms.strides[1]);\n\n            if (dyC < 0.0 || dyC >= f32(uniforms.outWidth) || fract(dyC) > 0.0) {\n              continue;\n            }\n            let idyC = i32(dyC);\n\n            let dyValue = getDy(batch, idyR, idyC, d);\n            let maxPosValue = lastIndex - i32(getMaxPos(batch, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            let curPosValue = wR * uniforms.filterDims[1] + wC;\n            let mask = select(0.0, 1.0, maxPosValue == curPosValue);\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutputAtIndex(index, dotProd);\n      }\n    }\n    `;\n        return userCode;\n    }\n}\nexport class MaxPool3DBackpropProgram {\n    constructor(convInfo) {\n        this.variableNames = ['dy', 'maxPos'];\n        this.uniforms = `strides : vec3<i32>, pads : vec3<i32>, filterDims : vec3<i32>,\n      outDepth : i32, outHeight : i32, outWidth : i32`;\n        this.workgroupSize = [64, 1, 1];\n        this.size = true;\n        this.outputShape = convInfo.inShape;\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize);\n        this.shaderKey = 'maxPool3DBackprop';\n    }\n    getUserCode() {\n        const userCode = `\n      ${main('index')} {\n      if (index < uniforms.size) {\n        let coords = getCoordsFromIndex(index);\n        let batch = coords.x;\n        let ch = coords.u;\n\n        let dyCorner = vec3<i32>(coords.y, coords.z, coords.w) - uniforms.pads;\n        let dyDCorner = dyCorner.x;\n        let dyRCorner = dyCorner.y;\n        let dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        var dotProd = 0.0;\n        let lastIndex = uniforms.filterDims[0] * uniforms.filterDims[1] * uniforms.filterDims[2] - 1;\n\n        for (var wD = 0; wD < uniforms.filterDims[0]; wD++) {\n          let dyD = f32(dyDCorner + wD) / f32(uniforms.strides[0]);\n\n          if (dyD < 0.0 || dyD >= f32(uniforms.outDepth) || fract(dyD) > 0.0) {\n            continue;\n          }\n          let idyD = i32(dyD);\n\n          for (var wR = 0; wR < uniforms.filterDims[1]; wR++) {\n            let dyR = f32(dyRCorner + wR) / f32(uniforms.strides[1]);\n\n            if (dyR < 0.0 || dyR >= f32(uniforms.outHeight) || fract(dyR) > 0.0) {\n              continue;\n            }\n            let idyR = i32(dyR);\n\n            for (var wC = 0; wC < uniforms.filterDims[2]; wC++) {\n              let dyC = f32(dyCCorner + wC) / f32(uniforms.strides[2]);\n\n              if (dyC < 0.0 || dyC >= f32(uniforms.outWidth) || fract(dyC) > 0.0) {\n                continue;\n              }\n              let idyC = i32(dyC);\n\n              let dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              let maxPosValue = lastIndex - i32(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              let curPosValue = wD * uniforms.filterDims[1] * uniforms.filterDims[2] + wR * uniforms.filterDims[2] + wC;\n              let mask = select(0.0, 1.0, maxPosValue == curPosValue);\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n\n        setOutputAtIndex(index, dotProd);\n      }\n    }\n    `;\n        return userCode;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWF4X3Bvb2xfYmFja3Byb3Bfd2ViZ3B1LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMvbWF4X3Bvb2xfYmFja3Byb3Bfd2ViZ3B1LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUdILE9BQU8sRUFBQyxtQkFBbUIsSUFBSSxJQUFJLEVBQWdCLE1BQU0sa0JBQWtCLENBQUM7QUFDNUUsT0FBTyxFQUFDLGVBQWUsRUFBRSxrQkFBa0IsRUFBQyxNQUFNLGVBQWUsQ0FBQztBQUVsRSxNQUFNLE9BQU8sd0JBQXdCO0lBWW5DLFlBQVksUUFBaUM7UUFQN0Msa0JBQWEsR0FBRyxDQUFDLElBQUksRUFBRSxRQUFRLENBQUMsQ0FBQztRQUNqQyxhQUFRLEdBQ0o7dUNBQ2lDLENBQUM7UUFDdEMsa0JBQWEsR0FBNkIsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ3JELFNBQUksR0FBRyxJQUFJLENBQUM7UUFHVixJQUFJLENBQUMsV0FBVyxHQUFHLFFBQVEsQ0FBQyxPQUFPLENBQUM7UUFFcEMsSUFBSSxDQUFDLGNBQWMsR0FBRyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7UUFFM0QsSUFBSSxDQUFDLFFBQVEsR0FBRyxlQUFlLENBQzNCLElBQUksQ0FBQyxjQUFjLEVBQUUsSUFBSSxDQUFDLFdBQVcsRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7UUFFL0QsSUFBSSxDQUFDLFNBQVMsR0FBRyxtQkFBbUIsQ0FBQztJQUN2QyxDQUFDO0lBRUQsV0FBVztRQUNULE1BQU0sUUFBUSxHQUFHO1FBQ2IsSUFBSSxDQUFDLE9BQU8sQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztLQTJDaEIsQ0FBQztRQUNGLE9BQU8sUUFBUSxDQUFDO0lBQ2xCLENBQUM7Q0FDRjtBQUVELE1BQU0sT0FBTyx3QkFBd0I7SUFXbkMsWUFBWSxRQUFpQztRQU43QyxrQkFBYSxHQUFHLENBQUMsSUFBSSxFQUFFLFFBQVEsQ0FBQyxDQUFDO1FBQ2pDLGFBQVEsR0FBRztzREFDeUMsQ0FBQztRQUNyRCxrQkFBYSxHQUE2QixDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDckQsU0FBSSxHQUFHLElBQUksQ0FBQztRQUdWLElBQUksQ0FBQyxXQUFXLEdBQUcsUUFBUSxDQUFDLE9BQU8sQ0FBQztRQUVwQyxJQUFJLENBQUMsY0FBYyxHQUFHLGtCQUFrQixDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUUzRCxJQUFJLENBQUMsUUFBUSxHQUFHLGVBQWUsQ0FDM0IsSUFBSSxDQUFDLGNBQWMsRUFBRSxJQUFJLENBQUMsV0FBVyxFQUFFLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQztRQUUvRCxJQUFJLENBQUMsU0FBUyxHQUFHLG1CQUFtQixDQUFDO0lBQ3ZDLENBQUM7SUFFRCxXQUFXO1FBQ1QsTUFBTSxRQUFRLEdBQUc7UUFDYixJQUFJLENBQUMsT0FBTyxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztLQXdEaEIsQ0FBQztRQUNGLE9BQU8sUUFBUSxDQUFDO0lBQ2xCLENBQUM7Q0FDRiIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTEMuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtiYWNrZW5kX3V0aWx9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5pbXBvcnQge2dldE1haW5IZWFkZXJTdHJpbmcgYXMgbWFpbiwgV2ViR1BVUHJvZ3JhbX0gZnJvbSAnLi93ZWJncHVfcHJvZ3JhbSc7XG5pbXBvcnQge2NvbXB1dGVEaXNwYXRjaCwgZmxhdERpc3BhdGNoTGF5b3V0fSBmcm9tICcuL3dlYmdwdV91dGlsJztcblxuZXhwb3J0IGNsYXNzIE1heFBvb2wyREJhY2twcm9wUHJvZ3JhbSBpbXBsZW1lbnRzIFdlYkdQVVByb2dyYW0ge1xuICBvdXRwdXRTaGFwZTogbnVtYmVyW107XG4gIHNoYWRlcktleTogc3RyaW5nO1xuICBkaXNwYXRjaExheW91dDoge3g6IG51bWJlcltdfTtcbiAgZGlzcGF0Y2g6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXTtcbiAgdmFyaWFibGVOYW1lcyA9IFsnZHknLCAnbWF4UG9zJ107XG4gIHVuaWZvcm1zID1cbiAgICAgIGBzdHJpZGVzIDogdmVjMjxpMzI+LCBwYWRzIDogdmVjMjxpMzI+LCBkaWxhdGlvbnMgOiB2ZWMyPGkzMj4sIGZpbHRlckRpbXMgOiB2ZWMyPGkzMj4sXG4gICAgICAgb3V0SGVpZ2h0IDogaTMyLCBvdXRXaWR0aCA6IGkzMmA7XG4gIHdvcmtncm91cFNpemU6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXSA9IFs2NCwgMSwgMV07XG4gIHNpemUgPSB0cnVlO1xuXG4gIGNvbnN0cnVjdG9yKGNvbnZJbmZvOiBiYWNrZW5kX3V0aWwuQ29udjJESW5mbykge1xuICAgIHRoaXMub3V0cHV0U2hhcGUgPSBjb252SW5mby5pblNoYXBlO1xuXG4gICAgdGhpcy5kaXNwYXRjaExheW91dCA9IGZsYXREaXNwYXRjaExheW91dCh0aGlzLm91dHB1dFNoYXBlKTtcblxuICAgIHRoaXMuZGlzcGF0Y2ggPSBjb21wdXRlRGlzcGF0Y2goXG4gICAgICAgIHRoaXMuZGlzcGF0Y2hMYXlvdXQsIHRoaXMub3V0cHV0U2hhcGUsIHRoaXMud29ya2dyb3VwU2l6ZSk7XG5cbiAgICB0aGlzLnNoYWRlcktleSA9ICdtYXhQb29sMkRCYWNrcHJvcCc7XG4gIH1cblxuICBnZXRVc2VyQ29kZSgpOiBzdHJpbmcge1xuICAgIGNvbnN0IHVzZXJDb2RlID0gYFxuICAgICAgJHttYWluKCdpbmRleCcpfSB7XG4gICAgICBpZiAoaW5kZXggPCB1bmlmb3Jtcy5zaXplKSB7XG4gICAgICAgIGxldCBjb29yZHMgPSBnZXRDb29yZHNGcm9tSW5kZXgoaW5kZXgpO1xuICAgICAgICBsZXQgYmF0Y2ggPSBjb29yZHNbMF07XG4gICAgICAgIGxldCBkID0gY29vcmRzWzNdO1xuXG4gICAgICAgIGxldCBkeVJDQ29ybmVyID0gdmVjMjxpMzI+KGNvb3Jkcy55eikgLSB1bmlmb3Jtcy5wYWRzO1xuICAgICAgICBsZXQgZHlSQ29ybmVyID0gZHlSQ0Nvcm5lci54O1xuICAgICAgICBsZXQgZHlDQ29ybmVyID0gZHlSQ0Nvcm5lci55O1xuXG4gICAgICAgIC8vIENvbnZvbHZlIGR5KD8sID8sIGQpIHdpdGggcG9zIG1hc2soOiwgOiwgZCkgdG8gZ2V0IGR4KHhSLCB4QywgZCkuXG4gICAgICAgIC8vID8gPSB0byBiZSBkZXRlcm1pbmVkLiA6ID0gYWNyb3NzIGFsbCB2YWx1ZXMgaW4gdGhhdCBheGlzLlxuICAgICAgICB2YXIgZG90UHJvZCA9IDAuMDtcbiAgICAgICAgbGV0IGxhc3RJbmRleCA9IHVuaWZvcm1zLmZpbHRlckRpbXNbMF0gKiB1bmlmb3Jtcy5maWx0ZXJEaW1zWzFdIC0gMTtcbiAgICAgICAgZm9yICh2YXIgd1IgPSAwOyB3UiA8IHVuaWZvcm1zLmZpbHRlckRpbXNbMF07IHdSICs9IHVuaWZvcm1zLmRpbGF0aW9uc1swXSkge1xuICAgICAgICAgIGxldCBkeVIgPSBmMzIoZHlSQ29ybmVyICsgd1IpIC8gZjMyKHVuaWZvcm1zLnN0cmlkZXNbMF0pO1xuXG4gICAgICAgICAgaWYgKGR5UiA8IDAuMCB8fCBkeVIgPj0gZjMyKHVuaWZvcm1zLm91dEhlaWdodCkgfHwgZnJhY3QoZHlSKSA+IDAuMCkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGxldCBpZHlSID0gaTMyKGR5Uik7XG5cbiAgICAgICAgICBmb3IgKHZhciB3QyA9IDA7IHdDIDwgdW5pZm9ybXMuZmlsdGVyRGltc1sxXTsgd0MgKz0gdW5pZm9ybXMuZGlsYXRpb25zWzFdKSB7XG4gICAgICAgICAgICBsZXQgZHlDID0gZjMyKGR5Q0Nvcm5lciArIHdDKSAvIGYzMih1bmlmb3Jtcy5zdHJpZGVzWzFdKTtcblxuICAgICAgICAgICAgaWYgKGR5QyA8IDAuMCB8fCBkeUMgPj0gZjMyKHVuaWZvcm1zLm91dFdpZHRoKSB8fCBmcmFjdChkeUMpID4gMC4wKSB7XG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IGlkeUMgPSBpMzIoZHlDKTtcblxuICAgICAgICAgICAgbGV0IGR5VmFsdWUgPSBnZXREeShiYXRjaCwgaWR5UiwgaWR5QywgZCk7XG4gICAgICAgICAgICBsZXQgbWF4UG9zVmFsdWUgPSBsYXN0SW5kZXggLSBpMzIoZ2V0TWF4UG9zKGJhdGNoLCBpZHlSLCBpZHlDLCBkKSk7XG5cbiAgICAgICAgICAgIC8vIEdldCB0aGUgY3VycmVudCB2YWx1ZSwgY2hlY2sgaXQgYWdhaW5zdCB0aGUgdmFsdWUgZnJvbSB0aGVcbiAgICAgICAgICAgIC8vIHBvc2l0aW9uIG1hdHJpeC5cbiAgICAgICAgICAgIGxldCBjdXJQb3NWYWx1ZSA9IHdSICogdW5pZm9ybXMuZmlsdGVyRGltc1sxXSArIHdDO1xuICAgICAgICAgICAgbGV0IG1hc2sgPSBzZWxlY3QoMC4wLCAxLjAsIG1heFBvc1ZhbHVlID09IGN1clBvc1ZhbHVlKTtcbiAgICAgICAgICAgIGRvdFByb2QgKz0gZHlWYWx1ZSAqIG1hc2s7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNldE91dHB1dEF0SW5kZXgoaW5kZXgsIGRvdFByb2QpO1xuICAgICAgfVxuICAgIH1cbiAgICBgO1xuICAgIHJldHVybiB1c2VyQ29kZTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgTWF4UG9vbDNEQmFja3Byb3BQcm9ncmFtIGltcGxlbWVudHMgV2ViR1BVUHJvZ3JhbSB7XG4gIG91dHB1dFNoYXBlOiBudW1iZXJbXTtcbiAgc2hhZGVyS2V5OiBzdHJpbmc7XG4gIGRpc3BhdGNoTGF5b3V0OiB7eDogbnVtYmVyW119O1xuICBkaXNwYXRjaDogW251bWJlciwgbnVtYmVyLCBudW1iZXJdO1xuICB2YXJpYWJsZU5hbWVzID0gWydkeScsICdtYXhQb3MnXTtcbiAgdW5pZm9ybXMgPSBgc3RyaWRlcyA6IHZlYzM8aTMyPiwgcGFkcyA6IHZlYzM8aTMyPiwgZmlsdGVyRGltcyA6IHZlYzM8aTMyPixcbiAgICAgIG91dERlcHRoIDogaTMyLCBvdXRIZWlnaHQgOiBpMzIsIG91dFdpZHRoIDogaTMyYDtcbiAgd29ya2dyb3VwU2l6ZTogW251bWJlciwgbnVtYmVyLCBudW1iZXJdID0gWzY0LCAxLCAxXTtcbiAgc2l6ZSA9IHRydWU7XG5cbiAgY29uc3RydWN0b3IoY29udkluZm86IGJhY2tlbmRfdXRpbC5Db252M0RJbmZvKSB7XG4gICAgdGhpcy5vdXRwdXRTaGFwZSA9IGNvbnZJbmZvLmluU2hhcGU7XG5cbiAgICB0aGlzLmRpc3BhdGNoTGF5b3V0ID0gZmxhdERpc3BhdGNoTGF5b3V0KHRoaXMub3V0cHV0U2hhcGUpO1xuXG4gICAgdGhpcy5kaXNwYXRjaCA9IGNvbXB1dGVEaXNwYXRjaChcbiAgICAgICAgdGhpcy5kaXNwYXRjaExheW91dCwgdGhpcy5vdXRwdXRTaGFwZSwgdGhpcy53b3JrZ3JvdXBTaXplKTtcblxuICAgIHRoaXMuc2hhZGVyS2V5ID0gJ21heFBvb2wzREJhY2twcm9wJztcbiAgfVxuXG4gIGdldFVzZXJDb2RlKCk6IHN0cmluZyB7XG4gICAgY29uc3QgdXNlckNvZGUgPSBgXG4gICAgICAke21haW4oJ2luZGV4Jyl9IHtcbiAgICAgIGlmIChpbmRleCA8IHVuaWZvcm1zLnNpemUpIHtcbiAgICAgICAgbGV0IGNvb3JkcyA9IGdldENvb3Jkc0Zyb21JbmRleChpbmRleCk7XG4gICAgICAgIGxldCBiYXRjaCA9IGNvb3Jkcy54O1xuICAgICAgICBsZXQgY2ggPSBjb29yZHMudTtcblxuICAgICAgICBsZXQgZHlDb3JuZXIgPSB2ZWMzPGkzMj4oY29vcmRzLnksIGNvb3Jkcy56LCBjb29yZHMudykgLSB1bmlmb3Jtcy5wYWRzO1xuICAgICAgICBsZXQgZHlEQ29ybmVyID0gZHlDb3JuZXIueDtcbiAgICAgICAgbGV0IGR5UkNvcm5lciA9IGR5Q29ybmVyLnk7XG4gICAgICAgIGxldCBkeUNDb3JuZXIgPSBkeUNvcm5lci56O1xuXG4gICAgICAgIC8vIENvbnZvbHZlIGR5KD8sID8sID8sIGNoKSB3aXRoIHBvcyBtYXNrKDosIDosIDosIGQpIHRvIGdldFxuICAgICAgICAvLyBkeCh4RCwgeFIsIHhDLCBjaCkuXG4gICAgICAgIC8vID8gPSB0byBiZSBkZXRlcm1pbmVkLiA6ID0gYWNyb3NzIGFsbCB2YWx1ZXMgaW4gdGhhdCBheGlzLlxuICAgICAgICB2YXIgZG90UHJvZCA9IDAuMDtcbiAgICAgICAgbGV0IGxhc3RJbmRleCA9IHVuaWZvcm1zLmZpbHRlckRpbXNbMF0gKiB1bmlmb3Jtcy5maWx0ZXJEaW1zWzFdICogdW5pZm9ybXMuZmlsdGVyRGltc1syXSAtIDE7XG5cbiAgICAgICAgZm9yICh2YXIgd0QgPSAwOyB3RCA8IHVuaWZvcm1zLmZpbHRlckRpbXNbMF07IHdEKyspIHtcbiAgICAgICAgICBsZXQgZHlEID0gZjMyKGR5RENvcm5lciArIHdEKSAvIGYzMih1bmlmb3Jtcy5zdHJpZGVzWzBdKTtcblxuICAgICAgICAgIGlmIChkeUQgPCAwLjAgfHwgZHlEID49IGYzMih1bmlmb3Jtcy5vdXREZXB0aCkgfHwgZnJhY3QoZHlEKSA+IDAuMCkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGxldCBpZHlEID0gaTMyKGR5RCk7XG5cbiAgICAgICAgICBmb3IgKHZhciB3UiA9IDA7IHdSIDwgdW5pZm9ybXMuZmlsdGVyRGltc1sxXTsgd1IrKykge1xuICAgICAgICAgICAgbGV0IGR5UiA9IGYzMihkeVJDb3JuZXIgKyB3UikgLyBmMzIodW5pZm9ybXMuc3RyaWRlc1sxXSk7XG5cbiAgICAgICAgICAgIGlmIChkeVIgPCAwLjAgfHwgZHlSID49IGYzMih1bmlmb3Jtcy5vdXRIZWlnaHQpIHx8IGZyYWN0KGR5UikgPiAwLjApIHtcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgaWR5UiA9IGkzMihkeVIpO1xuXG4gICAgICAgICAgICBmb3IgKHZhciB3QyA9IDA7IHdDIDwgdW5pZm9ybXMuZmlsdGVyRGltc1syXTsgd0MrKykge1xuICAgICAgICAgICAgICBsZXQgZHlDID0gZjMyKGR5Q0Nvcm5lciArIHdDKSAvIGYzMih1bmlmb3Jtcy5zdHJpZGVzWzJdKTtcblxuICAgICAgICAgICAgICBpZiAoZHlDIDwgMC4wIHx8IGR5QyA+PSBmMzIodW5pZm9ybXMub3V0V2lkdGgpIHx8IGZyYWN0KGR5QykgPiAwLjApIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBsZXQgaWR5QyA9IGkzMihkeUMpO1xuXG4gICAgICAgICAgICAgIGxldCBkeVZhbHVlID0gZ2V0RHkoYmF0Y2gsIGlkeUQsIGlkeVIsIGlkeUMsIGNoKTtcbiAgICAgICAgICAgICAgbGV0IG1heFBvc1ZhbHVlID0gbGFzdEluZGV4IC0gaTMyKGdldE1heFBvcyhiYXRjaCwgaWR5RCwgaWR5UiwgaWR5QywgY2gpKTtcblxuICAgICAgICAgICAgICAvLyBHZXQgdGhlIGN1cnJlbnQgdmFsdWUsIGNoZWNrIGl0IGFnYWluc3QgdGhlIHZhbHVlIGZyb20gdGhlXG4gICAgICAgICAgICAgIC8vIHBvc2l0aW9uIG1hdHJpeC5cbiAgICAgICAgICAgICAgbGV0IGN1clBvc1ZhbHVlID0gd0QgKiB1bmlmb3Jtcy5maWx0ZXJEaW1zWzFdICogdW5pZm9ybXMuZmlsdGVyRGltc1syXSArIHdSICogdW5pZm9ybXMuZmlsdGVyRGltc1syXSArIHdDO1xuICAgICAgICAgICAgICBsZXQgbWFzayA9IHNlbGVjdCgwLjAsIDEuMCwgbWF4UG9zVmFsdWUgPT0gY3VyUG9zVmFsdWUpO1xuICAgICAgICAgICAgICBkb3RQcm9kICs9IGR5VmFsdWUgKiBtYXNrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHNldE91dHB1dEF0SW5kZXgoaW5kZXgsIGRvdFByb2QpO1xuICAgICAgfVxuICAgIH1cbiAgICBgO1xuICAgIHJldHVybiB1c2VyQ29kZTtcbiAgfVxufVxuIl19","/**\n * @license\n * Copyright 2023 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { backend_util, MaxPool3DGrad } from '@tensorflow/tfjs-core';\nimport { MaxPool3DBackpropProgram } from '../max_pool_backprop_webgpu';\nimport { Pool3DProgram } from '../pool_webgpu';\nexport function maxPool3DGrad(args) {\n    const { inputs, backend, attrs } = args;\n    const { dy, input } = inputs;\n    const x = input;\n    const { filterSize, strides, pad, dimRoundingMode } = attrs;\n    const dilations = [1, 1, 1];\n    const convInfo = backend_util.computePool3DInfo(x.shape, filterSize, strides, dilations, pad, dimRoundingMode);\n    const maxPool3dPositionsProgram = new Pool3DProgram(convInfo, 'max', true /* get positions */);\n    let uniformData = [\n        {\n            type: 'int32',\n            data: [convInfo.strideDepth, convInfo.strideHeight, convInfo.strideWidth]\n        },\n        {\n            type: 'int32',\n            data: [convInfo.padInfo.front, convInfo.padInfo.top, convInfo.padInfo.left]\n        },\n        {\n            type: 'int32',\n            data: [convInfo.inDepth, convInfo.inHeight, convInfo.inWidth]\n        },\n        {\n            type: 'int32',\n            data: [\n                convInfo.effectiveFilterDepth, convInfo.effectiveFilterHeight,\n                convInfo.effectiveFilterWidth\n            ]\n        }\n    ];\n    const maxPool3dPositions = backend.runWebGPUProgram(maxPool3dPositionsProgram, [x], 'int32', uniformData);\n    const maxPool3dBackpropProgram = new MaxPool3DBackpropProgram(convInfo);\n    uniformData = [\n        {\n            type: 'int32',\n            data: [convInfo.strideDepth, convInfo.strideHeight, convInfo.strideWidth]\n        },\n        {\n            type: 'int32',\n            data: [\n                convInfo.effectiveFilterDepth - 1 - convInfo.padInfo.front,\n                convInfo.effectiveFilterHeight - 1 - convInfo.padInfo.top,\n                convInfo.effectiveFilterWidth - 1 - convInfo.padInfo.left\n            ]\n        },\n        {\n            type: 'int32',\n            data: [\n                convInfo.effectiveFilterDepth, convInfo.effectiveFilterHeight,\n                convInfo.effectiveFilterWidth\n            ]\n        },\n        { type: 'int32', data: [convInfo.outDepth] },\n        { type: 'int32', data: [convInfo.outHeight] },\n        { type: 'int32', data: [convInfo.outWidth] }\n    ];\n    const result = backend.runWebGPUProgram(maxPool3dBackpropProgram, [dy, maxPool3dPositions], x.dtype, uniformData);\n    backend.disposeData(maxPool3dPositions.dataId);\n    return result;\n}\nexport const maxPool3DGradConfig = {\n    kernelName: MaxPool3DGrad,\n    backendName: 'webgpu',\n    kernelFunc: maxPool3DGrad\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWF4UG9vbDNER3JhZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2tlcm5lbHMvTWF4UG9vbDNER3JhZC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQUMsWUFBWSxFQUE0QixhQUFhLEVBQXNELE1BQU0sdUJBQXVCLENBQUM7QUFHakosT0FBTyxFQUFDLHdCQUF3QixFQUFDLE1BQU0sNkJBQTZCLENBQUM7QUFDckUsT0FBTyxFQUFDLGFBQWEsRUFBQyxNQUFNLGdCQUFnQixDQUFDO0FBRTdDLE1BQU0sVUFBVSxhQUFhLENBQUMsSUFJN0I7SUFDQyxNQUFNLEVBQUMsTUFBTSxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUMsR0FBRyxJQUFJLENBQUM7SUFDdEMsTUFBTSxFQUFDLEVBQUUsRUFBRSxLQUFLLEVBQUMsR0FBRyxNQUFNLENBQUM7SUFDM0IsTUFBTSxDQUFDLEdBQUcsS0FBSyxDQUFDO0lBQ2hCLE1BQU0sRUFBQyxVQUFVLEVBQUUsT0FBTyxFQUFFLEdBQUcsRUFBRSxlQUFlLEVBQUMsR0FBRyxLQUFLLENBQUM7SUFDMUQsTUFBTSxTQUFTLEdBQTZCLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUV0RCxNQUFNLFFBQVEsR0FBRyxZQUFZLENBQUMsaUJBQWlCLENBQzNDLENBQUMsQ0FBQyxLQUFpRCxFQUFFLFVBQVUsRUFBRSxPQUFPLEVBQ3hFLFNBQVMsRUFBRSxHQUFHLEVBQUUsZUFBZSxDQUFDLENBQUM7SUFFckMsTUFBTSx5QkFBeUIsR0FDM0IsSUFBSSxhQUFhLENBQUMsUUFBUSxFQUFFLEtBQUssRUFBRSxJQUFJLENBQUMsbUJBQW1CLENBQUMsQ0FBQztJQUNqRSxJQUFJLFdBQVcsR0FBRztRQUNoQjtZQUNFLElBQUksRUFBRSxPQUFPO1lBQ2IsSUFBSSxFQUFFLENBQUMsUUFBUSxDQUFDLFdBQVcsRUFBRSxRQUFRLENBQUMsWUFBWSxFQUFFLFFBQVEsQ0FBQyxXQUFXLENBQUM7U0FDMUU7UUFDRDtZQUNFLElBQUksRUFBRSxPQUFPO1lBQ2IsSUFBSSxFQUNBLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsUUFBUSxDQUFDLE9BQU8sQ0FBQyxHQUFHLEVBQUUsUUFBUSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUM7U0FDMUU7UUFDRDtZQUNFLElBQUksRUFBRSxPQUFPO1lBQ2IsSUFBSSxFQUFFLENBQUMsUUFBUSxDQUFDLE9BQU8sRUFBRSxRQUFRLENBQUMsUUFBUSxFQUFFLFFBQVEsQ0FBQyxPQUFPLENBQUM7U0FDOUQ7UUFDRDtZQUNFLElBQUksRUFBRSxPQUFPO1lBQ2IsSUFBSSxFQUFFO2dCQUNKLFFBQVEsQ0FBQyxvQkFBb0IsRUFBRSxRQUFRLENBQUMscUJBQXFCO2dCQUM3RCxRQUFRLENBQUMsb0JBQW9CO2FBQzlCO1NBQ0Y7S0FDRixDQUFDO0lBQ0YsTUFBTSxrQkFBa0IsR0FBRyxPQUFPLENBQUMsZ0JBQWdCLENBQy9DLHlCQUF5QixFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsT0FBTyxFQUFFLFdBQVcsQ0FBQyxDQUFDO0lBRTFELE1BQU0sd0JBQXdCLEdBQUcsSUFBSSx3QkFBd0IsQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUN4RSxXQUFXLEdBQUc7UUFDWjtZQUNFLElBQUksRUFBRSxPQUFPO1lBQ2IsSUFBSSxFQUFFLENBQUMsUUFBUSxDQUFDLFdBQVcsRUFBRSxRQUFRLENBQUMsWUFBWSxFQUFFLFFBQVEsQ0FBQyxXQUFXLENBQUM7U0FDMUU7UUFDRDtZQUNFLElBQUksRUFBRSxPQUFPO1lBQ2IsSUFBSSxFQUFFO2dCQUNKLFFBQVEsQ0FBQyxvQkFBb0IsR0FBRyxDQUFDLEdBQUcsUUFBUSxDQUFDLE9BQU8sQ0FBQyxLQUFLO2dCQUMxRCxRQUFRLENBQUMscUJBQXFCLEdBQUcsQ0FBQyxHQUFHLFFBQVEsQ0FBQyxPQUFPLENBQUMsR0FBRztnQkFDekQsUUFBUSxDQUFDLG9CQUFvQixHQUFHLENBQUMsR0FBRyxRQUFRLENBQUMsT0FBTyxDQUFDLElBQUk7YUFDMUQ7U0FDRjtRQUNEO1lBQ0UsSUFBSSxFQUFFLE9BQU87WUFDYixJQUFJLEVBQUU7Z0JBQ0osUUFBUSxDQUFDLG9CQUFvQixFQUFFLFFBQVEsQ0FBQyxxQkFBcUI7Z0JBQzdELFFBQVEsQ0FBQyxvQkFBb0I7YUFDOUI7U0FDRjtRQUNELEVBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLEVBQUM7UUFDMUMsRUFBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsRUFBQztRQUMzQyxFQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxFQUFDO0tBQzNDLENBQUM7SUFDRixNQUFNLE1BQU0sR0FBRyxPQUFPLENBQUMsZ0JBQWdCLENBQ25DLHdCQUF3QixFQUFFLENBQUMsRUFBRSxFQUFFLGtCQUFrQixDQUFDLEVBQUUsQ0FBQyxDQUFDLEtBQUssRUFBRSxXQUFXLENBQUMsQ0FBQztJQUM5RSxPQUFPLENBQUMsV0FBVyxDQUFDLGtCQUFrQixDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBRS9DLE9BQU8sTUFBTSxDQUFDO0FBQ2hCLENBQUM7QUFFRCxNQUFNLENBQUMsTUFBTSxtQkFBbUIsR0FBaUI7SUFDL0MsVUFBVSxFQUFFLGFBQWE7SUFDekIsV0FBVyxFQUFFLFFBQVE7SUFDckIsVUFBVSxFQUFFLGFBQXNDO0NBQ25ELENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMyBHb29nbGUgTExDLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7YmFja2VuZF91dGlsLCBLZXJuZWxDb25maWcsIEtlcm5lbEZ1bmMsIE1heFBvb2wzREdyYWQsIE1heFBvb2wzREdyYWRBdHRycywgTWF4UG9vbDNER3JhZElucHV0cywgVGVuc29ySW5mb30gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcblxuaW1wb3J0IHtXZWJHUFVCYWNrZW5kfSBmcm9tICcuLi9iYWNrZW5kX3dlYmdwdSc7XG5pbXBvcnQge01heFBvb2wzREJhY2twcm9wUHJvZ3JhbX0gZnJvbSAnLi4vbWF4X3Bvb2xfYmFja3Byb3Bfd2ViZ3B1JztcbmltcG9ydCB7UG9vbDNEUHJvZ3JhbX0gZnJvbSAnLi4vcG9vbF93ZWJncHUnO1xuXG5leHBvcnQgZnVuY3Rpb24gbWF4UG9vbDNER3JhZChhcmdzOiB7XG4gIGlucHV0czogTWF4UG9vbDNER3JhZElucHV0cyxcbiAgYmFja2VuZDogV2ViR1BVQmFja2VuZCxcbiAgYXR0cnM6IE1heFBvb2wzREdyYWRBdHRyc1xufSk6IFRlbnNvckluZm8ge1xuICBjb25zdCB7aW5wdXRzLCBiYWNrZW5kLCBhdHRyc30gPSBhcmdzO1xuICBjb25zdCB7ZHksIGlucHV0fSA9IGlucHV0cztcbiAgY29uc3QgeCA9IGlucHV0O1xuICBjb25zdCB7ZmlsdGVyU2l6ZSwgc3RyaWRlcywgcGFkLCBkaW1Sb3VuZGluZ01vZGV9ID0gYXR0cnM7XG4gIGNvbnN0IGRpbGF0aW9uczogW251bWJlciwgbnVtYmVyLCBudW1iZXJdID0gWzEsIDEsIDFdO1xuXG4gIGNvbnN0IGNvbnZJbmZvID0gYmFja2VuZF91dGlsLmNvbXB1dGVQb29sM0RJbmZvKFxuICAgICAgeC5zaGFwZSBhcyBbbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXJdLCBmaWx0ZXJTaXplLCBzdHJpZGVzLFxuICAgICAgZGlsYXRpb25zLCBwYWQsIGRpbVJvdW5kaW5nTW9kZSk7XG5cbiAgY29uc3QgbWF4UG9vbDNkUG9zaXRpb25zUHJvZ3JhbSA9XG4gICAgICBuZXcgUG9vbDNEUHJvZ3JhbShjb252SW5mbywgJ21heCcsIHRydWUgLyogZ2V0IHBvc2l0aW9ucyAqLyk7XG4gIGxldCB1bmlmb3JtRGF0YSA9IFtcbiAgICB7XG4gICAgICB0eXBlOiAnaW50MzInLFxuICAgICAgZGF0YTogW2NvbnZJbmZvLnN0cmlkZURlcHRoLCBjb252SW5mby5zdHJpZGVIZWlnaHQsIGNvbnZJbmZvLnN0cmlkZVdpZHRoXVxuICAgIH0sXG4gICAge1xuICAgICAgdHlwZTogJ2ludDMyJyxcbiAgICAgIGRhdGE6XG4gICAgICAgICAgW2NvbnZJbmZvLnBhZEluZm8uZnJvbnQsIGNvbnZJbmZvLnBhZEluZm8udG9wLCBjb252SW5mby5wYWRJbmZvLmxlZnRdXG4gICAgfSxcbiAgICB7XG4gICAgICB0eXBlOiAnaW50MzInLFxuICAgICAgZGF0YTogW2NvbnZJbmZvLmluRGVwdGgsIGNvbnZJbmZvLmluSGVpZ2h0LCBjb252SW5mby5pbldpZHRoXVxuICAgIH0sXG4gICAge1xuICAgICAgdHlwZTogJ2ludDMyJyxcbiAgICAgIGRhdGE6IFtcbiAgICAgICAgY29udkluZm8uZWZmZWN0aXZlRmlsdGVyRGVwdGgsIGNvbnZJbmZvLmVmZmVjdGl2ZUZpbHRlckhlaWdodCxcbiAgICAgICAgY29udkluZm8uZWZmZWN0aXZlRmlsdGVyV2lkdGhcbiAgICAgIF1cbiAgICB9XG4gIF07XG4gIGNvbnN0IG1heFBvb2wzZFBvc2l0aW9ucyA9IGJhY2tlbmQucnVuV2ViR1BVUHJvZ3JhbShcbiAgICAgIG1heFBvb2wzZFBvc2l0aW9uc1Byb2dyYW0sIFt4XSwgJ2ludDMyJywgdW5pZm9ybURhdGEpO1xuXG4gIGNvbnN0IG1heFBvb2wzZEJhY2twcm9wUHJvZ3JhbSA9IG5ldyBNYXhQb29sM0RCYWNrcHJvcFByb2dyYW0oY29udkluZm8pO1xuICB1bmlmb3JtRGF0YSA9IFtcbiAgICB7XG4gICAgICB0eXBlOiAnaW50MzInLFxuICAgICAgZGF0YTogW2NvbnZJbmZvLnN0cmlkZURlcHRoLCBjb252SW5mby5zdHJpZGVIZWlnaHQsIGNvbnZJbmZvLnN0cmlkZVdpZHRoXVxuICAgIH0sXG4gICAge1xuICAgICAgdHlwZTogJ2ludDMyJyxcbiAgICAgIGRhdGE6IFtcbiAgICAgICAgY29udkluZm8uZWZmZWN0aXZlRmlsdGVyRGVwdGggLSAxIC0gY29udkluZm8ucGFkSW5mby5mcm9udCxcbiAgICAgICAgY29udkluZm8uZWZmZWN0aXZlRmlsdGVySGVpZ2h0IC0gMSAtIGNvbnZJbmZvLnBhZEluZm8udG9wLFxuICAgICAgICBjb252SW5mby5lZmZlY3RpdmVGaWx0ZXJXaWR0aCAtIDEgLSBjb252SW5mby5wYWRJbmZvLmxlZnRcbiAgICAgIF1cbiAgICB9LFxuICAgIHtcbiAgICAgIHR5cGU6ICdpbnQzMicsXG4gICAgICBkYXRhOiBbXG4gICAgICAgIGNvbnZJbmZvLmVmZmVjdGl2ZUZpbHRlckRlcHRoLCBjb252SW5mby5lZmZlY3RpdmVGaWx0ZXJIZWlnaHQsXG4gICAgICAgIGNvbnZJbmZvLmVmZmVjdGl2ZUZpbHRlcldpZHRoXG4gICAgICBdXG4gICAgfSxcbiAgICB7dHlwZTogJ2ludDMyJywgZGF0YTogW2NvbnZJbmZvLm91dERlcHRoXX0sXG4gICAge3R5cGU6ICdpbnQzMicsIGRhdGE6IFtjb252SW5mby5vdXRIZWlnaHRdfSxcbiAgICB7dHlwZTogJ2ludDMyJywgZGF0YTogW2NvbnZJbmZvLm91dFdpZHRoXX1cbiAgXTtcbiAgY29uc3QgcmVzdWx0ID0gYmFja2VuZC5ydW5XZWJHUFVQcm9ncmFtKFxuICAgICAgbWF4UG9vbDNkQmFja3Byb3BQcm9ncmFtLCBbZHksIG1heFBvb2wzZFBvc2l0aW9uc10sIHguZHR5cGUsIHVuaWZvcm1EYXRhKTtcbiAgYmFja2VuZC5kaXNwb3NlRGF0YShtYXhQb29sM2RQb3NpdGlvbnMuZGF0YUlkKTtcblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5leHBvcnQgY29uc3QgbWF4UG9vbDNER3JhZENvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBNYXhQb29sM0RHcmFkLFxuICBiYWNrZW5kTmFtZTogJ3dlYmdwdScsXG4gIGtlcm5lbEZ1bmM6IG1heFBvb2wzREdyYWQgYXMgdW5rbm93biBhcyBLZXJuZWxGdW5jXG59O1xuIl19","/**\n * @license\n * Copyright 2023 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { backend_util, MaxPoolGrad } from '@tensorflow/tfjs-core';\nimport { MaxPool2DBackpropProgram } from '../max_pool_backprop_webgpu';\nimport { Pool2DProgram } from '../pool_webgpu';\nimport { assertNotComplex } from '../webgpu_util';\nexport function maxPoolGrad(args) {\n    const { inputs, backend, attrs } = args;\n    const { dy, input, output } = inputs;\n    const x = input;\n    assertNotComplex([input, output], 'maxPoolGrad');\n    const { filterSize, strides, pad, dimRoundingMode } = attrs;\n    const convInfo = backend_util.computePool2DInfo(x.shape, filterSize, strides, 1 /* dilations */, pad, dimRoundingMode);\n    const maxPoolPositionsProgram = new Pool2DProgram(convInfo, 'max', true);\n    let uniformData = [\n        { type: 'int32', data: [convInfo.strideHeight, convInfo.strideWidth] },\n        { type: 'int32', data: [convInfo.padInfo.top, convInfo.padInfo.left] },\n        { type: 'int32', data: [convInfo.dilationHeight, convInfo.dilationWidth] },\n        { type: 'int32', data: [convInfo.inHeight, convInfo.inWidth] }, {\n            type: 'int32',\n            data: [convInfo.effectiveFilterHeight, convInfo.effectiveFilterWidth]\n        }\n    ];\n    const maxPoolPositions = backend.runWebGPUProgram(maxPoolPositionsProgram, [x], 'int32', uniformData);\n    const maxPoolBackpropProgram = new MaxPool2DBackpropProgram(convInfo);\n    uniformData = [\n        { type: 'int32', data: [convInfo.strideHeight, convInfo.strideWidth] }, {\n            type: 'int32',\n            data: [\n                convInfo.effectiveFilterHeight - 1 - convInfo.padInfo.top,\n                convInfo.effectiveFilterWidth - 1 - convInfo.padInfo.left\n            ]\n        },\n        { type: 'int32', data: [convInfo.dilationHeight, convInfo.dilationWidth] }, {\n            type: 'int32',\n            data: [convInfo.effectiveFilterHeight, convInfo.effectiveFilterWidth]\n        },\n        { type: 'int32', data: [convInfo.outHeight] },\n        { type: 'int32', data: [convInfo.outWidth] }\n    ];\n    const result = backend.runWebGPUProgram(maxPoolBackpropProgram, [dy, maxPoolPositions], x.dtype, uniformData);\n    backend.disposeData(maxPoolPositions.dataId);\n    return result;\n}\nexport const maxPoolGradConfig = {\n    kernelName: MaxPoolGrad,\n    backendName: 'webgpu',\n    kernelFunc: maxPoolGrad\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWF4UG9vbEdyYWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9rZXJuZWxzL01heFBvb2xHcmFkLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sRUFBQyxZQUFZLEVBQTRCLFdBQVcsRUFBa0QsTUFBTSx1QkFBdUIsQ0FBQztBQUczSSxPQUFPLEVBQUMsd0JBQXdCLEVBQUMsTUFBTSw2QkFBNkIsQ0FBQztBQUNyRSxPQUFPLEVBQUMsYUFBYSxFQUFDLE1BQU0sZ0JBQWdCLENBQUM7QUFDN0MsT0FBTyxFQUFDLGdCQUFnQixFQUFDLE1BQU0sZ0JBQWdCLENBQUM7QUFFaEQsTUFBTSxVQUFVLFdBQVcsQ0FBQyxJQUkzQjtJQUNDLE1BQU0sRUFBQyxNQUFNLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBQyxHQUFHLElBQUksQ0FBQztJQUN0QyxNQUFNLEVBQUMsRUFBRSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUMsR0FBRyxNQUFNLENBQUM7SUFDbkMsTUFBTSxDQUFDLEdBQUcsS0FBSyxDQUFDO0lBQ2hCLGdCQUFnQixDQUFDLENBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxFQUFFLGFBQWEsQ0FBQyxDQUFDO0lBQ2pELE1BQU0sRUFBQyxVQUFVLEVBQUUsT0FBTyxFQUFFLEdBQUcsRUFBRSxlQUFlLEVBQUMsR0FBRyxLQUFLLENBQUM7SUFFMUQsTUFBTSxRQUFRLEdBQUcsWUFBWSxDQUFDLGlCQUFpQixDQUMzQyxDQUFDLENBQUMsS0FBeUMsRUFBRSxVQUFVLEVBQUUsT0FBTyxFQUNoRSxDQUFDLENBQUMsZUFBZSxFQUFFLEdBQUcsRUFBRSxlQUFlLENBQUMsQ0FBQztJQUU3QyxNQUFNLHVCQUF1QixHQUFHLElBQUksYUFBYSxDQUFDLFFBQVEsRUFBRSxLQUFLLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDekUsSUFBSSxXQUFXLEdBQUc7UUFDaEIsRUFBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxDQUFDLFFBQVEsQ0FBQyxZQUFZLEVBQUUsUUFBUSxDQUFDLFdBQVcsQ0FBQyxFQUFDO1FBQ3BFLEVBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxRQUFRLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxFQUFDO1FBQ3BFLEVBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsQ0FBQyxRQUFRLENBQUMsY0FBYyxFQUFFLFFBQVEsQ0FBQyxhQUFhLENBQUMsRUFBQztRQUN4RSxFQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLENBQUMsUUFBUSxDQUFDLFFBQVEsRUFBRSxRQUFRLENBQUMsT0FBTyxDQUFDLEVBQUMsRUFBRTtZQUM1RCxJQUFJLEVBQUUsT0FBTztZQUNiLElBQUksRUFBRSxDQUFDLFFBQVEsQ0FBQyxxQkFBcUIsRUFBRSxRQUFRLENBQUMsb0JBQW9CLENBQUM7U0FDdEU7S0FDRixDQUFDO0lBQ0YsTUFBTSxnQkFBZ0IsR0FBRyxPQUFPLENBQUMsZ0JBQWdCLENBQzdDLHVCQUF1QixFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsT0FBTyxFQUFFLFdBQVcsQ0FBQyxDQUFDO0lBRXhELE1BQU0sc0JBQXNCLEdBQUcsSUFBSSx3QkFBd0IsQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUN0RSxXQUFXLEdBQUc7UUFDWixFQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLENBQUMsUUFBUSxDQUFDLFlBQVksRUFBRSxRQUFRLENBQUMsV0FBVyxDQUFDLEVBQUMsRUFBRTtZQUNwRSxJQUFJLEVBQUUsT0FBTztZQUNiLElBQUksRUFBRTtnQkFDSixRQUFRLENBQUMscUJBQXFCLEdBQUcsQ0FBQyxHQUFHLFFBQVEsQ0FBQyxPQUFPLENBQUMsR0FBRztnQkFDekQsUUFBUSxDQUFDLG9CQUFvQixHQUFHLENBQUMsR0FBRyxRQUFRLENBQUMsT0FBTyxDQUFDLElBQUk7YUFDMUQ7U0FDRjtRQUNELEVBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsQ0FBQyxRQUFRLENBQUMsY0FBYyxFQUFFLFFBQVEsQ0FBQyxhQUFhLENBQUMsRUFBQyxFQUFFO1lBQ3hFLElBQUksRUFBRSxPQUFPO1lBQ2IsSUFBSSxFQUFFLENBQUMsUUFBUSxDQUFDLHFCQUFxQixFQUFFLFFBQVEsQ0FBQyxvQkFBb0IsQ0FBQztTQUN0RTtRQUNELEVBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLEVBQUM7UUFDM0MsRUFBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsRUFBQztLQUMzQyxDQUFDO0lBQ0YsTUFBTSxNQUFNLEdBQUcsT0FBTyxDQUFDLGdCQUFnQixDQUNuQyxzQkFBc0IsRUFBRSxDQUFDLEVBQUUsRUFBRSxnQkFBZ0IsQ0FBQyxFQUFFLENBQUMsQ0FBQyxLQUFLLEVBQUUsV0FBVyxDQUFDLENBQUM7SUFDMUUsT0FBTyxDQUFDLFdBQVcsQ0FBQyxnQkFBZ0IsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUU3QyxPQUFPLE1BQU0sQ0FBQztBQUNoQixDQUFDO0FBRUQsTUFBTSxDQUFDLE1BQU0saUJBQWlCLEdBQWlCO0lBQzdDLFVBQVUsRUFBRSxXQUFXO0lBQ3ZCLFdBQVcsRUFBRSxRQUFRO0lBQ3JCLFVBQVUsRUFBRSxXQUFvQztDQUNqRCxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjMgR29vZ2xlIExMQy5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge2JhY2tlbmRfdXRpbCwgS2VybmVsQ29uZmlnLCBLZXJuZWxGdW5jLCBNYXhQb29sR3JhZCwgTWF4UG9vbEdyYWRBdHRycywgTWF4UG9vbEdyYWRJbnB1dHMsIFRlbnNvckluZm99IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7V2ViR1BVQmFja2VuZH0gZnJvbSAnLi4vYmFja2VuZF93ZWJncHUnO1xuaW1wb3J0IHtNYXhQb29sMkRCYWNrcHJvcFByb2dyYW19IGZyb20gJy4uL21heF9wb29sX2JhY2twcm9wX3dlYmdwdSc7XG5pbXBvcnQge1Bvb2wyRFByb2dyYW19IGZyb20gJy4uL3Bvb2xfd2ViZ3B1JztcbmltcG9ydCB7YXNzZXJ0Tm90Q29tcGxleH0gZnJvbSAnLi4vd2ViZ3B1X3V0aWwnO1xuXG5leHBvcnQgZnVuY3Rpb24gbWF4UG9vbEdyYWQoYXJnczoge1xuICBpbnB1dHM6IE1heFBvb2xHcmFkSW5wdXRzLFxuICBiYWNrZW5kOiBXZWJHUFVCYWNrZW5kLFxuICBhdHRyczogTWF4UG9vbEdyYWRBdHRyc1xufSk6IFRlbnNvckluZm8ge1xuICBjb25zdCB7aW5wdXRzLCBiYWNrZW5kLCBhdHRyc30gPSBhcmdzO1xuICBjb25zdCB7ZHksIGlucHV0LCBvdXRwdXR9ID0gaW5wdXRzO1xuICBjb25zdCB4ID0gaW5wdXQ7XG4gIGFzc2VydE5vdENvbXBsZXgoW2lucHV0LCBvdXRwdXRdLCAnbWF4UG9vbEdyYWQnKTtcbiAgY29uc3Qge2ZpbHRlclNpemUsIHN0cmlkZXMsIHBhZCwgZGltUm91bmRpbmdNb2RlfSA9IGF0dHJzO1xuXG4gIGNvbnN0IGNvbnZJbmZvID0gYmFja2VuZF91dGlsLmNvbXB1dGVQb29sMkRJbmZvKFxuICAgICAgeC5zaGFwZSBhcyBbbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyXSwgZmlsdGVyU2l6ZSwgc3RyaWRlcyxcbiAgICAgIDEgLyogZGlsYXRpb25zICovLCBwYWQsIGRpbVJvdW5kaW5nTW9kZSk7XG5cbiAgY29uc3QgbWF4UG9vbFBvc2l0aW9uc1Byb2dyYW0gPSBuZXcgUG9vbDJEUHJvZ3JhbShjb252SW5mbywgJ21heCcsIHRydWUpO1xuICBsZXQgdW5pZm9ybURhdGEgPSBbXG4gICAge3R5cGU6ICdpbnQzMicsIGRhdGE6IFtjb252SW5mby5zdHJpZGVIZWlnaHQsIGNvbnZJbmZvLnN0cmlkZVdpZHRoXX0sXG4gICAge3R5cGU6ICdpbnQzMicsIGRhdGE6IFtjb252SW5mby5wYWRJbmZvLnRvcCwgY29udkluZm8ucGFkSW5mby5sZWZ0XX0sXG4gICAge3R5cGU6ICdpbnQzMicsIGRhdGE6IFtjb252SW5mby5kaWxhdGlvbkhlaWdodCwgY29udkluZm8uZGlsYXRpb25XaWR0aF19LFxuICAgIHt0eXBlOiAnaW50MzInLCBkYXRhOiBbY29udkluZm8uaW5IZWlnaHQsIGNvbnZJbmZvLmluV2lkdGhdfSwge1xuICAgICAgdHlwZTogJ2ludDMyJyxcbiAgICAgIGRhdGE6IFtjb252SW5mby5lZmZlY3RpdmVGaWx0ZXJIZWlnaHQsIGNvbnZJbmZvLmVmZmVjdGl2ZUZpbHRlcldpZHRoXVxuICAgIH1cbiAgXTtcbiAgY29uc3QgbWF4UG9vbFBvc2l0aW9ucyA9IGJhY2tlbmQucnVuV2ViR1BVUHJvZ3JhbShcbiAgICAgIG1heFBvb2xQb3NpdGlvbnNQcm9ncmFtLCBbeF0sICdpbnQzMicsIHVuaWZvcm1EYXRhKTtcblxuICBjb25zdCBtYXhQb29sQmFja3Byb3BQcm9ncmFtID0gbmV3IE1heFBvb2wyREJhY2twcm9wUHJvZ3JhbShjb252SW5mbyk7XG4gIHVuaWZvcm1EYXRhID0gW1xuICAgIHt0eXBlOiAnaW50MzInLCBkYXRhOiBbY29udkluZm8uc3RyaWRlSGVpZ2h0LCBjb252SW5mby5zdHJpZGVXaWR0aF19LCB7XG4gICAgICB0eXBlOiAnaW50MzInLFxuICAgICAgZGF0YTogW1xuICAgICAgICBjb252SW5mby5lZmZlY3RpdmVGaWx0ZXJIZWlnaHQgLSAxIC0gY29udkluZm8ucGFkSW5mby50b3AsXG4gICAgICAgIGNvbnZJbmZvLmVmZmVjdGl2ZUZpbHRlcldpZHRoIC0gMSAtIGNvbnZJbmZvLnBhZEluZm8ubGVmdFxuICAgICAgXVxuICAgIH0sXG4gICAge3R5cGU6ICdpbnQzMicsIGRhdGE6IFtjb252SW5mby5kaWxhdGlvbkhlaWdodCwgY29udkluZm8uZGlsYXRpb25XaWR0aF19LCB7XG4gICAgICB0eXBlOiAnaW50MzInLFxuICAgICAgZGF0YTogW2NvbnZJbmZvLmVmZmVjdGl2ZUZpbHRlckhlaWdodCwgY29udkluZm8uZWZmZWN0aXZlRmlsdGVyV2lkdGhdXG4gICAgfSxcbiAgICB7dHlwZTogJ2ludDMyJywgZGF0YTogW2NvbnZJbmZvLm91dEhlaWdodF19LFxuICAgIHt0eXBlOiAnaW50MzInLCBkYXRhOiBbY29udkluZm8ub3V0V2lkdGhdfVxuICBdO1xuICBjb25zdCByZXN1bHQgPSBiYWNrZW5kLnJ1bldlYkdQVVByb2dyYW0oXG4gICAgICBtYXhQb29sQmFja3Byb3BQcm9ncmFtLCBbZHksIG1heFBvb2xQb3NpdGlvbnNdLCB4LmR0eXBlLCB1bmlmb3JtRGF0YSk7XG4gIGJhY2tlbmQuZGlzcG9zZURhdGEobWF4UG9vbFBvc2l0aW9ucy5kYXRhSWQpO1xuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmV4cG9ydCBjb25zdCBtYXhQb29sR3JhZENvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBNYXhQb29sR3JhZCxcbiAgYmFja2VuZE5hbWU6ICd3ZWJncHUnLFxuICBrZXJuZWxGdW5jOiBtYXhQb29sR3JhZCBhcyB1bmtub3duIGFzIEtlcm5lbEZ1bmNcbn07XG4iXX0=","/**\n * @license\n * Copyright 2022 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { MaxPoolWithArgmax } from '@tensorflow/tfjs-core';\nimport { backend_util, util } from '@tensorflow/tfjs-core';\nimport { Pool2DProgram } from '../pool_webgpu';\nexport function maxPoolWithArgmax(args) {\n    const { inputs, backend, attrs } = args;\n    const { filterSize, strides, pad, includeBatchInIndex } = attrs;\n    const { x } = inputs;\n    util.assert(x.shape.length === 4, () => `Error in maxPool: input must be rank 4 but got rank ${x.shape.length}.`);\n    const dilations = [1, 1];\n    util.assert(backend_util.eitherStridesOrDilationsAreOne(strides, dilations), () => 'Error in maxPool: Either strides or dilations must be 1. ' +\n        `Got strides ${strides} and dilations '${dilations}'`);\n    const convInfo = backend_util.computePool2DInfo(x.shape, filterSize, strides, dilations, pad);\n    const uniformData = [\n        { type: 'int32', data: [convInfo.strideHeight, convInfo.strideWidth] },\n        { type: 'int32', data: [convInfo.padInfo.top, convInfo.padInfo.left] },\n        { type: 'int32', data: [convInfo.dilationHeight, convInfo.dilationWidth] },\n        { type: 'int32', data: [convInfo.inHeight, convInfo.inWidth] }, {\n            type: 'int32',\n            data: [convInfo.effectiveFilterHeight, convInfo.effectiveFilterWidth]\n        }\n    ];\n    let program = new Pool2DProgram(convInfo, 'max', false);\n    const poolOutput = backend.runWebGPUProgram(program, [x], x.dtype, uniformData);\n    program = new Pool2DProgram(convInfo, 'max', true, true, includeBatchInIndex);\n    const indexOutput = backend.runWebGPUProgram(program, [x], 'int32', uniformData);\n    return [poolOutput, indexOutput];\n}\nexport const maxPoolWithArgmaxConfig = {\n    kernelName: MaxPoolWithArgmax,\n    backendName: 'webgpu',\n    kernelFunc: maxPoolWithArgmax\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWF4UG9vbFdpdGhBcmdtYXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9rZXJuZWxzL01heFBvb2xXaXRoQXJnbWF4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sRUFBQyxpQkFBaUIsRUFBa0QsTUFBTSx1QkFBdUIsQ0FBQztBQUN6RyxPQUFPLEVBQUMsWUFBWSxFQUF3QyxJQUFJLEVBQUMsTUFBTSx1QkFBdUIsQ0FBQztBQUcvRixPQUFPLEVBQUMsYUFBYSxFQUFDLE1BQU0sZ0JBQWdCLENBQUM7QUFFN0MsTUFBTSxVQUFVLGlCQUFpQixDQUFDLElBSWpDO0lBQ0MsTUFBTSxFQUFDLE1BQU0sRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFDLEdBQUcsSUFBSSxDQUFDO0lBQ3RDLE1BQU0sRUFBQyxVQUFVLEVBQUUsT0FBTyxFQUFFLEdBQUcsRUFBRSxtQkFBbUIsRUFBQyxHQUFHLEtBQUssQ0FBQztJQUM5RCxNQUFNLEVBQUMsQ0FBQyxFQUFDLEdBQUcsTUFBTSxDQUFDO0lBRW5CLElBQUksQ0FBQyxNQUFNLENBQ1AsQ0FBQyxDQUFDLEtBQUssQ0FBQyxNQUFNLEtBQUssQ0FBQyxFQUNwQixHQUFHLEVBQUUsQ0FBQyx1REFDRixDQUFDLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7SUFDM0IsTUFBTSxTQUFTLEdBQXFCLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQzNDLElBQUksQ0FBQyxNQUFNLENBQ1AsWUFBWSxDQUFDLDhCQUE4QixDQUFDLE9BQU8sRUFBRSxTQUFTLENBQUMsRUFDL0QsR0FBRyxFQUFFLENBQUMsMkRBQTJEO1FBQzdELGVBQWUsT0FBTyxtQkFBbUIsU0FBUyxHQUFHLENBQUMsQ0FBQztJQUUvRCxNQUFNLFFBQVEsR0FBRyxZQUFZLENBQUMsaUJBQWlCLENBQzNDLENBQUMsQ0FBQyxLQUF5QyxFQUFFLFVBQVUsRUFBRSxPQUFPLEVBQ2hFLFNBQVMsRUFBRSxHQUFHLENBQUMsQ0FBQztJQUVwQixNQUFNLFdBQVcsR0FBRztRQUNsQixFQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLENBQUMsUUFBUSxDQUFDLFlBQVksRUFBRSxRQUFRLENBQUMsV0FBVyxDQUFDLEVBQUM7UUFDcEUsRUFBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLFFBQVEsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEVBQUM7UUFDcEUsRUFBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxDQUFDLFFBQVEsQ0FBQyxjQUFjLEVBQUUsUUFBUSxDQUFDLGFBQWEsQ0FBQyxFQUFDO1FBQ3hFLEVBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsQ0FBQyxRQUFRLENBQUMsUUFBUSxFQUFFLFFBQVEsQ0FBQyxPQUFPLENBQUMsRUFBQyxFQUFFO1lBQzVELElBQUksRUFBRSxPQUFPO1lBQ2IsSUFBSSxFQUFFLENBQUMsUUFBUSxDQUFDLHFCQUFxQixFQUFFLFFBQVEsQ0FBQyxvQkFBb0IsQ0FBQztTQUN0RTtLQUNGLENBQUM7SUFDRixJQUFJLE9BQU8sR0FBRyxJQUFJLGFBQWEsQ0FBQyxRQUFRLEVBQUUsS0FBSyxFQUFFLEtBQUssQ0FBQyxDQUFDO0lBQ3hELE1BQU0sVUFBVSxHQUNaLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsS0FBSyxFQUFFLFdBQVcsQ0FBQyxDQUFDO0lBRWpFLE9BQU8sR0FBRyxJQUFJLGFBQWEsQ0FBQyxRQUFRLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsbUJBQW1CLENBQUMsQ0FBQztJQUM5RSxNQUFNLFdBQVcsR0FDYixPQUFPLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsT0FBTyxFQUFFLFdBQVcsQ0FBQyxDQUFDO0lBQ2pFLE9BQU8sQ0FBQyxVQUFVLEVBQUUsV0FBVyxDQUFDLENBQUM7QUFDbkMsQ0FBQztBQUVELE1BQU0sQ0FBQyxNQUFNLHVCQUF1QixHQUFpQjtJQUNuRCxVQUFVLEVBQUUsaUJBQWlCO0lBQzdCLFdBQVcsRUFBRSxRQUFRO0lBQ3JCLFVBQVUsRUFBRSxpQkFBMEM7Q0FDdkQsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTEMuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtNYXhQb29sV2l0aEFyZ21heCwgTWF4UG9vbFdpdGhBcmdtYXhBdHRycywgTWF4UG9vbFdpdGhBcmdtYXhJbnB1dHN9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5pbXBvcnQge2JhY2tlbmRfdXRpbCwgS2VybmVsQ29uZmlnLCBLZXJuZWxGdW5jLCBUZW5zb3JJbmZvLCB1dGlsfSBmcm9tICdAdGVuc29yZmxvdy90ZmpzLWNvcmUnO1xuXG5pbXBvcnQge1dlYkdQVUJhY2tlbmR9IGZyb20gJy4uL2JhY2tlbmRfd2ViZ3B1JztcbmltcG9ydCB7UG9vbDJEUHJvZ3JhbX0gZnJvbSAnLi4vcG9vbF93ZWJncHUnO1xuXG5leHBvcnQgZnVuY3Rpb24gbWF4UG9vbFdpdGhBcmdtYXgoYXJnczoge1xuICBpbnB1dHM6IE1heFBvb2xXaXRoQXJnbWF4SW5wdXRzLFxuICBhdHRyczogTWF4UG9vbFdpdGhBcmdtYXhBdHRycyxcbiAgYmFja2VuZDogV2ViR1BVQmFja2VuZFxufSk6IFRlbnNvckluZm9bXSB7XG4gIGNvbnN0IHtpbnB1dHMsIGJhY2tlbmQsIGF0dHJzfSA9IGFyZ3M7XG4gIGNvbnN0IHtmaWx0ZXJTaXplLCBzdHJpZGVzLCBwYWQsIGluY2x1ZGVCYXRjaEluSW5kZXh9ID0gYXR0cnM7XG4gIGNvbnN0IHt4fSA9IGlucHV0cztcblxuICB1dGlsLmFzc2VydChcbiAgICAgIHguc2hhcGUubGVuZ3RoID09PSA0LFxuICAgICAgKCkgPT4gYEVycm9yIGluIG1heFBvb2w6IGlucHV0IG11c3QgYmUgcmFuayA0IGJ1dCBnb3QgcmFuayAke1xuICAgICAgICAgIHguc2hhcGUubGVuZ3RofS5gKTtcbiAgY29uc3QgZGlsYXRpb25zOiBbbnVtYmVyLCBudW1iZXJdID0gWzEsIDFdO1xuICB1dGlsLmFzc2VydChcbiAgICAgIGJhY2tlbmRfdXRpbC5laXRoZXJTdHJpZGVzT3JEaWxhdGlvbnNBcmVPbmUoc3RyaWRlcywgZGlsYXRpb25zKSxcbiAgICAgICgpID0+ICdFcnJvciBpbiBtYXhQb29sOiBFaXRoZXIgc3RyaWRlcyBvciBkaWxhdGlvbnMgbXVzdCBiZSAxLiAnICtcbiAgICAgICAgICBgR290IHN0cmlkZXMgJHtzdHJpZGVzfSBhbmQgZGlsYXRpb25zICcke2RpbGF0aW9uc30nYCk7XG5cbiAgY29uc3QgY29udkluZm8gPSBiYWNrZW5kX3V0aWwuY29tcHV0ZVBvb2wyREluZm8oXG4gICAgICB4LnNoYXBlIGFzIFtudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXJdLCBmaWx0ZXJTaXplLCBzdHJpZGVzLFxuICAgICAgZGlsYXRpb25zLCBwYWQpO1xuXG4gIGNvbnN0IHVuaWZvcm1EYXRhID0gW1xuICAgIHt0eXBlOiAnaW50MzInLCBkYXRhOiBbY29udkluZm8uc3RyaWRlSGVpZ2h0LCBjb252SW5mby5zdHJpZGVXaWR0aF19LFxuICAgIHt0eXBlOiAnaW50MzInLCBkYXRhOiBbY29udkluZm8ucGFkSW5mby50b3AsIGNvbnZJbmZvLnBhZEluZm8ubGVmdF19LFxuICAgIHt0eXBlOiAnaW50MzInLCBkYXRhOiBbY29udkluZm8uZGlsYXRpb25IZWlnaHQsIGNvbnZJbmZvLmRpbGF0aW9uV2lkdGhdfSxcbiAgICB7dHlwZTogJ2ludDMyJywgZGF0YTogW2NvbnZJbmZvLmluSGVpZ2h0LCBjb252SW5mby5pbldpZHRoXX0sIHtcbiAgICAgIHR5cGU6ICdpbnQzMicsXG4gICAgICBkYXRhOiBbY29udkluZm8uZWZmZWN0aXZlRmlsdGVySGVpZ2h0LCBjb252SW5mby5lZmZlY3RpdmVGaWx0ZXJXaWR0aF1cbiAgICB9XG4gIF07XG4gIGxldCBwcm9ncmFtID0gbmV3IFBvb2wyRFByb2dyYW0oY29udkluZm8sICdtYXgnLCBmYWxzZSk7XG4gIGNvbnN0IHBvb2xPdXRwdXQgPVxuICAgICAgYmFja2VuZC5ydW5XZWJHUFVQcm9ncmFtKHByb2dyYW0sIFt4XSwgeC5kdHlwZSwgdW5pZm9ybURhdGEpO1xuXG4gIHByb2dyYW0gPSBuZXcgUG9vbDJEUHJvZ3JhbShjb252SW5mbywgJ21heCcsIHRydWUsIHRydWUsIGluY2x1ZGVCYXRjaEluSW5kZXgpO1xuICBjb25zdCBpbmRleE91dHB1dCA9XG4gICAgICBiYWNrZW5kLnJ1bldlYkdQVVByb2dyYW0ocHJvZ3JhbSwgW3hdLCAnaW50MzInLCB1bmlmb3JtRGF0YSk7XG4gIHJldHVybiBbcG9vbE91dHB1dCwgaW5kZXhPdXRwdXRdO1xufVxuXG5leHBvcnQgY29uc3QgbWF4UG9vbFdpdGhBcmdtYXhDb25maWc6IEtlcm5lbENvbmZpZyA9IHtcbiAga2VybmVsTmFtZTogTWF4UG9vbFdpdGhBcmdtYXgsXG4gIGJhY2tlbmROYW1lOiAnd2ViZ3B1JyxcbiAga2VybmVsRnVuYzogbWF4UG9vbFdpdGhBcmdtYXggYXMgdW5rbm93biBhcyBLZXJuZWxGdW5jXG59O1xuIl19","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Min } from '@tensorflow/tfjs-core';\nimport { reduce } from '../kernel_utils/reduce';\nexport function min(args) {\n    const { inputs, backend, attrs } = args;\n    const { x } = inputs;\n    const { axis, keepDims } = attrs;\n    return reduce(x, axis, keepDims, 'min', backend);\n}\nexport const minConfig = {\n    kernelName: Min,\n    backendName: 'webgpu',\n    kernelFunc: min\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWluLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMva2VybmVscy9NaW4udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUEyQixHQUFHLEVBQWtDLE1BQU0sdUJBQXVCLENBQUM7QUFHckcsT0FBTyxFQUFDLE1BQU0sRUFBQyxNQUFNLHdCQUF3QixDQUFDO0FBRTlDLE1BQU0sVUFBVSxHQUFHLENBQ2YsSUFBa0U7SUFFcEUsTUFBTSxFQUFDLE1BQU0sRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFDLEdBQUcsSUFBSSxDQUFDO0lBQ3RDLE1BQU0sRUFBQyxDQUFDLEVBQUMsR0FBRyxNQUFNLENBQUM7SUFDbkIsTUFBTSxFQUFDLElBQUksRUFBRSxRQUFRLEVBQUMsR0FBRyxLQUFLLENBQUM7SUFFL0IsT0FBTyxNQUFNLENBQUMsQ0FBQyxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUUsS0FBSyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0FBQ25ELENBQUM7QUFFRCxNQUFNLENBQUMsTUFBTSxTQUFTLEdBQWlCO0lBQ3JDLFVBQVUsRUFBRSxHQUFHO0lBQ2YsV0FBVyxFQUFFLFFBQVE7SUFDckIsVUFBVSxFQUFFLEdBQTRCO0NBQ3pDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7S2VybmVsQ29uZmlnLCBLZXJuZWxGdW5jLCBNaW4sIE1pbkF0dHJzLCBNaW5JbnB1dHMsIFRlbnNvckluZm99IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7V2ViR1BVQmFja2VuZH0gZnJvbSAnLi4vYmFja2VuZF93ZWJncHUnO1xuaW1wb3J0IHtyZWR1Y2V9IGZyb20gJy4uL2tlcm5lbF91dGlscy9yZWR1Y2UnO1xuXG5leHBvcnQgZnVuY3Rpb24gbWluKFxuICAgIGFyZ3M6IHtpbnB1dHM6IE1pbklucHV0cywgYmFja2VuZDogV2ViR1BVQmFja2VuZCwgYXR0cnM6IE1pbkF0dHJzfSk6XG4gICAgVGVuc29ySW5mbyB7XG4gIGNvbnN0IHtpbnB1dHMsIGJhY2tlbmQsIGF0dHJzfSA9IGFyZ3M7XG4gIGNvbnN0IHt4fSA9IGlucHV0cztcbiAgY29uc3Qge2F4aXMsIGtlZXBEaW1zfSA9IGF0dHJzO1xuXG4gIHJldHVybiByZWR1Y2UoeCwgYXhpcywga2VlcERpbXMsICdtaW4nLCBiYWNrZW5kKTtcbn1cblxuZXhwb3J0IGNvbnN0IG1pbkNvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBNaW4sXG4gIGJhY2tlbmROYW1lOiAnd2ViZ3B1JyxcbiAga2VybmVsRnVuYzogbWluIGFzIHVua25vd24gYXMgS2VybmVsRnVuY1xufTtcbiJdfQ==","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Minimum } from '@tensorflow/tfjs-core';\nimport { BinaryOpType } from '../binary_op_util';\nimport { binaryKernelFunc } from '../kernel_utils/kernel_funcs_utils';\nimport { minimumImplCPU as cpuMinimum } from '../kernel_utils/shared';\nexport const minimum = binaryKernelFunc({\n    opType: BinaryOpType.MIN,\n    cpuKernelImpl: cpuMinimum,\n});\nexport const minimumConfig = {\n    kernelName: Minimum,\n    backendName: 'webgpu',\n    kernelFunc: minimum\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWluaW11bS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2tlcm5lbHMvTWluaW11bS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQWUsT0FBTyxFQUFDLE1BQU0sdUJBQXVCLENBQUM7QUFFNUQsT0FBTyxFQUFDLFlBQVksRUFBQyxNQUFNLG1CQUFtQixDQUFDO0FBQy9DLE9BQU8sRUFBQyxnQkFBZ0IsRUFBQyxNQUFNLG9DQUFvQyxDQUFDO0FBQ3BFLE9BQU8sRUFBQyxjQUFjLElBQUksVUFBVSxFQUFDLE1BQU0sd0JBQXdCLENBQUM7QUFFcEUsTUFBTSxDQUFDLE1BQU0sT0FBTyxHQUFHLGdCQUFnQixDQUFDO0lBQ3RDLE1BQU0sRUFBRSxZQUFZLENBQUMsR0FBRztJQUN4QixhQUFhLEVBQUUsVUFBVTtDQUMxQixDQUFDLENBQUM7QUFFSCxNQUFNLENBQUMsTUFBTSxhQUFhLEdBQWlCO0lBQ3pDLFVBQVUsRUFBRSxPQUFPO0lBQ25CLFdBQVcsRUFBRSxRQUFRO0lBQ3JCLFVBQVUsRUFBRSxPQUFPO0NBQ3BCLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7S2VybmVsQ29uZmlnLCBNaW5pbXVtfSBmcm9tICdAdGVuc29yZmxvdy90ZmpzLWNvcmUnO1xuXG5pbXBvcnQge0JpbmFyeU9wVHlwZX0gZnJvbSAnLi4vYmluYXJ5X29wX3V0aWwnO1xuaW1wb3J0IHtiaW5hcnlLZXJuZWxGdW5jfSBmcm9tICcuLi9rZXJuZWxfdXRpbHMva2VybmVsX2Z1bmNzX3V0aWxzJztcbmltcG9ydCB7bWluaW11bUltcGxDUFUgYXMgY3B1TWluaW11bX0gZnJvbSAnLi4va2VybmVsX3V0aWxzL3NoYXJlZCc7XG5cbmV4cG9ydCBjb25zdCBtaW5pbXVtID0gYmluYXJ5S2VybmVsRnVuYyh7XG4gIG9wVHlwZTogQmluYXJ5T3BUeXBlLk1JTixcbiAgY3B1S2VybmVsSW1wbDogY3B1TWluaW11bSxcbn0pO1xuXG5leHBvcnQgY29uc3QgbWluaW11bUNvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBNaW5pbXVtLFxuICBiYWNrZW5kTmFtZTogJ3dlYmdwdScsXG4gIGtlcm5lbEZ1bmM6IG1pbmltdW1cbn07XG4iXX0=","/**\n * @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { getCoordsDataType, getMainHeaderString as main } from './webgpu_program';\nimport { computeDispatch, flatDispatchLayout } from './webgpu_util';\nexport class MirrorPadProgram {\n    constructor(xShape, paddings, mode) {\n        this.uniforms = '';\n        this.variableNames = ['x'];\n        this.workgroupSize = [64, 1, 1];\n        this.size = true;\n        this.outputShape = paddings.map((p, i) => p[0] /* beforePad */ + xShape[i] + p[1] /* afterPad */);\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize);\n        this.xShape = xShape;\n        paddings.map((_, i) => {\n            this.uniforms += ` pad${i} : vec2<i32>,`;\n        });\n        this.offset = mode === 'reflect' ? 0 : 1;\n        this.shaderKey = `mirrorPad_${mode}`;\n    }\n    getUserCode() {\n        const rank = this.xShape.length;\n        // The length of paddings are same with the rank of the input tensor.\n        const start = this.xShape.map((_, i) => `uniforms.pad${i}[0]`).join(',');\n        const end = this.xShape\n            .map((_, i) => `uniforms.pad${i}[0] + uniforms.xShape${rank > 1 ? `[${i}]` : ''}`)\n            .join(',');\n        const shaderStart = rank === 1 ? 'start' : 'start[i]';\n        const shaderEnd = rank === 1 ? 'end' : 'end[i]';\n        const shaderOutC = rank === 1 ? 'outC' : 'outC[i]';\n        const dtype = getCoordsDataType(rank);\n        const unpackedCoords = rank > 1 ?\n            ['coords[0]', 'coords[1]', 'coords[2]', 'coords[3]'].slice(0, rank) :\n            'coords';\n        return `\n      ${main('index')} {\n        if (index < uniforms.size) {\n          let start = ${dtype}(${start});\n          let end = ${dtype}(${end});\n          var outC = getCoordsFromIndex(index);\n          for (var i = 0; i < ${rank}; i = i + 1) {\n            if (${shaderOutC} < ${shaderStart}) {\n              ${shaderOutC} = ${shaderStart} * 2 - ${shaderOutC} - ${this.offset};\n            } else if(${shaderOutC} >= ${shaderEnd}) {\n              ${shaderOutC} = (${shaderEnd} - 1) * 2 - ${shaderOutC} + ${this.offset};\n            }\n          }\n          let coords = outC - start;\n          setOutputAtIndex(index, getX(${unpackedCoords}));\n        }\n      }\n    `;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWlycm9yX3BhZF93ZWJncHUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9taXJyb3JfcGFkX3dlYmdwdS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQUMsaUJBQWlCLEVBQUUsbUJBQW1CLElBQUksSUFBSSxFQUFnQixNQUFNLGtCQUFrQixDQUFDO0FBQy9GLE9BQU8sRUFBQyxlQUFlLEVBQUUsa0JBQWtCLEVBQUMsTUFBTSxlQUFlLENBQUM7QUFFbEUsTUFBTSxPQUFPLGdCQUFnQjtJQVkzQixZQUNJLE1BQWdCLEVBQUUsUUFBaUMsRUFDbkQsSUFBMkI7UUFYL0IsYUFBUSxHQUFHLEVBQUUsQ0FBQztRQUdkLGtCQUFhLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUN0QixrQkFBYSxHQUE2QixDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFHckQsU0FBSSxHQUFHLElBQUksQ0FBQztRQUtWLElBQUksQ0FBQyxXQUFXLEdBQUcsUUFBUSxDQUFDLEdBQUcsQ0FDM0IsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsZUFBZSxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsY0FBYyxDQUFDLENBQUM7UUFDdEUsSUFBSSxDQUFDLGNBQWMsR0FBRyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDM0QsSUFBSSxDQUFDLFFBQVEsR0FBRyxlQUFlLENBQzNCLElBQUksQ0FBQyxjQUFjLEVBQUUsSUFBSSxDQUFDLFdBQVcsRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7UUFFL0QsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7UUFDckIsUUFBUSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUNwQixJQUFJLENBQUMsUUFBUSxJQUFJLE9BQU8sQ0FBQyxlQUFlLENBQUM7UUFDM0MsQ0FBQyxDQUFDLENBQUM7UUFDSCxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksS0FBSyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3pDLElBQUksQ0FBQyxTQUFTLEdBQUcsYUFBYSxJQUFJLEVBQUUsQ0FBQztJQUN2QyxDQUFDO0lBRUQsV0FBVztRQUNULE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDO1FBQ2hDLHFFQUFxRTtRQUNyRSxNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLGVBQWUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDekUsTUFBTSxHQUFHLEdBQUcsSUFBSSxDQUFDLE1BQU07YUFDTixHQUFHLENBQ0EsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxlQUFlLENBQUMsd0JBQ3RCLElBQUksR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDO2FBQ2xDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUUzQixNQUFNLFdBQVcsR0FBRyxJQUFJLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQztRQUN0RCxNQUFNLFNBQVMsR0FBRyxJQUFJLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQztRQUNoRCxNQUFNLFVBQVUsR0FBRyxJQUFJLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQztRQUNuRCxNQUFNLEtBQUssR0FBRyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN0QyxNQUFNLGNBQWMsR0FBRyxJQUFJLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDN0IsQ0FBQyxXQUFXLEVBQUUsV0FBVyxFQUFFLFdBQVcsRUFBRSxXQUFXLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUM7WUFDckUsUUFBUSxDQUFDO1FBRWIsT0FBTztRQUNILElBQUksQ0FBQyxPQUFPLENBQUM7O3dCQUVHLEtBQUssSUFBSSxLQUFLO3NCQUNoQixLQUFLLElBQUksR0FBRzs7Z0NBRUYsSUFBSTtrQkFDbEIsVUFBVSxNQUFNLFdBQVc7Z0JBQzdCLFVBQVUsTUFBTSxXQUFXLFVBQVUsVUFBVSxNQUN2RCxJQUFJLENBQUMsTUFBTTt3QkFDSyxVQUFVLE9BQU8sU0FBUztnQkFDbEMsVUFBVSxPQUFPLFNBQVMsZUFBZSxVQUFVLE1BQzNELElBQUksQ0FBQyxNQUFNOzs7O3lDQUlzQixjQUFjOzs7S0FHbEQsQ0FBQztJQUNKLENBQUM7Q0FDRiIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtnZXRDb29yZHNEYXRhVHlwZSwgZ2V0TWFpbkhlYWRlclN0cmluZyBhcyBtYWluLCBXZWJHUFVQcm9ncmFtfSBmcm9tICcuL3dlYmdwdV9wcm9ncmFtJztcbmltcG9ydCB7Y29tcHV0ZURpc3BhdGNoLCBmbGF0RGlzcGF0Y2hMYXlvdXR9IGZyb20gJy4vd2ViZ3B1X3V0aWwnO1xuXG5leHBvcnQgY2xhc3MgTWlycm9yUGFkUHJvZ3JhbSBpbXBsZW1lbnRzIFdlYkdQVVByb2dyYW0ge1xuICBvdXRwdXRTaGFwZTogbnVtYmVyW107XG4gIHNoYWRlcktleTogc3RyaW5nO1xuICB1bmlmb3JtcyA9ICcnO1xuICBkaXNwYXRjaExheW91dDoge3g6IG51bWJlcltdfTtcbiAgZGlzcGF0Y2g6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXTtcbiAgdmFyaWFibGVOYW1lcyA9IFsneCddO1xuICB3b3JrZ3JvdXBTaXplOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl0gPSBbNjQsIDEsIDFdO1xuICB4U2hhcGU6IG51bWJlcltdO1xuICBvZmZzZXQ6IG51bWJlcjtcbiAgc2l6ZSA9IHRydWU7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgICB4U2hhcGU6IG51bWJlcltdLCBwYWRkaW5nczogQXJyYXk8W251bWJlciwgbnVtYmVyXT4sXG4gICAgICBtb2RlOiAncmVmbGVjdCd8J3N5bW1ldHJpYycpIHtcbiAgICB0aGlzLm91dHB1dFNoYXBlID0gcGFkZGluZ3MubWFwKFxuICAgICAgICAocCwgaSkgPT4gcFswXSAvKiBiZWZvcmVQYWQgKi8gKyB4U2hhcGVbaV0gKyBwWzFdIC8qIGFmdGVyUGFkICovKTtcbiAgICB0aGlzLmRpc3BhdGNoTGF5b3V0ID0gZmxhdERpc3BhdGNoTGF5b3V0KHRoaXMub3V0cHV0U2hhcGUpO1xuICAgIHRoaXMuZGlzcGF0Y2ggPSBjb21wdXRlRGlzcGF0Y2goXG4gICAgICAgIHRoaXMuZGlzcGF0Y2hMYXlvdXQsIHRoaXMub3V0cHV0U2hhcGUsIHRoaXMud29ya2dyb3VwU2l6ZSk7XG5cbiAgICB0aGlzLnhTaGFwZSA9IHhTaGFwZTtcbiAgICBwYWRkaW5ncy5tYXAoKF8sIGkpID0+IHtcbiAgICAgIHRoaXMudW5pZm9ybXMgKz0gYCBwYWQke2l9IDogdmVjMjxpMzI+LGA7XG4gICAgfSk7XG4gICAgdGhpcy5vZmZzZXQgPSBtb2RlID09PSAncmVmbGVjdCcgPyAwIDogMTtcbiAgICB0aGlzLnNoYWRlcktleSA9IGBtaXJyb3JQYWRfJHttb2RlfWA7XG4gIH1cblxuICBnZXRVc2VyQ29kZSgpOiBzdHJpbmcge1xuICAgIGNvbnN0IHJhbmsgPSB0aGlzLnhTaGFwZS5sZW5ndGg7XG4gICAgLy8gVGhlIGxlbmd0aCBvZiBwYWRkaW5ncyBhcmUgc2FtZSB3aXRoIHRoZSByYW5rIG9mIHRoZSBpbnB1dCB0ZW5zb3IuXG4gICAgY29uc3Qgc3RhcnQgPSB0aGlzLnhTaGFwZS5tYXAoKF8sIGkpID0+IGB1bmlmb3Jtcy5wYWQke2l9WzBdYCkuam9pbignLCcpO1xuICAgIGNvbnN0IGVuZCA9IHRoaXMueFNoYXBlXG4gICAgICAgICAgICAgICAgICAgIC5tYXAoXG4gICAgICAgICAgICAgICAgICAgICAgICAoXywgaSkgPT4gYHVuaWZvcm1zLnBhZCR7aX1bMF0gKyB1bmlmb3Jtcy54U2hhcGUke1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhbmsgPiAxID8gYFske2l9XWAgOiAnJ31gKVxuICAgICAgICAgICAgICAgICAgICAuam9pbignLCcpO1xuXG4gICAgY29uc3Qgc2hhZGVyU3RhcnQgPSByYW5rID09PSAxID8gJ3N0YXJ0JyA6ICdzdGFydFtpXSc7XG4gICAgY29uc3Qgc2hhZGVyRW5kID0gcmFuayA9PT0gMSA/ICdlbmQnIDogJ2VuZFtpXSc7XG4gICAgY29uc3Qgc2hhZGVyT3V0QyA9IHJhbmsgPT09IDEgPyAnb3V0QycgOiAnb3V0Q1tpXSc7XG4gICAgY29uc3QgZHR5cGUgPSBnZXRDb29yZHNEYXRhVHlwZShyYW5rKTtcbiAgICBjb25zdCB1bnBhY2tlZENvb3JkcyA9IHJhbmsgPiAxID9cbiAgICAgICAgWydjb29yZHNbMF0nLCAnY29vcmRzWzFdJywgJ2Nvb3Jkc1syXScsICdjb29yZHNbM10nXS5zbGljZSgwLCByYW5rKSA6XG4gICAgICAgICdjb29yZHMnO1xuXG4gICAgcmV0dXJuIGBcbiAgICAgICR7bWFpbignaW5kZXgnKX0ge1xuICAgICAgICBpZiAoaW5kZXggPCB1bmlmb3Jtcy5zaXplKSB7XG4gICAgICAgICAgbGV0IHN0YXJ0ID0gJHtkdHlwZX0oJHtzdGFydH0pO1xuICAgICAgICAgIGxldCBlbmQgPSAke2R0eXBlfSgke2VuZH0pO1xuICAgICAgICAgIHZhciBvdXRDID0gZ2V0Q29vcmRzRnJvbUluZGV4KGluZGV4KTtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICR7cmFua307IGkgPSBpICsgMSkge1xuICAgICAgICAgICAgaWYgKCR7c2hhZGVyT3V0Q30gPCAke3NoYWRlclN0YXJ0fSkge1xuICAgICAgICAgICAgICAke3NoYWRlck91dEN9ID0gJHtzaGFkZXJTdGFydH0gKiAyIC0gJHtzaGFkZXJPdXRDfSAtICR7XG4gICAgICAgIHRoaXMub2Zmc2V0fTtcbiAgICAgICAgICAgIH0gZWxzZSBpZigke3NoYWRlck91dEN9ID49ICR7c2hhZGVyRW5kfSkge1xuICAgICAgICAgICAgICAke3NoYWRlck91dEN9ID0gKCR7c2hhZGVyRW5kfSAtIDEpICogMiAtICR7c2hhZGVyT3V0Q30gKyAke1xuICAgICAgICB0aGlzLm9mZnNldH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGxldCBjb29yZHMgPSBvdXRDIC0gc3RhcnQ7XG4gICAgICAgICAgc2V0T3V0cHV0QXRJbmRleChpbmRleCwgZ2V0WCgke3VucGFja2VkQ29vcmRzfSkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgYDtcbiAgfVxufVxuIl19","/**\n * @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { MirrorPad } from '@tensorflow/tfjs-core';\nimport { MirrorPadProgram } from '../mirror_pad_webgpu';\nexport const mirrorPadConfig = {\n    kernelName: MirrorPad,\n    backendName: 'webgpu',\n    kernelFunc: ({ inputs, attrs, backend }) => {\n        const { x } = inputs;\n        const { paddings, mode } = attrs;\n        const webGPUBackend = backend;\n        const uniformData = paddings.map(p => {\n            return { type: 'int32', data: [p[0], p[1]] };\n        });\n        const program = new MirrorPadProgram(x.shape, paddings, mode);\n        const output = webGPUBackend.runWebGPUProgram(program, [x], x.dtype, uniformData);\n        return output;\n    }\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWlycm9yUGFkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMva2VybmVscy9NaXJyb3JQYWQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUFlLFNBQVMsRUFBa0MsTUFBTSx1QkFBdUIsQ0FBQztBQUkvRixPQUFPLEVBQUMsZ0JBQWdCLEVBQUMsTUFBTSxzQkFBc0IsQ0FBQztBQUV0RCxNQUFNLENBQUMsTUFBTSxlQUFlLEdBQWlCO0lBQzNDLFVBQVUsRUFBRSxTQUFTO0lBQ3JCLFdBQVcsRUFBRSxRQUFRO0lBQ3JCLFVBQVUsRUFBRSxDQUFDLEVBQUMsTUFBTSxFQUFFLEtBQUssRUFBRSxPQUFPLEVBQUMsRUFBRSxFQUFFO1FBQ3ZDLE1BQU0sRUFBQyxDQUFDLEVBQUMsR0FBRyxNQUF5QixDQUFDO1FBQ3RDLE1BQU0sRUFBQyxRQUFRLEVBQUUsSUFBSSxFQUFDLEdBQUcsS0FBa0MsQ0FBQztRQUM1RCxNQUFNLGFBQWEsR0FBRyxPQUF3QixDQUFDO1FBRS9DLE1BQU0sV0FBVyxHQUFHLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUU7WUFDbkMsT0FBTyxFQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFDLENBQUM7UUFDN0MsQ0FBQyxDQUFDLENBQUM7UUFDSCxNQUFNLE9BQU8sR0FBRyxJQUFJLGdCQUFnQixDQUFDLENBQUMsQ0FBQyxLQUFLLEVBQUUsUUFBUSxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQzlELE1BQU0sTUFBTSxHQUNSLGFBQWEsQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsS0FBSyxFQUFFLFdBQVcsQ0FBQyxDQUFDO1FBRXZFLE9BQU8sTUFBTSxDQUFDO0lBQ2hCLENBQUM7Q0FDRixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge0tlcm5lbENvbmZpZywgTWlycm9yUGFkLCBNaXJyb3JQYWRBdHRycywgTWlycm9yUGFkSW5wdXRzfSBmcm9tICdAdGVuc29yZmxvdy90ZmpzLWNvcmUnO1xuXG5pbXBvcnQge1dlYkdQVUJhY2tlbmR9IGZyb20gJy4uL2JhY2tlbmRfd2ViZ3B1JztcblxuaW1wb3J0IHtNaXJyb3JQYWRQcm9ncmFtfSBmcm9tICcuLi9taXJyb3JfcGFkX3dlYmdwdSc7XG5cbmV4cG9ydCBjb25zdCBtaXJyb3JQYWRDb25maWc6IEtlcm5lbENvbmZpZyA9IHtcbiAga2VybmVsTmFtZTogTWlycm9yUGFkLFxuICBiYWNrZW5kTmFtZTogJ3dlYmdwdScsXG4gIGtlcm5lbEZ1bmM6ICh7aW5wdXRzLCBhdHRycywgYmFja2VuZH0pID0+IHtcbiAgICBjb25zdCB7eH0gPSBpbnB1dHMgYXMgTWlycm9yUGFkSW5wdXRzO1xuICAgIGNvbnN0IHtwYWRkaW5ncywgbW9kZX0gPSBhdHRycyBhcyB1bmtub3duIGFzIE1pcnJvclBhZEF0dHJzO1xuICAgIGNvbnN0IHdlYkdQVUJhY2tlbmQgPSBiYWNrZW5kIGFzIFdlYkdQVUJhY2tlbmQ7XG5cbiAgICBjb25zdCB1bmlmb3JtRGF0YSA9IHBhZGRpbmdzLm1hcChwID0+IHtcbiAgICAgIHJldHVybiB7dHlwZTogJ2ludDMyJywgZGF0YTogW3BbMF0sIHBbMV1dfTtcbiAgICB9KTtcbiAgICBjb25zdCBwcm9ncmFtID0gbmV3IE1pcnJvclBhZFByb2dyYW0oeC5zaGFwZSwgcGFkZGluZ3MsIG1vZGUpO1xuICAgIGNvbnN0IG91dHB1dCA9XG4gICAgICAgIHdlYkdQVUJhY2tlbmQucnVuV2ViR1BVUHJvZ3JhbShwcm9ncmFtLCBbeF0sIHguZHR5cGUsIHVuaWZvcm1EYXRhKTtcblxuICAgIHJldHVybiBvdXRwdXQ7XG4gIH1cbn07XG4iXX0=","/**\n * @license\n * Copyright 2022 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Mod } from '@tensorflow/tfjs-core';\nimport { BinaryOpType } from '../binary_op_util';\nimport { binaryKernelFunc } from '../kernel_utils/kernel_funcs_utils';\nexport const mod = binaryKernelFunc({ opType: BinaryOpType.MOD });\nexport const modConfig = {\n    kernelName: Mod,\n    backendName: 'webgpu',\n    kernelFunc: mod\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTW9kLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMva2VybmVscy9Nb2QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUFlLEdBQUcsRUFBQyxNQUFNLHVCQUF1QixDQUFDO0FBRXhELE9BQU8sRUFBQyxZQUFZLEVBQUMsTUFBTSxtQkFBbUIsQ0FBQztBQUMvQyxPQUFPLEVBQUMsZ0JBQWdCLEVBQUMsTUFBTSxvQ0FBb0MsQ0FBQztBQUVwRSxNQUFNLENBQUMsTUFBTSxHQUFHLEdBQUcsZ0JBQWdCLENBQUMsRUFBQyxNQUFNLEVBQUUsWUFBWSxDQUFDLEdBQUcsRUFBQyxDQUFDLENBQUM7QUFFaEUsTUFBTSxDQUFDLE1BQU0sU0FBUyxHQUFpQjtJQUNyQyxVQUFVLEVBQUUsR0FBRztJQUNmLFdBQVcsRUFBRSxRQUFRO0lBQ3JCLFVBQVUsRUFBRSxHQUFHO0NBQ2hCLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7S2VybmVsQ29uZmlnLCBNb2R9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7QmluYXJ5T3BUeXBlfSBmcm9tICcuLi9iaW5hcnlfb3BfdXRpbCc7XG5pbXBvcnQge2JpbmFyeUtlcm5lbEZ1bmN9IGZyb20gJy4uL2tlcm5lbF91dGlscy9rZXJuZWxfZnVuY3NfdXRpbHMnO1xuXG5leHBvcnQgY29uc3QgbW9kID0gYmluYXJ5S2VybmVsRnVuYyh7b3BUeXBlOiBCaW5hcnlPcFR5cGUuTU9EfSk7XG5cbmV4cG9ydCBjb25zdCBtb2RDb25maWc6IEtlcm5lbENvbmZpZyA9IHtcbiAga2VybmVsTmFtZTogTW9kLFxuICBiYWNrZW5kTmFtZTogJ3dlYmdwdScsXG4gIGtlcm5lbEZ1bmM6IG1vZFxufTtcbiJdfQ==","/**\n * @license\n * Copyright 2023 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { getMainHeaderString as main } from './webgpu_program';\nimport { computeDispatch, flatDispatchLayout } from './webgpu_util';\nexport class MultinomialProgram {\n    constructor(batchSize, numSamples) {\n        this.variableNames = ['probs'];\n        this.outputShape = [];\n        this.uniforms = 'seed : f32, numOutcomes: i32,';\n        this.workgroupSize = [64, 1, 1];\n        this.size = true;\n        this.outputShape = [batchSize, numSamples];\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize);\n        this.shaderKey = 'multinomial';\n    }\n    getUserCode() {\n        const userCode = `\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    fn random (seed : f32, resultUV : vec2<f32>) -> f32 {\n      let HASHSCALE1 = 443.8975;\n      let p = resultUV * seed;\n      var p3  = fract(vec3<f32>(p.xyx) * HASHSCALE1);\n      p3 = p3 + dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ${main('index')} {\n      if (index < uniforms.size) {\n        let coords = getOutputCoords();\n        let batch = coords[0];\n\n        let resUV = vec2<f32>(f32(coords[1]) / f32(uniforms.outShape[1]),\n            f32(coords[0]) / f32(uniforms.outShape[0]));\n        let r = random(uniforms.seed, resUV);\n        var cdf = 0.0;\n        for (var i = 0; i < uniforms.numOutcomes - 1; i = i + 1) {\n          cdf = cdf + getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutputAtIndexI32(index, i);\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutputAtIndexI32(index, uniforms.numOutcomes - 1);\n      }\n    }\n  `;\n        return userCode;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXVsdGlub21pYWxfd2ViZ3B1LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMvbXVsdGlub21pYWxfd2ViZ3B1LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sRUFBQyxtQkFBbUIsSUFBSSxJQUFJLEVBQWdCLE1BQU0sa0JBQWtCLENBQUM7QUFDNUUsT0FBTyxFQUFDLGVBQWUsRUFBRSxrQkFBa0IsRUFBQyxNQUFNLGVBQWUsQ0FBQztBQUVsRSxNQUFNLE9BQU8sa0JBQWtCO0lBVTdCLFlBQVksU0FBaUIsRUFBRSxVQUFrQjtRQVRqRCxrQkFBYSxHQUFhLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDcEMsZ0JBQVcsR0FBYSxFQUFFLENBQUM7UUFJM0IsYUFBUSxHQUFHLCtCQUErQixDQUFDO1FBQzNDLGtCQUFhLEdBQTZCLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUNyRCxTQUFJLEdBQUcsSUFBSSxDQUFDO1FBR1YsSUFBSSxDQUFDLFdBQVcsR0FBRyxDQUFDLFNBQVMsRUFBRSxVQUFVLENBQUMsQ0FBQztRQUMzQyxJQUFJLENBQUMsY0FBYyxHQUFHLGtCQUFrQixDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUMzRCxJQUFJLENBQUMsUUFBUSxHQUFHLGVBQWUsQ0FDM0IsSUFBSSxDQUFDLGNBQWMsRUFBRSxJQUFJLENBQUMsV0FBVyxFQUFFLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQztRQUUvRCxJQUFJLENBQUMsU0FBUyxHQUFHLGFBQWEsQ0FBQztJQUNqQyxDQUFDO0lBRUQsV0FBVztRQUNULE1BQU0sUUFBUSxHQUFHOzs7Ozs7Ozs7OztNQVdmLElBQUksQ0FBQyxPQUFPLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7R0FzQmhCLENBQUM7UUFDQSxPQUFPLFFBQVEsQ0FBQztJQUNsQixDQUFDO0NBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMyBHb29nbGUgTExDLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7Z2V0TWFpbkhlYWRlclN0cmluZyBhcyBtYWluLCBXZWJHUFVQcm9ncmFtfSBmcm9tICcuL3dlYmdwdV9wcm9ncmFtJztcbmltcG9ydCB7Y29tcHV0ZURpc3BhdGNoLCBmbGF0RGlzcGF0Y2hMYXlvdXR9IGZyb20gJy4vd2ViZ3B1X3V0aWwnO1xuXG5leHBvcnQgY2xhc3MgTXVsdGlub21pYWxQcm9ncmFtIGltcGxlbWVudHMgV2ViR1BVUHJvZ3JhbSB7XG4gIHZhcmlhYmxlTmFtZXM6IHN0cmluZ1tdID0gWydwcm9icyddO1xuICBvdXRwdXRTaGFwZTogbnVtYmVyW10gPSBbXTtcbiAgc2hhZGVyS2V5OiBzdHJpbmc7XG4gIGRpc3BhdGNoTGF5b3V0OiB7eDogbnVtYmVyW119O1xuICBkaXNwYXRjaDogW251bWJlciwgbnVtYmVyLCBudW1iZXJdO1xuICB1bmlmb3JtcyA9ICdzZWVkIDogZjMyLCBudW1PdXRjb21lczogaTMyLCc7XG4gIHdvcmtncm91cFNpemU6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXSA9IFs2NCwgMSwgMV07XG4gIHNpemUgPSB0cnVlO1xuXG4gIGNvbnN0cnVjdG9yKGJhdGNoU2l6ZTogbnVtYmVyLCBudW1TYW1wbGVzOiBudW1iZXIpIHtcbiAgICB0aGlzLm91dHB1dFNoYXBlID0gW2JhdGNoU2l6ZSwgbnVtU2FtcGxlc107XG4gICAgdGhpcy5kaXNwYXRjaExheW91dCA9IGZsYXREaXNwYXRjaExheW91dCh0aGlzLm91dHB1dFNoYXBlKTtcbiAgICB0aGlzLmRpc3BhdGNoID0gY29tcHV0ZURpc3BhdGNoKFxuICAgICAgICB0aGlzLmRpc3BhdGNoTGF5b3V0LCB0aGlzLm91dHB1dFNoYXBlLCB0aGlzLndvcmtncm91cFNpemUpO1xuXG4gICAgdGhpcy5zaGFkZXJLZXkgPSAnbXVsdGlub21pYWwnO1xuICB9XG5cbiAgZ2V0VXNlckNvZGUoKTogc3RyaW5nIHtcbiAgICBjb25zdCB1c2VyQ29kZSA9IGBcbiAgICAvL0Jhc2VkIG9uIHRoZSB3b3JrIG9mIERhdmUgSG9za2luc1xuICAgIC8vaHR0cHM6Ly93d3cuc2hhZGVydG95LmNvbS92aWV3LzRkalNSV1xuICAgIGZuIHJhbmRvbSAoc2VlZCA6IGYzMiwgcmVzdWx0VVYgOiB2ZWMyPGYzMj4pIC0+IGYzMiB7XG4gICAgICBsZXQgSEFTSFNDQUxFMSA9IDQ0My44OTc1O1xuICAgICAgbGV0IHAgPSByZXN1bHRVViAqIHNlZWQ7XG4gICAgICB2YXIgcDMgID0gZnJhY3QodmVjMzxmMzI+KHAueHl4KSAqIEhBU0hTQ0FMRTEpO1xuICAgICAgcDMgPSBwMyArIGRvdChwMywgcDMueXp4ICsgMTkuMTkpO1xuICAgICAgcmV0dXJuIGZyYWN0KChwMy54ICsgcDMueSkgKiBwMy56KTtcbiAgICB9XG5cbiAgICAke21haW4oJ2luZGV4Jyl9IHtcbiAgICAgIGlmIChpbmRleCA8IHVuaWZvcm1zLnNpemUpIHtcbiAgICAgICAgbGV0IGNvb3JkcyA9IGdldE91dHB1dENvb3JkcygpO1xuICAgICAgICBsZXQgYmF0Y2ggPSBjb29yZHNbMF07XG5cbiAgICAgICAgbGV0IHJlc1VWID0gdmVjMjxmMzI+KGYzMihjb29yZHNbMV0pIC8gZjMyKHVuaWZvcm1zLm91dFNoYXBlWzFdKSxcbiAgICAgICAgICAgIGYzMihjb29yZHNbMF0pIC8gZjMyKHVuaWZvcm1zLm91dFNoYXBlWzBdKSk7XG4gICAgICAgIGxldCByID0gcmFuZG9tKHVuaWZvcm1zLnNlZWQsIHJlc1VWKTtcbiAgICAgICAgdmFyIGNkZiA9IDAuMDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB1bmlmb3Jtcy5udW1PdXRjb21lcyAtIDE7IGkgPSBpICsgMSkge1xuICAgICAgICAgIGNkZiA9IGNkZiArIGdldFByb2JzKGJhdGNoLCBpKTtcblxuICAgICAgICAgIGlmIChyIDwgY2RmKSB7XG4gICAgICAgICAgICBzZXRPdXRwdXRBdEluZGV4STMyKGluZGV4LCBpKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJZiBubyBvdGhlciBldmVudCBoYXBwZW5lZCwgbGFzdCBldmVudCBoYXBwZW5lZC5cbiAgICAgICAgc2V0T3V0cHV0QXRJbmRleEkzMihpbmRleCwgdW5pZm9ybXMubnVtT3V0Y29tZXMgLSAxKTtcbiAgICAgIH1cbiAgICB9XG4gIGA7XG4gICAgcmV0dXJuIHVzZXJDb2RlO1xuICB9XG59XG4iXX0=","/**\n * @license\n * Copyright 2023 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { getMainHeaderString as main } from './webgpu_program';\nimport { flatDispatchLayout } from './webgpu_util';\nexport class SoftmaxProgram {\n    constructor(outputShape) {\n        this.variableNames = ['logits'];\n        this.outputShape = outputShape; // [rows, cols]\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        this.dispatch = [this.outputShape[0], 1, 1];\n        if (this.outputShape[1] >= 4096) {\n            this.workgroupSize = [256, 1, 1];\n        }\n        else {\n            this.workgroupSize = [64, 1, 1];\n        }\n        this.shaderKey = 'softmax';\n    }\n    getUserCode() {\n        const userCode = `\n    var<workgroup> buf : array<f32, ${this.workgroupSize[0]}>;\n    var<workgroup> rowMaxShared : f32;\n    var<workgroup> rowSumShared : f32;\n    const blockSize = ${this.workgroupSize[0]};\n    ${main('index')} {\n      let row = index / blockSize;\n      let tid = i32(localId.x);\n      let cols = uniforms.outShape[1];\n\n      var threadMax = -3.402823e+38f;\n      for (var col = tid; col < cols; col += blockSize) {\n        let value = getLogits(row, col);\n        threadMax = max(threadMax, value);\n      }\n      if (tid < cols) {\n        buf[tid] = threadMax;\n      }\n      workgroupBarrier();\n\n      var reduceSize = min(cols, blockSize);\n      for (var currSize = reduceSize >> 1;  currSize > 0; currSize = reduceSize >> 1) {\n        reduceSize = currSize + (reduceSize & 1);\n        if (tid < currSize) {\n          buf[tid] = max(buf[tid], buf[tid + reduceSize]);\n        }\n        workgroupBarrier();\n      }\n\n      if (tid == 0) {\n        rowMaxShared = buf[0];\n      }\n      workgroupBarrier();\n\n      var threadSum = 0.0;\n      for (var col = tid; col < cols; col += blockSize) {\n        let subExp = exp(getLogits(row, col) - rowMaxShared);\n        threadSum += subExp;\n      }\n      buf[tid] = threadSum;\n      workgroupBarrier();\n\n      for (var currSize = blockSize >> 1;  currSize > 0; currSize = currSize >> 1) {\n        if (tid < currSize) {\n          buf[tid] = buf[tid] + buf[tid + currSize];\n        }\n        workgroupBarrier();\n      }\n\n      if (tid == 0) {\n        rowSumShared = buf[0];\n      }\n      workgroupBarrier();\n\n      for (var col = tid; col < cols; col += blockSize) {\n        let value = exp(getLogits(row, col) - rowMaxShared) / rowSumShared;\n        setOutputAtCoords(row, col, value);\n      }\n  }\n    `;\n        return userCode;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic29mdG1heF93ZWJncHUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9zb2Z0bWF4X3dlYmdwdS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQUMsbUJBQW1CLElBQUksSUFBSSxFQUFnQixNQUFNLGtCQUFrQixDQUFDO0FBQzVFLE9BQU8sRUFBQyxrQkFBa0IsRUFBQyxNQUFNLGVBQWUsQ0FBQztBQUVqRCxNQUFNLE9BQU8sY0FBYztJQVF6QixZQUFZLFdBQXFCO1FBUGpDLGtCQUFhLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQVF6QixJQUFJLENBQUMsV0FBVyxHQUFHLFdBQVcsQ0FBQyxDQUFFLGVBQWU7UUFDaEQsSUFBSSxDQUFDLGNBQWMsR0FBRyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDM0QsSUFBSSxDQUFDLFFBQVEsR0FBRyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQzVDLElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsSUFBSSxJQUFJLEVBQUU7WUFDL0IsSUFBSSxDQUFDLGFBQWEsR0FBRyxDQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7U0FDbEM7YUFBTTtZQUNMLElBQUksQ0FBQyxhQUFhLEdBQUcsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1NBQ2pDO1FBQ0QsSUFBSSxDQUFDLFNBQVMsR0FBRyxTQUFTLENBQUM7SUFDN0IsQ0FBQztJQUVELFdBQVc7UUFDVCxNQUFNLFFBQVEsR0FBRztzQ0FDaUIsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUM7Ozt3QkFHbkMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUM7TUFDdkMsSUFBSSxDQUFDLE9BQU8sQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0tBc0RkLENBQUM7UUFDRixPQUFPLFFBQVEsQ0FBQztJQUNsQixDQUFDO0NBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMyBHb29nbGUgTExDLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7Z2V0TWFpbkhlYWRlclN0cmluZyBhcyBtYWluLCBXZWJHUFVQcm9ncmFtfSBmcm9tICcuL3dlYmdwdV9wcm9ncmFtJztcbmltcG9ydCB7ZmxhdERpc3BhdGNoTGF5b3V0fSBmcm9tICcuL3dlYmdwdV91dGlsJztcblxuZXhwb3J0IGNsYXNzIFNvZnRtYXhQcm9ncmFtIGltcGxlbWVudHMgV2ViR1BVUHJvZ3JhbSB7XG4gIHZhcmlhYmxlTmFtZXMgPSBbJ2xvZ2l0cyddO1xuICBvdXRwdXRTaGFwZTogbnVtYmVyW107XG4gIHNoYWRlcktleTogc3RyaW5nO1xuICBkaXNwYXRjaExheW91dDoge3g6IG51bWJlcltdfTtcbiAgZGlzcGF0Y2g6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXTtcbiAgd29ya2dyb3VwU2l6ZTogW251bWJlciwgbnVtYmVyLCBudW1iZXJdO1xuXG4gIGNvbnN0cnVjdG9yKG91dHB1dFNoYXBlOiBudW1iZXJbXSkge1xuICAgIHRoaXMub3V0cHV0U2hhcGUgPSBvdXRwdXRTaGFwZTsgIC8vIFtyb3dzLCBjb2xzXVxuICAgIHRoaXMuZGlzcGF0Y2hMYXlvdXQgPSBmbGF0RGlzcGF0Y2hMYXlvdXQodGhpcy5vdXRwdXRTaGFwZSk7XG4gICAgdGhpcy5kaXNwYXRjaCA9IFt0aGlzLm91dHB1dFNoYXBlWzBdLCAxLCAxXTtcbiAgICBpZiAodGhpcy5vdXRwdXRTaGFwZVsxXSA+PSA0MDk2KSB7XG4gICAgICB0aGlzLndvcmtncm91cFNpemUgPSBbMjU2LCAxLCAxXTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy53b3JrZ3JvdXBTaXplID0gWzY0LCAxLCAxXTtcbiAgICB9XG4gICAgdGhpcy5zaGFkZXJLZXkgPSAnc29mdG1heCc7XG4gIH1cblxuICBnZXRVc2VyQ29kZSgpOiBzdHJpbmcge1xuICAgIGNvbnN0IHVzZXJDb2RlID0gYFxuICAgIHZhcjx3b3JrZ3JvdXA+IGJ1ZiA6IGFycmF5PGYzMiwgJHt0aGlzLndvcmtncm91cFNpemVbMF19PjtcbiAgICB2YXI8d29ya2dyb3VwPiByb3dNYXhTaGFyZWQgOiBmMzI7XG4gICAgdmFyPHdvcmtncm91cD4gcm93U3VtU2hhcmVkIDogZjMyO1xuICAgIGNvbnN0IGJsb2NrU2l6ZSA9ICR7dGhpcy53b3JrZ3JvdXBTaXplWzBdfTtcbiAgICAke21haW4oJ2luZGV4Jyl9IHtcbiAgICAgIGxldCByb3cgPSBpbmRleCAvIGJsb2NrU2l6ZTtcbiAgICAgIGxldCB0aWQgPSBpMzIobG9jYWxJZC54KTtcbiAgICAgIGxldCBjb2xzID0gdW5pZm9ybXMub3V0U2hhcGVbMV07XG5cbiAgICAgIHZhciB0aHJlYWRNYXggPSAtMy40MDI4MjNlKzM4ZjtcbiAgICAgIGZvciAodmFyIGNvbCA9IHRpZDsgY29sIDwgY29sczsgY29sICs9IGJsb2NrU2l6ZSkge1xuICAgICAgICBsZXQgdmFsdWUgPSBnZXRMb2dpdHMocm93LCBjb2wpO1xuICAgICAgICB0aHJlYWRNYXggPSBtYXgodGhyZWFkTWF4LCB2YWx1ZSk7XG4gICAgICB9XG4gICAgICBpZiAodGlkIDwgY29scykge1xuICAgICAgICBidWZbdGlkXSA9IHRocmVhZE1heDtcbiAgICAgIH1cbiAgICAgIHdvcmtncm91cEJhcnJpZXIoKTtcblxuICAgICAgdmFyIHJlZHVjZVNpemUgPSBtaW4oY29scywgYmxvY2tTaXplKTtcbiAgICAgIGZvciAodmFyIGN1cnJTaXplID0gcmVkdWNlU2l6ZSA+PiAxOyAgY3VyclNpemUgPiAwOyBjdXJyU2l6ZSA9IHJlZHVjZVNpemUgPj4gMSkge1xuICAgICAgICByZWR1Y2VTaXplID0gY3VyclNpemUgKyAocmVkdWNlU2l6ZSAmIDEpO1xuICAgICAgICBpZiAodGlkIDwgY3VyclNpemUpIHtcbiAgICAgICAgICBidWZbdGlkXSA9IG1heChidWZbdGlkXSwgYnVmW3RpZCArIHJlZHVjZVNpemVdKTtcbiAgICAgICAgfVxuICAgICAgICB3b3JrZ3JvdXBCYXJyaWVyKCk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aWQgPT0gMCkge1xuICAgICAgICByb3dNYXhTaGFyZWQgPSBidWZbMF07XG4gICAgICB9XG4gICAgICB3b3JrZ3JvdXBCYXJyaWVyKCk7XG5cbiAgICAgIHZhciB0aHJlYWRTdW0gPSAwLjA7XG4gICAgICBmb3IgKHZhciBjb2wgPSB0aWQ7IGNvbCA8IGNvbHM7IGNvbCArPSBibG9ja1NpemUpIHtcbiAgICAgICAgbGV0IHN1YkV4cCA9IGV4cChnZXRMb2dpdHMocm93LCBjb2wpIC0gcm93TWF4U2hhcmVkKTtcbiAgICAgICAgdGhyZWFkU3VtICs9IHN1YkV4cDtcbiAgICAgIH1cbiAgICAgIGJ1Zlt0aWRdID0gdGhyZWFkU3VtO1xuICAgICAgd29ya2dyb3VwQmFycmllcigpO1xuXG4gICAgICBmb3IgKHZhciBjdXJyU2l6ZSA9IGJsb2NrU2l6ZSA+PiAxOyAgY3VyclNpemUgPiAwOyBjdXJyU2l6ZSA9IGN1cnJTaXplID4+IDEpIHtcbiAgICAgICAgaWYgKHRpZCA8IGN1cnJTaXplKSB7XG4gICAgICAgICAgYnVmW3RpZF0gPSBidWZbdGlkXSArIGJ1Zlt0aWQgKyBjdXJyU2l6ZV07XG4gICAgICAgIH1cbiAgICAgICAgd29ya2dyb3VwQmFycmllcigpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGlkID09IDApIHtcbiAgICAgICAgcm93U3VtU2hhcmVkID0gYnVmWzBdO1xuICAgICAgfVxuICAgICAgd29ya2dyb3VwQmFycmllcigpO1xuXG4gICAgICBmb3IgKHZhciBjb2wgPSB0aWQ7IGNvbCA8IGNvbHM7IGNvbCArPSBibG9ja1NpemUpIHtcbiAgICAgICAgbGV0IHZhbHVlID0gZXhwKGdldExvZ2l0cyhyb3csIGNvbCkgLSByb3dNYXhTaGFyZWQpIC8gcm93U3VtU2hhcmVkO1xuICAgICAgICBzZXRPdXRwdXRBdENvb3Jkcyhyb3csIGNvbCwgdmFsdWUpO1xuICAgICAgfVxuICB9XG4gICAgYDtcbiAgICByZXR1cm4gdXNlckNvZGU7XG4gIH1cbn1cbiJdfQ==","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Softmax, util } from '@tensorflow/tfjs-core';\nimport { SoftmaxProgram } from '../softmax_webgpu';\nimport { reshape } from './Reshape';\nexport function softmax(args) {\n    const { inputs, backend, attrs } = args;\n    const { logits } = inputs;\n    const { dim } = attrs;\n    const logitsReshaped = reshape({\n        inputs: { x: logits },\n        backend,\n        attrs: {\n            shape: [\n                util.sizeFromShape(logits.shape) / logits.shape[dim], logits.shape[dim]\n            ]\n        }\n    });\n    const program = new SoftmaxProgram(logitsReshaped.shape);\n    const res = backend.runWebGPUProgram(program, [logitsReshaped], logits.dtype);\n    const resReshaped = reshape({ inputs: { x: res }, backend, attrs: { shape: logits.shape } });\n    backend.disposeData(logitsReshaped.dataId);\n    backend.disposeData(res.dataId);\n    return resReshaped;\n}\nexport const softmaxConfig = {\n    kernelName: Softmax,\n    backendName: 'webgpu',\n    kernelFunc: softmax\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU29mdG1heC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2tlcm5lbHMvU29mdG1heC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQTJCLE9BQU8sRUFBMkMsSUFBSSxFQUFDLE1BQU0sdUJBQXVCLENBQUM7QUFHdkgsT0FBTyxFQUFDLGNBQWMsRUFBQyxNQUFNLG1CQUFtQixDQUFDO0FBRWpELE9BQU8sRUFBQyxPQUFPLEVBQUMsTUFBTSxXQUFXLENBQUM7QUFFbEMsTUFBTSxVQUFVLE9BQU8sQ0FDbkIsSUFBMEU7SUFFNUUsTUFBTSxFQUFDLE1BQU0sRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFDLEdBQUcsSUFBSSxDQUFDO0lBQ3RDLE1BQU0sRUFBQyxNQUFNLEVBQUMsR0FBRyxNQUFNLENBQUM7SUFDeEIsTUFBTSxFQUFDLEdBQUcsRUFBQyxHQUFHLEtBQUssQ0FBQztJQUVwQixNQUFNLGNBQWMsR0FBRyxPQUFPLENBQUM7UUFDN0IsTUFBTSxFQUFFLEVBQUMsQ0FBQyxFQUFFLE1BQU0sRUFBQztRQUNuQixPQUFPO1FBQ1AsS0FBSyxFQUFFO1lBQ0wsS0FBSyxFQUFFO2dCQUNMLElBQUksQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLEVBQUUsTUFBTSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUM7YUFDeEU7U0FDRjtLQUNGLENBQUMsQ0FBQztJQUNILE1BQU0sT0FBTyxHQUFHLElBQUksY0FBYyxDQUFDLGNBQWMsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUN6RCxNQUFNLEdBQUcsR0FBRyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLENBQUMsY0FBYyxDQUFDLEVBQUUsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQzlFLE1BQU0sV0FBVyxHQUNiLE9BQU8sQ0FBQyxFQUFDLE1BQU0sRUFBRSxFQUFDLENBQUMsRUFBRSxHQUFHLEVBQUMsRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLEVBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxLQUFLLEVBQUMsRUFBQyxDQUFDLENBQUM7SUFDdkUsT0FBTyxDQUFDLFdBQVcsQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDM0MsT0FBTyxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDaEMsT0FBTyxXQUFXLENBQUM7QUFDckIsQ0FBQztBQUVELE1BQU0sQ0FBQyxNQUFNLGFBQWEsR0FBaUI7SUFDekMsVUFBVSxFQUFFLE9BQU87SUFDbkIsV0FBVyxFQUFFLFFBQVE7SUFDckIsVUFBVSxFQUFFLE9BQWdDO0NBQzdDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7S2VybmVsQ29uZmlnLCBLZXJuZWxGdW5jLCBTb2Z0bWF4LCBTb2Z0bWF4QXR0cnMsIFNvZnRtYXhJbnB1dHMsIFRlbnNvckluZm8sIHV0aWx9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7V2ViR1BVQmFja2VuZH0gZnJvbSAnLi4vYmFja2VuZF93ZWJncHUnO1xuaW1wb3J0IHtTb2Z0bWF4UHJvZ3JhbX0gZnJvbSAnLi4vc29mdG1heF93ZWJncHUnO1xuXG5pbXBvcnQge3Jlc2hhcGV9IGZyb20gJy4vUmVzaGFwZSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBzb2Z0bWF4KFxuICAgIGFyZ3M6IHtpbnB1dHM6IFNvZnRtYXhJbnB1dHMsIGJhY2tlbmQ6IFdlYkdQVUJhY2tlbmQsIGF0dHJzOiBTb2Z0bWF4QXR0cnN9KTpcbiAgICBUZW5zb3JJbmZvIHtcbiAgY29uc3Qge2lucHV0cywgYmFja2VuZCwgYXR0cnN9ID0gYXJncztcbiAgY29uc3Qge2xvZ2l0c30gPSBpbnB1dHM7XG4gIGNvbnN0IHtkaW19ID0gYXR0cnM7XG5cbiAgY29uc3QgbG9naXRzUmVzaGFwZWQgPSByZXNoYXBlKHtcbiAgICBpbnB1dHM6IHt4OiBsb2dpdHN9LFxuICAgIGJhY2tlbmQsXG4gICAgYXR0cnM6IHtcbiAgICAgIHNoYXBlOiBbXG4gICAgICAgIHV0aWwuc2l6ZUZyb21TaGFwZShsb2dpdHMuc2hhcGUpIC8gbG9naXRzLnNoYXBlW2RpbV0sIGxvZ2l0cy5zaGFwZVtkaW1dXG4gICAgICBdXG4gICAgfVxuICB9KTtcbiAgY29uc3QgcHJvZ3JhbSA9IG5ldyBTb2Z0bWF4UHJvZ3JhbShsb2dpdHNSZXNoYXBlZC5zaGFwZSk7XG4gIGNvbnN0IHJlcyA9IGJhY2tlbmQucnVuV2ViR1BVUHJvZ3JhbShwcm9ncmFtLCBbbG9naXRzUmVzaGFwZWRdLCBsb2dpdHMuZHR5cGUpO1xuICBjb25zdCByZXNSZXNoYXBlZCA9XG4gICAgICByZXNoYXBlKHtpbnB1dHM6IHt4OiByZXN9LCBiYWNrZW5kLCBhdHRyczoge3NoYXBlOiBsb2dpdHMuc2hhcGV9fSk7XG4gIGJhY2tlbmQuZGlzcG9zZURhdGEobG9naXRzUmVzaGFwZWQuZGF0YUlkKTtcbiAgYmFja2VuZC5kaXNwb3NlRGF0YShyZXMuZGF0YUlkKTtcbiAgcmV0dXJuIHJlc1Jlc2hhcGVkO1xufVxuXG5leHBvcnQgY29uc3Qgc29mdG1heENvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBTb2Z0bWF4LFxuICBiYWNrZW5kTmFtZTogJ3dlYmdwdScsXG4gIGtlcm5lbEZ1bmM6IHNvZnRtYXggYXMgdW5rbm93biBhcyBLZXJuZWxGdW5jXG59O1xuIl19","/**\n * @license\n * Copyright 2023 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Multinomial } from '@tensorflow/tfjs-core';\nimport { MultinomialProgram } from '../multinomial_webgpu';\nimport { softmax } from './Softmax';\nexport function multinomial(args) {\n    const { inputs, backend, attrs } = args;\n    const { logits } = inputs;\n    const { numSamples, seed, normalized } = attrs;\n    const probs = normalized ?\n        logits :\n        softmax({ inputs: { logits }, backend, attrs: { dim: logits.shape.length - 1 } });\n    const batchSize = probs.shape[0];\n    const numOutcomes = probs.shape[1];\n    const program = new MultinomialProgram(batchSize, numSamples);\n    const uniformData = [{ type: 'float32', data: [seed] }, { type: 'int32', data: [numOutcomes] }];\n    const res = backend.runWebGPUProgram(program, [probs], 'int32', uniformData);\n    if (!normalized) {\n        backend.disposeData(probs.dataId);\n    }\n    return res;\n}\nexport const multinomialConfig = {\n    kernelName: Multinomial,\n    backendName: 'webgpu',\n    kernelFunc: multinomial\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTXVsdGlub21pYWwuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9rZXJuZWxzL011bHRpbm9taWFsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sRUFBMkIsV0FBVyxFQUFrRCxNQUFNLHVCQUF1QixDQUFDO0FBRzdILE9BQU8sRUFBQyxrQkFBa0IsRUFBQyxNQUFNLHVCQUF1QixDQUFDO0FBRXpELE9BQU8sRUFBQyxPQUFPLEVBQUMsTUFBTSxXQUFXLENBQUM7QUFFbEMsTUFBTSxVQUFVLFdBQVcsQ0FBQyxJQUkzQjtJQUNDLE1BQU0sRUFBQyxNQUFNLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBQyxHQUFHLElBQUksQ0FBQztJQUN0QyxNQUFNLEVBQUMsTUFBTSxFQUFDLEdBQUcsTUFBTSxDQUFDO0lBQ3hCLE1BQU0sRUFBQyxVQUFVLEVBQUUsSUFBSSxFQUFFLFVBQVUsRUFBQyxHQUFHLEtBQUssQ0FBQztJQUU3QyxNQUFNLEtBQUssR0FBRyxVQUFVLENBQUMsQ0FBQztRQUN0QixNQUFNLENBQUMsQ0FBQztRQUNSLE9BQU8sQ0FDSCxFQUFDLE1BQU0sRUFBRSxFQUFDLE1BQU0sRUFBQyxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsRUFBQyxHQUFHLEVBQUUsTUFBTSxDQUFDLEtBQUssQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFDLEVBQUMsQ0FBQyxDQUFDO0lBQzVFLE1BQU0sU0FBUyxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDakMsTUFBTSxXQUFXLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNuQyxNQUFNLE9BQU8sR0FBRyxJQUFJLGtCQUFrQixDQUFDLFNBQVMsRUFBRSxVQUFVLENBQUMsQ0FBQztJQUM5RCxNQUFNLFdBQVcsR0FDYixDQUFDLEVBQUMsSUFBSSxFQUFFLFNBQVMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxJQUFJLENBQUMsRUFBQyxFQUFFLEVBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsQ0FBQyxXQUFXLENBQUMsRUFBQyxDQUFDLENBQUM7SUFDNUUsTUFBTSxHQUFHLEdBQUcsT0FBTyxDQUFDLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxDQUFDLEtBQUssQ0FBQyxFQUFFLE9BQU8sRUFBRSxXQUFXLENBQUMsQ0FBQztJQUM3RSxJQUFJLENBQUMsVUFBVSxFQUFFO1FBQ2YsT0FBTyxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUM7S0FDbkM7SUFDRCxPQUFPLEdBQUcsQ0FBQztBQUNiLENBQUM7QUFFRCxNQUFNLENBQUMsTUFBTSxpQkFBaUIsR0FBaUI7SUFDN0MsVUFBVSxFQUFFLFdBQVc7SUFDdkIsV0FBVyxFQUFFLFFBQVE7SUFDckIsVUFBVSxFQUFFLFdBQW9DO0NBQ2pELENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMyBHb29nbGUgTExDLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7S2VybmVsQ29uZmlnLCBLZXJuZWxGdW5jLCBNdWx0aW5vbWlhbCwgTXVsdGlub21pYWxBdHRycywgTXVsdGlub21pYWxJbnB1dHMsIFRlbnNvckluZm99IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7V2ViR1BVQmFja2VuZH0gZnJvbSAnLi4vYmFja2VuZF93ZWJncHUnO1xuaW1wb3J0IHtNdWx0aW5vbWlhbFByb2dyYW19IGZyb20gJy4uL211bHRpbm9taWFsX3dlYmdwdSc7XG5cbmltcG9ydCB7c29mdG1heH0gZnJvbSAnLi9Tb2Z0bWF4JztcblxuZXhwb3J0IGZ1bmN0aW9uIG11bHRpbm9taWFsKGFyZ3M6IHtcbiAgaW5wdXRzOiBNdWx0aW5vbWlhbElucHV0cyxcbiAgYmFja2VuZDogV2ViR1BVQmFja2VuZCxcbiAgYXR0cnM6IE11bHRpbm9taWFsQXR0cnNcbn0pOiBUZW5zb3JJbmZvIHtcbiAgY29uc3Qge2lucHV0cywgYmFja2VuZCwgYXR0cnN9ID0gYXJncztcbiAgY29uc3Qge2xvZ2l0c30gPSBpbnB1dHM7XG4gIGNvbnN0IHtudW1TYW1wbGVzLCBzZWVkLCBub3JtYWxpemVkfSA9IGF0dHJzO1xuXG4gIGNvbnN0IHByb2JzID0gbm9ybWFsaXplZCA/XG4gICAgICBsb2dpdHMgOlxuICAgICAgc29mdG1heChcbiAgICAgICAgICB7aW5wdXRzOiB7bG9naXRzfSwgYmFja2VuZCwgYXR0cnM6IHtkaW06IGxvZ2l0cy5zaGFwZS5sZW5ndGggLSAxfX0pO1xuICBjb25zdCBiYXRjaFNpemUgPSBwcm9icy5zaGFwZVswXTtcbiAgY29uc3QgbnVtT3V0Y29tZXMgPSBwcm9icy5zaGFwZVsxXTtcbiAgY29uc3QgcHJvZ3JhbSA9IG5ldyBNdWx0aW5vbWlhbFByb2dyYW0oYmF0Y2hTaXplLCBudW1TYW1wbGVzKTtcbiAgY29uc3QgdW5pZm9ybURhdGEgPVxuICAgICAgW3t0eXBlOiAnZmxvYXQzMicsIGRhdGE6IFtzZWVkXX0sIHt0eXBlOiAnaW50MzInLCBkYXRhOiBbbnVtT3V0Y29tZXNdfV07XG4gIGNvbnN0IHJlcyA9IGJhY2tlbmQucnVuV2ViR1BVUHJvZ3JhbShwcm9ncmFtLCBbcHJvYnNdLCAnaW50MzInLCB1bmlmb3JtRGF0YSk7XG4gIGlmICghbm9ybWFsaXplZCkge1xuICAgIGJhY2tlbmQuZGlzcG9zZURhdGEocHJvYnMuZGF0YUlkKTtcbiAgfVxuICByZXR1cm4gcmVzO1xufVxuXG5leHBvcnQgY29uc3QgbXVsdGlub21pYWxDb25maWc6IEtlcm5lbENvbmZpZyA9IHtcbiAga2VybmVsTmFtZTogTXVsdGlub21pYWwsXG4gIGJhY2tlbmROYW1lOiAnd2ViZ3B1JyxcbiAga2VybmVsRnVuYzogbXVsdGlub21pYWwgYXMgdW5rbm93biBhcyBLZXJuZWxGdW5jXG59O1xuIl19","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Neg } from '@tensorflow/tfjs-core';\nimport { negImplCPU } from '../kernel_utils/shared';\nimport { UnaryOpType } from '../unary_op_util';\nimport { UnaryOpProgram } from '../unary_op_webgpu';\n// This doesn't use unaryKernelFunc because negImplCPU is not of type\n// SimpleUnaryKernelImplCPU.\nexport function neg(args) {\n    const { inputs, backend } = args;\n    const { x } = inputs;\n    if (backend.shouldExecuteOnCPU([x])) {\n        const xData = backend.tensorMap.get(x.dataId);\n        const [outValues, newShape] = negImplCPU(xData.values, x.shape, x.dtype);\n        return backend.makeTensorInfo(newShape, x.dtype, outValues);\n    }\n    const program = new UnaryOpProgram(x.shape, UnaryOpType.NEG);\n    return backend.runWebGPUProgram(program, [x], x.dtype);\n}\nexport const negConfig = {\n    kernelName: Neg,\n    backendName: 'webgpu',\n    kernelFunc: neg\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTmVnLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMva2VybmVscy9OZWcudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUEyQixHQUFHLEVBQW9DLE1BQU0sdUJBQXVCLENBQUM7QUFHdkcsT0FBTyxFQUFDLFVBQVUsRUFBQyxNQUFNLHdCQUF3QixDQUFDO0FBRWxELE9BQU8sRUFBQyxXQUFXLEVBQUMsTUFBTSxrQkFBa0IsQ0FBQztBQUM3QyxPQUFPLEVBQUMsY0FBYyxFQUFDLE1BQU0sb0JBQW9CLENBQUM7QUFFbEQscUVBQXFFO0FBQ3JFLDRCQUE0QjtBQUM1QixNQUFNLFVBQVUsR0FBRyxDQUFDLElBQWlEO0lBRW5FLE1BQU0sRUFBQyxNQUFNLEVBQUUsT0FBTyxFQUFDLEdBQUcsSUFBSSxDQUFDO0lBQy9CLE1BQU0sRUFBQyxDQUFDLEVBQUMsR0FBRyxNQUFNLENBQUM7SUFFbkIsSUFBSSxPQUFPLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFO1FBQ25DLE1BQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUM5QyxNQUFNLENBQUMsU0FBUyxFQUFFLFFBQVEsQ0FBQyxHQUN2QixVQUFVLENBQUMsS0FBSyxDQUFDLE1BQW9CLEVBQUUsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDN0QsT0FBTyxPQUFPLENBQUMsY0FBYyxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUMsS0FBSyxFQUFFLFNBQVMsQ0FBQyxDQUFDO0tBQzdEO0lBRUQsTUFBTSxPQUFPLEdBQUcsSUFBSSxjQUFjLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBRSxXQUFXLENBQUMsR0FBRyxDQUFDLENBQUM7SUFFN0QsT0FBTyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQ3pELENBQUM7QUFFRCxNQUFNLENBQUMsTUFBTSxTQUFTLEdBQWlCO0lBQ3JDLFVBQVUsRUFBRSxHQUFHO0lBQ2YsV0FBVyxFQUFFLFFBQVE7SUFDckIsVUFBVSxFQUFFLEdBQTRCO0NBQ3pDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7S2VybmVsQ29uZmlnLCBLZXJuZWxGdW5jLCBOZWcsIE5lZ0lucHV0cywgVGVuc29ySW5mbywgVHlwZWRBcnJheX0gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcblxuaW1wb3J0IHtXZWJHUFVCYWNrZW5kfSBmcm9tICcuLi9iYWNrZW5kX3dlYmdwdSc7XG5pbXBvcnQge25lZ0ltcGxDUFV9IGZyb20gJy4uL2tlcm5lbF91dGlscy9zaGFyZWQnO1xuXG5pbXBvcnQge1VuYXJ5T3BUeXBlfSBmcm9tICcuLi91bmFyeV9vcF91dGlsJztcbmltcG9ydCB7VW5hcnlPcFByb2dyYW19IGZyb20gJy4uL3VuYXJ5X29wX3dlYmdwdSc7XG5cbi8vIFRoaXMgZG9lc24ndCB1c2UgdW5hcnlLZXJuZWxGdW5jIGJlY2F1c2UgbmVnSW1wbENQVSBpcyBub3Qgb2YgdHlwZVxuLy8gU2ltcGxlVW5hcnlLZXJuZWxJbXBsQ1BVLlxuZXhwb3J0IGZ1bmN0aW9uIG5lZyhhcmdzOiB7aW5wdXRzOiBOZWdJbnB1dHMsIGJhY2tlbmQ6IFdlYkdQVUJhY2tlbmR9KTpcbiAgICBUZW5zb3JJbmZvIHtcbiAgY29uc3Qge2lucHV0cywgYmFja2VuZH0gPSBhcmdzO1xuICBjb25zdCB7eH0gPSBpbnB1dHM7XG5cbiAgaWYgKGJhY2tlbmQuc2hvdWxkRXhlY3V0ZU9uQ1BVKFt4XSkpIHtcbiAgICBjb25zdCB4RGF0YSA9IGJhY2tlbmQudGVuc29yTWFwLmdldCh4LmRhdGFJZCk7XG4gICAgY29uc3QgW291dFZhbHVlcywgbmV3U2hhcGVdID1cbiAgICAgICAgbmVnSW1wbENQVSh4RGF0YS52YWx1ZXMgYXMgVHlwZWRBcnJheSwgeC5zaGFwZSwgeC5kdHlwZSk7XG4gICAgcmV0dXJuIGJhY2tlbmQubWFrZVRlbnNvckluZm8obmV3U2hhcGUsIHguZHR5cGUsIG91dFZhbHVlcyk7XG4gIH1cblxuICBjb25zdCBwcm9ncmFtID0gbmV3IFVuYXJ5T3BQcm9ncmFtKHguc2hhcGUsIFVuYXJ5T3BUeXBlLk5FRyk7XG5cbiAgcmV0dXJuIGJhY2tlbmQucnVuV2ViR1BVUHJvZ3JhbShwcm9ncmFtLCBbeF0sIHguZHR5cGUpO1xufVxuXG5leHBvcnQgY29uc3QgbmVnQ29uZmlnOiBLZXJuZWxDb25maWcgPSB7XG4gIGtlcm5lbE5hbWU6IE5lZyxcbiAgYmFja2VuZE5hbWU6ICd3ZWJncHUnLFxuICBrZXJuZWxGdW5jOiBuZWcgYXMgdW5rbm93biBhcyBLZXJuZWxGdW5jXG59O1xuIl19","/**\n * @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { kernel_impls, NonMaxSuppressionV3 } from '@tensorflow/tfjs-core';\nexport function nonMaxSuppressionV3(args) {\n    console.warn('tf.nonMaxSuppression() in webgpu locks the UI thread. ' +\n        'Call tf.nonMaxSuppressionAsync() instead');\n    const { inputs, backend, attrs } = args;\n    const { boxes, scores } = inputs;\n    const { maxOutputSize, iouThreshold, scoreThreshold } = attrs;\n    const boxesVals = backend.readSync(boxes.dataId);\n    const scoresVals = backend.readSync(scores.dataId);\n    const { selectedIndices } = kernel_impls.nonMaxSuppressionV3Impl(boxesVals, scoresVals, maxOutputSize, iouThreshold, scoreThreshold);\n    return backend.makeTensorInfo([selectedIndices.length], 'int32', new Int32Array(selectedIndices));\n}\nexport const nonMaxSuppressionV3Config = {\n    kernelName: NonMaxSuppressionV3,\n    backendName: 'webgpu',\n    kernelFunc: nonMaxSuppressionV3\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTm9uTWF4U3VwcHJlc3Npb25WMy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2tlcm5lbHMvTm9uTWF4U3VwcHJlc3Npb25WMy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQUMsWUFBWSxFQUE0QixtQkFBbUIsRUFBa0UsTUFBTSx1QkFBdUIsQ0FBQztBQUduSyxNQUFNLFVBQVUsbUJBQW1CLENBQUMsSUFJbkM7SUFDQyxPQUFPLENBQUMsSUFBSSxDQUNSLHdEQUF3RDtRQUN4RCwwQ0FBMEMsQ0FBQyxDQUFDO0lBRWhELE1BQU0sRUFBQyxNQUFNLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBQyxHQUFHLElBQUksQ0FBQztJQUN0QyxNQUFNLEVBQUMsS0FBSyxFQUFFLE1BQU0sRUFBQyxHQUFHLE1BQU0sQ0FBQztJQUMvQixNQUFNLEVBQUMsYUFBYSxFQUFFLFlBQVksRUFBRSxjQUFjLEVBQUMsR0FBRyxLQUFLLENBQUM7SUFFNUQsTUFBTSxTQUFTLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFlLENBQUM7SUFDL0QsTUFBTSxVQUFVLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFlLENBQUM7SUFFakUsTUFBTSxFQUFDLGVBQWUsRUFBQyxHQUFHLFlBQVksQ0FBQyx1QkFBdUIsQ0FDMUQsU0FBUyxFQUFFLFVBQVUsRUFBRSxhQUFhLEVBQUUsWUFBWSxFQUFFLGNBQWMsQ0FBQyxDQUFDO0lBRXhFLE9BQU8sT0FBTyxDQUFDLGNBQWMsQ0FDekIsQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUFDLEVBQUUsT0FBTyxFQUFFLElBQUksVUFBVSxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUM7QUFDMUUsQ0FBQztBQUVELE1BQU0sQ0FBQyxNQUFNLHlCQUF5QixHQUFpQjtJQUNyRCxVQUFVLEVBQUUsbUJBQW1CO0lBQy9CLFdBQVcsRUFBRSxRQUFRO0lBQ3JCLFVBQVUsRUFBRSxtQkFBNEM7Q0FDekQsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtrZXJuZWxfaW1wbHMsIEtlcm5lbENvbmZpZywgS2VybmVsRnVuYywgTm9uTWF4U3VwcHJlc3Npb25WMywgTm9uTWF4U3VwcHJlc3Npb25WM0F0dHJzLCBOb25NYXhTdXBwcmVzc2lvblYzSW5wdXRzLCBUeXBlZEFycmF5fSBmcm9tICdAdGVuc29yZmxvdy90ZmpzLWNvcmUnO1xuaW1wb3J0IHtXZWJHUFVCYWNrZW5kfSBmcm9tICcuLi9iYWNrZW5kX3dlYmdwdSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBub25NYXhTdXBwcmVzc2lvblYzKGFyZ3M6IHtcbiAgaW5wdXRzOiBOb25NYXhTdXBwcmVzc2lvblYzSW5wdXRzLFxuICBiYWNrZW5kOiBXZWJHUFVCYWNrZW5kLFxuICBhdHRyczogTm9uTWF4U3VwcHJlc3Npb25WM0F0dHJzXG59KSB7XG4gIGNvbnNvbGUud2FybihcbiAgICAgICd0Zi5ub25NYXhTdXBwcmVzc2lvbigpIGluIHdlYmdwdSBsb2NrcyB0aGUgVUkgdGhyZWFkLiAnICtcbiAgICAgICdDYWxsIHRmLm5vbk1heFN1cHByZXNzaW9uQXN5bmMoKSBpbnN0ZWFkJyk7XG5cbiAgY29uc3Qge2lucHV0cywgYmFja2VuZCwgYXR0cnN9ID0gYXJncztcbiAgY29uc3Qge2JveGVzLCBzY29yZXN9ID0gaW5wdXRzO1xuICBjb25zdCB7bWF4T3V0cHV0U2l6ZSwgaW91VGhyZXNob2xkLCBzY29yZVRocmVzaG9sZH0gPSBhdHRycztcblxuICBjb25zdCBib3hlc1ZhbHMgPSBiYWNrZW5kLnJlYWRTeW5jKGJveGVzLmRhdGFJZCkgYXMgVHlwZWRBcnJheTtcbiAgY29uc3Qgc2NvcmVzVmFscyA9IGJhY2tlbmQucmVhZFN5bmMoc2NvcmVzLmRhdGFJZCkgYXMgVHlwZWRBcnJheTtcblxuICBjb25zdCB7c2VsZWN0ZWRJbmRpY2VzfSA9IGtlcm5lbF9pbXBscy5ub25NYXhTdXBwcmVzc2lvblYzSW1wbChcbiAgICAgIGJveGVzVmFscywgc2NvcmVzVmFscywgbWF4T3V0cHV0U2l6ZSwgaW91VGhyZXNob2xkLCBzY29yZVRocmVzaG9sZCk7XG5cbiAgcmV0dXJuIGJhY2tlbmQubWFrZVRlbnNvckluZm8oXG4gICAgICBbc2VsZWN0ZWRJbmRpY2VzLmxlbmd0aF0sICdpbnQzMicsIG5ldyBJbnQzMkFycmF5KHNlbGVjdGVkSW5kaWNlcykpO1xufVxuXG5leHBvcnQgY29uc3Qgbm9uTWF4U3VwcHJlc3Npb25WM0NvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBOb25NYXhTdXBwcmVzc2lvblYzLFxuICBiYWNrZW5kTmFtZTogJ3dlYmdwdScsXG4gIGtlcm5lbEZ1bmM6IG5vbk1heFN1cHByZXNzaW9uVjMgYXMgdW5rbm93biBhcyBLZXJuZWxGdW5jXG59O1xuIl19","/**\n * @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { kernel_impls, NonMaxSuppressionV5 } from '@tensorflow/tfjs-core';\nexport function nonMaxSuppressionV5(args) {\n    console.warn('tf.nonMaxSuppression() in webgpu locks the UI thread. ' +\n        'Call tf.nonMaxSuppressionAsync() instead');\n    const { inputs, backend, attrs } = args;\n    const { boxes, scores } = inputs;\n    const { maxOutputSize, iouThreshold, scoreThreshold, softNmsSigma } = attrs;\n    const boxesVals = backend.readSync(boxes.dataId);\n    const scoresVals = backend.readSync(scores.dataId);\n    const maxOutputSizeVal = maxOutputSize;\n    const iouThresholdVal = iouThreshold;\n    const scoreThresholdVal = scoreThreshold;\n    const softNmsSigmaVal = softNmsSigma;\n    const { selectedIndices, selectedScores } = kernel_impls.nonMaxSuppressionV5Impl(boxesVals, scoresVals, maxOutputSizeVal, iouThresholdVal, scoreThresholdVal, softNmsSigmaVal);\n    return [\n        backend.makeTensorInfo([selectedIndices.length], 'int32', new Int32Array(selectedIndices)),\n        backend.makeTensorInfo([selectedScores.length], 'float32', new Float32Array(selectedScores))\n    ];\n}\nexport const nonMaxSuppressionV5Config = {\n    kernelName: NonMaxSuppressionV5,\n    backendName: 'webgpu',\n    kernelFunc: nonMaxSuppressionV5\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTm9uTWF4U3VwcHJlc3Npb25WNS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2tlcm5lbHMvTm9uTWF4U3VwcHJlc3Npb25WNS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFDSCxPQUFPLEVBQUMsWUFBWSxFQUE0QixtQkFBbUIsRUFBa0UsTUFBTSx1QkFBdUIsQ0FBQztBQUtuSyxNQUFNLFVBQVUsbUJBQW1CLENBQUMsSUFJbkM7SUFDQyxPQUFPLENBQUMsSUFBSSxDQUNSLHdEQUF3RDtRQUN4RCwwQ0FBMEMsQ0FBQyxDQUFDO0lBRWhELE1BQU0sRUFBQyxNQUFNLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBQyxHQUFHLElBQUksQ0FBQztJQUN0QyxNQUFNLEVBQUMsS0FBSyxFQUFFLE1BQU0sRUFBQyxHQUFHLE1BQU0sQ0FBQztJQUMvQixNQUFNLEVBQUMsYUFBYSxFQUFFLFlBQVksRUFBRSxjQUFjLEVBQUUsWUFBWSxFQUFDLEdBQUcsS0FBSyxDQUFDO0lBRTFFLE1BQU0sU0FBUyxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBZSxDQUFDO0lBQy9ELE1BQU0sVUFBVSxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBZSxDQUFDO0lBRWpFLE1BQU0sZ0JBQWdCLEdBQUcsYUFBYSxDQUFDO0lBQ3ZDLE1BQU0sZUFBZSxHQUFHLFlBQVksQ0FBQztJQUNyQyxNQUFNLGlCQUFpQixHQUFHLGNBQWMsQ0FBQztJQUN6QyxNQUFNLGVBQWUsR0FBRyxZQUFZLENBQUM7SUFFckMsTUFBTSxFQUFDLGVBQWUsRUFBRSxjQUFjLEVBQUMsR0FDbkMsWUFBWSxDQUFDLHVCQUF1QixDQUNoQyxTQUFTLEVBQUUsVUFBVSxFQUFFLGdCQUFnQixFQUFFLGVBQWUsRUFDeEQsaUJBQWlCLEVBQUUsZUFBZSxDQUFDLENBQUM7SUFFNUMsT0FBTztRQUNMLE9BQU8sQ0FBQyxjQUFjLENBQ2xCLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBQyxFQUFFLE9BQU8sRUFBRSxJQUFJLFVBQVUsQ0FBQyxlQUFlLENBQUMsQ0FBQztRQUN2RSxPQUFPLENBQUMsY0FBYyxDQUNsQixDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsRUFBRSxTQUFTLEVBQUUsSUFBSSxZQUFZLENBQUMsY0FBYyxDQUFDLENBQUM7S0FDMUUsQ0FBQztBQUNKLENBQUM7QUFFRCxNQUFNLENBQUMsTUFBTSx5QkFBeUIsR0FBaUI7SUFDckQsVUFBVSxFQUFFLG1CQUFtQjtJQUMvQixXQUFXLEVBQUUsUUFBUTtJQUNyQixVQUFVLEVBQUUsbUJBQTRDO0NBQ3pELENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5pbXBvcnQge2tlcm5lbF9pbXBscywgS2VybmVsQ29uZmlnLCBLZXJuZWxGdW5jLCBOb25NYXhTdXBwcmVzc2lvblY1LCBOb25NYXhTdXBwcmVzc2lvblY1QXR0cnMsIE5vbk1heFN1cHByZXNzaW9uVjVJbnB1dHMsIFRlbnNvckluZm99IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7V2ViR1BVQmFja2VuZH0gZnJvbSAnLi4vYmFja2VuZF93ZWJncHUnO1xuZXhwb3J0IHR5cGUgVHlwZWRBcnJheSA9IEZsb2F0MzJBcnJheXxJbnQzMkFycmF5fFVpbnQ4QXJyYXk7XG5cbmV4cG9ydCBmdW5jdGlvbiBub25NYXhTdXBwcmVzc2lvblY1KGFyZ3M6IHtcbiAgaW5wdXRzOiBOb25NYXhTdXBwcmVzc2lvblY1SW5wdXRzLFxuICBiYWNrZW5kOiBXZWJHUFVCYWNrZW5kLFxuICBhdHRyczogTm9uTWF4U3VwcHJlc3Npb25WNUF0dHJzXG59KTogW1RlbnNvckluZm8sIFRlbnNvckluZm9dIHtcbiAgY29uc29sZS53YXJuKFxuICAgICAgJ3RmLm5vbk1heFN1cHByZXNzaW9uKCkgaW4gd2ViZ3B1IGxvY2tzIHRoZSBVSSB0aHJlYWQuICcgK1xuICAgICAgJ0NhbGwgdGYubm9uTWF4U3VwcHJlc3Npb25Bc3luYygpIGluc3RlYWQnKTtcblxuICBjb25zdCB7aW5wdXRzLCBiYWNrZW5kLCBhdHRyc30gPSBhcmdzO1xuICBjb25zdCB7Ym94ZXMsIHNjb3Jlc30gPSBpbnB1dHM7XG4gIGNvbnN0IHttYXhPdXRwdXRTaXplLCBpb3VUaHJlc2hvbGQsIHNjb3JlVGhyZXNob2xkLCBzb2Z0Tm1zU2lnbWF9ID0gYXR0cnM7XG5cbiAgY29uc3QgYm94ZXNWYWxzID0gYmFja2VuZC5yZWFkU3luYyhib3hlcy5kYXRhSWQpIGFzIFR5cGVkQXJyYXk7XG4gIGNvbnN0IHNjb3Jlc1ZhbHMgPSBiYWNrZW5kLnJlYWRTeW5jKHNjb3Jlcy5kYXRhSWQpIGFzIFR5cGVkQXJyYXk7XG5cbiAgY29uc3QgbWF4T3V0cHV0U2l6ZVZhbCA9IG1heE91dHB1dFNpemU7XG4gIGNvbnN0IGlvdVRocmVzaG9sZFZhbCA9IGlvdVRocmVzaG9sZDtcbiAgY29uc3Qgc2NvcmVUaHJlc2hvbGRWYWwgPSBzY29yZVRocmVzaG9sZDtcbiAgY29uc3Qgc29mdE5tc1NpZ21hVmFsID0gc29mdE5tc1NpZ21hO1xuXG4gIGNvbnN0IHtzZWxlY3RlZEluZGljZXMsIHNlbGVjdGVkU2NvcmVzfSA9XG4gICAgICBrZXJuZWxfaW1wbHMubm9uTWF4U3VwcHJlc3Npb25WNUltcGwoXG4gICAgICAgICAgYm94ZXNWYWxzLCBzY29yZXNWYWxzLCBtYXhPdXRwdXRTaXplVmFsLCBpb3VUaHJlc2hvbGRWYWwsXG4gICAgICAgICAgc2NvcmVUaHJlc2hvbGRWYWwsIHNvZnRObXNTaWdtYVZhbCk7XG5cbiAgcmV0dXJuIFtcbiAgICBiYWNrZW5kLm1ha2VUZW5zb3JJbmZvKFxuICAgICAgICBbc2VsZWN0ZWRJbmRpY2VzLmxlbmd0aF0sICdpbnQzMicsIG5ldyBJbnQzMkFycmF5KHNlbGVjdGVkSW5kaWNlcykpLFxuICAgIGJhY2tlbmQubWFrZVRlbnNvckluZm8oXG4gICAgICAgIFtzZWxlY3RlZFNjb3Jlcy5sZW5ndGhdLCAnZmxvYXQzMicsIG5ldyBGbG9hdDMyQXJyYXkoc2VsZWN0ZWRTY29yZXMpKVxuICBdO1xufVxuXG5leHBvcnQgY29uc3Qgbm9uTWF4U3VwcHJlc3Npb25WNUNvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBOb25NYXhTdXBwcmVzc2lvblY1LFxuICBiYWNrZW5kTmFtZTogJ3dlYmdwdScsXG4gIGtlcm5lbEZ1bmM6IG5vbk1heFN1cHByZXNzaW9uVjUgYXMgdW5rbm93biBhcyBLZXJuZWxGdW5jXG59O1xuIl19","/**\n * @license\n * Copyright 2022 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { getMainHeaderString as main } from './webgpu_program';\nimport { computeDispatch, flatDispatchLayout } from './webgpu_util';\nexport class OneHotProgram {\n    constructor(numIndices, depth) {\n        this.variableNames = ['x'];\n        this.uniforms = 'onValue : f32, offValue : f32,';\n        this.workgroupSize = [64, 1, 1];\n        this.size = true;\n        this.outputShape = [numIndices, depth];\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize);\n        this.shaderKey = 'onehot';\n    }\n    getUserCode() {\n        const userCode = `\n      ${main('index')} {\n        if(index < uniforms.size) {\n          let coords = getCoordsFromIndex(index);\n          setOutputAtIndex(index, mix(uniforms.offValue, uniforms.onValue,\n                                      f32(i32(round(getX(coords.x))) == coords.y)));\n        }\n      }\n    `;\n        return userCode;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib25laG90X3dlYmdwdS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL29uZWhvdF93ZWJncHUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUFDLG1CQUFtQixJQUFJLElBQUksRUFBZ0IsTUFBTSxrQkFBa0IsQ0FBQztBQUM1RSxPQUFPLEVBQUMsZUFBZSxFQUFFLGtCQUFrQixFQUFDLE1BQU0sZUFBZSxDQUFDO0FBRWxFLE1BQU0sT0FBTyxhQUFhO0lBVXhCLFlBQVksVUFBa0IsRUFBRSxLQUFhO1FBTDdDLGtCQUFhLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUN0QixhQUFRLEdBQUcsZ0NBQWdDLENBQUM7UUFDNUMsa0JBQWEsR0FBNkIsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ3JELFNBQUksR0FBRyxJQUFJLENBQUM7UUFHVixJQUFJLENBQUMsV0FBVyxHQUFHLENBQUMsVUFBVSxFQUFFLEtBQUssQ0FBQyxDQUFDO1FBQ3ZDLElBQUksQ0FBQyxjQUFjLEdBQUcsa0JBQWtCLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQzNELElBQUksQ0FBQyxRQUFRLEdBQUcsZUFBZSxDQUMzQixJQUFJLENBQUMsY0FBYyxFQUFFLElBQUksQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBQy9ELElBQUksQ0FBQyxTQUFTLEdBQUcsUUFBUSxDQUFDO0lBQzVCLENBQUM7SUFFRCxXQUFXO1FBQ1QsTUFBTSxRQUFRLEdBQUc7UUFDYixJQUFJLENBQUMsT0FBTyxDQUFDOzs7Ozs7O0tBT2hCLENBQUM7UUFFRixPQUFPLFFBQVEsQ0FBQztJQUNsQixDQUFDO0NBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7Z2V0TWFpbkhlYWRlclN0cmluZyBhcyBtYWluLCBXZWJHUFVQcm9ncmFtfSBmcm9tICcuL3dlYmdwdV9wcm9ncmFtJztcbmltcG9ydCB7Y29tcHV0ZURpc3BhdGNoLCBmbGF0RGlzcGF0Y2hMYXlvdXR9IGZyb20gJy4vd2ViZ3B1X3V0aWwnO1xuXG5leHBvcnQgY2xhc3MgT25lSG90UHJvZ3JhbSBpbXBsZW1lbnRzIFdlYkdQVVByb2dyYW0ge1xuICBvdXRwdXRTaGFwZTogbnVtYmVyW107XG4gIHNoYWRlcktleTogc3RyaW5nO1xuICBkaXNwYXRjaExheW91dDoge3g6IG51bWJlcltdfTtcbiAgZGlzcGF0Y2g6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXTtcbiAgdmFyaWFibGVOYW1lcyA9IFsneCddO1xuICB1bmlmb3JtcyA9ICdvblZhbHVlIDogZjMyLCBvZmZWYWx1ZSA6IGYzMiwnO1xuICB3b3JrZ3JvdXBTaXplOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl0gPSBbNjQsIDEsIDFdO1xuICBzaXplID0gdHJ1ZTtcblxuICBjb25zdHJ1Y3RvcihudW1JbmRpY2VzOiBudW1iZXIsIGRlcHRoOiBudW1iZXIpIHtcbiAgICB0aGlzLm91dHB1dFNoYXBlID0gW251bUluZGljZXMsIGRlcHRoXTtcbiAgICB0aGlzLmRpc3BhdGNoTGF5b3V0ID0gZmxhdERpc3BhdGNoTGF5b3V0KHRoaXMub3V0cHV0U2hhcGUpO1xuICAgIHRoaXMuZGlzcGF0Y2ggPSBjb21wdXRlRGlzcGF0Y2goXG4gICAgICAgIHRoaXMuZGlzcGF0Y2hMYXlvdXQsIHRoaXMub3V0cHV0U2hhcGUsIHRoaXMud29ya2dyb3VwU2l6ZSk7XG4gICAgdGhpcy5zaGFkZXJLZXkgPSAnb25laG90JztcbiAgfVxuXG4gIGdldFVzZXJDb2RlKCk6IHN0cmluZyB7XG4gICAgY29uc3QgdXNlckNvZGUgPSBgXG4gICAgICAke21haW4oJ2luZGV4Jyl9IHtcbiAgICAgICAgaWYoaW5kZXggPCB1bmlmb3Jtcy5zaXplKSB7XG4gICAgICAgICAgbGV0IGNvb3JkcyA9IGdldENvb3Jkc0Zyb21JbmRleChpbmRleCk7XG4gICAgICAgICAgc2V0T3V0cHV0QXRJbmRleChpbmRleCwgbWl4KHVuaWZvcm1zLm9mZlZhbHVlLCB1bmlmb3Jtcy5vblZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmMzIoaTMyKHJvdW5kKGdldFgoY29vcmRzLngpKSkgPT0gY29vcmRzLnkpKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICBgO1xuXG4gICAgcmV0dXJuIHVzZXJDb2RlO1xuICB9XG59XG4iXX0=","/**\n * @license\n * Copyright 2022 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { OneHot, util } from '@tensorflow/tfjs-core';\nimport { OneHotProgram } from '../onehot_webgpu';\nimport { reshape } from './Reshape';\nexport function oneHot(args) {\n    const { inputs, backend, attrs } = args;\n    const { indices } = inputs;\n    const { dtype, depth, onValue, offValue } = attrs;\n    const indicesSize = util.sizeFromShape(indices.shape);\n    const program = new OneHotProgram(indicesSize, depth);\n    const reshaped = reshape({ inputs: { x: indices }, backend, attrs: { shape: [indicesSize] } });\n    const uniformData = [{ type: 'float32', data: [onValue] }, { type: 'float32', data: [offValue] }];\n    const result = backend.runWebGPUProgram(program, [reshaped], dtype, uniformData);\n    backend.disposeData(reshaped.dataId);\n    const outShape = [...indices.shape, depth];\n    const out = reshape({ inputs: { x: result }, backend, attrs: { shape: outShape } });\n    backend.disposeData(result.dataId);\n    return out;\n}\nexport const oneHotConfig = {\n    kernelName: OneHot,\n    backendName: 'webgpu',\n    kernelFunc: oneHot\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiT25lSG90LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMva2VybmVscy9PbmVIb3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUEyQixNQUFNLEVBQXlDLElBQUksRUFBQyxNQUFNLHVCQUF1QixDQUFDO0FBR3BILE9BQU8sRUFBQyxhQUFhLEVBQUMsTUFBTSxrQkFBa0IsQ0FBQztBQUMvQyxPQUFPLEVBQUMsT0FBTyxFQUFDLE1BQU0sV0FBVyxDQUFDO0FBRWxDLE1BQU0sVUFBVSxNQUFNLENBQ2xCLElBQXdFO0lBRTFFLE1BQU0sRUFBQyxNQUFNLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBQyxHQUFHLElBQUksQ0FBQztJQUN0QyxNQUFNLEVBQUMsT0FBTyxFQUFDLEdBQUcsTUFBTSxDQUFDO0lBQ3pCLE1BQU0sRUFBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLE9BQU8sRUFBRSxRQUFRLEVBQUMsR0FBRyxLQUFLLENBQUM7SUFFaEQsTUFBTSxXQUFXLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDdEQsTUFBTSxPQUFPLEdBQUcsSUFBSSxhQUFhLENBQUMsV0FBVyxFQUFFLEtBQUssQ0FBQyxDQUFDO0lBQ3RELE1BQU0sUUFBUSxHQUNWLE9BQU8sQ0FBQyxFQUFDLE1BQU0sRUFBRSxFQUFDLENBQUMsRUFBRSxPQUFPLEVBQUMsRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLEVBQUMsS0FBSyxFQUFFLENBQUMsV0FBVyxDQUFDLEVBQUMsRUFBQyxDQUFDLENBQUM7SUFFNUUsTUFBTSxXQUFXLEdBQ2IsQ0FBQyxFQUFDLElBQUksRUFBRSxTQUFTLEVBQUUsSUFBSSxFQUFFLENBQUMsT0FBTyxDQUFDLEVBQUMsRUFBRSxFQUFDLElBQUksRUFBRSxTQUFTLEVBQUUsSUFBSSxFQUFFLENBQUMsUUFBUSxDQUFDLEVBQUMsQ0FBQyxDQUFDO0lBQzlFLE1BQU0sTUFBTSxHQUNSLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxRQUFRLENBQUMsRUFBRSxLQUFLLEVBQUUsV0FBVyxDQUFDLENBQUM7SUFDdEUsT0FBTyxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUM7SUFFckMsTUFBTSxRQUFRLEdBQUcsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxLQUFLLEVBQUUsS0FBSyxDQUFDLENBQUM7SUFDM0MsTUFBTSxHQUFHLEdBQUcsT0FBTyxDQUFDLEVBQUMsTUFBTSxFQUFFLEVBQUMsQ0FBQyxFQUFFLE1BQU0sRUFBQyxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsRUFBQyxLQUFLLEVBQUUsUUFBUSxFQUFDLEVBQUMsQ0FBQyxDQUFDO0lBQzlFLE9BQU8sQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBRW5DLE9BQU8sR0FBRyxDQUFDO0FBQ2IsQ0FBQztBQUVELE1BQU0sQ0FBQyxNQUFNLFlBQVksR0FBaUI7SUFDeEMsVUFBVSxFQUFFLE1BQU07SUFDbEIsV0FBVyxFQUFFLFFBQVE7SUFDckIsVUFBVSxFQUFFLE1BQStCO0NBQzVDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7S2VybmVsQ29uZmlnLCBLZXJuZWxGdW5jLCBPbmVIb3QsIE9uZUhvdEF0dHJzLCBPbmVIb3RJbnB1dHMsIFRlbnNvckluZm8sIHV0aWx9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7V2ViR1BVQmFja2VuZH0gZnJvbSAnLi4vYmFja2VuZF93ZWJncHUnO1xuaW1wb3J0IHtPbmVIb3RQcm9ncmFtfSBmcm9tICcuLi9vbmVob3Rfd2ViZ3B1JztcbmltcG9ydCB7cmVzaGFwZX0gZnJvbSAnLi9SZXNoYXBlJztcblxuZXhwb3J0IGZ1bmN0aW9uIG9uZUhvdChcbiAgICBhcmdzOiB7aW5wdXRzOiBPbmVIb3RJbnB1dHMsIGJhY2tlbmQ6IFdlYkdQVUJhY2tlbmQsIGF0dHJzOiBPbmVIb3RBdHRyc30pOlxuICAgIFRlbnNvckluZm8ge1xuICBjb25zdCB7aW5wdXRzLCBiYWNrZW5kLCBhdHRyc30gPSBhcmdzO1xuICBjb25zdCB7aW5kaWNlc30gPSBpbnB1dHM7XG4gIGNvbnN0IHtkdHlwZSwgZGVwdGgsIG9uVmFsdWUsIG9mZlZhbHVlfSA9IGF0dHJzO1xuXG4gIGNvbnN0IGluZGljZXNTaXplID0gdXRpbC5zaXplRnJvbVNoYXBlKGluZGljZXMuc2hhcGUpO1xuICBjb25zdCBwcm9ncmFtID0gbmV3IE9uZUhvdFByb2dyYW0oaW5kaWNlc1NpemUsIGRlcHRoKTtcbiAgY29uc3QgcmVzaGFwZWQgPVxuICAgICAgcmVzaGFwZSh7aW5wdXRzOiB7eDogaW5kaWNlc30sIGJhY2tlbmQsIGF0dHJzOiB7c2hhcGU6IFtpbmRpY2VzU2l6ZV19fSk7XG5cbiAgY29uc3QgdW5pZm9ybURhdGEgPVxuICAgICAgW3t0eXBlOiAnZmxvYXQzMicsIGRhdGE6IFtvblZhbHVlXX0sIHt0eXBlOiAnZmxvYXQzMicsIGRhdGE6IFtvZmZWYWx1ZV19XTtcbiAgY29uc3QgcmVzdWx0ID1cbiAgICAgIGJhY2tlbmQucnVuV2ViR1BVUHJvZ3JhbShwcm9ncmFtLCBbcmVzaGFwZWRdLCBkdHlwZSwgdW5pZm9ybURhdGEpO1xuICBiYWNrZW5kLmRpc3Bvc2VEYXRhKHJlc2hhcGVkLmRhdGFJZCk7XG5cbiAgY29uc3Qgb3V0U2hhcGUgPSBbLi4uaW5kaWNlcy5zaGFwZSwgZGVwdGhdO1xuICBjb25zdCBvdXQgPSByZXNoYXBlKHtpbnB1dHM6IHt4OiByZXN1bHR9LCBiYWNrZW5kLCBhdHRyczoge3NoYXBlOiBvdXRTaGFwZX19KTtcbiAgYmFja2VuZC5kaXNwb3NlRGF0YShyZXN1bHQuZGF0YUlkKTtcblxuICByZXR1cm4gb3V0O1xufVxuXG5leHBvcnQgY29uc3Qgb25lSG90Q29uZmlnOiBLZXJuZWxDb25maWcgPSB7XG4gIGtlcm5lbE5hbWU6IE9uZUhvdCxcbiAgYmFja2VuZE5hbWU6ICd3ZWJncHUnLFxuICBrZXJuZWxGdW5jOiBvbmVIb3QgYXMgdW5rbm93biBhcyBLZXJuZWxGdW5jXG59O1xuIl19","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { ZerosLike } from '@tensorflow/tfjs-core';\nimport { complex } from './Complex';\nimport { fill } from './Fill';\nimport { imag } from './Imag';\nimport { real } from './Real';\nexport function zerosLike(args) {\n    const { inputs, backend } = args;\n    const { x } = inputs;\n    if (x.dtype === 'complex64') {\n        const realPart = real({ inputs: { input: x }, backend });\n        const r = zerosLike({ inputs: { x: realPart }, backend });\n        const imagPart = imag({ inputs: { input: x }, backend });\n        const i = zerosLike({ inputs: { x: imagPart }, backend });\n        const result = complex({ inputs: { real: r, imag: i }, backend });\n        backend.disposeData(realPart.dataId);\n        backend.disposeData(r.dataId);\n        backend.disposeData(imagPart.dataId);\n        backend.disposeData(i.dataId);\n        return result;\n    }\n    else {\n        return fill({\n            attrs: {\n                shape: x.shape,\n                dtype: x.dtype,\n                value: x.dtype === 'string' ? '' : 0\n            },\n            backend\n        });\n    }\n}\nexport const zerosLikeConfig = {\n    kernelName: ZerosLike,\n    backendName: 'webgpu',\n    kernelFunc: zerosLike\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiWmVyb3NMaWtlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMva2VybmVscy9aZXJvc0xpa2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUF1QyxTQUFTLEVBQWtCLE1BQU0sdUJBQXVCLENBQUM7QUFJdkcsT0FBTyxFQUFDLE9BQU8sRUFBQyxNQUFNLFdBQVcsQ0FBQztBQUNsQyxPQUFPLEVBQUMsSUFBSSxFQUFDLE1BQU0sUUFBUSxDQUFDO0FBQzVCLE9BQU8sRUFBQyxJQUFJLEVBQUMsTUFBTSxRQUFRLENBQUM7QUFDNUIsT0FBTyxFQUFDLElBQUksRUFBQyxNQUFNLFFBQVEsQ0FBQztBQUU1QixNQUFNLFVBQVUsU0FBUyxDQUNyQixJQUF1RDtJQUN6RCxNQUFNLEVBQUMsTUFBTSxFQUFFLE9BQU8sRUFBQyxHQUFHLElBQUksQ0FBQztJQUMvQixNQUFNLEVBQUMsQ0FBQyxFQUFDLEdBQUcsTUFBTSxDQUFDO0lBQ25CLElBQUksQ0FBQyxDQUFDLEtBQUssS0FBSyxXQUFXLEVBQUU7UUFDM0IsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLEVBQUMsTUFBTSxFQUFFLEVBQUMsS0FBSyxFQUFFLENBQUMsRUFBQyxFQUFFLE9BQU8sRUFBQyxDQUFDLENBQUM7UUFDckQsTUFBTSxDQUFDLEdBQUcsU0FBUyxDQUFDLEVBQUMsTUFBTSxFQUFFLEVBQUMsQ0FBQyxFQUFFLFFBQVEsRUFBQyxFQUFFLE9BQU8sRUFBQyxDQUFDLENBQUM7UUFDdEQsTUFBTSxRQUFRLEdBQUcsSUFBSSxDQUFDLEVBQUMsTUFBTSxFQUFFLEVBQUMsS0FBSyxFQUFFLENBQUMsRUFBQyxFQUFFLE9BQU8sRUFBQyxDQUFDLENBQUM7UUFDckQsTUFBTSxDQUFDLEdBQUcsU0FBUyxDQUFDLEVBQUMsTUFBTSxFQUFFLEVBQUMsQ0FBQyxFQUFFLFFBQVEsRUFBQyxFQUFFLE9BQU8sRUFBQyxDQUFDLENBQUM7UUFFdEQsTUFBTSxNQUFNLEdBQUcsT0FBTyxDQUFDLEVBQUMsTUFBTSxFQUFFLEVBQUMsSUFBSSxFQUFFLENBQUMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxFQUFDLEVBQUUsT0FBTyxFQUFDLENBQUMsQ0FBQztRQUU5RCxPQUFPLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUNyQyxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUM5QixPQUFPLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUNyQyxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUU5QixPQUFPLE1BQU0sQ0FBQztLQUNmO1NBQU07UUFDTCxPQUFPLElBQUksQ0FBQztZQUNWLEtBQUssRUFBRTtnQkFDTCxLQUFLLEVBQUUsQ0FBQyxDQUFDLEtBQUs7Z0JBQ2QsS0FBSyxFQUFFLENBQUMsQ0FBQyxLQUFLO2dCQUNkLEtBQUssRUFBRSxDQUFDLENBQUMsS0FBSyxLQUFLLFFBQVEsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO2FBQ3JDO1lBQ0QsT0FBTztTQUNSLENBQUMsQ0FBQztLQUNKO0FBQ0gsQ0FBQztBQUVELE1BQU0sQ0FBQyxNQUFNLGVBQWUsR0FBaUI7SUFDM0MsVUFBVSxFQUFFLFNBQVM7SUFDckIsV0FBVyxFQUFFLFFBQVE7SUFDckIsVUFBVSxFQUFFLFNBQWtDO0NBQy9DLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7S2VybmVsQ29uZmlnLCBLZXJuZWxGdW5jLCBUZW5zb3JJbmZvLCBaZXJvc0xpa2UsIFplcm9zTGlrZUlucHV0c30gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcblxuaW1wb3J0IHtXZWJHUFVCYWNrZW5kfSBmcm9tICcuLi9iYWNrZW5kX3dlYmdwdSc7XG5cbmltcG9ydCB7Y29tcGxleH0gZnJvbSAnLi9Db21wbGV4JztcbmltcG9ydCB7ZmlsbH0gZnJvbSAnLi9GaWxsJztcbmltcG9ydCB7aW1hZ30gZnJvbSAnLi9JbWFnJztcbmltcG9ydCB7cmVhbH0gZnJvbSAnLi9SZWFsJztcblxuZXhwb3J0IGZ1bmN0aW9uIHplcm9zTGlrZShcbiAgICBhcmdzOiB7aW5wdXRzOiBaZXJvc0xpa2VJbnB1dHMsIGJhY2tlbmQ6IFdlYkdQVUJhY2tlbmR9KTogVGVuc29ySW5mbyB7XG4gIGNvbnN0IHtpbnB1dHMsIGJhY2tlbmR9ID0gYXJncztcbiAgY29uc3Qge3h9ID0gaW5wdXRzO1xuICBpZiAoeC5kdHlwZSA9PT0gJ2NvbXBsZXg2NCcpIHtcbiAgICBjb25zdCByZWFsUGFydCA9IHJlYWwoe2lucHV0czoge2lucHV0OiB4fSwgYmFja2VuZH0pO1xuICAgIGNvbnN0IHIgPSB6ZXJvc0xpa2Uoe2lucHV0czoge3g6IHJlYWxQYXJ0fSwgYmFja2VuZH0pO1xuICAgIGNvbnN0IGltYWdQYXJ0ID0gaW1hZyh7aW5wdXRzOiB7aW5wdXQ6IHh9LCBiYWNrZW5kfSk7XG4gICAgY29uc3QgaSA9IHplcm9zTGlrZSh7aW5wdXRzOiB7eDogaW1hZ1BhcnR9LCBiYWNrZW5kfSk7XG5cbiAgICBjb25zdCByZXN1bHQgPSBjb21wbGV4KHtpbnB1dHM6IHtyZWFsOiByLCBpbWFnOiBpfSwgYmFja2VuZH0pO1xuXG4gICAgYmFja2VuZC5kaXNwb3NlRGF0YShyZWFsUGFydC5kYXRhSWQpO1xuICAgIGJhY2tlbmQuZGlzcG9zZURhdGEoci5kYXRhSWQpO1xuICAgIGJhY2tlbmQuZGlzcG9zZURhdGEoaW1hZ1BhcnQuZGF0YUlkKTtcbiAgICBiYWNrZW5kLmRpc3Bvc2VEYXRhKGkuZGF0YUlkKTtcblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGZpbGwoe1xuICAgICAgYXR0cnM6IHtcbiAgICAgICAgc2hhcGU6IHguc2hhcGUsXG4gICAgICAgIGR0eXBlOiB4LmR0eXBlLFxuICAgICAgICB2YWx1ZTogeC5kdHlwZSA9PT0gJ3N0cmluZycgPyAnJyA6IDBcbiAgICAgIH0sXG4gICAgICBiYWNrZW5kXG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IHplcm9zTGlrZUNvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBaZXJvc0xpa2UsXG4gIGJhY2tlbmROYW1lOiAnd2ViZ3B1JyxcbiAga2VybmVsRnVuYzogemVyb3NMaWtlIGFzIHVua25vd24gYXMgS2VybmVsRnVuY1xufTtcbiJdfQ==","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { OnesLike } from '@tensorflow/tfjs-core';\nimport { complex } from './Complex';\nimport { fill } from './Fill';\nimport { imag } from './Imag';\nimport { real } from './Real';\nimport { zerosLike } from './ZerosLike';\nexport function onesLike(args) {\n    const { inputs, backend } = args;\n    const { x } = inputs;\n    if (x.dtype === 'string') {\n        throw new Error('onesLike is not supported under string dtype');\n    }\n    else if (x.dtype === 'complex64') {\n        const realPart = real({ inputs: { input: x }, backend });\n        const r = onesLike({ inputs: { x: realPart }, backend });\n        const imagPart = imag({ inputs: { input: x }, backend });\n        const i = zerosLike({ inputs: { x: imagPart }, backend });\n        const result = complex({ inputs: { real: r, imag: i }, backend });\n        backend.disposeData(realPart.dataId);\n        backend.disposeData(r.dataId);\n        backend.disposeData(imagPart.dataId);\n        backend.disposeData(i.dataId);\n        return result;\n    }\n    else {\n        return fill({ attrs: { shape: x.shape, dtype: x.dtype, value: 1 }, backend });\n    }\n}\nexport const onesLikeConfig = {\n    kernelName: OnesLike,\n    backendName: 'webgpu',\n    kernelFunc: onesLike\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiT25lc0xpa2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9rZXJuZWxzL09uZXNMaWtlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sRUFBMkIsUUFBUSxFQUE2QixNQUFNLHVCQUF1QixDQUFDO0FBSXJHLE9BQU8sRUFBQyxPQUFPLEVBQUMsTUFBTSxXQUFXLENBQUM7QUFDbEMsT0FBTyxFQUFDLElBQUksRUFBQyxNQUFNLFFBQVEsQ0FBQztBQUM1QixPQUFPLEVBQUMsSUFBSSxFQUFDLE1BQU0sUUFBUSxDQUFDO0FBQzVCLE9BQU8sRUFBQyxJQUFJLEVBQUMsTUFBTSxRQUFRLENBQUM7QUFDNUIsT0FBTyxFQUFDLFNBQVMsRUFBQyxNQUFNLGFBQWEsQ0FBQztBQUV0QyxNQUFNLFVBQVUsUUFBUSxDQUNwQixJQUFzRDtJQUN4RCxNQUFNLEVBQUMsTUFBTSxFQUFFLE9BQU8sRUFBQyxHQUFHLElBQUksQ0FBQztJQUMvQixNQUFNLEVBQUMsQ0FBQyxFQUFDLEdBQUcsTUFBTSxDQUFDO0lBRW5CLElBQUksQ0FBQyxDQUFDLEtBQUssS0FBSyxRQUFRLEVBQUU7UUFDeEIsTUFBTSxJQUFJLEtBQUssQ0FBQyw4Q0FBOEMsQ0FBQyxDQUFDO0tBQ2pFO1NBQU0sSUFBSSxDQUFDLENBQUMsS0FBSyxLQUFLLFdBQVcsRUFBRTtRQUNsQyxNQUFNLFFBQVEsR0FBRyxJQUFJLENBQUMsRUFBQyxNQUFNLEVBQUUsRUFBQyxLQUFLLEVBQUUsQ0FBQyxFQUFDLEVBQUUsT0FBTyxFQUFDLENBQUMsQ0FBQztRQUNyRCxNQUFNLENBQUMsR0FBRyxRQUFRLENBQUMsRUFBQyxNQUFNLEVBQUUsRUFBQyxDQUFDLEVBQUUsUUFBUSxFQUFDLEVBQUUsT0FBTyxFQUFDLENBQUMsQ0FBQztRQUNyRCxNQUFNLFFBQVEsR0FBRyxJQUFJLENBQUMsRUFBQyxNQUFNLEVBQUUsRUFBQyxLQUFLLEVBQUUsQ0FBQyxFQUFDLEVBQUUsT0FBTyxFQUFDLENBQUMsQ0FBQztRQUNyRCxNQUFNLENBQUMsR0FBRyxTQUFTLENBQUMsRUFBQyxNQUFNLEVBQUUsRUFBQyxDQUFDLEVBQUUsUUFBUSxFQUFDLEVBQUUsT0FBTyxFQUFDLENBQUMsQ0FBQztRQUV0RCxNQUFNLE1BQU0sR0FBRyxPQUFPLENBQUMsRUFBQyxNQUFNLEVBQUUsRUFBQyxJQUFJLEVBQUUsQ0FBQyxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUMsRUFBRSxPQUFPLEVBQUMsQ0FBQyxDQUFDO1FBRTlELE9BQU8sQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ3JDLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQzlCLE9BQU8sQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ3JDLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBRTlCLE9BQU8sTUFBTSxDQUFDO0tBQ2Y7U0FBTTtRQUNMLE9BQU8sSUFBSSxDQUFDLEVBQUMsS0FBSyxFQUFFLEVBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLENBQUMsRUFBQyxFQUFFLE9BQU8sRUFBQyxDQUFDLENBQUM7S0FDM0U7QUFDSCxDQUFDO0FBRUQsTUFBTSxDQUFDLE1BQU0sY0FBYyxHQUFpQjtJQUMxQyxVQUFVLEVBQUUsUUFBUTtJQUNwQixXQUFXLEVBQUUsUUFBUTtJQUNyQixVQUFVLEVBQUUsUUFBaUM7Q0FDOUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtLZXJuZWxDb25maWcsIEtlcm5lbEZ1bmMsIE9uZXNMaWtlLCBPbmVzTGlrZUlucHV0cywgVGVuc29ySW5mb30gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcblxuaW1wb3J0IHtXZWJHUFVCYWNrZW5kfSBmcm9tICcuLi9iYWNrZW5kX3dlYmdwdSc7XG5cbmltcG9ydCB7Y29tcGxleH0gZnJvbSAnLi9Db21wbGV4JztcbmltcG9ydCB7ZmlsbH0gZnJvbSAnLi9GaWxsJztcbmltcG9ydCB7aW1hZ30gZnJvbSAnLi9JbWFnJztcbmltcG9ydCB7cmVhbH0gZnJvbSAnLi9SZWFsJztcbmltcG9ydCB7emVyb3NMaWtlfSBmcm9tICcuL1plcm9zTGlrZSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBvbmVzTGlrZShcbiAgICBhcmdzOiB7aW5wdXRzOiBPbmVzTGlrZUlucHV0cywgYmFja2VuZDogV2ViR1BVQmFja2VuZH0pOiBUZW5zb3JJbmZvIHtcbiAgY29uc3Qge2lucHV0cywgYmFja2VuZH0gPSBhcmdzO1xuICBjb25zdCB7eH0gPSBpbnB1dHM7XG5cbiAgaWYgKHguZHR5cGUgPT09ICdzdHJpbmcnKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdvbmVzTGlrZSBpcyBub3Qgc3VwcG9ydGVkIHVuZGVyIHN0cmluZyBkdHlwZScpO1xuICB9IGVsc2UgaWYgKHguZHR5cGUgPT09ICdjb21wbGV4NjQnKSB7XG4gICAgY29uc3QgcmVhbFBhcnQgPSByZWFsKHtpbnB1dHM6IHtpbnB1dDogeH0sIGJhY2tlbmR9KTtcbiAgICBjb25zdCByID0gb25lc0xpa2Uoe2lucHV0czoge3g6IHJlYWxQYXJ0fSwgYmFja2VuZH0pO1xuICAgIGNvbnN0IGltYWdQYXJ0ID0gaW1hZyh7aW5wdXRzOiB7aW5wdXQ6IHh9LCBiYWNrZW5kfSk7XG4gICAgY29uc3QgaSA9IHplcm9zTGlrZSh7aW5wdXRzOiB7eDogaW1hZ1BhcnR9LCBiYWNrZW5kfSk7XG5cbiAgICBjb25zdCByZXN1bHQgPSBjb21wbGV4KHtpbnB1dHM6IHtyZWFsOiByLCBpbWFnOiBpfSwgYmFja2VuZH0pO1xuXG4gICAgYmFja2VuZC5kaXNwb3NlRGF0YShyZWFsUGFydC5kYXRhSWQpO1xuICAgIGJhY2tlbmQuZGlzcG9zZURhdGEoci5kYXRhSWQpO1xuICAgIGJhY2tlbmQuZGlzcG9zZURhdGEoaW1hZ1BhcnQuZGF0YUlkKTtcbiAgICBiYWNrZW5kLmRpc3Bvc2VEYXRhKGkuZGF0YUlkKTtcblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGZpbGwoe2F0dHJzOiB7c2hhcGU6IHguc2hhcGUsIGR0eXBlOiB4LmR0eXBlLCB2YWx1ZTogMX0sIGJhY2tlbmR9KTtcbiAgfVxufVxuXG5leHBvcnQgY29uc3Qgb25lc0xpa2VDb25maWc6IEtlcm5lbENvbmZpZyA9IHtcbiAga2VybmVsTmFtZTogT25lc0xpa2UsXG4gIGJhY2tlbmROYW1lOiAnd2ViZ3B1JyxcbiAga2VybmVsRnVuYzogb25lc0xpa2UgYXMgdW5rbm93biBhcyBLZXJuZWxGdW5jXG59O1xuIl19","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Pack, util } from '@tensorflow/tfjs-core';\nimport { concat } from './Concat';\nimport { expandDims } from './ExpandDims';\nexport function pack(args) {\n    const { inputs, backend, attrs } = args;\n    const { axis } = attrs;\n    if (inputs.length === 1) {\n        return expandDims({ inputs: { input: inputs[0] }, backend, attrs: { dim: axis } });\n    }\n    const shape = inputs[0].shape;\n    const dtype = inputs[0].dtype;\n    inputs.forEach(t => {\n        util.assertShapesMatch(shape, t.shape, 'All tensors passed to stack must have matching shapes');\n        util.assert(dtype === t.dtype, () => 'All tensors passed to stack must have matching dtypes');\n    });\n    const intermediateTensorInfos = [];\n    const expandedTensors = inputs.map(t => {\n        const expandedT = expandDims({ inputs: { input: t }, backend, attrs: { dim: axis } });\n        intermediateTensorInfos.push(expandedT);\n        return expandedT;\n    });\n    const result = concat({ inputs: expandedTensors, backend, attrs: { axis } });\n    intermediateTensorInfos.forEach(t => backend.disposeData(t.dataId));\n    return result;\n}\nexport const packConfig = {\n    kernelName: Pack,\n    backendName: 'webgpu',\n    kernelFunc: pack\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUGFjay5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2tlcm5lbHMvUGFjay50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQTJCLElBQUksRUFBcUMsSUFBSSxFQUFDLE1BQU0sdUJBQXVCLENBQUM7QUFHOUcsT0FBTyxFQUFDLE1BQU0sRUFBQyxNQUFNLFVBQVUsQ0FBQztBQUNoQyxPQUFPLEVBQUMsVUFBVSxFQUFDLE1BQU0sY0FBYyxDQUFDO0FBRXhDLE1BQU0sVUFBVSxJQUFJLENBQ2hCLElBQW9FO0lBRXRFLE1BQU0sRUFBQyxNQUFNLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBQyxHQUFHLElBQUksQ0FBQztJQUN0QyxNQUFNLEVBQUMsSUFBSSxFQUFDLEdBQUcsS0FBSyxDQUFDO0lBRXJCLElBQUksTUFBTSxDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUU7UUFDdkIsT0FBTyxVQUFVLENBQ2IsRUFBQyxNQUFNLEVBQUUsRUFBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFDLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxFQUFDLEdBQUcsRUFBRSxJQUFJLEVBQUMsRUFBQyxDQUFDLENBQUM7S0FDaEU7SUFFRCxNQUFNLEtBQUssR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDO0lBQzlCLE1BQU0sS0FBSyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUM7SUFFOUIsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRTtRQUNqQixJQUFJLENBQUMsaUJBQWlCLENBQ2xCLEtBQUssRUFBRSxDQUFDLENBQUMsS0FBSyxFQUNkLHVEQUF1RCxDQUFDLENBQUM7UUFDN0QsSUFBSSxDQUFDLE1BQU0sQ0FDUCxLQUFLLEtBQUssQ0FBQyxDQUFDLEtBQUssRUFDakIsR0FBRyxFQUFFLENBQUMsdURBQXVELENBQUMsQ0FBQztJQUNyRSxDQUFDLENBQUMsQ0FBQztJQUVILE1BQU0sdUJBQXVCLEdBQWlCLEVBQUUsQ0FBQztJQUNqRCxNQUFNLGVBQWUsR0FBRyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFO1FBQ3JDLE1BQU0sU0FBUyxHQUNYLFVBQVUsQ0FBQyxFQUFDLE1BQU0sRUFBRSxFQUFDLEtBQUssRUFBRSxDQUFDLEVBQUMsRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLEVBQUMsR0FBRyxFQUFFLElBQUksRUFBQyxFQUFDLENBQUMsQ0FBQztRQUNsRSx1QkFBdUIsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDeEMsT0FBTyxTQUFTLENBQUM7SUFDbkIsQ0FBQyxDQUFDLENBQUM7SUFFSCxNQUFNLE1BQU0sR0FBRyxNQUFNLENBQUMsRUFBQyxNQUFNLEVBQUUsZUFBZSxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsRUFBQyxJQUFJLEVBQUMsRUFBQyxDQUFDLENBQUM7SUFFekUsdUJBQXVCLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztJQUVwRSxPQUFPLE1BQU0sQ0FBQztBQUNoQixDQUFDO0FBRUQsTUFBTSxDQUFDLE1BQU0sVUFBVSxHQUFpQjtJQUN0QyxVQUFVLEVBQUUsSUFBSTtJQUNoQixXQUFXLEVBQUUsUUFBUTtJQUNyQixVQUFVLEVBQUUsSUFBNkI7Q0FDMUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtLZXJuZWxDb25maWcsIEtlcm5lbEZ1bmMsIFBhY2ssIFBhY2tBdHRycywgUGFja0lucHV0cywgVGVuc29ySW5mbywgdXRpbH0gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcblxuaW1wb3J0IHtXZWJHUFVCYWNrZW5kfSBmcm9tICcuLi9iYWNrZW5kX3dlYmdwdSc7XG5pbXBvcnQge2NvbmNhdH0gZnJvbSAnLi9Db25jYXQnO1xuaW1wb3J0IHtleHBhbmREaW1zfSBmcm9tICcuL0V4cGFuZERpbXMnO1xuXG5leHBvcnQgZnVuY3Rpb24gcGFjayhcbiAgICBhcmdzOiB7aW5wdXRzOiBQYWNrSW5wdXRzLCBiYWNrZW5kOiBXZWJHUFVCYWNrZW5kLCBhdHRyczogUGFja0F0dHJzfSk6XG4gICAgVGVuc29ySW5mbyB7XG4gIGNvbnN0IHtpbnB1dHMsIGJhY2tlbmQsIGF0dHJzfSA9IGFyZ3M7XG4gIGNvbnN0IHtheGlzfSA9IGF0dHJzO1xuXG4gIGlmIChpbnB1dHMubGVuZ3RoID09PSAxKSB7XG4gICAgcmV0dXJuIGV4cGFuZERpbXMoXG4gICAgICAgIHtpbnB1dHM6IHtpbnB1dDogaW5wdXRzWzBdfSwgYmFja2VuZCwgYXR0cnM6IHtkaW06IGF4aXN9fSk7XG4gIH1cblxuICBjb25zdCBzaGFwZSA9IGlucHV0c1swXS5zaGFwZTtcbiAgY29uc3QgZHR5cGUgPSBpbnB1dHNbMF0uZHR5cGU7XG5cbiAgaW5wdXRzLmZvckVhY2godCA9PiB7XG4gICAgdXRpbC5hc3NlcnRTaGFwZXNNYXRjaChcbiAgICAgICAgc2hhcGUsIHQuc2hhcGUsXG4gICAgICAgICdBbGwgdGVuc29ycyBwYXNzZWQgdG8gc3RhY2sgbXVzdCBoYXZlIG1hdGNoaW5nIHNoYXBlcycpO1xuICAgIHV0aWwuYXNzZXJ0KFxuICAgICAgICBkdHlwZSA9PT0gdC5kdHlwZSxcbiAgICAgICAgKCkgPT4gJ0FsbCB0ZW5zb3JzIHBhc3NlZCB0byBzdGFjayBtdXN0IGhhdmUgbWF0Y2hpbmcgZHR5cGVzJyk7XG4gIH0pO1xuXG4gIGNvbnN0IGludGVybWVkaWF0ZVRlbnNvckluZm9zOiBUZW5zb3JJbmZvW10gPSBbXTtcbiAgY29uc3QgZXhwYW5kZWRUZW5zb3JzID0gaW5wdXRzLm1hcCh0ID0+IHtcbiAgICBjb25zdCBleHBhbmRlZFQgPVxuICAgICAgICBleHBhbmREaW1zKHtpbnB1dHM6IHtpbnB1dDogdH0sIGJhY2tlbmQsIGF0dHJzOiB7ZGltOiBheGlzfX0pO1xuICAgIGludGVybWVkaWF0ZVRlbnNvckluZm9zLnB1c2goZXhwYW5kZWRUKTtcbiAgICByZXR1cm4gZXhwYW5kZWRUO1xuICB9KTtcblxuICBjb25zdCByZXN1bHQgPSBjb25jYXQoe2lucHV0czogZXhwYW5kZWRUZW5zb3JzLCBiYWNrZW5kLCBhdHRyczoge2F4aXN9fSk7XG5cbiAgaW50ZXJtZWRpYXRlVGVuc29ySW5mb3MuZm9yRWFjaCh0ID0+IGJhY2tlbmQuZGlzcG9zZURhdGEodC5kYXRhSWQpKTtcblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5leHBvcnQgY29uc3QgcGFja0NvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBQYWNrLFxuICBiYWNrZW5kTmFtZTogJ3dlYmdwdScsXG4gIGtlcm5lbEZ1bmM6IHBhY2sgYXMgdW5rbm93biBhcyBLZXJuZWxGdW5jXG59O1xuIl19","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { getCoordsDataType, getMainHeaderString as main } from './webgpu_program';\nimport { computeDispatch, flatDispatchLayout } from './webgpu_util';\nexport function padCommon(shape, fillZero = false) {\n    const rank = shape.length;\n    const type = getCoordsDataType(rank);\n    const start = shape.map((_, i) => `uniforms.pad${i}[0]`).join(',');\n    const end = shape\n        .map((_, i) => `uniforms.pad${i}[0] + uniforms.xShape${rank > 1 ? `[${i}]` : ''}`)\n        .join(',');\n    const startValue = rank > 1 ? `${type}(${start})` : `${start}`;\n    const endValue = rank > 1 ? `${type}(${end})` : `${end}`;\n    const leftPadCondition = rank > 1 ? `any(paddedCoords < start)` : `paddedCoords < start`;\n    const rightPadCondition = rank > 1 ? `any(paddedCoords >= end)` : `paddedCoords >= end`;\n    const unpackedCoords = rank > 1 ?\n        ['coords[0]', 'coords[1]', 'coords[2]', 'coords[3]'].slice(0, rank) :\n        'coords';\n    return `\n        let start = ${startValue};\n        let end = ${endValue};\n        if (${leftPadCondition} || ${rightPadCondition}) {\n          setOutputAtIndex(index, ${fillZero ? 0.0 : 'uniforms.constantValue'});\n        } else {\n          let coords = paddedCoords - start;\n          setOutputAtIndex(index, getX(${unpackedCoords}));\n        }\n  `;\n}\nexport class PadProgram {\n    constructor(xShape, paddings) {\n        this.variableNames = ['x'];\n        this.uniforms = 'constantValue : f32,';\n        this.workgroupSize = [64, 1, 1];\n        this.size = true;\n        this.outputShape = paddings.map((p, i) => p[0] /* beforePad */ + xShape[i] + p[1] /* afterPad */);\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize);\n        paddings.map((_, i) => {\n            this.uniforms += ` pad${i} : vec2<i32>,`;\n        });\n        this.xShape = xShape;\n        this.shaderKey = 'pad';\n    }\n    getUserCode() {\n        const userCode = `\n      ${main('index')} {\n        if (index < uniforms.size) {\n          let paddedCoords = getCoordsFromIndex(index);\n          ${padCommon(this.xShape)}\n        }\n      }\n    `;\n        return userCode;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFkX3dlYmdwdS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL3BhZF93ZWJncHUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUFDLGlCQUFpQixFQUFFLG1CQUFtQixJQUFJLElBQUksRUFBZ0IsTUFBTSxrQkFBa0IsQ0FBQztBQUMvRixPQUFPLEVBQUMsZUFBZSxFQUFFLGtCQUFrQixFQUFDLE1BQU0sZUFBZSxDQUFDO0FBRWxFLE1BQU0sVUFBVSxTQUFTLENBQUMsS0FBZSxFQUFFLFFBQVEsR0FBRyxLQUFLO0lBQ3pELE1BQU0sSUFBSSxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUM7SUFDMUIsTUFBTSxJQUFJLEdBQUcsaUJBQWlCLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDckMsTUFBTSxLQUFLLEdBQUcsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLGVBQWUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDbkUsTUFBTSxHQUFHLEdBQUcsS0FBSztTQUNBLEdBQUcsQ0FDQSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLGVBQWUsQ0FBQyx3QkFDdEIsSUFBSSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUM7U0FDbEMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQzNCLE1BQU0sVUFBVSxHQUFHLElBQUksR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxJQUFJLEtBQUssR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssRUFBRSxDQUFDO0lBQy9ELE1BQU0sUUFBUSxHQUFHLElBQUksR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxJQUFJLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsRUFBRSxDQUFDO0lBRXpELE1BQU0sZ0JBQWdCLEdBQ2xCLElBQUksR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLDJCQUEyQixDQUFDLENBQUMsQ0FBQyxzQkFBc0IsQ0FBQztJQUNwRSxNQUFNLGlCQUFpQixHQUNuQixJQUFJLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQywwQkFBMEIsQ0FBQyxDQUFDLENBQUMscUJBQXFCLENBQUM7SUFFbEUsTUFBTSxjQUFjLEdBQUcsSUFBSSxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQzdCLENBQUMsV0FBVyxFQUFFLFdBQVcsRUFBRSxXQUFXLEVBQUUsV0FBVyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDO1FBQ3JFLFFBQVEsQ0FBQztJQUNiLE9BQU87c0JBQ2EsVUFBVTtvQkFDWixRQUFRO2NBQ2QsZ0JBQWdCLE9BQU8saUJBQWlCO29DQUNsQixRQUFRLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsd0JBQXdCOzs7eUNBR3BDLGNBQWM7O0dBRXBELENBQUM7QUFDSixDQUFDO0FBRUQsTUFBTSxPQUFPLFVBQVU7SUFXckIsWUFBWSxNQUFnQixFQUFFLFFBQWlDO1FBTi9ELGtCQUFhLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUN0QixhQUFRLEdBQUcsc0JBQXNCLENBQUM7UUFDbEMsa0JBQWEsR0FBNkIsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBRXJELFNBQUksR0FBRyxJQUFJLENBQUM7UUFHVixJQUFJLENBQUMsV0FBVyxHQUFHLFFBQVEsQ0FBQyxHQUFHLENBQzNCLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLGVBQWUsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxDQUFDO1FBQ3RFLElBQUksQ0FBQyxjQUFjLEdBQUcsa0JBQWtCLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQzNELElBQUksQ0FBQyxRQUFRLEdBQUcsZUFBZSxDQUMzQixJQUFJLENBQUMsY0FBYyxFQUFFLElBQUksQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBQy9ELFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDcEIsSUFBSSxDQUFDLFFBQVEsSUFBSSxPQUFPLENBQUMsZUFBZSxDQUFDO1FBQzNDLENBQUMsQ0FBQyxDQUFDO1FBQ0gsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7UUFDckIsSUFBSSxDQUFDLFNBQVMsR0FBRyxLQUFLLENBQUM7SUFDekIsQ0FBQztJQUVELFdBQVc7UUFDVCxNQUFNLFFBQVEsR0FBRztRQUNiLElBQUksQ0FBQyxPQUFPLENBQUM7OztZQUdULFNBQVMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDOzs7S0FHN0IsQ0FBQztRQUNGLE9BQU8sUUFBUSxDQUFDO0lBQ2xCLENBQUM7Q0FDRiIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtnZXRDb29yZHNEYXRhVHlwZSwgZ2V0TWFpbkhlYWRlclN0cmluZyBhcyBtYWluLCBXZWJHUFVQcm9ncmFtfSBmcm9tICcuL3dlYmdwdV9wcm9ncmFtJztcbmltcG9ydCB7Y29tcHV0ZURpc3BhdGNoLCBmbGF0RGlzcGF0Y2hMYXlvdXR9IGZyb20gJy4vd2ViZ3B1X3V0aWwnO1xuXG5leHBvcnQgZnVuY3Rpb24gcGFkQ29tbW9uKHNoYXBlOiBudW1iZXJbXSwgZmlsbFplcm8gPSBmYWxzZSk6IHN0cmluZyB7XG4gIGNvbnN0IHJhbmsgPSBzaGFwZS5sZW5ndGg7XG4gIGNvbnN0IHR5cGUgPSBnZXRDb29yZHNEYXRhVHlwZShyYW5rKTtcbiAgY29uc3Qgc3RhcnQgPSBzaGFwZS5tYXAoKF8sIGkpID0+IGB1bmlmb3Jtcy5wYWQke2l9WzBdYCkuam9pbignLCcpO1xuICBjb25zdCBlbmQgPSBzaGFwZVxuICAgICAgICAgICAgICAgICAgLm1hcChcbiAgICAgICAgICAgICAgICAgICAgICAoXywgaSkgPT4gYHVuaWZvcm1zLnBhZCR7aX1bMF0gKyB1bmlmb3Jtcy54U2hhcGUke1xuICAgICAgICAgICAgICAgICAgICAgICAgICByYW5rID4gMSA/IGBbJHtpfV1gIDogJyd9YClcbiAgICAgICAgICAgICAgICAgIC5qb2luKCcsJyk7XG4gIGNvbnN0IHN0YXJ0VmFsdWUgPSByYW5rID4gMSA/IGAke3R5cGV9KCR7c3RhcnR9KWAgOiBgJHtzdGFydH1gO1xuICBjb25zdCBlbmRWYWx1ZSA9IHJhbmsgPiAxID8gYCR7dHlwZX0oJHtlbmR9KWAgOiBgJHtlbmR9YDtcblxuICBjb25zdCBsZWZ0UGFkQ29uZGl0aW9uID1cbiAgICAgIHJhbmsgPiAxID8gYGFueShwYWRkZWRDb29yZHMgPCBzdGFydClgIDogYHBhZGRlZENvb3JkcyA8IHN0YXJ0YDtcbiAgY29uc3QgcmlnaHRQYWRDb25kaXRpb24gPVxuICAgICAgcmFuayA+IDEgPyBgYW55KHBhZGRlZENvb3JkcyA+PSBlbmQpYCA6IGBwYWRkZWRDb29yZHMgPj0gZW5kYDtcblxuICBjb25zdCB1bnBhY2tlZENvb3JkcyA9IHJhbmsgPiAxID9cbiAgICAgIFsnY29vcmRzWzBdJywgJ2Nvb3Jkc1sxXScsICdjb29yZHNbMl0nLCAnY29vcmRzWzNdJ10uc2xpY2UoMCwgcmFuaykgOlxuICAgICAgJ2Nvb3Jkcyc7XG4gIHJldHVybiBgXG4gICAgICAgIGxldCBzdGFydCA9ICR7c3RhcnRWYWx1ZX07XG4gICAgICAgIGxldCBlbmQgPSAke2VuZFZhbHVlfTtcbiAgICAgICAgaWYgKCR7bGVmdFBhZENvbmRpdGlvbn0gfHwgJHtyaWdodFBhZENvbmRpdGlvbn0pIHtcbiAgICAgICAgICBzZXRPdXRwdXRBdEluZGV4KGluZGV4LCAke2ZpbGxaZXJvID8gMC4wIDogJ3VuaWZvcm1zLmNvbnN0YW50VmFsdWUnfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGV0IGNvb3JkcyA9IHBhZGRlZENvb3JkcyAtIHN0YXJ0O1xuICAgICAgICAgIHNldE91dHB1dEF0SW5kZXgoaW5kZXgsIGdldFgoJHt1bnBhY2tlZENvb3Jkc30pKTtcbiAgICAgICAgfVxuICBgO1xufVxuXG5leHBvcnQgY2xhc3MgUGFkUHJvZ3JhbSBpbXBsZW1lbnRzIFdlYkdQVVByb2dyYW0ge1xuICBvdXRwdXRTaGFwZTogbnVtYmVyW107XG4gIHNoYWRlcktleTogc3RyaW5nO1xuICBkaXNwYXRjaExheW91dDoge3g6IG51bWJlcltdfTtcbiAgZGlzcGF0Y2g6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXTtcbiAgdmFyaWFibGVOYW1lcyA9IFsneCddO1xuICB1bmlmb3JtcyA9ICdjb25zdGFudFZhbHVlIDogZjMyLCc7XG4gIHdvcmtncm91cFNpemU6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXSA9IFs2NCwgMSwgMV07XG4gIHhTaGFwZTogbnVtYmVyW107XG4gIHNpemUgPSB0cnVlO1xuXG4gIGNvbnN0cnVjdG9yKHhTaGFwZTogbnVtYmVyW10sIHBhZGRpbmdzOiBBcnJheTxbbnVtYmVyLCBudW1iZXJdPikge1xuICAgIHRoaXMub3V0cHV0U2hhcGUgPSBwYWRkaW5ncy5tYXAoXG4gICAgICAgIChwLCBpKSA9PiBwWzBdIC8qIGJlZm9yZVBhZCAqLyArIHhTaGFwZVtpXSArIHBbMV0gLyogYWZ0ZXJQYWQgKi8pO1xuICAgIHRoaXMuZGlzcGF0Y2hMYXlvdXQgPSBmbGF0RGlzcGF0Y2hMYXlvdXQodGhpcy5vdXRwdXRTaGFwZSk7XG4gICAgdGhpcy5kaXNwYXRjaCA9IGNvbXB1dGVEaXNwYXRjaChcbiAgICAgICAgdGhpcy5kaXNwYXRjaExheW91dCwgdGhpcy5vdXRwdXRTaGFwZSwgdGhpcy53b3JrZ3JvdXBTaXplKTtcbiAgICBwYWRkaW5ncy5tYXAoKF8sIGkpID0+IHtcbiAgICAgIHRoaXMudW5pZm9ybXMgKz0gYCBwYWQke2l9IDogdmVjMjxpMzI+LGA7XG4gICAgfSk7XG4gICAgdGhpcy54U2hhcGUgPSB4U2hhcGU7XG4gICAgdGhpcy5zaGFkZXJLZXkgPSAncGFkJztcbiAgfVxuXG4gIGdldFVzZXJDb2RlKCk6IHN0cmluZyB7XG4gICAgY29uc3QgdXNlckNvZGUgPSBgXG4gICAgICAke21haW4oJ2luZGV4Jyl9IHtcbiAgICAgICAgaWYgKGluZGV4IDwgdW5pZm9ybXMuc2l6ZSkge1xuICAgICAgICAgIGxldCBwYWRkZWRDb29yZHMgPSBnZXRDb29yZHNGcm9tSW5kZXgoaW5kZXgpO1xuICAgICAgICAgICR7cGFkQ29tbW9uKHRoaXMueFNoYXBlKX1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIGA7XG4gICAgcmV0dXJuIHVzZXJDb2RlO1xuICB9XG59XG4iXX0=","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { PadV2, util } from '@tensorflow/tfjs-core';\nimport { identity } from './Identity';\nimport { PadProgram } from '../pad_webgpu';\nimport { fill } from './Fill';\nexport const padV2 = (args) => {\n    const { inputs, backend, attrs } = args;\n    const { x } = inputs;\n    const { paddings, constantValue } = attrs;\n    if (paddings.every(p => util.arraysEqual(p, [0, 0]))) {\n        return identity({ inputs: { x }, backend });\n    }\n    if (util.sizeFromShape(x.shape) === 0) {\n        // Short-circuit the computation, since x doesn't have value, only\n        // the shape is used to compute output shape to pad.\n        const outputShape = paddings.map((p, i) => p[0] /* beforePad */ + x.shape[i] + p[1] /* afterPad */);\n        return fill({\n            backend,\n            attrs: { shape: outputShape, value: constantValue, dtype: x.dtype }\n        });\n    }\n    const uniformData = [{ type: 'float32', data: [constantValue] }];\n    paddings.map(p => uniformData.push({ type: 'int32', data: [p[0], p[1]] }));\n    const program = new PadProgram(x.shape, paddings);\n    return backend.runWebGPUProgram(program, [x], x.dtype, uniformData);\n};\nexport const padV2Config = {\n    kernelName: PadV2,\n    backendName: 'webgpu',\n    kernelFunc: padV2\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUGFkVjIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9rZXJuZWxzL1BhZFYyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sRUFBMkIsS0FBSyxFQUF1QyxJQUFJLEVBQUMsTUFBTSx1QkFBdUIsQ0FBQztBQUdqSCxPQUFPLEVBQUMsUUFBUSxFQUFDLE1BQU0sWUFBWSxDQUFDO0FBQ3BDLE9BQU8sRUFBQyxVQUFVLEVBQUMsTUFBTSxlQUFlLENBQUM7QUFDekMsT0FBTyxFQUFDLElBQUksRUFBQyxNQUFNLFFBQVEsQ0FBQztBQUU1QixNQUFNLENBQUMsTUFBTSxLQUFLLEdBQ2QsQ0FBQyxJQUV5QixFQUFjLEVBQUU7SUFDeEMsTUFBTSxFQUFDLE1BQU0sRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFDLEdBQUcsSUFBSSxDQUFDO0lBQ3RDLE1BQU0sRUFBQyxDQUFDLEVBQUMsR0FBRyxNQUFNLENBQUM7SUFDbkIsTUFBTSxFQUFDLFFBQVEsRUFBRSxhQUFhLEVBQUMsR0FBRyxLQUFLLENBQUM7SUFDeEMsSUFBSSxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFO1FBQ3BELE9BQU8sUUFBUSxDQUFDLEVBQUMsTUFBTSxFQUFFLEVBQUMsQ0FBQyxFQUFDLEVBQUUsT0FBTyxFQUFDLENBQUMsQ0FBQztLQUN6QztJQUNELElBQUksSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxFQUFFO1FBQ3JDLGtFQUFrRTtRQUNsRSxvREFBb0Q7UUFDcEQsTUFBTSxXQUFXLEdBQUcsUUFBUSxDQUFDLEdBQUcsQ0FDNUIsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FDTCxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsZUFBZSxHQUFHLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxDQUFDO1FBQ2pFLE9BQU8sSUFBSSxDQUFDO1lBQ1YsT0FBTztZQUNQLEtBQUssRUFBRSxFQUFDLEtBQUssRUFBRSxXQUFXLEVBQUUsS0FBSyxFQUFFLGFBQWEsRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDLEtBQUssRUFBQztTQUNsRSxDQUFDLENBQUM7S0FDSjtJQUNELE1BQU0sV0FBVyxHQUFHLENBQUMsRUFBQyxJQUFJLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxDQUFDLGFBQWEsQ0FBQyxFQUFDLENBQUMsQ0FBQztJQUMvRCxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxFQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3pFLE1BQU0sT0FBTyxHQUFHLElBQUksVUFBVSxDQUFDLENBQUMsQ0FBQyxLQUFLLEVBQUUsUUFBUSxDQUFDLENBQUM7SUFDbEQsT0FBTyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEtBQUssRUFBRSxXQUFXLENBQUMsQ0FBQztBQUN0RSxDQUFDLENBQUM7QUFFTixNQUFNLENBQUMsTUFBTSxXQUFXLEdBQWlCO0lBQ3ZDLFVBQVUsRUFBRSxLQUFLO0lBQ2pCLFdBQVcsRUFBRSxRQUFRO0lBQ3JCLFVBQVUsRUFBRSxLQUE4QjtDQUMzQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge0tlcm5lbENvbmZpZywgS2VybmVsRnVuYywgUGFkVjIsIFBhZFYyQXR0cnMsIFBhZFYySW5wdXRzLCBUZW5zb3JJbmZvLCB1dGlsfSBmcm9tICdAdGVuc29yZmxvdy90ZmpzLWNvcmUnO1xuXG5pbXBvcnQge1dlYkdQVUJhY2tlbmR9IGZyb20gJy4uL2JhY2tlbmRfd2ViZ3B1JztcbmltcG9ydCB7aWRlbnRpdHl9IGZyb20gJy4vSWRlbnRpdHknO1xuaW1wb3J0IHtQYWRQcm9ncmFtfSBmcm9tICcuLi9wYWRfd2ViZ3B1JztcbmltcG9ydCB7ZmlsbH0gZnJvbSAnLi9GaWxsJztcblxuZXhwb3J0IGNvbnN0IHBhZFYyID1cbiAgICAoYXJnczoge2lucHV0czogUGFkVjJJbnB1dHMsXG4gICAgICAgICAgICBiYWNrZW5kOiBXZWJHUFVCYWNrZW5kLFxuICAgICAgICAgICAgYXR0cnM6IFBhZFYyQXR0cnN9KTogVGVuc29ySW5mbyA9PiB7XG4gICAgICBjb25zdCB7aW5wdXRzLCBiYWNrZW5kLCBhdHRyc30gPSBhcmdzO1xuICAgICAgY29uc3Qge3h9ID0gaW5wdXRzO1xuICAgICAgY29uc3Qge3BhZGRpbmdzLCBjb25zdGFudFZhbHVlfSA9IGF0dHJzO1xuICAgICAgaWYgKHBhZGRpbmdzLmV2ZXJ5KHAgPT4gdXRpbC5hcnJheXNFcXVhbChwLCBbMCwgMF0pKSkge1xuICAgICAgICByZXR1cm4gaWRlbnRpdHkoe2lucHV0czoge3h9LCBiYWNrZW5kfSk7XG4gICAgICB9XG4gICAgICBpZiAodXRpbC5zaXplRnJvbVNoYXBlKHguc2hhcGUpID09PSAwKSB7XG4gICAgICAgIC8vIFNob3J0LWNpcmN1aXQgdGhlIGNvbXB1dGF0aW9uLCBzaW5jZSB4IGRvZXNuJ3QgaGF2ZSB2YWx1ZSwgb25seVxuICAgICAgICAvLyB0aGUgc2hhcGUgaXMgdXNlZCB0byBjb21wdXRlIG91dHB1dCBzaGFwZSB0byBwYWQuXG4gICAgICAgIGNvbnN0IG91dHB1dFNoYXBlID0gcGFkZGluZ3MubWFwKFxuICAgICAgICAgICAgKHAsIGkpID0+XG4gICAgICAgICAgICAgICAgcFswXSAvKiBiZWZvcmVQYWQgKi8gKyB4LnNoYXBlW2ldICsgcFsxXSAvKiBhZnRlclBhZCAqLyk7XG4gICAgICAgIHJldHVybiBmaWxsKHtcbiAgICAgICAgICBiYWNrZW5kLFxuICAgICAgICAgIGF0dHJzOiB7c2hhcGU6IG91dHB1dFNoYXBlLCB2YWx1ZTogY29uc3RhbnRWYWx1ZSwgZHR5cGU6IHguZHR5cGV9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgY29uc3QgdW5pZm9ybURhdGEgPSBbe3R5cGU6ICdmbG9hdDMyJywgZGF0YTogW2NvbnN0YW50VmFsdWVdfV07XG4gICAgICBwYWRkaW5ncy5tYXAocCA9PiB1bmlmb3JtRGF0YS5wdXNoKHt0eXBlOiAnaW50MzInLCBkYXRhOiBbcFswXSwgcFsxXV19KSk7XG4gICAgICBjb25zdCBwcm9ncmFtID0gbmV3IFBhZFByb2dyYW0oeC5zaGFwZSwgcGFkZGluZ3MpO1xuICAgICAgcmV0dXJuIGJhY2tlbmQucnVuV2ViR1BVUHJvZ3JhbShwcm9ncmFtLCBbeF0sIHguZHR5cGUsIHVuaWZvcm1EYXRhKTtcbiAgICB9O1xuXG5leHBvcnQgY29uc3QgcGFkVjJDb25maWc6IEtlcm5lbENvbmZpZyA9IHtcbiAga2VybmVsTmFtZTogUGFkVjIsXG4gIGJhY2tlbmROYW1lOiAnd2ViZ3B1JyxcbiAga2VybmVsRnVuYzogcGFkVjIgYXMgdW5rbm93biBhcyBLZXJuZWxGdW5jXG59O1xuIl19","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Pow } from '@tensorflow/tfjs-core';\nimport { BinaryOpType } from '../binary_op_util';\nimport { binaryKernelFunc } from '../kernel_utils/kernel_funcs_utils';\nexport const pow = binaryKernelFunc({\n    opType: BinaryOpType.POW,\n});\nexport const powConfig = {\n    kernelName: Pow,\n    backendName: 'webgpu',\n    kernelFunc: pow\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUG93LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMva2VybmVscy9Qb3cudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUFlLEdBQUcsRUFBQyxNQUFNLHVCQUF1QixDQUFDO0FBRXhELE9BQU8sRUFBQyxZQUFZLEVBQUMsTUFBTSxtQkFBbUIsQ0FBQztBQUMvQyxPQUFPLEVBQUMsZ0JBQWdCLEVBQUMsTUFBTSxvQ0FBb0MsQ0FBQztBQUVwRSxNQUFNLENBQUMsTUFBTSxHQUFHLEdBQUcsZ0JBQWdCLENBQUM7SUFDbEMsTUFBTSxFQUFFLFlBQVksQ0FBQyxHQUFHO0NBQ3pCLENBQUMsQ0FBQztBQUVILE1BQU0sQ0FBQyxNQUFNLFNBQVMsR0FBaUI7SUFDckMsVUFBVSxFQUFFLEdBQUc7SUFDZixXQUFXLEVBQUUsUUFBUTtJQUNyQixVQUFVLEVBQUUsR0FBRztDQUNoQixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge0tlcm5lbENvbmZpZywgUG93fSBmcm9tICdAdGVuc29yZmxvdy90ZmpzLWNvcmUnO1xuXG5pbXBvcnQge0JpbmFyeU9wVHlwZX0gZnJvbSAnLi4vYmluYXJ5X29wX3V0aWwnO1xuaW1wb3J0IHtiaW5hcnlLZXJuZWxGdW5jfSBmcm9tICcuLi9rZXJuZWxfdXRpbHMva2VybmVsX2Z1bmNzX3V0aWxzJztcblxuZXhwb3J0IGNvbnN0IHBvdyA9IGJpbmFyeUtlcm5lbEZ1bmMoe1xuICBvcFR5cGU6IEJpbmFyeU9wVHlwZS5QT1csXG59KTtcblxuZXhwb3J0IGNvbnN0IHBvd0NvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBQb3csXG4gIGJhY2tlbmROYW1lOiAnd2ViZ3B1JyxcbiAga2VybmVsRnVuYzogcG93XG59O1xuIl19","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Prelu } from '@tensorflow/tfjs-core';\nimport { BinaryOpType } from '../binary_op_util';\nimport { BinaryOpProgram } from '../binary_op_webgpu';\nexport function prelu(args) {\n    const { inputs, backend } = args;\n    const { x, alpha } = inputs;\n    const program = new BinaryOpProgram(BinaryOpType.PRELU, x.shape, alpha.shape);\n    return backend.runWebGPUProgram(program, [x, alpha], 'float32');\n}\nexport const preluConfig = {\n    kernelName: Prelu,\n    backendName: 'webgpu',\n    kernelFunc: prelu\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUHJlbHUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9rZXJuZWxzL1ByZWx1LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sRUFBMkIsS0FBSyxFQUEwQixNQUFNLHVCQUF1QixDQUFDO0FBSS9GLE9BQU8sRUFBQyxZQUFZLEVBQUMsTUFBTSxtQkFBbUIsQ0FBQztBQUMvQyxPQUFPLEVBQUMsZUFBZSxFQUFDLE1BQU0scUJBQXFCLENBQUM7QUFFcEQsTUFBTSxVQUFVLEtBQUssQ0FBQyxJQUFtRDtJQUV2RSxNQUFNLEVBQUMsTUFBTSxFQUFFLE9BQU8sRUFBQyxHQUFHLElBQUksQ0FBQztJQUMvQixNQUFNLEVBQUMsQ0FBQyxFQUFFLEtBQUssRUFBQyxHQUFHLE1BQU0sQ0FBQztJQUUxQixNQUFNLE9BQU8sR0FBRyxJQUFJLGVBQWUsQ0FBQyxZQUFZLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxLQUFLLEVBQUUsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQzlFLE9BQU8sT0FBTyxDQUFDLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsRUFBRSxTQUFTLENBQUMsQ0FBQztBQUNsRSxDQUFDO0FBRUQsTUFBTSxDQUFDLE1BQU0sV0FBVyxHQUFpQjtJQUN2QyxVQUFVLEVBQUUsS0FBSztJQUNqQixXQUFXLEVBQUUsUUFBUTtJQUNyQixVQUFVLEVBQUUsS0FBOEI7Q0FDM0MsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtLZXJuZWxDb25maWcsIEtlcm5lbEZ1bmMsIFByZWx1LCBQcmVsdUlucHV0cywgVGVuc29ySW5mb30gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcblxuaW1wb3J0IHtXZWJHUFVCYWNrZW5kfSBmcm9tICcuLi9iYWNrZW5kX3dlYmdwdSc7XG5cbmltcG9ydCB7QmluYXJ5T3BUeXBlfSBmcm9tICcuLi9iaW5hcnlfb3BfdXRpbCc7XG5pbXBvcnQge0JpbmFyeU9wUHJvZ3JhbX0gZnJvbSAnLi4vYmluYXJ5X29wX3dlYmdwdSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBwcmVsdShhcmdzOiB7aW5wdXRzOiBQcmVsdUlucHV0cywgYmFja2VuZDogV2ViR1BVQmFja2VuZH0pOlxuICAgIFRlbnNvckluZm8ge1xuICBjb25zdCB7aW5wdXRzLCBiYWNrZW5kfSA9IGFyZ3M7XG4gIGNvbnN0IHt4LCBhbHBoYX0gPSBpbnB1dHM7XG5cbiAgY29uc3QgcHJvZ3JhbSA9IG5ldyBCaW5hcnlPcFByb2dyYW0oQmluYXJ5T3BUeXBlLlBSRUxVLCB4LnNoYXBlLCBhbHBoYS5zaGFwZSk7XG4gIHJldHVybiBiYWNrZW5kLnJ1bldlYkdQVVByb2dyYW0ocHJvZ3JhbSwgW3gsIGFscGhhXSwgJ2Zsb2F0MzInKTtcbn1cblxuZXhwb3J0IGNvbnN0IHByZWx1Q29uZmlnOiBLZXJuZWxDb25maWcgPSB7XG4gIGtlcm5lbE5hbWU6IFByZWx1LFxuICBiYWNrZW5kTmFtZTogJ3dlYmdwdScsXG4gIGtlcm5lbEZ1bmM6IHByZWx1IGFzIHVua25vd24gYXMgS2VybmVsRnVuY1xufTtcbiJdfQ==","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Prod } from '@tensorflow/tfjs-core';\nimport { reduce } from '../kernel_utils/reduce';\nexport function prod(args) {\n    const { inputs, backend, attrs } = args;\n    const { x } = inputs;\n    const { axis, keepDims } = attrs;\n    return reduce(x, axis, keepDims, 'prod', backend);\n}\nexport const prodConfig = {\n    kernelName: Prod,\n    backendName: 'webgpu',\n    kernelFunc: prod\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUHJvZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2tlcm5lbHMvUHJvZC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQTJCLElBQUksRUFBb0MsTUFBTSx1QkFBdUIsQ0FBQztBQUd4RyxPQUFPLEVBQUMsTUFBTSxFQUFDLE1BQU0sd0JBQXdCLENBQUM7QUFFOUMsTUFBTSxVQUFVLElBQUksQ0FDaEIsSUFBb0U7SUFFdEUsTUFBTSxFQUFDLE1BQU0sRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFDLEdBQUcsSUFBSSxDQUFDO0lBQ3RDLE1BQU0sRUFBQyxDQUFDLEVBQUMsR0FBRyxNQUFNLENBQUM7SUFDbkIsTUFBTSxFQUFDLElBQUksRUFBRSxRQUFRLEVBQUMsR0FBRyxLQUFLLENBQUM7SUFFL0IsT0FBTyxNQUFNLENBQUMsQ0FBQyxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO0FBQ3BELENBQUM7QUFFRCxNQUFNLENBQUMsTUFBTSxVQUFVLEdBQWlCO0lBQ3RDLFVBQVUsRUFBRSxJQUFJO0lBQ2hCLFdBQVcsRUFBRSxRQUFRO0lBQ3JCLFVBQVUsRUFBRSxJQUE2QjtDQUMxQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge0tlcm5lbENvbmZpZywgS2VybmVsRnVuYywgUHJvZCwgUHJvZEF0dHJzLCBQcm9kSW5wdXRzLCBUZW5zb3JJbmZvfSBmcm9tICdAdGVuc29yZmxvdy90ZmpzLWNvcmUnO1xuXG5pbXBvcnQge1dlYkdQVUJhY2tlbmR9IGZyb20gJy4uL2JhY2tlbmRfd2ViZ3B1JztcbmltcG9ydCB7cmVkdWNlfSBmcm9tICcuLi9rZXJuZWxfdXRpbHMvcmVkdWNlJztcblxuZXhwb3J0IGZ1bmN0aW9uIHByb2QoXG4gICAgYXJnczoge2lucHV0czogUHJvZElucHV0cywgYmFja2VuZDogV2ViR1BVQmFja2VuZCwgYXR0cnM6IFByb2RBdHRyc30pOlxuICAgIFRlbnNvckluZm8ge1xuICBjb25zdCB7aW5wdXRzLCBiYWNrZW5kLCBhdHRyc30gPSBhcmdzO1xuICBjb25zdCB7eH0gPSBpbnB1dHM7XG4gIGNvbnN0IHtheGlzLCBrZWVwRGltc30gPSBhdHRycztcblxuICByZXR1cm4gcmVkdWNlKHgsIGF4aXMsIGtlZXBEaW1zLCAncHJvZCcsIGJhY2tlbmQpO1xufVxuXG5leHBvcnQgY29uc3QgcHJvZENvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBQcm9kLFxuICBiYWNrZW5kTmFtZTogJ3dlYmdwdScsXG4gIGtlcm5lbEZ1bmM6IHByb2QgYXMgdW5rbm93biBhcyBLZXJuZWxGdW5jXG59O1xuIl19","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Range } from '@tensorflow/tfjs-core';\nimport { rangeImplCPU } from '../kernel_utils/shared';\nexport const range = (args) => {\n    const { backend, attrs } = args;\n    const { start, stop, step, dtype } = attrs;\n    const values = rangeImplCPU(start, stop, step, dtype);\n    return backend.makeTensorInfo([values.length], dtype, values);\n};\nexport const rangeConfig = {\n    kernelName: Range,\n    backendName: 'webgpu',\n    kernelFunc: range\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUmFuZ2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9rZXJuZWxzL1JhbmdlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sRUFBMkIsS0FBSyxFQUF5QixNQUFNLHVCQUF1QixDQUFDO0FBRzlGLE9BQU8sRUFBQyxZQUFZLEVBQUMsTUFBTSx3QkFBd0IsQ0FBQztBQUVwRCxNQUFNLENBQUMsTUFBTSxLQUFLLEdBQ2QsQ0FBQyxJQUFpRCxFQUFjLEVBQUU7SUFDaEUsTUFBTSxFQUFDLE9BQU8sRUFBRSxLQUFLLEVBQUMsR0FBRyxJQUFJLENBQUM7SUFDOUIsTUFBTSxFQUFDLEtBQUssRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBQyxHQUFHLEtBQUssQ0FBQztJQUN6QyxNQUFNLE1BQU0sR0FBRyxZQUFZLENBQUMsS0FBSyxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsS0FBSyxDQUFDLENBQUM7SUFDdEQsT0FBTyxPQUFPLENBQUMsY0FBYyxDQUFDLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFLEtBQUssRUFBRSxNQUFNLENBQUMsQ0FBQztBQUNoRSxDQUFDLENBQUM7QUFFTixNQUFNLENBQUMsTUFBTSxXQUFXLEdBQWlCO0lBQ3ZDLFVBQVUsRUFBRSxLQUFLO0lBQ2pCLFdBQVcsRUFBRSxRQUFRO0lBQ3JCLFVBQVUsRUFBRSxLQUE4QjtDQUMzQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge0tlcm5lbENvbmZpZywgS2VybmVsRnVuYywgUmFuZ2UsIFJhbmdlQXR0cnMsIFRlbnNvckluZm99IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7V2ViR1BVQmFja2VuZH0gZnJvbSAnLi4vYmFja2VuZF93ZWJncHUnO1xuaW1wb3J0IHtyYW5nZUltcGxDUFV9IGZyb20gJy4uL2tlcm5lbF91dGlscy9zaGFyZWQnO1xuXG5leHBvcnQgY29uc3QgcmFuZ2UgPVxuICAgIChhcmdzOiB7YmFja2VuZDogV2ViR1BVQmFja2VuZCwgYXR0cnM6IFJhbmdlQXR0cnN9KTogVGVuc29ySW5mbyA9PiB7XG4gICAgICBjb25zdCB7YmFja2VuZCwgYXR0cnN9ID0gYXJncztcbiAgICAgIGNvbnN0IHtzdGFydCwgc3RvcCwgc3RlcCwgZHR5cGV9ID0gYXR0cnM7XG4gICAgICBjb25zdCB2YWx1ZXMgPSByYW5nZUltcGxDUFUoc3RhcnQsIHN0b3AsIHN0ZXAsIGR0eXBlKTtcbiAgICAgIHJldHVybiBiYWNrZW5kLm1ha2VUZW5zb3JJbmZvKFt2YWx1ZXMubGVuZ3RoXSwgZHR5cGUsIHZhbHVlcyk7XG4gICAgfTtcblxuZXhwb3J0IGNvbnN0IHJhbmdlQ29uZmlnOiBLZXJuZWxDb25maWcgPSB7XG4gIGtlcm5lbE5hbWU6IFJhbmdlLFxuICBiYWNrZW5kTmFtZTogJ3dlYmdwdScsXG4gIGtlcm5lbEZ1bmM6IHJhbmdlIGFzIHVua25vd24gYXMgS2VybmVsRnVuY1xufTtcbiJdfQ==","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { RealDiv } from '@tensorflow/tfjs-core';\nimport { BinaryOpType } from '../binary_op_util';\nimport { binaryKernelFunc } from '../kernel_utils/kernel_funcs_utils';\nexport const realDiv = binaryKernelFunc({ opType: BinaryOpType.DIV });\nexport const realDivConfig = {\n    kernelName: RealDiv,\n    backendName: 'webgpu',\n    kernelFunc: realDiv\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUmVhbERpdi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2tlcm5lbHMvUmVhbERpdi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQTJCLE9BQU8sRUFBQyxNQUFNLHVCQUF1QixDQUFDO0FBRXhFLE9BQU8sRUFBQyxZQUFZLEVBQUMsTUFBTSxtQkFBbUIsQ0FBQztBQUMvQyxPQUFPLEVBQUMsZ0JBQWdCLEVBQUMsTUFBTSxvQ0FBb0MsQ0FBQztBQUVwRSxNQUFNLENBQUMsTUFBTSxPQUFPLEdBQUcsZ0JBQWdCLENBQUMsRUFBQyxNQUFNLEVBQUUsWUFBWSxDQUFDLEdBQUcsRUFBQyxDQUFDLENBQUM7QUFFcEUsTUFBTSxDQUFDLE1BQU0sYUFBYSxHQUFpQjtJQUN6QyxVQUFVLEVBQUUsT0FBTztJQUNuQixXQUFXLEVBQUUsUUFBUTtJQUNyQixVQUFVLEVBQUUsT0FBZ0M7Q0FDN0MsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtLZXJuZWxDb25maWcsIEtlcm5lbEZ1bmMsIFJlYWxEaXZ9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7QmluYXJ5T3BUeXBlfSBmcm9tICcuLi9iaW5hcnlfb3BfdXRpbCc7XG5pbXBvcnQge2JpbmFyeUtlcm5lbEZ1bmN9IGZyb20gJy4uL2tlcm5lbF91dGlscy9rZXJuZWxfZnVuY3NfdXRpbHMnO1xuXG5leHBvcnQgY29uc3QgcmVhbERpdiA9IGJpbmFyeUtlcm5lbEZ1bmMoe29wVHlwZTogQmluYXJ5T3BUeXBlLkRJVn0pO1xuXG5leHBvcnQgY29uc3QgcmVhbERpdkNvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBSZWFsRGl2LFxuICBiYWNrZW5kTmFtZTogJ3dlYmdwdScsXG4gIGtlcm5lbEZ1bmM6IHJlYWxEaXYgYXMgdW5rbm93biBhcyBLZXJuZWxGdW5jXG59O1xuIl19","/**\n * @license\n * Copyright 2022 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Reciprocal } from '@tensorflow/tfjs-core';\nimport { unaryKernelFunc } from '../kernel_utils/kernel_funcs_utils';\nimport { UnaryOpType } from '../unary_op_util';\nexport const reciprocal = unaryKernelFunc({ opType: UnaryOpType.RECIPROCAL });\nexport const reciprocalConfig = {\n    kernelName: Reciprocal,\n    backendName: 'webgpu',\n    kernelFunc: reciprocal\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUmVjaXByb2NhbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2tlcm5lbHMvUmVjaXByb2NhbC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQWUsVUFBVSxFQUFDLE1BQU0sdUJBQXVCLENBQUM7QUFDL0QsT0FBTyxFQUFDLGVBQWUsRUFBQyxNQUFNLG9DQUFvQyxDQUFDO0FBQ25FLE9BQU8sRUFBQyxXQUFXLEVBQUMsTUFBTSxrQkFBa0IsQ0FBQztBQUU3QyxNQUFNLENBQUMsTUFBTSxVQUFVLEdBQUcsZUFBZSxDQUFDLEVBQUMsTUFBTSxFQUFFLFdBQVcsQ0FBQyxVQUFVLEVBQUMsQ0FBQyxDQUFDO0FBRTVFLE1BQU0sQ0FBQyxNQUFNLGdCQUFnQixHQUFpQjtJQUM1QyxVQUFVLEVBQUUsVUFBVTtJQUN0QixXQUFXLEVBQUUsUUFBUTtJQUNyQixVQUFVLEVBQUUsVUFBVTtDQUN2QixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge0tlcm5lbENvbmZpZywgUmVjaXByb2NhbH0gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcbmltcG9ydCB7dW5hcnlLZXJuZWxGdW5jfSBmcm9tICcuLi9rZXJuZWxfdXRpbHMva2VybmVsX2Z1bmNzX3V0aWxzJztcbmltcG9ydCB7VW5hcnlPcFR5cGV9IGZyb20gJy4uL3VuYXJ5X29wX3V0aWwnO1xuXG5leHBvcnQgY29uc3QgcmVjaXByb2NhbCA9IHVuYXJ5S2VybmVsRnVuYyh7b3BUeXBlOiBVbmFyeU9wVHlwZS5SRUNJUFJPQ0FMfSk7XG5cbmV4cG9ydCBjb25zdCByZWNpcHJvY2FsQ29uZmlnOiBLZXJuZWxDb25maWcgPSB7XG4gIGtlcm5lbE5hbWU6IFJlY2lwcm9jYWwsXG4gIGJhY2tlbmROYW1lOiAnd2ViZ3B1JyxcbiAga2VybmVsRnVuYzogcmVjaXByb2NhbFxufTtcbiJdfQ==","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Relu } from '@tensorflow/tfjs-core';\nimport { unaryKernelFunc } from '../kernel_utils/kernel_funcs_utils';\nimport { UnaryOpType } from '../unary_op_util';\nexport const relu = unaryKernelFunc({ opType: UnaryOpType.RELU });\nexport const reluConfig = {\n    kernelName: Relu,\n    backendName: 'webgpu',\n    kernelFunc: relu\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUmVsdS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2tlcm5lbHMvUmVsdS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQWUsSUFBSSxFQUFDLE1BQU0sdUJBQXVCLENBQUM7QUFDekQsT0FBTyxFQUFDLGVBQWUsRUFBQyxNQUFNLG9DQUFvQyxDQUFDO0FBQ25FLE9BQU8sRUFBQyxXQUFXLEVBQUMsTUFBTSxrQkFBa0IsQ0FBQztBQUU3QyxNQUFNLENBQUMsTUFBTSxJQUFJLEdBQUcsZUFBZSxDQUFDLEVBQUMsTUFBTSxFQUFFLFdBQVcsQ0FBQyxJQUFJLEVBQUMsQ0FBQyxDQUFDO0FBRWhFLE1BQU0sQ0FBQyxNQUFNLFVBQVUsR0FBaUI7SUFDdEMsVUFBVSxFQUFFLElBQUk7SUFDaEIsV0FBVyxFQUFFLFFBQVE7SUFDckIsVUFBVSxFQUFFLElBQUk7Q0FDakIsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtLZXJuZWxDb25maWcsIFJlbHV9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5pbXBvcnQge3VuYXJ5S2VybmVsRnVuY30gZnJvbSAnLi4va2VybmVsX3V0aWxzL2tlcm5lbF9mdW5jc191dGlscyc7XG5pbXBvcnQge1VuYXJ5T3BUeXBlfSBmcm9tICcuLi91bmFyeV9vcF91dGlsJztcblxuZXhwb3J0IGNvbnN0IHJlbHUgPSB1bmFyeUtlcm5lbEZ1bmMoe29wVHlwZTogVW5hcnlPcFR5cGUuUkVMVX0pO1xuXG5leHBvcnQgY29uc3QgcmVsdUNvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBSZWx1LFxuICBiYWNrZW5kTmFtZTogJ3dlYmdwdScsXG4gIGtlcm5lbEZ1bmM6IHJlbHVcbn07XG4iXX0=","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Relu6 } from '@tensorflow/tfjs-core';\nimport { unaryKernelFunc } from '../kernel_utils/kernel_funcs_utils';\nimport { UnaryOpType } from '../unary_op_util';\nexport const relu6 = unaryKernelFunc({ opType: UnaryOpType.RELU6 });\nexport const relu6Config = {\n    kernelName: Relu6,\n    backendName: 'webgpu',\n    kernelFunc: relu6\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUmVsdTYuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9rZXJuZWxzL1JlbHU2LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sRUFBZSxLQUFLLEVBQUMsTUFBTSx1QkFBdUIsQ0FBQztBQUMxRCxPQUFPLEVBQUMsZUFBZSxFQUFDLE1BQU0sb0NBQW9DLENBQUM7QUFDbkUsT0FBTyxFQUFDLFdBQVcsRUFBQyxNQUFNLGtCQUFrQixDQUFDO0FBRTdDLE1BQU0sQ0FBQyxNQUFNLEtBQUssR0FBRyxlQUFlLENBQUMsRUFBQyxNQUFNLEVBQUUsV0FBVyxDQUFDLEtBQUssRUFBQyxDQUFDLENBQUM7QUFFbEUsTUFBTSxDQUFDLE1BQU0sV0FBVyxHQUFpQjtJQUN2QyxVQUFVLEVBQUUsS0FBSztJQUNqQixXQUFXLEVBQUUsUUFBUTtJQUNyQixVQUFVLEVBQUUsS0FBSztDQUNsQixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge0tlcm5lbENvbmZpZywgUmVsdTZ9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5pbXBvcnQge3VuYXJ5S2VybmVsRnVuY30gZnJvbSAnLi4va2VybmVsX3V0aWxzL2tlcm5lbF9mdW5jc191dGlscyc7XG5pbXBvcnQge1VuYXJ5T3BUeXBlfSBmcm9tICcuLi91bmFyeV9vcF91dGlsJztcblxuZXhwb3J0IGNvbnN0IHJlbHU2ID0gdW5hcnlLZXJuZWxGdW5jKHtvcFR5cGU6IFVuYXJ5T3BUeXBlLlJFTFU2fSk7XG5cbmV4cG9ydCBjb25zdCByZWx1NkNvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBSZWx1NixcbiAgYmFja2VuZE5hbWU6ICd3ZWJncHUnLFxuICBrZXJuZWxGdW5jOiByZWx1NlxufTtcbiJdfQ==","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { getMainHeaderString as main } from './webgpu_program';\nimport { computeDispatch, flatDispatchLayout } from './webgpu_util';\nexport class ResizeBilinearProgram {\n    constructor(inputShape, newHeight, newWidth) {\n        this.variableNames = ['x'];\n        this.uniforms = 'adjustHeightWidth : vec2<f32>, halfPixelCenters : f32,';\n        this.workgroupSize = [64, 1, 1];\n        this.size = true;\n        this.outputShape = [inputShape[0], newHeight, newWidth, inputShape[3]];\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize);\n        this.shaderKey = `resizeBilinear`;\n    }\n    getUserCode() {\n        const userCode = `\n      ${main('index')} {\n        if (index < uniforms.size) {\n        let coords = getCoordsFromIndex(index);\n          let b = coords[0];\n          let d = coords[3];\n          let rc = coords.yz;\n\n          let effectiveInSize = vec2<f32>(\n            f32(uniforms.xShape.y) - uniforms.adjustHeightWidth[0],\n            f32(uniforms.xShape.z) - uniforms.adjustHeightWidth[1]);\n\n          let effectiveOutSize = vec2<f32>(\n            f32(uniforms.outShape.y) - uniforms.adjustHeightWidth[0],\n            f32(uniforms.outShape.z) - uniforms.adjustHeightWidth[1]);\n\n          let effectiveInputOverOutputRatioRC =\n              effectiveInSize / effectiveOutSize;\n\n          // Fractional source index\n          let sourceFracIndexRC =\n            (vec2<f32>(rc) + vec2<f32>(uniforms.halfPixelCenters)) *\n            effectiveInputOverOutputRatioRC - vec2<f32>(uniforms.halfPixelCenters);\n\n          // Compute the four integer indices.\n          let sourceFloorRC = vec2<i32>(sourceFracIndexRC);\n          let sourceCeilRC = vec2<i32>(\n            min(vec2<f32>(uniforms.xShape.yz) - vec2<f32>(1.0), ceil(sourceFracIndexRC)));\n\n          let topLeft = getX(b, sourceFloorRC.x, sourceFloorRC.y, d);\n          let bottomLeft = getX(b, sourceCeilRC.x, sourceFloorRC.y, d);\n          let topRight = getX(b, sourceFloorRC.x, sourceCeilRC.y, d);\n          let bottomRight = getX(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n          let fracRC = sourceFracIndexRC - vec2<f32>(sourceFloorRC);\n\n          let top = topLeft + (topRight - topLeft) * fracRC.y;\n          let bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n          let newValue = top + (bottom - top) * fracRC.x;\n\n          setOutputAtIndex(index, newValue);\n        }\n      }\n    `;\n        return userCode;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVzaXplX2JpbGluZWFyX3dlYmdwdS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL3Jlc2l6ZV9iaWxpbmVhcl93ZWJncHUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUFDLG1CQUFtQixJQUFJLElBQUksRUFBZ0IsTUFBTSxrQkFBa0IsQ0FBQztBQUM1RSxPQUFPLEVBQUMsZUFBZSxFQUFFLGtCQUFrQixFQUFDLE1BQU0sZUFBZSxDQUFDO0FBRWxFLE1BQU0sT0FBTyxxQkFBcUI7SUFVaEMsWUFDSSxVQUE0QyxFQUFFLFNBQWlCLEVBQy9ELFFBQWdCO1FBUHBCLGtCQUFhLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUN0QixhQUFRLEdBQUcsd0RBQXdELENBQUM7UUFDcEUsa0JBQWEsR0FBNkIsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ3JELFNBQUksR0FBRyxJQUFJLENBQUM7UUFLVixJQUFJLENBQUMsV0FBVyxHQUFHLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxFQUFFLFNBQVMsRUFBRSxRQUFRLEVBQUUsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFFdkUsSUFBSSxDQUFDLGNBQWMsR0FBRyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7UUFFM0QsSUFBSSxDQUFDLFFBQVEsR0FBRyxlQUFlLENBQzNCLElBQUksQ0FBQyxjQUFjLEVBQUUsSUFBSSxDQUFDLFdBQVcsRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7UUFFL0QsSUFBSSxDQUFDLFNBQVMsR0FBRyxnQkFBZ0IsQ0FBQztJQUNwQyxDQUFDO0lBRUQsV0FBVztRQUNULE1BQU0sUUFBUSxHQUFHO1FBQ2IsSUFBSSxDQUFDLE9BQU8sQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0tBMENoQixDQUFDO1FBQ0YsT0FBTyxRQUFRLENBQUM7SUFDbEIsQ0FBQztDQUNGIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge2dldE1haW5IZWFkZXJTdHJpbmcgYXMgbWFpbiwgV2ViR1BVUHJvZ3JhbX0gZnJvbSAnLi93ZWJncHVfcHJvZ3JhbSc7XG5pbXBvcnQge2NvbXB1dGVEaXNwYXRjaCwgZmxhdERpc3BhdGNoTGF5b3V0fSBmcm9tICcuL3dlYmdwdV91dGlsJztcblxuZXhwb3J0IGNsYXNzIFJlc2l6ZUJpbGluZWFyUHJvZ3JhbSBpbXBsZW1lbnRzIFdlYkdQVVByb2dyYW0ge1xuICBvdXRwdXRTaGFwZTogbnVtYmVyW107XG4gIHNoYWRlcktleTogc3RyaW5nO1xuICBkaXNwYXRjaExheW91dDoge3g6IG51bWJlcltdfTtcbiAgZGlzcGF0Y2g6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXTtcbiAgdmFyaWFibGVOYW1lcyA9IFsneCddO1xuICB1bmlmb3JtcyA9ICdhZGp1c3RIZWlnaHRXaWR0aCA6IHZlYzI8ZjMyPiwgaGFsZlBpeGVsQ2VudGVycyA6IGYzMiwnO1xuICB3b3JrZ3JvdXBTaXplOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl0gPSBbNjQsIDEsIDFdO1xuICBzaXplID0gdHJ1ZTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICAgIGlucHV0U2hhcGU6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXJdLCBuZXdIZWlnaHQ6IG51bWJlcixcbiAgICAgIG5ld1dpZHRoOiBudW1iZXIpIHtcbiAgICB0aGlzLm91dHB1dFNoYXBlID0gW2lucHV0U2hhcGVbMF0sIG5ld0hlaWdodCwgbmV3V2lkdGgsIGlucHV0U2hhcGVbM11dO1xuXG4gICAgdGhpcy5kaXNwYXRjaExheW91dCA9IGZsYXREaXNwYXRjaExheW91dCh0aGlzLm91dHB1dFNoYXBlKTtcblxuICAgIHRoaXMuZGlzcGF0Y2ggPSBjb21wdXRlRGlzcGF0Y2goXG4gICAgICAgIHRoaXMuZGlzcGF0Y2hMYXlvdXQsIHRoaXMub3V0cHV0U2hhcGUsIHRoaXMud29ya2dyb3VwU2l6ZSk7XG5cbiAgICB0aGlzLnNoYWRlcktleSA9IGByZXNpemVCaWxpbmVhcmA7XG4gIH1cblxuICBnZXRVc2VyQ29kZSgpOiBzdHJpbmcge1xuICAgIGNvbnN0IHVzZXJDb2RlID0gYFxuICAgICAgJHttYWluKCdpbmRleCcpfSB7XG4gICAgICAgIGlmIChpbmRleCA8IHVuaWZvcm1zLnNpemUpIHtcbiAgICAgICAgbGV0IGNvb3JkcyA9IGdldENvb3Jkc0Zyb21JbmRleChpbmRleCk7XG4gICAgICAgICAgbGV0IGIgPSBjb29yZHNbMF07XG4gICAgICAgICAgbGV0IGQgPSBjb29yZHNbM107XG4gICAgICAgICAgbGV0IHJjID0gY29vcmRzLnl6O1xuXG4gICAgICAgICAgbGV0IGVmZmVjdGl2ZUluU2l6ZSA9IHZlYzI8ZjMyPihcbiAgICAgICAgICAgIGYzMih1bmlmb3Jtcy54U2hhcGUueSkgLSB1bmlmb3Jtcy5hZGp1c3RIZWlnaHRXaWR0aFswXSxcbiAgICAgICAgICAgIGYzMih1bmlmb3Jtcy54U2hhcGUueikgLSB1bmlmb3Jtcy5hZGp1c3RIZWlnaHRXaWR0aFsxXSk7XG5cbiAgICAgICAgICBsZXQgZWZmZWN0aXZlT3V0U2l6ZSA9IHZlYzI8ZjMyPihcbiAgICAgICAgICAgIGYzMih1bmlmb3Jtcy5vdXRTaGFwZS55KSAtIHVuaWZvcm1zLmFkanVzdEhlaWdodFdpZHRoWzBdLFxuICAgICAgICAgICAgZjMyKHVuaWZvcm1zLm91dFNoYXBlLnopIC0gdW5pZm9ybXMuYWRqdXN0SGVpZ2h0V2lkdGhbMV0pO1xuXG4gICAgICAgICAgbGV0IGVmZmVjdGl2ZUlucHV0T3Zlck91dHB1dFJhdGlvUkMgPVxuICAgICAgICAgICAgICBlZmZlY3RpdmVJblNpemUgLyBlZmZlY3RpdmVPdXRTaXplO1xuXG4gICAgICAgICAgLy8gRnJhY3Rpb25hbCBzb3VyY2UgaW5kZXhcbiAgICAgICAgICBsZXQgc291cmNlRnJhY0luZGV4UkMgPVxuICAgICAgICAgICAgKHZlYzI8ZjMyPihyYykgKyB2ZWMyPGYzMj4odW5pZm9ybXMuaGFsZlBpeGVsQ2VudGVycykpICpcbiAgICAgICAgICAgIGVmZmVjdGl2ZUlucHV0T3Zlck91dHB1dFJhdGlvUkMgLSB2ZWMyPGYzMj4odW5pZm9ybXMuaGFsZlBpeGVsQ2VudGVycyk7XG5cbiAgICAgICAgICAvLyBDb21wdXRlIHRoZSBmb3VyIGludGVnZXIgaW5kaWNlcy5cbiAgICAgICAgICBsZXQgc291cmNlRmxvb3JSQyA9IHZlYzI8aTMyPihzb3VyY2VGcmFjSW5kZXhSQyk7XG4gICAgICAgICAgbGV0IHNvdXJjZUNlaWxSQyA9IHZlYzI8aTMyPihcbiAgICAgICAgICAgIG1pbih2ZWMyPGYzMj4odW5pZm9ybXMueFNoYXBlLnl6KSAtIHZlYzI8ZjMyPigxLjApLCBjZWlsKHNvdXJjZUZyYWNJbmRleFJDKSkpO1xuXG4gICAgICAgICAgbGV0IHRvcExlZnQgPSBnZXRYKGIsIHNvdXJjZUZsb29yUkMueCwgc291cmNlRmxvb3JSQy55LCBkKTtcbiAgICAgICAgICBsZXQgYm90dG9tTGVmdCA9IGdldFgoYiwgc291cmNlQ2VpbFJDLngsIHNvdXJjZUZsb29yUkMueSwgZCk7XG4gICAgICAgICAgbGV0IHRvcFJpZ2h0ID0gZ2V0WChiLCBzb3VyY2VGbG9vclJDLngsIHNvdXJjZUNlaWxSQy55LCBkKTtcbiAgICAgICAgICBsZXQgYm90dG9tUmlnaHQgPSBnZXRYKGIsIHNvdXJjZUNlaWxSQy54LCBzb3VyY2VDZWlsUkMueSwgZCk7XG5cbiAgICAgICAgICBsZXQgZnJhY1JDID0gc291cmNlRnJhY0luZGV4UkMgLSB2ZWMyPGYzMj4oc291cmNlRmxvb3JSQyk7XG5cbiAgICAgICAgICBsZXQgdG9wID0gdG9wTGVmdCArICh0b3BSaWdodCAtIHRvcExlZnQpICogZnJhY1JDLnk7XG4gICAgICAgICAgbGV0IGJvdHRvbSA9IGJvdHRvbUxlZnQgKyAoYm90dG9tUmlnaHQgLSBib3R0b21MZWZ0KSAqIGZyYWNSQy55O1xuICAgICAgICAgIGxldCBuZXdWYWx1ZSA9IHRvcCArIChib3R0b20gLSB0b3ApICogZnJhY1JDLng7XG5cbiAgICAgICAgICBzZXRPdXRwdXRBdEluZGV4KGluZGV4LCBuZXdWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICBgO1xuICAgIHJldHVybiB1c2VyQ29kZTtcbiAgfVxufVxuIl19","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { ResizeBilinear } from '@tensorflow/tfjs-core';\nimport { ResizeBilinearProgram } from '../resize_bilinear_webgpu';\nexport function resizeBilinear(args) {\n    const { inputs, backend, attrs } = args;\n    const { images } = inputs;\n    const { alignCorners, size, halfPixelCenters } = attrs;\n    const [newHeight, newWidth] = size;\n    const adjustHeight = alignCorners && newHeight > 1 ? 1.0 : 0.0;\n    const adjustWidth = alignCorners && newWidth > 1 ? 1.0 : 0.0;\n    const halfPixelCentersValue = halfPixelCenters ? 0.5 : 0.0;\n    const uniformData = [\n        { type: 'float32', data: [adjustHeight, adjustWidth] },\n        { type: 'float32', data: [halfPixelCentersValue] }\n    ];\n    const program = new ResizeBilinearProgram(images.shape, newHeight, newWidth);\n    return backend.runWebGPUProgram(program, [images], 'float32', uniformData);\n}\nexport const resizeBilinearConfig = {\n    kernelName: ResizeBilinear,\n    backendName: 'webgpu',\n    kernelFunc: resizeBilinear\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUmVzaXplQmlsaW5lYXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9rZXJuZWxzL1Jlc2l6ZUJpbGluZWFyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sRUFBMkIsY0FBYyxFQUF3RCxNQUFNLHVCQUF1QixDQUFDO0FBR3RJLE9BQU8sRUFBQyxxQkFBcUIsRUFBQyxNQUFNLDJCQUEyQixDQUFDO0FBRWhFLE1BQU0sVUFBVSxjQUFjLENBQUMsSUFJOUI7SUFDQyxNQUFNLEVBQUMsTUFBTSxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUMsR0FBRyxJQUFJLENBQUM7SUFDdEMsTUFBTSxFQUFDLE1BQU0sRUFBQyxHQUFHLE1BQU0sQ0FBQztJQUN4QixNQUFNLEVBQUMsWUFBWSxFQUFFLElBQUksRUFBRSxnQkFBZ0IsRUFBQyxHQUFHLEtBQUssQ0FBQztJQUVyRCxNQUFNLENBQUMsU0FBUyxFQUFFLFFBQVEsQ0FBQyxHQUFHLElBQUksQ0FBQztJQUNuQyxNQUFNLFlBQVksR0FBRyxZQUFZLElBQUksU0FBUyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUM7SUFDL0QsTUFBTSxXQUFXLEdBQUcsWUFBWSxJQUFJLFFBQVEsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDO0lBQzdELE1BQU0scUJBQXFCLEdBQUcsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDO0lBQzNELE1BQU0sV0FBVyxHQUFHO1FBQ2xCLEVBQUMsSUFBSSxFQUFFLFNBQVMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxZQUFZLEVBQUUsV0FBVyxDQUFDLEVBQUM7UUFDcEQsRUFBQyxJQUFJLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxDQUFDLHFCQUFxQixDQUFDLEVBQUM7S0FDakQsQ0FBQztJQUVGLE1BQU0sT0FBTyxHQUFHLElBQUkscUJBQXFCLENBQ3JDLE1BQU0sQ0FBQyxLQUF5QyxFQUFFLFNBQVMsRUFBRSxRQUFRLENBQUMsQ0FBQztJQUUzRSxPQUFPLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxNQUFNLENBQUMsRUFBRSxTQUFTLEVBQUUsV0FBVyxDQUFDLENBQUM7QUFDN0UsQ0FBQztBQUVELE1BQU0sQ0FBQyxNQUFNLG9CQUFvQixHQUFpQjtJQUNoRCxVQUFVLEVBQUUsY0FBYztJQUMxQixXQUFXLEVBQUUsUUFBUTtJQUNyQixVQUFVLEVBQUUsY0FBdUM7Q0FDcEQsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtLZXJuZWxDb25maWcsIEtlcm5lbEZ1bmMsIFJlc2l6ZUJpbGluZWFyLCBSZXNpemVCaWxpbmVhckF0dHJzLCBSZXNpemVCaWxpbmVhcklucHV0cywgVGVuc29ySW5mb30gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcblxuaW1wb3J0IHtXZWJHUFVCYWNrZW5kfSBmcm9tICcuLi9iYWNrZW5kX3dlYmdwdSc7XG5pbXBvcnQge1Jlc2l6ZUJpbGluZWFyUHJvZ3JhbX0gZnJvbSAnLi4vcmVzaXplX2JpbGluZWFyX3dlYmdwdSc7XG5cbmV4cG9ydCBmdW5jdGlvbiByZXNpemVCaWxpbmVhcihhcmdzOiB7XG4gIGlucHV0czogUmVzaXplQmlsaW5lYXJJbnB1dHMsXG4gIGJhY2tlbmQ6IFdlYkdQVUJhY2tlbmQsXG4gIGF0dHJzOiBSZXNpemVCaWxpbmVhckF0dHJzXG59KTogVGVuc29ySW5mbyB7XG4gIGNvbnN0IHtpbnB1dHMsIGJhY2tlbmQsIGF0dHJzfSA9IGFyZ3M7XG4gIGNvbnN0IHtpbWFnZXN9ID0gaW5wdXRzO1xuICBjb25zdCB7YWxpZ25Db3JuZXJzLCBzaXplLCBoYWxmUGl4ZWxDZW50ZXJzfSA9IGF0dHJzO1xuXG4gIGNvbnN0IFtuZXdIZWlnaHQsIG5ld1dpZHRoXSA9IHNpemU7XG4gIGNvbnN0IGFkanVzdEhlaWdodCA9IGFsaWduQ29ybmVycyAmJiBuZXdIZWlnaHQgPiAxID8gMS4wIDogMC4wO1xuICBjb25zdCBhZGp1c3RXaWR0aCA9IGFsaWduQ29ybmVycyAmJiBuZXdXaWR0aCA+IDEgPyAxLjAgOiAwLjA7XG4gIGNvbnN0IGhhbGZQaXhlbENlbnRlcnNWYWx1ZSA9IGhhbGZQaXhlbENlbnRlcnMgPyAwLjUgOiAwLjA7XG4gIGNvbnN0IHVuaWZvcm1EYXRhID0gW1xuICAgIHt0eXBlOiAnZmxvYXQzMicsIGRhdGE6IFthZGp1c3RIZWlnaHQsIGFkanVzdFdpZHRoXX0sXG4gICAge3R5cGU6ICdmbG9hdDMyJywgZGF0YTogW2hhbGZQaXhlbENlbnRlcnNWYWx1ZV19XG4gIF07XG5cbiAgY29uc3QgcHJvZ3JhbSA9IG5ldyBSZXNpemVCaWxpbmVhclByb2dyYW0oXG4gICAgICBpbWFnZXMuc2hhcGUgYXMgW251bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcl0sIG5ld0hlaWdodCwgbmV3V2lkdGgpO1xuXG4gIHJldHVybiBiYWNrZW5kLnJ1bldlYkdQVVByb2dyYW0ocHJvZ3JhbSwgW2ltYWdlc10sICdmbG9hdDMyJywgdW5pZm9ybURhdGEpO1xufVxuXG5leHBvcnQgY29uc3QgcmVzaXplQmlsaW5lYXJDb25maWc6IEtlcm5lbENvbmZpZyA9IHtcbiAga2VybmVsTmFtZTogUmVzaXplQmlsaW5lYXIsXG4gIGJhY2tlbmROYW1lOiAnd2ViZ3B1JyxcbiAga2VybmVsRnVuYzogcmVzaXplQmlsaW5lYXIgYXMgdW5rbm93biBhcyBLZXJuZWxGdW5jXG59O1xuIl19","/**\n * @license\n * Copyright 2023 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { getMainHeaderString as main } from './webgpu_program';\nimport { computeDispatch, flatDispatchLayout } from './webgpu_util';\nexport class ResizeBilinearBackpropProgram {\n    constructor(inputShape, alignCorners) {\n        this.variableNames = ['dy'];\n        this.uniforms = `effectiveXSize : vec2<i32>, effectiveYSize : vec2<i32>, heightScale : f32, widthScale : f32,\n       invHeightScale : f32, invWidthScale : f32, winHeight : i32, winWidth : i32,`;\n        this.workgroupSize = [64, 1, 1];\n        this.size = true;\n        this.outputShape = inputShape;\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize);\n        this.alignCorners = alignCorners;\n        this.shaderKey = `resizeBilinearBackprop_${alignCorners}`;\n    }\n    getUserCode() {\n        const userCode = `\n      ${main('index')} {\n        if (index < uniforms.size) {\n          let coords = getOutputCoords();\n          let b = coords[0];\n          let d = coords[3];\n          let r = coords[1];\n          let c = coords[2];\n\n          var accumulator = 0.0;\n\n          // Compute bounds for where in dy we will look\n          let startRLerp = floor(f32(r) * uniforms.invHeightScale);\n          let startDyR = i32(startRLerp - f32(uniforms.winHeight / 2));\n\n          let startCLerp = floor(f32(c) * uniforms.invWidthScale);\n          let startDyC = i32(startCLerp - f32(uniforms.winWidth / 2));\n\n          // Loop over dy\n          for (var dyROffset = 0; dyROffset < uniforms.winHeight; dyROffset++) {\n            let dyR = startDyR + dyROffset;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyR < 0 || dyR >= uniforms.dyShape[1]) {\n              continue;\n            }\n\n            for (var dyCOffset = 0; dyCOffset < uniforms.winWidth; dyCOffset++) {\n              let dyC = startDyC + dyCOffset;\n\n              // Guard against the window exceeding the bounds of dy\n              if (dyC < 0 || dyC >= uniforms.dyShape[2]) {\n                continue;\n              }\n\n              let dxR = f32(dyR) * uniforms.heightScale;\n              let topDxRIndex = i32(floor(dxR));\n              let bottomDxRIndex = i32(min(ceil(dxR), f32(uniforms.outShape[1] - 1)));\n              let dxRLerp = dxR - f32(topDxRIndex);\n              let inverseDxRLerp = 1.0 - dxRLerp;\n\n              let dxC = f32(dyC) * uniforms.widthScale;\n              let leftDxCIndex = i32(floor(dxC));\n              let rightDxCIndex = i32(min(ceil(dxC), f32(uniforms.outShape[2] - 1)));\n              let dxCLerp = dxC - f32(leftDxCIndex);\n              let inverseDxCLerp = 1.0 - dxCLerp;\n\n              if (r == topDxRIndex && c == leftDxCIndex) {\n                // topLeft\n                accumulator +=\n                  getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n              }\n\n              if (r == topDxRIndex && c == rightDxCIndex) {\n                // topRight\n                accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n              }\n\n              if (r == bottomDxRIndex && c == leftDxCIndex) {\n                // bottomLeft\n                accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n              }\n\n              if (r == bottomDxRIndex && c == rightDxCIndex) {\n                // bottomRight\n                accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n              }\n            }\n          }\n          // End loop over dy\n\n          setOutputAtIndex(index, accumulator);\n        }\n      }\n    `;\n        return userCode;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVzaXplX2JpbGluZWFyX2JhY2twcm9wX3dlYmdwdS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL3Jlc2l6ZV9iaWxpbmVhcl9iYWNrcHJvcF93ZWJncHUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUFDLG1CQUFtQixJQUFJLElBQUksRUFBZ0IsTUFBTSxrQkFBa0IsQ0FBQztBQUM1RSxPQUFPLEVBQUMsZUFBZSxFQUFFLGtCQUFrQixFQUFDLE1BQU0sZUFBZSxDQUFDO0FBRWxFLE1BQU0sT0FBTyw2QkFBNkI7SUFheEMsWUFDSSxVQUE0QyxFQUFFLFlBQXFCO1FBVHZFLGtCQUFhLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN2QixhQUFRLEdBQ0o7bUZBQzZFLENBQUM7UUFDbEYsa0JBQWEsR0FBNkIsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBRXJELFNBQUksR0FBRyxJQUFJLENBQUM7UUFJVixJQUFJLENBQUMsV0FBVyxHQUFHLFVBQVUsQ0FBQztRQUU5QixJQUFJLENBQUMsY0FBYyxHQUFHLGtCQUFrQixDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUMzRCxJQUFJLENBQUMsUUFBUSxHQUFHLGVBQWUsQ0FDM0IsSUFBSSxDQUFDLGNBQWMsRUFBRSxJQUFJLENBQUMsV0FBVyxFQUFFLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQztRQUUvRCxJQUFJLENBQUMsWUFBWSxHQUFHLFlBQVksQ0FBQztRQUNqQyxJQUFJLENBQUMsU0FBUyxHQUFHLDBCQUEwQixZQUFZLEVBQUUsQ0FBQztJQUM1RCxDQUFDO0lBRUQsV0FBVztRQUNULE1BQU0sUUFBUSxHQUFHO1FBQ2IsSUFBSSxDQUFDLE9BQU8sQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztLQXlFaEIsQ0FBQztRQUNGLE9BQU8sUUFBUSxDQUFDO0lBQ2xCLENBQUM7Q0FDRiIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTEMuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtnZXRNYWluSGVhZGVyU3RyaW5nIGFzIG1haW4sIFdlYkdQVVByb2dyYW19IGZyb20gJy4vd2ViZ3B1X3Byb2dyYW0nO1xuaW1wb3J0IHtjb21wdXRlRGlzcGF0Y2gsIGZsYXREaXNwYXRjaExheW91dH0gZnJvbSAnLi93ZWJncHVfdXRpbCc7XG5cbmV4cG9ydCBjbGFzcyBSZXNpemVCaWxpbmVhckJhY2twcm9wUHJvZ3JhbSBpbXBsZW1lbnRzIFdlYkdQVVByb2dyYW0ge1xuICBvdXRwdXRTaGFwZTogbnVtYmVyW107XG4gIHNoYWRlcktleTogc3RyaW5nO1xuICBkaXNwYXRjaExheW91dDoge3g6IG51bWJlcltdfTtcbiAgZGlzcGF0Y2g6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXTtcbiAgdmFyaWFibGVOYW1lcyA9IFsnZHknXTtcbiAgdW5pZm9ybXMgPVxuICAgICAgYGVmZmVjdGl2ZVhTaXplIDogdmVjMjxpMzI+LCBlZmZlY3RpdmVZU2l6ZSA6IHZlYzI8aTMyPiwgaGVpZ2h0U2NhbGUgOiBmMzIsIHdpZHRoU2NhbGUgOiBmMzIsXG4gICAgICAgaW52SGVpZ2h0U2NhbGUgOiBmMzIsIGludldpZHRoU2NhbGUgOiBmMzIsIHdpbkhlaWdodCA6IGkzMiwgd2luV2lkdGggOiBpMzIsYDtcbiAgd29ya2dyb3VwU2l6ZTogW251bWJlciwgbnVtYmVyLCBudW1iZXJdID0gWzY0LCAxLCAxXTtcbiAgYWxpZ25Db3JuZXJzOiBib29sZWFuO1xuICBzaXplID0gdHJ1ZTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICAgIGlucHV0U2hhcGU6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXJdLCBhbGlnbkNvcm5lcnM6IGJvb2xlYW4pIHtcbiAgICB0aGlzLm91dHB1dFNoYXBlID0gaW5wdXRTaGFwZTtcblxuICAgIHRoaXMuZGlzcGF0Y2hMYXlvdXQgPSBmbGF0RGlzcGF0Y2hMYXlvdXQodGhpcy5vdXRwdXRTaGFwZSk7XG4gICAgdGhpcy5kaXNwYXRjaCA9IGNvbXB1dGVEaXNwYXRjaChcbiAgICAgICAgdGhpcy5kaXNwYXRjaExheW91dCwgdGhpcy5vdXRwdXRTaGFwZSwgdGhpcy53b3JrZ3JvdXBTaXplKTtcblxuICAgIHRoaXMuYWxpZ25Db3JuZXJzID0gYWxpZ25Db3JuZXJzO1xuICAgIHRoaXMuc2hhZGVyS2V5ID0gYHJlc2l6ZUJpbGluZWFyQmFja3Byb3BfJHthbGlnbkNvcm5lcnN9YDtcbiAgfVxuXG4gIGdldFVzZXJDb2RlKCk6IHN0cmluZyB7XG4gICAgY29uc3QgdXNlckNvZGUgPSBgXG4gICAgICAke21haW4oJ2luZGV4Jyl9IHtcbiAgICAgICAgaWYgKGluZGV4IDwgdW5pZm9ybXMuc2l6ZSkge1xuICAgICAgICAgIGxldCBjb29yZHMgPSBnZXRPdXRwdXRDb29yZHMoKTtcbiAgICAgICAgICBsZXQgYiA9IGNvb3Jkc1swXTtcbiAgICAgICAgICBsZXQgZCA9IGNvb3Jkc1szXTtcbiAgICAgICAgICBsZXQgciA9IGNvb3Jkc1sxXTtcbiAgICAgICAgICBsZXQgYyA9IGNvb3Jkc1syXTtcblxuICAgICAgICAgIHZhciBhY2N1bXVsYXRvciA9IDAuMDtcblxuICAgICAgICAgIC8vIENvbXB1dGUgYm91bmRzIGZvciB3aGVyZSBpbiBkeSB3ZSB3aWxsIGxvb2tcbiAgICAgICAgICBsZXQgc3RhcnRSTGVycCA9IGZsb29yKGYzMihyKSAqIHVuaWZvcm1zLmludkhlaWdodFNjYWxlKTtcbiAgICAgICAgICBsZXQgc3RhcnREeVIgPSBpMzIoc3RhcnRSTGVycCAtIGYzMih1bmlmb3Jtcy53aW5IZWlnaHQgLyAyKSk7XG5cbiAgICAgICAgICBsZXQgc3RhcnRDTGVycCA9IGZsb29yKGYzMihjKSAqIHVuaWZvcm1zLmludldpZHRoU2NhbGUpO1xuICAgICAgICAgIGxldCBzdGFydER5QyA9IGkzMihzdGFydENMZXJwIC0gZjMyKHVuaWZvcm1zLndpbldpZHRoIC8gMikpO1xuXG4gICAgICAgICAgLy8gTG9vcCBvdmVyIGR5XG4gICAgICAgICAgZm9yICh2YXIgZHlST2Zmc2V0ID0gMDsgZHlST2Zmc2V0IDwgdW5pZm9ybXMud2luSGVpZ2h0OyBkeVJPZmZzZXQrKykge1xuICAgICAgICAgICAgbGV0IGR5UiA9IHN0YXJ0RHlSICsgZHlST2Zmc2V0O1xuXG4gICAgICAgICAgICAvLyBHdWFyZCBhZ2FpbnN0IHRoZSB3aW5kb3cgZXhjZWVkaW5nIHRoZSBib3VuZHMgb2YgZHlcbiAgICAgICAgICAgIGlmIChkeVIgPCAwIHx8IGR5UiA+PSB1bmlmb3Jtcy5keVNoYXBlWzFdKSB7XG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb3IgKHZhciBkeUNPZmZzZXQgPSAwOyBkeUNPZmZzZXQgPCB1bmlmb3Jtcy53aW5XaWR0aDsgZHlDT2Zmc2V0KyspIHtcbiAgICAgICAgICAgICAgbGV0IGR5QyA9IHN0YXJ0RHlDICsgZHlDT2Zmc2V0O1xuXG4gICAgICAgICAgICAgIC8vIEd1YXJkIGFnYWluc3QgdGhlIHdpbmRvdyBleGNlZWRpbmcgdGhlIGJvdW5kcyBvZiBkeVxuICAgICAgICAgICAgICBpZiAoZHlDIDwgMCB8fCBkeUMgPj0gdW5pZm9ybXMuZHlTaGFwZVsyXSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgbGV0IGR4UiA9IGYzMihkeVIpICogdW5pZm9ybXMuaGVpZ2h0U2NhbGU7XG4gICAgICAgICAgICAgIGxldCB0b3BEeFJJbmRleCA9IGkzMihmbG9vcihkeFIpKTtcbiAgICAgICAgICAgICAgbGV0IGJvdHRvbUR4UkluZGV4ID0gaTMyKG1pbihjZWlsKGR4UiksIGYzMih1bmlmb3Jtcy5vdXRTaGFwZVsxXSAtIDEpKSk7XG4gICAgICAgICAgICAgIGxldCBkeFJMZXJwID0gZHhSIC0gZjMyKHRvcER4UkluZGV4KTtcbiAgICAgICAgICAgICAgbGV0IGludmVyc2VEeFJMZXJwID0gMS4wIC0gZHhSTGVycDtcblxuICAgICAgICAgICAgICBsZXQgZHhDID0gZjMyKGR5QykgKiB1bmlmb3Jtcy53aWR0aFNjYWxlO1xuICAgICAgICAgICAgICBsZXQgbGVmdER4Q0luZGV4ID0gaTMyKGZsb29yKGR4QykpO1xuICAgICAgICAgICAgICBsZXQgcmlnaHREeENJbmRleCA9IGkzMihtaW4oY2VpbChkeEMpLCBmMzIodW5pZm9ybXMub3V0U2hhcGVbMl0gLSAxKSkpO1xuICAgICAgICAgICAgICBsZXQgZHhDTGVycCA9IGR4QyAtIGYzMihsZWZ0RHhDSW5kZXgpO1xuICAgICAgICAgICAgICBsZXQgaW52ZXJzZUR4Q0xlcnAgPSAxLjAgLSBkeENMZXJwO1xuXG4gICAgICAgICAgICAgIGlmIChyID09IHRvcER4UkluZGV4ICYmIGMgPT0gbGVmdER4Q0luZGV4KSB7XG4gICAgICAgICAgICAgICAgLy8gdG9wTGVmdFxuICAgICAgICAgICAgICAgIGFjY3VtdWxhdG9yICs9XG4gICAgICAgICAgICAgICAgICBnZXREeShiLCBkeVIsIGR5QywgZCkgKiBpbnZlcnNlRHhSTGVycCAqIGludmVyc2VEeENMZXJwO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgaWYgKHIgPT0gdG9wRHhSSW5kZXggJiYgYyA9PSByaWdodER4Q0luZGV4KSB7XG4gICAgICAgICAgICAgICAgLy8gdG9wUmlnaHRcbiAgICAgICAgICAgICAgICBhY2N1bXVsYXRvciArPSBnZXREeShiLCBkeVIsIGR5QywgZCkgKiBpbnZlcnNlRHhSTGVycCAqIGR4Q0xlcnA7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAociA9PSBib3R0b21EeFJJbmRleCAmJiBjID09IGxlZnREeENJbmRleCkge1xuICAgICAgICAgICAgICAgIC8vIGJvdHRvbUxlZnRcbiAgICAgICAgICAgICAgICBhY2N1bXVsYXRvciArPSBnZXREeShiLCBkeVIsIGR5QywgZCkgKiBkeFJMZXJwICogaW52ZXJzZUR4Q0xlcnA7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpZiAociA9PSBib3R0b21EeFJJbmRleCAmJiBjID09IHJpZ2h0RHhDSW5kZXgpIHtcbiAgICAgICAgICAgICAgICAvLyBib3R0b21SaWdodFxuICAgICAgICAgICAgICAgIGFjY3VtdWxhdG9yICs9IGdldER5KGIsIGR5UiwgZHlDLCBkKSAqIGR4UkxlcnAgKiBkeENMZXJwO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIEVuZCBsb29wIG92ZXIgZHlcblxuICAgICAgICAgIHNldE91dHB1dEF0SW5kZXgoaW5kZXgsIGFjY3VtdWxhdG9yKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIGA7XG4gICAgcmV0dXJuIHVzZXJDb2RlO1xuICB9XG59XG4iXX0=","/**\n * @license\n * Copyright 2023 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { ResizeBilinearGrad } from '@tensorflow/tfjs-core';\nimport { ResizeBilinearBackpropProgram } from '../resize_bilinear_backprop_webgpu';\nexport function resizeBilinearGrad(args) {\n    const { inputs, backend, attrs } = args;\n    const { images, dy } = inputs;\n    const { alignCorners } = attrs;\n    const [, xHeight, xWidth,] = images.shape;\n    const [, yHeight, yWidth] = dy.shape;\n    const effectiveXSize = [\n        (alignCorners && yHeight > 1) ? xHeight - 1 : xHeight,\n        (alignCorners && yWidth > 1) ? xWidth - 1 : xWidth\n    ];\n    const effectiveYSize = [\n        (alignCorners && yHeight > 1) ? yHeight - 1 : yHeight,\n        (alignCorners && yWidth > 1) ? yWidth - 1 : yWidth\n    ];\n    const heightScale = effectiveXSize[0] / effectiveYSize[0];\n    const widthScale = effectiveXSize[1] / effectiveYSize[1];\n    const invHeightScale = 1 / heightScale;\n    const invWidthScale = 1 / widthScale;\n    // This defines the size of the window of values around a particular\n    // index in dy that we want to search for contributions to dx.\n    const winHeight = (Math.ceil(invHeightScale) * 2) + 2;\n    const winWidth = (Math.ceil(invWidthScale) * 2) + 2;\n    const program = new ResizeBilinearBackpropProgram(images.shape, alignCorners);\n    const uniformData = [\n        { type: 'int32', data: effectiveXSize },\n        { type: 'int32', data: effectiveYSize },\n        { type: 'float32', data: [heightScale] },\n        { type: 'float32', data: [widthScale] },\n        { type: 'float32', data: [invHeightScale] },\n        { type: 'float32', data: [invWidthScale] },\n        { type: 'int32', data: [winHeight] }, { type: 'int32', data: [winWidth] }\n    ];\n    return backend.runWebGPUProgram(program, [dy], dy.dtype, uniformData);\n}\nexport const resizeBilinearGradConfig = {\n    kernelName: ResizeBilinearGrad,\n    backendName: 'webgpu',\n    kernelFunc: resizeBilinearGrad\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUmVzaXplQmlsaW5lYXJHcmFkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMva2VybmVscy9SZXNpemVCaWxpbmVhckdyYWQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUEyQixrQkFBa0IsRUFBZ0UsTUFBTSx1QkFBdUIsQ0FBQztBQUdsSixPQUFPLEVBQUMsNkJBQTZCLEVBQUMsTUFBTSxvQ0FBb0MsQ0FBQztBQUVqRixNQUFNLFVBQVUsa0JBQWtCLENBQUMsSUFJbEM7SUFDQyxNQUFNLEVBQUMsTUFBTSxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUMsR0FBRyxJQUFJLENBQUM7SUFDdEMsTUFBTSxFQUFDLE1BQU0sRUFBRSxFQUFFLEVBQUMsR0FBRyxNQUFNLENBQUM7SUFDNUIsTUFBTSxFQUFDLFlBQVksRUFBQyxHQUFHLEtBQUssQ0FBQztJQUU3QixNQUFNLENBQUMsRUFBRSxPQUFPLEVBQUUsTUFBTSxFQUFHLEdBQ3ZCLE1BQU0sQ0FBQyxLQUF5QyxDQUFDO0lBQ3JELE1BQU0sQ0FBQyxFQUFFLE9BQU8sRUFBRSxNQUFNLENBQUMsR0FBRyxFQUFFLENBQUMsS0FBeUMsQ0FBQztJQUV6RSxNQUFNLGNBQWMsR0FBcUI7UUFDdkMsQ0FBQyxZQUFZLElBQUksT0FBTyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPO1FBQ3JELENBQUMsWUFBWSxJQUFJLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTTtLQUNuRCxDQUFDO0lBRUYsTUFBTSxjQUFjLEdBQXFCO1FBQ3ZDLENBQUMsWUFBWSxJQUFJLE9BQU8sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTztRQUNyRCxDQUFDLFlBQVksSUFBSSxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU07S0FDbkQsQ0FBQztJQUVGLE1BQU0sV0FBVyxHQUFHLGNBQWMsQ0FBQyxDQUFDLENBQUMsR0FBRyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDMUQsTUFBTSxVQUFVLEdBQUcsY0FBYyxDQUFDLENBQUMsQ0FBQyxHQUFHLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUV6RCxNQUFNLGNBQWMsR0FBRyxDQUFDLEdBQUcsV0FBVyxDQUFDO0lBQ3ZDLE1BQU0sYUFBYSxHQUFHLENBQUMsR0FBRyxVQUFVLENBQUM7SUFFckMsb0VBQW9FO0lBQ3BFLDhEQUE4RDtJQUM5RCxNQUFNLFNBQVMsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ3RELE1BQU0sUUFBUSxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7SUFFcEQsTUFBTSxPQUFPLEdBQUcsSUFBSSw2QkFBNkIsQ0FDN0MsTUFBTSxDQUFDLEtBQXlDLEVBQUUsWUFBWSxDQUFDLENBQUM7SUFDcEUsTUFBTSxXQUFXLEdBQUc7UUFDbEIsRUFBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxjQUFjLEVBQUM7UUFDckMsRUFBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxjQUFjLEVBQUM7UUFDckMsRUFBQyxJQUFJLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxDQUFDLFdBQVcsQ0FBQyxFQUFDO1FBQ3RDLEVBQUMsSUFBSSxFQUFFLFNBQVMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxVQUFVLENBQUMsRUFBQztRQUNyQyxFQUFDLElBQUksRUFBRSxTQUFTLEVBQUUsSUFBSSxFQUFFLENBQUMsY0FBYyxDQUFDLEVBQUM7UUFDekMsRUFBQyxJQUFJLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxDQUFDLGFBQWEsQ0FBQyxFQUFDO1FBQ3hDLEVBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsQ0FBQyxTQUFTLENBQUMsRUFBQyxFQUFFLEVBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsQ0FBQyxRQUFRLENBQUMsRUFBQztLQUN0RSxDQUFDO0lBQ0YsT0FBTyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLEtBQUssRUFBRSxXQUFXLENBQUMsQ0FBQztBQUN4RSxDQUFDO0FBRUQsTUFBTSxDQUFDLE1BQU0sd0JBQXdCLEdBQWlCO0lBQ3BELFVBQVUsRUFBRSxrQkFBa0I7SUFDOUIsV0FBVyxFQUFFLFFBQVE7SUFDckIsVUFBVSxFQUFFLGtCQUEyQztDQUN4RCxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjMgR29vZ2xlIExMQy5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge0tlcm5lbENvbmZpZywgS2VybmVsRnVuYywgUmVzaXplQmlsaW5lYXJHcmFkLCBSZXNpemVCaWxpbmVhckdyYWRBdHRycywgUmVzaXplQmlsaW5lYXJHcmFkSW5wdXRzLCBUZW5zb3JJbmZvfSBmcm9tICdAdGVuc29yZmxvdy90ZmpzLWNvcmUnO1xuXG5pbXBvcnQge1dlYkdQVUJhY2tlbmR9IGZyb20gJy4uL2JhY2tlbmRfd2ViZ3B1JztcbmltcG9ydCB7UmVzaXplQmlsaW5lYXJCYWNrcHJvcFByb2dyYW19IGZyb20gJy4uL3Jlc2l6ZV9iaWxpbmVhcl9iYWNrcHJvcF93ZWJncHUnO1xuXG5leHBvcnQgZnVuY3Rpb24gcmVzaXplQmlsaW5lYXJHcmFkKGFyZ3M6IHtcbiAgaW5wdXRzOiBSZXNpemVCaWxpbmVhckdyYWRJbnB1dHMsXG4gIGJhY2tlbmQ6IFdlYkdQVUJhY2tlbmQsXG4gIGF0dHJzOiBSZXNpemVCaWxpbmVhckdyYWRBdHRyc1xufSk6IFRlbnNvckluZm8ge1xuICBjb25zdCB7aW5wdXRzLCBiYWNrZW5kLCBhdHRyc30gPSBhcmdzO1xuICBjb25zdCB7aW1hZ2VzLCBkeX0gPSBpbnB1dHM7XG4gIGNvbnN0IHthbGlnbkNvcm5lcnN9ID0gYXR0cnM7XG5cbiAgY29uc3QgWywgeEhlaWdodCwgeFdpZHRoLCBdID1cbiAgICAgIGltYWdlcy5zaGFwZSBhcyBbbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyXTtcbiAgY29uc3QgWywgeUhlaWdodCwgeVdpZHRoXSA9IGR5LnNoYXBlIGFzIFtudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXJdO1xuXG4gIGNvbnN0IGVmZmVjdGl2ZVhTaXplOiBbbnVtYmVyLCBudW1iZXJdID0gW1xuICAgIChhbGlnbkNvcm5lcnMgJiYgeUhlaWdodCA+IDEpID8geEhlaWdodCAtIDEgOiB4SGVpZ2h0LFxuICAgIChhbGlnbkNvcm5lcnMgJiYgeVdpZHRoID4gMSkgPyB4V2lkdGggLSAxIDogeFdpZHRoXG4gIF07XG5cbiAgY29uc3QgZWZmZWN0aXZlWVNpemU6IFtudW1iZXIsIG51bWJlcl0gPSBbXG4gICAgKGFsaWduQ29ybmVycyAmJiB5SGVpZ2h0ID4gMSkgPyB5SGVpZ2h0IC0gMSA6IHlIZWlnaHQsXG4gICAgKGFsaWduQ29ybmVycyAmJiB5V2lkdGggPiAxKSA/IHlXaWR0aCAtIDEgOiB5V2lkdGhcbiAgXTtcblxuICBjb25zdCBoZWlnaHRTY2FsZSA9IGVmZmVjdGl2ZVhTaXplWzBdIC8gZWZmZWN0aXZlWVNpemVbMF07XG4gIGNvbnN0IHdpZHRoU2NhbGUgPSBlZmZlY3RpdmVYU2l6ZVsxXSAvIGVmZmVjdGl2ZVlTaXplWzFdO1xuXG4gIGNvbnN0IGludkhlaWdodFNjYWxlID0gMSAvIGhlaWdodFNjYWxlO1xuICBjb25zdCBpbnZXaWR0aFNjYWxlID0gMSAvIHdpZHRoU2NhbGU7XG5cbiAgLy8gVGhpcyBkZWZpbmVzIHRoZSBzaXplIG9mIHRoZSB3aW5kb3cgb2YgdmFsdWVzIGFyb3VuZCBhIHBhcnRpY3VsYXJcbiAgLy8gaW5kZXggaW4gZHkgdGhhdCB3ZSB3YW50IHRvIHNlYXJjaCBmb3IgY29udHJpYnV0aW9ucyB0byBkeC5cbiAgY29uc3Qgd2luSGVpZ2h0ID0gKE1hdGguY2VpbChpbnZIZWlnaHRTY2FsZSkgKiAyKSArIDI7XG4gIGNvbnN0IHdpbldpZHRoID0gKE1hdGguY2VpbChpbnZXaWR0aFNjYWxlKSAqIDIpICsgMjtcblxuICBjb25zdCBwcm9ncmFtID0gbmV3IFJlc2l6ZUJpbGluZWFyQmFja3Byb3BQcm9ncmFtKFxuICAgICAgaW1hZ2VzLnNoYXBlIGFzIFtudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXJdLCBhbGlnbkNvcm5lcnMpO1xuICBjb25zdCB1bmlmb3JtRGF0YSA9IFtcbiAgICB7dHlwZTogJ2ludDMyJywgZGF0YTogZWZmZWN0aXZlWFNpemV9LFxuICAgIHt0eXBlOiAnaW50MzInLCBkYXRhOiBlZmZlY3RpdmVZU2l6ZX0sXG4gICAge3R5cGU6ICdmbG9hdDMyJywgZGF0YTogW2hlaWdodFNjYWxlXX0sXG4gICAge3R5cGU6ICdmbG9hdDMyJywgZGF0YTogW3dpZHRoU2NhbGVdfSxcbiAgICB7dHlwZTogJ2Zsb2F0MzInLCBkYXRhOiBbaW52SGVpZ2h0U2NhbGVdfSxcbiAgICB7dHlwZTogJ2Zsb2F0MzInLCBkYXRhOiBbaW52V2lkdGhTY2FsZV19LFxuICAgIHt0eXBlOiAnaW50MzInLCBkYXRhOiBbd2luSGVpZ2h0XX0sIHt0eXBlOiAnaW50MzInLCBkYXRhOiBbd2luV2lkdGhdfVxuICBdO1xuICByZXR1cm4gYmFja2VuZC5ydW5XZWJHUFVQcm9ncmFtKHByb2dyYW0sIFtkeV0sIGR5LmR0eXBlLCB1bmlmb3JtRGF0YSk7XG59XG5cbmV4cG9ydCBjb25zdCByZXNpemVCaWxpbmVhckdyYWRDb25maWc6IEtlcm5lbENvbmZpZyA9IHtcbiAga2VybmVsTmFtZTogUmVzaXplQmlsaW5lYXJHcmFkLFxuICBiYWNrZW5kTmFtZTogJ3dlYmdwdScsXG4gIGtlcm5lbEZ1bmM6IHJlc2l6ZUJpbGluZWFyR3JhZCBhcyB1bmtub3duIGFzIEtlcm5lbEZ1bmNcbn07XG4iXX0=","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { getMainHeaderString as main } from './webgpu_program';\nimport { computeDispatch, flatDispatchLayout } from './webgpu_util';\nexport class ResizeNearestNeighborProgram {\n    constructor(inputShape, newHeight, newWidth, halfPixelCenters) {\n        this.variableNames = ['x'];\n        this.uniforms = 'adjustHeightWidth : vec2<f32>, roundBase : f32,';\n        this.workgroupSize = [64, 1, 1];\n        this.size = true;\n        this.outputShape = [inputShape[0], newHeight, newWidth, inputShape[3]];\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize);\n        this.halfPixelCenters = halfPixelCenters;\n        this.shaderKey = `resizeNearest_${halfPixelCenters}`;\n    }\n    getUserCode() {\n        let sourceFracIndexRC;\n        if (this.halfPixelCenters) {\n            sourceFracIndexRC =\n                `max((vec2<f32>(rc) + vec2<f32>(0.5)) * effectiveInputOverOutputRatioRC` +\n                    `, vec2<f32>(0.0))`;\n        }\n        else {\n            sourceFracIndexRC = `vec2<f32>(rc) * effectiveInputOverOutputRatioRC`;\n        }\n        const userCode = `\n      ${main('index')} {\n        if (index < uniforms.size) {\n          let coords = getCoordsFromIndex(index);\n          let b = coords[0];\n          let d = coords[3];\n          let rc = coords.yz;\n\n          let effectiveInSize = vec2<f32>(\n            f32(uniforms.xShape.y) - uniforms.adjustHeightWidth[0],\n            f32(uniforms.xShape.z) - uniforms.adjustHeightWidth[1]);\n\n          let effectiveOutSize = vec2<f32>(\n            f32(uniforms.outShape.y) - uniforms.adjustHeightWidth[0],\n            f32(uniforms.outShape.z) - uniforms.adjustHeightWidth[1]);\n\n          let effectiveInputOverOutputRatioRC =\n              effectiveInSize / effectiveOutSize;\n\n          // Fractional source index\n          let sourceFracIndexRC = ${sourceFracIndexRC};\n\n          // Compute the coordinators of nearest neighbor point.\n          let inputShapeRC = vec2<f32>(f32(uniforms.xShape.y), f32(uniforms.xShape.z));\n          let sourceNearestRC = vec2<i32>(\n            min(inputShapeRC - 1.0, floor(sourceFracIndexRC + uniforms.roundBase)));\n          let newValue = getX(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n          setOutputAtIndex(index, newValue);\n        }\n      }\n    `;\n        return userCode;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVzaXplX25lYXJlc3RfbmVpZ2hib3Jfd2ViZ3B1LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMvcmVzaXplX25lYXJlc3RfbmVpZ2hib3Jfd2ViZ3B1LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sRUFBQyxtQkFBbUIsSUFBSSxJQUFJLEVBQWdCLE1BQU0sa0JBQWtCLENBQUM7QUFDNUUsT0FBTyxFQUFDLGVBQWUsRUFBRSxrQkFBa0IsRUFBQyxNQUFNLGVBQWUsQ0FBQztBQUVsRSxNQUFNLE9BQU8sNEJBQTRCO0lBV3ZDLFlBQ0ksVUFBNEMsRUFBRSxTQUFpQixFQUMvRCxRQUFnQixFQUFFLGdCQUF5QjtRQVIvQyxrQkFBYSxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDdEIsYUFBUSxHQUFHLGlEQUFpRCxDQUFDO1FBQzdELGtCQUFhLEdBQTZCLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUVyRCxTQUFJLEdBQUcsSUFBSSxDQUFDO1FBS1YsSUFBSSxDQUFDLFdBQVcsR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsRUFBRSxTQUFTLEVBQUUsUUFBUSxFQUFFLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBRXZFLElBQUksQ0FBQyxjQUFjLEdBQUcsa0JBQWtCLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBRTNELElBQUksQ0FBQyxRQUFRLEdBQUcsZUFBZSxDQUMzQixJQUFJLENBQUMsY0FBYyxFQUFFLElBQUksQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBRS9ELElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxnQkFBZ0IsQ0FBQztRQUN6QyxJQUFJLENBQUMsU0FBUyxHQUFHLGlCQUFpQixnQkFBZ0IsRUFBRSxDQUFDO0lBQ3ZELENBQUM7SUFFRCxXQUFXO1FBQ1QsSUFBSSxpQkFBeUIsQ0FBQztRQUM5QixJQUFJLElBQUksQ0FBQyxnQkFBZ0IsRUFBRTtZQUN6QixpQkFBaUI7Z0JBQ2Isd0VBQXdFO29CQUN4RSxtQkFBbUIsQ0FBQztTQUN6QjthQUFNO1lBQ0wsaUJBQWlCLEdBQUcsaURBQWlELENBQUM7U0FDdkU7UUFFRCxNQUFNLFFBQVEsR0FBRztRQUNiLElBQUksQ0FBQyxPQUFPLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0NBbUJlLGlCQUFpQjs7Ozs7Ozs7Ozs7S0FXaEQsQ0FBQztRQUNGLE9BQU8sUUFBUSxDQUFDO0lBQ2xCLENBQUM7Q0FDRiIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtnZXRNYWluSGVhZGVyU3RyaW5nIGFzIG1haW4sIFdlYkdQVVByb2dyYW19IGZyb20gJy4vd2ViZ3B1X3Byb2dyYW0nO1xuaW1wb3J0IHtjb21wdXRlRGlzcGF0Y2gsIGZsYXREaXNwYXRjaExheW91dH0gZnJvbSAnLi93ZWJncHVfdXRpbCc7XG5cbmV4cG9ydCBjbGFzcyBSZXNpemVOZWFyZXN0TmVpZ2hib3JQcm9ncmFtIGltcGxlbWVudHMgV2ViR1BVUHJvZ3JhbSB7XG4gIG91dHB1dFNoYXBlOiBudW1iZXJbXTtcbiAgc2hhZGVyS2V5OiBzdHJpbmc7XG4gIGRpc3BhdGNoTGF5b3V0OiB7eDogbnVtYmVyW119O1xuICBkaXNwYXRjaDogW251bWJlciwgbnVtYmVyLCBudW1iZXJdO1xuICB2YXJpYWJsZU5hbWVzID0gWyd4J107XG4gIHVuaWZvcm1zID0gJ2FkanVzdEhlaWdodFdpZHRoIDogdmVjMjxmMzI+LCByb3VuZEJhc2UgOiBmMzIsJztcbiAgd29ya2dyb3VwU2l6ZTogW251bWJlciwgbnVtYmVyLCBudW1iZXJdID0gWzY0LCAxLCAxXTtcbiAgaGFsZlBpeGVsQ2VudGVyczogYm9vbGVhbjtcbiAgc2l6ZSA9IHRydWU7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgICBpbnB1dFNoYXBlOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyXSwgbmV3SGVpZ2h0OiBudW1iZXIsXG4gICAgICBuZXdXaWR0aDogbnVtYmVyLCBoYWxmUGl4ZWxDZW50ZXJzOiBib29sZWFuKSB7XG4gICAgdGhpcy5vdXRwdXRTaGFwZSA9IFtpbnB1dFNoYXBlWzBdLCBuZXdIZWlnaHQsIG5ld1dpZHRoLCBpbnB1dFNoYXBlWzNdXTtcblxuICAgIHRoaXMuZGlzcGF0Y2hMYXlvdXQgPSBmbGF0RGlzcGF0Y2hMYXlvdXQodGhpcy5vdXRwdXRTaGFwZSk7XG5cbiAgICB0aGlzLmRpc3BhdGNoID0gY29tcHV0ZURpc3BhdGNoKFxuICAgICAgICB0aGlzLmRpc3BhdGNoTGF5b3V0LCB0aGlzLm91dHB1dFNoYXBlLCB0aGlzLndvcmtncm91cFNpemUpO1xuXG4gICAgdGhpcy5oYWxmUGl4ZWxDZW50ZXJzID0gaGFsZlBpeGVsQ2VudGVycztcbiAgICB0aGlzLnNoYWRlcktleSA9IGByZXNpemVOZWFyZXN0XyR7aGFsZlBpeGVsQ2VudGVyc31gO1xuICB9XG5cbiAgZ2V0VXNlckNvZGUoKTogc3RyaW5nIHtcbiAgICBsZXQgc291cmNlRnJhY0luZGV4UkM6IHN0cmluZztcbiAgICBpZiAodGhpcy5oYWxmUGl4ZWxDZW50ZXJzKSB7XG4gICAgICBzb3VyY2VGcmFjSW5kZXhSQyA9XG4gICAgICAgICAgYG1heCgodmVjMjxmMzI+KHJjKSArIHZlYzI8ZjMyPigwLjUpKSAqIGVmZmVjdGl2ZUlucHV0T3Zlck91dHB1dFJhdGlvUkNgICtcbiAgICAgICAgICBgLCB2ZWMyPGYzMj4oMC4wKSlgO1xuICAgIH0gZWxzZSB7XG4gICAgICBzb3VyY2VGcmFjSW5kZXhSQyA9IGB2ZWMyPGYzMj4ocmMpICogZWZmZWN0aXZlSW5wdXRPdmVyT3V0cHV0UmF0aW9SQ2A7XG4gICAgfVxuXG4gICAgY29uc3QgdXNlckNvZGUgPSBgXG4gICAgICAke21haW4oJ2luZGV4Jyl9IHtcbiAgICAgICAgaWYgKGluZGV4IDwgdW5pZm9ybXMuc2l6ZSkge1xuICAgICAgICAgIGxldCBjb29yZHMgPSBnZXRDb29yZHNGcm9tSW5kZXgoaW5kZXgpO1xuICAgICAgICAgIGxldCBiID0gY29vcmRzWzBdO1xuICAgICAgICAgIGxldCBkID0gY29vcmRzWzNdO1xuICAgICAgICAgIGxldCByYyA9IGNvb3Jkcy55ejtcblxuICAgICAgICAgIGxldCBlZmZlY3RpdmVJblNpemUgPSB2ZWMyPGYzMj4oXG4gICAgICAgICAgICBmMzIodW5pZm9ybXMueFNoYXBlLnkpIC0gdW5pZm9ybXMuYWRqdXN0SGVpZ2h0V2lkdGhbMF0sXG4gICAgICAgICAgICBmMzIodW5pZm9ybXMueFNoYXBlLnopIC0gdW5pZm9ybXMuYWRqdXN0SGVpZ2h0V2lkdGhbMV0pO1xuXG4gICAgICAgICAgbGV0IGVmZmVjdGl2ZU91dFNpemUgPSB2ZWMyPGYzMj4oXG4gICAgICAgICAgICBmMzIodW5pZm9ybXMub3V0U2hhcGUueSkgLSB1bmlmb3Jtcy5hZGp1c3RIZWlnaHRXaWR0aFswXSxcbiAgICAgICAgICAgIGYzMih1bmlmb3Jtcy5vdXRTaGFwZS56KSAtIHVuaWZvcm1zLmFkanVzdEhlaWdodFdpZHRoWzFdKTtcblxuICAgICAgICAgIGxldCBlZmZlY3RpdmVJbnB1dE92ZXJPdXRwdXRSYXRpb1JDID1cbiAgICAgICAgICAgICAgZWZmZWN0aXZlSW5TaXplIC8gZWZmZWN0aXZlT3V0U2l6ZTtcblxuICAgICAgICAgIC8vIEZyYWN0aW9uYWwgc291cmNlIGluZGV4XG4gICAgICAgICAgbGV0IHNvdXJjZUZyYWNJbmRleFJDID0gJHtzb3VyY2VGcmFjSW5kZXhSQ307XG5cbiAgICAgICAgICAvLyBDb21wdXRlIHRoZSBjb29yZGluYXRvcnMgb2YgbmVhcmVzdCBuZWlnaGJvciBwb2ludC5cbiAgICAgICAgICBsZXQgaW5wdXRTaGFwZVJDID0gdmVjMjxmMzI+KGYzMih1bmlmb3Jtcy54U2hhcGUueSksIGYzMih1bmlmb3Jtcy54U2hhcGUueikpO1xuICAgICAgICAgIGxldCBzb3VyY2VOZWFyZXN0UkMgPSB2ZWMyPGkzMj4oXG4gICAgICAgICAgICBtaW4oaW5wdXRTaGFwZVJDIC0gMS4wLCBmbG9vcihzb3VyY2VGcmFjSW5kZXhSQyArIHVuaWZvcm1zLnJvdW5kQmFzZSkpKTtcbiAgICAgICAgICBsZXQgbmV3VmFsdWUgPSBnZXRYKGIsIHNvdXJjZU5lYXJlc3RSQy54LCBzb3VyY2VOZWFyZXN0UkMueSwgZCk7XG5cbiAgICAgICAgICBzZXRPdXRwdXRBdEluZGV4KGluZGV4LCBuZXdWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICBgO1xuICAgIHJldHVybiB1c2VyQ29kZTtcbiAgfVxufVxuIl19","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { ResizeNearestNeighbor } from '@tensorflow/tfjs-core';\nimport { ResizeNearestNeighborProgram } from '../resize_nearest_neighbor_webgpu';\nexport function resizeNearestNeighbor(args) {\n    const { inputs, backend, attrs } = args;\n    const { images } = inputs;\n    const { alignCorners, halfPixelCenters, size } = attrs;\n    const [newHeight, newWidth] = size;\n    const adjustHeight = alignCorners && newHeight > 1 ? 1.0 : 0.0;\n    const adjustWidth = alignCorners && newWidth > 1 ? 1.0 : 0.0;\n    // When align corners is false, we rounds the value with floor.\n    const roundBase = alignCorners ? 0.5 : 0.0;\n    const uniformData = [\n        { type: 'float32', data: [adjustHeight, adjustWidth] },\n        { type: 'float32', data: [roundBase] }\n    ];\n    const program = new ResizeNearestNeighborProgram(images.shape, newHeight, newWidth, halfPixelCenters);\n    return backend.runWebGPUProgram(program, [images], images.dtype, uniformData);\n}\nexport const resizeNearestNeighborConfig = {\n    kernelName: ResizeNearestNeighbor,\n    backendName: 'webgpu',\n    kernelFunc: resizeNearestNeighbor\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUmVzaXplTmVhcmVzdE5laWdoYm9yLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMva2VybmVscy9SZXNpemVOZWFyZXN0TmVpZ2hib3IudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUEyQixxQkFBcUIsRUFBc0UsTUFBTSx1QkFBdUIsQ0FBQztBQUczSixPQUFPLEVBQUMsNEJBQTRCLEVBQUMsTUFBTSxtQ0FBbUMsQ0FBQztBQUUvRSxNQUFNLFVBQVUscUJBQXFCLENBQUMsSUFJckM7SUFDQyxNQUFNLEVBQUMsTUFBTSxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUMsR0FBRyxJQUFJLENBQUM7SUFDdEMsTUFBTSxFQUFDLE1BQU0sRUFBQyxHQUFHLE1BQU0sQ0FBQztJQUN4QixNQUFNLEVBQUMsWUFBWSxFQUFFLGdCQUFnQixFQUFFLElBQUksRUFBQyxHQUFHLEtBQUssQ0FBQztJQUVyRCxNQUFNLENBQUMsU0FBUyxFQUFFLFFBQVEsQ0FBQyxHQUFHLElBQUksQ0FBQztJQUNuQyxNQUFNLFlBQVksR0FBRyxZQUFZLElBQUksU0FBUyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUM7SUFDL0QsTUFBTSxXQUFXLEdBQUcsWUFBWSxJQUFJLFFBQVEsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDO0lBQzdELCtEQUErRDtJQUMvRCxNQUFNLFNBQVMsR0FBRyxZQUFZLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDO0lBQzNDLE1BQU0sV0FBVyxHQUFHO1FBQ2xCLEVBQUMsSUFBSSxFQUFFLFNBQVMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxZQUFZLEVBQUUsV0FBVyxDQUFDLEVBQUM7UUFDcEQsRUFBQyxJQUFJLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxDQUFDLFNBQVMsQ0FBQyxFQUFDO0tBQ3JDLENBQUM7SUFFRixNQUFNLE9BQU8sR0FBRyxJQUFJLDRCQUE0QixDQUM1QyxNQUFNLENBQUMsS0FBeUMsRUFBRSxTQUFTLEVBQUUsUUFBUSxFQUNyRSxnQkFBZ0IsQ0FBQyxDQUFDO0lBQ3RCLE9BQU8sT0FBTyxDQUFDLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxDQUFDLE1BQU0sQ0FBQyxFQUFFLE1BQU0sQ0FBQyxLQUFLLEVBQUUsV0FBVyxDQUFDLENBQUM7QUFDaEYsQ0FBQztBQUVELE1BQU0sQ0FBQyxNQUFNLDJCQUEyQixHQUFpQjtJQUN2RCxVQUFVLEVBQUUscUJBQXFCO0lBQ2pDLFdBQVcsRUFBRSxRQUFRO0lBQ3JCLFVBQVUsRUFBRSxxQkFBOEM7Q0FDM0QsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtLZXJuZWxDb25maWcsIEtlcm5lbEZ1bmMsIFJlc2l6ZU5lYXJlc3ROZWlnaGJvciwgUmVzaXplTmVhcmVzdE5laWdoYm9yQXR0cnMsIFJlc2l6ZU5lYXJlc3ROZWlnaGJvcklucHV0cywgVGVuc29ySW5mb30gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcblxuaW1wb3J0IHtXZWJHUFVCYWNrZW5kfSBmcm9tICcuLi9iYWNrZW5kX3dlYmdwdSc7XG5pbXBvcnQge1Jlc2l6ZU5lYXJlc3ROZWlnaGJvclByb2dyYW19IGZyb20gJy4uL3Jlc2l6ZV9uZWFyZXN0X25laWdoYm9yX3dlYmdwdSc7XG5cbmV4cG9ydCBmdW5jdGlvbiByZXNpemVOZWFyZXN0TmVpZ2hib3IoYXJnczoge1xuICBpbnB1dHM6IFJlc2l6ZU5lYXJlc3ROZWlnaGJvcklucHV0cyxcbiAgYmFja2VuZDogV2ViR1BVQmFja2VuZCxcbiAgYXR0cnM6IFJlc2l6ZU5lYXJlc3ROZWlnaGJvckF0dHJzXG59KTogVGVuc29ySW5mbyB7XG4gIGNvbnN0IHtpbnB1dHMsIGJhY2tlbmQsIGF0dHJzfSA9IGFyZ3M7XG4gIGNvbnN0IHtpbWFnZXN9ID0gaW5wdXRzO1xuICBjb25zdCB7YWxpZ25Db3JuZXJzLCBoYWxmUGl4ZWxDZW50ZXJzLCBzaXplfSA9IGF0dHJzO1xuXG4gIGNvbnN0IFtuZXdIZWlnaHQsIG5ld1dpZHRoXSA9IHNpemU7XG4gIGNvbnN0IGFkanVzdEhlaWdodCA9IGFsaWduQ29ybmVycyAmJiBuZXdIZWlnaHQgPiAxID8gMS4wIDogMC4wO1xuICBjb25zdCBhZGp1c3RXaWR0aCA9IGFsaWduQ29ybmVycyAmJiBuZXdXaWR0aCA+IDEgPyAxLjAgOiAwLjA7XG4gIC8vIFdoZW4gYWxpZ24gY29ybmVycyBpcyBmYWxzZSwgd2Ugcm91bmRzIHRoZSB2YWx1ZSB3aXRoIGZsb29yLlxuICBjb25zdCByb3VuZEJhc2UgPSBhbGlnbkNvcm5lcnMgPyAwLjUgOiAwLjA7XG4gIGNvbnN0IHVuaWZvcm1EYXRhID0gW1xuICAgIHt0eXBlOiAnZmxvYXQzMicsIGRhdGE6IFthZGp1c3RIZWlnaHQsIGFkanVzdFdpZHRoXX0sXG4gICAge3R5cGU6ICdmbG9hdDMyJywgZGF0YTogW3JvdW5kQmFzZV19XG4gIF07XG5cbiAgY29uc3QgcHJvZ3JhbSA9IG5ldyBSZXNpemVOZWFyZXN0TmVpZ2hib3JQcm9ncmFtKFxuICAgICAgaW1hZ2VzLnNoYXBlIGFzIFtudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXJdLCBuZXdIZWlnaHQsIG5ld1dpZHRoLFxuICAgICAgaGFsZlBpeGVsQ2VudGVycyk7XG4gIHJldHVybiBiYWNrZW5kLnJ1bldlYkdQVVByb2dyYW0ocHJvZ3JhbSwgW2ltYWdlc10sIGltYWdlcy5kdHlwZSwgdW5pZm9ybURhdGEpO1xufVxuXG5leHBvcnQgY29uc3QgcmVzaXplTmVhcmVzdE5laWdoYm9yQ29uZmlnOiBLZXJuZWxDb25maWcgPSB7XG4gIGtlcm5lbE5hbWU6IFJlc2l6ZU5lYXJlc3ROZWlnaGJvcixcbiAgYmFja2VuZE5hbWU6ICd3ZWJncHUnLFxuICBrZXJuZWxGdW5jOiByZXNpemVOZWFyZXN0TmVpZ2hib3IgYXMgdW5rbm93biBhcyBLZXJuZWxGdW5jXG59O1xuIl19","/**\n * @license\n * Copyright 2023 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { getMainHeaderString as main } from './webgpu_program';\nimport { computeDispatch, flatDispatchLayout } from './webgpu_util';\nexport class ResizeNearestNeigborBackpropProgram {\n    constructor(inputShape, alignCorners) {\n        this.variableNames = ['dy'];\n        this.uniforms = `effectiveXSize : vec2<i32>, effectiveYSize : vec2<i32>, invHeightScale : f32, invWidthScale : f32,\n       winHeight : i32, winWidth : i32,`;\n        this.workgroupSize = [64, 1, 1];\n        this.size = true;\n        this.outputShape = inputShape;\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize);\n        this.alignCorners = alignCorners;\n        this.shaderKey = `resizeNearestNeigborBackprop_${alignCorners}`;\n    }\n    getUserCode() {\n        const userCode = `\n      ${main('index')} {\n        if (index < uniforms.size) {\n          let coords = getOutputCoords();\n          let b = coords[0];\n          let d = coords[3];\n          let r = coords[1];\n          let c = coords[2];\n\n          var accumulator = 0.0;\n\n          // Compute bounds for where in dy we will look\n          let startRLerp = floor(f32(r) * uniforms.invHeightScale);\n          let startDyR = i32(floor(startRLerp - f32(uniforms.winHeight / 2)));\n\n          let startCLerp = floor(f32(c) * uniforms.invWidthScale);\n          let startDyC = i32(floor(startCLerp - f32(uniforms.winWidth / 2)));\n\n          // Loop over dy\n          for (var dyROffset = 0; dyROffset < uniforms.winHeight; dyROffset++) {\n            let dyR = startDyR + dyROffset;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyR < 0 || dyR >= uniforms.dyShape[1]) {\n              continue;\n            }\n\n            for (var dyCOffset = 0; dyCOffset < uniforms.winWidth; dyCOffset++) {\n              let dyC = startDyC + dyCOffset;\n\n              // Guard against the window exceeding the bounds of dy\n              if (dyC < 0 || dyC >= uniforms.dyShape[2]) {\n                continue;\n              }\n\n              let sourceFracRow = f32(uniforms.effectiveXSize[0]) *\n                  (f32(dyR) / f32(uniforms.effectiveYSize[0]));\n\n              let sourceFracCol = f32(uniforms.effectiveXSize[1]) *\n                  (f32(dyC) / f32(uniforms.effectiveYSize[1]));\n\n              let sourceNearestRow =\n                  i32(min(f32(uniforms.outShape[1] - 1),\n                  ${this.alignCorners ? 'floor(sourceFracRow + 0.5)' :\n            'floor(sourceFracRow)'}));\n\n              let sourceNearestCol =\n                  i32(min(f32(uniforms.outShape[2] - 1),\n                  ${this.alignCorners ? 'floor(sourceFracCol + 0.5)' :\n            'floor(sourceFracCol)'}));\n\n              if (r == sourceNearestRow && c == sourceNearestCol) {\n                accumulator += getDy(b, dyR, dyC, d);\n              }\n            }\n          }\n          // End loop over dy\n\n          setOutputAtIndex(index, accumulator);\n        }\n      }\n    `;\n        return userCode;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVzaXplX25lYXJlc3RfbmVpZ2hib3JfYmFja3Byb3Bfd2ViZ3B1LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMvcmVzaXplX25lYXJlc3RfbmVpZ2hib3JfYmFja3Byb3Bfd2ViZ3B1LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sRUFBQyxtQkFBbUIsSUFBSSxJQUFJLEVBQWdCLE1BQU0sa0JBQWtCLENBQUM7QUFDNUUsT0FBTyxFQUFDLGVBQWUsRUFBRSxrQkFBa0IsRUFBQyxNQUFNLGVBQWUsQ0FBQztBQUVsRSxNQUFNLE9BQU8sbUNBQW1DO0lBYTlDLFlBQ0ksVUFBNEMsRUFBRSxZQUFxQjtRQVR2RSxrQkFBYSxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDdkIsYUFBUSxHQUNKO3dDQUNrQyxDQUFDO1FBQ3ZDLGtCQUFhLEdBQTZCLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUVyRCxTQUFJLEdBQUcsSUFBSSxDQUFDO1FBSVYsSUFBSSxDQUFDLFdBQVcsR0FBRyxVQUFVLENBQUM7UUFFOUIsSUFBSSxDQUFDLGNBQWMsR0FBRyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDM0QsSUFBSSxDQUFDLFFBQVEsR0FBRyxlQUFlLENBQzNCLElBQUksQ0FBQyxjQUFjLEVBQUUsSUFBSSxDQUFDLFdBQVcsRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7UUFFL0QsSUFBSSxDQUFDLFlBQVksR0FBRyxZQUFZLENBQUM7UUFDakMsSUFBSSxDQUFDLFNBQVMsR0FBRyxnQ0FBZ0MsWUFBWSxFQUFFLENBQUM7SUFDbEUsQ0FBQztJQUVELFdBQVc7UUFDVCxNQUFNLFFBQVEsR0FBRztRQUNiLElBQUksQ0FBQyxPQUFPLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkEyQ2IsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsNEJBQTRCLENBQUMsQ0FBQztZQUM5QixzQkFBc0I7Ozs7b0JBSzFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLDRCQUE0QixDQUFDLENBQUM7WUFDOUIsc0JBQXNCOzs7Ozs7Ozs7Ozs7S0FZN0MsQ0FBQztRQUNGLE9BQU8sUUFBUSxDQUFDO0lBQ2xCLENBQUM7Q0FDRiIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTEMuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtnZXRNYWluSGVhZGVyU3RyaW5nIGFzIG1haW4sIFdlYkdQVVByb2dyYW19IGZyb20gJy4vd2ViZ3B1X3Byb2dyYW0nO1xuaW1wb3J0IHtjb21wdXRlRGlzcGF0Y2gsIGZsYXREaXNwYXRjaExheW91dH0gZnJvbSAnLi93ZWJncHVfdXRpbCc7XG5cbmV4cG9ydCBjbGFzcyBSZXNpemVOZWFyZXN0TmVpZ2JvckJhY2twcm9wUHJvZ3JhbSBpbXBsZW1lbnRzIFdlYkdQVVByb2dyYW0ge1xuICBvdXRwdXRTaGFwZTogbnVtYmVyW107XG4gIHNoYWRlcktleTogc3RyaW5nO1xuICBkaXNwYXRjaExheW91dDoge3g6IG51bWJlcltdfTtcbiAgZGlzcGF0Y2g6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXTtcbiAgdmFyaWFibGVOYW1lcyA9IFsnZHknXTtcbiAgdW5pZm9ybXMgPVxuICAgICAgYGVmZmVjdGl2ZVhTaXplIDogdmVjMjxpMzI+LCBlZmZlY3RpdmVZU2l6ZSA6IHZlYzI8aTMyPiwgaW52SGVpZ2h0U2NhbGUgOiBmMzIsIGludldpZHRoU2NhbGUgOiBmMzIsXG4gICAgICAgd2luSGVpZ2h0IDogaTMyLCB3aW5XaWR0aCA6IGkzMixgO1xuICB3b3JrZ3JvdXBTaXplOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl0gPSBbNjQsIDEsIDFdO1xuICBhbGlnbkNvcm5lcnM6IGJvb2xlYW47XG4gIHNpemUgPSB0cnVlO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgICAgaW5wdXRTaGFwZTogW251bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcl0sIGFsaWduQ29ybmVyczogYm9vbGVhbikge1xuICAgIHRoaXMub3V0cHV0U2hhcGUgPSBpbnB1dFNoYXBlO1xuXG4gICAgdGhpcy5kaXNwYXRjaExheW91dCA9IGZsYXREaXNwYXRjaExheW91dCh0aGlzLm91dHB1dFNoYXBlKTtcbiAgICB0aGlzLmRpc3BhdGNoID0gY29tcHV0ZURpc3BhdGNoKFxuICAgICAgICB0aGlzLmRpc3BhdGNoTGF5b3V0LCB0aGlzLm91dHB1dFNoYXBlLCB0aGlzLndvcmtncm91cFNpemUpO1xuXG4gICAgdGhpcy5hbGlnbkNvcm5lcnMgPSBhbGlnbkNvcm5lcnM7XG4gICAgdGhpcy5zaGFkZXJLZXkgPSBgcmVzaXplTmVhcmVzdE5laWdib3JCYWNrcHJvcF8ke2FsaWduQ29ybmVyc31gO1xuICB9XG5cbiAgZ2V0VXNlckNvZGUoKTogc3RyaW5nIHtcbiAgICBjb25zdCB1c2VyQ29kZSA9IGBcbiAgICAgICR7bWFpbignaW5kZXgnKX0ge1xuICAgICAgICBpZiAoaW5kZXggPCB1bmlmb3Jtcy5zaXplKSB7XG4gICAgICAgICAgbGV0IGNvb3JkcyA9IGdldE91dHB1dENvb3JkcygpO1xuICAgICAgICAgIGxldCBiID0gY29vcmRzWzBdO1xuICAgICAgICAgIGxldCBkID0gY29vcmRzWzNdO1xuICAgICAgICAgIGxldCByID0gY29vcmRzWzFdO1xuICAgICAgICAgIGxldCBjID0gY29vcmRzWzJdO1xuXG4gICAgICAgICAgdmFyIGFjY3VtdWxhdG9yID0gMC4wO1xuXG4gICAgICAgICAgLy8gQ29tcHV0ZSBib3VuZHMgZm9yIHdoZXJlIGluIGR5IHdlIHdpbGwgbG9va1xuICAgICAgICAgIGxldCBzdGFydFJMZXJwID0gZmxvb3IoZjMyKHIpICogdW5pZm9ybXMuaW52SGVpZ2h0U2NhbGUpO1xuICAgICAgICAgIGxldCBzdGFydER5UiA9IGkzMihmbG9vcihzdGFydFJMZXJwIC0gZjMyKHVuaWZvcm1zLndpbkhlaWdodCAvIDIpKSk7XG5cbiAgICAgICAgICBsZXQgc3RhcnRDTGVycCA9IGZsb29yKGYzMihjKSAqIHVuaWZvcm1zLmludldpZHRoU2NhbGUpO1xuICAgICAgICAgIGxldCBzdGFydER5QyA9IGkzMihmbG9vcihzdGFydENMZXJwIC0gZjMyKHVuaWZvcm1zLndpbldpZHRoIC8gMikpKTtcblxuICAgICAgICAgIC8vIExvb3Agb3ZlciBkeVxuICAgICAgICAgIGZvciAodmFyIGR5Uk9mZnNldCA9IDA7IGR5Uk9mZnNldCA8IHVuaWZvcm1zLndpbkhlaWdodDsgZHlST2Zmc2V0KyspIHtcbiAgICAgICAgICAgIGxldCBkeVIgPSBzdGFydER5UiArIGR5Uk9mZnNldDtcblxuICAgICAgICAgICAgLy8gR3VhcmQgYWdhaW5zdCB0aGUgd2luZG93IGV4Y2VlZGluZyB0aGUgYm91bmRzIG9mIGR5XG4gICAgICAgICAgICBpZiAoZHlSIDwgMCB8fCBkeVIgPj0gdW5pZm9ybXMuZHlTaGFwZVsxXSkge1xuICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9yICh2YXIgZHlDT2Zmc2V0ID0gMDsgZHlDT2Zmc2V0IDwgdW5pZm9ybXMud2luV2lkdGg7IGR5Q09mZnNldCsrKSB7XG4gICAgICAgICAgICAgIGxldCBkeUMgPSBzdGFydER5QyArIGR5Q09mZnNldDtcblxuICAgICAgICAgICAgICAvLyBHdWFyZCBhZ2FpbnN0IHRoZSB3aW5kb3cgZXhjZWVkaW5nIHRoZSBib3VuZHMgb2YgZHlcbiAgICAgICAgICAgICAgaWYgKGR5QyA8IDAgfHwgZHlDID49IHVuaWZvcm1zLmR5U2hhcGVbMl0pIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGxldCBzb3VyY2VGcmFjUm93ID0gZjMyKHVuaWZvcm1zLmVmZmVjdGl2ZVhTaXplWzBdKSAqXG4gICAgICAgICAgICAgICAgICAoZjMyKGR5UikgLyBmMzIodW5pZm9ybXMuZWZmZWN0aXZlWVNpemVbMF0pKTtcblxuICAgICAgICAgICAgICBsZXQgc291cmNlRnJhY0NvbCA9IGYzMih1bmlmb3Jtcy5lZmZlY3RpdmVYU2l6ZVsxXSkgKlxuICAgICAgICAgICAgICAgICAgKGYzMihkeUMpIC8gZjMyKHVuaWZvcm1zLmVmZmVjdGl2ZVlTaXplWzFdKSk7XG5cbiAgICAgICAgICAgICAgbGV0IHNvdXJjZU5lYXJlc3RSb3cgPVxuICAgICAgICAgICAgICAgICAgaTMyKG1pbihmMzIodW5pZm9ybXMub3V0U2hhcGVbMV0gLSAxKSxcbiAgICAgICAgICAgICAgICAgICR7XG4gICAgICAgIHRoaXMuYWxpZ25Db3JuZXJzID8gJ2Zsb29yKHNvdXJjZUZyYWNSb3cgKyAwLjUpJyA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2Zsb29yKHNvdXJjZUZyYWNSb3cpJ30pKTtcblxuICAgICAgICAgICAgICBsZXQgc291cmNlTmVhcmVzdENvbCA9XG4gICAgICAgICAgICAgICAgICBpMzIobWluKGYzMih1bmlmb3Jtcy5vdXRTaGFwZVsyXSAtIDEpLFxuICAgICAgICAgICAgICAgICAgJHtcbiAgICAgICAgdGhpcy5hbGlnbkNvcm5lcnMgPyAnZmxvb3Ioc291cmNlRnJhY0NvbCArIDAuNSknIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZmxvb3Ioc291cmNlRnJhY0NvbCknfSkpO1xuXG4gICAgICAgICAgICAgIGlmIChyID09IHNvdXJjZU5lYXJlc3RSb3cgJiYgYyA9PSBzb3VyY2VOZWFyZXN0Q29sKSB7XG4gICAgICAgICAgICAgICAgYWNjdW11bGF0b3IgKz0gZ2V0RHkoYiwgZHlSLCBkeUMsIGQpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIEVuZCBsb29wIG92ZXIgZHlcblxuICAgICAgICAgIHNldE91dHB1dEF0SW5kZXgoaW5kZXgsIGFjY3VtdWxhdG9yKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIGA7XG4gICAgcmV0dXJuIHVzZXJDb2RlO1xuICB9XG59XG4iXX0=","/**\n * @license\n * Copyright 2023 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { ResizeNearestNeighborGrad } from '@tensorflow/tfjs-core';\nimport { ResizeNearestNeigborBackpropProgram } from '../resize_nearest_neighbor_backprop_webgpu';\nexport function resizeNearestNeighborGrad(args) {\n    const { inputs, backend, attrs } = args;\n    const { images, dy } = inputs;\n    const { alignCorners } = attrs;\n    const [, xHeight, xWidth] = images.shape;\n    const [, yHeight, yWidth] = dy.shape;\n    const effectiveXSize = [\n        (alignCorners && yHeight > 1) ? xHeight - 1 : xHeight,\n        (alignCorners && yWidth > 1) ? xWidth - 1 : xWidth\n    ];\n    const effectiveYSize = [\n        (alignCorners && yHeight > 1) ? yHeight - 1 : yHeight,\n        (alignCorners && yWidth > 1) ? yWidth - 1 : yWidth\n    ];\n    const heightScale = effectiveXSize[0] / effectiveYSize[0];\n    const widthScale = effectiveXSize[1] / effectiveYSize[1];\n    const invHeightScale = 1 / heightScale;\n    const invWidthScale = 1 / widthScale;\n    // This defines the size of the window of values around a particular\n    // index in dy that we want to search for contributions to dx.\n    const winHeight = (Math.ceil(invHeightScale) * 2) + 2;\n    const winWidth = (Math.ceil(invWidthScale) * 2) + 2;\n    const program = new ResizeNearestNeigborBackpropProgram(images.shape, alignCorners);\n    const uniformData = [\n        { type: 'int32', data: effectiveXSize },\n        { type: 'int32', data: effectiveYSize },\n        { type: 'float32', data: [invHeightScale] },\n        { type: 'float32', data: [invWidthScale] },\n        { type: 'int32', data: [winHeight] }, { type: 'int32', data: [winWidth] }\n    ];\n    return backend.runWebGPUProgram(program, [dy], dy.dtype, uniformData);\n}\nexport const resizeNearestNeighborGradConfig = {\n    kernelName: ResizeNearestNeighborGrad,\n    backendName: 'webgpu',\n    kernelFunc: resizeNearestNeighborGrad\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUmVzaXplTmVhcmVzdE5laWdoYm9yR3JhZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2tlcm5lbHMvUmVzaXplTmVhcmVzdE5laWdoYm9yR3JhZC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQTJCLHlCQUF5QixFQUE4RSxNQUFNLHVCQUF1QixDQUFDO0FBR3ZLLE9BQU8sRUFBQyxtQ0FBbUMsRUFBQyxNQUFNLDRDQUE0QyxDQUFDO0FBRS9GLE1BQU0sVUFBVSx5QkFBeUIsQ0FBQyxJQUl6QztJQUNDLE1BQU0sRUFBQyxNQUFNLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBQyxHQUFHLElBQUksQ0FBQztJQUN0QyxNQUFNLEVBQUMsTUFBTSxFQUFFLEVBQUUsRUFBQyxHQUFHLE1BQU0sQ0FBQztJQUM1QixNQUFNLEVBQUMsWUFBWSxFQUFDLEdBQUcsS0FBSyxDQUFDO0lBRTdCLE1BQU0sQ0FBQyxFQUFFLE9BQU8sRUFBRSxNQUFNLENBQUMsR0FBRyxNQUFNLENBQUMsS0FBeUMsQ0FBQztJQUM3RSxNQUFNLENBQUMsRUFBRSxPQUFPLEVBQUUsTUFBTSxDQUFDLEdBQUcsRUFBRSxDQUFDLEtBQXlDLENBQUM7SUFFekUsTUFBTSxjQUFjLEdBQXFCO1FBQ3ZDLENBQUMsWUFBWSxJQUFJLE9BQU8sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTztRQUNyRCxDQUFDLFlBQVksSUFBSSxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU07S0FDbkQsQ0FBQztJQUVGLE1BQU0sY0FBYyxHQUFxQjtRQUN2QyxDQUFDLFlBQVksSUFBSSxPQUFPLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU87UUFDckQsQ0FBQyxZQUFZLElBQUksTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNO0tBQ25ELENBQUM7SUFFRixNQUFNLFdBQVcsR0FBRyxjQUFjLENBQUMsQ0FBQyxDQUFDLEdBQUcsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzFELE1BQU0sVUFBVSxHQUFHLGNBQWMsQ0FBQyxDQUFDLENBQUMsR0FBRyxjQUFjLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFFekQsTUFBTSxjQUFjLEdBQUcsQ0FBQyxHQUFHLFdBQVcsQ0FBQztJQUN2QyxNQUFNLGFBQWEsR0FBRyxDQUFDLEdBQUcsVUFBVSxDQUFDO0lBRXJDLG9FQUFvRTtJQUNwRSw4REFBOEQ7SUFDOUQsTUFBTSxTQUFTLEdBQUcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUN0RCxNQUFNLFFBQVEsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBRXBELE1BQU0sT0FBTyxHQUFHLElBQUksbUNBQW1DLENBQ25ELE1BQU0sQ0FBQyxLQUF5QyxFQUFFLFlBQVksQ0FBQyxDQUFDO0lBQ3BFLE1BQU0sV0FBVyxHQUFHO1FBQ2xCLEVBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsY0FBYyxFQUFDO1FBQ3JDLEVBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsY0FBYyxFQUFDO1FBQ3JDLEVBQUMsSUFBSSxFQUFFLFNBQVMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxjQUFjLENBQUMsRUFBQztRQUN6QyxFQUFDLElBQUksRUFBRSxTQUFTLEVBQUUsSUFBSSxFQUFFLENBQUMsYUFBYSxDQUFDLEVBQUM7UUFDeEMsRUFBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxDQUFDLFNBQVMsQ0FBQyxFQUFDLEVBQUUsRUFBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxDQUFDLFFBQVEsQ0FBQyxFQUFDO0tBQ3RFLENBQUM7SUFDRixPQUFPLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsS0FBSyxFQUFFLFdBQVcsQ0FBQyxDQUFDO0FBQ3hFLENBQUM7QUFFRCxNQUFNLENBQUMsTUFBTSwrQkFBK0IsR0FBaUI7SUFDM0QsVUFBVSxFQUFFLHlCQUF5QjtJQUNyQyxXQUFXLEVBQUUsUUFBUTtJQUNyQixVQUFVLEVBQUUseUJBQWtEO0NBQy9ELENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMyBHb29nbGUgTExDLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7S2VybmVsQ29uZmlnLCBLZXJuZWxGdW5jLCBSZXNpemVOZWFyZXN0TmVpZ2hib3JHcmFkLCBSZXNpemVOZWFyZXN0TmVpZ2hib3JHcmFkQXR0cnMsIFJlc2l6ZU5lYXJlc3ROZWlnaGJvckdyYWRJbnB1dHMsIFRlbnNvckluZm99IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7V2ViR1BVQmFja2VuZH0gZnJvbSAnLi4vYmFja2VuZF93ZWJncHUnO1xuaW1wb3J0IHtSZXNpemVOZWFyZXN0TmVpZ2JvckJhY2twcm9wUHJvZ3JhbX0gZnJvbSAnLi4vcmVzaXplX25lYXJlc3RfbmVpZ2hib3JfYmFja3Byb3Bfd2ViZ3B1JztcblxuZXhwb3J0IGZ1bmN0aW9uIHJlc2l6ZU5lYXJlc3ROZWlnaGJvckdyYWQoYXJnczoge1xuICBpbnB1dHM6IFJlc2l6ZU5lYXJlc3ROZWlnaGJvckdyYWRJbnB1dHMsXG4gIGJhY2tlbmQ6IFdlYkdQVUJhY2tlbmQsXG4gIGF0dHJzOiBSZXNpemVOZWFyZXN0TmVpZ2hib3JHcmFkQXR0cnNcbn0pOiBUZW5zb3JJbmZvIHtcbiAgY29uc3Qge2lucHV0cywgYmFja2VuZCwgYXR0cnN9ID0gYXJncztcbiAgY29uc3Qge2ltYWdlcywgZHl9ID0gaW5wdXRzO1xuICBjb25zdCB7YWxpZ25Db3JuZXJzfSA9IGF0dHJzO1xuXG4gIGNvbnN0IFssIHhIZWlnaHQsIHhXaWR0aF0gPSBpbWFnZXMuc2hhcGUgYXMgW251bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcl07XG4gIGNvbnN0IFssIHlIZWlnaHQsIHlXaWR0aF0gPSBkeS5zaGFwZSBhcyBbbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyXTtcblxuICBjb25zdCBlZmZlY3RpdmVYU2l6ZTogW251bWJlciwgbnVtYmVyXSA9IFtcbiAgICAoYWxpZ25Db3JuZXJzICYmIHlIZWlnaHQgPiAxKSA/IHhIZWlnaHQgLSAxIDogeEhlaWdodCxcbiAgICAoYWxpZ25Db3JuZXJzICYmIHlXaWR0aCA+IDEpID8geFdpZHRoIC0gMSA6IHhXaWR0aFxuICBdO1xuXG4gIGNvbnN0IGVmZmVjdGl2ZVlTaXplOiBbbnVtYmVyLCBudW1iZXJdID0gW1xuICAgIChhbGlnbkNvcm5lcnMgJiYgeUhlaWdodCA+IDEpID8geUhlaWdodCAtIDEgOiB5SGVpZ2h0LFxuICAgIChhbGlnbkNvcm5lcnMgJiYgeVdpZHRoID4gMSkgPyB5V2lkdGggLSAxIDogeVdpZHRoXG4gIF07XG5cbiAgY29uc3QgaGVpZ2h0U2NhbGUgPSBlZmZlY3RpdmVYU2l6ZVswXSAvIGVmZmVjdGl2ZVlTaXplWzBdO1xuICBjb25zdCB3aWR0aFNjYWxlID0gZWZmZWN0aXZlWFNpemVbMV0gLyBlZmZlY3RpdmVZU2l6ZVsxXTtcblxuICBjb25zdCBpbnZIZWlnaHRTY2FsZSA9IDEgLyBoZWlnaHRTY2FsZTtcbiAgY29uc3QgaW52V2lkdGhTY2FsZSA9IDEgLyB3aWR0aFNjYWxlO1xuXG4gIC8vIFRoaXMgZGVmaW5lcyB0aGUgc2l6ZSBvZiB0aGUgd2luZG93IG9mIHZhbHVlcyBhcm91bmQgYSBwYXJ0aWN1bGFyXG4gIC8vIGluZGV4IGluIGR5IHRoYXQgd2Ugd2FudCB0byBzZWFyY2ggZm9yIGNvbnRyaWJ1dGlvbnMgdG8gZHguXG4gIGNvbnN0IHdpbkhlaWdodCA9IChNYXRoLmNlaWwoaW52SGVpZ2h0U2NhbGUpICogMikgKyAyO1xuICBjb25zdCB3aW5XaWR0aCA9IChNYXRoLmNlaWwoaW52V2lkdGhTY2FsZSkgKiAyKSArIDI7XG5cbiAgY29uc3QgcHJvZ3JhbSA9IG5ldyBSZXNpemVOZWFyZXN0TmVpZ2JvckJhY2twcm9wUHJvZ3JhbShcbiAgICAgIGltYWdlcy5zaGFwZSBhcyBbbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyXSwgYWxpZ25Db3JuZXJzKTtcbiAgY29uc3QgdW5pZm9ybURhdGEgPSBbXG4gICAge3R5cGU6ICdpbnQzMicsIGRhdGE6IGVmZmVjdGl2ZVhTaXplfSxcbiAgICB7dHlwZTogJ2ludDMyJywgZGF0YTogZWZmZWN0aXZlWVNpemV9LFxuICAgIHt0eXBlOiAnZmxvYXQzMicsIGRhdGE6IFtpbnZIZWlnaHRTY2FsZV19LFxuICAgIHt0eXBlOiAnZmxvYXQzMicsIGRhdGE6IFtpbnZXaWR0aFNjYWxlXX0sXG4gICAge3R5cGU6ICdpbnQzMicsIGRhdGE6IFt3aW5IZWlnaHRdfSwge3R5cGU6ICdpbnQzMicsIGRhdGE6IFt3aW5XaWR0aF19XG4gIF07XG4gIHJldHVybiBiYWNrZW5kLnJ1bldlYkdQVVByb2dyYW0ocHJvZ3JhbSwgW2R5XSwgZHkuZHR5cGUsIHVuaWZvcm1EYXRhKTtcbn1cblxuZXhwb3J0IGNvbnN0IHJlc2l6ZU5lYXJlc3ROZWlnaGJvckdyYWRDb25maWc6IEtlcm5lbENvbmZpZyA9IHtcbiAga2VybmVsTmFtZTogUmVzaXplTmVhcmVzdE5laWdoYm9yR3JhZCxcbiAgYmFja2VuZE5hbWU6ICd3ZWJncHUnLFxuICBrZXJuZWxGdW5jOiByZXNpemVOZWFyZXN0TmVpZ2hib3JHcmFkIGFzIHVua25vd24gYXMgS2VybmVsRnVuY1xufTtcbiJdfQ==","/**\n * @license\n * Copyright 2022 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { getMainHeaderString as main } from './webgpu_program';\nimport { computeDispatch, flatDispatchLayout } from './webgpu_util';\nexport class ReverseProgram {\n    constructor(xShape) {\n        this.variableNames = ['x'];\n        this.workgroupSize = [64, 1, 1];\n        this.size = true;\n        this.outputShape = xShape;\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize);\n        this.uniforms = ` axis : vec4<i32>,`;\n        this.shaderKey = 'reverse';\n    }\n    getUserCode() {\n        const reverseCoordsSnippet = `\n      // Using uniform variables as judging conditions, so the function has\n      // coherent execution within all threads.\n      fn getReverseCoords(coords : vec4<i32>) -> vec4<i32> {\n        var reverseCoords = coords;\n        if (uniforms.axis[0] == 1) {\n          reverseCoords[0] = uniforms.xShape[0] - coords[0] - 1;\n        }\n        if (uniforms.axis[1] == 1) {\n          reverseCoords[1] = uniforms.xShape[1] - coords[1] - 1;\n        }\n        if (uniforms.axis[2] == 1) {\n          reverseCoords[2] = uniforms.xShape[2] - coords[2] - 1;\n        }\n        if (uniforms.axis[3] == 1) {\n          reverseCoords[3] = uniforms.xShape[3] - coords[3] - 1;\n        }\n\n        return reverseCoords;\n      }\n    `;\n        const userCode = `\n      ${reverseCoordsSnippet}\n      ${main('index')} {\n        if (index < uniforms.size) {\n          let coords = getCoordsFromIndex(index);\n          let reverseCoords = getReverseCoords(coords);\n          setOutputAtIndex(index, getX(reverseCoords[0],\n              reverseCoords[1], reverseCoords[2], reverseCoords[3]));\n        }\n      }\n    `;\n        return userCode;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmV2ZXJzZV93ZWJncHUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9yZXZlcnNlX3dlYmdwdS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQUMsbUJBQW1CLElBQUksSUFBSSxFQUFnQixNQUFNLGtCQUFrQixDQUFDO0FBQzVFLE9BQU8sRUFBQyxlQUFlLEVBQUUsa0JBQWtCLEVBQUMsTUFBTSxlQUFlLENBQUM7QUFFbEUsTUFBTSxPQUFPLGNBQWM7SUFVekIsWUFBWSxNQUF3QztRQUxwRCxrQkFBYSxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7UUFFdEIsa0JBQWEsR0FBNkIsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ3JELFNBQUksR0FBRyxJQUFJLENBQUM7UUFHVixJQUFJLENBQUMsV0FBVyxHQUFHLE1BQU0sQ0FBQztRQUMxQixJQUFJLENBQUMsY0FBYyxHQUFHLGtCQUFrQixDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUMzRCxJQUFJLENBQUMsUUFBUSxHQUFHLGVBQWUsQ0FDM0IsSUFBSSxDQUFDLGNBQWMsRUFBRSxJQUFJLENBQUMsV0FBVyxFQUFFLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQztRQUMvRCxJQUFJLENBQUMsUUFBUSxHQUFHLG9CQUFvQixDQUFDO1FBQ3JDLElBQUksQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDO0lBQzdCLENBQUM7SUFFRCxXQUFXO1FBQ1QsTUFBTSxvQkFBb0IsR0FBRzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7S0FvQjVCLENBQUM7UUFDRixNQUFNLFFBQVEsR0FBRztRQUNiLG9CQUFvQjtRQUNwQixJQUFJLENBQUMsT0FBTyxDQUFDOzs7Ozs7OztLQVFoQixDQUFDO1FBQ0YsT0FBTyxRQUFRLENBQUM7SUFDbEIsQ0FBQztDQUNGIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQy5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge2dldE1haW5IZWFkZXJTdHJpbmcgYXMgbWFpbiwgV2ViR1BVUHJvZ3JhbX0gZnJvbSAnLi93ZWJncHVfcHJvZ3JhbSc7XG5pbXBvcnQge2NvbXB1dGVEaXNwYXRjaCwgZmxhdERpc3BhdGNoTGF5b3V0fSBmcm9tICcuL3dlYmdwdV91dGlsJztcblxuZXhwb3J0IGNsYXNzIFJldmVyc2VQcm9ncmFtIGltcGxlbWVudHMgV2ViR1BVUHJvZ3JhbSB7XG4gIG91dHB1dFNoYXBlOiBudW1iZXJbXTtcbiAgc2hhZGVyS2V5OiBzdHJpbmc7XG4gIGRpc3BhdGNoTGF5b3V0OiB7eDogbnVtYmVyW119O1xuICBkaXNwYXRjaDogW251bWJlciwgbnVtYmVyLCBudW1iZXJdO1xuICB2YXJpYWJsZU5hbWVzID0gWyd4J107XG4gIHVuaWZvcm1zOiBzdHJpbmc7XG4gIHdvcmtncm91cFNpemU6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXSA9IFs2NCwgMSwgMV07XG4gIHNpemUgPSB0cnVlO1xuXG4gIGNvbnN0cnVjdG9yKHhTaGFwZTogW251bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcl0pIHtcbiAgICB0aGlzLm91dHB1dFNoYXBlID0geFNoYXBlO1xuICAgIHRoaXMuZGlzcGF0Y2hMYXlvdXQgPSBmbGF0RGlzcGF0Y2hMYXlvdXQodGhpcy5vdXRwdXRTaGFwZSk7XG4gICAgdGhpcy5kaXNwYXRjaCA9IGNvbXB1dGVEaXNwYXRjaChcbiAgICAgICAgdGhpcy5kaXNwYXRjaExheW91dCwgdGhpcy5vdXRwdXRTaGFwZSwgdGhpcy53b3JrZ3JvdXBTaXplKTtcbiAgICB0aGlzLnVuaWZvcm1zID0gYCBheGlzIDogdmVjNDxpMzI+LGA7XG4gICAgdGhpcy5zaGFkZXJLZXkgPSAncmV2ZXJzZSc7XG4gIH1cblxuICBnZXRVc2VyQ29kZSgpOiBzdHJpbmcge1xuICAgIGNvbnN0IHJldmVyc2VDb29yZHNTbmlwcGV0ID0gYFxuICAgICAgLy8gVXNpbmcgdW5pZm9ybSB2YXJpYWJsZXMgYXMganVkZ2luZyBjb25kaXRpb25zLCBzbyB0aGUgZnVuY3Rpb24gaGFzXG4gICAgICAvLyBjb2hlcmVudCBleGVjdXRpb24gd2l0aGluIGFsbCB0aHJlYWRzLlxuICAgICAgZm4gZ2V0UmV2ZXJzZUNvb3Jkcyhjb29yZHMgOiB2ZWM0PGkzMj4pIC0+IHZlYzQ8aTMyPiB7XG4gICAgICAgIHZhciByZXZlcnNlQ29vcmRzID0gY29vcmRzO1xuICAgICAgICBpZiAodW5pZm9ybXMuYXhpc1swXSA9PSAxKSB7XG4gICAgICAgICAgcmV2ZXJzZUNvb3Jkc1swXSA9IHVuaWZvcm1zLnhTaGFwZVswXSAtIGNvb3Jkc1swXSAtIDE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVuaWZvcm1zLmF4aXNbMV0gPT0gMSkge1xuICAgICAgICAgIHJldmVyc2VDb29yZHNbMV0gPSB1bmlmb3Jtcy54U2hhcGVbMV0gLSBjb29yZHNbMV0gLSAxO1xuICAgICAgICB9XG4gICAgICAgIGlmICh1bmlmb3Jtcy5heGlzWzJdID09IDEpIHtcbiAgICAgICAgICByZXZlcnNlQ29vcmRzWzJdID0gdW5pZm9ybXMueFNoYXBlWzJdIC0gY29vcmRzWzJdIC0gMTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodW5pZm9ybXMuYXhpc1szXSA9PSAxKSB7XG4gICAgICAgICAgcmV2ZXJzZUNvb3Jkc1szXSA9IHVuaWZvcm1zLnhTaGFwZVszXSAtIGNvb3Jkc1szXSAtIDE7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmV2ZXJzZUNvb3JkcztcbiAgICAgIH1cbiAgICBgO1xuICAgIGNvbnN0IHVzZXJDb2RlID0gYFxuICAgICAgJHtyZXZlcnNlQ29vcmRzU25pcHBldH1cbiAgICAgICR7bWFpbignaW5kZXgnKX0ge1xuICAgICAgICBpZiAoaW5kZXggPCB1bmlmb3Jtcy5zaXplKSB7XG4gICAgICAgICAgbGV0IGNvb3JkcyA9IGdldENvb3Jkc0Zyb21JbmRleChpbmRleCk7XG4gICAgICAgICAgbGV0IHJldmVyc2VDb29yZHMgPSBnZXRSZXZlcnNlQ29vcmRzKGNvb3Jkcyk7XG4gICAgICAgICAgc2V0T3V0cHV0QXRJbmRleChpbmRleCwgZ2V0WChyZXZlcnNlQ29vcmRzWzBdLFxuICAgICAgICAgICAgICByZXZlcnNlQ29vcmRzWzFdLCByZXZlcnNlQ29vcmRzWzJdLCByZXZlcnNlQ29vcmRzWzNdKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICBgO1xuICAgIHJldHVybiB1c2VyQ29kZTtcbiAgfVxufVxuIl19","/**\n * @license\n * Copyright 2022 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Reverse, util } from '@tensorflow/tfjs-core';\nimport { ReverseProgram } from '../reverse_webgpu';\nimport { identity } from './Identity';\nimport { reshape } from './Reshape';\nexport function reverse(args) {\n    const { inputs, backend, attrs } = args;\n    const { x } = inputs;\n    const { dims } = attrs;\n    const xRank = x.shape.length;\n    if (xRank === 0) {\n        return identity({ inputs: { x }, backend });\n    }\n    const xShape = x.shape;\n    const xShape4D = [1, 1, 1, 1];\n    xShape.forEach((d, i) => {\n        const index = i + 4 - xRank;\n        xShape4D[index] = d;\n    });\n    const axes = util.parseAxisParam(dims, x.shape);\n    const dims4D = [0, 0, 0, 0];\n    axes.forEach(ax => {\n        const index = ax + 4 - xRank;\n        dims4D[index] = 1;\n    });\n    const uniformData = [{ type: 'int32', data: dims4D }];\n    const xReshaped = reshape({ inputs: { x }, backend, attrs: { shape: xShape4D } });\n    const program = new ReverseProgram(xShape4D);\n    const values = backend.runWebGPUProgram(program, [xReshaped], xReshaped.dtype, uniformData);\n    backend.disposeData(xReshaped.dataId);\n    const result = reshape({ inputs: { x: values }, backend, attrs: { shape: xShape } });\n    backend.disposeData(values.dataId);\n    return result;\n}\nexport const reverseConfig = {\n    kernelName: Reverse,\n    backendName: 'webgpu',\n    kernelFunc: reverse\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUmV2ZXJzZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2tlcm5lbHMvUmV2ZXJzZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQTJCLE9BQU8sRUFBMkMsSUFBSSxFQUFDLE1BQU0sdUJBQXVCLENBQUM7QUFHdkgsT0FBTyxFQUFDLGNBQWMsRUFBQyxNQUFNLG1CQUFtQixDQUFDO0FBRWpELE9BQU8sRUFBQyxRQUFRLEVBQUMsTUFBTSxZQUFZLENBQUM7QUFDcEMsT0FBTyxFQUFDLE9BQU8sRUFBQyxNQUFNLFdBQVcsQ0FBQztBQUVsQyxNQUFNLFVBQVUsT0FBTyxDQUNuQixJQUEwRTtJQUU1RSxNQUFNLEVBQUMsTUFBTSxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUMsR0FBRyxJQUFJLENBQUM7SUFDdEMsTUFBTSxFQUFDLENBQUMsRUFBQyxHQUFHLE1BQU0sQ0FBQztJQUNuQixNQUFNLEVBQUMsSUFBSSxFQUFDLEdBQUcsS0FBSyxDQUFDO0lBRXJCLE1BQU0sS0FBSyxHQUFHLENBQUMsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDO0lBQzdCLElBQUksS0FBSyxLQUFLLENBQUMsRUFBRTtRQUNmLE9BQU8sUUFBUSxDQUFDLEVBQUMsTUFBTSxFQUFFLEVBQUMsQ0FBQyxFQUFDLEVBQUUsT0FBTyxFQUFDLENBQUMsQ0FBQztLQUN6QztJQUVELE1BQU0sTUFBTSxHQUFHLENBQUMsQ0FBQyxLQUFLLENBQUM7SUFDdkIsTUFBTSxRQUFRLEdBQXFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDaEUsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRTtRQUN0QixNQUFNLEtBQUssR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEtBQUssQ0FBQztRQUM1QixRQUFRLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ3RCLENBQUMsQ0FBQyxDQUFDO0lBRUgsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ2hELE1BQU0sTUFBTSxHQUFxQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQzlELElBQUksQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLEVBQUU7UUFDaEIsTUFBTSxLQUFLLEdBQUcsRUFBRSxHQUFHLENBQUMsR0FBRyxLQUFLLENBQUM7UUFDN0IsTUFBTSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUNwQixDQUFDLENBQUMsQ0FBQztJQUNILE1BQU0sV0FBVyxHQUFHLENBQUMsRUFBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUMsQ0FBQyxDQUFDO0lBRXBELE1BQU0sU0FBUyxHQUFHLE9BQU8sQ0FBQyxFQUFDLE1BQU0sRUFBRSxFQUFDLENBQUMsRUFBQyxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsRUFBQyxLQUFLLEVBQUUsUUFBUSxFQUFDLEVBQUMsQ0FBQyxDQUFDO0lBRTVFLE1BQU0sT0FBTyxHQUFHLElBQUksY0FBYyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQzdDLE1BQU0sTUFBTSxHQUFHLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FDbkMsT0FBTyxFQUFFLENBQUMsU0FBUyxDQUFDLEVBQUUsU0FBUyxDQUFDLEtBQUssRUFBRSxXQUFXLENBQUMsQ0FBQztJQUN4RCxPQUFPLENBQUMsV0FBVyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUV0QyxNQUFNLE1BQU0sR0FDUixPQUFPLENBQUMsRUFBQyxNQUFNLEVBQUUsRUFBQyxDQUFDLEVBQUUsTUFBTSxFQUFDLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxFQUFDLEtBQUssRUFBRSxNQUFNLEVBQUMsRUFBQyxDQUFDLENBQUM7SUFDcEUsT0FBTyxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUM7SUFFbkMsT0FBTyxNQUFNLENBQUM7QUFDaEIsQ0FBQztBQUVELE1BQU0sQ0FBQyxNQUFNLGFBQWEsR0FBaUI7SUFDekMsVUFBVSxFQUFFLE9BQU87SUFDbkIsV0FBVyxFQUFFLFFBQVE7SUFDckIsVUFBVSxFQUFFLE9BQWdDO0NBQzdDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7S2VybmVsQ29uZmlnLCBLZXJuZWxGdW5jLCBSZXZlcnNlLCBSZXZlcnNlQXR0cnMsIFJldmVyc2VJbnB1dHMsIFRlbnNvckluZm8sIHV0aWx9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7V2ViR1BVQmFja2VuZH0gZnJvbSAnLi4vYmFja2VuZF93ZWJncHUnO1xuaW1wb3J0IHtSZXZlcnNlUHJvZ3JhbX0gZnJvbSAnLi4vcmV2ZXJzZV93ZWJncHUnO1xuXG5pbXBvcnQge2lkZW50aXR5fSBmcm9tICcuL0lkZW50aXR5JztcbmltcG9ydCB7cmVzaGFwZX0gZnJvbSAnLi9SZXNoYXBlJztcblxuZXhwb3J0IGZ1bmN0aW9uIHJldmVyc2UoXG4gICAgYXJnczoge2lucHV0czogUmV2ZXJzZUlucHV0cywgYmFja2VuZDogV2ViR1BVQmFja2VuZCwgYXR0cnM6IFJldmVyc2VBdHRyc30pOlxuICAgIFRlbnNvckluZm8ge1xuICBjb25zdCB7aW5wdXRzLCBiYWNrZW5kLCBhdHRyc30gPSBhcmdzO1xuICBjb25zdCB7eH0gPSBpbnB1dHM7XG4gIGNvbnN0IHtkaW1zfSA9IGF0dHJzO1xuXG4gIGNvbnN0IHhSYW5rID0geC5zaGFwZS5sZW5ndGg7XG4gIGlmICh4UmFuayA9PT0gMCkge1xuICAgIHJldHVybiBpZGVudGl0eSh7aW5wdXRzOiB7eH0sIGJhY2tlbmR9KTtcbiAgfVxuXG4gIGNvbnN0IHhTaGFwZSA9IHguc2hhcGU7XG4gIGNvbnN0IHhTaGFwZTREOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyXSA9IFsxLCAxLCAxLCAxXTtcbiAgeFNoYXBlLmZvckVhY2goKGQsIGkpID0+IHtcbiAgICBjb25zdCBpbmRleCA9IGkgKyA0IC0geFJhbms7XG4gICAgeFNoYXBlNERbaW5kZXhdID0gZDtcbiAgfSk7XG5cbiAgY29uc3QgYXhlcyA9IHV0aWwucGFyc2VBeGlzUGFyYW0oZGltcywgeC5zaGFwZSk7XG4gIGNvbnN0IGRpbXM0RDogW251bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcl0gPSBbMCwgMCwgMCwgMF07XG4gIGF4ZXMuZm9yRWFjaChheCA9PiB7XG4gICAgY29uc3QgaW5kZXggPSBheCArIDQgLSB4UmFuaztcbiAgICBkaW1zNERbaW5kZXhdID0gMTtcbiAgfSk7XG4gIGNvbnN0IHVuaWZvcm1EYXRhID0gW3t0eXBlOiAnaW50MzInLCBkYXRhOiBkaW1zNER9XTtcblxuICBjb25zdCB4UmVzaGFwZWQgPSByZXNoYXBlKHtpbnB1dHM6IHt4fSwgYmFja2VuZCwgYXR0cnM6IHtzaGFwZTogeFNoYXBlNER9fSk7XG5cbiAgY29uc3QgcHJvZ3JhbSA9IG5ldyBSZXZlcnNlUHJvZ3JhbSh4U2hhcGU0RCk7XG4gIGNvbnN0IHZhbHVlcyA9IGJhY2tlbmQucnVuV2ViR1BVUHJvZ3JhbShcbiAgICAgIHByb2dyYW0sIFt4UmVzaGFwZWRdLCB4UmVzaGFwZWQuZHR5cGUsIHVuaWZvcm1EYXRhKTtcbiAgYmFja2VuZC5kaXNwb3NlRGF0YSh4UmVzaGFwZWQuZGF0YUlkKTtcblxuICBjb25zdCByZXN1bHQgPVxuICAgICAgcmVzaGFwZSh7aW5wdXRzOiB7eDogdmFsdWVzfSwgYmFja2VuZCwgYXR0cnM6IHtzaGFwZTogeFNoYXBlfX0pO1xuICBiYWNrZW5kLmRpc3Bvc2VEYXRhKHZhbHVlcy5kYXRhSWQpO1xuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmV4cG9ydCBjb25zdCByZXZlcnNlQ29uZmlnOiBLZXJuZWxDb25maWcgPSB7XG4gIGtlcm5lbE5hbWU6IFJldmVyc2UsXG4gIGJhY2tlbmROYW1lOiAnd2ViZ3B1JyxcbiAga2VybmVsRnVuYzogcmV2ZXJzZSBhcyB1bmtub3duIGFzIEtlcm5lbEZ1bmNcbn07XG4iXX0=","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { getMainHeaderString as main } from './webgpu_program';\nimport { computeDispatch, flatDispatchLayout } from './webgpu_util';\nexport class RotateProgram {\n    constructor(imageShape, fillValue) {\n        this.outputShape = [];\n        this.variableNames = ['x'];\n        this.workgroupSize = [64, 1, 1];\n        this.size = true;\n        this.outputShape = imageShape;\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize);\n        this.uniforms = `centerX : f32, centerY : f32, sinRadians : f32,\n          cosRadians : f32,`;\n        this.shaderKey = 'rotate';\n        this.outputShape = imageShape;\n        if (typeof fillValue === 'number') {\n            this.uniforms += ` fillValue : f32,`;\n            this.fillSnippet = `var outputValue = uniforms.fillValue;`;\n            this.shaderKey += '_float';\n        }\n        else {\n            this.uniforms += ` fillValue : vec3<f32>,`;\n            this.fillSnippet = `var outputValue = uniforms.fillValue[coords[3]];`;\n            this.shaderKey += '_vec3';\n        }\n    }\n    getUserCode() {\n        const userCode = `\n        ${main('index')} {\n          if (index < uniforms.size) {\n            let coords = getCoordsFromIndex(index);\n            let coordXFloat = (f32(coords[2]) - uniforms.centerX) *\n                uniforms.cosRadians - (f32(coords[1]) - uniforms.centerY) *\n                uniforms.sinRadians;\n            let coordYFloat = (f32(coords[2]) - uniforms.centerX) *\n                uniforms.sinRadians + (f32(coords[1]) - uniforms.centerY) *\n                uniforms.cosRadians;\n            let coordX = i32(round(coordXFloat + uniforms.centerX));\n            let coordY = i32(round(coordYFloat + uniforms.centerY));\n            ${this.fillSnippet}\n            if(coordX >= 0 && coordX < uniforms.xShape[2] && coordY >= 0 &&\n                coordY < uniforms.xShape[1]) {\n              outputValue = getX(coords[0], coordY, coordX, coords[3]);\n            }\n            setOutputAtIndex(index, outputValue);\n          }\n        }\n      `;\n        return userCode;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicm90YXRlX3dlYmdwdS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL3JvdGF0ZV93ZWJncHUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUFDLG1CQUFtQixJQUFJLElBQUksRUFBZ0IsTUFBTSxrQkFBa0IsQ0FBQztBQUM1RSxPQUFPLEVBQUMsZUFBZSxFQUFFLGtCQUFrQixFQUFDLE1BQU0sZUFBZSxDQUFDO0FBRWxFLE1BQU0sT0FBTyxhQUFhO0lBV3hCLFlBQ0ksVUFBNEMsRUFDNUMsU0FBMEM7UUFaOUMsZ0JBQVcsR0FBYSxFQUFFLENBQUM7UUFJM0Isa0JBQWEsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBRXRCLGtCQUFhLEdBQTZCLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUVyRCxTQUFJLEdBQUcsSUFBSSxDQUFDO1FBS1YsSUFBSSxDQUFDLFdBQVcsR0FBRyxVQUFVLENBQUM7UUFDOUIsSUFBSSxDQUFDLGNBQWMsR0FBRyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDM0QsSUFBSSxDQUFDLFFBQVEsR0FBRyxlQUFlLENBQzNCLElBQUksQ0FBQyxjQUFjLEVBQUUsSUFBSSxDQUFDLFdBQVcsRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7UUFDL0QsSUFBSSxDQUFDLFFBQVEsR0FBRzs0QkFDUSxDQUFDO1FBQ3pCLElBQUksQ0FBQyxTQUFTLEdBQUcsUUFBUSxDQUFDO1FBQzFCLElBQUksQ0FBQyxXQUFXLEdBQUcsVUFBVSxDQUFDO1FBRTlCLElBQUksT0FBTyxTQUFTLEtBQUssUUFBUSxFQUFFO1lBQ2pDLElBQUksQ0FBQyxRQUFRLElBQUksbUJBQW1CLENBQUM7WUFDckMsSUFBSSxDQUFDLFdBQVcsR0FBRyx1Q0FBdUMsQ0FBQztZQUMzRCxJQUFJLENBQUMsU0FBUyxJQUFJLFFBQVEsQ0FBQztTQUM1QjthQUFNO1lBQ0wsSUFBSSxDQUFDLFFBQVEsSUFBSSx5QkFBeUIsQ0FBQztZQUMzQyxJQUFJLENBQUMsV0FBVyxHQUFHLGtEQUFrRCxDQUFDO1lBQ3RFLElBQUksQ0FBQyxTQUFTLElBQUksT0FBTyxDQUFDO1NBQzNCO0lBQ0gsQ0FBQztJQUVELFdBQVc7UUFDVCxNQUFNLFFBQVEsR0FBRztVQUNYLElBQUksQ0FBQyxPQUFPLENBQUM7Ozs7Ozs7Ozs7O2NBV1QsSUFBSSxDQUFDLFdBQVc7Ozs7Ozs7O09BUXZCLENBQUM7UUFDSixPQUFPLFFBQVEsQ0FBQztJQUNsQixDQUFDO0NBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7Z2V0TWFpbkhlYWRlclN0cmluZyBhcyBtYWluLCBXZWJHUFVQcm9ncmFtfSBmcm9tICcuL3dlYmdwdV9wcm9ncmFtJztcbmltcG9ydCB7Y29tcHV0ZURpc3BhdGNoLCBmbGF0RGlzcGF0Y2hMYXlvdXR9IGZyb20gJy4vd2ViZ3B1X3V0aWwnO1xuXG5leHBvcnQgY2xhc3MgUm90YXRlUHJvZ3JhbSBpbXBsZW1lbnRzIFdlYkdQVVByb2dyYW0ge1xuICBvdXRwdXRTaGFwZTogbnVtYmVyW10gPSBbXTtcbiAgc2hhZGVyS2V5OiBzdHJpbmc7XG4gIGRpc3BhdGNoTGF5b3V0OiB7eDogbnVtYmVyW119O1xuICBkaXNwYXRjaDogW251bWJlciwgbnVtYmVyLCBudW1iZXJdO1xuICB2YXJpYWJsZU5hbWVzID0gWyd4J107XG4gIHVuaWZvcm1zOiBzdHJpbmc7XG4gIHdvcmtncm91cFNpemU6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXSA9IFs2NCwgMSwgMV07XG4gIGZpbGxTbmlwcGV0OiBzdHJpbmc7XG4gIHNpemUgPSB0cnVlO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgICAgaW1hZ2VTaGFwZTogW251bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcl0sXG4gICAgICBmaWxsVmFsdWU6IG51bWJlcnxbbnVtYmVyLCBudW1iZXIsIG51bWJlcl0pIHtcbiAgICB0aGlzLm91dHB1dFNoYXBlID0gaW1hZ2VTaGFwZTtcbiAgICB0aGlzLmRpc3BhdGNoTGF5b3V0ID0gZmxhdERpc3BhdGNoTGF5b3V0KHRoaXMub3V0cHV0U2hhcGUpO1xuICAgIHRoaXMuZGlzcGF0Y2ggPSBjb21wdXRlRGlzcGF0Y2goXG4gICAgICAgIHRoaXMuZGlzcGF0Y2hMYXlvdXQsIHRoaXMub3V0cHV0U2hhcGUsIHRoaXMud29ya2dyb3VwU2l6ZSk7XG4gICAgdGhpcy51bmlmb3JtcyA9IGBjZW50ZXJYIDogZjMyLCBjZW50ZXJZIDogZjMyLCBzaW5SYWRpYW5zIDogZjMyLFxuICAgICAgICAgIGNvc1JhZGlhbnMgOiBmMzIsYDtcbiAgICB0aGlzLnNoYWRlcktleSA9ICdyb3RhdGUnO1xuICAgIHRoaXMub3V0cHV0U2hhcGUgPSBpbWFnZVNoYXBlO1xuXG4gICAgaWYgKHR5cGVvZiBmaWxsVmFsdWUgPT09ICdudW1iZXInKSB7XG4gICAgICB0aGlzLnVuaWZvcm1zICs9IGAgZmlsbFZhbHVlIDogZjMyLGA7XG4gICAgICB0aGlzLmZpbGxTbmlwcGV0ID0gYHZhciBvdXRwdXRWYWx1ZSA9IHVuaWZvcm1zLmZpbGxWYWx1ZTtgO1xuICAgICAgdGhpcy5zaGFkZXJLZXkgKz0gJ19mbG9hdCc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMudW5pZm9ybXMgKz0gYCBmaWxsVmFsdWUgOiB2ZWMzPGYzMj4sYDtcbiAgICAgIHRoaXMuZmlsbFNuaXBwZXQgPSBgdmFyIG91dHB1dFZhbHVlID0gdW5pZm9ybXMuZmlsbFZhbHVlW2Nvb3Jkc1szXV07YDtcbiAgICAgIHRoaXMuc2hhZGVyS2V5ICs9ICdfdmVjMyc7XG4gICAgfVxuICB9XG5cbiAgZ2V0VXNlckNvZGUoKTogc3RyaW5nIHtcbiAgICBjb25zdCB1c2VyQ29kZSA9IGBcbiAgICAgICAgJHttYWluKCdpbmRleCcpfSB7XG4gICAgICAgICAgaWYgKGluZGV4IDwgdW5pZm9ybXMuc2l6ZSkge1xuICAgICAgICAgICAgbGV0IGNvb3JkcyA9IGdldENvb3Jkc0Zyb21JbmRleChpbmRleCk7XG4gICAgICAgICAgICBsZXQgY29vcmRYRmxvYXQgPSAoZjMyKGNvb3Jkc1syXSkgLSB1bmlmb3Jtcy5jZW50ZXJYKSAqXG4gICAgICAgICAgICAgICAgdW5pZm9ybXMuY29zUmFkaWFucyAtIChmMzIoY29vcmRzWzFdKSAtIHVuaWZvcm1zLmNlbnRlclkpICpcbiAgICAgICAgICAgICAgICB1bmlmb3Jtcy5zaW5SYWRpYW5zO1xuICAgICAgICAgICAgbGV0IGNvb3JkWUZsb2F0ID0gKGYzMihjb29yZHNbMl0pIC0gdW5pZm9ybXMuY2VudGVyWCkgKlxuICAgICAgICAgICAgICAgIHVuaWZvcm1zLnNpblJhZGlhbnMgKyAoZjMyKGNvb3Jkc1sxXSkgLSB1bmlmb3Jtcy5jZW50ZXJZKSAqXG4gICAgICAgICAgICAgICAgdW5pZm9ybXMuY29zUmFkaWFucztcbiAgICAgICAgICAgIGxldCBjb29yZFggPSBpMzIocm91bmQoY29vcmRYRmxvYXQgKyB1bmlmb3Jtcy5jZW50ZXJYKSk7XG4gICAgICAgICAgICBsZXQgY29vcmRZID0gaTMyKHJvdW5kKGNvb3JkWUZsb2F0ICsgdW5pZm9ybXMuY2VudGVyWSkpO1xuICAgICAgICAgICAgJHt0aGlzLmZpbGxTbmlwcGV0fVxuICAgICAgICAgICAgaWYoY29vcmRYID49IDAgJiYgY29vcmRYIDwgdW5pZm9ybXMueFNoYXBlWzJdICYmIGNvb3JkWSA+PSAwICYmXG4gICAgICAgICAgICAgICAgY29vcmRZIDwgdW5pZm9ybXMueFNoYXBlWzFdKSB7XG4gICAgICAgICAgICAgIG91dHB1dFZhbHVlID0gZ2V0WChjb29yZHNbMF0sIGNvb3JkWSwgY29vcmRYLCBjb29yZHNbM10pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2V0T3V0cHV0QXRJbmRleChpbmRleCwgb3V0cHV0VmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgYDtcbiAgICByZXR1cm4gdXNlckNvZGU7XG4gIH1cbn1cbiJdfQ==","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { backend_util } from '@tensorflow/tfjs-core';\nimport { RotateWithOffset } from '@tensorflow/tfjs-core';\nimport { RotateProgram } from '../rotate_webgpu';\nexport const rotateWithOffsetConfig = {\n    kernelName: RotateWithOffset,\n    backendName: 'webgpu',\n    kernelFunc: ({ inputs, attrs, backend }) => {\n        const { image } = inputs;\n        const { radians, fillValue, center } = attrs;\n        const webgpuBackend = backend;\n        const program = new RotateProgram(image.shape, fillValue);\n        const [centerX, centerY] = backend_util.getImageCenter(center, image.shape[1], image.shape[2]);\n        const uniformData = [\n            { type: 'float32', data: [centerX] },\n            { type: 'float32', data: [centerY] },\n            { type: 'float32', data: [Math.sin(radians)] },\n            { type: 'float32', data: [Math.cos(radians)] }\n        ];\n        if (typeof fillValue === 'number') {\n            uniformData.push({ type: 'float32', data: [Number.parseFloat(fillValue.toFixed(2))] });\n        }\n        else {\n            uniformData.push({ type: 'float32', data: fillValue });\n        }\n        const output = webgpuBackend.runWebGPUProgram(program, [image], image.dtype, uniformData);\n        return output;\n    }\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUm90YXRlV2l0aE9mZnNldC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2tlcm5lbHMvUm90YXRlV2l0aE9mZnNldC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQUMsWUFBWSxFQUF5QixNQUFNLHVCQUF1QixDQUFDO0FBQzNFLE9BQU8sRUFBQyxnQkFBZ0IsRUFBZ0QsTUFBTSx1QkFBdUIsQ0FBQztBQUd0RyxPQUFPLEVBQUMsYUFBYSxFQUFDLE1BQU0sa0JBQWtCLENBQUM7QUFFL0MsTUFBTSxDQUFDLE1BQU0sc0JBQXNCLEdBQWlCO0lBQ2hELFVBQVUsRUFBRSxnQkFBZ0I7SUFDNUIsV0FBVyxFQUFFLFFBQVE7SUFDckIsVUFBVSxFQUFFLENBQUMsRUFBQyxNQUFNLEVBQUUsS0FBSyxFQUFFLE9BQU8sRUFBQyxFQUFFLEVBQUU7UUFDdkMsTUFBTSxFQUFDLEtBQUssRUFBQyxHQUFHLE1BQWdDLENBQUM7UUFDakQsTUFBTSxFQUFDLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxFQUFDLEdBQzlCLEtBQXlDLENBQUM7UUFDOUMsTUFBTSxhQUFhLEdBQUcsT0FBd0IsQ0FBQztRQUUvQyxNQUFNLE9BQU8sR0FBRyxJQUFJLGFBQWEsQ0FBRSxLQUFrQixDQUFDLEtBQUssRUFBRSxTQUFTLENBQUMsQ0FBQztRQUN4RSxNQUFNLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxHQUNwQixZQUFZLENBQUMsY0FBYyxDQUFDLE1BQU0sRUFBRSxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN4RSxNQUFNLFdBQVcsR0FBRztZQUNkLEVBQUMsSUFBSSxFQUFFLFNBQVMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxPQUFPLENBQUMsRUFBQztZQUNsQyxFQUFDLElBQUksRUFBRSxTQUFTLEVBQUUsSUFBSSxFQUFFLENBQUMsT0FBTyxDQUFDLEVBQUM7WUFDbEMsRUFBQyxJQUFJLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUMsRUFBQztZQUM1QyxFQUFDLElBQUksRUFBRSxTQUFTLEVBQUUsSUFBSSxFQUFFLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQyxFQUFDO1NBQzdDLENBQUM7UUFFTixJQUFJLE9BQU8sU0FBUyxLQUFLLFFBQVEsRUFBRTtZQUNqQyxXQUFXLENBQUMsSUFBSSxDQUNaLEVBQUMsSUFBSSxFQUFFLFNBQVMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQztTQUN6RTthQUFNO1lBQ0wsV0FBVyxDQUFDLElBQUksQ0FBQyxFQUFDLElBQUksRUFBRSxTQUFTLEVBQUUsSUFBSSxFQUFFLFNBQVMsRUFBQyxDQUFDLENBQUM7U0FDdEQ7UUFFRCxNQUFNLE1BQU0sR0FBRyxhQUFhLENBQUMsZ0JBQWdCLENBQ3pDLE9BQU8sRUFBRSxDQUFDLEtBQUssQ0FBQyxFQUFFLEtBQUssQ0FBQyxLQUFLLEVBQUUsV0FBVyxDQUFDLENBQUM7UUFDaEQsT0FBTyxNQUFNLENBQUM7SUFDakIsQ0FBQztDQUNGLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7YmFja2VuZF91dGlsLCBLZXJuZWxDb25maWcsIFRlbnNvcjREfSBmcm9tICdAdGVuc29yZmxvdy90ZmpzLWNvcmUnO1xuaW1wb3J0IHtSb3RhdGVXaXRoT2Zmc2V0LCBSb3RhdGVXaXRoT2Zmc2V0QXR0cnMsIFJvdGF0ZVdpdGhPZmZzZXRJbnB1dHN9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7V2ViR1BVQmFja2VuZH0gZnJvbSAnLi4vYmFja2VuZF93ZWJncHUnO1xuaW1wb3J0IHtSb3RhdGVQcm9ncmFtfSBmcm9tICcuLi9yb3RhdGVfd2ViZ3B1JztcblxuZXhwb3J0IGNvbnN0IHJvdGF0ZVdpdGhPZmZzZXRDb25maWc6IEtlcm5lbENvbmZpZyA9IHtcbiAgICBrZXJuZWxOYW1lOiBSb3RhdGVXaXRoT2Zmc2V0LFxuICAgIGJhY2tlbmROYW1lOiAnd2ViZ3B1JyxcbiAgICBrZXJuZWxGdW5jOiAoe2lucHV0cywgYXR0cnMsIGJhY2tlbmR9KSA9PiB7XG4gICAgICBjb25zdCB7aW1hZ2V9ID0gaW5wdXRzIGFzIFJvdGF0ZVdpdGhPZmZzZXRJbnB1dHM7XG4gICAgICBjb25zdCB7cmFkaWFucywgZmlsbFZhbHVlLCBjZW50ZXJ9ID1cbiAgICAgICAgICBhdHRycyBhcyB1bmtub3duIGFzIFJvdGF0ZVdpdGhPZmZzZXRBdHRycztcbiAgICAgIGNvbnN0IHdlYmdwdUJhY2tlbmQgPSBiYWNrZW5kIGFzIFdlYkdQVUJhY2tlbmQ7XG5cbiAgICAgIGNvbnN0IHByb2dyYW0gPSBuZXcgUm90YXRlUHJvZ3JhbSgoaW1hZ2UgYXMgVGVuc29yNEQpLnNoYXBlLCBmaWxsVmFsdWUpO1xuICAgICAgY29uc3QgW2NlbnRlclgsIGNlbnRlclldID1cbiAgICAgICAgICBiYWNrZW5kX3V0aWwuZ2V0SW1hZ2VDZW50ZXIoY2VudGVyLCBpbWFnZS5zaGFwZVsxXSwgaW1hZ2Uuc2hhcGVbMl0pO1xuICAgICAgY29uc3QgdW5pZm9ybURhdGEgPSBbXG4gICAgICAgICAgICB7dHlwZTogJ2Zsb2F0MzInLCBkYXRhOiBbY2VudGVyWF19LFxuICAgICAgICAgICAge3R5cGU6ICdmbG9hdDMyJywgZGF0YTogW2NlbnRlclldfSxcbiAgICAgICAgICAgIHt0eXBlOiAnZmxvYXQzMicsIGRhdGE6IFtNYXRoLnNpbihyYWRpYW5zKV19LFxuICAgICAgICAgICAge3R5cGU6ICdmbG9hdDMyJywgZGF0YTogW01hdGguY29zKHJhZGlhbnMpXX1cbiAgICAgICAgICBdO1xuXG4gICAgICBpZiAodHlwZW9mIGZpbGxWYWx1ZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgdW5pZm9ybURhdGEucHVzaChcbiAgICAgICAgICAgIHt0eXBlOiAnZmxvYXQzMicsIGRhdGE6IFtOdW1iZXIucGFyc2VGbG9hdChmaWxsVmFsdWUudG9GaXhlZCgyKSldfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB1bmlmb3JtRGF0YS5wdXNoKHt0eXBlOiAnZmxvYXQzMicsIGRhdGE6IGZpbGxWYWx1ZX0pO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBvdXRwdXQgPSB3ZWJncHVCYWNrZW5kLnJ1bldlYkdQVVByb2dyYW0oXG4gICAgICAgICAgcHJvZ3JhbSwgW2ltYWdlXSwgaW1hZ2UuZHR5cGUsIHVuaWZvcm1EYXRhKTtcbiAgICAgIHJldHVybiBvdXRwdXQ7XG4gICB9XG4gfTtcbiJdfQ==","/**\n * @license\n * Copyright 2022 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Round } from '@tensorflow/tfjs-core';\nimport { unaryKernelFunc } from '../kernel_utils/kernel_funcs_utils';\nimport { UnaryOpType } from '../unary_op_util';\nexport const round = unaryKernelFunc({ opType: UnaryOpType.ROUND });\nexport const roundConfig = {\n    kernelName: Round,\n    backendName: 'webgpu',\n    kernelFunc: round\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUm91bmQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9rZXJuZWxzL1JvdW5kLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sRUFBZSxLQUFLLEVBQUMsTUFBTSx1QkFBdUIsQ0FBQztBQUUxRCxPQUFPLEVBQUMsZUFBZSxFQUFDLE1BQU0sb0NBQW9DLENBQUM7QUFFbkUsT0FBTyxFQUFDLFdBQVcsRUFBQyxNQUFNLGtCQUFrQixDQUFDO0FBRTdDLE1BQU0sQ0FBQyxNQUFNLEtBQUssR0FBRyxlQUFlLENBQUMsRUFBQyxNQUFNLEVBQUUsV0FBVyxDQUFDLEtBQUssRUFBQyxDQUFDLENBQUM7QUFFbEUsTUFBTSxDQUFDLE1BQU0sV0FBVyxHQUFpQjtJQUN2QyxVQUFVLEVBQUUsS0FBSztJQUNqQixXQUFXLEVBQUUsUUFBUTtJQUNyQixVQUFVLEVBQUUsS0FBSztDQUNsQixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQy5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge0tlcm5lbENvbmZpZywgUm91bmR9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7dW5hcnlLZXJuZWxGdW5jfSBmcm9tICcuLi9rZXJuZWxfdXRpbHMva2VybmVsX2Z1bmNzX3V0aWxzJztcblxuaW1wb3J0IHtVbmFyeU9wVHlwZX0gZnJvbSAnLi4vdW5hcnlfb3BfdXRpbCc7XG5cbmV4cG9ydCBjb25zdCByb3VuZCA9IHVuYXJ5S2VybmVsRnVuYyh7b3BUeXBlOiBVbmFyeU9wVHlwZS5ST1VORH0pO1xuXG5leHBvcnQgY29uc3Qgcm91bmRDb25maWc6IEtlcm5lbENvbmZpZyA9IHtcbiAga2VybmVsTmFtZTogUm91bmQsXG4gIGJhY2tlbmROYW1lOiAnd2ViZ3B1JyxcbiAga2VybmVsRnVuYzogcm91bmRcbn07XG4iXX0=","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Rsqrt } from '@tensorflow/tfjs-core';\nimport { unaryKernelFunc } from '../kernel_utils/kernel_funcs_utils';\nimport { rsqrtImplCPU } from '../kernel_utils/shared';\nimport { UnaryOpType } from '../unary_op_util';\nexport const rsqrt = unaryKernelFunc({ opType: UnaryOpType.RSQRT, cpuKernelImpl: rsqrtImplCPU });\nexport const rsqrtConfig = {\n    kernelName: Rsqrt,\n    backendName: 'webgpu',\n    kernelFunc: rsqrt\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUnNxcnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9rZXJuZWxzL1JzcXJ0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sRUFBZSxLQUFLLEVBQUMsTUFBTSx1QkFBdUIsQ0FBQztBQUMxRCxPQUFPLEVBQUMsZUFBZSxFQUFDLE1BQU0sb0NBQW9DLENBQUM7QUFDbkUsT0FBTyxFQUFDLFlBQVksRUFBQyxNQUFNLHdCQUF3QixDQUFDO0FBQ3BELE9BQU8sRUFBQyxXQUFXLEVBQUMsTUFBTSxrQkFBa0IsQ0FBQztBQUU3QyxNQUFNLENBQUMsTUFBTSxLQUFLLEdBQ2QsZUFBZSxDQUFDLEVBQUMsTUFBTSxFQUFFLFdBQVcsQ0FBQyxLQUFLLEVBQUUsYUFBYSxFQUFFLFlBQVksRUFBQyxDQUFDLENBQUM7QUFFOUUsTUFBTSxDQUFDLE1BQU0sV0FBVyxHQUFpQjtJQUN2QyxVQUFVLEVBQUUsS0FBSztJQUNqQixXQUFXLEVBQUUsUUFBUTtJQUNyQixVQUFVLEVBQUUsS0FBSztDQUNsQixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge0tlcm5lbENvbmZpZywgUnNxcnR9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5pbXBvcnQge3VuYXJ5S2VybmVsRnVuY30gZnJvbSAnLi4va2VybmVsX3V0aWxzL2tlcm5lbF9mdW5jc191dGlscyc7XG5pbXBvcnQge3JzcXJ0SW1wbENQVX0gZnJvbSAnLi4va2VybmVsX3V0aWxzL3NoYXJlZCc7XG5pbXBvcnQge1VuYXJ5T3BUeXBlfSBmcm9tICcuLi91bmFyeV9vcF91dGlsJztcblxuZXhwb3J0IGNvbnN0IHJzcXJ0ID1cbiAgICB1bmFyeUtlcm5lbEZ1bmMoe29wVHlwZTogVW5hcnlPcFR5cGUuUlNRUlQsIGNwdUtlcm5lbEltcGw6IHJzcXJ0SW1wbENQVX0pO1xuXG5leHBvcnQgY29uc3QgcnNxcnRDb25maWc6IEtlcm5lbENvbmZpZyA9IHtcbiAga2VybmVsTmFtZTogUnNxcnQsXG4gIGJhY2tlbmROYW1lOiAnd2ViZ3B1JyxcbiAga2VybmVsRnVuYzogcnNxcnRcbn07XG4iXX0=","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { atomicAddSnippet } from './shader_util';\nimport { dataTypeToGPUType, getCoordsDataType, getMainHeaderString as main } from './webgpu_program';\nimport { computeDispatch, flatDispatchLayout } from './webgpu_util';\nexport class ScatterProgram {\n    constructor(flattenXShape, sliceDim, indicesRank, updatesRank, strides, shape, outputDtype, sumDupeIndices = true) {\n        this.variableNames = ['updates', 'indices'];\n        this.workgroupSize = [64, 1, 1];\n        this.atomic = true;\n        this.outputShape = shape;\n        this.type = outputDtype;\n        this.sumDupeIndices = sumDupeIndices;\n        this.dispatchLayout = flatDispatchLayout(flattenXShape);\n        // Dispatching based on |updates| shape instead of output shape.\n        this.dispatch =\n            computeDispatch(this.dispatchLayout, flattenXShape, this.workgroupSize);\n        this.sliceDimGreaterThanOne = sliceDim > 1;\n        this.shaderKey =\n            `scatter_${indicesRank}_${updatesRank}_${this.sliceDimGreaterThanOne}_${outputDtype}_${sumDupeIndices}_${strides.length}`;\n        const stridesType = getCoordsDataType(strides.length);\n        this.uniforms =\n            `sliceDim : i32, strides: ${stridesType}, updatesSize: i32,`;\n        this.updatesRank = updatesRank;\n        this.indicesRank = indicesRank;\n    }\n    getUserCode() {\n        let indicesString = '';\n        if (this.indicesRank === 1) {\n            indicesString = 'coords[0]';\n        }\n        else if (this.indicesRank === 2) {\n            indicesString = 'coords[0], j';\n        }\n        const indicesSnippet = `getIndices(${indicesString})`;\n        const strideString = this.sliceDimGreaterThanOne ? 'uniforms.strides[j]' :\n            'uniforms.strides';\n        let outCoordsString = '';\n        let getUpdatesCoordsFromFlatIndex = '';\n        if (this.dispatchLayout.x.length === 1) {\n            outCoordsString = 'flattenedIndex';\n            getUpdatesCoordsFromFlatIndex = `\n      fn getUpdatesCoordsFromFlatIndex(index : i32) -> i32 {\n        return index;\n      }\n      `;\n        }\n        else if (this.dispatchLayout.x.length === 2) {\n            outCoordsString = 'vec2<i32>(flattenedIndex, coords[1])';\n            getUpdatesCoordsFromFlatIndex = `\n      fn getUpdatesCoordsFromFlatIndex(index : i32) -> vec2<i32> {\n        // N.B. |updates| could be a scalar tensor, conceptually representing a\n        // 2D tensor with all values equal to that. By design, its size must be\n        // the same as |outShape[1]| in one dimension, and |indicesShape[0]|\n        // gives the other.\n        let sliceSize = uniforms.outShape[1];\n        let d0 = index / sliceSize;\n        let d1 = index - d0 * sliceSize;\n        return vec2<i32>(d0, d1);\n      }\n      `;\n        }\n        const updatesString = Array.from({ length: this.updatesRank }, (_, idx) => `coords[${idx}]`);\n        const updatesSnippet = `getUpdates(${updatesString.join(', ')})`;\n        const userCode = `\n    ${getUpdatesCoordsFromFlatIndex}\n      ${main('index')} {\n        if (index < uniforms.updatesSize) {\n          let coords = getUpdatesCoordsFromFlatIndex(index);\n          var flattenedIndex = 0;\n          for (var j = 0; j < uniforms.sliceDim; j = j + 1) {\n            let indexInside = i32(round(${indicesSnippet}));\n            flattenedIndex = flattenedIndex + indexInside * ${strideString};\n          }\n          let updateValue =\n              ${dataTypeToGPUType(this.type)}(${updatesSnippet});\n          let flatIndex = getOutputIndexFromCoords(${outCoordsString});\n\n          ${this.sumDupeIndices ?\n            atomicAddSnippet('&result[flatIndex]', 'updateValue', this.type) :\n            `atomicStore(&result[flatIndex], bitcast<i32>(updateValue));`}\n        }\n      }`;\n        return userCode;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2NhdHRlcl93ZWJncHUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9zY2F0dGVyX3dlYmdwdS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFJSCxPQUFPLEVBQUMsZ0JBQWdCLEVBQUMsTUFBTSxlQUFlLENBQUM7QUFDL0MsT0FBTyxFQUFDLGlCQUFpQixFQUFFLGlCQUFpQixFQUFFLG1CQUFtQixJQUFJLElBQUksRUFBZ0IsTUFBTSxrQkFBa0IsQ0FBQztBQUNsSCxPQUFPLEVBQUMsZUFBZSxFQUFFLGtCQUFrQixFQUFDLE1BQU0sZUFBZSxDQUFDO0FBRWxFLE1BQU0sT0FBTyxjQUFjO0lBZXpCLFlBQ0ksYUFBdUIsRUFBRSxRQUFnQixFQUFFLFdBQW1CLEVBQzlELFdBQW1CLEVBQUUsT0FBaUIsRUFBRSxLQUFlLEVBQ3ZELFdBQXFCLEVBQUUsY0FBYyxHQUFHLElBQUk7UUFqQmhELGtCQUFhLEdBQUcsQ0FBQyxTQUFTLEVBQUUsU0FBUyxDQUFDLENBQUM7UUFPdkMsa0JBQWEsR0FBNkIsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBSXJELFdBQU0sR0FBRyxJQUFJLENBQUM7UUFPWixJQUFJLENBQUMsV0FBVyxHQUFHLEtBQUssQ0FBQztRQUN6QixJQUFJLENBQUMsSUFBSSxHQUFHLFdBQVcsQ0FBQztRQUN4QixJQUFJLENBQUMsY0FBYyxHQUFHLGNBQWMsQ0FBQztRQUNyQyxJQUFJLENBQUMsY0FBYyxHQUFHLGtCQUFrQixDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBQ3hELGdFQUFnRTtRQUNoRSxJQUFJLENBQUMsUUFBUTtZQUNULGVBQWUsQ0FBQyxJQUFJLENBQUMsY0FBYyxFQUFFLGFBQWEsRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7UUFDNUUsSUFBSSxDQUFDLHNCQUFzQixHQUFHLFFBQVEsR0FBRyxDQUFDLENBQUM7UUFDM0MsSUFBSSxDQUFDLFNBQVM7WUFDVixXQUFXLFdBQVcsSUFBSSxXQUFXLElBQUksSUFBSSxDQUFDLHNCQUFzQixJQUNoRSxXQUFXLElBQUksY0FBYyxJQUFJLE9BQU8sQ0FBQyxNQUFNLEVBQUUsQ0FBQztRQUMxRCxNQUFNLFdBQVcsR0FBRyxpQkFBaUIsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDdEQsSUFBSSxDQUFDLFFBQVE7WUFDVCw0QkFBNEIsV0FBVyxxQkFBcUIsQ0FBQztRQUNqRSxJQUFJLENBQUMsV0FBVyxHQUFHLFdBQVcsQ0FBQztRQUMvQixJQUFJLENBQUMsV0FBVyxHQUFHLFdBQVcsQ0FBQztJQUNqQyxDQUFDO0lBRUQsV0FBVztRQUNULElBQUksYUFBYSxHQUFHLEVBQUUsQ0FBQztRQUN2QixJQUFJLElBQUksQ0FBQyxXQUFXLEtBQUssQ0FBQyxFQUFFO1lBQzFCLGFBQWEsR0FBRyxXQUFXLENBQUM7U0FDN0I7YUFBTSxJQUFJLElBQUksQ0FBQyxXQUFXLEtBQUssQ0FBQyxFQUFFO1lBQ2pDLGFBQWEsR0FBRyxjQUFjLENBQUM7U0FDaEM7UUFDRCxNQUFNLGNBQWMsR0FBRyxjQUFjLGFBQWEsR0FBRyxDQUFDO1FBRXRELE1BQU0sWUFBWSxHQUFHLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDLENBQUMscUJBQXFCLENBQUMsQ0FBQztZQUN2QixrQkFBa0IsQ0FBQztRQUV0RSxJQUFJLGVBQWUsR0FBRyxFQUFFLENBQUM7UUFDekIsSUFBSSw2QkFBNkIsR0FBRyxFQUFFLENBQUM7UUFDdkMsSUFBSSxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxNQUFNLEtBQUssQ0FBQyxFQUFFO1lBQ3RDLGVBQWUsR0FBRyxnQkFBZ0IsQ0FBQztZQUNuQyw2QkFBNkIsR0FBRzs7OztPQUkvQixDQUFDO1NBQ0g7YUFBTSxJQUFJLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUU7WUFDN0MsZUFBZSxHQUFHLHNDQUFzQyxDQUFDO1lBQ3pELDZCQUE2QixHQUFHOzs7Ozs7Ozs7OztPQVcvQixDQUFDO1NBQ0g7UUFDRCxNQUFNLGFBQWEsR0FDZixLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxXQUFXLEVBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxHQUFHLEVBQUUsRUFBRSxDQUFDLFVBQVUsR0FBRyxHQUFHLENBQUMsQ0FBQztRQUN6RSxNQUFNLGNBQWMsR0FBRyxjQUFjLGFBQWEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQztRQUVqRSxNQUFNLFFBQVEsR0FBRztNQUNmLDZCQUE2QjtRQUMzQixJQUFJLENBQUMsT0FBTyxDQUFDOzs7OzswQ0FLcUIsY0FBYzs4REFDTSxZQUFZOzs7Z0JBRzFELGlCQUFpQixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxjQUFjO3FEQUNULGVBQWU7O1lBRzVELElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQztZQUNqQixnQkFBZ0IsQ0FDWixvQkFBb0IsRUFBRSxhQUFhLEVBQ25DLElBQUksQ0FBQyxJQUEyQixDQUFDLENBQUMsQ0FBQztZQUN2Qyw2REFBNkQ7O1FBRWpFLENBQUM7UUFDTCxPQUFPLFFBQVEsQ0FBQztJQUNsQixDQUFDO0NBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7RGF0YVR5cGV9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7YXRvbWljQWRkU25pcHBldH0gZnJvbSAnLi9zaGFkZXJfdXRpbCc7XG5pbXBvcnQge2RhdGFUeXBlVG9HUFVUeXBlLCBnZXRDb29yZHNEYXRhVHlwZSwgZ2V0TWFpbkhlYWRlclN0cmluZyBhcyBtYWluLCBXZWJHUFVQcm9ncmFtfSBmcm9tICcuL3dlYmdwdV9wcm9ncmFtJztcbmltcG9ydCB7Y29tcHV0ZURpc3BhdGNoLCBmbGF0RGlzcGF0Y2hMYXlvdXR9IGZyb20gJy4vd2ViZ3B1X3V0aWwnO1xuXG5leHBvcnQgY2xhc3MgU2NhdHRlclByb2dyYW0gaW1wbGVtZW50cyBXZWJHUFVQcm9ncmFtIHtcbiAgdmFyaWFibGVOYW1lcyA9IFsndXBkYXRlcycsICdpbmRpY2VzJ107XG4gIHVuaWZvcm1zOiBzdHJpbmc7XG4gIG91dHB1dFNoYXBlOiBudW1iZXJbXTtcbiAgc3VtRHVwZUluZGljZXM6IGJvb2xlYW47XG4gIHNoYWRlcktleTogc3RyaW5nO1xuICBkaXNwYXRjaExheW91dDoge3g6IG51bWJlcltdfTtcbiAgZGlzcGF0Y2g6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXTtcbiAgd29ya2dyb3VwU2l6ZTogW251bWJlciwgbnVtYmVyLCBudW1iZXJdID0gWzY0LCAxLCAxXTtcbiAgdXBkYXRlc1Jhbms6IG51bWJlcjtcbiAgaW5kaWNlc1Jhbms6IG51bWJlcjtcbiAgc2xpY2VEaW1HcmVhdGVyVGhhbk9uZTogYm9vbGVhbjtcbiAgYXRvbWljID0gdHJ1ZTtcbiAgdHlwZTogRGF0YVR5cGU7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgICBmbGF0dGVuWFNoYXBlOiBudW1iZXJbXSwgc2xpY2VEaW06IG51bWJlciwgaW5kaWNlc1Jhbms6IG51bWJlcixcbiAgICAgIHVwZGF0ZXNSYW5rOiBudW1iZXIsIHN0cmlkZXM6IG51bWJlcltdLCBzaGFwZTogbnVtYmVyW10sXG4gICAgICBvdXRwdXREdHlwZTogRGF0YVR5cGUsIHN1bUR1cGVJbmRpY2VzID0gdHJ1ZSkge1xuICAgIHRoaXMub3V0cHV0U2hhcGUgPSBzaGFwZTtcbiAgICB0aGlzLnR5cGUgPSBvdXRwdXREdHlwZTtcbiAgICB0aGlzLnN1bUR1cGVJbmRpY2VzID0gc3VtRHVwZUluZGljZXM7XG4gICAgdGhpcy5kaXNwYXRjaExheW91dCA9IGZsYXREaXNwYXRjaExheW91dChmbGF0dGVuWFNoYXBlKTtcbiAgICAvLyBEaXNwYXRjaGluZyBiYXNlZCBvbiB8dXBkYXRlc3wgc2hhcGUgaW5zdGVhZCBvZiBvdXRwdXQgc2hhcGUuXG4gICAgdGhpcy5kaXNwYXRjaCA9XG4gICAgICAgIGNvbXB1dGVEaXNwYXRjaCh0aGlzLmRpc3BhdGNoTGF5b3V0LCBmbGF0dGVuWFNoYXBlLCB0aGlzLndvcmtncm91cFNpemUpO1xuICAgIHRoaXMuc2xpY2VEaW1HcmVhdGVyVGhhbk9uZSA9IHNsaWNlRGltID4gMTtcbiAgICB0aGlzLnNoYWRlcktleSA9XG4gICAgICAgIGBzY2F0dGVyXyR7aW5kaWNlc1Jhbmt9XyR7dXBkYXRlc1Jhbmt9XyR7dGhpcy5zbGljZURpbUdyZWF0ZXJUaGFuT25lfV8ke1xuICAgICAgICAgICAgb3V0cHV0RHR5cGV9XyR7c3VtRHVwZUluZGljZXN9XyR7c3RyaWRlcy5sZW5ndGh9YDtcbiAgICBjb25zdCBzdHJpZGVzVHlwZSA9IGdldENvb3Jkc0RhdGFUeXBlKHN0cmlkZXMubGVuZ3RoKTtcbiAgICB0aGlzLnVuaWZvcm1zID1cbiAgICAgICAgYHNsaWNlRGltIDogaTMyLCBzdHJpZGVzOiAke3N0cmlkZXNUeXBlfSwgdXBkYXRlc1NpemU6IGkzMixgO1xuICAgIHRoaXMudXBkYXRlc1JhbmsgPSB1cGRhdGVzUmFuaztcbiAgICB0aGlzLmluZGljZXNSYW5rID0gaW5kaWNlc1Jhbms7XG4gIH1cblxuICBnZXRVc2VyQ29kZSgpOiBzdHJpbmcge1xuICAgIGxldCBpbmRpY2VzU3RyaW5nID0gJyc7XG4gICAgaWYgKHRoaXMuaW5kaWNlc1JhbmsgPT09IDEpIHtcbiAgICAgIGluZGljZXNTdHJpbmcgPSAnY29vcmRzWzBdJztcbiAgICB9IGVsc2UgaWYgKHRoaXMuaW5kaWNlc1JhbmsgPT09IDIpIHtcbiAgICAgIGluZGljZXNTdHJpbmcgPSAnY29vcmRzWzBdLCBqJztcbiAgICB9XG4gICAgY29uc3QgaW5kaWNlc1NuaXBwZXQgPSBgZ2V0SW5kaWNlcygke2luZGljZXNTdHJpbmd9KWA7XG5cbiAgICBjb25zdCBzdHJpZGVTdHJpbmcgPSB0aGlzLnNsaWNlRGltR3JlYXRlclRoYW5PbmUgPyAndW5pZm9ybXMuc3RyaWRlc1tqXScgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICd1bmlmb3Jtcy5zdHJpZGVzJztcblxuICAgIGxldCBvdXRDb29yZHNTdHJpbmcgPSAnJztcbiAgICBsZXQgZ2V0VXBkYXRlc0Nvb3Jkc0Zyb21GbGF0SW5kZXggPSAnJztcbiAgICBpZiAodGhpcy5kaXNwYXRjaExheW91dC54Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgb3V0Q29vcmRzU3RyaW5nID0gJ2ZsYXR0ZW5lZEluZGV4JztcbiAgICAgIGdldFVwZGF0ZXNDb29yZHNGcm9tRmxhdEluZGV4ID0gYFxuICAgICAgZm4gZ2V0VXBkYXRlc0Nvb3Jkc0Zyb21GbGF0SW5kZXgoaW5kZXggOiBpMzIpIC0+IGkzMiB7XG4gICAgICAgIHJldHVybiBpbmRleDtcbiAgICAgIH1cbiAgICAgIGA7XG4gICAgfSBlbHNlIGlmICh0aGlzLmRpc3BhdGNoTGF5b3V0LngubGVuZ3RoID09PSAyKSB7XG4gICAgICBvdXRDb29yZHNTdHJpbmcgPSAndmVjMjxpMzI+KGZsYXR0ZW5lZEluZGV4LCBjb29yZHNbMV0pJztcbiAgICAgIGdldFVwZGF0ZXNDb29yZHNGcm9tRmxhdEluZGV4ID0gYFxuICAgICAgZm4gZ2V0VXBkYXRlc0Nvb3Jkc0Zyb21GbGF0SW5kZXgoaW5kZXggOiBpMzIpIC0+IHZlYzI8aTMyPiB7XG4gICAgICAgIC8vIE4uQi4gfHVwZGF0ZXN8IGNvdWxkIGJlIGEgc2NhbGFyIHRlbnNvciwgY29uY2VwdHVhbGx5IHJlcHJlc2VudGluZyBhXG4gICAgICAgIC8vIDJEIHRlbnNvciB3aXRoIGFsbCB2YWx1ZXMgZXF1YWwgdG8gdGhhdC4gQnkgZGVzaWduLCBpdHMgc2l6ZSBtdXN0IGJlXG4gICAgICAgIC8vIHRoZSBzYW1lIGFzIHxvdXRTaGFwZVsxXXwgaW4gb25lIGRpbWVuc2lvbiwgYW5kIHxpbmRpY2VzU2hhcGVbMF18XG4gICAgICAgIC8vIGdpdmVzIHRoZSBvdGhlci5cbiAgICAgICAgbGV0IHNsaWNlU2l6ZSA9IHVuaWZvcm1zLm91dFNoYXBlWzFdO1xuICAgICAgICBsZXQgZDAgPSBpbmRleCAvIHNsaWNlU2l6ZTtcbiAgICAgICAgbGV0IGQxID0gaW5kZXggLSBkMCAqIHNsaWNlU2l6ZTtcbiAgICAgICAgcmV0dXJuIHZlYzI8aTMyPihkMCwgZDEpO1xuICAgICAgfVxuICAgICAgYDtcbiAgICB9XG4gICAgY29uc3QgdXBkYXRlc1N0cmluZyA9XG4gICAgICAgIEFycmF5LmZyb20oe2xlbmd0aDogdGhpcy51cGRhdGVzUmFua30sIChfLCBpZHgpID0+IGBjb29yZHNbJHtpZHh9XWApO1xuICAgIGNvbnN0IHVwZGF0ZXNTbmlwcGV0ID0gYGdldFVwZGF0ZXMoJHt1cGRhdGVzU3RyaW5nLmpvaW4oJywgJyl9KWA7XG5cbiAgICBjb25zdCB1c2VyQ29kZSA9IGBcbiAgICAke2dldFVwZGF0ZXNDb29yZHNGcm9tRmxhdEluZGV4fVxuICAgICAgJHttYWluKCdpbmRleCcpfSB7XG4gICAgICAgIGlmIChpbmRleCA8IHVuaWZvcm1zLnVwZGF0ZXNTaXplKSB7XG4gICAgICAgICAgbGV0IGNvb3JkcyA9IGdldFVwZGF0ZXNDb29yZHNGcm9tRmxhdEluZGV4KGluZGV4KTtcbiAgICAgICAgICB2YXIgZmxhdHRlbmVkSW5kZXggPSAwO1xuICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdW5pZm9ybXMuc2xpY2VEaW07IGogPSBqICsgMSkge1xuICAgICAgICAgICAgbGV0IGluZGV4SW5zaWRlID0gaTMyKHJvdW5kKCR7aW5kaWNlc1NuaXBwZXR9KSk7XG4gICAgICAgICAgICBmbGF0dGVuZWRJbmRleCA9IGZsYXR0ZW5lZEluZGV4ICsgaW5kZXhJbnNpZGUgKiAke3N0cmlkZVN0cmluZ307XG4gICAgICAgICAgfVxuICAgICAgICAgIGxldCB1cGRhdGVWYWx1ZSA9XG4gICAgICAgICAgICAgICR7ZGF0YVR5cGVUb0dQVVR5cGUodGhpcy50eXBlKX0oJHt1cGRhdGVzU25pcHBldH0pO1xuICAgICAgICAgIGxldCBmbGF0SW5kZXggPSBnZXRPdXRwdXRJbmRleEZyb21Db29yZHMoJHtvdXRDb29yZHNTdHJpbmd9KTtcblxuICAgICAgICAgICR7XG4gICAgICAgIHRoaXMuc3VtRHVwZUluZGljZXMgP1xuICAgICAgICAgICAgYXRvbWljQWRkU25pcHBldChcbiAgICAgICAgICAgICAgICAnJnJlc3VsdFtmbGF0SW5kZXhdJywgJ3VwZGF0ZVZhbHVlJyxcbiAgICAgICAgICAgICAgICB0aGlzLnR5cGUgYXMgJ2Zsb2F0MzInIHwgJ2ludDMyJykgOlxuICAgICAgICAgICAgYGF0b21pY1N0b3JlKCZyZXN1bHRbZmxhdEluZGV4XSwgYml0Y2FzdDxpMzI+KHVwZGF0ZVZhbHVlKSk7YH1cbiAgICAgICAgfVxuICAgICAgfWA7XG4gICAgcmV0dXJuIHVzZXJDb2RlO1xuICB9XG59XG4iXX0=","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { backend_util, ScatterNd, util } from '@tensorflow/tfjs-core';\nimport { ScatterProgram } from '../scatter_webgpu';\nimport { fill } from './Fill';\nimport { reshape } from './Reshape';\nexport function scatterNd(args) {\n    const { inputs, backend, attrs } = args;\n    const { indices, updates } = inputs;\n    const { shape } = attrs;\n    const { sliceRank, numUpdates, sliceSize, strides, outputSize } = backend_util.calculateShapes(updates, indices, shape);\n    const flattenShape = [outputSize / sliceSize, sliceSize];\n    if (outputSize === 0) {\n        return backend.makeTensorInfo(shape, indices.dtype);\n    }\n    const flattenIndices = reshape({ inputs: { x: indices }, backend, attrs: { shape: [numUpdates, sliceRank] } });\n    const flattenX = reshape({ inputs: { x: updates }, backend, attrs: { shape: [numUpdates, sliceSize] } });\n    const type = flattenX.dtype;\n    const output = fill({ backend, attrs: { shape: flattenShape, value: 0, dtype: type } });\n    const size = util.sizeFromShape(flattenX.shape);\n    const uniformData = [\n        { type: 'int32', data: [sliceRank] }, { type: 'int32', data: strides },\n        { type: 'int32', data: [size] }\n    ];\n    const program = new ScatterProgram(flattenX.shape, sliceRank, flattenIndices.shape.length, flattenX.shape.length, strides, flattenShape, type);\n    const res = backend.runWebGPUProgram(program, [flattenX, flattenIndices], type, uniformData, output);\n    const reshaped = reshape({ inputs: { x: res }, backend, attrs: { shape } });\n    backend.disposeData(flattenIndices.dataId);\n    backend.disposeData(flattenX.dataId);\n    backend.disposeData(res.dataId);\n    return reshaped;\n}\nexport const scatterNdConfig = {\n    kernelName: ScatterNd,\n    backendName: 'webgpu',\n    kernelFunc: scatterNd\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU2NhdHRlck5kLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMva2VybmVscy9TY2F0dGVyTmQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUFDLFlBQVksRUFBNEIsU0FBUyxFQUErQyxJQUFJLEVBQUMsTUFBTSx1QkFBdUIsQ0FBQztBQUczSSxPQUFPLEVBQUMsY0FBYyxFQUFDLE1BQU0sbUJBQW1CLENBQUM7QUFFakQsT0FBTyxFQUFDLElBQUksRUFBQyxNQUFNLFFBQVEsQ0FBQztBQUM1QixPQUFPLEVBQUMsT0FBTyxFQUFDLE1BQU0sV0FBVyxDQUFDO0FBRWxDLE1BQU0sVUFBVSxTQUFTLENBQUMsSUFJekI7SUFDQyxNQUFNLEVBQUMsTUFBTSxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUMsR0FBRyxJQUFJLENBQUM7SUFDdEMsTUFBTSxFQUFDLE9BQU8sRUFBRSxPQUFPLEVBQUMsR0FBRyxNQUFNLENBQUM7SUFDbEMsTUFBTSxFQUFDLEtBQUssRUFBQyxHQUFHLEtBQUssQ0FBQztJQUV0QixNQUFNLEVBQUMsU0FBUyxFQUFFLFVBQVUsRUFBRSxTQUFTLEVBQUUsT0FBTyxFQUFFLFVBQVUsRUFBQyxHQUN6RCxZQUFZLENBQUMsZUFBZSxDQUFDLE9BQU8sRUFBRSxPQUFPLEVBQUUsS0FBSyxDQUFDLENBQUM7SUFFMUQsTUFBTSxZQUFZLEdBQUcsQ0FBQyxVQUFVLEdBQUcsU0FBUyxFQUFFLFNBQVMsQ0FBQyxDQUFDO0lBRXpELElBQUksVUFBVSxLQUFLLENBQUMsRUFBRTtRQUNwQixPQUFPLE9BQU8sQ0FBQyxjQUFjLENBQUMsS0FBSyxFQUFFLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQztLQUNyRDtJQUVELE1BQU0sY0FBYyxHQUFHLE9BQU8sQ0FDMUIsRUFBQyxNQUFNLEVBQUUsRUFBQyxDQUFDLEVBQUUsT0FBTyxFQUFDLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxFQUFDLEtBQUssRUFBRSxDQUFDLFVBQVUsRUFBRSxTQUFTLENBQUMsRUFBQyxFQUFDLENBQUMsQ0FBQztJQUM5RSxNQUFNLFFBQVEsR0FBRyxPQUFPLENBQ3BCLEVBQUMsTUFBTSxFQUFFLEVBQUMsQ0FBQyxFQUFFLE9BQU8sRUFBQyxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsRUFBQyxLQUFLLEVBQUUsQ0FBQyxVQUFVLEVBQUUsU0FBUyxDQUFDLEVBQUMsRUFBQyxDQUFDLENBQUM7SUFFOUUsTUFBTSxJQUFJLEdBQUcsUUFBUSxDQUFDLEtBQUssQ0FBQztJQUM1QixNQUFNLE1BQU0sR0FDUixJQUFJLENBQUMsRUFBQyxPQUFPLEVBQUUsS0FBSyxFQUFFLEVBQUMsS0FBSyxFQUFFLFlBQVksRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUMsRUFBQyxDQUFDLENBQUM7SUFDekUsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDaEQsTUFBTSxXQUFXLEdBQUc7UUFDbEIsRUFBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxDQUFDLFNBQVMsQ0FBQyxFQUFDLEVBQUUsRUFBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUM7UUFDbEUsRUFBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxDQUFDLElBQUksQ0FBQyxFQUFDO0tBQzlCLENBQUM7SUFDRixNQUFNLE9BQU8sR0FBRyxJQUFJLGNBQWMsQ0FDOUIsUUFBUSxDQUFDLEtBQUssRUFBRSxTQUFTLEVBQUUsY0FBYyxDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQ3RELFFBQVEsQ0FBQyxLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sRUFBRSxZQUFZLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFDeEQsTUFBTSxHQUFHLEdBQUcsT0FBTyxDQUFDLGdCQUFnQixDQUNoQyxPQUFPLEVBQUUsQ0FBQyxRQUFRLEVBQUUsY0FBYyxDQUFDLEVBQUUsSUFBSSxFQUFFLFdBQVcsRUFBRSxNQUFNLENBQUMsQ0FBQztJQUVwRSxNQUFNLFFBQVEsR0FBRyxPQUFPLENBQUMsRUFBQyxNQUFNLEVBQUUsRUFBQyxDQUFDLEVBQUUsR0FBRyxFQUFDLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxFQUFDLEtBQUssRUFBQyxFQUFDLENBQUMsQ0FBQztJQUV0RSxPQUFPLENBQUMsV0FBVyxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUMzQyxPQUFPLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUNyQyxPQUFPLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUVoQyxPQUFPLFFBQVEsQ0FBQztBQUNsQixDQUFDO0FBRUQsTUFBTSxDQUFDLE1BQU0sZUFBZSxHQUFpQjtJQUMzQyxVQUFVLEVBQUUsU0FBUztJQUNyQixXQUFXLEVBQUUsUUFBUTtJQUNyQixVQUFVLEVBQUUsU0FBa0M7Q0FDL0MsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtiYWNrZW5kX3V0aWwsIEtlcm5lbENvbmZpZywgS2VybmVsRnVuYywgU2NhdHRlck5kLCBTY2F0dGVyTmRBdHRycywgU2NhdHRlck5kSW5wdXRzLCBUZW5zb3JJbmZvLCB1dGlsfSBmcm9tICdAdGVuc29yZmxvdy90ZmpzLWNvcmUnO1xuXG5pbXBvcnQge1dlYkdQVUJhY2tlbmR9IGZyb20gJy4uL2JhY2tlbmRfd2ViZ3B1JztcbmltcG9ydCB7U2NhdHRlclByb2dyYW19IGZyb20gJy4uL3NjYXR0ZXJfd2ViZ3B1JztcblxuaW1wb3J0IHtmaWxsfSBmcm9tICcuL0ZpbGwnO1xuaW1wb3J0IHtyZXNoYXBlfSBmcm9tICcuL1Jlc2hhcGUnO1xuXG5leHBvcnQgZnVuY3Rpb24gc2NhdHRlck5kKGFyZ3M6IHtcbiAgaW5wdXRzOiBTY2F0dGVyTmRJbnB1dHMsXG4gIGJhY2tlbmQ6IFdlYkdQVUJhY2tlbmQsXG4gIGF0dHJzOiBTY2F0dGVyTmRBdHRyc1xufSk6IFRlbnNvckluZm8ge1xuICBjb25zdCB7aW5wdXRzLCBiYWNrZW5kLCBhdHRyc30gPSBhcmdzO1xuICBjb25zdCB7aW5kaWNlcywgdXBkYXRlc30gPSBpbnB1dHM7XG4gIGNvbnN0IHtzaGFwZX0gPSBhdHRycztcblxuICBjb25zdCB7c2xpY2VSYW5rLCBudW1VcGRhdGVzLCBzbGljZVNpemUsIHN0cmlkZXMsIG91dHB1dFNpemV9ID1cbiAgICAgIGJhY2tlbmRfdXRpbC5jYWxjdWxhdGVTaGFwZXModXBkYXRlcywgaW5kaWNlcywgc2hhcGUpO1xuXG4gIGNvbnN0IGZsYXR0ZW5TaGFwZSA9IFtvdXRwdXRTaXplIC8gc2xpY2VTaXplLCBzbGljZVNpemVdO1xuXG4gIGlmIChvdXRwdXRTaXplID09PSAwKSB7XG4gICAgcmV0dXJuIGJhY2tlbmQubWFrZVRlbnNvckluZm8oc2hhcGUsIGluZGljZXMuZHR5cGUpO1xuICB9XG5cbiAgY29uc3QgZmxhdHRlbkluZGljZXMgPSByZXNoYXBlKFxuICAgICAge2lucHV0czoge3g6IGluZGljZXN9LCBiYWNrZW5kLCBhdHRyczoge3NoYXBlOiBbbnVtVXBkYXRlcywgc2xpY2VSYW5rXX19KTtcbiAgY29uc3QgZmxhdHRlblggPSByZXNoYXBlKFxuICAgICAge2lucHV0czoge3g6IHVwZGF0ZXN9LCBiYWNrZW5kLCBhdHRyczoge3NoYXBlOiBbbnVtVXBkYXRlcywgc2xpY2VTaXplXX19KTtcblxuICBjb25zdCB0eXBlID0gZmxhdHRlblguZHR5cGU7XG4gIGNvbnN0IG91dHB1dCA9XG4gICAgICBmaWxsKHtiYWNrZW5kLCBhdHRyczoge3NoYXBlOiBmbGF0dGVuU2hhcGUsIHZhbHVlOiAwLCBkdHlwZTogdHlwZX19KTtcbiAgY29uc3Qgc2l6ZSA9IHV0aWwuc2l6ZUZyb21TaGFwZShmbGF0dGVuWC5zaGFwZSk7XG4gIGNvbnN0IHVuaWZvcm1EYXRhID0gW1xuICAgIHt0eXBlOiAnaW50MzInLCBkYXRhOiBbc2xpY2VSYW5rXX0sIHt0eXBlOiAnaW50MzInLCBkYXRhOiBzdHJpZGVzfSxcbiAgICB7dHlwZTogJ2ludDMyJywgZGF0YTogW3NpemVdfVxuICBdO1xuICBjb25zdCBwcm9ncmFtID0gbmV3IFNjYXR0ZXJQcm9ncmFtKFxuICAgICAgZmxhdHRlblguc2hhcGUsIHNsaWNlUmFuaywgZmxhdHRlbkluZGljZXMuc2hhcGUubGVuZ3RoLFxuICAgICAgZmxhdHRlblguc2hhcGUubGVuZ3RoLCBzdHJpZGVzLCBmbGF0dGVuU2hhcGUsIHR5cGUpO1xuICBjb25zdCByZXMgPSBiYWNrZW5kLnJ1bldlYkdQVVByb2dyYW0oXG4gICAgICBwcm9ncmFtLCBbZmxhdHRlblgsIGZsYXR0ZW5JbmRpY2VzXSwgdHlwZSwgdW5pZm9ybURhdGEsIG91dHB1dCk7XG5cbiAgY29uc3QgcmVzaGFwZWQgPSByZXNoYXBlKHtpbnB1dHM6IHt4OiByZXN9LCBiYWNrZW5kLCBhdHRyczoge3NoYXBlfX0pO1xuXG4gIGJhY2tlbmQuZGlzcG9zZURhdGEoZmxhdHRlbkluZGljZXMuZGF0YUlkKTtcbiAgYmFja2VuZC5kaXNwb3NlRGF0YShmbGF0dGVuWC5kYXRhSWQpO1xuICBiYWNrZW5kLmRpc3Bvc2VEYXRhKHJlcy5kYXRhSWQpO1xuXG4gIHJldHVybiByZXNoYXBlZDtcbn1cblxuZXhwb3J0IGNvbnN0IHNjYXR0ZXJOZENvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBTY2F0dGVyTmQsXG4gIGJhY2tlbmROYW1lOiAnd2ViZ3B1JyxcbiAga2VybmVsRnVuYzogc2NhdHRlck5kIGFzIHVua25vd24gYXMgS2VybmVsRnVuY1xufTtcbiJdfQ==","/**\n * @license\n * Copyright 2022 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { getMainHeaderString as main } from './webgpu_program';\nimport { computeDispatch, flatDispatchLayout } from './webgpu_util';\nexport class SearchSortedProgram {\n    constructor(outputShape, side) {\n        this.outputShape = [];\n        this.variableNames = ['sortedSequence', 'values'];\n        this.uniforms = 'numInputs : i32,';\n        this.workgroupSize = [64, 1, 1];\n        this.size = true;\n        this.outputShape = outputShape;\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize);\n        this.side = side;\n        this.shaderKey = `search_sorted_${side}`;\n    }\n    getUserCode() {\n        const boundComparator = this.side === 'left' ? '<' : '<=';\n        const userCode = `\n      fn findBound(batch: i32, value: f32) -> i32 {\n        var left = i32(0);\n        var right = uniforms.numInputs;\n        while (left < right) {\n          var mid = (left + right) / 2;\n          if (getSortedSequence(batch, mid) ${boundComparator} value) {\n            left = mid + 1;\n          } else {\n            right = mid;\n          }\n        }\n        return right;\n      }\n\n      ${main('index')} {\n        if (index < uniforms.size) {\n          let coords = getCoordsFromIndex(index);\n          let value = getValuesByOutputIndex(index);\n          setOutputAtIndexI32(index, findBound(coords[0], value));\n        }\n      }\n    `;\n        return userCode;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VhcmNoX3NvcnRlZF93ZWJncHUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9zZWFyY2hfc29ydGVkX3dlYmdwdS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQUMsbUJBQW1CLElBQUksSUFBSSxFQUFnQixNQUFNLGtCQUFrQixDQUFDO0FBQzVFLE9BQU8sRUFBQyxlQUFlLEVBQUUsa0JBQWtCLEVBQUMsTUFBTSxlQUFlLENBQUM7QUFFbEUsTUFBTSxPQUFPLG1CQUFtQjtJQVc5QixZQUFZLFdBQTZCLEVBQUUsSUFBb0I7UUFWL0QsZ0JBQVcsR0FBYSxFQUFFLENBQUM7UUFJM0Isa0JBQWEsR0FBRyxDQUFDLGdCQUFnQixFQUFFLFFBQVEsQ0FBQyxDQUFDO1FBQzdDLGFBQVEsR0FBRyxrQkFBa0IsQ0FBQztRQUM5QixrQkFBYSxHQUE2QixDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDckQsU0FBSSxHQUFHLElBQUksQ0FBQztRQUlWLElBQUksQ0FBQyxXQUFXLEdBQUcsV0FBVyxDQUFDO1FBQy9CLElBQUksQ0FBQyxjQUFjLEdBQUcsa0JBQWtCLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQzNELElBQUksQ0FBQyxRQUFRLEdBQUcsZUFBZSxDQUMzQixJQUFJLENBQUMsY0FBYyxFQUFFLElBQUksQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBRS9ELElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBQ2pCLElBQUksQ0FBQyxTQUFTLEdBQUcsaUJBQWlCLElBQUksRUFBRSxDQUFDO0lBQzNDLENBQUM7SUFFRCxXQUFXO1FBQ1QsTUFBTSxlQUFlLEdBQUcsSUFBSSxDQUFDLElBQUksS0FBSyxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDO1FBQzFELE1BQU0sUUFBUSxHQUFHOzs7Ozs7OENBTXlCLGVBQWU7Ozs7Ozs7OztRQVNyRCxJQUFJLENBQUMsT0FBTyxDQUFDOzs7Ozs7O0tBT2hCLENBQUM7UUFFRixPQUFPLFFBQVEsQ0FBQztJQUNsQixDQUFDO0NBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7Z2V0TWFpbkhlYWRlclN0cmluZyBhcyBtYWluLCBXZWJHUFVQcm9ncmFtfSBmcm9tICcuL3dlYmdwdV9wcm9ncmFtJztcbmltcG9ydCB7Y29tcHV0ZURpc3BhdGNoLCBmbGF0RGlzcGF0Y2hMYXlvdXR9IGZyb20gJy4vd2ViZ3B1X3V0aWwnO1xuXG5leHBvcnQgY2xhc3MgU2VhcmNoU29ydGVkUHJvZ3JhbSBpbXBsZW1lbnRzIFdlYkdQVVByb2dyYW0ge1xuICBvdXRwdXRTaGFwZTogbnVtYmVyW10gPSBbXTtcbiAgc2hhZGVyS2V5OiBzdHJpbmc7XG4gIGRpc3BhdGNoTGF5b3V0OiB7eDogbnVtYmVyW119O1xuICBkaXNwYXRjaDogW251bWJlciwgbnVtYmVyLCBudW1iZXJdO1xuICB2YXJpYWJsZU5hbWVzID0gWydzb3J0ZWRTZXF1ZW5jZScsICd2YWx1ZXMnXTtcbiAgdW5pZm9ybXMgPSAnbnVtSW5wdXRzIDogaTMyLCc7XG4gIHdvcmtncm91cFNpemU6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXSA9IFs2NCwgMSwgMV07XG4gIHNpemUgPSB0cnVlO1xuICBzaWRlOiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3Iob3V0cHV0U2hhcGU6IFtudW1iZXIsIG51bWJlcl0sIHNpZGU6ICdsZWZ0J3wncmlnaHQnKSB7XG4gICAgdGhpcy5vdXRwdXRTaGFwZSA9IG91dHB1dFNoYXBlO1xuICAgIHRoaXMuZGlzcGF0Y2hMYXlvdXQgPSBmbGF0RGlzcGF0Y2hMYXlvdXQodGhpcy5vdXRwdXRTaGFwZSk7XG4gICAgdGhpcy5kaXNwYXRjaCA9IGNvbXB1dGVEaXNwYXRjaChcbiAgICAgICAgdGhpcy5kaXNwYXRjaExheW91dCwgdGhpcy5vdXRwdXRTaGFwZSwgdGhpcy53b3JrZ3JvdXBTaXplKTtcblxuICAgIHRoaXMuc2lkZSA9IHNpZGU7XG4gICAgdGhpcy5zaGFkZXJLZXkgPSBgc2VhcmNoX3NvcnRlZF8ke3NpZGV9YDtcbiAgfVxuXG4gIGdldFVzZXJDb2RlKCk6IHN0cmluZyB7XG4gICAgY29uc3QgYm91bmRDb21wYXJhdG9yID0gdGhpcy5zaWRlID09PSAnbGVmdCcgPyAnPCcgOiAnPD0nO1xuICAgIGNvbnN0IHVzZXJDb2RlID0gYFxuICAgICAgZm4gZmluZEJvdW5kKGJhdGNoOiBpMzIsIHZhbHVlOiBmMzIpIC0+IGkzMiB7XG4gICAgICAgIHZhciBsZWZ0ID0gaTMyKDApO1xuICAgICAgICB2YXIgcmlnaHQgPSB1bmlmb3Jtcy5udW1JbnB1dHM7XG4gICAgICAgIHdoaWxlIChsZWZ0IDwgcmlnaHQpIHtcbiAgICAgICAgICB2YXIgbWlkID0gKGxlZnQgKyByaWdodCkgLyAyO1xuICAgICAgICAgIGlmIChnZXRTb3J0ZWRTZXF1ZW5jZShiYXRjaCwgbWlkKSAke2JvdW5kQ29tcGFyYXRvcn0gdmFsdWUpIHtcbiAgICAgICAgICAgIGxlZnQgPSBtaWQgKyAxO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByaWdodCA9IG1pZDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJpZ2h0O1xuICAgICAgfVxuXG4gICAgICAke21haW4oJ2luZGV4Jyl9IHtcbiAgICAgICAgaWYgKGluZGV4IDwgdW5pZm9ybXMuc2l6ZSkge1xuICAgICAgICAgIGxldCBjb29yZHMgPSBnZXRDb29yZHNGcm9tSW5kZXgoaW5kZXgpO1xuICAgICAgICAgIGxldCB2YWx1ZSA9IGdldFZhbHVlc0J5T3V0cHV0SW5kZXgoaW5kZXgpO1xuICAgICAgICAgIHNldE91dHB1dEF0SW5kZXhJMzIoaW5kZXgsIGZpbmRCb3VuZChjb29yZHNbMF0sIHZhbHVlKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICBgO1xuXG4gICAgcmV0dXJuIHVzZXJDb2RlO1xuICB9XG59XG4iXX0=","/**\n * @license\n * Copyright 2022 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { SearchSorted } from '@tensorflow/tfjs-core';\nimport { SearchSortedProgram } from '../search_sorted_webgpu';\nexport function searchSorted(args) {\n    const { inputs, backend, attrs } = args;\n    const { sortedSequence, values } = inputs;\n    const { side } = attrs;\n    const program = new SearchSortedProgram([values.shape[0], values.shape[1]], side);\n    const uniformData = [{ type: 'int32', data: [sortedSequence.shape[1]] }];\n    return backend.runWebGPUProgram(program, [sortedSequence, values], 'int32', uniformData);\n}\nexport const searchSortedConfig = {\n    kernelName: SearchSorted,\n    backendName: 'webgpu',\n    kernelFunc: searchSorted,\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU2VhcmNoU29ydGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMva2VybmVscy9TZWFyY2hTb3J0ZWQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUEyQixZQUFZLEVBQW9ELE1BQU0sdUJBQXVCLENBQUM7QUFHaEksT0FBTyxFQUFDLG1CQUFtQixFQUFDLE1BQU0seUJBQXlCLENBQUM7QUFFNUQsTUFBTSxVQUFVLFlBQVksQ0FBQyxJQUk1QjtJQUNDLE1BQU0sRUFBQyxNQUFNLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBQyxHQUFHLElBQUksQ0FBQztJQUN0QyxNQUFNLEVBQUMsY0FBYyxFQUFFLE1BQU0sRUFBQyxHQUFHLE1BQU0sQ0FBQztJQUN4QyxNQUFNLEVBQUMsSUFBSSxFQUFDLEdBQUcsS0FBSyxDQUFDO0lBRXJCLE1BQU0sT0FBTyxHQUNULElBQUksbUJBQW1CLENBQUMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQztJQUN0RSxNQUFNLFdBQVcsR0FBRyxDQUFDLEVBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDO0lBQ3ZFLE9BQU8sT0FBTyxDQUFDLGdCQUFnQixDQUMzQixPQUFPLEVBQUUsQ0FBQyxjQUFjLEVBQUUsTUFBTSxDQUFDLEVBQUUsT0FBTyxFQUFFLFdBQVcsQ0FBQyxDQUFDO0FBQy9ELENBQUM7QUFFRCxNQUFNLENBQUMsTUFBTSxrQkFBa0IsR0FBaUI7SUFDOUMsVUFBVSxFQUFFLFlBQVk7SUFDeEIsV0FBVyxFQUFFLFFBQVE7SUFDckIsVUFBVSxFQUFFLFlBQXFDO0NBQ2xELENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7S2VybmVsQ29uZmlnLCBLZXJuZWxGdW5jLCBTZWFyY2hTb3J0ZWQsIFNlYXJjaFNvcnRlZEF0dHJzLCBTZWFyY2hTb3J0ZWRJbnB1dHMsIFRlbnNvckluZm99IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7V2ViR1BVQmFja2VuZH0gZnJvbSAnLi4vYmFja2VuZF93ZWJncHUnO1xuaW1wb3J0IHtTZWFyY2hTb3J0ZWRQcm9ncmFtfSBmcm9tICcuLi9zZWFyY2hfc29ydGVkX3dlYmdwdSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBzZWFyY2hTb3J0ZWQoYXJnczoge1xuICBpbnB1dHM6IFNlYXJjaFNvcnRlZElucHV0cyxcbiAgYmFja2VuZDogV2ViR1BVQmFja2VuZCxcbiAgYXR0cnM6IFNlYXJjaFNvcnRlZEF0dHJzXG59KTogVGVuc29ySW5mbyB7XG4gIGNvbnN0IHtpbnB1dHMsIGJhY2tlbmQsIGF0dHJzfSA9IGFyZ3M7XG4gIGNvbnN0IHtzb3J0ZWRTZXF1ZW5jZSwgdmFsdWVzfSA9IGlucHV0cztcbiAgY29uc3Qge3NpZGV9ID0gYXR0cnM7XG5cbiAgY29uc3QgcHJvZ3JhbSA9XG4gICAgICBuZXcgU2VhcmNoU29ydGVkUHJvZ3JhbShbdmFsdWVzLnNoYXBlWzBdLCB2YWx1ZXMuc2hhcGVbMV1dLCBzaWRlKTtcbiAgY29uc3QgdW5pZm9ybURhdGEgPSBbe3R5cGU6ICdpbnQzMicsIGRhdGE6IFtzb3J0ZWRTZXF1ZW5jZS5zaGFwZVsxXV19XTtcbiAgcmV0dXJuIGJhY2tlbmQucnVuV2ViR1BVUHJvZ3JhbShcbiAgICAgIHByb2dyYW0sIFtzb3J0ZWRTZXF1ZW5jZSwgdmFsdWVzXSwgJ2ludDMyJywgdW5pZm9ybURhdGEpO1xufVxuXG5leHBvcnQgY29uc3Qgc2VhcmNoU29ydGVkQ29uZmlnOiBLZXJuZWxDb25maWcgPSB7XG4gIGtlcm5lbE5hbWU6IFNlYXJjaFNvcnRlZCxcbiAgYmFja2VuZE5hbWU6ICd3ZWJncHUnLFxuICBrZXJuZWxGdW5jOiBzZWFyY2hTb3J0ZWQgYXMgdW5rbm93biBhcyBLZXJuZWxGdW5jLFxufTtcbiJdfQ==","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { getMainHeaderString as main } from './webgpu_program';\nimport { computeDispatch, flatDispatchLayout } from './webgpu_util';\nexport class SelectProgram {\n    constructor(cRank, shape, rank) {\n        this.variableNames = ['c', 'a', 'b'];\n        this.workgroupSize = [64, 1, 1];\n        this.size = true;\n        this.outputShape = shape;\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize);\n        this.cRank = cRank;\n        this.rank = rank;\n        this.shaderKey = 'select';\n    }\n    getUserCode() {\n        // TODO(WGSL): below code can be merged with getUserCode.\n        let cCoords;\n        let abCoords;\n        if (this.rank > 4) {\n            throw Error(`Where for rank ${this.rank} is not yet supported`);\n        }\n        if (this.rank === 1) {\n            abCoords = `resRC`;\n            cCoords = `resRC`;\n        }\n        else {\n            const currentCoords = ['resRC.x', 'resRC.y', 'resRC.z', 'resRC.w'];\n            const cCoordVars = [];\n            const abCoordVars = [];\n            for (let i = 0; i < this.outputShape.length; i++) {\n                abCoordVars.push(`${currentCoords[i]}`);\n                if (i < this.cRank) {\n                    cCoordVars.push(`${currentCoords[i]}`);\n                }\n            }\n            cCoords = cCoordVars.join();\n            abCoords = abCoordVars.join();\n        }\n        const userCode = `\n      ${main('index')} {\n        if (index < uniforms.size) {\n          let resRC = getCoordsFromIndex(index);\n          let cVal = getC(${cCoords});\n          if (cVal >= 1.0) {\n            setOutputAtIndex(index, getA(${abCoords}));\n          } else {\n            setOutputAtIndex(index, getB(${abCoords}));\n          }\n        }\n      }\n    `;\n        return userCode;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VsZWN0X3dlYmdwdS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL3NlbGVjdF93ZWJncHUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUFDLG1CQUFtQixJQUFJLElBQUksRUFBZ0IsTUFBTSxrQkFBa0IsQ0FBQztBQUM1RSxPQUFPLEVBQUMsZUFBZSxFQUFFLGtCQUFrQixFQUFDLE1BQU0sZUFBZSxDQUFDO0FBRWxFLE1BQU0sT0FBTyxhQUFhO0lBV3hCLFlBQVksS0FBYSxFQUFFLEtBQWUsRUFBRSxJQUFZO1FBVnhELGtCQUFhLEdBQUcsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBS2hDLGtCQUFhLEdBQTZCLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUdyRCxTQUFJLEdBQUcsSUFBSSxDQUFDO1FBR1YsSUFBSSxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUM7UUFDekIsSUFBSSxDQUFDLGNBQWMsR0FBRyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDM0QsSUFBSSxDQUFDLFFBQVEsR0FBRyxlQUFlLENBQzNCLElBQUksQ0FBQyxjQUFjLEVBQUUsSUFBSSxDQUFDLFdBQVcsRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7UUFFL0QsSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7UUFDbkIsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7UUFDakIsSUFBSSxDQUFDLFNBQVMsR0FBRyxRQUFRLENBQUM7SUFDNUIsQ0FBQztJQUVELFdBQVc7UUFDVCx5REFBeUQ7UUFDekQsSUFBSSxPQUFPLENBQUM7UUFDWixJQUFJLFFBQVEsQ0FBQztRQUNiLElBQUksSUFBSSxDQUFDLElBQUksR0FBRyxDQUFDLEVBQUU7WUFDakIsTUFBTSxLQUFLLENBQUMsa0JBQWtCLElBQUksQ0FBQyxJQUFJLHVCQUF1QixDQUFDLENBQUM7U0FDakU7UUFFRCxJQUFJLElBQUksQ0FBQyxJQUFJLEtBQUssQ0FBQyxFQUFFO1lBQ25CLFFBQVEsR0FBRyxPQUFPLENBQUM7WUFDbkIsT0FBTyxHQUFHLE9BQU8sQ0FBQztTQUNuQjthQUFNO1lBQ0wsTUFBTSxhQUFhLEdBQUcsQ0FBQyxTQUFTLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxTQUFTLENBQUMsQ0FBQztZQUNuRSxNQUFNLFVBQVUsR0FBRyxFQUFFLENBQUM7WUFDdEIsTUFBTSxXQUFXLEdBQUcsRUFBRSxDQUFDO1lBQ3ZCLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtnQkFDaEQsV0FBVyxDQUFDLElBQUksQ0FBQyxHQUFHLGFBQWEsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7Z0JBQ3hDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFLLEVBQUU7b0JBQ2xCLFVBQVUsQ0FBQyxJQUFJLENBQUMsR0FBRyxhQUFhLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO2lCQUN4QzthQUNGO1lBQ0QsT0FBTyxHQUFHLFVBQVUsQ0FBQyxJQUFJLEVBQUUsQ0FBQztZQUM1QixRQUFRLEdBQUcsV0FBVyxDQUFDLElBQUksRUFBRSxDQUFDO1NBQy9CO1FBRUQsTUFBTSxRQUFRLEdBQUc7UUFDYixJQUFJLENBQUMsT0FBTyxDQUFDOzs7NEJBR08sT0FBTzs7MkNBRVEsUUFBUTs7MkNBRVIsUUFBUTs7OztLQUk5QyxDQUFDO1FBQ0YsT0FBTyxRQUFRLENBQUM7SUFDbEIsQ0FBQztDQUNGIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge2dldE1haW5IZWFkZXJTdHJpbmcgYXMgbWFpbiwgV2ViR1BVUHJvZ3JhbX0gZnJvbSAnLi93ZWJncHVfcHJvZ3JhbSc7XG5pbXBvcnQge2NvbXB1dGVEaXNwYXRjaCwgZmxhdERpc3BhdGNoTGF5b3V0fSBmcm9tICcuL3dlYmdwdV91dGlsJztcblxuZXhwb3J0IGNsYXNzIFNlbGVjdFByb2dyYW0gaW1wbGVtZW50cyBXZWJHUFVQcm9ncmFtIHtcbiAgdmFyaWFibGVOYW1lcyA9IFsnYycsICdhJywgJ2InXTtcbiAgb3V0cHV0U2hhcGU6IG51bWJlcltdO1xuICBzaGFkZXJLZXk6IHN0cmluZztcbiAgZGlzcGF0Y2hMYXlvdXQ6IHt4OiBudW1iZXJbXX07XG4gIGRpc3BhdGNoOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl07XG4gIHdvcmtncm91cFNpemU6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXSA9IFs2NCwgMSwgMV07XG4gIGNSYW5rOiBudW1iZXI7XG4gIHJhbms6IG51bWJlcjtcbiAgc2l6ZSA9IHRydWU7XG5cbiAgY29uc3RydWN0b3IoY1Jhbms6IG51bWJlciwgc2hhcGU6IG51bWJlcltdLCByYW5rOiBudW1iZXIpIHtcbiAgICB0aGlzLm91dHB1dFNoYXBlID0gc2hhcGU7XG4gICAgdGhpcy5kaXNwYXRjaExheW91dCA9IGZsYXREaXNwYXRjaExheW91dCh0aGlzLm91dHB1dFNoYXBlKTtcbiAgICB0aGlzLmRpc3BhdGNoID0gY29tcHV0ZURpc3BhdGNoKFxuICAgICAgICB0aGlzLmRpc3BhdGNoTGF5b3V0LCB0aGlzLm91dHB1dFNoYXBlLCB0aGlzLndvcmtncm91cFNpemUpO1xuXG4gICAgdGhpcy5jUmFuayA9IGNSYW5rO1xuICAgIHRoaXMucmFuayA9IHJhbms7XG4gICAgdGhpcy5zaGFkZXJLZXkgPSAnc2VsZWN0JztcbiAgfVxuXG4gIGdldFVzZXJDb2RlKCk6IHN0cmluZyB7XG4gICAgLy8gVE9ETyhXR1NMKTogYmVsb3cgY29kZSBjYW4gYmUgbWVyZ2VkIHdpdGggZ2V0VXNlckNvZGUuXG4gICAgbGV0IGNDb29yZHM7XG4gICAgbGV0IGFiQ29vcmRzO1xuICAgIGlmICh0aGlzLnJhbmsgPiA0KSB7XG4gICAgICB0aHJvdyBFcnJvcihgV2hlcmUgZm9yIHJhbmsgJHt0aGlzLnJhbmt9IGlzIG5vdCB5ZXQgc3VwcG9ydGVkYCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucmFuayA9PT0gMSkge1xuICAgICAgYWJDb29yZHMgPSBgcmVzUkNgO1xuICAgICAgY0Nvb3JkcyA9IGByZXNSQ2A7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGN1cnJlbnRDb29yZHMgPSBbJ3Jlc1JDLngnLCAncmVzUkMueScsICdyZXNSQy56JywgJ3Jlc1JDLncnXTtcbiAgICAgIGNvbnN0IGNDb29yZFZhcnMgPSBbXTtcbiAgICAgIGNvbnN0IGFiQ29vcmRWYXJzID0gW107XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMub3V0cHV0U2hhcGUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgYWJDb29yZFZhcnMucHVzaChgJHtjdXJyZW50Q29vcmRzW2ldfWApO1xuICAgICAgICBpZiAoaSA8IHRoaXMuY1JhbmspIHtcbiAgICAgICAgICBjQ29vcmRWYXJzLnB1c2goYCR7Y3VycmVudENvb3Jkc1tpXX1gKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY0Nvb3JkcyA9IGNDb29yZFZhcnMuam9pbigpO1xuICAgICAgYWJDb29yZHMgPSBhYkNvb3JkVmFycy5qb2luKCk7XG4gICAgfVxuXG4gICAgY29uc3QgdXNlckNvZGUgPSBgXG4gICAgICAke21haW4oJ2luZGV4Jyl9IHtcbiAgICAgICAgaWYgKGluZGV4IDwgdW5pZm9ybXMuc2l6ZSkge1xuICAgICAgICAgIGxldCByZXNSQyA9IGdldENvb3Jkc0Zyb21JbmRleChpbmRleCk7XG4gICAgICAgICAgbGV0IGNWYWwgPSBnZXRDKCR7Y0Nvb3Jkc30pO1xuICAgICAgICAgIGlmIChjVmFsID49IDEuMCkge1xuICAgICAgICAgICAgc2V0T3V0cHV0QXRJbmRleChpbmRleCwgZ2V0QSgke2FiQ29vcmRzfSkpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZXRPdXRwdXRBdEluZGV4KGluZGV4LCBnZXRCKCR7YWJDb29yZHN9KSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgYDtcbiAgICByZXR1cm4gdXNlckNvZGU7XG4gIH1cbn1cbiJdfQ==","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Select, upcastType } from '@tensorflow/tfjs-core';\nimport { SelectProgram } from '../select_webgpu';\nexport function select(args) {\n    const { inputs, backend } = args;\n    const { condition, t, e } = inputs;\n    const program = new SelectProgram(condition.shape.length, t.shape, t.shape.length);\n    return backend.runWebGPUProgram(program, [condition, t, e], upcastType(t.dtype, e.dtype));\n}\nexport const selectConfig = {\n    kernelName: Select,\n    backendName: 'webgpu',\n    kernelFunc: select\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU2VsZWN0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMva2VybmVscy9TZWxlY3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUEyQixNQUFNLEVBQTRCLFVBQVUsRUFBQyxNQUFNLHVCQUF1QixDQUFDO0FBRzdHLE9BQU8sRUFBQyxhQUFhLEVBQUMsTUFBTSxrQkFBa0IsQ0FBQztBQUUvQyxNQUFNLFVBQVUsTUFBTSxDQUFDLElBQW9EO0lBRXpFLE1BQU0sRUFBQyxNQUFNLEVBQUUsT0FBTyxFQUFDLEdBQUcsSUFBSSxDQUFDO0lBQy9CLE1BQU0sRUFBQyxTQUFTLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBQyxHQUFHLE1BQU0sQ0FBQztJQUVqQyxNQUFNLE9BQU8sR0FDVCxJQUFJLGFBQWEsQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDdkUsT0FBTyxPQUFPLENBQUMsZ0JBQWdCLENBQzNCLE9BQU8sRUFBRSxDQUFDLFNBQVMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsVUFBVSxDQUFDLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7QUFDaEUsQ0FBQztBQUVELE1BQU0sQ0FBQyxNQUFNLFlBQVksR0FBaUI7SUFDeEMsVUFBVSxFQUFFLE1BQU07SUFDbEIsV0FBVyxFQUFFLFFBQVE7SUFDckIsVUFBVSxFQUFFLE1BQStCO0NBQzVDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7S2VybmVsQ29uZmlnLCBLZXJuZWxGdW5jLCBTZWxlY3QsIFNlbGVjdElucHV0cywgVGVuc29ySW5mbywgdXBjYXN0VHlwZX0gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcblxuaW1wb3J0IHtXZWJHUFVCYWNrZW5kfSBmcm9tICcuLi9iYWNrZW5kX3dlYmdwdSc7XG5pbXBvcnQge1NlbGVjdFByb2dyYW19IGZyb20gJy4uL3NlbGVjdF93ZWJncHUnO1xuXG5leHBvcnQgZnVuY3Rpb24gc2VsZWN0KGFyZ3M6IHtpbnB1dHM6IFNlbGVjdElucHV0cywgYmFja2VuZDogV2ViR1BVQmFja2VuZH0pOlxuICAgIFRlbnNvckluZm8ge1xuICBjb25zdCB7aW5wdXRzLCBiYWNrZW5kfSA9IGFyZ3M7XG4gIGNvbnN0IHtjb25kaXRpb24sIHQsIGV9ID0gaW5wdXRzO1xuXG4gIGNvbnN0IHByb2dyYW0gPVxuICAgICAgbmV3IFNlbGVjdFByb2dyYW0oY29uZGl0aW9uLnNoYXBlLmxlbmd0aCwgdC5zaGFwZSwgdC5zaGFwZS5sZW5ndGgpO1xuICByZXR1cm4gYmFja2VuZC5ydW5XZWJHUFVQcm9ncmFtKFxuICAgICAgcHJvZ3JhbSwgW2NvbmRpdGlvbiwgdCwgZV0sIHVwY2FzdFR5cGUodC5kdHlwZSwgZS5kdHlwZSkpO1xufVxuXG5leHBvcnQgY29uc3Qgc2VsZWN0Q29uZmlnOiBLZXJuZWxDb25maWcgPSB7XG4gIGtlcm5lbE5hbWU6IFNlbGVjdCxcbiAgYmFja2VuZE5hbWU6ICd3ZWJncHUnLFxuICBrZXJuZWxGdW5jOiBzZWxlY3QgYXMgdW5rbm93biBhcyBLZXJuZWxGdW5jXG59O1xuIl19","/**\n * @license\n * Copyright 2022 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Selu } from '@tensorflow/tfjs-core';\nimport { unaryKernelFunc } from '../kernel_utils/kernel_funcs_utils';\nimport { UnaryOpType } from '../unary_op_util';\nexport const selu = unaryKernelFunc({ opType: UnaryOpType.SELU });\nexport const seluConfig = {\n    kernelName: Selu,\n    backendName: 'webgpu',\n    kernelFunc: selu\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU2VsdS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2tlcm5lbHMvU2VsdS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQWUsSUFBSSxFQUFDLE1BQU0sdUJBQXVCLENBQUM7QUFFekQsT0FBTyxFQUFDLGVBQWUsRUFBQyxNQUFNLG9DQUFvQyxDQUFDO0FBRW5FLE9BQU8sRUFBQyxXQUFXLEVBQUMsTUFBTSxrQkFBa0IsQ0FBQztBQUU3QyxNQUFNLENBQUMsTUFBTSxJQUFJLEdBQUcsZUFBZSxDQUFDLEVBQUMsTUFBTSxFQUFFLFdBQVcsQ0FBQyxJQUFJLEVBQUMsQ0FBQyxDQUFDO0FBRWhFLE1BQU0sQ0FBQyxNQUFNLFVBQVUsR0FBaUI7SUFDdEMsVUFBVSxFQUFFLElBQUk7SUFDaEIsV0FBVyxFQUFFLFFBQVE7SUFDckIsVUFBVSxFQUFFLElBQUk7Q0FDakIsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTEMuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtLZXJuZWxDb25maWcsIFNlbHV9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7dW5hcnlLZXJuZWxGdW5jfSBmcm9tICcuLi9rZXJuZWxfdXRpbHMva2VybmVsX2Z1bmNzX3V0aWxzJztcblxuaW1wb3J0IHtVbmFyeU9wVHlwZX0gZnJvbSAnLi4vdW5hcnlfb3BfdXRpbCc7XG5cbmV4cG9ydCBjb25zdCBzZWx1ID0gdW5hcnlLZXJuZWxGdW5jKHtvcFR5cGU6IFVuYXJ5T3BUeXBlLlNFTFV9KTtcblxuZXhwb3J0IGNvbnN0IHNlbHVDb25maWc6IEtlcm5lbENvbmZpZyA9IHtcbiAga2VybmVsTmFtZTogU2VsdSxcbiAgYmFja2VuZE5hbWU6ICd3ZWJncHUnLFxuICBrZXJuZWxGdW5jOiBzZWx1XG59O1xuIl19","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Sigmoid } from '@tensorflow/tfjs-core';\nimport { unaryKernelFunc } from '../kernel_utils/kernel_funcs_utils';\nimport { UnaryOpType } from '../unary_op_util';\nexport const sigmoid = unaryKernelFunc({ opType: UnaryOpType.SIGMOID });\nexport const sigmoidConfig = {\n    kernelName: Sigmoid,\n    backendName: 'webgpu',\n    kernelFunc: sigmoid,\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU2lnbW9pZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2tlcm5lbHMvU2lnbW9pZC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQWUsT0FBTyxFQUFDLE1BQU0sdUJBQXVCLENBQUM7QUFDNUQsT0FBTyxFQUFDLGVBQWUsRUFBQyxNQUFNLG9DQUFvQyxDQUFDO0FBQ25FLE9BQU8sRUFBQyxXQUFXLEVBQUMsTUFBTSxrQkFBa0IsQ0FBQztBQUU3QyxNQUFNLENBQUMsTUFBTSxPQUFPLEdBQUcsZUFBZSxDQUFDLEVBQUMsTUFBTSxFQUFFLFdBQVcsQ0FBQyxPQUFPLEVBQUMsQ0FBQyxDQUFDO0FBRXRFLE1BQU0sQ0FBQyxNQUFNLGFBQWEsR0FBaUI7SUFDekMsVUFBVSxFQUFFLE9BQU87SUFDbkIsV0FBVyxFQUFFLFFBQVE7SUFDckIsVUFBVSxFQUFFLE9BQU87Q0FDcEIsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtLZXJuZWxDb25maWcsIFNpZ21vaWR9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5pbXBvcnQge3VuYXJ5S2VybmVsRnVuY30gZnJvbSAnLi4va2VybmVsX3V0aWxzL2tlcm5lbF9mdW5jc191dGlscyc7XG5pbXBvcnQge1VuYXJ5T3BUeXBlfSBmcm9tICcuLi91bmFyeV9vcF91dGlsJztcblxuZXhwb3J0IGNvbnN0IHNpZ21vaWQgPSB1bmFyeUtlcm5lbEZ1bmMoe29wVHlwZTogVW5hcnlPcFR5cGUuU0lHTU9JRH0pO1xuXG5leHBvcnQgY29uc3Qgc2lnbW9pZENvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBTaWdtb2lkLFxuICBiYWNrZW5kTmFtZTogJ3dlYmdwdScsXG4gIGtlcm5lbEZ1bmM6IHNpZ21vaWQsXG59O1xuIl19","/**\n * @license\n * Copyright 2022 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Sign } from '@tensorflow/tfjs-core';\nimport { unaryKernelFunc } from '../kernel_utils/kernel_funcs_utils';\nimport { UnaryOpType } from '../unary_op_util';\nexport const sign = unaryKernelFunc({ opType: UnaryOpType.SIGN });\nexport const signConfig = {\n    kernelName: Sign,\n    backendName: 'webgpu',\n    kernelFunc: sign\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU2lnbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2tlcm5lbHMvU2lnbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQWUsSUFBSSxFQUFDLE1BQU0sdUJBQXVCLENBQUM7QUFFekQsT0FBTyxFQUFDLGVBQWUsRUFBQyxNQUFNLG9DQUFvQyxDQUFDO0FBRW5FLE9BQU8sRUFBQyxXQUFXLEVBQUMsTUFBTSxrQkFBa0IsQ0FBQztBQUU3QyxNQUFNLENBQUMsTUFBTSxJQUFJLEdBQUcsZUFBZSxDQUFDLEVBQUMsTUFBTSxFQUFFLFdBQVcsQ0FBQyxJQUFJLEVBQUMsQ0FBQyxDQUFDO0FBRWhFLE1BQU0sQ0FBQyxNQUFNLFVBQVUsR0FBaUI7SUFDdEMsVUFBVSxFQUFFLElBQUk7SUFDaEIsV0FBVyxFQUFFLFFBQVE7SUFDckIsVUFBVSxFQUFFLElBQUk7Q0FDakIsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTEMuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtLZXJuZWxDb25maWcsIFNpZ259IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7dW5hcnlLZXJuZWxGdW5jfSBmcm9tICcuLi9rZXJuZWxfdXRpbHMva2VybmVsX2Z1bmNzX3V0aWxzJztcblxuaW1wb3J0IHtVbmFyeU9wVHlwZX0gZnJvbSAnLi4vdW5hcnlfb3BfdXRpbCc7XG5cbmV4cG9ydCBjb25zdCBzaWduID0gdW5hcnlLZXJuZWxGdW5jKHtvcFR5cGU6IFVuYXJ5T3BUeXBlLlNJR059KTtcblxuZXhwb3J0IGNvbnN0IHNpZ25Db25maWc6IEtlcm5lbENvbmZpZyA9IHtcbiAga2VybmVsTmFtZTogU2lnbixcbiAgYmFja2VuZE5hbWU6ICd3ZWJncHUnLFxuICBrZXJuZWxGdW5jOiBzaWduXG59O1xuIl19","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Sin } from '@tensorflow/tfjs-core';\nimport { unaryKernelFunc } from '../kernel_utils/kernel_funcs_utils';\nimport { UnaryOpType } from '../unary_op_util';\nexport const sin = unaryKernelFunc({ opType: UnaryOpType.SIN });\nexport const sinConfig = {\n    kernelName: Sin,\n    backendName: 'webgpu',\n    kernelFunc: sin\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU2luLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMva2VybmVscy9TaW4udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUFlLEdBQUcsRUFBQyxNQUFNLHVCQUF1QixDQUFDO0FBRXhELE9BQU8sRUFBQyxlQUFlLEVBQUMsTUFBTSxvQ0FBb0MsQ0FBQztBQUVuRSxPQUFPLEVBQUMsV0FBVyxFQUFDLE1BQU0sa0JBQWtCLENBQUM7QUFFN0MsTUFBTSxDQUFDLE1BQU0sR0FBRyxHQUFHLGVBQWUsQ0FBQyxFQUFDLE1BQU0sRUFBRSxXQUFXLENBQUMsR0FBRyxFQUFDLENBQUMsQ0FBQztBQUU5RCxNQUFNLENBQUMsTUFBTSxTQUFTLEdBQWlCO0lBQ3JDLFVBQVUsRUFBRSxHQUFHO0lBQ2YsV0FBVyxFQUFFLFFBQVE7SUFDckIsVUFBVSxFQUFFLEdBQUc7Q0FDaEIsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtLZXJuZWxDb25maWcsIFNpbn0gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcblxuaW1wb3J0IHt1bmFyeUtlcm5lbEZ1bmN9IGZyb20gJy4uL2tlcm5lbF91dGlscy9rZXJuZWxfZnVuY3NfdXRpbHMnO1xuXG5pbXBvcnQge1VuYXJ5T3BUeXBlfSBmcm9tICcuLi91bmFyeV9vcF91dGlsJztcblxuZXhwb3J0IGNvbnN0IHNpbiA9IHVuYXJ5S2VybmVsRnVuYyh7b3BUeXBlOiBVbmFyeU9wVHlwZS5TSU59KTtcblxuZXhwb3J0IGNvbnN0IHNpbkNvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBTaW4sXG4gIGJhY2tlbmROYW1lOiAnd2ViZ3B1JyxcbiAga2VybmVsRnVuYzogc2luXG59O1xuIl19","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Sinh } from '@tensorflow/tfjs-core';\nimport { unaryKernelFunc } from '../kernel_utils/kernel_funcs_utils';\nimport { UnaryOpType } from '../unary_op_util';\nexport const sinh = unaryKernelFunc({ opType: UnaryOpType.SINH });\nexport const sinhConfig = {\n    kernelName: Sinh,\n    backendName: 'webgpu',\n    kernelFunc: sinh\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU2luaC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2tlcm5lbHMvU2luaC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQWUsSUFBSSxFQUFDLE1BQU0sdUJBQXVCLENBQUM7QUFFekQsT0FBTyxFQUFDLGVBQWUsRUFBQyxNQUFNLG9DQUFvQyxDQUFDO0FBRW5FLE9BQU8sRUFBQyxXQUFXLEVBQUMsTUFBTSxrQkFBa0IsQ0FBQztBQUU3QyxNQUFNLENBQUMsTUFBTSxJQUFJLEdBQUcsZUFBZSxDQUFDLEVBQUMsTUFBTSxFQUFFLFdBQVcsQ0FBQyxJQUFJLEVBQUMsQ0FBQyxDQUFDO0FBRWhFLE1BQU0sQ0FBQyxNQUFNLFVBQVUsR0FBaUI7SUFDdEMsVUFBVSxFQUFFLElBQUk7SUFDaEIsV0FBVyxFQUFFLFFBQVE7SUFDckIsVUFBVSxFQUFFLElBQUk7Q0FDakIsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtLZXJuZWxDb25maWcsIFNpbmh9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7dW5hcnlLZXJuZWxGdW5jfSBmcm9tICcuLi9rZXJuZWxfdXRpbHMva2VybmVsX2Z1bmNzX3V0aWxzJztcblxuaW1wb3J0IHtVbmFyeU9wVHlwZX0gZnJvbSAnLi4vdW5hcnlfb3BfdXRpbCc7XG5cbmV4cG9ydCBjb25zdCBzaW5oID0gdW5hcnlLZXJuZWxGdW5jKHtvcFR5cGU6IFVuYXJ5T3BUeXBlLlNJTkh9KTtcblxuZXhwb3J0IGNvbnN0IHNpbmhDb25maWc6IEtlcm5lbENvbmZpZyA9IHtcbiAga2VybmVsTmFtZTogU2luaCxcbiAgYmFja2VuZE5hbWU6ICd3ZWJncHUnLFxuICBrZXJuZWxGdW5jOiBzaW5oXG59O1xuIl19","/**\n * @license\n * Copyright 2022 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Softplus } from '@tensorflow/tfjs-core';\nimport { unaryKernelFunc } from '../kernel_utils/kernel_funcs_utils';\nimport { UnaryOpType } from '../unary_op_util';\nexport const softplus = unaryKernelFunc({ opType: UnaryOpType.SOFTPLUS });\nexport const softplusConfig = {\n    kernelName: Softplus,\n    backendName: 'webgpu',\n    kernelFunc: softplus\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU29mdHBsdXMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9rZXJuZWxzL1NvZnRwbHVzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sRUFBZSxRQUFRLEVBQUMsTUFBTSx1QkFBdUIsQ0FBQztBQUU3RCxPQUFPLEVBQUMsZUFBZSxFQUFDLE1BQU0sb0NBQW9DLENBQUM7QUFFbkUsT0FBTyxFQUFDLFdBQVcsRUFBQyxNQUFNLGtCQUFrQixDQUFDO0FBRTdDLE1BQU0sQ0FBQyxNQUFNLFFBQVEsR0FBRyxlQUFlLENBQUMsRUFBQyxNQUFNLEVBQUUsV0FBVyxDQUFDLFFBQVEsRUFBQyxDQUFDLENBQUM7QUFFeEUsTUFBTSxDQUFDLE1BQU0sY0FBYyxHQUFpQjtJQUMxQyxVQUFVLEVBQUUsUUFBUTtJQUNwQixXQUFXLEVBQUUsUUFBUTtJQUNyQixVQUFVLEVBQUUsUUFBUTtDQUNyQixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQy5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge0tlcm5lbENvbmZpZywgU29mdHBsdXN9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7dW5hcnlLZXJuZWxGdW5jfSBmcm9tICcuLi9rZXJuZWxfdXRpbHMva2VybmVsX2Z1bmNzX3V0aWxzJztcblxuaW1wb3J0IHtVbmFyeU9wVHlwZX0gZnJvbSAnLi4vdW5hcnlfb3BfdXRpbCc7XG5cbmV4cG9ydCBjb25zdCBzb2Z0cGx1cyA9IHVuYXJ5S2VybmVsRnVuYyh7b3BUeXBlOiBVbmFyeU9wVHlwZS5TT0ZUUExVU30pO1xuXG5leHBvcnQgY29uc3Qgc29mdHBsdXNDb25maWc6IEtlcm5lbENvbmZpZyA9IHtcbiAga2VybmVsTmFtZTogU29mdHBsdXMsXG4gIGJhY2tlbmROYW1lOiAnd2ViZ3B1JyxcbiAga2VybmVsRnVuYzogc29mdHBsdXNcbn07XG4iXX0=","/**\n * @license\n * Copyright 2023 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { padCommon } from './pad_webgpu';\nimport { getSwitchedCoords } from './transpose_webgpu';\nimport { getCoordsDataType, getCoordsFromIndexSnippet, getMainHeaderString as main } from './webgpu_program';\nimport { computeDispatch, flatDispatchLayout } from './webgpu_util';\nexport class SpaceToBatchNDProgram {\n    constructor(xShape, paddedXShape, paddings, reshapedPaddedXShape, newDim, paddedXShapeStridesShapeLength) {\n        this.variableNames = ['x'];\n        this.outputShape = [];\n        this.uniforms = '';\n        this.workgroupSize = [64, 1, 1];\n        this.size = true;\n        const outputShape = new Array(reshapedPaddedXShape.length);\n        for (let i = 0; i < outputShape.length; i++) {\n            outputShape[i] = reshapedPaddedXShape[newDim[i]];\n        }\n        this.outputShape = outputShape;\n        this.newDim = newDim;\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize);\n        this.xShape = xShape;\n        this.paddedXShape = paddedXShape;\n        this.uniforms += `reshapedPaddedXShape : ${getCoordsDataType(reshapedPaddedXShape.length)}, paddedXShapeStrides : ${getCoordsDataType(paddedXShapeStridesShapeLength)}, `;\n        paddings.map((_, i) => {\n            this.uniforms += ` pad${i} : vec2<i32>,`;\n        });\n        this.shaderKey = `spaceToBatchND_${newDim}`;\n    }\n    getUserCode() {\n        const dtype = getCoordsDataType(this.outputShape.length);\n        const switched = getSwitchedCoords(this.newDim);\n        const userCode = `\n      ${getCoordsFromIndexSnippet(this.paddedXShape, 'PaddedX')}\n      ${main('index')} {\n        if(index < uniforms.size) {\n          let coords = getCoordsFromIndex(index);\n          let switchedIndex = getIndexFromCoords${this.outputShape.length}D(${dtype}(${switched}), uniforms.reshapedPaddedXShape);\n          let paddedCoords = getPaddedXCoordsFromIndex(switchedIndex);\n          ${padCommon(this.xShape, true)}\n        }\n      }\n    `;\n        return userCode;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3BhY2VfdG9fYmF0Y2hORF93ZWJncHUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9zcGFjZV90b19iYXRjaE5EX3dlYmdwdS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQUMsU0FBUyxFQUFDLE1BQU0sY0FBYyxDQUFDO0FBQ3ZDLE9BQU8sRUFBQyxpQkFBaUIsRUFBQyxNQUFNLG9CQUFvQixDQUFDO0FBQ3JELE9BQU8sRUFBQyxpQkFBaUIsRUFBRSx5QkFBeUIsRUFBRSxtQkFBbUIsSUFBSSxJQUFJLEVBQWdCLE1BQU0sa0JBQWtCLENBQUM7QUFDMUgsT0FBTyxFQUFDLGVBQWUsRUFBRSxrQkFBa0IsRUFBQyxNQUFNLGVBQWUsQ0FBQztBQUVsRSxNQUFNLE9BQU8scUJBQXFCO0lBYWhDLFlBQ0ksTUFBZ0IsRUFBRSxZQUFzQixFQUN4QyxRQUFpQyxFQUFFLG9CQUE4QixFQUNqRSxNQUFnQixFQUFFLDhCQUFzQztRQWY1RCxrQkFBYSxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDdEIsZ0JBQVcsR0FBYSxFQUFFLENBQUM7UUFJM0IsYUFBUSxHQUFHLEVBQUUsQ0FBQztRQUNkLGtCQUFhLEdBQTZCLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUlyRCxTQUFJLEdBQUcsSUFBSSxDQUFDO1FBTVYsTUFBTSxXQUFXLEdBQWEsSUFBSSxLQUFLLENBQUMsb0JBQW9CLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDckUsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFdBQVcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDM0MsV0FBVyxDQUFDLENBQUMsQ0FBQyxHQUFHLG9CQUFvQixDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ2xEO1FBQ0QsSUFBSSxDQUFDLFdBQVcsR0FBRyxXQUFXLENBQUM7UUFDL0IsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7UUFDckIsSUFBSSxDQUFDLGNBQWMsR0FBRyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDM0QsSUFBSSxDQUFDLFFBQVEsR0FBRyxlQUFlLENBQzNCLElBQUksQ0FBQyxjQUFjLEVBQUUsSUFBSSxDQUFDLFdBQVcsRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7UUFDL0QsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7UUFDckIsSUFBSSxDQUFDLFlBQVksR0FBRyxZQUFZLENBQUM7UUFDakMsSUFBSSxDQUFDLFFBQVEsSUFBSSwwQkFDYixpQkFBaUIsQ0FDYixvQkFBb0IsQ0FBQyxNQUFNLENBQUMsMkJBQ2hDLGlCQUFpQixDQUFDLDhCQUE4QixDQUFDLElBQUksQ0FBQztRQUMxRCxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQ3BCLElBQUksQ0FBQyxRQUFRLElBQUksT0FBTyxDQUFDLGVBQWUsQ0FBQztRQUMzQyxDQUFDLENBQUMsQ0FBQztRQUNILElBQUksQ0FBQyxTQUFTLEdBQUcsa0JBQWtCLE1BQU0sRUFBRSxDQUFDO0lBQzlDLENBQUM7SUFFRCxXQUFXO1FBQ1QsTUFBTSxLQUFLLEdBQUcsaUJBQWlCLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUN6RCxNQUFNLFFBQVEsR0FBRyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7UUFFaEQsTUFBTSxRQUFRLEdBQUc7UUFDYix5QkFBeUIsQ0FBQyxJQUFJLENBQUMsWUFBWSxFQUFFLFNBQVMsQ0FBQztRQUN2RCxJQUFJLENBQUMsT0FBTyxDQUFDOzs7a0RBRzZCLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxLQUNqRSxLQUFLLElBQUksUUFBUTs7WUFFYixTQUFTLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUM7OztLQUduQyxDQUFDO1FBQ0YsT0FBTyxRQUFRLENBQUM7SUFDbEIsQ0FBQztDQUNGIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjMgR29vZ2xlIExMQy5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge3BhZENvbW1vbn0gZnJvbSAnLi9wYWRfd2ViZ3B1JztcbmltcG9ydCB7Z2V0U3dpdGNoZWRDb29yZHN9IGZyb20gJy4vdHJhbnNwb3NlX3dlYmdwdSc7XG5pbXBvcnQge2dldENvb3Jkc0RhdGFUeXBlLCBnZXRDb29yZHNGcm9tSW5kZXhTbmlwcGV0LCBnZXRNYWluSGVhZGVyU3RyaW5nIGFzIG1haW4sIFdlYkdQVVByb2dyYW19IGZyb20gJy4vd2ViZ3B1X3Byb2dyYW0nO1xuaW1wb3J0IHtjb21wdXRlRGlzcGF0Y2gsIGZsYXREaXNwYXRjaExheW91dH0gZnJvbSAnLi93ZWJncHVfdXRpbCc7XG5cbmV4cG9ydCBjbGFzcyBTcGFjZVRvQmF0Y2hORFByb2dyYW0gaW1wbGVtZW50cyBXZWJHUFVQcm9ncmFtIHtcbiAgdmFyaWFibGVOYW1lcyA9IFsneCddO1xuICBvdXRwdXRTaGFwZTogbnVtYmVyW10gPSBbXTtcbiAgc2hhZGVyS2V5OiBzdHJpbmc7XG4gIGRpc3BhdGNoTGF5b3V0OiB7eDogbnVtYmVyW119O1xuICBkaXNwYXRjaDogW251bWJlciwgbnVtYmVyLCBudW1iZXJdO1xuICB1bmlmb3JtcyA9ICcnO1xuICB3b3JrZ3JvdXBTaXplOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl0gPSBbNjQsIDEsIDFdO1xuICBuZXdEaW06IG51bWJlcltdO1xuICB4U2hhcGU6IG51bWJlcltdO1xuICBwYWRkZWRYU2hhcGU6IG51bWJlcltdO1xuICBzaXplID0gdHJ1ZTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICAgIHhTaGFwZTogbnVtYmVyW10sIHBhZGRlZFhTaGFwZTogbnVtYmVyW10sXG4gICAgICBwYWRkaW5nczogQXJyYXk8W251bWJlciwgbnVtYmVyXT4sIHJlc2hhcGVkUGFkZGVkWFNoYXBlOiBudW1iZXJbXSxcbiAgICAgIG5ld0RpbTogbnVtYmVyW10sIHBhZGRlZFhTaGFwZVN0cmlkZXNTaGFwZUxlbmd0aDogbnVtYmVyKSB7XG4gICAgY29uc3Qgb3V0cHV0U2hhcGU6IG51bWJlcltdID0gbmV3IEFycmF5KHJlc2hhcGVkUGFkZGVkWFNoYXBlLmxlbmd0aCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBvdXRwdXRTaGFwZS5sZW5ndGg7IGkrKykge1xuICAgICAgb3V0cHV0U2hhcGVbaV0gPSByZXNoYXBlZFBhZGRlZFhTaGFwZVtuZXdEaW1baV1dO1xuICAgIH1cbiAgICB0aGlzLm91dHB1dFNoYXBlID0gb3V0cHV0U2hhcGU7XG4gICAgdGhpcy5uZXdEaW0gPSBuZXdEaW07XG4gICAgdGhpcy5kaXNwYXRjaExheW91dCA9IGZsYXREaXNwYXRjaExheW91dCh0aGlzLm91dHB1dFNoYXBlKTtcbiAgICB0aGlzLmRpc3BhdGNoID0gY29tcHV0ZURpc3BhdGNoKFxuICAgICAgICB0aGlzLmRpc3BhdGNoTGF5b3V0LCB0aGlzLm91dHB1dFNoYXBlLCB0aGlzLndvcmtncm91cFNpemUpO1xuICAgIHRoaXMueFNoYXBlID0geFNoYXBlO1xuICAgIHRoaXMucGFkZGVkWFNoYXBlID0gcGFkZGVkWFNoYXBlO1xuICAgIHRoaXMudW5pZm9ybXMgKz0gYHJlc2hhcGVkUGFkZGVkWFNoYXBlIDogJHtcbiAgICAgICAgZ2V0Q29vcmRzRGF0YVR5cGUoXG4gICAgICAgICAgICByZXNoYXBlZFBhZGRlZFhTaGFwZS5sZW5ndGgpfSwgcGFkZGVkWFNoYXBlU3RyaWRlcyA6ICR7XG4gICAgICAgIGdldENvb3Jkc0RhdGFUeXBlKHBhZGRlZFhTaGFwZVN0cmlkZXNTaGFwZUxlbmd0aCl9LCBgO1xuICAgIHBhZGRpbmdzLm1hcCgoXywgaSkgPT4ge1xuICAgICAgdGhpcy51bmlmb3JtcyArPSBgIHBhZCR7aX0gOiB2ZWMyPGkzMj4sYDtcbiAgICB9KTtcbiAgICB0aGlzLnNoYWRlcktleSA9IGBzcGFjZVRvQmF0Y2hORF8ke25ld0RpbX1gO1xuICB9XG5cbiAgZ2V0VXNlckNvZGUoKTogc3RyaW5nIHtcbiAgICBjb25zdCBkdHlwZSA9IGdldENvb3Jkc0RhdGFUeXBlKHRoaXMub3V0cHV0U2hhcGUubGVuZ3RoKTtcbiAgICBjb25zdCBzd2l0Y2hlZCA9IGdldFN3aXRjaGVkQ29vcmRzKHRoaXMubmV3RGltKTtcblxuICAgIGNvbnN0IHVzZXJDb2RlID0gYFxuICAgICAgJHtnZXRDb29yZHNGcm9tSW5kZXhTbmlwcGV0KHRoaXMucGFkZGVkWFNoYXBlLCAnUGFkZGVkWCcpfVxuICAgICAgJHttYWluKCdpbmRleCcpfSB7XG4gICAgICAgIGlmKGluZGV4IDwgdW5pZm9ybXMuc2l6ZSkge1xuICAgICAgICAgIGxldCBjb29yZHMgPSBnZXRDb29yZHNGcm9tSW5kZXgoaW5kZXgpO1xuICAgICAgICAgIGxldCBzd2l0Y2hlZEluZGV4ID0gZ2V0SW5kZXhGcm9tQ29vcmRzJHt0aGlzLm91dHB1dFNoYXBlLmxlbmd0aH1EKCR7XG4gICAgICAgIGR0eXBlfSgke3N3aXRjaGVkfSksIHVuaWZvcm1zLnJlc2hhcGVkUGFkZGVkWFNoYXBlKTtcbiAgICAgICAgICBsZXQgcGFkZGVkQ29vcmRzID0gZ2V0UGFkZGVkWENvb3Jkc0Zyb21JbmRleChzd2l0Y2hlZEluZGV4KTtcbiAgICAgICAgICAke3BhZENvbW1vbih0aGlzLnhTaGFwZSwgdHJ1ZSl9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICBgO1xuICAgIHJldHVybiB1c2VyQ29kZTtcbiAgfVxufVxuIl19","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { backend_util, SpaceToBatchND, util } from '@tensorflow/tfjs-core';\nimport { SpaceToBatchNDProgram } from '../space_to_batchND_webgpu';\nimport { reshape } from './Reshape';\nexport const spaceToBatchND = (args) => {\n    const { inputs, backend, attrs } = args;\n    const { x } = inputs;\n    const { blockShape, paddings } = attrs;\n    util.assert(x.shape.length <= 4, () => 'spaceToBatchND for rank > 4 with a WebGPU backend not ' +\n        'implemented yet');\n    const prod = blockShape.reduce((a, b) => a * b);\n    const completePaddings = [[0, 0]];\n    completePaddings.push(...paddings);\n    for (let i = 1 + blockShape.length; i < x.shape.length; ++i) {\n        completePaddings.push([0, 0]);\n    }\n    const paddedXShape = completePaddings.map((p, i) => p[0] /* beforePad */ + x.shape[i] + p[1] /* afterPad */);\n    const reshapedPaddedShape = backend_util.getReshaped(paddedXShape, blockShape, prod, false);\n    const permutedReshapedPaddedPermutation = backend_util.getPermuted(reshapedPaddedShape.length, blockShape.length, false);\n    const flattenShape = backend_util.getReshapedPermuted(paddedXShape, blockShape, prod, false);\n    const paddedXShapeStrides = util.computeStrides(paddedXShape);\n    const program = new SpaceToBatchNDProgram(x.shape, paddedXShape, completePaddings, reshapedPaddedShape, permutedReshapedPaddedPermutation, paddedXShapeStrides.length);\n    const uniformData = [\n        { type: 'int32', data: reshapedPaddedShape },\n        { type: 'int32', data: paddedXShapeStrides }\n    ];\n    completePaddings.map(p => uniformData.push({ type: 'int32', data: [p[0], p[1]] }));\n    const paddedXT = backend.runWebGPUProgram(program, [x], x.dtype, uniformData);\n    const result = reshape({ inputs: { x: paddedXT }, backend, attrs: { shape: flattenShape } });\n    backend.disposeData(paddedXT.dataId);\n    return result;\n};\nexport const spaceToBatchNDConfig = {\n    kernelName: SpaceToBatchND,\n    backendName: 'webgpu',\n    kernelFunc: spaceToBatchND\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU3BhY2VUb0JhdGNoTkQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9rZXJuZWxzL1NwYWNlVG9CYXRjaE5ELnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sRUFBQyxZQUFZLEVBQTRCLGNBQWMsRUFBeUQsSUFBSSxFQUFDLE1BQU0sdUJBQXVCLENBQUM7QUFHMUosT0FBTyxFQUFDLHFCQUFxQixFQUFDLE1BQU0sNEJBQTRCLENBQUM7QUFFakUsT0FBTyxFQUFDLE9BQU8sRUFBQyxNQUFNLFdBQVcsQ0FBQztBQUVsQyxNQUFNLENBQUMsTUFBTSxjQUFjLEdBQUcsQ0FBQyxJQUk5QixFQUFjLEVBQUU7SUFDZixNQUFNLEVBQUMsTUFBTSxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUMsR0FBRyxJQUFJLENBQUM7SUFDdEMsTUFBTSxFQUFDLENBQUMsRUFBQyxHQUFHLE1BQU0sQ0FBQztJQUNuQixNQUFNLEVBQUMsVUFBVSxFQUFFLFFBQVEsRUFBQyxHQUFHLEtBQUssQ0FBQztJQUVyQyxJQUFJLENBQUMsTUFBTSxDQUNQLENBQUMsQ0FBQyxLQUFLLENBQUMsTUFBTSxJQUFJLENBQUMsRUFDbkIsR0FBRyxFQUFFLENBQUMsd0RBQXdEO1FBQzFELGlCQUFpQixDQUFDLENBQUM7SUFFM0IsTUFBTSxJQUFJLEdBQUcsVUFBVSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztJQUVoRCxNQUFNLGdCQUFnQixHQUE0QixDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDM0QsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLEdBQUcsUUFBbUMsQ0FBQyxDQUFDO0lBQzlELEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLFVBQVUsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxLQUFLLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBQyxFQUFFO1FBQzNELGdCQUFnQixDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO0tBQy9CO0lBRUQsTUFBTSxZQUFZLEdBQUcsZ0JBQWdCLENBQUMsR0FBRyxDQUNyQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxlQUFlLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsY0FBYyxDQUFDLENBQUM7SUFDdkUsTUFBTSxtQkFBbUIsR0FDckIsWUFBWSxDQUFDLFdBQVcsQ0FBQyxZQUFZLEVBQUUsVUFBVSxFQUFFLElBQUksRUFBRSxLQUFLLENBQUMsQ0FBQztJQUVwRSxNQUFNLGlDQUFpQyxHQUFHLFlBQVksQ0FBQyxXQUFXLENBQzlELG1CQUFtQixDQUFDLE1BQU0sRUFBRSxVQUFVLENBQUMsTUFBTSxFQUFFLEtBQUssQ0FBQyxDQUFDO0lBRTFELE1BQU0sWUFBWSxHQUNkLFlBQVksQ0FBQyxtQkFBbUIsQ0FBQyxZQUFZLEVBQUUsVUFBVSxFQUFFLElBQUksRUFBRSxLQUFLLENBQUMsQ0FBQztJQUU1RSxNQUFNLG1CQUFtQixHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsWUFBWSxDQUFDLENBQUM7SUFDOUQsTUFBTSxPQUFPLEdBQUcsSUFBSSxxQkFBcUIsQ0FDckMsQ0FBQyxDQUFDLEtBQUssRUFBRSxZQUFZLEVBQUUsZ0JBQWdCLEVBQUUsbUJBQW1CLEVBQzVELGlDQUFpQyxFQUFFLG1CQUFtQixDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ25FLE1BQU0sV0FBVyxHQUFHO1FBQ2xCLEVBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsbUJBQW1CLEVBQUM7UUFDMUMsRUFBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxtQkFBbUIsRUFBQztLQUMzQyxDQUFDO0lBQ0YsZ0JBQWdCLENBQUMsR0FBRyxDQUNoQixDQUFDLENBQUMsRUFBRSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsRUFBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBQyxDQUFDLENBQUMsQ0FBQztJQUNoRSxNQUFNLFFBQVEsR0FBRyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEtBQUssRUFBRSxXQUFXLENBQUMsQ0FBQztJQUM5RSxNQUFNLE1BQU0sR0FDUixPQUFPLENBQUMsRUFBQyxNQUFNLEVBQUUsRUFBQyxDQUFDLEVBQUUsUUFBUSxFQUFDLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxFQUFDLEtBQUssRUFBRSxZQUFZLEVBQUMsRUFBQyxDQUFDLENBQUM7SUFDNUUsT0FBTyxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDckMsT0FBTyxNQUFNLENBQUM7QUFDaEIsQ0FBQyxDQUFDO0FBRUYsTUFBTSxDQUFDLE1BQU0sb0JBQW9CLEdBQWlCO0lBQ2hELFVBQVUsRUFBRSxjQUFjO0lBQzFCLFdBQVcsRUFBRSxRQUFRO0lBQ3JCLFVBQVUsRUFBRSxjQUF1QztDQUNwRCxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge2JhY2tlbmRfdXRpbCwgS2VybmVsQ29uZmlnLCBLZXJuZWxGdW5jLCBTcGFjZVRvQmF0Y2hORCwgU3BhY2VUb0JhdGNoTkRBdHRycywgU3BhY2VUb0JhdGNoTkRJbnB1dHMsIFRlbnNvckluZm8sIHV0aWx9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7V2ViR1BVQmFja2VuZH0gZnJvbSAnLi4vYmFja2VuZF93ZWJncHUnO1xuaW1wb3J0IHtTcGFjZVRvQmF0Y2hORFByb2dyYW19IGZyb20gJy4uL3NwYWNlX3RvX2JhdGNoTkRfd2ViZ3B1JztcblxuaW1wb3J0IHtyZXNoYXBlfSBmcm9tICcuL1Jlc2hhcGUnO1xuXG5leHBvcnQgY29uc3Qgc3BhY2VUb0JhdGNoTkQgPSAoYXJnczoge1xuICBpbnB1dHM6IFNwYWNlVG9CYXRjaE5ESW5wdXRzLFxuICBiYWNrZW5kOiBXZWJHUFVCYWNrZW5kLFxuICBhdHRyczogU3BhY2VUb0JhdGNoTkRBdHRyc1xufSk6IFRlbnNvckluZm8gPT4ge1xuICBjb25zdCB7aW5wdXRzLCBiYWNrZW5kLCBhdHRyc30gPSBhcmdzO1xuICBjb25zdCB7eH0gPSBpbnB1dHM7XG4gIGNvbnN0IHtibG9ja1NoYXBlLCBwYWRkaW5nc30gPSBhdHRycztcblxuICB1dGlsLmFzc2VydChcbiAgICAgIHguc2hhcGUubGVuZ3RoIDw9IDQsXG4gICAgICAoKSA9PiAnc3BhY2VUb0JhdGNoTkQgZm9yIHJhbmsgPiA0IHdpdGggYSBXZWJHUFUgYmFja2VuZCBub3QgJyArXG4gICAgICAgICAgJ2ltcGxlbWVudGVkIHlldCcpO1xuXG4gIGNvbnN0IHByb2QgPSBibG9ja1NoYXBlLnJlZHVjZSgoYSwgYikgPT4gYSAqIGIpO1xuXG4gIGNvbnN0IGNvbXBsZXRlUGFkZGluZ3M6IEFycmF5PFtudW1iZXIsIG51bWJlcl0+ID0gW1swLCAwXV07XG4gIGNvbXBsZXRlUGFkZGluZ3MucHVzaCguLi5wYWRkaW5ncyBhcyBBcnJheTxbbnVtYmVyLCBudW1iZXJdPik7XG4gIGZvciAobGV0IGkgPSAxICsgYmxvY2tTaGFwZS5sZW5ndGg7IGkgPCB4LnNoYXBlLmxlbmd0aDsgKytpKSB7XG4gICAgY29tcGxldGVQYWRkaW5ncy5wdXNoKFswLCAwXSk7XG4gIH1cblxuICBjb25zdCBwYWRkZWRYU2hhcGUgPSBjb21wbGV0ZVBhZGRpbmdzLm1hcChcbiAgICAgIChwLCBpKSA9PiBwWzBdIC8qIGJlZm9yZVBhZCAqLyArIHguc2hhcGVbaV0gKyBwWzFdIC8qIGFmdGVyUGFkICovKTtcbiAgY29uc3QgcmVzaGFwZWRQYWRkZWRTaGFwZSA9XG4gICAgICBiYWNrZW5kX3V0aWwuZ2V0UmVzaGFwZWQocGFkZGVkWFNoYXBlLCBibG9ja1NoYXBlLCBwcm9kLCBmYWxzZSk7XG5cbiAgY29uc3QgcGVybXV0ZWRSZXNoYXBlZFBhZGRlZFBlcm11dGF0aW9uID0gYmFja2VuZF91dGlsLmdldFBlcm11dGVkKFxuICAgICAgcmVzaGFwZWRQYWRkZWRTaGFwZS5sZW5ndGgsIGJsb2NrU2hhcGUubGVuZ3RoLCBmYWxzZSk7XG5cbiAgY29uc3QgZmxhdHRlblNoYXBlID1cbiAgICAgIGJhY2tlbmRfdXRpbC5nZXRSZXNoYXBlZFBlcm11dGVkKHBhZGRlZFhTaGFwZSwgYmxvY2tTaGFwZSwgcHJvZCwgZmFsc2UpO1xuXG4gIGNvbnN0IHBhZGRlZFhTaGFwZVN0cmlkZXMgPSB1dGlsLmNvbXB1dGVTdHJpZGVzKHBhZGRlZFhTaGFwZSk7XG4gIGNvbnN0IHByb2dyYW0gPSBuZXcgU3BhY2VUb0JhdGNoTkRQcm9ncmFtKFxuICAgICAgeC5zaGFwZSwgcGFkZGVkWFNoYXBlLCBjb21wbGV0ZVBhZGRpbmdzLCByZXNoYXBlZFBhZGRlZFNoYXBlLFxuICAgICAgcGVybXV0ZWRSZXNoYXBlZFBhZGRlZFBlcm11dGF0aW9uLCBwYWRkZWRYU2hhcGVTdHJpZGVzLmxlbmd0aCk7XG4gIGNvbnN0IHVuaWZvcm1EYXRhID0gW1xuICAgIHt0eXBlOiAnaW50MzInLCBkYXRhOiByZXNoYXBlZFBhZGRlZFNoYXBlfSxcbiAgICB7dHlwZTogJ2ludDMyJywgZGF0YTogcGFkZGVkWFNoYXBlU3RyaWRlc31cbiAgXTtcbiAgY29tcGxldGVQYWRkaW5ncy5tYXAoXG4gICAgICBwID0+IHVuaWZvcm1EYXRhLnB1c2goe3R5cGU6ICdpbnQzMicsIGRhdGE6IFtwWzBdLCBwWzFdXX0pKTtcbiAgY29uc3QgcGFkZGVkWFQgPSBiYWNrZW5kLnJ1bldlYkdQVVByb2dyYW0ocHJvZ3JhbSwgW3hdLCB4LmR0eXBlLCB1bmlmb3JtRGF0YSk7XG4gIGNvbnN0IHJlc3VsdCA9XG4gICAgICByZXNoYXBlKHtpbnB1dHM6IHt4OiBwYWRkZWRYVH0sIGJhY2tlbmQsIGF0dHJzOiB7c2hhcGU6IGZsYXR0ZW5TaGFwZX19KTtcbiAgYmFja2VuZC5kaXNwb3NlRGF0YShwYWRkZWRYVC5kYXRhSWQpO1xuICByZXR1cm4gcmVzdWx0O1xufTtcblxuZXhwb3J0IGNvbnN0IHNwYWNlVG9CYXRjaE5EQ29uZmlnOiBLZXJuZWxDb25maWcgPSB7XG4gIGtlcm5lbE5hbWU6IFNwYWNlVG9CYXRjaE5ELFxuICBiYWNrZW5kTmFtZTogJ3dlYmdwdScsXG4gIGtlcm5lbEZ1bmM6IHNwYWNlVG9CYXRjaE5EIGFzIHVua25vd24gYXMgS2VybmVsRnVuY1xufTtcbiJdfQ==","/**\n * @license\n * Copyright 2023 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { atomicAddSnippet } from './shader_util';\nimport { getMainHeaderString as main } from './webgpu_program';\nimport { computeDispatch, flatDispatchLayout } from './webgpu_util';\nexport class SparseSegmentSumProgram {\n    constructor(outShape, sparseSize, outputDtype) {\n        this.variableNames = ['input', 'indices', 'segmentIds'];\n        this.outputShape = [];\n        this.uniforms = 'segmentSize : i32, sparseSize : i32,';\n        this.workgroupSize = [64, 1, 1];\n        this.atomic = true;\n        this.outputShape = outShape;\n        this.type = outputDtype;\n        this.dispatchLayout = flatDispatchLayout([sparseSize]);\n        this.dispatch =\n            computeDispatch(this.dispatchLayout, [sparseSize], this.workgroupSize);\n        this.shaderKey = 'sparseSegmentSum';\n    }\n    getUserCode() {\n        const userCode = `\n    ${main('index')} {\n      if (index < uniforms.sparseSize) {\n        let indexInSegmentIds = index / uniforms.segmentSize;\n        let indexInSegment = index % uniforms.segmentSize;\n        let indexInInput = indices[indexInSegmentIds];\n        let segmentId = segmentIds[indexInSegmentIds];\n\n        let value = input[indexInInput * uniforms.segmentSize + indexInSegment];\n        let outIndex = segmentId * uniforms.segmentSize + indexInSegment;\n        ${atomicAddSnippet('&result[outIndex]', 'value', this.type)}\n      }\n    }\n  `;\n        return userCode;\n    }\n}\nexport class SparseSegmentIdCountProgram {\n    constructor(outShape, segmentIdsShape) {\n        this.variableNames = ['segmentIds'];\n        this.outputShape = [];\n        this.workgroupSize = [64, 1, 1];\n        this.atomic = true;\n        this.outputShape = [outShape];\n        this.dispatchLayout = flatDispatchLayout(segmentIdsShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, segmentIdsShape, this.workgroupSize);\n        this.shaderKey = 'sparseSegmentIdCountProgram';\n    }\n    getUserCode() {\n        const userCode = `\n    ${main('index')} {\n      if (index < uniforms.segmentIdsShape) {\n        let segmentId = segmentIds[index];\n        ${atomicAddSnippet('&result[segmentId]', '1', 'int32')}\n      }\n    }\n  `;\n        return userCode;\n    }\n}\nexport class SparseSegmentMeanProgram {\n    constructor(outShape, outputDtype) {\n        this.variableNames = ['segmentSum', 'sameSegmentIdCount'];\n        this.outputShape = [];\n        this.uniforms = 'segmentSize : i32';\n        this.workgroupSize = [64, 1, 1];\n        this.size = true;\n        this.outputShape = outShape;\n        this.type = outputDtype;\n        this.dispatchLayout = flatDispatchLayout(outShape);\n        this.dispatch =\n            computeDispatch(this.dispatchLayout, outShape, this.workgroupSize);\n        this.shaderKey = 'sparseSegmentMean';\n    }\n    getUserCode() {\n        const userCode = `\n    ${main('index')} {\n      if (index < uniforms.size) {\n        let segmentId = index / uniforms.segmentSize;\n        let count = sameSegmentIdCount[segmentId];\n        if (count != 0) {\n          ${this.type === 'float32' ?\n            'setOutputAtIndex(index, segmentSum[index] / f32(count));' :\n            'setOutputAtIndexI32(index, segmentSum[index] / count);'}\n        }\n      }\n    }\n  `;\n        return userCode;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3BhcnNlX3NlZ21lbnRfcmVkdWNlX3dlYmdwdS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL3NwYXJzZV9zZWdtZW50X3JlZHVjZV93ZWJncHUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBSUgsT0FBTyxFQUFDLGdCQUFnQixFQUFDLE1BQU0sZUFBZSxDQUFDO0FBQy9DLE9BQU8sRUFBQyxtQkFBbUIsSUFBSSxJQUFJLEVBQWdCLE1BQU0sa0JBQWtCLENBQUM7QUFDNUUsT0FBTyxFQUFDLGVBQWUsRUFBRSxrQkFBa0IsRUFBQyxNQUFNLGVBQWUsQ0FBQztBQUVsRSxNQUFNLE9BQU8sdUJBQXVCO0lBV2xDLFlBQVksUUFBa0IsRUFBRSxVQUFrQixFQUFFLFdBQXFCO1FBVnpFLGtCQUFhLEdBQUcsQ0FBQyxPQUFPLEVBQUUsU0FBUyxFQUFFLFlBQVksQ0FBQyxDQUFDO1FBQ25ELGdCQUFXLEdBQWEsRUFBRSxDQUFDO1FBSTNCLGFBQVEsR0FBRyxzQ0FBc0MsQ0FBQztRQUNsRCxrQkFBYSxHQUE2QixDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDckQsV0FBTSxHQUFHLElBQUksQ0FBQztRQUlaLElBQUksQ0FBQyxXQUFXLEdBQUcsUUFBUSxDQUFDO1FBQzVCLElBQUksQ0FBQyxJQUFJLEdBQUcsV0FBVyxDQUFDO1FBQ3hCLElBQUksQ0FBQyxjQUFjLEdBQUcsa0JBQWtCLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDO1FBQ3ZELElBQUksQ0FBQyxRQUFRO1lBQ1QsZUFBZSxDQUFDLElBQUksQ0FBQyxjQUFjLEVBQUUsQ0FBQyxVQUFVLENBQUMsRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7UUFFM0UsSUFBSSxDQUFDLFNBQVMsR0FBRyxrQkFBa0IsQ0FBQztJQUN0QyxDQUFDO0lBRUQsV0FBVztRQUNULE1BQU0sUUFBUSxHQUFHO01BQ2YsSUFBSSxDQUFDLE9BQU8sQ0FBQzs7Ozs7Ozs7O1VBVVgsZ0JBQWdCLENBQ1osbUJBQW1CLEVBQUUsT0FBTyxFQUFFLElBQUksQ0FBQyxJQUEyQixDQUFDOzs7R0FHeEUsQ0FBQztRQUNBLE9BQU8sUUFBUSxDQUFDO0lBQ2xCLENBQUM7Q0FDRjtBQUVELE1BQU0sT0FBTywyQkFBMkI7SUFTdEMsWUFBWSxRQUFnQixFQUFFLGVBQXlCO1FBUnZELGtCQUFhLEdBQUcsQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUMvQixnQkFBVyxHQUFhLEVBQUUsQ0FBQztRQUkzQixrQkFBYSxHQUE2QixDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDckQsV0FBTSxHQUFHLElBQUksQ0FBQztRQUdaLElBQUksQ0FBQyxXQUFXLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUM5QixJQUFJLENBQUMsY0FBYyxHQUFHLGtCQUFrQixDQUFDLGVBQWUsQ0FBQyxDQUFDO1FBQzFELElBQUksQ0FBQyxRQUFRLEdBQUcsZUFBZSxDQUMzQixJQUFJLENBQUMsY0FBYyxFQUFFLGVBQWUsRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7UUFFOUQsSUFBSSxDQUFDLFNBQVMsR0FBRyw2QkFBNkIsQ0FBQztJQUNqRCxDQUFDO0lBRUQsV0FBVztRQUNULE1BQU0sUUFBUSxHQUFHO01BQ2YsSUFBSSxDQUFDLE9BQU8sQ0FBQzs7O1VBR1QsZ0JBQWdCLENBQUMsb0JBQW9CLEVBQUUsR0FBRyxFQUFFLE9BQU8sQ0FBQzs7O0dBRzNELENBQUM7UUFDQSxPQUFPLFFBQVEsQ0FBQztJQUNsQixDQUFDO0NBQ0Y7QUFFRCxNQUFNLE9BQU8sd0JBQXdCO0lBV25DLFlBQVksUUFBa0IsRUFBRSxXQUFxQjtRQVZyRCxrQkFBYSxHQUFHLENBQUMsWUFBWSxFQUFFLG9CQUFvQixDQUFDLENBQUM7UUFDckQsZ0JBQVcsR0FBYSxFQUFFLENBQUM7UUFJM0IsYUFBUSxHQUFHLG1CQUFtQixDQUFDO1FBQy9CLGtCQUFhLEdBQTZCLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUNyRCxTQUFJLEdBQUcsSUFBSSxDQUFDO1FBSVYsSUFBSSxDQUFDLFdBQVcsR0FBRyxRQUFRLENBQUM7UUFDNUIsSUFBSSxDQUFDLElBQUksR0FBRyxXQUFXLENBQUM7UUFDeEIsSUFBSSxDQUFDLGNBQWMsR0FBRyxrQkFBa0IsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUNuRCxJQUFJLENBQUMsUUFBUTtZQUNULGVBQWUsQ0FBQyxJQUFJLENBQUMsY0FBYyxFQUFFLFFBQVEsRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7UUFFdkUsSUFBSSxDQUFDLFNBQVMsR0FBRyxtQkFBbUIsQ0FBQztJQUN2QyxDQUFDO0lBRUQsV0FBVztRQUNULE1BQU0sUUFBUSxHQUFHO01BQ2YsSUFBSSxDQUFDLE9BQU8sQ0FBQzs7Ozs7WUFNWCxJQUFJLENBQUMsSUFBSSxLQUFLLFNBQVMsQ0FBQyxDQUFDO1lBQ3JCLDBEQUEwRCxDQUFDLENBQUM7WUFDNUQsd0RBQXdEOzs7O0dBSWpFLENBQUM7UUFDQSxPQUFPLFFBQVEsQ0FBQztJQUNsQixDQUFDO0NBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMyBHb29nbGUgTExDLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7RGF0YVR5cGV9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7YXRvbWljQWRkU25pcHBldH0gZnJvbSAnLi9zaGFkZXJfdXRpbCc7XG5pbXBvcnQge2dldE1haW5IZWFkZXJTdHJpbmcgYXMgbWFpbiwgV2ViR1BVUHJvZ3JhbX0gZnJvbSAnLi93ZWJncHVfcHJvZ3JhbSc7XG5pbXBvcnQge2NvbXB1dGVEaXNwYXRjaCwgZmxhdERpc3BhdGNoTGF5b3V0fSBmcm9tICcuL3dlYmdwdV91dGlsJztcblxuZXhwb3J0IGNsYXNzIFNwYXJzZVNlZ21lbnRTdW1Qcm9ncmFtIGltcGxlbWVudHMgV2ViR1BVUHJvZ3JhbSB7XG4gIHZhcmlhYmxlTmFtZXMgPSBbJ2lucHV0JywgJ2luZGljZXMnLCAnc2VnbWVudElkcyddO1xuICBvdXRwdXRTaGFwZTogbnVtYmVyW10gPSBbXTtcbiAgc2hhZGVyS2V5OiBzdHJpbmc7XG4gIGRpc3BhdGNoTGF5b3V0OiB7eDogbnVtYmVyW119O1xuICBkaXNwYXRjaDogW251bWJlciwgbnVtYmVyLCBudW1iZXJdO1xuICB1bmlmb3JtcyA9ICdzZWdtZW50U2l6ZSA6IGkzMiwgc3BhcnNlU2l6ZSA6IGkzMiwnO1xuICB3b3JrZ3JvdXBTaXplOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl0gPSBbNjQsIDEsIDFdO1xuICBhdG9taWMgPSB0cnVlO1xuICB0eXBlOiBEYXRhVHlwZTtcblxuICBjb25zdHJ1Y3RvcihvdXRTaGFwZTogbnVtYmVyW10sIHNwYXJzZVNpemU6IG51bWJlciwgb3V0cHV0RHR5cGU6IERhdGFUeXBlKSB7XG4gICAgdGhpcy5vdXRwdXRTaGFwZSA9IG91dFNoYXBlO1xuICAgIHRoaXMudHlwZSA9IG91dHB1dER0eXBlO1xuICAgIHRoaXMuZGlzcGF0Y2hMYXlvdXQgPSBmbGF0RGlzcGF0Y2hMYXlvdXQoW3NwYXJzZVNpemVdKTtcbiAgICB0aGlzLmRpc3BhdGNoID1cbiAgICAgICAgY29tcHV0ZURpc3BhdGNoKHRoaXMuZGlzcGF0Y2hMYXlvdXQsIFtzcGFyc2VTaXplXSwgdGhpcy53b3JrZ3JvdXBTaXplKTtcblxuICAgIHRoaXMuc2hhZGVyS2V5ID0gJ3NwYXJzZVNlZ21lbnRTdW0nO1xuICB9XG5cbiAgZ2V0VXNlckNvZGUoKTogc3RyaW5nIHtcbiAgICBjb25zdCB1c2VyQ29kZSA9IGBcbiAgICAke21haW4oJ2luZGV4Jyl9IHtcbiAgICAgIGlmIChpbmRleCA8IHVuaWZvcm1zLnNwYXJzZVNpemUpIHtcbiAgICAgICAgbGV0IGluZGV4SW5TZWdtZW50SWRzID0gaW5kZXggLyB1bmlmb3Jtcy5zZWdtZW50U2l6ZTtcbiAgICAgICAgbGV0IGluZGV4SW5TZWdtZW50ID0gaW5kZXggJSB1bmlmb3Jtcy5zZWdtZW50U2l6ZTtcbiAgICAgICAgbGV0IGluZGV4SW5JbnB1dCA9IGluZGljZXNbaW5kZXhJblNlZ21lbnRJZHNdO1xuICAgICAgICBsZXQgc2VnbWVudElkID0gc2VnbWVudElkc1tpbmRleEluU2VnbWVudElkc107XG5cbiAgICAgICAgbGV0IHZhbHVlID0gaW5wdXRbaW5kZXhJbklucHV0ICogdW5pZm9ybXMuc2VnbWVudFNpemUgKyBpbmRleEluU2VnbWVudF07XG4gICAgICAgIGxldCBvdXRJbmRleCA9IHNlZ21lbnRJZCAqIHVuaWZvcm1zLnNlZ21lbnRTaXplICsgaW5kZXhJblNlZ21lbnQ7XG4gICAgICAgICR7XG4gICAgICAgIGF0b21pY0FkZFNuaXBwZXQoXG4gICAgICAgICAgICAnJnJlc3VsdFtvdXRJbmRleF0nLCAndmFsdWUnLCB0aGlzLnR5cGUgYXMgJ2Zsb2F0MzInIHwgJ2ludDMyJyl9XG4gICAgICB9XG4gICAgfVxuICBgO1xuICAgIHJldHVybiB1c2VyQ29kZTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgU3BhcnNlU2VnbWVudElkQ291bnRQcm9ncmFtIGltcGxlbWVudHMgV2ViR1BVUHJvZ3JhbSB7XG4gIHZhcmlhYmxlTmFtZXMgPSBbJ3NlZ21lbnRJZHMnXTtcbiAgb3V0cHV0U2hhcGU6IG51bWJlcltdID0gW107XG4gIHNoYWRlcktleTogc3RyaW5nO1xuICBkaXNwYXRjaExheW91dDoge3g6IG51bWJlcltdfTtcbiAgZGlzcGF0Y2g6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXTtcbiAgd29ya2dyb3VwU2l6ZTogW251bWJlciwgbnVtYmVyLCBudW1iZXJdID0gWzY0LCAxLCAxXTtcbiAgYXRvbWljID0gdHJ1ZTtcblxuICBjb25zdHJ1Y3RvcihvdXRTaGFwZTogbnVtYmVyLCBzZWdtZW50SWRzU2hhcGU6IG51bWJlcltdKSB7XG4gICAgdGhpcy5vdXRwdXRTaGFwZSA9IFtvdXRTaGFwZV07XG4gICAgdGhpcy5kaXNwYXRjaExheW91dCA9IGZsYXREaXNwYXRjaExheW91dChzZWdtZW50SWRzU2hhcGUpO1xuICAgIHRoaXMuZGlzcGF0Y2ggPSBjb21wdXRlRGlzcGF0Y2goXG4gICAgICAgIHRoaXMuZGlzcGF0Y2hMYXlvdXQsIHNlZ21lbnRJZHNTaGFwZSwgdGhpcy53b3JrZ3JvdXBTaXplKTtcblxuICAgIHRoaXMuc2hhZGVyS2V5ID0gJ3NwYXJzZVNlZ21lbnRJZENvdW50UHJvZ3JhbSc7XG4gIH1cblxuICBnZXRVc2VyQ29kZSgpOiBzdHJpbmcge1xuICAgIGNvbnN0IHVzZXJDb2RlID0gYFxuICAgICR7bWFpbignaW5kZXgnKX0ge1xuICAgICAgaWYgKGluZGV4IDwgdW5pZm9ybXMuc2VnbWVudElkc1NoYXBlKSB7XG4gICAgICAgIGxldCBzZWdtZW50SWQgPSBzZWdtZW50SWRzW2luZGV4XTtcbiAgICAgICAgJHthdG9taWNBZGRTbmlwcGV0KCcmcmVzdWx0W3NlZ21lbnRJZF0nLCAnMScsICdpbnQzMicpfVxuICAgICAgfVxuICAgIH1cbiAgYDtcbiAgICByZXR1cm4gdXNlckNvZGU7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFNwYXJzZVNlZ21lbnRNZWFuUHJvZ3JhbSBpbXBsZW1lbnRzIFdlYkdQVVByb2dyYW0ge1xuICB2YXJpYWJsZU5hbWVzID0gWydzZWdtZW50U3VtJywgJ3NhbWVTZWdtZW50SWRDb3VudCddO1xuICBvdXRwdXRTaGFwZTogbnVtYmVyW10gPSBbXTtcbiAgc2hhZGVyS2V5OiBzdHJpbmc7XG4gIGRpc3BhdGNoTGF5b3V0OiB7eDogbnVtYmVyW119O1xuICBkaXNwYXRjaDogW251bWJlciwgbnVtYmVyLCBudW1iZXJdO1xuICB1bmlmb3JtcyA9ICdzZWdtZW50U2l6ZSA6IGkzMic7XG4gIHdvcmtncm91cFNpemU6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXSA9IFs2NCwgMSwgMV07XG4gIHNpemUgPSB0cnVlO1xuICB0eXBlOiBEYXRhVHlwZTtcblxuICBjb25zdHJ1Y3RvcihvdXRTaGFwZTogbnVtYmVyW10sIG91dHB1dER0eXBlOiBEYXRhVHlwZSkge1xuICAgIHRoaXMub3V0cHV0U2hhcGUgPSBvdXRTaGFwZTtcbiAgICB0aGlzLnR5cGUgPSBvdXRwdXREdHlwZTtcbiAgICB0aGlzLmRpc3BhdGNoTGF5b3V0ID0gZmxhdERpc3BhdGNoTGF5b3V0KG91dFNoYXBlKTtcbiAgICB0aGlzLmRpc3BhdGNoID1cbiAgICAgICAgY29tcHV0ZURpc3BhdGNoKHRoaXMuZGlzcGF0Y2hMYXlvdXQsIG91dFNoYXBlLCB0aGlzLndvcmtncm91cFNpemUpO1xuXG4gICAgdGhpcy5zaGFkZXJLZXkgPSAnc3BhcnNlU2VnbWVudE1lYW4nO1xuICB9XG5cbiAgZ2V0VXNlckNvZGUoKTogc3RyaW5nIHtcbiAgICBjb25zdCB1c2VyQ29kZSA9IGBcbiAgICAke21haW4oJ2luZGV4Jyl9IHtcbiAgICAgIGlmIChpbmRleCA8IHVuaWZvcm1zLnNpemUpIHtcbiAgICAgICAgbGV0IHNlZ21lbnRJZCA9IGluZGV4IC8gdW5pZm9ybXMuc2VnbWVudFNpemU7XG4gICAgICAgIGxldCBjb3VudCA9IHNhbWVTZWdtZW50SWRDb3VudFtzZWdtZW50SWRdO1xuICAgICAgICBpZiAoY291bnQgIT0gMCkge1xuICAgICAgICAgICR7XG4gICAgICAgIHRoaXMudHlwZSA9PT0gJ2Zsb2F0MzInID9cbiAgICAgICAgICAgICdzZXRPdXRwdXRBdEluZGV4KGluZGV4LCBzZWdtZW50U3VtW2luZGV4XSAvIGYzMihjb3VudCkpOycgOlxuICAgICAgICAgICAgJ3NldE91dHB1dEF0SW5kZXhJMzIoaW5kZXgsIHNlZ21lbnRTdW1baW5kZXhdIC8gY291bnQpOyd9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIGA7XG4gICAgcmV0dXJuIHVzZXJDb2RlO1xuICB9XG59XG4iXX0=","/**\n * @license\n * Copyright 2023 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { util } from '@tensorflow/tfjs-core';\nimport { fill } from '../kernels/Fill';\nimport { SparseSegmentIdCountProgram, SparseSegmentMeanProgram, SparseSegmentSumProgram } from '../sparse_segment_reduce_webgpu';\nexport function sparseSegmentReduce(input, indices, segmentIds, isSum = false, backend) {\n    const inputSize = util.sizeFromShape(input.shape);\n    const segmentSize = inputSize / input.shape[0];\n    const dtype = input.dtype;\n    // Note that the current implementation assumes that segmentIds values are\n    // sorted.\n    const numIndices = util.sizeFromShape(indices.shape);\n    const $segmentIds = backend.readSync(segmentIds.dataId);\n    const lastSegmentIdPlusOne = numIndices > 0 ? $segmentIds[numIndices - 1] + 1 : 0;\n    const outputRows = lastSegmentIdPlusOne;\n    let program;\n    const outputShape = input.shape.slice();\n    outputShape[0] = outputRows;\n    const sparseSize = numIndices * segmentSize;\n    const sparseSegmentSum = fill({ backend, attrs: { shape: outputShape, value: 0, dtype } });\n    program = new SparseSegmentSumProgram(outputShape, sparseSize, dtype);\n    let uniformData = [\n        { type: 'int32', data: [segmentSize] }, { type: 'int32', data: [sparseSize] }\n    ];\n    const $sparseSegmentSum = backend.runWebGPUProgram(program, [input, indices, segmentIds], dtype, uniformData, sparseSegmentSum);\n    if (isSum) {\n        return $sparseSegmentSum;\n    }\n    const sparseSegmentIdCount = fill({ backend, attrs: { shape: [outputRows], value: 0, dtype: 'int32' } });\n    program = new SparseSegmentIdCountProgram(outputRows, segmentIds.shape);\n    const $sparseSegmentIdCount = backend.runWebGPUProgram(program, [segmentIds], 'int32', null, sparseSegmentIdCount);\n    const sparseSegmentMean = fill({ backend, attrs: { shape: outputShape, value: 0, dtype } });\n    program = new SparseSegmentMeanProgram(outputShape, dtype);\n    uniformData = [{ type: 'int32', data: [segmentSize] }];\n    const $sparseSegmentMean = backend.runWebGPUProgram(program, [$sparseSegmentSum, $sparseSegmentIdCount], dtype, uniformData, sparseSegmentMean);\n    backend.disposeData($sparseSegmentSum.dataId);\n    backend.disposeData($sparseSegmentIdCount.dataId);\n    return $sparseSegmentMean;\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3BhcnNlX3NlZ21lbnRfcmVkdWNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMva2VybmVsX3V0aWxzL3NwYXJzZV9zZWdtZW50X3JlZHVjZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQXlCLElBQUksRUFBQyxNQUFNLHVCQUF1QixDQUFDO0FBR25FLE9BQU8sRUFBQyxJQUFJLEVBQUMsTUFBTSxpQkFBaUIsQ0FBQztBQUNyQyxPQUFPLEVBQUMsMkJBQTJCLEVBQUUsd0JBQXdCLEVBQUUsdUJBQXVCLEVBQUMsTUFBTSxpQ0FBaUMsQ0FBQztBQUcvSCxNQUFNLFVBQVUsbUJBQW1CLENBQy9CLEtBQWlCLEVBQUUsT0FBbUIsRUFBRSxVQUFzQixFQUM5RCxLQUFLLEdBQUcsS0FBSyxFQUFFLE9BQXNCO0lBQ3ZDLE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ2xELE1BQU0sV0FBVyxHQUFHLFNBQVMsR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQy9DLE1BQU0sS0FBSyxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUM7SUFFMUIsMEVBQTBFO0lBQzFFLFVBQVU7SUFDVixNQUFNLFVBQVUsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUNyRCxNQUFNLFdBQVcsR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQWUsQ0FBQztJQUN0RSxNQUFNLG9CQUFvQixHQUN0QixVQUFVLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsVUFBVSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3pELE1BQU0sVUFBVSxHQUFHLG9CQUFvQixDQUFDO0lBRXhDLElBQUksT0FBc0IsQ0FBQztJQUMzQixNQUFNLFdBQVcsR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDLEtBQUssRUFBRSxDQUFDO0lBQ3hDLFdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxVQUFVLENBQUM7SUFFNUIsTUFBTSxVQUFVLEdBQUcsVUFBVSxHQUFHLFdBQVcsQ0FBQztJQUM1QyxNQUFNLGdCQUFnQixHQUNsQixJQUFJLENBQUMsRUFBQyxPQUFPLEVBQUUsS0FBSyxFQUFFLEVBQUMsS0FBSyxFQUFFLFdBQVcsRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFFLEtBQUssRUFBQyxFQUFDLENBQUMsQ0FBQztJQUNsRSxPQUFPLEdBQUcsSUFBSSx1QkFBdUIsQ0FBQyxXQUFXLEVBQUUsVUFBVSxFQUFFLEtBQUssQ0FBQyxDQUFDO0lBQ3RFLElBQUksV0FBVyxHQUFHO1FBQ2hCLEVBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsQ0FBQyxXQUFXLENBQUMsRUFBQyxFQUFFLEVBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsQ0FBQyxVQUFVLENBQUMsRUFBQztLQUMxRSxDQUFDO0lBQ0YsTUFBTSxpQkFBaUIsR0FBRyxPQUFPLENBQUMsZ0JBQWdCLENBQzlDLE9BQU8sRUFBRSxDQUFDLEtBQUssRUFBRSxPQUFPLEVBQUUsVUFBVSxDQUFDLEVBQUUsS0FBSyxFQUFFLFdBQVcsRUFDekQsZ0JBQWdCLENBQUMsQ0FBQztJQUV0QixJQUFJLEtBQUssRUFBRTtRQUNULE9BQU8saUJBQWlCLENBQUM7S0FDMUI7SUFFRCxNQUFNLG9CQUFvQixHQUN0QixJQUFJLENBQUMsRUFBQyxPQUFPLEVBQUUsS0FBSyxFQUFFLEVBQUMsS0FBSyxFQUFFLENBQUMsVUFBVSxDQUFDLEVBQUUsS0FBSyxFQUFFLENBQUMsRUFBRSxLQUFLLEVBQUUsT0FBTyxFQUFDLEVBQUMsQ0FBQyxDQUFDO0lBQzVFLE9BQU8sR0FBRyxJQUFJLDJCQUEyQixDQUFDLFVBQVUsRUFBRSxVQUFVLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDeEUsTUFBTSxxQkFBcUIsR0FBRyxPQUFPLENBQUMsZ0JBQWdCLENBQ2xELE9BQU8sRUFBRSxDQUFDLFVBQVUsQ0FBQyxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsb0JBQW9CLENBQUMsQ0FBQztJQUVoRSxNQUFNLGlCQUFpQixHQUNuQixJQUFJLENBQUMsRUFBQyxPQUFPLEVBQUUsS0FBSyxFQUFFLEVBQUMsS0FBSyxFQUFFLFdBQVcsRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFFLEtBQUssRUFBQyxFQUFDLENBQUMsQ0FBQztJQUNsRSxPQUFPLEdBQUcsSUFBSSx3QkFBd0IsQ0FBQyxXQUFXLEVBQUUsS0FBSyxDQUFDLENBQUM7SUFDM0QsV0FBVyxHQUFHLENBQUMsRUFBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxDQUFDLFdBQVcsQ0FBQyxFQUFDLENBQUMsQ0FBQztJQUNyRCxNQUFNLGtCQUFrQixHQUFHLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FDL0MsT0FBTyxFQUFFLENBQUMsaUJBQWlCLEVBQUUscUJBQXFCLENBQUMsRUFBRSxLQUFLLEVBQUUsV0FBVyxFQUN2RSxpQkFBaUIsQ0FBQyxDQUFDO0lBRXZCLE9BQU8sQ0FBQyxXQUFXLENBQUMsaUJBQWlCLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDOUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxxQkFBcUIsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUNsRCxPQUFPLGtCQUFrQixDQUFDO0FBQzVCLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMyBHb29nbGUgTExDLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7VGVuc29ySW5mbywgVHlwZWRBcnJheSwgdXRpbH0gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcblxuaW1wb3J0IHtXZWJHUFVCYWNrZW5kfSBmcm9tICcuLi9iYWNrZW5kX3dlYmdwdSc7XG5pbXBvcnQge2ZpbGx9IGZyb20gJy4uL2tlcm5lbHMvRmlsbCc7XG5pbXBvcnQge1NwYXJzZVNlZ21lbnRJZENvdW50UHJvZ3JhbSwgU3BhcnNlU2VnbWVudE1lYW5Qcm9ncmFtLCBTcGFyc2VTZWdtZW50U3VtUHJvZ3JhbX0gZnJvbSAnLi4vc3BhcnNlX3NlZ21lbnRfcmVkdWNlX3dlYmdwdSc7XG5pbXBvcnQge1dlYkdQVVByb2dyYW19IGZyb20gJy4uL3dlYmdwdV9wcm9ncmFtJztcblxuZXhwb3J0IGZ1bmN0aW9uIHNwYXJzZVNlZ21lbnRSZWR1Y2UoXG4gICAgaW5wdXQ6IFRlbnNvckluZm8sIGluZGljZXM6IFRlbnNvckluZm8sIHNlZ21lbnRJZHM6IFRlbnNvckluZm8sXG4gICAgaXNTdW0gPSBmYWxzZSwgYmFja2VuZDogV2ViR1BVQmFja2VuZCk6IFRlbnNvckluZm8ge1xuICBjb25zdCBpbnB1dFNpemUgPSB1dGlsLnNpemVGcm9tU2hhcGUoaW5wdXQuc2hhcGUpO1xuICBjb25zdCBzZWdtZW50U2l6ZSA9IGlucHV0U2l6ZSAvIGlucHV0LnNoYXBlWzBdO1xuICBjb25zdCBkdHlwZSA9IGlucHV0LmR0eXBlO1xuXG4gIC8vIE5vdGUgdGhhdCB0aGUgY3VycmVudCBpbXBsZW1lbnRhdGlvbiBhc3N1bWVzIHRoYXQgc2VnbWVudElkcyB2YWx1ZXMgYXJlXG4gIC8vIHNvcnRlZC5cbiAgY29uc3QgbnVtSW5kaWNlcyA9IHV0aWwuc2l6ZUZyb21TaGFwZShpbmRpY2VzLnNoYXBlKTtcbiAgY29uc3QgJHNlZ21lbnRJZHMgPSBiYWNrZW5kLnJlYWRTeW5jKHNlZ21lbnRJZHMuZGF0YUlkKSBhcyBUeXBlZEFycmF5O1xuICBjb25zdCBsYXN0U2VnbWVudElkUGx1c09uZSA9XG4gICAgICBudW1JbmRpY2VzID4gMCA/ICRzZWdtZW50SWRzW251bUluZGljZXMgLSAxXSArIDEgOiAwO1xuICBjb25zdCBvdXRwdXRSb3dzID0gbGFzdFNlZ21lbnRJZFBsdXNPbmU7XG5cbiAgbGV0IHByb2dyYW06IFdlYkdQVVByb2dyYW07XG4gIGNvbnN0IG91dHB1dFNoYXBlID0gaW5wdXQuc2hhcGUuc2xpY2UoKTtcbiAgb3V0cHV0U2hhcGVbMF0gPSBvdXRwdXRSb3dzO1xuXG4gIGNvbnN0IHNwYXJzZVNpemUgPSBudW1JbmRpY2VzICogc2VnbWVudFNpemU7XG4gIGNvbnN0IHNwYXJzZVNlZ21lbnRTdW0gPVxuICAgICAgZmlsbCh7YmFja2VuZCwgYXR0cnM6IHtzaGFwZTogb3V0cHV0U2hhcGUsIHZhbHVlOiAwLCBkdHlwZX19KTtcbiAgcHJvZ3JhbSA9IG5ldyBTcGFyc2VTZWdtZW50U3VtUHJvZ3JhbShvdXRwdXRTaGFwZSwgc3BhcnNlU2l6ZSwgZHR5cGUpO1xuICBsZXQgdW5pZm9ybURhdGEgPSBbXG4gICAge3R5cGU6ICdpbnQzMicsIGRhdGE6IFtzZWdtZW50U2l6ZV19LCB7dHlwZTogJ2ludDMyJywgZGF0YTogW3NwYXJzZVNpemVdfVxuICBdO1xuICBjb25zdCAkc3BhcnNlU2VnbWVudFN1bSA9IGJhY2tlbmQucnVuV2ViR1BVUHJvZ3JhbShcbiAgICAgIHByb2dyYW0sIFtpbnB1dCwgaW5kaWNlcywgc2VnbWVudElkc10sIGR0eXBlLCB1bmlmb3JtRGF0YSxcbiAgICAgIHNwYXJzZVNlZ21lbnRTdW0pO1xuXG4gIGlmIChpc1N1bSkge1xuICAgIHJldHVybiAkc3BhcnNlU2VnbWVudFN1bTtcbiAgfVxuXG4gIGNvbnN0IHNwYXJzZVNlZ21lbnRJZENvdW50ID1cbiAgICAgIGZpbGwoe2JhY2tlbmQsIGF0dHJzOiB7c2hhcGU6IFtvdXRwdXRSb3dzXSwgdmFsdWU6IDAsIGR0eXBlOiAnaW50MzInfX0pO1xuICBwcm9ncmFtID0gbmV3IFNwYXJzZVNlZ21lbnRJZENvdW50UHJvZ3JhbShvdXRwdXRSb3dzLCBzZWdtZW50SWRzLnNoYXBlKTtcbiAgY29uc3QgJHNwYXJzZVNlZ21lbnRJZENvdW50ID0gYmFja2VuZC5ydW5XZWJHUFVQcm9ncmFtKFxuICAgICAgcHJvZ3JhbSwgW3NlZ21lbnRJZHNdLCAnaW50MzInLCBudWxsLCBzcGFyc2VTZWdtZW50SWRDb3VudCk7XG5cbiAgY29uc3Qgc3BhcnNlU2VnbWVudE1lYW4gPVxuICAgICAgZmlsbCh7YmFja2VuZCwgYXR0cnM6IHtzaGFwZTogb3V0cHV0U2hhcGUsIHZhbHVlOiAwLCBkdHlwZX19KTtcbiAgcHJvZ3JhbSA9IG5ldyBTcGFyc2VTZWdtZW50TWVhblByb2dyYW0ob3V0cHV0U2hhcGUsIGR0eXBlKTtcbiAgdW5pZm9ybURhdGEgPSBbe3R5cGU6ICdpbnQzMicsIGRhdGE6IFtzZWdtZW50U2l6ZV19XTtcbiAgY29uc3QgJHNwYXJzZVNlZ21lbnRNZWFuID0gYmFja2VuZC5ydW5XZWJHUFVQcm9ncmFtKFxuICAgICAgcHJvZ3JhbSwgWyRzcGFyc2VTZWdtZW50U3VtLCAkc3BhcnNlU2VnbWVudElkQ291bnRdLCBkdHlwZSwgdW5pZm9ybURhdGEsXG4gICAgICBzcGFyc2VTZWdtZW50TWVhbik7XG5cbiAgYmFja2VuZC5kaXNwb3NlRGF0YSgkc3BhcnNlU2VnbWVudFN1bS5kYXRhSWQpO1xuICBiYWNrZW5kLmRpc3Bvc2VEYXRhKCRzcGFyc2VTZWdtZW50SWRDb3VudC5kYXRhSWQpO1xuICByZXR1cm4gJHNwYXJzZVNlZ21lbnRNZWFuO1xufVxuIl19","/**\n * @license\n * Copyright 2023 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { SparseSegmentMean } from '@tensorflow/tfjs-core';\nimport { sparseSegmentReduce } from '../kernel_utils/sparse_segment_reduce';\nexport function sparseSegmentMean(args) {\n    const { inputs, backend } = args;\n    const { data, indices, segmentIds } = inputs;\n    return sparseSegmentReduce(data, indices, segmentIds, false, backend);\n}\nexport const sparseSegmentMeanConfig = {\n    kernelName: SparseSegmentMean,\n    backendName: 'webgpu',\n    kernelFunc: sparseSegmentMean,\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU3BhcnNlU2VnbWVudE1lYW4uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9rZXJuZWxzL1NwYXJzZVNlZ21lbnRNZWFuLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sRUFBMkIsaUJBQWlCLEVBQXNDLE1BQU0sdUJBQXVCLENBQUM7QUFHdkgsT0FBTyxFQUFDLG1CQUFtQixFQUFDLE1BQU0sdUNBQXVDLENBQUM7QUFFMUUsTUFBTSxVQUFVLGlCQUFpQixDQUM3QixJQUErRDtJQUVqRSxNQUFNLEVBQUMsTUFBTSxFQUFFLE9BQU8sRUFBQyxHQUFHLElBQUksQ0FBQztJQUMvQixNQUFNLEVBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxVQUFVLEVBQUMsR0FBRyxNQUFNLENBQUM7SUFFM0MsT0FBTyxtQkFBbUIsQ0FBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLFVBQVUsRUFBRSxLQUFLLEVBQUUsT0FBTyxDQUFDLENBQUM7QUFDeEUsQ0FBQztBQUVELE1BQU0sQ0FBQyxNQUFNLHVCQUF1QixHQUFpQjtJQUNuRCxVQUFVLEVBQUUsaUJBQWlCO0lBQzdCLFdBQVcsRUFBRSxRQUFRO0lBQ3JCLFVBQVUsRUFBRSxpQkFBMEM7Q0FDdkQsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTEMuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtLZXJuZWxDb25maWcsIEtlcm5lbEZ1bmMsIFNwYXJzZVNlZ21lbnRNZWFuLCBTcGFyc2VTZWdtZW50TWVhbklucHV0cywgVGVuc29ySW5mb30gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcblxuaW1wb3J0IHtXZWJHUFVCYWNrZW5kfSBmcm9tICcuLi9iYWNrZW5kX3dlYmdwdSc7XG5pbXBvcnQge3NwYXJzZVNlZ21lbnRSZWR1Y2V9IGZyb20gJy4uL2tlcm5lbF91dGlscy9zcGFyc2Vfc2VnbWVudF9yZWR1Y2UnO1xuXG5leHBvcnQgZnVuY3Rpb24gc3BhcnNlU2VnbWVudE1lYW4oXG4gICAgYXJnczoge2lucHV0czogU3BhcnNlU2VnbWVudE1lYW5JbnB1dHMsIGJhY2tlbmQ6IFdlYkdQVUJhY2tlbmR9KTpcbiAgICBUZW5zb3JJbmZvIHtcbiAgY29uc3Qge2lucHV0cywgYmFja2VuZH0gPSBhcmdzO1xuICBjb25zdCB7ZGF0YSwgaW5kaWNlcywgc2VnbWVudElkc30gPSBpbnB1dHM7XG5cbiAgcmV0dXJuIHNwYXJzZVNlZ21lbnRSZWR1Y2UoZGF0YSwgaW5kaWNlcywgc2VnbWVudElkcywgZmFsc2UsIGJhY2tlbmQpO1xufVxuXG5leHBvcnQgY29uc3Qgc3BhcnNlU2VnbWVudE1lYW5Db25maWc6IEtlcm5lbENvbmZpZyA9IHtcbiAga2VybmVsTmFtZTogU3BhcnNlU2VnbWVudE1lYW4sXG4gIGJhY2tlbmROYW1lOiAnd2ViZ3B1JyxcbiAga2VybmVsRnVuYzogc3BhcnNlU2VnbWVudE1lYW4gYXMgdW5rbm93biBhcyBLZXJuZWxGdW5jLFxufTtcbiJdfQ==","/**\n * @license\n * Copyright 2023 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { SparseSegmentSum } from '@tensorflow/tfjs-core';\nimport { sparseSegmentReduce } from '../kernel_utils/sparse_segment_reduce';\nexport function sparseSegmentSum(args) {\n    const { inputs, backend } = args;\n    const { data, indices, segmentIds } = inputs;\n    return sparseSegmentReduce(data, indices, segmentIds, true, backend);\n}\nexport const sparseSegmentSumConfig = {\n    kernelName: SparseSegmentSum,\n    backendName: 'webgpu',\n    kernelFunc: sparseSegmentSum,\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU3BhcnNlU2VnbWVudFN1bS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2tlcm5lbHMvU3BhcnNlU2VnbWVudFN1bS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQTJCLGdCQUFnQixFQUFxQyxNQUFNLHVCQUF1QixDQUFDO0FBR3JILE9BQU8sRUFBQyxtQkFBbUIsRUFBQyxNQUFNLHVDQUF1QyxDQUFDO0FBRTFFLE1BQU0sVUFBVSxnQkFBZ0IsQ0FDNUIsSUFBOEQ7SUFFaEUsTUFBTSxFQUFDLE1BQU0sRUFBRSxPQUFPLEVBQUMsR0FBRyxJQUFJLENBQUM7SUFDL0IsTUFBTSxFQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsVUFBVSxFQUFDLEdBQUcsTUFBTSxDQUFDO0lBRTNDLE9BQU8sbUJBQW1CLENBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxVQUFVLEVBQUUsSUFBSSxFQUFFLE9BQU8sQ0FBQyxDQUFDO0FBQ3ZFLENBQUM7QUFFRCxNQUFNLENBQUMsTUFBTSxzQkFBc0IsR0FBaUI7SUFDbEQsVUFBVSxFQUFFLGdCQUFnQjtJQUM1QixXQUFXLEVBQUUsUUFBUTtJQUNyQixVQUFVLEVBQUUsZ0JBQXlDO0NBQ3RELENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMyBHb29nbGUgTExDLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7S2VybmVsQ29uZmlnLCBLZXJuZWxGdW5jLCBTcGFyc2VTZWdtZW50U3VtLCBTcGFyc2VTZWdtZW50U3VtSW5wdXRzLCBUZW5zb3JJbmZvfSBmcm9tICdAdGVuc29yZmxvdy90ZmpzLWNvcmUnO1xuXG5pbXBvcnQge1dlYkdQVUJhY2tlbmR9IGZyb20gJy4uL2JhY2tlbmRfd2ViZ3B1JztcbmltcG9ydCB7c3BhcnNlU2VnbWVudFJlZHVjZX0gZnJvbSAnLi4va2VybmVsX3V0aWxzL3NwYXJzZV9zZWdtZW50X3JlZHVjZSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBzcGFyc2VTZWdtZW50U3VtKFxuICAgIGFyZ3M6IHtpbnB1dHM6IFNwYXJzZVNlZ21lbnRTdW1JbnB1dHMsIGJhY2tlbmQ6IFdlYkdQVUJhY2tlbmR9KTpcbiAgICBUZW5zb3JJbmZvIHtcbiAgY29uc3Qge2lucHV0cywgYmFja2VuZH0gPSBhcmdzO1xuICBjb25zdCB7ZGF0YSwgaW5kaWNlcywgc2VnbWVudElkc30gPSBpbnB1dHM7XG5cbiAgcmV0dXJuIHNwYXJzZVNlZ21lbnRSZWR1Y2UoZGF0YSwgaW5kaWNlcywgc2VnbWVudElkcywgdHJ1ZSwgYmFja2VuZCk7XG59XG5cbmV4cG9ydCBjb25zdCBzcGFyc2VTZWdtZW50U3VtQ29uZmlnOiBLZXJuZWxDb25maWcgPSB7XG4gIGtlcm5lbE5hbWU6IFNwYXJzZVNlZ21lbnRTdW0sXG4gIGJhY2tlbmROYW1lOiAnd2ViZ3B1JyxcbiAga2VybmVsRnVuYzogc3BhcnNlU2VnbWVudFN1bSBhcyB1bmtub3duIGFzIEtlcm5lbEZ1bmMsXG59O1xuIl19","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { getMainHeaderString as main } from './webgpu_program';\nimport { computeDispatch, flatDispatchLayout } from './webgpu_util';\nexport class TileProgram {\n    constructor(aShape, reps) {\n        this.variableNames = ['A'];\n        this.workgroupSize = [64, 1, 1];\n        this.size = true;\n        const outputShape = new Array(aShape.length);\n        for (let i = 0; i < outputShape.length; i++) {\n            outputShape[i] = aShape[i] * reps[i];\n        }\n        this.outputShape = outputShape;\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize);\n        this.rank = this.outputShape.length;\n        this.shaderKey = 'tile';\n    }\n    getUserCode() {\n        const sourceCoords = getSourceCoords(this.rank, 'uniforms.');\n        const userCode = `\n      ${main('index')} {\n        if (index < uniforms.size) {\n          let resRC = getCoordsFromIndex(index);\n          setOutputAtIndex(index, getA(${sourceCoords}));\n        }\n      }\n    `;\n        return userCode;\n    }\n}\nfunction getSourceCoords(rank, uniformPrefix = '') {\n    if (rank >= 5) {\n        throw Error(`Tile for rank ${rank} is not yet supported`);\n    }\n    if (rank === 1) {\n        return `(resRC % ${uniformPrefix}aShape)`;\n    }\n    const currentCoords = ['resRC.x', 'resRC.y', 'resRC.z', 'resRC.w'];\n    const sourceCoords = [];\n    for (let i = 0; i < rank; i++) {\n        sourceCoords.push(`(${currentCoords[i]} % ${uniformPrefix}aShape[${i}])`);\n    }\n    return sourceCoords.join();\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGlsZV93ZWJncHUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy90aWxlX3dlYmdwdS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQUMsbUJBQW1CLElBQUksSUFBSSxFQUFnQixNQUFNLGtCQUFrQixDQUFDO0FBQzVFLE9BQU8sRUFBQyxlQUFlLEVBQUUsa0JBQWtCLEVBQUMsTUFBTSxlQUFlLENBQUM7QUFFbEUsTUFBTSxPQUFPLFdBQVc7SUFVdEIsWUFBWSxNQUFnQixFQUFFLElBQWM7UUFUNUMsa0JBQWEsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBS3RCLGtCQUFhLEdBQTZCLENBQUMsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUNyRCxTQUFJLEdBQUcsSUFBSSxDQUFDO1FBSVYsTUFBTSxXQUFXLEdBQWEsSUFBSSxLQUFLLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ3ZELEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxXQUFXLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQzNDLFdBQVcsQ0FBQyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ3RDO1FBQ0QsSUFBSSxDQUFDLFdBQVcsR0FBRyxXQUFXLENBQUM7UUFDL0IsSUFBSSxDQUFDLGNBQWMsR0FBRyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDM0QsSUFBSSxDQUFDLFFBQVEsR0FBRyxlQUFlLENBQzNCLElBQUksQ0FBQyxjQUFjLEVBQUUsSUFBSSxDQUFDLFdBQVcsRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7UUFDL0QsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQztRQUNwQyxJQUFJLENBQUMsU0FBUyxHQUFHLE1BQU0sQ0FBQztJQUMxQixDQUFDO0lBRUQsV0FBVztRQUNULE1BQU0sWUFBWSxHQUFHLGVBQWUsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLFdBQVcsQ0FBQyxDQUFDO1FBRTdELE1BQU0sUUFBUSxHQUFHO1FBQ2IsSUFBSSxDQUFDLE9BQU8sQ0FBQzs7O3lDQUdvQixZQUFZOzs7S0FHaEQsQ0FBQztRQUNGLE9BQU8sUUFBUSxDQUFDO0lBQ2xCLENBQUM7Q0FDRjtBQUVELFNBQVMsZUFBZSxDQUFDLElBQVksRUFBRSxhQUFhLEdBQUcsRUFBRTtJQUN2RCxJQUFJLElBQUksSUFBSSxDQUFDLEVBQUU7UUFDYixNQUFNLEtBQUssQ0FBQyxpQkFBaUIsSUFBSSx1QkFBdUIsQ0FBQyxDQUFDO0tBQzNEO0lBQ0QsSUFBSSxJQUFJLEtBQUssQ0FBQyxFQUFFO1FBQ2QsT0FBTyxZQUFZLGFBQWEsU0FBUyxDQUFDO0tBQzNDO0lBRUQsTUFBTSxhQUFhLEdBQUcsQ0FBQyxTQUFTLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxTQUFTLENBQUMsQ0FBQztJQUNuRSxNQUFNLFlBQVksR0FBRyxFQUFFLENBQUM7SUFDeEIsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksRUFBRSxDQUFDLEVBQUUsRUFBRTtRQUM3QixZQUFZLENBQUMsSUFBSSxDQUFDLElBQUksYUFBYSxDQUFDLENBQUMsQ0FBQyxNQUFNLGFBQWEsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDO0tBQzNFO0lBQ0QsT0FBTyxZQUFZLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDN0IsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtnZXRNYWluSGVhZGVyU3RyaW5nIGFzIG1haW4sIFdlYkdQVVByb2dyYW19IGZyb20gJy4vd2ViZ3B1X3Byb2dyYW0nO1xuaW1wb3J0IHtjb21wdXRlRGlzcGF0Y2gsIGZsYXREaXNwYXRjaExheW91dH0gZnJvbSAnLi93ZWJncHVfdXRpbCc7XG5cbmV4cG9ydCBjbGFzcyBUaWxlUHJvZ3JhbSBpbXBsZW1lbnRzIFdlYkdQVVByb2dyYW0ge1xuICB2YXJpYWJsZU5hbWVzID0gWydBJ107XG4gIG91dHB1dFNoYXBlOiBudW1iZXJbXTtcbiAgc2hhZGVyS2V5OiBzdHJpbmc7XG4gIGRpc3BhdGNoTGF5b3V0OiB7eDogbnVtYmVyW119O1xuICBkaXNwYXRjaDogW251bWJlciwgbnVtYmVyLCBudW1iZXJdO1xuICB3b3JrZ3JvdXBTaXplOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl0gPSBbNjQsIDEsIDFdO1xuICBzaXplID0gdHJ1ZTtcbiAgcmFuazogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yKGFTaGFwZTogbnVtYmVyW10sIHJlcHM6IG51bWJlcltdKSB7XG4gICAgY29uc3Qgb3V0cHV0U2hhcGU6IG51bWJlcltdID0gbmV3IEFycmF5KGFTaGFwZS5sZW5ndGgpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb3V0cHV0U2hhcGUubGVuZ3RoOyBpKyspIHtcbiAgICAgIG91dHB1dFNoYXBlW2ldID0gYVNoYXBlW2ldICogcmVwc1tpXTtcbiAgICB9XG4gICAgdGhpcy5vdXRwdXRTaGFwZSA9IG91dHB1dFNoYXBlO1xuICAgIHRoaXMuZGlzcGF0Y2hMYXlvdXQgPSBmbGF0RGlzcGF0Y2hMYXlvdXQodGhpcy5vdXRwdXRTaGFwZSk7XG4gICAgdGhpcy5kaXNwYXRjaCA9IGNvbXB1dGVEaXNwYXRjaChcbiAgICAgICAgdGhpcy5kaXNwYXRjaExheW91dCwgdGhpcy5vdXRwdXRTaGFwZSwgdGhpcy53b3JrZ3JvdXBTaXplKTtcbiAgICB0aGlzLnJhbmsgPSB0aGlzLm91dHB1dFNoYXBlLmxlbmd0aDtcbiAgICB0aGlzLnNoYWRlcktleSA9ICd0aWxlJztcbiAgfVxuXG4gIGdldFVzZXJDb2RlKCk6IHN0cmluZyB7XG4gICAgY29uc3Qgc291cmNlQ29vcmRzID0gZ2V0U291cmNlQ29vcmRzKHRoaXMucmFuaywgJ3VuaWZvcm1zLicpO1xuXG4gICAgY29uc3QgdXNlckNvZGUgPSBgXG4gICAgICAke21haW4oJ2luZGV4Jyl9IHtcbiAgICAgICAgaWYgKGluZGV4IDwgdW5pZm9ybXMuc2l6ZSkge1xuICAgICAgICAgIGxldCByZXNSQyA9IGdldENvb3Jkc0Zyb21JbmRleChpbmRleCk7XG4gICAgICAgICAgc2V0T3V0cHV0QXRJbmRleChpbmRleCwgZ2V0QSgke3NvdXJjZUNvb3Jkc30pKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIGA7XG4gICAgcmV0dXJuIHVzZXJDb2RlO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdldFNvdXJjZUNvb3JkcyhyYW5rOiBudW1iZXIsIHVuaWZvcm1QcmVmaXggPSAnJyk6IHN0cmluZyB7XG4gIGlmIChyYW5rID49IDUpIHtcbiAgICB0aHJvdyBFcnJvcihgVGlsZSBmb3IgcmFuayAke3Jhbmt9IGlzIG5vdCB5ZXQgc3VwcG9ydGVkYCk7XG4gIH1cbiAgaWYgKHJhbmsgPT09IDEpIHtcbiAgICByZXR1cm4gYChyZXNSQyAlICR7dW5pZm9ybVByZWZpeH1hU2hhcGUpYDtcbiAgfVxuXG4gIGNvbnN0IGN1cnJlbnRDb29yZHMgPSBbJ3Jlc1JDLngnLCAncmVzUkMueScsICdyZXNSQy56JywgJ3Jlc1JDLncnXTtcbiAgY29uc3Qgc291cmNlQ29vcmRzID0gW107XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgcmFuazsgaSsrKSB7XG4gICAgc291cmNlQ29vcmRzLnB1c2goYCgke2N1cnJlbnRDb29yZHNbaV19ICUgJHt1bmlmb3JtUHJlZml4fWFTaGFwZVske2l9XSlgKTtcbiAgfVxuICByZXR1cm4gc291cmNlQ29vcmRzLmpvaW4oKTtcbn1cbiJdfQ==","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { buffer, Tile, util } from '@tensorflow/tfjs-core';\nimport { tileImplCPU } from '../kernel_utils/shared';\nimport { TileProgram } from '../tile_webgpu';\nexport function tile(params) {\n    const { inputs, backend, attrs } = params;\n    const { x } = inputs;\n    const { reps } = attrs;\n    // tile gpu program cannot handle rank >= 5 case.\n    if (backend.shouldExecuteOnCPU([x]) || x.dtype === 'string' ||\n        x.shape.length >= 5) {\n        // Even thought string tensor is always on CPU, just to be consistent on how\n        // to access tensor data.\n        const data = backend.readSync(x.dataId);\n        const value = x.dtype === 'string' ?\n            data.map(d => util.decodeString(d)) :\n            data;\n        const buf = buffer(x.shape, x.dtype, value);\n        const outBuf = tileImplCPU(buf, reps);\n        return backend.makeTensorInfo(outBuf.shape, outBuf.dtype, outBuf.values);\n    }\n    const program = new TileProgram(x.shape, reps);\n    const output = backend.runWebGPUProgram(program, [x], x.dtype);\n    return output;\n}\nexport const tileConfig = {\n    kernelName: Tile,\n    backendName: 'webgpu',\n    kernelFunc: tile,\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVGlsZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2tlcm5lbHMvVGlsZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQUMsTUFBTSxFQUF3QyxJQUFJLEVBQXFDLElBQUksRUFBQyxNQUFNLHVCQUF1QixDQUFDO0FBR2xJLE9BQU8sRUFBQyxXQUFXLEVBQUMsTUFBTSx3QkFBd0IsQ0FBQztBQUNuRCxPQUFPLEVBQUMsV0FBVyxFQUFDLE1BQU0sZ0JBQWdCLENBQUM7QUFFM0MsTUFBTSxVQUFVLElBQUksQ0FDaEIsTUFBc0U7SUFFeEUsTUFBTSxFQUFDLE1BQU0sRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFDLEdBQUcsTUFBTSxDQUFDO0lBQ3hDLE1BQU0sRUFBQyxDQUFDLEVBQUMsR0FBRyxNQUFNLENBQUM7SUFDbkIsTUFBTSxFQUFDLElBQUksRUFBQyxHQUFHLEtBQUssQ0FBQztJQUVyQixpREFBaUQ7SUFDakQsSUFBSSxPQUFPLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxLQUFLLEtBQUssUUFBUTtRQUN2RCxDQUFDLENBQUMsS0FBSyxDQUFDLE1BQU0sSUFBSSxDQUFDLEVBQUU7UUFDdkIsNEVBQTRFO1FBQzVFLHlCQUF5QjtRQUN6QixNQUFNLElBQUksR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUN4QyxNQUFNLEtBQUssR0FBRyxDQUFDLENBQUMsS0FBSyxLQUFLLFFBQVEsQ0FBQyxDQUFDO1lBQy9CLElBQXFCLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDdkQsSUFBa0IsQ0FBQztRQUN2QixNQUFNLEdBQUcsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsS0FBSyxFQUFFLEtBQUssQ0FBQyxDQUFDO1FBQzVDLE1BQU0sTUFBTSxHQUFHLFdBQVcsQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFDdEMsT0FBTyxPQUFPLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUM7S0FDMUU7SUFFRCxNQUFNLE9BQU8sR0FBRyxJQUFJLFdBQVcsQ0FBQyxDQUFDLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFDO0lBQy9DLE1BQU0sTUFBTSxHQUFHLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUM7SUFFL0QsT0FBTyxNQUFNLENBQUM7QUFDaEIsQ0FBQztBQUVELE1BQU0sQ0FBQyxNQUFNLFVBQVUsR0FBaUI7SUFDdEMsVUFBVSxFQUFFLElBQUk7SUFDaEIsV0FBVyxFQUFFLFFBQVE7SUFDckIsVUFBVSxFQUFFLElBQTZCO0NBQzFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7YnVmZmVyLCBLZXJuZWxDb25maWcsIEtlcm5lbEZ1bmMsIFRlbnNvckluZm8sIFRpbGUsIFRpbGVBdHRycywgVGlsZUlucHV0cywgVHlwZWRBcnJheSwgdXRpbH0gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcblxuaW1wb3J0IHtXZWJHUFVCYWNrZW5kfSBmcm9tICcuLi9iYWNrZW5kX3dlYmdwdSc7XG5pbXBvcnQge3RpbGVJbXBsQ1BVfSBmcm9tICcuLi9rZXJuZWxfdXRpbHMvc2hhcmVkJztcbmltcG9ydCB7VGlsZVByb2dyYW19IGZyb20gJy4uL3RpbGVfd2ViZ3B1JztcblxuZXhwb3J0IGZ1bmN0aW9uIHRpbGUoXG4gICAgcGFyYW1zOiB7aW5wdXRzOiBUaWxlSW5wdXRzLCBiYWNrZW5kOiBXZWJHUFVCYWNrZW5kLCBhdHRyczogVGlsZUF0dHJzfSk6XG4gICAgVGVuc29ySW5mbyB7XG4gIGNvbnN0IHtpbnB1dHMsIGJhY2tlbmQsIGF0dHJzfSA9IHBhcmFtcztcbiAgY29uc3Qge3h9ID0gaW5wdXRzO1xuICBjb25zdCB7cmVwc30gPSBhdHRycztcblxuICAvLyB0aWxlIGdwdSBwcm9ncmFtIGNhbm5vdCBoYW5kbGUgcmFuayA+PSA1IGNhc2UuXG4gIGlmIChiYWNrZW5kLnNob3VsZEV4ZWN1dGVPbkNQVShbeF0pIHx8IHguZHR5cGUgPT09ICdzdHJpbmcnIHx8XG4gICAgICB4LnNoYXBlLmxlbmd0aCA+PSA1KSB7XG4gICAgLy8gRXZlbiB0aG91Z2h0IHN0cmluZyB0ZW5zb3IgaXMgYWx3YXlzIG9uIENQVSwganVzdCB0byBiZSBjb25zaXN0ZW50IG9uIGhvd1xuICAgIC8vIHRvIGFjY2VzcyB0ZW5zb3IgZGF0YS5cbiAgICBjb25zdCBkYXRhID0gYmFja2VuZC5yZWFkU3luYyh4LmRhdGFJZCk7XG4gICAgY29uc3QgdmFsdWUgPSB4LmR0eXBlID09PSAnc3RyaW5nJyA/XG4gICAgICAgIChkYXRhIGFzIFVpbnQ4QXJyYXlbXSkubWFwKGQgPT4gdXRpbC5kZWNvZGVTdHJpbmcoZCkpIDpcbiAgICAgICAgZGF0YSBhcyBUeXBlZEFycmF5O1xuICAgIGNvbnN0IGJ1ZiA9IGJ1ZmZlcih4LnNoYXBlLCB4LmR0eXBlLCB2YWx1ZSk7XG4gICAgY29uc3Qgb3V0QnVmID0gdGlsZUltcGxDUFUoYnVmLCByZXBzKTtcbiAgICByZXR1cm4gYmFja2VuZC5tYWtlVGVuc29ySW5mbyhvdXRCdWYuc2hhcGUsIG91dEJ1Zi5kdHlwZSwgb3V0QnVmLnZhbHVlcyk7XG4gIH1cblxuICBjb25zdCBwcm9ncmFtID0gbmV3IFRpbGVQcm9ncmFtKHguc2hhcGUsIHJlcHMpO1xuICBjb25zdCBvdXRwdXQgPSBiYWNrZW5kLnJ1bldlYkdQVVByb2dyYW0ocHJvZ3JhbSwgW3hdLCB4LmR0eXBlKTtcblxuICByZXR1cm4gb3V0cHV0O1xufVxuXG5leHBvcnQgY29uc3QgdGlsZUNvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBUaWxlLFxuICBiYWNrZW5kTmFtZTogJ3dlYmdwdScsXG4gIGtlcm5lbEZ1bmM6IHRpbGUgYXMgdW5rbm93biBhcyBLZXJuZWxGdW5jLFxufTtcbiJdfQ==","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { backend_util, SparseToDense, util } from '@tensorflow/tfjs-core';\nimport { scatterImplCPU } from '../kernel_utils/shared';\nimport { ScatterProgram } from '../scatter_webgpu';\nimport { identity } from './Identity';\nimport { reshape } from './Reshape';\nimport { tile } from './Tile';\nexport function sparseToDense(args) {\n    const { inputs, backend, attrs } = args;\n    const { sparseIndices, sparseValues, defaultValue } = inputs;\n    const { outputShape } = attrs;\n    const { sliceRank, numUpdates, sliceSize, strides, outputSize } = backend_util.calculateShapes(sparseValues, sparseIndices, outputShape);\n    const sumDupeIndices = false;\n    if (sparseValues.dtype === 'string') {\n        const indicesBuf = backend.bufferSync(sparseIndices);\n        const updatesBuf = backend.bufferSync(sparseValues);\n        const $defaultValue = util.decodeString(backend.readSync(defaultValue.dataId)[0]);\n        const outBuf = scatterImplCPU(indicesBuf, updatesBuf, outputShape, outputSize, sliceSize, numUpdates, sliceRank, strides, $defaultValue, sumDupeIndices);\n        return backend.makeTensorInfo(outputShape, outBuf.dtype, outBuf.values);\n    }\n    const flattenShape = [outputSize / sliceSize, sliceSize];\n    const $sparseIndices = reshape({\n        inputs: { x: sparseIndices },\n        backend,\n        attrs: { shape: [numUpdates, sliceRank] }\n    });\n    const $sparseValues = sparseValues.shape.length ?\n        reshape({\n            inputs: { x: sparseValues },\n            backend,\n            attrs: { shape: [numUpdates, sliceSize] }\n        }) :\n        identity({ inputs: { x: sparseValues }, backend });\n    const type = $sparseValues.dtype;\n    const zero = backend.makeTensorInfo([], type, util.makeZerosTypedArray(1, type));\n    // Fill output tensor with the default value.\n    const $defaultValue = reshape({\n        inputs: { x: defaultValue },\n        backend,\n        attrs: { shape: Array(flattenShape.length).fill(1) }\n    });\n    const $denseValues = tile({ inputs: { x: $defaultValue }, backend, attrs: { reps: flattenShape } });\n    const size = util.sizeFromShape([numUpdates, sliceSize]);\n    const uniformData = [\n        { type: 'int32', data: [sliceRank] },\n        { type: 'int32', data: strides },\n        { type: 'int32', data: [size] },\n    ];\n    switch (numUpdates) {\n        case 0:\n            break;\n        case 1:\n            if (true) {\n                const program = new ScatterProgram([numUpdates, sliceSize], sliceRank, $sparseIndices.shape.length, $sparseValues.shape.length, strides, flattenShape, type, sumDupeIndices);\n                backend.runWebGPUProgram(program, [$sparseValues, $sparseIndices], type, uniformData, $denseValues);\n            }\n            break;\n        default:\n            if (true) {\n                // First replace the default value with 0 at indices.\n                const program = new ScatterProgram([numUpdates, sliceSize], sliceRank, $sparseIndices.shape.length, zero.shape.length, strides, flattenShape, type, sumDupeIndices);\n                backend.runWebGPUProgram(program, [zero, $sparseIndices], type, uniformData, $denseValues);\n            }\n            {\n                // Then replace 0 with the (sum of) sparse value(s) at indices.\n                const program = new ScatterProgram([numUpdates, sliceSize], sliceRank, $sparseIndices.shape.length, $sparseValues.shape.length, strides, flattenShape, type);\n                backend.runWebGPUProgram(program, [$sparseValues, $sparseIndices], type, uniformData, $denseValues);\n            }\n    }\n    const denseValues = reshape({ inputs: { x: $denseValues }, backend, attrs: { shape: outputShape } });\n    backend.disposeData($sparseIndices.dataId);\n    backend.disposeData($sparseValues.dataId);\n    backend.disposeData($defaultValue.dataId);\n    backend.disposeData(zero.dataId);\n    backend.disposeData($denseValues.dataId);\n    return denseValues;\n}\nexport const sparseToDenseConfig = {\n    kernelName: SparseToDense,\n    backendName: 'webgpu',\n    kernelFunc: sparseToDense\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU3BhcnNlVG9EZW5zZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2tlcm5lbHMvU3BhcnNlVG9EZW5zZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQUMsWUFBWSxFQUFrQyxhQUFhLEVBQXVELElBQUksRUFBQyxNQUFNLHVCQUF1QixDQUFDO0FBRzdKLE9BQU8sRUFBQyxjQUFjLEVBQUMsTUFBTSx3QkFBd0IsQ0FBQztBQUN0RCxPQUFPLEVBQUMsY0FBYyxFQUFDLE1BQU0sbUJBQW1CLENBQUM7QUFFakQsT0FBTyxFQUFDLFFBQVEsRUFBQyxNQUFNLFlBQVksQ0FBQztBQUNwQyxPQUFPLEVBQUMsT0FBTyxFQUFDLE1BQU0sV0FBVyxDQUFDO0FBQ2xDLE9BQU8sRUFBQyxJQUFJLEVBQUMsTUFBTSxRQUFRLENBQUM7QUFFNUIsTUFBTSxVQUFVLGFBQWEsQ0FBQyxJQUk3QjtJQUNDLE1BQU0sRUFBQyxNQUFNLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBQyxHQUFHLElBQUksQ0FBQztJQUN0QyxNQUFNLEVBQUMsYUFBYSxFQUFFLFlBQVksRUFBRSxZQUFZLEVBQUMsR0FBRyxNQUFNLENBQUM7SUFDM0QsTUFBTSxFQUFDLFdBQVcsRUFBQyxHQUFHLEtBQUssQ0FBQztJQUU1QixNQUFNLEVBQUMsU0FBUyxFQUFFLFVBQVUsRUFBRSxTQUFTLEVBQUUsT0FBTyxFQUFFLFVBQVUsRUFBQyxHQUN6RCxZQUFZLENBQUMsZUFBZSxDQUFDLFlBQVksRUFBRSxhQUFhLEVBQUUsV0FBVyxDQUFDLENBQUM7SUFFM0UsTUFBTSxjQUFjLEdBQUcsS0FBSyxDQUFDO0lBQzdCLElBQUksWUFBWSxDQUFDLEtBQUssS0FBSyxRQUFRLEVBQUU7UUFDbkMsTUFBTSxVQUFVLEdBQUcsT0FBTyxDQUFDLFVBQVUsQ0FBZ0IsYUFBYSxDQUFDLENBQUM7UUFDcEUsTUFBTSxVQUFVLEdBQUcsT0FBTyxDQUFDLFVBQVUsQ0FBaUIsWUFBWSxDQUFDLENBQUM7UUFDcEUsTUFBTSxhQUFhLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FDbkMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFlLENBQUMsQ0FBQztRQUM1RCxNQUFNLE1BQU0sR0FBRyxjQUFjLENBQ3pCLFVBQVUsRUFBRSxVQUFVLEVBQUUsV0FBVyxFQUFFLFVBQVUsRUFBRSxTQUFTLEVBQUUsVUFBVSxFQUN0RSxTQUFTLEVBQUUsT0FBTyxFQUFFLGFBQWEsRUFBRSxjQUFjLENBQUMsQ0FBQztRQUN2RCxPQUFPLE9BQU8sQ0FBQyxjQUFjLENBQUMsV0FBVyxFQUFFLE1BQU0sQ0FBQyxLQUFLLEVBQUUsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0tBQ3pFO0lBRUQsTUFBTSxZQUFZLEdBQUcsQ0FBQyxVQUFVLEdBQUcsU0FBUyxFQUFFLFNBQVMsQ0FBQyxDQUFDO0lBRXpELE1BQU0sY0FBYyxHQUFHLE9BQU8sQ0FBQztRQUM3QixNQUFNLEVBQUUsRUFBQyxDQUFDLEVBQUUsYUFBYSxFQUFDO1FBQzFCLE9BQU87UUFDUCxLQUFLLEVBQUUsRUFBQyxLQUFLLEVBQUUsQ0FBQyxVQUFVLEVBQUUsU0FBUyxDQUFDLEVBQUM7S0FDeEMsQ0FBQyxDQUFDO0lBQ0gsTUFBTSxhQUFhLEdBQUcsWUFBWSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUM3QyxPQUFPLENBQUM7WUFDTixNQUFNLEVBQUUsRUFBQyxDQUFDLEVBQUUsWUFBWSxFQUFDO1lBQ3pCLE9BQU87WUFDUCxLQUFLLEVBQUUsRUFBQyxLQUFLLEVBQUUsQ0FBQyxVQUFVLEVBQUUsU0FBUyxDQUFDLEVBQUM7U0FDeEMsQ0FBQyxDQUFDLENBQUM7UUFDSixRQUFRLENBQUMsRUFBQyxNQUFNLEVBQUUsRUFBQyxDQUFDLEVBQUUsWUFBWSxFQUFDLEVBQUUsT0FBTyxFQUFDLENBQUMsQ0FBQztJQUVuRCxNQUFNLElBQUksR0FBRyxhQUFhLENBQUMsS0FBSyxDQUFDO0lBQ2pDLE1BQU0sSUFBSSxHQUNOLE9BQU8sQ0FBQyxjQUFjLENBQUMsRUFBRSxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUM7SUFFeEUsNkNBQTZDO0lBQzdDLE1BQU0sYUFBYSxHQUFHLE9BQU8sQ0FBQztRQUM1QixNQUFNLEVBQUUsRUFBQyxDQUFDLEVBQUUsWUFBWSxFQUFDO1FBQ3pCLE9BQU87UUFDUCxLQUFLLEVBQUUsRUFBQyxLQUFLLEVBQUUsS0FBSyxDQUFDLFlBQVksQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUM7S0FDbkQsQ0FBQyxDQUFDO0lBQ0gsTUFBTSxZQUFZLEdBQ2QsSUFBSSxDQUFDLEVBQUMsTUFBTSxFQUFFLEVBQUMsQ0FBQyxFQUFFLGFBQWEsRUFBQyxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsRUFBQyxJQUFJLEVBQUUsWUFBWSxFQUFDLEVBQUMsQ0FBQyxDQUFDO0lBRTdFLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQyxVQUFVLEVBQUUsU0FBUyxDQUFDLENBQUMsQ0FBQztJQUN6RCxNQUFNLFdBQVcsR0FBRztRQUNsQixFQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLENBQUMsU0FBUyxDQUFDLEVBQUM7UUFDbEMsRUFBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUM7UUFDOUIsRUFBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxDQUFDLElBQUksQ0FBQyxFQUFDO0tBQzlCLENBQUM7SUFFRixRQUFRLFVBQVUsRUFBRTtRQUNsQixLQUFLLENBQUM7WUFDSixNQUFNO1FBQ1IsS0FBSyxDQUFDO1lBQ0osSUFBSSxJQUFJLEVBQUU7Z0JBQ1IsTUFBTSxPQUFPLEdBQUcsSUFBSSxjQUFjLENBQzlCLENBQUMsVUFBVSxFQUFFLFNBQVMsQ0FBQyxFQUFFLFNBQVMsRUFBRSxjQUFjLENBQUMsS0FBSyxDQUFDLE1BQU0sRUFDL0QsYUFBYSxDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQUUsT0FBTyxFQUFFLFlBQVksRUFBRSxJQUFJLEVBQ3ZELGNBQWMsQ0FBQyxDQUFDO2dCQUNwQixPQUFPLENBQUMsZ0JBQWdCLENBQ3BCLE9BQU8sRUFBRSxDQUFDLGFBQWEsRUFBRSxjQUFjLENBQUMsRUFBRSxJQUFJLEVBQUUsV0FBVyxFQUMzRCxZQUFZLENBQUMsQ0FBQzthQUNuQjtZQUNELE1BQU07UUFDUjtZQUNFLElBQUksSUFBSSxFQUFFO2dCQUNSLHFEQUFxRDtnQkFDckQsTUFBTSxPQUFPLEdBQUcsSUFBSSxjQUFjLENBQzlCLENBQUMsVUFBVSxFQUFFLFNBQVMsQ0FBQyxFQUFFLFNBQVMsRUFBRSxjQUFjLENBQUMsS0FBSyxDQUFDLE1BQU0sRUFDL0QsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQUUsT0FBTyxFQUFFLFlBQVksRUFBRSxJQUFJLEVBQUUsY0FBYyxDQUFDLENBQUM7Z0JBQ3BFLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FDcEIsT0FBTyxFQUFFLENBQUMsSUFBSSxFQUFFLGNBQWMsQ0FBQyxFQUFFLElBQUksRUFBRSxXQUFXLEVBQUUsWUFBWSxDQUFDLENBQUM7YUFDdkU7WUFDRDtnQkFDRSwrREFBK0Q7Z0JBQy9ELE1BQU0sT0FBTyxHQUFHLElBQUksY0FBYyxDQUM5QixDQUFDLFVBQVUsRUFBRSxTQUFTLENBQUMsRUFBRSxTQUFTLEVBQUUsY0FBYyxDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQy9ELGFBQWEsQ0FBQyxLQUFLLENBQUMsTUFBTSxFQUFFLE9BQU8sRUFBRSxZQUFZLEVBQUUsSUFBSSxDQUFDLENBQUM7Z0JBQzdELE9BQU8sQ0FBQyxnQkFBZ0IsQ0FDcEIsT0FBTyxFQUFFLENBQUMsYUFBYSxFQUFFLGNBQWMsQ0FBQyxFQUFFLElBQUksRUFBRSxXQUFXLEVBQzNELFlBQVksQ0FBQyxDQUFDO2FBQ25CO0tBQ0o7SUFFRCxNQUFNLFdBQVcsR0FBRyxPQUFPLENBQ3ZCLEVBQUMsTUFBTSxFQUFFLEVBQUMsQ0FBQyxFQUFFLFlBQVksRUFBQyxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsRUFBQyxLQUFLLEVBQUUsV0FBVyxFQUFDLEVBQUMsQ0FBQyxDQUFDO0lBRXZFLE9BQU8sQ0FBQyxXQUFXLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQzNDLE9BQU8sQ0FBQyxXQUFXLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQzFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQzFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ2pDLE9BQU8sQ0FBQyxXQUFXLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ3pDLE9BQU8sV0FBVyxDQUFDO0FBQ3JCLENBQUM7QUFFRCxNQUFNLENBQUMsTUFBTSxtQkFBbUIsR0FBaUI7SUFDL0MsVUFBVSxFQUFFLGFBQWE7SUFDekIsV0FBVyxFQUFFLFFBQVE7SUFDckIsVUFBVSxFQUFFLGFBQXNDO0NBQ25ELENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7YmFja2VuZF91dGlsLCBLZXJuZWxDb25maWcsIEtlcm5lbEZ1bmMsIFJhbmssIFNwYXJzZVRvRGVuc2UsIFNwYXJzZVRvRGVuc2VBdHRycywgU3BhcnNlVG9EZW5zZUlucHV0cywgVGVuc29ySW5mbywgdXRpbH0gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcblxuaW1wb3J0IHtXZWJHUFVCYWNrZW5kfSBmcm9tICcuLi9iYWNrZW5kX3dlYmdwdSc7XG5pbXBvcnQge3NjYXR0ZXJJbXBsQ1BVfSBmcm9tICcuLi9rZXJuZWxfdXRpbHMvc2hhcmVkJztcbmltcG9ydCB7U2NhdHRlclByb2dyYW19IGZyb20gJy4uL3NjYXR0ZXJfd2ViZ3B1JztcblxuaW1wb3J0IHtpZGVudGl0eX0gZnJvbSAnLi9JZGVudGl0eSc7XG5pbXBvcnQge3Jlc2hhcGV9IGZyb20gJy4vUmVzaGFwZSc7XG5pbXBvcnQge3RpbGV9IGZyb20gJy4vVGlsZSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBzcGFyc2VUb0RlbnNlKGFyZ3M6IHtcbiAgaW5wdXRzOiBTcGFyc2VUb0RlbnNlSW5wdXRzLFxuICBiYWNrZW5kOiBXZWJHUFVCYWNrZW5kLFxuICBhdHRyczogU3BhcnNlVG9EZW5zZUF0dHJzXG59KTogVGVuc29ySW5mbyB7XG4gIGNvbnN0IHtpbnB1dHMsIGJhY2tlbmQsIGF0dHJzfSA9IGFyZ3M7XG4gIGNvbnN0IHtzcGFyc2VJbmRpY2VzLCBzcGFyc2VWYWx1ZXMsIGRlZmF1bHRWYWx1ZX0gPSBpbnB1dHM7XG4gIGNvbnN0IHtvdXRwdXRTaGFwZX0gPSBhdHRycztcblxuICBjb25zdCB7c2xpY2VSYW5rLCBudW1VcGRhdGVzLCBzbGljZVNpemUsIHN0cmlkZXMsIG91dHB1dFNpemV9ID1cbiAgICAgIGJhY2tlbmRfdXRpbC5jYWxjdWxhdGVTaGFwZXMoc3BhcnNlVmFsdWVzLCBzcGFyc2VJbmRpY2VzLCBvdXRwdXRTaGFwZSk7XG5cbiAgY29uc3Qgc3VtRHVwZUluZGljZXMgPSBmYWxzZTtcbiAgaWYgKHNwYXJzZVZhbHVlcy5kdHlwZSA9PT0gJ3N0cmluZycpIHtcbiAgICBjb25zdCBpbmRpY2VzQnVmID0gYmFja2VuZC5idWZmZXJTeW5jPFJhbmssICdpbnQzMic+KHNwYXJzZUluZGljZXMpO1xuICAgIGNvbnN0IHVwZGF0ZXNCdWYgPSBiYWNrZW5kLmJ1ZmZlclN5bmM8UmFuaywgJ3N0cmluZyc+KHNwYXJzZVZhbHVlcyk7XG4gICAgY29uc3QgJGRlZmF1bHRWYWx1ZSA9IHV0aWwuZGVjb2RlU3RyaW5nKFxuICAgICAgICBiYWNrZW5kLnJlYWRTeW5jKGRlZmF1bHRWYWx1ZS5kYXRhSWQpWzBdIGFzIFVpbnQ4QXJyYXkpO1xuICAgIGNvbnN0IG91dEJ1ZiA9IHNjYXR0ZXJJbXBsQ1BVKFxuICAgICAgICBpbmRpY2VzQnVmLCB1cGRhdGVzQnVmLCBvdXRwdXRTaGFwZSwgb3V0cHV0U2l6ZSwgc2xpY2VTaXplLCBudW1VcGRhdGVzLFxuICAgICAgICBzbGljZVJhbmssIHN0cmlkZXMsICRkZWZhdWx0VmFsdWUsIHN1bUR1cGVJbmRpY2VzKTtcbiAgICByZXR1cm4gYmFja2VuZC5tYWtlVGVuc29ySW5mbyhvdXRwdXRTaGFwZSwgb3V0QnVmLmR0eXBlLCBvdXRCdWYudmFsdWVzKTtcbiAgfVxuXG4gIGNvbnN0IGZsYXR0ZW5TaGFwZSA9IFtvdXRwdXRTaXplIC8gc2xpY2VTaXplLCBzbGljZVNpemVdO1xuXG4gIGNvbnN0ICRzcGFyc2VJbmRpY2VzID0gcmVzaGFwZSh7XG4gICAgaW5wdXRzOiB7eDogc3BhcnNlSW5kaWNlc30sXG4gICAgYmFja2VuZCxcbiAgICBhdHRyczoge3NoYXBlOiBbbnVtVXBkYXRlcywgc2xpY2VSYW5rXX1cbiAgfSk7XG4gIGNvbnN0ICRzcGFyc2VWYWx1ZXMgPSBzcGFyc2VWYWx1ZXMuc2hhcGUubGVuZ3RoID9cbiAgICAgIHJlc2hhcGUoe1xuICAgICAgICBpbnB1dHM6IHt4OiBzcGFyc2VWYWx1ZXN9LFxuICAgICAgICBiYWNrZW5kLFxuICAgICAgICBhdHRyczoge3NoYXBlOiBbbnVtVXBkYXRlcywgc2xpY2VTaXplXX1cbiAgICAgIH0pIDpcbiAgICAgIGlkZW50aXR5KHtpbnB1dHM6IHt4OiBzcGFyc2VWYWx1ZXN9LCBiYWNrZW5kfSk7XG5cbiAgY29uc3QgdHlwZSA9ICRzcGFyc2VWYWx1ZXMuZHR5cGU7XG4gIGNvbnN0IHplcm8gPVxuICAgICAgYmFja2VuZC5tYWtlVGVuc29ySW5mbyhbXSwgdHlwZSwgdXRpbC5tYWtlWmVyb3NUeXBlZEFycmF5KDEsIHR5cGUpKTtcblxuICAvLyBGaWxsIG91dHB1dCB0ZW5zb3Igd2l0aCB0aGUgZGVmYXVsdCB2YWx1ZS5cbiAgY29uc3QgJGRlZmF1bHRWYWx1ZSA9IHJlc2hhcGUoe1xuICAgIGlucHV0czoge3g6IGRlZmF1bHRWYWx1ZX0sXG4gICAgYmFja2VuZCxcbiAgICBhdHRyczoge3NoYXBlOiBBcnJheShmbGF0dGVuU2hhcGUubGVuZ3RoKS5maWxsKDEpfVxuICB9KTtcbiAgY29uc3QgJGRlbnNlVmFsdWVzID1cbiAgICAgIHRpbGUoe2lucHV0czoge3g6ICRkZWZhdWx0VmFsdWV9LCBiYWNrZW5kLCBhdHRyczoge3JlcHM6IGZsYXR0ZW5TaGFwZX19KTtcblxuICBjb25zdCBzaXplID0gdXRpbC5zaXplRnJvbVNoYXBlKFtudW1VcGRhdGVzLCBzbGljZVNpemVdKTtcbiAgY29uc3QgdW5pZm9ybURhdGEgPSBbXG4gICAge3R5cGU6ICdpbnQzMicsIGRhdGE6IFtzbGljZVJhbmtdfSxcbiAgICB7dHlwZTogJ2ludDMyJywgZGF0YTogc3RyaWRlc30sXG4gICAge3R5cGU6ICdpbnQzMicsIGRhdGE6IFtzaXplXX0sXG4gIF07XG5cbiAgc3dpdGNoIChudW1VcGRhdGVzKSB7XG4gICAgY2FzZSAwOlxuICAgICAgYnJlYWs7XG4gICAgY2FzZSAxOlxuICAgICAgaWYgKHRydWUpIHtcbiAgICAgICAgY29uc3QgcHJvZ3JhbSA9IG5ldyBTY2F0dGVyUHJvZ3JhbShcbiAgICAgICAgICAgIFtudW1VcGRhdGVzLCBzbGljZVNpemVdLCBzbGljZVJhbmssICRzcGFyc2VJbmRpY2VzLnNoYXBlLmxlbmd0aCxcbiAgICAgICAgICAgICRzcGFyc2VWYWx1ZXMuc2hhcGUubGVuZ3RoLCBzdHJpZGVzLCBmbGF0dGVuU2hhcGUsIHR5cGUsXG4gICAgICAgICAgICBzdW1EdXBlSW5kaWNlcyk7XG4gICAgICAgIGJhY2tlbmQucnVuV2ViR1BVUHJvZ3JhbShcbiAgICAgICAgICAgIHByb2dyYW0sIFskc3BhcnNlVmFsdWVzLCAkc3BhcnNlSW5kaWNlc10sIHR5cGUsIHVuaWZvcm1EYXRhLFxuICAgICAgICAgICAgJGRlbnNlVmFsdWVzKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gICAgICBpZiAodHJ1ZSkge1xuICAgICAgICAvLyBGaXJzdCByZXBsYWNlIHRoZSBkZWZhdWx0IHZhbHVlIHdpdGggMCBhdCBpbmRpY2VzLlxuICAgICAgICBjb25zdCBwcm9ncmFtID0gbmV3IFNjYXR0ZXJQcm9ncmFtKFxuICAgICAgICAgICAgW251bVVwZGF0ZXMsIHNsaWNlU2l6ZV0sIHNsaWNlUmFuaywgJHNwYXJzZUluZGljZXMuc2hhcGUubGVuZ3RoLFxuICAgICAgICAgICAgemVyby5zaGFwZS5sZW5ndGgsIHN0cmlkZXMsIGZsYXR0ZW5TaGFwZSwgdHlwZSwgc3VtRHVwZUluZGljZXMpO1xuICAgICAgICBiYWNrZW5kLnJ1bldlYkdQVVByb2dyYW0oXG4gICAgICAgICAgICBwcm9ncmFtLCBbemVybywgJHNwYXJzZUluZGljZXNdLCB0eXBlLCB1bmlmb3JtRGF0YSwgJGRlbnNlVmFsdWVzKTtcbiAgICAgIH1cbiAgICAgIHtcbiAgICAgICAgLy8gVGhlbiByZXBsYWNlIDAgd2l0aCB0aGUgKHN1bSBvZikgc3BhcnNlIHZhbHVlKHMpIGF0IGluZGljZXMuXG4gICAgICAgIGNvbnN0IHByb2dyYW0gPSBuZXcgU2NhdHRlclByb2dyYW0oXG4gICAgICAgICAgICBbbnVtVXBkYXRlcywgc2xpY2VTaXplXSwgc2xpY2VSYW5rLCAkc3BhcnNlSW5kaWNlcy5zaGFwZS5sZW5ndGgsXG4gICAgICAgICAgICAkc3BhcnNlVmFsdWVzLnNoYXBlLmxlbmd0aCwgc3RyaWRlcywgZmxhdHRlblNoYXBlLCB0eXBlKTtcbiAgICAgICAgYmFja2VuZC5ydW5XZWJHUFVQcm9ncmFtKFxuICAgICAgICAgICAgcHJvZ3JhbSwgWyRzcGFyc2VWYWx1ZXMsICRzcGFyc2VJbmRpY2VzXSwgdHlwZSwgdW5pZm9ybURhdGEsXG4gICAgICAgICAgICAkZGVuc2VWYWx1ZXMpO1xuICAgICAgfVxuICB9XG5cbiAgY29uc3QgZGVuc2VWYWx1ZXMgPSByZXNoYXBlKFxuICAgICAge2lucHV0czoge3g6ICRkZW5zZVZhbHVlc30sIGJhY2tlbmQsIGF0dHJzOiB7c2hhcGU6IG91dHB1dFNoYXBlfX0pO1xuXG4gIGJhY2tlbmQuZGlzcG9zZURhdGEoJHNwYXJzZUluZGljZXMuZGF0YUlkKTtcbiAgYmFja2VuZC5kaXNwb3NlRGF0YSgkc3BhcnNlVmFsdWVzLmRhdGFJZCk7XG4gIGJhY2tlbmQuZGlzcG9zZURhdGEoJGRlZmF1bHRWYWx1ZS5kYXRhSWQpO1xuICBiYWNrZW5kLmRpc3Bvc2VEYXRhKHplcm8uZGF0YUlkKTtcbiAgYmFja2VuZC5kaXNwb3NlRGF0YSgkZGVuc2VWYWx1ZXMuZGF0YUlkKTtcbiAgcmV0dXJuIGRlbnNlVmFsdWVzO1xufVxuXG5leHBvcnQgY29uc3Qgc3BhcnNlVG9EZW5zZUNvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBTcGFyc2VUb0RlbnNlLFxuICBiYWNrZW5kTmFtZTogJ3dlYmdwdScsXG4gIGtlcm5lbEZ1bmM6IHNwYXJzZVRvRGVuc2UgYXMgdW5rbm93biBhcyBLZXJuZWxGdW5jXG59O1xuIl19","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { backend_util, SplitV, util } from '@tensorflow/tfjs-core';\nimport { slice } from './Slice';\nexport function splitV(args) {\n    const { inputs, backend, attrs } = args;\n    const { x } = inputs;\n    const { numOrSizeSplits, axis } = attrs;\n    const $axis = util.parseAxisParam(axis, x.shape)[0];\n    const splitSizes = backend_util.prepareSplitSize(x, numOrSizeSplits, $axis);\n    const xRank = x.shape.length;\n    const begin = new Array(xRank).fill(0);\n    const size = x.shape.slice();\n    return splitSizes.map(s => {\n        const sliceSize = [...size];\n        sliceSize[$axis] = s;\n        const sliceT = slice({ inputs: { x }, backend, attrs: { begin, size: sliceSize } });\n        begin[$axis] += s;\n        return sliceT;\n    });\n}\nexport const splitVConfig = {\n    kernelName: SplitV,\n    backendName: 'webgpu',\n    kernelFunc: splitV\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU3BsaXRWLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMva2VybmVscy9TcGxpdFYudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUFDLFlBQVksRUFBNEIsTUFBTSxFQUF5QyxJQUFJLEVBQUMsTUFBTSx1QkFBdUIsQ0FBQztBQUdsSSxPQUFPLEVBQUMsS0FBSyxFQUFDLE1BQU0sU0FBUyxDQUFDO0FBRTlCLE1BQU0sVUFBVSxNQUFNLENBQ2xCLElBQXdFO0lBRTFFLE1BQU0sRUFBQyxNQUFNLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBQyxHQUFHLElBQUksQ0FBQztJQUN0QyxNQUFNLEVBQUMsQ0FBQyxFQUFDLEdBQUcsTUFBTSxDQUFDO0lBQ25CLE1BQU0sRUFBQyxlQUFlLEVBQUUsSUFBSSxFQUFDLEdBQUcsS0FBSyxDQUFDO0lBRXRDLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNwRCxNQUFNLFVBQVUsR0FBRyxZQUFZLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxFQUFFLGVBQWUsRUFBRSxLQUFLLENBQUMsQ0FBQztJQUU1RSxNQUFNLEtBQUssR0FBRyxDQUFDLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQztJQUM3QixNQUFNLEtBQUssR0FBRyxJQUFJLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDdkMsTUFBTSxJQUFJLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxLQUFLLEVBQUUsQ0FBQztJQUU3QixPQUFPLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUU7UUFDeEIsTUFBTSxTQUFTLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDO1FBQzVCLFNBQVMsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDckIsTUFBTSxNQUFNLEdBQ1IsS0FBSyxDQUFDLEVBQUMsTUFBTSxFQUFFLEVBQUMsQ0FBQyxFQUFDLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxFQUFDLEtBQUssRUFBRSxJQUFJLEVBQUUsU0FBUyxFQUFDLEVBQUMsQ0FBQyxDQUFDO1FBQ25FLEtBQUssQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDbEIsT0FBTyxNQUFNLENBQUM7SUFDaEIsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDO0FBRUQsTUFBTSxDQUFDLE1BQU0sWUFBWSxHQUFpQjtJQUN4QyxVQUFVLEVBQUUsTUFBTTtJQUNsQixXQUFXLEVBQUUsUUFBUTtJQUNyQixVQUFVLEVBQUUsTUFBK0I7Q0FDNUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtiYWNrZW5kX3V0aWwsIEtlcm5lbENvbmZpZywgS2VybmVsRnVuYywgU3BsaXRWLCBTcGxpdFZBdHRycywgU3BsaXRWSW5wdXRzLCBUZW5zb3JJbmZvLCB1dGlsfSBmcm9tICdAdGVuc29yZmxvdy90ZmpzLWNvcmUnO1xuXG5pbXBvcnQge1dlYkdQVUJhY2tlbmR9IGZyb20gJy4uL2JhY2tlbmRfd2ViZ3B1JztcbmltcG9ydCB7c2xpY2V9IGZyb20gJy4vU2xpY2UnO1xuXG5leHBvcnQgZnVuY3Rpb24gc3BsaXRWKFxuICAgIGFyZ3M6IHtpbnB1dHM6IFNwbGl0VklucHV0cywgYmFja2VuZDogV2ViR1BVQmFja2VuZCwgYXR0cnM6IFNwbGl0VkF0dHJzfSk6XG4gICAgVGVuc29ySW5mb1tdIHtcbiAgY29uc3Qge2lucHV0cywgYmFja2VuZCwgYXR0cnN9ID0gYXJncztcbiAgY29uc3Qge3h9ID0gaW5wdXRzO1xuICBjb25zdCB7bnVtT3JTaXplU3BsaXRzLCBheGlzfSA9IGF0dHJzO1xuXG4gIGNvbnN0ICRheGlzID0gdXRpbC5wYXJzZUF4aXNQYXJhbShheGlzLCB4LnNoYXBlKVswXTtcbiAgY29uc3Qgc3BsaXRTaXplcyA9IGJhY2tlbmRfdXRpbC5wcmVwYXJlU3BsaXRTaXplKHgsIG51bU9yU2l6ZVNwbGl0cywgJGF4aXMpO1xuXG4gIGNvbnN0IHhSYW5rID0geC5zaGFwZS5sZW5ndGg7XG4gIGNvbnN0IGJlZ2luID0gbmV3IEFycmF5KHhSYW5rKS5maWxsKDApO1xuICBjb25zdCBzaXplID0geC5zaGFwZS5zbGljZSgpO1xuXG4gIHJldHVybiBzcGxpdFNpemVzLm1hcChzID0+IHtcbiAgICBjb25zdCBzbGljZVNpemUgPSBbLi4uc2l6ZV07XG4gICAgc2xpY2VTaXplWyRheGlzXSA9IHM7XG4gICAgY29uc3Qgc2xpY2VUID1cbiAgICAgICAgc2xpY2Uoe2lucHV0czoge3h9LCBiYWNrZW5kLCBhdHRyczoge2JlZ2luLCBzaXplOiBzbGljZVNpemV9fSk7XG4gICAgYmVnaW5bJGF4aXNdICs9IHM7XG4gICAgcmV0dXJuIHNsaWNlVDtcbiAgfSk7XG59XG5cbmV4cG9ydCBjb25zdCBzcGxpdFZDb25maWc6IEtlcm5lbENvbmZpZyA9IHtcbiAga2VybmVsTmFtZTogU3BsaXRWLFxuICBiYWNrZW5kTmFtZTogJ3dlYmdwdScsXG4gIGtlcm5lbEZ1bmM6IHNwbGl0ViBhcyB1bmtub3duIGFzIEtlcm5lbEZ1bmNcbn07XG4iXX0=","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Sqrt } from '@tensorflow/tfjs-core';\nimport { unaryKernelFunc } from '../kernel_utils/kernel_funcs_utils';\nimport { UnaryOpType } from '../unary_op_util';\nexport const sqrt = unaryKernelFunc({ opType: UnaryOpType.SQRT });\nexport const sqrtConfig = {\n    kernelName: Sqrt,\n    backendName: 'webgpu',\n    kernelFunc: sqrt\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU3FydC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2tlcm5lbHMvU3FydC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQWUsSUFBSSxFQUFDLE1BQU0sdUJBQXVCLENBQUM7QUFDekQsT0FBTyxFQUFDLGVBQWUsRUFBQyxNQUFNLG9DQUFvQyxDQUFDO0FBQ25FLE9BQU8sRUFBQyxXQUFXLEVBQUMsTUFBTSxrQkFBa0IsQ0FBQztBQUU3QyxNQUFNLENBQUMsTUFBTSxJQUFJLEdBQUcsZUFBZSxDQUFDLEVBQUMsTUFBTSxFQUFFLFdBQVcsQ0FBQyxJQUFJLEVBQUMsQ0FBQyxDQUFDO0FBRWhFLE1BQU0sQ0FBQyxNQUFNLFVBQVUsR0FBaUI7SUFDdEMsVUFBVSxFQUFFLElBQUk7SUFDaEIsV0FBVyxFQUFFLFFBQVE7SUFDckIsVUFBVSxFQUFFLElBQUk7Q0FDakIsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtLZXJuZWxDb25maWcsIFNxcnR9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5pbXBvcnQge3VuYXJ5S2VybmVsRnVuY30gZnJvbSAnLi4va2VybmVsX3V0aWxzL2tlcm5lbF9mdW5jc191dGlscyc7XG5pbXBvcnQge1VuYXJ5T3BUeXBlfSBmcm9tICcuLi91bmFyeV9vcF91dGlsJztcblxuZXhwb3J0IGNvbnN0IHNxcnQgPSB1bmFyeUtlcm5lbEZ1bmMoe29wVHlwZTogVW5hcnlPcFR5cGUuU1FSVH0pO1xuXG5leHBvcnQgY29uc3Qgc3FydENvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBTcXJ0LFxuICBiYWNrZW5kTmFtZTogJ3dlYmdwdScsXG4gIGtlcm5lbEZ1bmM6IHNxcnRcbn07XG4iXX0=","/**\n * @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Square } from '@tensorflow/tfjs-core';\nimport { UnaryOpProgram } from '../unary_op_webgpu';\nimport { UnaryOpType } from '../unary_op_util';\nexport const squareConfig = {\n    kernelName: Square,\n    backendName: 'webgpu',\n    kernelFunc: ({ inputs, backend }) => {\n        const { x } = inputs;\n        const webGPUBackend = backend;\n        const program = new UnaryOpProgram(x.shape, UnaryOpType.SQUARE);\n        return webGPUBackend.runWebGPUProgram(program, [x], x.dtype);\n    }\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU3F1YXJlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMva2VybmVscy9TcXVhcmUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUFlLE1BQU0sRUFBZSxNQUFNLHVCQUF1QixDQUFDO0FBRXpFLE9BQU8sRUFBQyxjQUFjLEVBQUMsTUFBTSxvQkFBb0IsQ0FBQztBQUNsRCxPQUFPLEVBQUMsV0FBVyxFQUFDLE1BQU0sa0JBQWtCLENBQUM7QUFFN0MsTUFBTSxDQUFDLE1BQU0sWUFBWSxHQUFpQjtJQUN4QyxVQUFVLEVBQUUsTUFBTTtJQUNsQixXQUFXLEVBQUUsUUFBUTtJQUNyQixVQUFVLEVBQUUsQ0FBQyxFQUFDLE1BQU0sRUFBRSxPQUFPLEVBQUMsRUFBRSxFQUFFO1FBQ2hDLE1BQU0sRUFBQyxDQUFDLEVBQUMsR0FBRyxNQUFzQixDQUFDO1FBQ25DLE1BQU0sYUFBYSxHQUFHLE9BQXdCLENBQUM7UUFDL0MsTUFBTSxPQUFPLEdBQUcsSUFBSSxjQUFjLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBRSxXQUFXLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDaEUsT0FBTyxhQUFhLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQy9ELENBQUM7Q0FDRixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge0tlcm5lbENvbmZpZywgU3F1YXJlLCBTcXVhcmVJbnB1dHN9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5pbXBvcnQge1dlYkdQVUJhY2tlbmR9IGZyb20gJy4uL2JhY2tlbmRfd2ViZ3B1JztcbmltcG9ydCB7VW5hcnlPcFByb2dyYW19IGZyb20gJy4uL3VuYXJ5X29wX3dlYmdwdSc7XG5pbXBvcnQge1VuYXJ5T3BUeXBlfSBmcm9tICcuLi91bmFyeV9vcF91dGlsJztcblxuZXhwb3J0IGNvbnN0IHNxdWFyZUNvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBTcXVhcmUsXG4gIGJhY2tlbmROYW1lOiAnd2ViZ3B1JyxcbiAga2VybmVsRnVuYzogKHtpbnB1dHMsIGJhY2tlbmR9KSA9PiB7XG4gICAgY29uc3Qge3h9ID0gaW5wdXRzIGFzIFNxdWFyZUlucHV0cztcbiAgICBjb25zdCB3ZWJHUFVCYWNrZW5kID0gYmFja2VuZCBhcyBXZWJHUFVCYWNrZW5kO1xuICAgIGNvbnN0IHByb2dyYW0gPSBuZXcgVW5hcnlPcFByb2dyYW0oeC5zaGFwZSwgVW5hcnlPcFR5cGUuU1FVQVJFKTtcbiAgICByZXR1cm4gd2ViR1BVQmFja2VuZC5ydW5XZWJHUFVQcm9ncmFtKHByb2dyYW0sIFt4XSwgeC5kdHlwZSk7XG4gIH1cbn07XG4iXX0=","/**\n * @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { SquaredDifference } from '@tensorflow/tfjs-core';\nimport { BinaryOpType } from '../binary_op_util';\nimport { binaryKernelFunc } from '../kernel_utils/kernel_funcs_utils';\nexport const squaredDifference = binaryKernelFunc({\n    opType: BinaryOpType.SQUARED_DIFFERENCE,\n});\nexport const squaredDifferenceConfig = {\n    kernelName: SquaredDifference,\n    backendName: 'webgpu',\n    kernelFunc: squaredDifference\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU3F1YXJlZERpZmZlcmVuY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9rZXJuZWxzL1NxdWFyZWREaWZmZXJlbmNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sRUFBZSxpQkFBaUIsRUFBQyxNQUFNLHVCQUF1QixDQUFDO0FBRXRFLE9BQU8sRUFBQyxZQUFZLEVBQUMsTUFBTSxtQkFBbUIsQ0FBQztBQUMvQyxPQUFPLEVBQUMsZ0JBQWdCLEVBQUMsTUFBTSxvQ0FBb0MsQ0FBQztBQUVwRSxNQUFNLENBQUMsTUFBTSxpQkFBaUIsR0FBRyxnQkFBZ0IsQ0FBQztJQUNoRCxNQUFNLEVBQUUsWUFBWSxDQUFDLGtCQUFrQjtDQUN4QyxDQUFDLENBQUM7QUFFSCxNQUFNLENBQUMsTUFBTSx1QkFBdUIsR0FBaUI7SUFDbkQsVUFBVSxFQUFFLGlCQUFpQjtJQUM3QixXQUFXLEVBQUUsUUFBUTtJQUNyQixVQUFVLEVBQUUsaUJBQWlCO0NBQzlCLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7S2VybmVsQ29uZmlnLCBTcXVhcmVkRGlmZmVyZW5jZX0gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcblxuaW1wb3J0IHtCaW5hcnlPcFR5cGV9IGZyb20gJy4uL2JpbmFyeV9vcF91dGlsJztcbmltcG9ydCB7YmluYXJ5S2VybmVsRnVuY30gZnJvbSAnLi4va2VybmVsX3V0aWxzL2tlcm5lbF9mdW5jc191dGlscyc7XG5cbmV4cG9ydCBjb25zdCBzcXVhcmVkRGlmZmVyZW5jZSA9IGJpbmFyeUtlcm5lbEZ1bmMoe1xuICBvcFR5cGU6IEJpbmFyeU9wVHlwZS5TUVVBUkVEX0RJRkZFUkVOQ0UsXG59KTtcblxuZXhwb3J0IGNvbnN0IHNxdWFyZWREaWZmZXJlbmNlQ29uZmlnOiBLZXJuZWxDb25maWcgPSB7XG4gIGtlcm5lbE5hbWU6IFNxdWFyZWREaWZmZXJlbmNlLFxuICBiYWNrZW5kTmFtZTogJ3dlYmdwdScsXG4gIGtlcm5lbEZ1bmM6IHNxdWFyZWREaWZmZXJlbmNlXG59O1xuIl19","/**\n * @license\n * Copyright 2022 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Step } from '@tensorflow/tfjs-core';\nimport { UnaryOpType } from '../unary_op_util';\nimport { UnaryOpProgram } from '../unary_op_webgpu';\nexport function step({ inputs, attrs, backend }) {\n    const { x } = inputs;\n    const program = new UnaryOpProgram(x.shape, UnaryOpType.STEP, 'stepAlpha : f32,');\n    const uniformData = [{ type: 'float32', data: [attrs.alpha] }];\n    return backend.runWebGPUProgram(program, [x], x.dtype, uniformData);\n}\nexport const stepConfig = {\n    kernelName: Step,\n    backendName: 'webgpu',\n    kernelFunc: step\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU3RlcC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2tlcm5lbHMvU3RlcC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQTJCLElBQUksRUFBcUMsTUFBTSx1QkFBdUIsQ0FBQztBQUd6RyxPQUFPLEVBQUMsV0FBVyxFQUFDLE1BQU0sa0JBQWtCLENBQUM7QUFDN0MsT0FBTyxFQUFDLGNBQWMsRUFBQyxNQUFNLG9CQUFvQixDQUFDO0FBRWxELE1BQU0sVUFBVSxJQUFJLENBQ2hCLEVBQUMsTUFBTSxFQUFFLEtBQUssRUFBRSxPQUFPLEVBQzRDO0lBRXJFLE1BQU0sRUFBQyxDQUFDLEVBQUMsR0FBRyxNQUFNLENBQUM7SUFDbkIsTUFBTSxPQUFPLEdBQ1QsSUFBSSxjQUFjLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBRSxXQUFXLENBQUMsSUFBSSxFQUFFLGtCQUFrQixDQUFDLENBQUM7SUFDdEUsTUFBTSxXQUFXLEdBQUcsQ0FBQyxFQUFDLElBQUksRUFBRSxTQUFTLEVBQUUsSUFBSSxFQUFFLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxFQUFDLENBQUMsQ0FBQztJQUM3RCxPQUFPLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsS0FBSyxFQUFFLFdBQVcsQ0FBQyxDQUFDO0FBQ3RFLENBQUM7QUFFRCxNQUFNLENBQUMsTUFBTSxVQUFVLEdBQWlCO0lBQ3RDLFVBQVUsRUFBRSxJQUFJO0lBQ2hCLFdBQVcsRUFBRSxRQUFRO0lBQ3JCLFVBQVUsRUFBRSxJQUE2QjtDQUMxQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQy5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge0tlcm5lbENvbmZpZywgS2VybmVsRnVuYywgU3RlcCwgU3RlcEF0dHJzLCBUZW5zb3JJbmZvLCBVbmFyeUlucHV0c30gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcblxuaW1wb3J0IHtXZWJHUFVCYWNrZW5kfSBmcm9tICcuLi9iYWNrZW5kX3dlYmdwdSc7XG5pbXBvcnQge1VuYXJ5T3BUeXBlfSBmcm9tICcuLi91bmFyeV9vcF91dGlsJztcbmltcG9ydCB7VW5hcnlPcFByb2dyYW19IGZyb20gJy4uL3VuYXJ5X29wX3dlYmdwdSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBzdGVwKFxuICAgIHtpbnB1dHMsIGF0dHJzLCBiYWNrZW5kfTpcbiAgICAgICAge2lucHV0czogVW5hcnlJbnB1dHMsIGF0dHJzOiBTdGVwQXR0cnMsIGJhY2tlbmQ6IFdlYkdQVUJhY2tlbmR9KTpcbiAgICBUZW5zb3JJbmZvIHtcbiAgY29uc3Qge3h9ID0gaW5wdXRzO1xuICBjb25zdCBwcm9ncmFtID1cbiAgICAgIG5ldyBVbmFyeU9wUHJvZ3JhbSh4LnNoYXBlLCBVbmFyeU9wVHlwZS5TVEVQLCAnc3RlcEFscGhhIDogZjMyLCcpO1xuICBjb25zdCB1bmlmb3JtRGF0YSA9IFt7dHlwZTogJ2Zsb2F0MzInLCBkYXRhOiBbYXR0cnMuYWxwaGFdfV07XG4gIHJldHVybiBiYWNrZW5kLnJ1bldlYkdQVVByb2dyYW0ocHJvZ3JhbSwgW3hdLCB4LmR0eXBlLCB1bmlmb3JtRGF0YSk7XG59XG5cbmV4cG9ydCBjb25zdCBzdGVwQ29uZmlnOiBLZXJuZWxDb25maWcgPSB7XG4gIGtlcm5lbE5hbWU6IFN0ZXAsXG4gIGJhY2tlbmROYW1lOiAnd2ViZ3B1JyxcbiAga2VybmVsRnVuYzogc3RlcCBhcyB1bmtub3duIGFzIEtlcm5lbEZ1bmNcbn07XG4iXX0=","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { getCoordsDataType, getMainHeaderString as main } from './webgpu_program';\nimport { computeDispatch, flatDispatchLayout } from './webgpu_util';\nexport class StridedSliceProgram {\n    constructor(destSize) {\n        this.variableNames = ['x'];\n        // TODO(xing.xu): Increase the workPerThread.\n        this.workPerThread = 1;\n        this.workgroupSize = [64, 1, 1];\n        this.size = true;\n        this.outputShape = destSize;\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize, [this.workPerThread, 1, 1]);\n        const dtype = getCoordsDataType(this.outputShape.length);\n        this.uniforms = `begin : ${dtype},  strides : ${dtype}, `;\n        this.shaderKey = 'stridedSlice';\n    }\n    getUserCode() {\n        const rank = this.outputShape.length;\n        let newCoords = '';\n        if (rank === 1) {\n            newCoords = 'coords * uniforms.strides + uniforms.begin';\n        }\n        else {\n            let outputAxis = 0;\n            newCoords =\n                this.outputShape\n                    .map((_, i) => {\n                    outputAxis++;\n                    return this.outputShape.length === 1 ?\n                        `coords * uniforms.strides[${i}] + uniforms.begin[${i}]` :\n                        `coords[${outputAxis - 1}] * uniforms.strides[${i}] + uniforms.begin[${i}]`;\n                })\n                    .join(',');\n        }\n        const userCode = `\n       ${main('index')} {\n         if (index < uniforms.size) {\n           let coords = getCoordsFromIndex(index);\n           setOutputAtIndex(index, getX(${newCoords}));\n         }\n       }\n     `;\n        return userCode;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RyaWRlZF9zbGljZV93ZWJncHUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9zdHJpZGVkX3NsaWNlX3dlYmdwdS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQUMsaUJBQWlCLEVBQUUsbUJBQW1CLElBQUksSUFBSSxFQUFnQixNQUFNLGtCQUFrQixDQUFDO0FBQy9GLE9BQU8sRUFBQyxlQUFlLEVBQUUsa0JBQWtCLEVBQUMsTUFBTSxlQUFlLENBQUM7QUFFbEUsTUFBTSxPQUFPLG1CQUFtQjtJQVk5QixZQUFZLFFBQWtCO1FBWDlCLGtCQUFhLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQU10Qiw2Q0FBNkM7UUFDN0Msa0JBQWEsR0FBRyxDQUFDLENBQUM7UUFDbEIsa0JBQWEsR0FBNkIsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ3JELFNBQUksR0FBRyxJQUFJLENBQUM7UUFHVixJQUFJLENBQUMsV0FBVyxHQUFHLFFBQVEsQ0FBQztRQUM1QixJQUFJLENBQUMsY0FBYyxHQUFHLGtCQUFrQixDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUMzRCxJQUFJLENBQUMsUUFBUSxHQUFHLGVBQWUsQ0FDM0IsSUFBSSxDQUFDLGNBQWMsRUFBRSxJQUFJLENBQUMsV0FBVyxFQUFFLElBQUksQ0FBQyxhQUFhLEVBQ3pELENBQUMsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUVoQyxNQUFNLEtBQUssR0FBRyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ3pELElBQUksQ0FBQyxRQUFRLEdBQUcsV0FBVyxLQUFLLGdCQUFnQixLQUFLLElBQUksQ0FBQztRQUMxRCxJQUFJLENBQUMsU0FBUyxHQUFHLGNBQWMsQ0FBQztJQUNsQyxDQUFDO0lBRUQsV0FBVztRQUNULE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDO1FBQ3JDLElBQUksU0FBUyxHQUFHLEVBQUUsQ0FBQztRQUNuQixJQUFJLElBQUksS0FBSyxDQUFDLEVBQUU7WUFDZCxTQUFTLEdBQUcsNENBQTRDLENBQUM7U0FDMUQ7YUFBTTtZQUNMLElBQUksVUFBVSxHQUFHLENBQUMsQ0FBQztZQUNuQixTQUFTO2dCQUNMLElBQUksQ0FBQyxXQUFXO3FCQUNYLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRTtvQkFDWixVQUFVLEVBQUUsQ0FBQztvQkFDYixPQUFPLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxLQUFLLENBQUMsQ0FBQyxDQUFDO3dCQUNsQyw2QkFBNkIsQ0FBQyxzQkFBc0IsQ0FBQyxHQUFHLENBQUMsQ0FBQzt3QkFDMUQsVUFBVSxVQUFVLEdBQUcsQ0FBQyx3QkFDcEIsQ0FBQyxzQkFBc0IsQ0FBQyxHQUFHLENBQUM7Z0JBQ3RDLENBQUMsQ0FBQztxQkFDRCxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7U0FDcEI7UUFFRCxNQUFNLFFBQVEsR0FBRztTQUNaLElBQUksQ0FBQyxPQUFPLENBQUM7OzswQ0FHb0IsU0FBUzs7O01BRzdDLENBQUM7UUFDSCxPQUFPLFFBQVEsQ0FBQztJQUNsQixDQUFDO0NBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7Z2V0Q29vcmRzRGF0YVR5cGUsIGdldE1haW5IZWFkZXJTdHJpbmcgYXMgbWFpbiwgV2ViR1BVUHJvZ3JhbX0gZnJvbSAnLi93ZWJncHVfcHJvZ3JhbSc7XG5pbXBvcnQge2NvbXB1dGVEaXNwYXRjaCwgZmxhdERpc3BhdGNoTGF5b3V0fSBmcm9tICcuL3dlYmdwdV91dGlsJztcblxuZXhwb3J0IGNsYXNzIFN0cmlkZWRTbGljZVByb2dyYW0gaW1wbGVtZW50cyBXZWJHUFVQcm9ncmFtIHtcbiAgdmFyaWFibGVOYW1lcyA9IFsneCddO1xuICB1bmlmb3Jtczogc3RyaW5nO1xuICBvdXRwdXRTaGFwZTogbnVtYmVyW107XG4gIHNoYWRlcktleTogc3RyaW5nO1xuICBkaXNwYXRjaExheW91dDoge3g6IG51bWJlcltdfTtcbiAgZGlzcGF0Y2g6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXTtcbiAgLy8gVE9ETyh4aW5nLnh1KTogSW5jcmVhc2UgdGhlIHdvcmtQZXJUaHJlYWQuXG4gIHdvcmtQZXJUaHJlYWQgPSAxO1xuICB3b3JrZ3JvdXBTaXplOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl0gPSBbNjQsIDEsIDFdO1xuICBzaXplID0gdHJ1ZTtcblxuICBjb25zdHJ1Y3RvcihkZXN0U2l6ZTogbnVtYmVyW10pIHtcbiAgICB0aGlzLm91dHB1dFNoYXBlID0gZGVzdFNpemU7XG4gICAgdGhpcy5kaXNwYXRjaExheW91dCA9IGZsYXREaXNwYXRjaExheW91dCh0aGlzLm91dHB1dFNoYXBlKTtcbiAgICB0aGlzLmRpc3BhdGNoID0gY29tcHV0ZURpc3BhdGNoKFxuICAgICAgICB0aGlzLmRpc3BhdGNoTGF5b3V0LCB0aGlzLm91dHB1dFNoYXBlLCB0aGlzLndvcmtncm91cFNpemUsXG4gICAgICAgIFt0aGlzLndvcmtQZXJUaHJlYWQsIDEsIDFdKTtcblxuICAgIGNvbnN0IGR0eXBlID0gZ2V0Q29vcmRzRGF0YVR5cGUodGhpcy5vdXRwdXRTaGFwZS5sZW5ndGgpO1xuICAgIHRoaXMudW5pZm9ybXMgPSBgYmVnaW4gOiAke2R0eXBlfSwgIHN0cmlkZXMgOiAke2R0eXBlfSwgYDtcbiAgICB0aGlzLnNoYWRlcktleSA9ICdzdHJpZGVkU2xpY2UnO1xuICB9XG5cbiAgZ2V0VXNlckNvZGUoKTogc3RyaW5nIHtcbiAgICBjb25zdCByYW5rID0gdGhpcy5vdXRwdXRTaGFwZS5sZW5ndGg7XG4gICAgbGV0IG5ld0Nvb3JkcyA9ICcnO1xuICAgIGlmIChyYW5rID09PSAxKSB7XG4gICAgICBuZXdDb29yZHMgPSAnY29vcmRzICogdW5pZm9ybXMuc3RyaWRlcyArIHVuaWZvcm1zLmJlZ2luJztcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IG91dHB1dEF4aXMgPSAwO1xuICAgICAgbmV3Q29vcmRzID1cbiAgICAgICAgICB0aGlzLm91dHB1dFNoYXBlXG4gICAgICAgICAgICAgIC5tYXAoKF8sIGkpID0+IHtcbiAgICAgICAgICAgICAgICBvdXRwdXRBeGlzKys7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMub3V0cHV0U2hhcGUubGVuZ3RoID09PSAxID9cbiAgICAgICAgICAgICAgICAgICAgYGNvb3JkcyAqIHVuaWZvcm1zLnN0cmlkZXNbJHtpfV0gKyB1bmlmb3Jtcy5iZWdpblske2l9XWAgOlxuICAgICAgICAgICAgICAgICAgICBgY29vcmRzWyR7b3V0cHV0QXhpcyAtIDF9XSAqIHVuaWZvcm1zLnN0cmlkZXNbJHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGl9XSArIHVuaWZvcm1zLmJlZ2luWyR7aX1dYDtcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgLmpvaW4oJywnKTtcbiAgICB9XG5cbiAgICBjb25zdCB1c2VyQ29kZSA9IGBcbiAgICAgICAke21haW4oJ2luZGV4Jyl9IHtcbiAgICAgICAgIGlmIChpbmRleCA8IHVuaWZvcm1zLnNpemUpIHtcbiAgICAgICAgICAgbGV0IGNvb3JkcyA9IGdldENvb3Jkc0Zyb21JbmRleChpbmRleCk7XG4gICAgICAgICAgIHNldE91dHB1dEF0SW5kZXgoaW5kZXgsIGdldFgoJHtuZXdDb29yZHN9KSk7XG4gICAgICAgICB9XG4gICAgICAgfVxuICAgICBgO1xuICAgIHJldHVybiB1c2VyQ29kZTtcbiAgfVxufVxuIl19","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { buffer, slice_util, StridedSlice, util } from '@tensorflow/tfjs-core';\nimport { stridedSliceImplCPU } from '../kernel_utils/shared';\nimport { reshape } from './Reshape';\nimport { slice } from './Slice';\nimport { StridedSliceProgram } from '../strided_slice_webgpu';\nexport function stridedSlice(args) {\n    const { inputs, backend, attrs } = args;\n    const { x } = inputs;\n    const { begin, end, strides, beginMask, endMask, ellipsisMask, newAxisMask, shrinkAxisMask } = attrs;\n    const { finalShapeSparse, finalShape, isIdentity, sliceDim0, isSimpleSlice, begin: $begin, end: $end, strides: $strides } = slice_util.sliceInfo(x.shape, begin, end, strides, beginMask, endMask, ellipsisMask, newAxisMask, shrinkAxisMask);\n    let result;\n    if (isIdentity) {\n        // Optimization #1, slice is a no-op plus reshape\n        result = reshape({ inputs: { x }, backend, attrs: { shape: finalShape } });\n    }\n    else if (sliceDim0 || isSimpleSlice) {\n        // Optimization #2, slice is memory contiguous (only occurs in dim 0)\n        util.assert(x.shape.length >= 1, () => `Input must have rank at least 1, got: ${x.shape.length}`);\n        const size = slice_util.computeOutShape($begin, $end, $strides);\n        // To tolerate begin[0] > end[0] (a 0-output slice), we min(begin, end).\n        const sliced = slice({ inputs: { x }, backend, attrs: { begin: $begin, size } });\n        result =\n            reshape({ inputs: { x: sliced }, backend, attrs: { shape: finalShape } });\n        backend.disposeData(sliced.dataId);\n    }\n    else {\n        const shouldExecuteOnCPU = backend.shouldExecuteOnCPU([x]);\n        if (shouldExecuteOnCPU) {\n            const values = backend.readSync(x.dataId);\n            const xBuf = buffer(x.shape, x.dtype, values);\n            const resultValues = stridedSliceImplCPU(finalShapeSparse, xBuf, $strides, $begin);\n            result = backend.makeTensorInfo(finalShape, x.dtype, resultValues.values);\n        }\n        else {\n            const program = new StridedSliceProgram(finalShapeSparse);\n            const uniformData = [{ type: 'int32', data: $begin }, { type: 'int32', data: $strides }];\n            const resultValues = backend.runWebGPUProgram(program, [x], x.dtype, uniformData);\n            result = reshape({ inputs: { x: resultValues }, backend, attrs: { shape: finalShape } });\n            backend.disposeData(resultValues.dataId);\n        }\n    }\n    return result;\n}\nexport const stridedSliceConfig = {\n    kernelName: StridedSlice,\n    backendName: 'webgpu',\n    kernelFunc: stridedSlice\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU3RyaWRlZFNsaWNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMva2VybmVscy9TdHJpZGVkU2xpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUFDLE1BQU0sRUFBa0MsVUFBVSxFQUFFLFlBQVksRUFBK0UsSUFBSSxFQUFDLE1BQU0sdUJBQXVCLENBQUM7QUFHMUwsT0FBTyxFQUFDLG1CQUFtQixFQUFDLE1BQU0sd0JBQXdCLENBQUM7QUFFM0QsT0FBTyxFQUFDLE9BQU8sRUFBQyxNQUFNLFdBQVcsQ0FBQztBQUNsQyxPQUFPLEVBQUMsS0FBSyxFQUFDLE1BQU0sU0FBUyxDQUFDO0FBQzlCLE9BQU8sRUFBQyxtQkFBbUIsRUFBQyxNQUFNLHlCQUF5QixDQUFDO0FBRTVELE1BQU0sVUFBVSxZQUFZLENBQUMsSUFJNUI7SUFDQyxNQUFNLEVBQUMsTUFBTSxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUMsR0FBRyxJQUFJLENBQUM7SUFDdEMsTUFBTSxFQUFDLENBQUMsRUFBQyxHQUFHLE1BQU0sQ0FBQztJQUNuQixNQUFNLEVBQ0osS0FBSyxFQUNMLEdBQUcsRUFDSCxPQUFPLEVBQ1AsU0FBUyxFQUNULE9BQU8sRUFDUCxZQUFZLEVBQ1osV0FBVyxFQUNYLGNBQWMsRUFDZixHQUFHLEtBQUssQ0FBQztJQUVWLE1BQU0sRUFDSixnQkFBZ0IsRUFDaEIsVUFBVSxFQUNWLFVBQVUsRUFDVixTQUFTLEVBQ1QsYUFBYSxFQUNiLEtBQUssRUFBRSxNQUFNLEVBQ2IsR0FBRyxFQUFFLElBQUksRUFDVCxPQUFPLEVBQUUsUUFBUSxFQUNsQixHQUNHLFVBQVUsQ0FBQyxTQUFTLENBQ2hCLENBQUMsQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRSxPQUFPLEVBQUUsU0FBUyxFQUFFLE9BQU8sRUFBRSxZQUFZ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SUFDeEIsV0FBVyxFQUFFLFFBQVE7SUFDckIsVUFBVSxFQUFFLFlBQXFDO0NBQ2xELENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7YnVmZmVyLCBLZXJuZWxDb25maWcsIEtlcm5lbEZ1bmMsIFJhbmssIHNsaWNlX3V0aWwsIFN0cmlkZWRTbGljZSwgU3RyaWRlZFNsaWNlQXR0cnMsIFN0cmlkZWRTbGljZUlucHV0cywgVGVuc29yQnVmZmVyLCBUZW5zb3JJbmZvLCBUeXBlZEFycmF5LCB1dGlsfSBmcm9tICdAdGVuc29yZmxvdy90ZmpzLWNvcmUnO1xuXG5pbXBvcnQge1dlYkdQVUJhY2tlbmR9IGZyb20gJy4uL2JhY2tlbmRfd2ViZ3B1JztcbmltcG9ydCB7c3RyaWRlZFNsaWNlSW1wbENQVX0gZnJvbSAnLi4va2VybmVsX3V0aWxzL3NoYXJlZCc7XG5cbmltcG9ydCB7cmVzaGFwZX0gZnJvbSAnLi9SZXNoYXBlJztcbmltcG9ydCB7c2xpY2V9IGZyb20gJy4vU2xpY2UnO1xuaW1wb3J0IHtTdHJpZGVkU2xpY2VQcm9ncmFtfSBmcm9tICcuLi9zdHJpZGVkX3NsaWNlX3dlYmdwdSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBzdHJpZGVkU2xpY2UoYXJnczoge1xuICBpbnB1dHM6IFN0cmlkZWRTbGljZUlucHV0cyxcbiAgYmFja2VuZDogV2ViR1BVQmFja2VuZCxcbiAgYXR0cnM6IFN0cmlkZWRTbGljZUF0dHJzXG59KTogVGVuc29ySW5mbyB7XG4gIGNvbnN0IHtpbnB1dHMsIGJhY2tlbmQsIGF0dHJzfSA9IGFyZ3M7XG4gIGNvbnN0IHt4fSA9IGlucHV0cztcbiAgY29uc3Qge1xuICAgIGJlZ2luLFxuICAgIGVuZCxcbiAgICBzdHJpZGVzLFxuICAgIGJlZ2luTWFzayxcbiAgICBlbmRNYXNrLFxuICAgIGVsbGlwc2lzTWFzayxcbiAgICBuZXdBeGlzTWFzayxcbiAgICBzaHJpbmtBeGlzTWFza1xuICB9ID0gYXR0cnM7XG5cbiAgY29uc3Qge1xuICAgIGZpbmFsU2hhcGVTcGFyc2UsXG4gICAgZmluYWxTaGFwZSxcbiAgICBpc0lkZW50aXR5LFxuICAgIHNsaWNlRGltMCxcbiAgICBpc1NpbXBsZVNsaWNlLFxuICAgIGJlZ2luOiAkYmVnaW4sXG4gICAgZW5kOiAkZW5kLFxuICAgIHN0cmlkZXM6ICRzdHJpZGVzXG4gIH0gPVxuICAgICAgc2xpY2VfdXRpbC5zbGljZUluZm8oXG4gICAgICAgICAgeC5zaGFwZSwgYmVnaW4sIGVuZCwgc3RyaWRlcywgYmVnaW5NYXNrLCBlbmRNYXNrLCBlbGxpcHNpc01hc2ssXG4gICAgICAgICAgbmV3QXhpc01hc2ssIHNocmlua0F4aXNNYXNrKTtcblxuICBsZXQgcmVzdWx0O1xuXG4gIGlmIChpc0lkZW50aXR5KSB7XG4gICAgLy8gT3B0aW1pemF0aW9uICMxLCBzbGljZSBpcyBhIG5vLW9wIHBsdXMgcmVzaGFwZVxuICAgIHJlc3VsdCA9IHJlc2hhcGUoe2lucHV0czoge3h9LCBiYWNrZW5kLCBhdHRyczoge3NoYXBlOiBmaW5hbFNoYXBlfX0pO1xuICB9IGVsc2UgaWYgKHNsaWNlRGltMCB8fCBpc1NpbXBsZVNsaWNlKSB7XG4gICAgLy8gT3B0aW1pemF0aW9uICMyLCBzbGljZSBpcyBtZW1vcnkgY29udGlndW91cyAob25seSBvY2N1cnMgaW4gZGltIDApXG4gICAgdXRpbC5hc3NlcnQoXG4gICAgICAgIHguc2hhcGUubGVuZ3RoID49IDEsXG4gICAgICAgICgpID0+IGBJbnB1dCBtdXN0IGhhdmUgcmFuayBhdCBsZWFzdCAxLCBnb3Q6ICR7eC5zaGFwZS5sZW5ndGh9YCk7XG5cbiAgICBjb25zdCBzaXplID0gc2xpY2VfdXRpbC5jb21wdXRlT3V0U2hhcGUoJGJlZ2luLCAkZW5kLCAkc3RyaWRlcyk7XG4gICAgLy8gVG8gdG9sZXJhdGUgYmVnaW5bMF0gPiBlbmRbMF0gKGEgMC1vdXRwdXQgc2xpY2UpLCB3ZSBtaW4oYmVnaW4sIGVuZCkuXG4gICAgY29uc3Qgc2xpY2VkID0gc2xpY2Uoe2lucHV0czoge3h9LCBiYWNrZW5kLCBhdHRyczoge2JlZ2luOiAkYmVnaW4sIHNpemV9fSk7XG4gICAgcmVzdWx0ID1cbiAgICAgICAgcmVzaGFwZSh7aW5wdXRzOiB7eDogc2xpY2VkfSwgYmFja2VuZCwgYXR0cnM6IHtzaGFwZTogZmluYWxTaGFwZX19KTtcbiAgICBiYWNrZW5kLmRpc3Bvc2VEYXRhKHNsaWNlZC5kYXRhSWQpO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IHNob3VsZEV4ZWN1dGVPbkNQVSA9IGJhY2tlbmQuc2hvdWxkRXhlY3V0ZU9uQ1BVKFt4XSk7XG4gICAgaWYgKHNob3VsZEV4ZWN1dGVPbkNQVSkge1xuICAgICAgY29uc3QgdmFsdWVzID0gYmFja2VuZC5yZWFkU3luYyh4LmRhdGFJZCkgYXMgVHlwZWRBcnJheTtcbiAgICAgIGNvbnN0IHhCdWYgPSBidWZmZXIoeC5zaGFwZSwgeC5kdHlwZSwgdmFsdWVzKSBhcyBUZW5zb3JCdWZmZXI8UmFuaz47XG4gICAgICBjb25zdCByZXN1bHRWYWx1ZXMgPVxuICAgICAgICAgIHN0cmlkZWRTbGljZUltcGxDUFUoZmluYWxTaGFwZVNwYXJzZSwgeEJ1ZiwgJHN0cmlkZXMsICRiZWdpbik7XG4gICAgICByZXN1bHQgPSBiYWNrZW5kLm1ha2VUZW5zb3JJbmZvKGZpbmFsU2hhcGUsIHguZHR5cGUsIHJlc3VsdFZhbHVlcy52YWx1ZXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBwcm9ncmFtID0gbmV3IFN0cmlkZWRTbGljZVByb2dyYW0oZmluYWxTaGFwZVNwYXJzZSk7XG4gICAgICBjb25zdCB1bmlmb3JtRGF0YSA9XG4gICAgICAgICAgW3t0eXBlOiAnaW50MzInLCBkYXRhOiAkYmVnaW59LCB7dHlwZTogJ2ludDMyJywgZGF0YTogJHN0cmlkZXN9XTtcbiAgICAgIGNvbnN0IHJlc3VsdFZhbHVlcyA9XG4gICAgICAgICAgYmFja2VuZC5ydW5XZWJHUFVQcm9ncmFtKHByb2dyYW0sIFt4XSwgeC5kdHlwZSwgdW5pZm9ybURhdGEpO1xuICAgICAgcmVzdWx0ID0gcmVzaGFwZShcbiAgICAgICAgICB7aW5wdXRzOiB7eDogcmVzdWx0VmFsdWVzfSwgYmFja2VuZCwgYXR0cnM6IHtzaGFwZTogZmluYWxTaGFwZX19KTtcbiAgICAgIGJhY2tlbmQuZGlzcG9zZURhdGEocmVzdWx0VmFsdWVzLmRhdGFJZCk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZXhwb3J0IGNvbnN0IHN0cmlkZWRTbGljZUNvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBTdHJpZGVkU2xpY2UsXG4gIGJhY2tlbmROYW1lOiAnd2ViZ3B1JyxcbiAga2VybmVsRnVuYzogc3RyaWRlZFNsaWNlIGFzIHVua25vd24gYXMgS2VybmVsRnVuY1xufTtcbiJdfQ==","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { StringNGrams } from '@tensorflow/tfjs-core';\nimport { stringNGramsImplCPU } from '../kernel_utils/shared';\nexport function stringNGrams(args) {\n    const { inputs, backend, attrs } = args;\n    const { separator, nGramWidths, leftPad, rightPad, padWidth, preserveShortSequences } = attrs;\n    const { data, dataSplits } = inputs;\n    const $data = backend.readSync(data.dataId);\n    const $dataSplits = backend.readSync(dataSplits.dataId);\n    const [nGrams, nGramsSplits] = stringNGramsImplCPU($data, $dataSplits, separator, nGramWidths, leftPad, rightPad, padWidth, preserveShortSequences);\n    return [\n        backend.makeTensorInfo([nGrams.length], 'string', nGrams),\n        backend.makeTensorInfo(dataSplits.shape, 'int32', nGramsSplits),\n    ];\n}\nexport const stringNGramsConfig = {\n    kernelName: StringNGrams,\n    backendName: 'webgpu',\n    kernelFunc: stringNGrams,\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU3RyaW5nTkdyYW1zLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMva2VybmVscy9TdHJpbmdOR3JhbXMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUEyQixZQUFZLEVBQW9ELE1BQU0sdUJBQXVCLENBQUM7QUFHaEksT0FBTyxFQUFDLG1CQUFtQixFQUFDLE1BQU0sd0JBQXdCLENBQUM7QUFFM0QsTUFBTSxVQUFVLFlBQVksQ0FBQyxJQUk1QjtJQUNDLE1BQU0sRUFBQyxNQUFNLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBQyxHQUFHLElBQUksQ0FBQztJQUN0QyxNQUFNLEVBQ0osU0FBUyxFQUNULFdBQVcsRUFDWCxPQUFPLEVBQ1AsUUFBUSxFQUNSLFFBQVEsRUFDUixzQkFBc0IsRUFDdkIsR0FBRyxLQUFLLENBQUM7SUFDVixNQUFNLEVBQUMsSUFBSSxFQUFFLFVBQVUsRUFBQyxHQUFHLE1BQU0sQ0FBQztJQUNsQyxNQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQWlCLENBQUM7SUFDNUQsTUFBTSxXQUFXLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFlLENBQUM7SUFFdEUsTUFBTSxDQUFDLE1BQU0sRUFBRSxZQUFZLENBQUMsR0FBRyxtQkFBbUIsQ0FDOUMsS0FBSyxFQUFFLFdBQVcsRUFBRSxTQUFTLEVBQUUsV0FBVyxFQUFFLE9BQU8sRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUN2RSxzQkFBc0IsQ0FBQyxDQUFDO0lBQzVCLE9BQU87UUFDTCxPQUFPLENBQUMsY0FBYyxDQUFDLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFLFFBQVEsRUFBRSxNQUFNLENBQUM7UUFDekQsT0FBTyxDQUFDLGNBQWMsQ0FBQyxVQUFVLENBQUMsS0FBSyxFQUFFLE9BQU8sRUFBRSxZQUFZLENBQUM7S0FDaEUsQ0FBQztBQUNKLENBQUM7QUFFRCxNQUFNLENBQUMsTUFBTSxrQkFBa0IsR0FBaUI7SUFDOUMsVUFBVSxFQUFFLFlBQVk7SUFDeEIsV0FBVyxFQUFFLFFBQVE7SUFDckIsVUFBVSxFQUFFLFlBQXFDO0NBQ2xELENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7S2VybmVsQ29uZmlnLCBLZXJuZWxGdW5jLCBTdHJpbmdOR3JhbXMsIFN0cmluZ05HcmFtc0F0dHJzLCBTdHJpbmdOR3JhbXNJbnB1dHMsIFRlbnNvckluZm99IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7V2ViR1BVQmFja2VuZH0gZnJvbSAnLi4vYmFja2VuZF93ZWJncHUnO1xuaW1wb3J0IHtzdHJpbmdOR3JhbXNJbXBsQ1BVfSBmcm9tICcuLi9rZXJuZWxfdXRpbHMvc2hhcmVkJztcblxuZXhwb3J0IGZ1bmN0aW9uIHN0cmluZ05HcmFtcyhhcmdzOiB7XG4gIGlucHV0czogU3RyaW5nTkdyYW1zSW5wdXRzLFxuICBiYWNrZW5kOiBXZWJHUFVCYWNrZW5kLFxuICBhdHRyczogU3RyaW5nTkdyYW1zQXR0cnNcbn0pOiBbVGVuc29ySW5mbywgVGVuc29ySW5mb10ge1xuICBjb25zdCB7aW5wdXRzLCBiYWNrZW5kLCBhdHRyc30gPSBhcmdzO1xuICBjb25zdCB7XG4gICAgc2VwYXJhdG9yLFxuICAgIG5HcmFtV2lkdGhzLFxuICAgIGxlZnRQYWQsXG4gICAgcmlnaHRQYWQsXG4gICAgcGFkV2lkdGgsXG4gICAgcHJlc2VydmVTaG9ydFNlcXVlbmNlc1xuICB9ID0gYXR0cnM7XG4gIGNvbnN0IHtkYXRhLCBkYXRhU3BsaXRzfSA9IGlucHV0cztcbiAgY29uc3QgJGRhdGEgPSBiYWNrZW5kLnJlYWRTeW5jKGRhdGEuZGF0YUlkKSBhcyBVaW50OEFycmF5W107XG4gIGNvbnN0ICRkYXRhU3BsaXRzID0gYmFja2VuZC5yZWFkU3luYyhkYXRhU3BsaXRzLmRhdGFJZCkgYXMgSW50MzJBcnJheTtcblxuICBjb25zdCBbbkdyYW1zLCBuR3JhbXNTcGxpdHNdID0gc3RyaW5nTkdyYW1zSW1wbENQVShcbiAgICAgICRkYXRhLCAkZGF0YVNwbGl0cywgc2VwYXJhdG9yLCBuR3JhbVdpZHRocywgbGVmdFBhZCwgcmlnaHRQYWQsIHBhZFdpZHRoLFxuICAgICAgcHJlc2VydmVTaG9ydFNlcXVlbmNlcyk7XG4gIHJldHVybiBbXG4gICAgYmFja2VuZC5tYWtlVGVuc29ySW5mbyhbbkdyYW1zLmxlbmd0aF0sICdzdHJpbmcnLCBuR3JhbXMpLFxuICAgIGJhY2tlbmQubWFrZVRlbnNvckluZm8oZGF0YVNwbGl0cy5zaGFwZSwgJ2ludDMyJywgbkdyYW1zU3BsaXRzKSxcbiAgXTtcbn1cblxuZXhwb3J0IGNvbnN0IHN0cmluZ05HcmFtc0NvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBTdHJpbmdOR3JhbXMsXG4gIGJhY2tlbmROYW1lOiAnd2ViZ3B1JyxcbiAga2VybmVsRnVuYzogc3RyaW5nTkdyYW1zIGFzIHVua25vd24gYXMgS2VybmVsRnVuYyxcbn07XG4iXX0=","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Sub } from '@tensorflow/tfjs-core';\nimport { BinaryOpType } from '../binary_op_util';\nimport { binaryKernelFunc } from '../kernel_utils/kernel_funcs_utils';\nimport { subImplCPU as cpuSub } from '../kernel_utils/shared';\nexport const sub = binaryKernelFunc({ opType: BinaryOpType.SUB, cpuKernelImpl: cpuSub, supportsComplex: true });\nexport const subConfig = {\n    kernelName: Sub,\n    backendName: 'webgpu',\n    kernelFunc: sub\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU3ViLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMva2VybmVscy9TdWIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUFlLEdBQUcsRUFBQyxNQUFNLHVCQUF1QixDQUFDO0FBRXhELE9BQU8sRUFBQyxZQUFZLEVBQUMsTUFBTSxtQkFBbUIsQ0FBQztBQUMvQyxPQUFPLEVBQUMsZ0JBQWdCLEVBQUMsTUFBTSxvQ0FBb0MsQ0FBQztBQUNwRSxPQUFPLEVBQUMsVUFBVSxJQUFJLE1BQU0sRUFBQyxNQUFNLHdCQUF3QixDQUFDO0FBRTVELE1BQU0sQ0FBQyxNQUFNLEdBQUcsR0FBRyxnQkFBZ0IsQ0FDL0IsRUFBQyxNQUFNLEVBQUUsWUFBWSxDQUFDLEdBQUcsRUFBRSxhQUFhLEVBQUUsTUFBTSxFQUFFLGVBQWUsRUFBRSxJQUFJLEVBQUMsQ0FBQyxDQUFDO0FBRTlFLE1BQU0sQ0FBQyxNQUFNLFNBQVMsR0FBaUI7SUFDckMsVUFBVSxFQUFFLEdBQUc7SUFDZixXQUFXLEVBQUUsUUFBUTtJQUNyQixVQUFVLEVBQUUsR0FBRztDQUNoQixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge0tlcm5lbENvbmZpZywgU3VifSBmcm9tICdAdGVuc29yZmxvdy90ZmpzLWNvcmUnO1xuXG5pbXBvcnQge0JpbmFyeU9wVHlwZX0gZnJvbSAnLi4vYmluYXJ5X29wX3V0aWwnO1xuaW1wb3J0IHtiaW5hcnlLZXJuZWxGdW5jfSBmcm9tICcuLi9rZXJuZWxfdXRpbHMva2VybmVsX2Z1bmNzX3V0aWxzJztcbmltcG9ydCB7c3ViSW1wbENQVSBhcyBjcHVTdWJ9IGZyb20gJy4uL2tlcm5lbF91dGlscy9zaGFyZWQnO1xuXG5leHBvcnQgY29uc3Qgc3ViID0gYmluYXJ5S2VybmVsRnVuYyhcbiAgICB7b3BUeXBlOiBCaW5hcnlPcFR5cGUuU1VCLCBjcHVLZXJuZWxJbXBsOiBjcHVTdWIsIHN1cHBvcnRzQ29tcGxleDogdHJ1ZX0pO1xuXG5leHBvcnQgY29uc3Qgc3ViQ29uZmlnOiBLZXJuZWxDb25maWcgPSB7XG4gIGtlcm5lbE5hbWU6IFN1YixcbiAgYmFja2VuZE5hbWU6ICd3ZWJncHUnLFxuICBrZXJuZWxGdW5jOiBzdWJcbn07XG4iXX0=","/**\n * @license\n * Copyright 2022 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Tan } from '@tensorflow/tfjs-core';\nimport { unaryKernelFunc } from '../kernel_utils/kernel_funcs_utils';\nimport { UnaryOpType } from '../unary_op_util';\nexport const tan = unaryKernelFunc({ opType: UnaryOpType.TAN });\nexport const tanConfig = {\n    kernelName: Tan,\n    backendName: 'webgpu',\n    kernelFunc: tan\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVGFuLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMva2VybmVscy9UYW4udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUFlLEdBQUcsRUFBQyxNQUFNLHVCQUF1QixDQUFDO0FBRXhELE9BQU8sRUFBQyxlQUFlLEVBQUMsTUFBTSxvQ0FBb0MsQ0FBQztBQUNuRSxPQUFPLEVBQUMsV0FBVyxFQUFDLE1BQU0sa0JBQWtCLENBQUM7QUFFN0MsTUFBTSxDQUFDLE1BQU0sR0FBRyxHQUFHLGVBQWUsQ0FBQyxFQUFDLE1BQU0sRUFBRSxXQUFXLENBQUMsR0FBRyxFQUFDLENBQUMsQ0FBQztBQUU5RCxNQUFNLENBQUMsTUFBTSxTQUFTLEdBQWlCO0lBQ3JDLFVBQVUsRUFBRSxHQUFHO0lBQ2YsV0FBVyxFQUFFLFFBQVE7SUFDckIsVUFBVSxFQUFFLEdBQUc7Q0FDaEIsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTEMuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtLZXJuZWxDb25maWcsIFRhbn0gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcblxuaW1wb3J0IHt1bmFyeUtlcm5lbEZ1bmN9IGZyb20gJy4uL2tlcm5lbF91dGlscy9rZXJuZWxfZnVuY3NfdXRpbHMnO1xuaW1wb3J0IHtVbmFyeU9wVHlwZX0gZnJvbSAnLi4vdW5hcnlfb3BfdXRpbCc7XG5cbmV4cG9ydCBjb25zdCB0YW4gPSB1bmFyeUtlcm5lbEZ1bmMoe29wVHlwZTogVW5hcnlPcFR5cGUuVEFOfSk7XG5cbmV4cG9ydCBjb25zdCB0YW5Db25maWc6IEtlcm5lbENvbmZpZyA9IHtcbiAga2VybmVsTmFtZTogVGFuLFxuICBiYWNrZW5kTmFtZTogJ3dlYmdwdScsXG4gIGtlcm5lbEZ1bmM6IHRhblxufTtcbiJdfQ==","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Tanh } from '@tensorflow/tfjs-core';\nimport { unaryKernelFunc } from '../kernel_utils/kernel_funcs_utils';\nimport { UnaryOpType } from '../unary_op_util';\nexport const tanh = unaryKernelFunc({ opType: UnaryOpType.TANH });\nexport const tanhConfig = {\n    kernelName: Tanh,\n    backendName: 'webgpu',\n    kernelFunc: tanh\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVGFuaC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2tlcm5lbHMvVGFuaC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQWUsSUFBSSxFQUFDLE1BQU0sdUJBQXVCLENBQUM7QUFDekQsT0FBTyxFQUFDLGVBQWUsRUFBQyxNQUFNLG9DQUFvQyxDQUFDO0FBQ25FLE9BQU8sRUFBQyxXQUFXLEVBQUMsTUFBTSxrQkFBa0IsQ0FBQztBQUU3QyxNQUFNLENBQUMsTUFBTSxJQUFJLEdBQUcsZUFBZSxDQUFDLEVBQUMsTUFBTSxFQUFFLFdBQVcsQ0FBQyxJQUFJLEVBQUMsQ0FBQyxDQUFDO0FBRWhFLE1BQU0sQ0FBQyxNQUFNLFVBQVUsR0FBaUI7SUFDdEMsVUFBVSxFQUFFLElBQUk7SUFDaEIsV0FBVyxFQUFFLFFBQVE7SUFDckIsVUFBVSxFQUFFLElBQUk7Q0FDakIsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtLZXJuZWxDb25maWcsIFRhbmh9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5pbXBvcnQge3VuYXJ5S2VybmVsRnVuY30gZnJvbSAnLi4va2VybmVsX3V0aWxzL2tlcm5lbF9mdW5jc191dGlscyc7XG5pbXBvcnQge1VuYXJ5T3BUeXBlfSBmcm9tICcuLi91bmFyeV9vcF91dGlsJztcblxuZXhwb3J0IGNvbnN0IHRhbmggPSB1bmFyeUtlcm5lbEZ1bmMoe29wVHlwZTogVW5hcnlPcFR5cGUuVEFOSH0pO1xuXG5leHBvcnQgY29uc3QgdGFuaENvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBUYW5oLFxuICBiYWNrZW5kTmFtZTogJ3dlYmdwdScsXG4gIGtlcm5lbEZ1bmM6IHRhbmhcbn07XG4iXX0=","/**\n * @license\n * Copyright 2023 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { backend_util, TensorScatterUpdate, util } from '@tensorflow/tfjs-core';\nimport { ScatterProgram } from '../scatter_webgpu';\nimport { reshape } from './Reshape';\nimport { tile } from './Tile';\nexport function tensorScatterUpdate(args) {\n    const { inputs, backend, attrs } = args;\n    const { tensor, indices, updates } = inputs;\n    const {} = attrs;\n    const { sliceRank, numUpdates, sliceSize, strides, outputSize } = backend_util.calculateShapes(updates, indices, tensor.shape);\n    const flattenShape = [outputSize / sliceSize, sliceSize];\n    if (outputSize === 0) {\n        return backend.makeTensorInfo(tensor.shape, indices.dtype);\n    }\n    const toDispose = [];\n    const flattenIndices = reshape({ inputs: { x: indices }, backend, attrs: { shape: [numUpdates, sliceRank] } });\n    toDispose.push(flattenIndices);\n    const flattenX = reshape({ inputs: { x: updates }, backend, attrs: { shape: [numUpdates, sliceSize] } });\n    toDispose.push(flattenX);\n    const flattenTensor = reshape({ inputs: { x: tensor }, backend, attrs: { shape: flattenShape } });\n    toDispose.push(flattenTensor);\n    const output = tile({\n        inputs: { x: flattenTensor },\n        backend,\n        attrs: { reps: Array(flattenShape.length).fill(1) }\n    });\n    const program = new ScatterProgram([numUpdates, sliceSize], sliceRank, flattenIndices.shape.length, flattenX.shape.length, strides, flattenShape, tensor.dtype, false);\n    const size = util.sizeFromShape([numUpdates, sliceSize]);\n    const uniformData = [\n        { type: 'int32', data: [sliceRank] },\n        { type: 'int32', data: strides },\n        { type: 'int32', data: [size] },\n    ];\n    const res = backend.runWebGPUProgram(program, [flattenX, flattenIndices], flattenTensor.dtype, uniformData, output);\n    toDispose.push(res);\n    const reshaped = reshape({ inputs: { x: res }, backend, attrs: { shape: tensor.shape } });\n    toDispose.forEach(t => backend.disposeData(t.dataId));\n    return reshaped;\n}\nexport const tensorScatterUpdateConfig = {\n    kernelName: TensorScatterUpdate,\n    backendName: 'webgpu',\n    kernelFunc: tensorScatterUpdate\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVGVuc29yU2NhdHRlclVwZGF0ZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2tlcm5lbHMvVGVuc29yU2NhdHRlclVwZGF0ZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQUMsWUFBWSxFQUF3QyxtQkFBbUIsRUFBdUQsSUFBSSxFQUFDLE1BQU0sdUJBQXVCLENBQUM7QUFHekssT0FBTyxFQUFDLGNBQWMsRUFBQyxNQUFNLG1CQUFtQixDQUFDO0FBRWpELE9BQU8sRUFBQyxPQUFPLEVBQUMsTUFBTSxXQUFXLENBQUM7QUFDbEMsT0FBTyxFQUFDLElBQUksRUFBQyxNQUFNLFFBQVEsQ0FBQztBQUU1QixNQUFNLFVBQVUsbUJBQW1CLENBQUMsSUFJbkM7SUFDQyxNQUFNLEVBQUMsTUFBTSxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUMsR0FBRyxJQUFJLENBQUM7SUFDdEMsTUFBTSxFQUFDLE1BQU0sRUFBRSxPQUFPLEVBQUUsT0FBTyxFQUFDLEdBQUcsTUFBTSxDQUFDO0lBQzFDLE1BQU0sRUFBRSxHQUFHLEtBQUssQ0FBQztJQUVqQixNQUFNLEVBQUMsU0FBUyxFQUFFLFVBQVUsRUFBRSxTQUFTLEVBQUUsT0FBTyxFQUFFLFVBQVUsRUFBQyxHQUN6RCxZQUFZLENBQUMsZUFBZSxDQUFDLE9BQU8sRUFBRSxPQUFPLEVBQUUsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBRWpFLE1BQU0sWUFBWSxHQUFHLENBQUMsVUFBVSxHQUFHLFNBQVMsRUFBRSxTQUFTLENBQUMsQ0FBQztJQUV6RCxJQUFJLFVBQVUsS0FBSyxDQUFDLEVBQUU7UUFDcEIsT0FBTyxPQUFPLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDO0tBQzVEO0lBRUQsTUFBTSxTQUFTLEdB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QyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTEMuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtiYWNrZW5kX3V0aWwsIEtlcm5lbENvbmZpZywgS2VybmVsRnVuYywgVGVuc29ySW5mbywgVGVuc29yU2NhdHRlclVwZGF0ZSwgVGVuc29yU2NhdHRlclVwZGF0ZUF0dHJzLCBUZW5zb3JTY2F0dGVyVXBkYXRlSW5wdXRzLCB1dGlsfSBmcm9tICdAdGVuc29yZmxvdy90ZmpzLWNvcmUnO1xuXG5pbXBvcnQge1dlYkdQVUJhY2tlbmR9IGZyb20gJy4uL2JhY2tlbmRfd2ViZ3B1JztcbmltcG9ydCB7U2NhdHRlclByb2dyYW19IGZyb20gJy4uL3NjYXR0ZXJfd2ViZ3B1JztcblxuaW1wb3J0IHtyZXNoYXBlfSBmcm9tICcuL1Jlc2hhcGUnO1xuaW1wb3J0IHt0aWxlfSBmcm9tICcuL1RpbGUnO1xuXG5leHBvcnQgZnVuY3Rpb24gdGVuc29yU2NhdHRlclVwZGF0ZShhcmdzOiB7XG4gIGlucHV0czogVGVuc29yU2NhdHRlclVwZGF0ZUlucHV0cyxcbiAgYmFja2VuZDogV2ViR1BVQmFja2VuZCxcbiAgYXR0cnM6IFRlbnNvclNjYXR0ZXJVcGRhdGVBdHRyc1xufSk6IFRlbnNvckluZm8ge1xuICBjb25zdCB7aW5wdXRzLCBiYWNrZW5kLCBhdHRyc30gPSBhcmdzO1xuICBjb25zdCB7dGVuc29yLCBpbmRpY2VzLCB1cGRhdGVzfSA9IGlucHV0cztcbiAgY29uc3Qge30gPSBhdHRycztcblxuICBjb25zdCB7c2xpY2VSYW5rLCBudW1VcGRhdGVzLCBzbGljZVNpemUsIHN0cmlkZXMsIG91dHB1dFNpemV9ID1cbiAgICAgIGJhY2tlbmRfdXRpbC5jYWxjdWxhdGVTaGFwZXModXBkYXRlcywgaW5kaWNlcywgdGVuc29yLnNoYXBlKTtcblxuICBjb25zdCBmbGF0dGVuU2hhcGUgPSBbb3V0cHV0U2l6ZSAvIHNsaWNlU2l6ZSwgc2xpY2VTaXplXTtcblxuICBpZiAob3V0cHV0U2l6ZSA9PT0gMCkge1xuICAgIHJldHVybiBiYWNrZW5kLm1ha2VUZW5zb3JJbmZvKHRlbnNvci5zaGFwZSwgaW5kaWNlcy5kdHlwZSk7XG4gIH1cblxuICBjb25zdCB0b0Rpc3Bvc2UgPSBbXTtcblxuICBjb25zdCBmbGF0dGVuSW5kaWNlcyA9IHJlc2hhcGUoXG4gICAgICB7aW5wdXRzOiB7eDogaW5kaWNlc30sIGJhY2tlbmQsIGF0dHJzOiB7c2hhcGU6IFtudW1VcGRhdGVzLCBzbGljZVJhbmtdfX0pO1xuICB0b0Rpc3Bvc2UucHVzaChmbGF0dGVuSW5kaWNlcyk7XG4gIGNvbnN0IGZsYXR0ZW5YID0gcmVzaGFwZShcbiAgICAgIHtpbnB1dHM6IHt4OiB1cGRhdGVzfSwgYmFja2VuZCwgYXR0cnM6IHtzaGFwZTogW251bVVwZGF0ZXMsIHNsaWNlU2l6ZV19fSk7XG4gIHRvRGlzcG9zZS5wdXNoKGZsYXR0ZW5YKTtcbiAgY29uc3QgZmxhdHRlblRlbnNvciA9XG4gICAgICByZXNoYXBlKHtpbnB1dHM6IHt4OiB0ZW5zb3J9LCBiYWNrZW5kLCBhdHRyczoge3NoYXBlOiBmbGF0dGVuU2hhcGV9fSk7XG4gIHRvRGlzcG9zZS5wdXNoKGZsYXR0ZW5UZW5zb3IpO1xuICBjb25zdCBvdXRwdXQgPSB0aWxlKHtcbiAgICBpbnB1dHM6IHt4OiBmbGF0dGVuVGVuc29yfSxcbiAgICBiYWNrZW5kLFxuICAgIGF0dHJzOiB7cmVwczogQXJyYXkoZmxhdHRlblNoYXBlLmxlbmd0aCkuZmlsbCgxKX1cbiAgfSk7XG4gIGNvbnN0IHByb2dyYW0gPSBuZXcgU2NhdHRlclByb2dyYW0oXG4gICAgICBbbnVtVXBkYXRlcywgc2xpY2VTaXplXSwgc2xpY2VSYW5rLCBmbGF0dGVuSW5kaWNlcy5zaGFwZS5sZW5ndGgsXG4gICAgICBmbGF0dGVuWC5zaGFwZS5sZW5ndGgsIHN0cmlkZXMsIGZsYXR0ZW5TaGFwZSwgdGVuc29yLmR0eXBlLCBmYWxzZSk7XG4gIGNvbnN0IHNpemUgPSB1dGlsLnNpemVGcm9tU2hhcGUoW251bVVwZGF0ZXMsIHNsaWNlU2l6ZV0pO1xuICBjb25zdCB1bmlmb3JtRGF0YSA9IFtcbiAgICB7dHlwZTogJ2ludDMyJywgZGF0YTogW3NsaWNlUmFua119LFxuICAgIHt0eXBlOiAnaW50MzInLCBkYXRhOiBzdHJpZGVzfSxcbiAgICB7dHlwZTogJ2ludDMyJywgZGF0YTogW3NpemVdfSxcbiAgXTtcbiAgY29uc3QgcmVzID0gYmFja2VuZC5ydW5XZWJHUFVQcm9ncmFtKFxuICAgICAgcHJvZ3JhbSwgW2ZsYXR0ZW5YLCBmbGF0dGVuSW5kaWNlc10sIGZsYXR0ZW5UZW5zb3IuZHR5cGUsIHVuaWZvcm1EYXRhLFxuICAgICAgb3V0cHV0KTtcbiAgdG9EaXNwb3NlLnB1c2gocmVzKTtcblxuICBjb25zdCByZXNoYXBlZCA9XG4gICAgICByZXNoYXBlKHtpbnB1dHM6IHt4OiByZXN9LCBiYWNrZW5kLCBhdHRyczoge3NoYXBlOiB0ZW5zb3Iuc2hhcGV9fSk7XG5cbiAgdG9EaXNwb3NlLmZvckVhY2godCA9PiBiYWNrZW5kLmRpc3Bvc2VEYXRhKHQuZGF0YUlkKSk7XG5cbiAgcmV0dXJuIHJlc2hhcGVkO1xufVxuXG5leHBvcnQgY29uc3QgdGVuc29yU2NhdHRlclVwZGF0ZUNvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBUZW5zb3JTY2F0dGVyVXBkYXRlLFxuICBiYWNrZW5kTmFtZTogJ3dlYmdwdScsXG4gIGtlcm5lbEZ1bmM6IHRlbnNvclNjYXR0ZXJVcGRhdGUgYXMgdW5rbm93biBhcyBLZXJuZWxGdW5jXG59O1xuIl19","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { getMainHeaderString as main } from './webgpu_program';\nimport { computeDispatch, flatDispatchLayout } from './webgpu_util';\n// Based on Algorithm 2 of Bitonic Top K, ref:\n// https://anilshanbhag.in/static/papers/gputopk_sigmod18.pdf\n// The original algorithm is based on computing the top K only, however\n// since for TFJS we require the indices of the top K values as well then the\n// algorithm found here is a bit modified. Rather than producing the values\n// at each step, the indices containing the top K are generated instead.\n// The output values are not generated to reduce the number of outputs in the\n// GPU, the values can easily be retrieved from the indices using a gather\n// op.\nexport class SwapProgram {\n    constructor(shape) {\n        this.variableNames = ['x', 'indices'];\n        this.workgroupSize = [256, 1, 1];\n        this.size = true;\n        this.outputShape = shape;\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize);\n        this.uniforms = `inputSize : i32, firstPass : i32, negativeInf : f32,\n        dir : i32, inc : i32,`;\n        this.shaderKey = 'swap';\n    }\n    getUserCode() {\n        const userCode = `\n        ${main('index')} {\n          if (index < uniforms.size) {\n            let outC = getCoordsFromIndex(index);\n            let batch = outC[0];\n            let elemIdx = outC[1];\n            // We compare elements pair-wise within a group of size 2 * inc.\n            // The comparing rule for each group alternates between ascending\n            // and descending. Within each group, we compare each pair at\n            // positions i and i+inc. To decide whether an element at position i\n            // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n            // inc, it is in the first half of the group, we denote it as x0,\n            // otherwise we denote it as x1.\n            // For example, as shown in the Bitonic top K paper referenced\n            // above, Figure5(a) shows that element[1] is in the second half of\n            // the group when group size is 2, but it is in the first half of\n            // the group when group size is 4.\n            let isFirstInPair = elemIdx % (2 * uniforms.inc) < uniforms.inc;\n            var i = 0;\n            if (isFirstInPair) {\n              i = elemIdx;\n            } else {\n              i = elemIdx - uniforms.inc;\n            }\n\n            var i0 = 0;\n            if (uniforms.firstPass == 1) {\n              i0 = i;\n            } else {\n              i0 = i32(getIndices(batch, i));\n            }\n\n            var i1 = 0;\n            if (uniforms.firstPass == 1) {\n              i1 = i + uniforms.inc;\n            } else {\n              i1 = i32(getIndices(batch, i + uniforms.inc));\n            }\n\n            var x0 = f32(0.0);\n            var x1 = f32(0.0);\n            if (i0 < uniforms.inputSize) {\n              x0 = getX(batch, i0);\n            } else {\n              x0 = uniforms.negativeInf;\n            }\n            if (i1 < uniforms.inputSize) {\n              x1 = getX(batch, i1);\n            } else {\n              x1 = uniforms.negativeInf;\n            }\n\n            let reverse = elemIdx % (2 * uniforms.dir) >= uniforms.dir;\n            let isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n            if (reverse == isGreater) {\n              // Elements in opposite order of direction\n              let iTemp = i0;\n              i0 = i1;\n              i1 = iTemp;\n            }\n            if (isFirstInPair) {\n              setOutputAtIndex(index, f32(i0));\n            } else {\n              setOutputAtIndex(index, f32(i1));\n            }\n          }\n        }\n      `;\n        return userCode;\n    }\n}\nexport class MergeProgram {\n    constructor(shape) {\n        this.variableNames = ['x', 'indices'];\n        this.workgroupSize = [256, 1, 1];\n        this.size = true;\n        this.outputShape = shape;\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize);\n        // |n| Size of the original input of TopK\n        // |firstPass| indicates if this is the first time swap is being used which\n        // means no indices input containing the top K is present yet.\n        // |k| Top k elements desired\n        this.uniforms = `inputSize : i32, firstPass : i32, k : i32,`;\n        this.shaderKey = 'merge';\n    }\n    getUserCode() {\n        const userCode = `\n        ${main('index')} {\n          if (index < uniforms.size) {\n            let outC = getCoordsFromIndex(index);\n            let batch = outC[0];\n            let elemIdx = outC[1];\n            // The output size is half of the previous size.\n            // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _\n            // (k=4), we only need to output the indices at positions |, the\n            // indices at positions _ can be thrown away, see Figure5(b) After\n            // Phase 2 (Merge phase) in the Bitonic Top K paper referenced\n            // above.\n            // For example, the paper shows we only need to output the orange\n            // bars. The output sequence should look like this | | | | | | | |.\n            // Because the sequence is halved, to map the output index back to\n            // the previous sequence to find the corresponding value, we need\n            // to double the index. When we double the index, we basically\n            // interpolate a position, so 2i looks like\n            // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k\n            // position of each 2k positions by - elemIdx % k. E.g. for output\n            // at index 4,5,6,7, we want to get the corresponding element at\n            // original index 8,9,10,11, for output at index 8,9,10,11,\n            // we want to get the corresponding element at original index\n            // 16,17,18,19, so on and so forth.\n\n            var i = 0;\n            if (elemIdx < uniforms.k) {\n              i = elemIdx;\n            } else {\n              i = elemIdx * 2 - elemIdx % uniforms.k;\n            }\n            var i0 = 0;\n            if (uniforms.firstPass == 1) {\n              i0 = i;\n            } else {\n              i0 = i32(getIndices(batch, i));\n            }\n            var i1 = 0;\n            if (uniforms.firstPass == 1) {\n              i1 = i + uniforms.k;\n            } else {\n              i1 = i32(getIndices(batch, i + uniforms.k));\n            }\n\n            let x0 = getX(batch, i0);\n            var x1 = f32(0.0);\n            if (i1 < uniforms.inputSize) {\n              x1 = getX(batch, i1);\n            } else {\n              x1 = x0;\n            }\n\n            if (x0 >= x1) {\n              setOutputAtIndex(index, f32(i0));\n            } else {\n              setOutputAtIndex(index, f32(i1));\n            }\n          }\n        }\n      `;\n        return userCode;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidG9wX2tfd2ViZ3B1LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMvdG9wX2tfd2ViZ3B1LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUVILE9BQU8sRUFBQyxtQkFBbUIsSUFBSSxJQUFJLEVBQWdCLE1BQU0sa0JBQWtCLENBQUM7QUFDNUUsT0FBTyxFQUFDLGVBQWUsRUFBRSxrQkFBa0IsRUFBQyxNQUFNLGVBQWUsQ0FBQztBQUVsRSw4Q0FBOEM7QUFDOUMsNkRBQTZEO0FBQzdELHVFQUF1RTtBQUN2RSw2RUFBNkU7QUFDN0UsMkVBQTJFO0FBQzNFLHdFQUF3RTtBQUN4RSw2RUFBNkU7QUFDN0UsMEVBQTBFO0FBQzFFLE1BQU07QUFFTixNQUFNLE9BQU8sV0FBVztJQVV0QixZQUFZLEtBQWU7UUFMM0Isa0JBQWEsR0FBRyxDQUFDLEdBQUcsRUFBRSxTQUFTLENBQUMsQ0FBQztRQUVqQyxrQkFBYSxHQUE2QixDQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDdEQsU0FBSSxHQUFHLElBQUksQ0FBQztRQUdWLElBQUksQ0FBQyxXQUFXLEdBQUcsS0FBSyxDQUFDO1FBQ3pCLElBQUksQ0FBQyxjQUFjLEdBQUcsa0JBQWtCLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQzNELElBQUksQ0FBQyxRQUFRLEdBQUcsZUFBZSxDQUMzQixJQUFJLENBQUMsY0FBYyxFQUFFLElBQUksQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBQy9ELElBQUksQ0FBQyxRQUFRLEdBQUc7OEJBQ1UsQ0FBQztRQUMzQixJQUFJLENBQUMsU0FBUyxHQUFHLE1BQU0sQ0FBQztJQUMxQixDQUFDO0lBRUQsV0FBVztRQUNULE1BQU0sUUFBUSxHQUFHO1VBQ1gsSUFBSSxDQUFDLE9BQU8sQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O09Ba0VoQixDQUFDO1FBQ0osT0FBTyxRQUFRLENBQUM7SUFDbEIsQ0FBQztDQUNGO0FBRUQsTUFBTSxPQUFPLFlBQVk7SUFVdkIsWUFBWSxLQUFlO1FBTDNCLGtCQUFhLEdBQUcsQ0FBQyxHQUFHLEVBQUUsU0FBUyxDQUFDLENBQUM7UUFFakMsa0JBQWEsR0FBNkIsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ3RELFNBQUksR0FBRyxJQUFJLENBQUM7UUFHVixJQUFJLENBQUMsV0FBVyxHQUFHLEtBQUssQ0FBQztRQUN6QixJQUFJLENBQUMsY0FBYyxHQUFHLGtCQUFrQixDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUMzRCxJQUFJLENBQUMsUUFBUSxHQUFHLGVBQWUsQ0FDM0IsSUFBSSxDQUFDLGNBQWMsRUFBRSxJQUFJLENBQUMsV0FBVyxFQUFFLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQztRQUMvRCx5Q0FBeUM7UUFDekMsMkVBQTJFO1FBQzNFLDhEQUE4RDtRQUM5RCw2QkFBNkI7UUFDN0IsSUFBSSxDQUFDLFFBQVEsR0FBRyw0Q0FBNEMsQ0FBQztRQUM3RCxJQUFJLENBQUMsU0FBUyxHQUFHLE9BQU8sQ0FBQztJQUMzQixDQUFDO0lBRUQsV0FBVztRQUNULE1BQU0sUUFBUSxHQUFHO1VBQ1gsSUFBSSxDQUFDLE9BQU8sQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztPQTBEaEIsQ0FBQztRQUNKLE9BQU8sUUFBUSxDQUFDO0lBQ2xCLENBQUM7Q0FDRiIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtnZXRNYWluSGVhZGVyU3RyaW5nIGFzIG1haW4sIFdlYkdQVVByb2dyYW19IGZyb20gJy4vd2ViZ3B1X3Byb2dyYW0nO1xuaW1wb3J0IHtjb21wdXRlRGlzcGF0Y2gsIGZsYXREaXNwYXRjaExheW91dH0gZnJvbSAnLi93ZWJncHVfdXRpbCc7XG5cbi8vIEJhc2VkIG9uIEFsZ29yaXRobSAyIG9mIEJpdG9uaWMgVG9wIEssIHJlZjpcbi8vIGh0dHBzOi8vYW5pbHNoYW5iaGFnLmluL3N0YXRpYy9wYXBlcnMvZ3B1dG9wa19zaWdtb2QxOC5wZGZcbi8vIFRoZSBvcmlnaW5hbCBhbGdvcml0aG0gaXMgYmFzZWQgb24gY29tcHV0aW5nIHRoZSB0b3AgSyBvbmx5LCBob3dldmVyXG4vLyBzaW5jZSBmb3IgVEZKUyB3ZSByZXF1aXJlIHRoZSBpbmRpY2VzIG9mIHRoZSB0b3AgSyB2YWx1ZXMgYXMgd2VsbCB0aGVuIHRoZVxuLy8gYWxnb3JpdGhtIGZvdW5kIGhlcmUgaXMgYSBiaXQgbW9kaWZpZWQuIFJhdGhlciB0aGFuIHByb2R1Y2luZyB0aGUgdmFsdWVzXG4vLyBhdCBlYWNoIHN0ZXAsIHRoZSBpbmRpY2VzIGNvbnRhaW5pbmcgdGhlIHRvcCBLIGFyZSBnZW5lcmF0ZWQgaW5zdGVhZC5cbi8vIFRoZSBvdXRwdXQgdmFsdWVzIGFyZSBub3QgZ2VuZXJhdGVkIHRvIHJlZHVjZSB0aGUgbnVtYmVyIG9mIG91dHB1dHMgaW4gdGhlXG4vLyBHUFUsIHRoZSB2YWx1ZXMgY2FuIGVhc2lseSBiZSByZXRyaWV2ZWQgZnJvbSB0aGUgaW5kaWNlcyB1c2luZyBhIGdhdGhlclxuLy8gb3AuXG5cbmV4cG9ydCBjbGFzcyBTd2FwUHJvZ3JhbSBpbXBsZW1lbnRzIFdlYkdQVVByb2dyYW0ge1xuICBvdXRwdXRTaGFwZTogbnVtYmVyW107XG4gIHNoYWRlcktleTogc3RyaW5nO1xuICBkaXNwYXRjaExheW91dDoge3g6IG51bWJlcltdfTtcbiAgZGlzcGF0Y2g6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXTtcbiAgdmFyaWFibGVOYW1lcyA9IFsneCcsICdpbmRpY2VzJ107XG4gIHVuaWZvcm1zOiBzdHJpbmc7XG4gIHdvcmtncm91cFNpemU6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXSA9IFsyNTYsIDEsIDFdO1xuICBzaXplID0gdHJ1ZTtcblxuICBjb25zdHJ1Y3RvcihzaGFwZTogbnVtYmVyW10pIHtcbiAgICB0aGlzLm91dHB1dFNoYXBlID0gc2hhcGU7XG4gICAgdGhpcy5kaXNwYXRjaExheW91dCA9IGZsYXREaXNwYXRjaExheW91dCh0aGlzLm91dHB1dFNoYXBlKTtcbiAgICB0aGlzLmRpc3BhdGNoID0gY29tcHV0ZURpc3BhdGNoKFxuICAgICAgICB0aGlzLmRpc3BhdGNoTGF5b3V0LCB0aGlzLm91dHB1dFNoYXBlLCB0aGlzLndvcmtncm91cFNpemUpO1xuICAgIHRoaXMudW5pZm9ybXMgPSBgaW5wdXRTaXplIDogaTMyLCBmaXJzdFBhc3MgOiBpMzIsIG5lZ2F0aXZlSW5mIDogZjMyLFxuICAgICAgICBkaXIgOiBpMzIsIGluYyA6IGkzMixgO1xuICAgIHRoaXMuc2hhZGVyS2V5ID0gJ3N3YXAnO1xuICB9XG5cbiAgZ2V0VXNlckNvZGUoKTogc3RyaW5nIHtcbiAgICBjb25zdCB1c2VyQ29kZSA9IGBcbiAgICAgICAgJHttYWluKCdpbmRleCcpfSB7XG4gICAgICAgICAgaWYgKGluZGV4IDwgdW5pZm9ybXMuc2l6ZSkge1xuICAgICAgICAgICAgbGV0IG91dEMgPSBnZXRDb29yZHNGcm9tSW5kZXgoaW5kZXgpO1xuICAgICAgICAgICAgbGV0IGJhdGNoID0gb3V0Q1swXTtcbiAgICAgICAgICAgIGxldCBlbGVtSWR4ID0gb3V0Q1sxXTtcbiAgICAgICAgICAgIC8vIFdlIGNvbXBhcmUgZWxlbWVudHMgcGFpci13aXNlIHdpdGhpbiBhIGdyb3VwIG9mIHNpemUgMiAqIGluYy5cbiAgICAgICAgICAgIC8vIFRoZSBjb21wYXJpbmcgcnVsZSBmb3IgZWFjaCBncm91cCBhbHRlcm5hdGVzIGJldHdlZW4gYXNjZW5kaW5nXG4gICAgICAgICAgICAvLyBhbmQgZGVzY2VuZGluZy4gV2l0aGluIGVhY2ggZ3JvdXAsIHdlIGNvbXBhcmUgZWFjaCBwYWlyIGF0XG4gICAgICAgICAgICAvLyBwb3NpdGlvbnMgaSBhbmQgaStpbmMuIFRvIGRlY2lkZSB3aGV0aGVyIGFuIGVsZW1lbnQgYXQgcG9zaXRpb24gaVxuICAgICAgICAgICAgLy8gaXMgeDAgb3IgeDEsIHdlIG1vZCBpdCBieSAyICogaW5jLCBpZiB0aGUgcmVzdWx0IGlzIHNtYWxsZXIgdGhhblxuICAgICAgICAgICAgLy8gaW5jLCBpdCBpcyBpbiB0aGUgZmlyc3QgaGFsZiBvZiB0aGUgZ3JvdXAsIHdlIGRlbm90ZSBpdCBhcyB4MCxcbiAgICAgICAgICAgIC8vIG90aGVyd2lzZSB3ZSBkZW5vdGUgaXQgYXMgeDEuXG4gICAgICAgICAgICAvLyBGb3IgZXhhbXBsZSwgYXMgc2hvd24gaW4gdGhlIEJpdG9uaWMgdG9wIEsgcGFwZXIgcmVmZXJlbmNlZFxuICAgICAgICAgICAgLy8gYWJvdmUsIEZpZ3VyZTUoYSkgc2hvd3MgdGhhdCBlbGVtZW50WzFdIGlzIGluIHRoZSBzZWNvbmQgaGFsZiBvZlxuICAgICAgICAgICAgLy8gdGhlIGdyb3VwIHdoZW4gZ3JvdXAgc2l6ZSBpcyAyLCBidXQgaXQgaXMgaW4gdGhlIGZpcnN0IGhhbGYgb2ZcbiAgICAgICAgICAgIC8vIHRoZSBncm91cCB3aGVuIGdyb3VwIHNpemUgaXMgNC5cbiAgICAgICAgICAgIGxldCBpc0ZpcnN0SW5QYWlyID0gZWxlbUlkeCAlICgyICogdW5pZm9ybXMuaW5jKSA8IHVuaWZvcm1zLmluYztcbiAgICAgICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgICAgIGlmIChpc0ZpcnN0SW5QYWlyKSB7XG4gICAgICAgICAgICAgIGkgPSBlbGVtSWR4O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgaSA9IGVsZW1JZHggLSB1bmlmb3Jtcy5pbmM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBpMCA9IDA7XG4gICAgICAgICAgICBpZiAodW5pZm9ybXMuZmlyc3RQYXNzID09IDEpIHtcbiAgICAgICAgICAgICAgaTAgPSBpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgaTAgPSBpMzIoZ2V0SW5kaWNlcyhiYXRjaCwgaSkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgaTEgPSAwO1xuICAgICAgICAgICAgaWYgKHVuaWZvcm1zLmZpcnN0UGFzcyA9PSAxKSB7XG4gICAgICAgICAgICAgIGkxID0gaSArIHVuaWZvcm1zLmluYztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGkxID0gaTMyKGdldEluZGljZXMoYmF0Y2gsIGkgKyB1bmlmb3Jtcy5pbmMpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHgwID0gZjMyKDAuMCk7XG4gICAgICAgICAgICB2YXIgeDEgPSBmMzIoMC4wKTtcbiAgICAgICAgICAgIGlmIChpMCA8IHVuaWZvcm1zLmlucHV0U2l6ZSkge1xuICAgICAgICAgICAgICB4MCA9IGdldFgoYmF0Y2gsIGkwKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHgwID0gdW5pZm9ybXMubmVnYXRpdmVJbmY7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaTEgPCB1bmlmb3Jtcy5pbnB1dFNpemUpIHtcbiAgICAgICAgICAgICAgeDEgPSBnZXRYKGJhdGNoLCBpMSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB4MSA9IHVuaWZvcm1zLm5lZ2F0aXZlSW5mO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgcmV2ZXJzZSA9IGVsZW1JZHggJSAoMiAqIHVuaWZvcm1zLmRpcikgPj0gdW5pZm9ybXMuZGlyO1xuICAgICAgICAgICAgbGV0IGlzR3JlYXRlciA9IHgwID4geDEgfHwgKHgwID09IHgxICYmIGkxID4gaTApO1xuICAgICAgICAgICAgaWYgKHJldmVyc2UgPT0gaXNHcmVhdGVyKSB7XG4gICAgICAgICAgICAgIC8vIEVsZW1lbnRzIGluIG9wcG9zaXRlIG9yZGVyIG9mIGRpcmVjdGlvblxuICAgICAgICAgICAgICBsZXQgaVRlbXAgPSBpMDtcbiAgICAgICAgICAgICAgaTAgPSBpMTtcbiAgICAgICAgICAgICAgaTEgPSBpVGVtcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpc0ZpcnN0SW5QYWlyKSB7XG4gICAgICAgICAgICAgIHNldE91dHB1dEF0SW5kZXgoaW5kZXgsIGYzMihpMCkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgc2V0T3V0cHV0QXRJbmRleChpbmRleCwgZjMyKGkxKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICBgO1xuICAgIHJldHVybiB1c2VyQ29kZTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgTWVyZ2VQcm9ncmFtIGltcGxlbWVudHMgV2ViR1BVUHJvZ3JhbSB7XG4gIG91dHB1dFNoYXBlOiBudW1iZXJbXTtcbiAgc2hhZGVyS2V5OiBzdHJpbmc7XG4gIGRpc3BhdGNoTGF5b3V0OiB7eDogbnVtYmVyW119O1xuICBkaXNwYXRjaDogW251bWJlciwgbnVtYmVyLCBudW1iZXJdO1xuICB2YXJpYWJsZU5hbWVzID0gWyd4JywgJ2luZGljZXMnXTtcbiAgdW5pZm9ybXM6IHN0cmluZztcbiAgd29ya2dyb3VwU2l6ZTogW251bWJlciwgbnVtYmVyLCBudW1iZXJdID0gWzI1NiwgMSwgMV07XG4gIHNpemUgPSB0cnVlO1xuXG4gIGNvbnN0cnVjdG9yKHNoYXBlOiBudW1iZXJbXSkge1xuICAgIHRoaXMub3V0cHV0U2hhcGUgPSBzaGFwZTtcbiAgICB0aGlzLmRpc3BhdGNoTGF5b3V0ID0gZmxhdERpc3BhdGNoTGF5b3V0KHRoaXMub3V0cHV0U2hhcGUpO1xuICAgIHRoaXMuZGlzcGF0Y2ggPSBjb21wdXRlRGlzcGF0Y2goXG4gICAgICAgIHRoaXMuZGlzcGF0Y2hMYXlvdXQsIHRoaXMub3V0cHV0U2hhcGUsIHRoaXMud29ya2dyb3VwU2l6ZSk7XG4gICAgLy8gfG58IFNpemUgb2YgdGhlIG9yaWdpbmFsIGlucHV0IG9mIFRvcEtcbiAgICAvLyB8Zmlyc3RQYXNzfCBpbmRpY2F0ZXMgaWYgdGhpcyBpcyB0aGUgZmlyc3QgdGltZSBzd2FwIGlzIGJlaW5nIHVzZWQgd2hpY2hcbiAgICAvLyBtZWFucyBubyBpbmRpY2VzIGlucHV0IGNvbnRhaW5pbmcgdGhlIHRvcCBLIGlzIHByZXNlbnQgeWV0LlxuICAgIC8vIHxrfCBUb3AgayBlbGVtZW50cyBkZXNpcmVkXG4gICAgdGhpcy51bmlmb3JtcyA9IGBpbnB1dFNpemUgOiBpMzIsIGZpcnN0UGFzcyA6IGkzMiwgayA6IGkzMixgO1xuICAgIHRoaXMuc2hhZGVyS2V5ID0gJ21lcmdlJztcbiAgfVxuXG4gIGdldFVzZXJDb2RlKCk6IHN0cmluZyB7XG4gICAgY29uc3QgdXNlckNvZGUgPSBgXG4gICAgICAgICR7bWFpbignaW5kZXgnKX0ge1xuICAgICAgICAgIGlmIChpbmRleCA8IHVuaWZvcm1zLnNpemUpIHtcbiAgICAgICAgICAgIGxldCBvdXRDID0gZ2V0Q29vcmRzRnJvbUluZGV4KGluZGV4KTtcbiAgICAgICAgICAgIGxldCBiYXRjaCA9IG91dENbMF07XG4gICAgICAgICAgICBsZXQgZWxlbUlkeCA9IG91dENbMV07XG4gICAgICAgICAgICAvLyBUaGUgb3V0cHV0IHNpemUgaXMgaGFsZiBvZiB0aGUgcHJldmlvdXMgc2l6ZS5cbiAgICAgICAgICAgIC8vIElmIHRoZSBwcmV2aW91cyBzZXF1ZW5jZSBpcyB8IHwgfCB8IF8gXyBfIF8gIHwgfCB8IHwgIF8gXyBfIF9cbiAgICAgICAgICAgIC8vIChrPTQpLCB3ZSBvbmx5IG5lZWQgdG8gb3V0cHV0IHRoZSBpbmRpY2VzIGF0IHBvc2l0aW9ucyB8LCB0aGVcbiAgICAgICAgICAgIC8vIGluZGljZXMgYXQgcG9zaXRpb25zIF8gY2FuIGJlIHRocm93biBhd2F5LCBzZWUgRmlndXJlNShiKSBBZnRlclxuICAgICAgICAgICAgLy8gUGhhc2UgMiAoTWVyZ2UgcGhhc2UpIGluIHRoZSBCaXRvbmljIFRvcCBLIHBhcGVyIHJlZmVyZW5jZWRcbiAgICAgICAgICAgIC8vIGFib3ZlLlxuICAgICAgICAgICAgLy8gRm9yIGV4YW1wbGUsIHRoZSBwYXBlciBzaG93cyB3ZSBvbmx5IG5lZWQgdG8gb3V0cHV0IHRoZSBvcmFuZ2VcbiAgICAgICAgICAgIC8vIGJhcnMuIFRoZSBvdXRwdXQgc2VxdWVuY2Ugc2hvdWxkIGxvb2sgbGlrZSB0aGlzIHwgfCB8IHwgfCB8IHwgfC5cbiAgICAgICAgICAgIC8vIEJlY2F1c2UgdGhlIHNlcXVlbmNlIGlzIGhhbHZlZCwgdG8gbWFwIHRoZSBvdXRwdXQgaW5kZXggYmFjayB0b1xuICAgICAgICAgICAgLy8gdGhlIHByZXZpb3VzIHNlcXVlbmNlIHRvIGZpbmQgdGhlIGNvcnJlc3BvbmRpbmcgdmFsdWUsIHdlIG5lZWRcbiAgICAgICAgICAgIC8vIHRvIGRvdWJsZSB0aGUgaW5kZXguIFdoZW4gd2UgZG91YmxlIHRoZSBpbmRleCwgd2UgYmFzaWNhbGx5XG4gICAgICAgICAgICAvLyBpbnRlcnBvbGF0ZSBhIHBvc2l0aW9uLCBzbyAyaSBsb29rcyBsaWtlXG4gICAgICAgICAgICAvLyB8IF8gfCBfIHwgXyB8IF8gfCBfIHwgXyB8IF8uIFdlIG1vdmUgdGhlIHwgdG8gdGhlIGZpcnN0IGtcbiAgICAgICAgICAgIC8vIHBvc2l0aW9uIG9mIGVhY2ggMmsgcG9zaXRpb25zIGJ5IC0gZWxlbUlkeCAlIGsuIEUuZy4gZm9yIG91dHB1dFxuICAgICAgICAgICAgLy8gYXQgaW5kZXggNCw1LDYsNywgd2Ugd2FudCB0byBnZXQgdGhlIGNvcnJlc3BvbmRpbmcgZWxlbWVudCBhdFxuICAgICAgICAgICAgLy8gb3JpZ2luYWwgaW5kZXggOCw5LDEwLDExLCBmb3Igb3V0cHV0IGF0IGluZGV4IDgsOSwxMCwxMSxcbiAgICAgICAgICAgIC8vIHdlIHdhbnQgdG8gZ2V0IHRoZSBjb3JyZXNwb25kaW5nIGVsZW1lbnQgYXQgb3JpZ2luYWwgaW5kZXhcbiAgICAgICAgICAgIC8vIDE2LDE3LDE4LDE5LCBzbyBvbiBhbmQgc28gZm9ydGguXG5cbiAgICAgICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgICAgIGlmIChlbGVtSWR4IDwgdW5pZm9ybXMuaykge1xuICAgICAgICAgICAgICBpID0gZWxlbUlkeDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGkgPSBlbGVtSWR4ICogMiAtIGVsZW1JZHggJSB1bmlmb3Jtcy5rO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGkwID0gMDtcbiAgICAgICAgICAgIGlmICh1bmlmb3Jtcy5maXJzdFBhc3MgPT0gMSkge1xuICAgICAgICAgICAgICBpMCA9IGk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBpMCA9IGkzMihnZXRJbmRpY2VzKGJhdGNoLCBpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgaTEgPSAwO1xuICAgICAgICAgICAgaWYgKHVuaWZvcm1zLmZpcnN0UGFzcyA9PSAxKSB7XG4gICAgICAgICAgICAgIGkxID0gaSArIHVuaWZvcm1zLms7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBpMSA9IGkzMihnZXRJbmRpY2VzKGJhdGNoLCBpICsgdW5pZm9ybXMuaykpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgeDAgPSBnZXRYKGJhdGNoLCBpMCk7XG4gICAgICAgICAgICB2YXIgeDEgPSBmMzIoMC4wKTtcbiAgICAgICAgICAgIGlmIChpMSA8IHVuaWZvcm1zLmlucHV0U2l6ZSkge1xuICAgICAgICAgICAgICB4MSA9IGdldFgoYmF0Y2gsIGkxKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHgxID0geDA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh4MCA+PSB4MSkge1xuICAgICAgICAgICAgICBzZXRPdXRwdXRBdEluZGV4KGluZGV4LCBmMzIoaTApKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHNldE91dHB1dEF0SW5kZXgoaW5kZXgsIGYzMihpMSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgYDtcbiAgICByZXR1cm4gdXNlckNvZGU7XG4gIH1cbn1cbiJdfQ==","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { TopK, util } from '@tensorflow/tfjs-core';\nimport { topKImplCPU } from '../kernel_utils/shared';\nimport { MergeProgram, SwapProgram } from '../top_k_webgpu';\nimport { fill } from './Fill';\nimport { gatherV2 } from './GatherV2';\nimport { reshape } from './Reshape';\nimport { slice } from './Slice';\nfunction disposeIntermediateTensorInfoOrNull(backend, tensorInfo) {\n    if (tensorInfo !== null) {\n        backend.disposeData(tensorInfo.dataId);\n    }\n}\nfunction roundUpToPow2(num) {\n    let pow2 = 1;\n    while (pow2 < num) {\n        pow2 *= 2;\n    }\n    return pow2;\n}\n// Based on Algorithm 2 of Bitonic Top K, ref:\n// https://anilshanbhag.in/static/papers/gputopk_sigmod18.pdf\nexport function topK(args) {\n    const { inputs, backend, attrs } = args;\n    const { x } = inputs;\n    const { k, sorted } = attrs;\n    const xShape = x.shape;\n    const lastDim = xShape[xShape.length - 1];\n    if (backend.shouldExecuteOnCPU([x])) {\n        const xVals = backend.readSync(x.dataId);\n        const [allTopKVals, allTopKIndices] = topKImplCPU(xVals, xShape, x.dtype, k, sorted);\n        return [\n            backend.makeTensorInfo(allTopKVals.shape, allTopKVals.dtype, allTopKVals.values),\n            backend.makeTensorInfo(allTopKIndices.shape, allTopKIndices.dtype, allTopKIndices.values)\n        ];\n    }\n    if (k === 0) {\n        xShape[xShape.length - 1] = 0;\n        return [\n            backend.makeTensorInfo(xShape, x.dtype, []),\n            backend.makeTensorInfo(xShape, 'int32', [])\n        ];\n    }\n    if (lastDim === 1 /* firstPass */) {\n        return [\n            x, fill({ attrs: { shape: xShape, dtype: 'int32', value: 0 }, backend })\n        ];\n    }\n    // Reshape into a 2d tensor [batch, lastDim] and compute topk along lastDim.\n    const xSize = util.sizeFromShape(xShape);\n    const batch = xSize / lastDim;\n    const x2D = reshape({ inputs: { x }, attrs: { shape: [batch, lastDim] }, backend });\n    const kPow2 = roundUpToPow2(k);\n    const lastDimPow2 = roundUpToPow2(lastDim);\n    // Only the indices containing the top K are kept at every step to reduce\n    // number of outputs in the GPU algorithms, so once the final set of indices\n    // is computed then gather is used to grab the corresponding values\n    // from the original input.\n    let indices = null;\n    // GPU algorithm always takes in an indices input but this input is not used\n    // on the first run of a GPU algorithm, therefore if indices is null we simply\n    // pass in x2D instead of it but the value will not actually be used\n    const getInputs = () => indices === null ? [x2D, x2D] : [x2D, indices];\n    const runSwap = (dir, inc, shape) => {\n        const inputs = getInputs();\n        const program = new SwapProgram(shape);\n        const firstPass = indices === null ? 1 : 0;\n        const uniformDataSwap = [\n            { type: 'int32', data: [lastDim] },\n            { type: 'int32', data: [firstPass] },\n            { type: 'float32', data: [Number.NEGATIVE_INFINITY] },\n            { type: 'int32', data: [dir] },\n            { type: 'int32', data: [inc] }\n        ];\n        const prevIndices = indices;\n        indices = backend.runWebGPUProgram(program, inputs, 'int32', uniformDataSwap);\n        disposeIntermediateTensorInfoOrNull(backend, prevIndices);\n    };\n    // Step 1: local sort\n    for (let len = 1; len < kPow2; len *= 2) {\n        const dir = len * 2;\n        for (let inc = len; inc >= 1; inc /= 2) {\n            runSwap(dir, inc, [batch, lastDimPow2]);\n        }\n    }\n    // Step 2: merge\n    for (let indicesSize = lastDimPow2; indicesSize > kPow2; indicesSize /= 2) {\n        const inputs = getInputs();\n        const mergeProgram = new MergeProgram([batch, indicesSize / 2]);\n        const firstPass = indices === null ? 1 : 0;\n        const uniformDataMerge = [\n            { type: 'int32', data: [lastDim] },\n            { type: 'int32', data: [firstPass] },\n            { type: 'int32', data: [kPow2] }\n        ];\n        const prevIndices = indices;\n        indices = backend.runWebGPUProgram(mergeProgram, inputs, 'int32', uniformDataMerge);\n        disposeIntermediateTensorInfoOrNull(backend, prevIndices);\n        // Step 3: rebuild\n        const len = kPow2 / 2;\n        const dir = len * 2;\n        for (let inc = len; inc >= 1; inc /= 2) {\n            runSwap(dir, inc, indices.shape);\n        }\n    }\n    // Keep only the requested top K results instead of kPow2\n    let prevIndices = indices;\n    indices = slice({ inputs: { x: indices }, backend, attrs: { begin: 0, size: [batch, k] } });\n    disposeIntermediateTensorInfoOrNull(backend, prevIndices);\n    // Gather values on last dimension\n    let values = gatherV2({ inputs: { x: x2D, indices }, backend, attrs: { axis: 1, batchDims: 1 } });\n    disposeIntermediateTensorInfoOrNull(backend, x2D);\n    // Reshape back to the original input shape, except that the last\n    // dimension is k.\n    const newShape = xShape.slice(0, -1);\n    newShape.push(k);\n    prevIndices = indices;\n    indices = reshape({ inputs: { x: indices }, attrs: { shape: newShape }, backend });\n    disposeIntermediateTensorInfoOrNull(backend, prevIndices);\n    const prevValues = values;\n    values = reshape({ inputs: { x: values }, attrs: { shape: newShape }, backend });\n    disposeIntermediateTensorInfoOrNull(backend, prevValues);\n    return [values, indices];\n}\nexport const topKConfig = {\n    kernelName: TopK,\n    backendName: 'webgpu',\n    kernelFunc: topK\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVG9wSy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL2tlcm5lbHMvVG9wSy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxPQUFPLEVBQXdELElBQUksRUFBcUMsSUFBSSxFQUFDLE1BQU0sdUJBQXVCLENBQUM7QUFHM0ksT0FBTyxFQUFDLFdBQVcsRUFBQyxNQUFNLHdCQUF3QixDQUFDO0FBQ25ELE9BQU8sRUFBQyxZQUFZLEVBQUUsV0FBVyxFQUFDLE1BQU0saUJBQWlCLENBQUM7QUFDMUQsT0FBTyxFQUFDLElBQUksRUFBQyxNQUFNLFFBQVEsQ0FBQztBQUM1QixPQUFPLEVBQUMsUUFBUSxFQUFDLE1BQU0sWUFBWSxDQUFDO0FBQ3BDLE9BQU8sRUFBQyxPQUFPLEVBQUMsTUFBTSxXQUFXLENBQUM7QUFDbEMsT0FBTyxFQUFDLEtBQUssRUFBQyxNQUFNLFNBQVMsQ0FBQztBQUU5QixTQUFTLG1DQUFtQyxDQUN4QyxPQUFzQixFQUFFLFVBQXNCO0lBQ2hELElBQUksVUFBVSxLQUFLLElBQUksRUFBRTtRQUN2QixPQUFPLENBQUMsV0FBVyxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQztLQUN4QztBQUNILENBQUM7QUFFRCxTQUFTLGFBQWEsQ0FBQyxHQUFXO0lBQ2hDLElBQUksSUFBSSxHQUFHLENBQUMsQ0FBQztJQUNiLE9BQU8sSUFBSSxHQUFHLEdBQUcsRUFBRTtRQUNqQixJQUFJLElBQUksQ0FBQyxDQUFDO0tBQ1g7SUFDRCxPQUFPLElBQUksQ0FBQztBQUNkLENBQUM7QUFFRCw4Q0FBOEM7QUFDOUMsNkRBQTZEO0FBQzdELE1BQU0sVUFBVSxJQUFJLENBQ2hCLElBQW9FO0lBRXRFLE1BQU0sRUFBQyxNQUFNLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBQyxHQUFHLElBQUksQ0FBQztJQUN0QyxNQUFNLEVBQUMs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QUMsRUFBRSxNQUFNLEVBQUMsRUFBRSxLQUFLLEVBQUUsRUFBQyxLQUFLLEVBQUUsUUFBUSxFQUFDLEVBQUUsT0FBTyxFQUFDLENBQUMsQ0FBQztJQUMzRSxtQ0FBbUMsQ0FBQyxPQUFPLEVBQUUsVUFBVSxDQUFDLENBQUM7SUFFekQsT0FBTyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztBQUMzQixDQUFDO0FBRUQsTUFBTSxDQUFDLE1BQU0sVUFBVSxHQUFpQjtJQUN0QyxVQUFVLEVBQUUsSUFBSTtJQUNoQixXQUFXLEVBQUUsUUFBUTtJQUNyQixVQUFVLEVBQUUsSUFBNkI7Q0FDMUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtLZXJuZWxDb25maWcsIEtlcm5lbEZ1bmMsIE51bWVyaWNEYXRhVHlwZSwgVGVuc29ySW5mbywgVG9wSywgVG9wS0F0dHJzLCBUb3BLSW5wdXRzLCBUeXBlZEFycmF5LCB1dGlsfSBmcm9tICdAdGVuc29yZmxvdy90ZmpzLWNvcmUnO1xuXG5pbXBvcnQge1dlYkdQVUJhY2tlbmR9IGZyb20gJy4uL2JhY2tlbmRfd2ViZ3B1JztcbmltcG9ydCB7dG9wS0ltcGxDUFV9IGZyb20gJy4uL2tlcm5lbF91dGlscy9zaGFyZWQnO1xuaW1wb3J0IHtNZXJnZVByb2dyYW0sIFN3YXBQcm9ncmFtfSBmcm9tICcuLi90b3Bfa193ZWJncHUnO1xuaW1wb3J0IHtmaWxsfSBmcm9tICcuL0ZpbGwnO1xuaW1wb3J0IHtnYXRoZXJWMn0gZnJvbSAnLi9HYXRoZXJWMic7XG5pbXBvcnQge3Jlc2hhcGV9IGZyb20gJy4vUmVzaGFwZSc7XG5pbXBvcnQge3NsaWNlfSBmcm9tICcuL1NsaWNlJztcblxuZnVuY3Rpb24gZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm9Pck51bGwoXG4gICAgYmFja2VuZDogV2ViR1BVQmFja2VuZCwgdGVuc29ySW5mbzogVGVuc29ySW5mbykge1xuICBpZiAodGVuc29ySW5mbyAhPT0gbnVsbCkge1xuICAgIGJhY2tlbmQuZGlzcG9zZURhdGEodGVuc29ySW5mby5kYXRhSWQpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHJvdW5kVXBUb1BvdzIobnVtOiBudW1iZXIpIHtcbiAgbGV0IHBvdzIgPSAxO1xuICB3aGlsZSAocG93MiA8IG51bSkge1xuICAgIHBvdzIgKj0gMjtcbiAgfVxuICByZXR1cm4gcG93Mjtcbn1cblxuLy8gQmFzZWQgb24gQWxnb3JpdGhtIDIgb2YgQml0b25pYyBUb3AgSywgcmVmOlxuLy8gaHR0cHM6Ly9hbmlsc2hhbmJoYWcuaW4vc3RhdGljL3BhcGVycy9ncHV0b3BrX3NpZ21vZDE4LnBkZlxuZXhwb3J0IGZ1bmN0aW9uIHRvcEsoXG4gICAgYXJnczoge2lucHV0czogVG9wS0lucHV0cywgYmFja2VuZDogV2ViR1BVQmFja2VuZCwgYXR0cnM6IFRvcEtBdHRyc30pOlxuICAgIFRlbnNvckluZm9bXSB7XG4gIGNvbnN0IHtpbnB1dHMsIGJhY2tlbmQsIGF0dHJzfSA9IGFyZ3M7XG4gIGNvbnN0IHt4fSA9IGlucHV0cztcbiAgY29uc3Qge2ssIHNvcnRlZH09IGF0dHJzO1xuXG4gIGNvbnN0IHhTaGFwZSA9IHguc2hhcGU7XG4gIGNvbnN0IGxhc3REaW0gPSB4U2hhcGVbeFNoYXBlLmxlbmd0aCAtIDFdO1xuXG4gIGlmIChiYWNrZW5kLnNob3VsZEV4ZWN1dGVPbkNQVShbeF0pKSB7XG4gICAgY29uc3QgeFZhbHMgPSBiYWNrZW5kLnJlYWRTeW5jKHguZGF0YUlkKSBhcyBUeXBlZEFycmF5O1xuICAgIGNvbnN0IFthbGxUb3BLVmFscywgYWxsVG9wS0luZGljZXNdID1cbiAgICAgICAgdG9wS0ltcGxDUFUoeFZhbHMsIHhTaGFwZSwgeC5kdHlwZSBhcyBOdW1lcmljRGF0YVR5cGUsIGssIHNvcnRlZCk7XG5cbiAgICByZXR1cm4gW1xuICAgICAgYmFja2VuZC5tYWtlVGVuc29ySW5mbyhcbiAgICAgICAgICBhbGxUb3BLVmFscy5zaGFwZSwgYWxsVG9wS1ZhbHMuZHR5cGUsIGFsbFRvcEtWYWxzLnZhbHVlcyksXG4gICAgICBiYWNrZW5kLm1ha2VUZW5zb3JJbmZvKFxuICAgICAgICAgIGFsbFRvcEtJbmRpY2VzLnNoYXBlLCBhbGxUb3BLSW5kaWNlcy5kdHlwZSwgYWxsVG9wS0luZGljZXMudmFsdWVzKVxuICAgIF07XG4gIH1cblxuICBpZiAoayA9PT0gMCkge1xuICAgIHhTaGFwZVt4U2hhcGUubGVuZ3RoIC0gMV0gPSAwO1xuICAgIHJldHVybiBbXG4gICAgICBiYWNrZW5kLm1ha2VUZW5zb3JJbmZvKHhTaGFwZSwgeC5kdHlwZSwgW10pLFxuICAgICAgYmFja2VuZC5tYWtlVGVuc29ySW5mbyh4U2hhcGUsICdpbnQzMicsIFtdKVxuICAgIF07XG4gIH1cblxuICBpZiAobGFzdERpbSA9PT0gMSAvKiBmaXJzdFBhc3MgKi8pIHtcbiAgICByZXR1cm4gW1xuICAgICAgeCwgZmlsbCh7YXR0cnM6IHtzaGFwZTogeFNoYXBlLCBkdHlwZTogJ2ludDMyJywgdmFsdWU6IDB9LCBiYWNrZW5kfSlcbiAgICBdO1xuICB9XG5cbiAgLy8gUmVzaGFwZSBpbnRvIGEgMmQgdGVuc29yIFtiYXRjaCwgbGFzdERpbV0gYW5kIGNvbXB1dGUgdG9wayBhbG9uZyBsYXN0RGltLlxuICBjb25zdCB4U2l6ZSA9IHV0aWwuc2l6ZUZyb21TaGFwZSh4U2hhcGUpO1xuICBjb25zdCBiYXRjaCA9IHhTaXplIC8gbGFzdERpbTtcbiAgY29uc3QgeDJEID0gcmVzaGFwZSh7aW5wdXRzOiB7eH0sIGF0dHJzOiB7c2hhcGU6IFtiYXRjaCwgbGFzdERpbV19LCBiYWNrZW5kfSk7XG5cbiAgY29uc3Qga1BvdzIgPSByb3VuZFVwVG9Qb3cyKGspO1xuICBjb25zdCBsYXN0RGltUG93MiA9IHJvdW5kVXBUb1BvdzIobGFzdERpbSk7XG5cbiAgLy8gT25seSB0aGUgaW5kaWNlcyBjb250YWluaW5nIHRoZSB0b3AgSyBhcmUga2VwdCBhdCBldmVyeSBzdGVwIHRvIHJlZHVjZVxuICAvLyBudW1iZXIgb2Ygb3V0cHV0cyBpbiB0aGUgR1BVIGFsZ29yaXRobXMsIHNvIG9uY2UgdGhlIGZpbmFsIHNldCBvZiBpbmRpY2VzXG4gIC8vIGlzIGNvbXB1dGVkIHRoZW4gZ2F0aGVyIGlzIHVzZWQgdG8gZ3JhYiB0aGUgY29ycmVzcG9uZGluZyB2YWx1ZXNcbiAgLy8gZnJvbSB0aGUgb3JpZ2luYWwgaW5wdXQuXG4gIGxldCBpbmRpY2VzOiBUZW5zb3JJbmZvID0gbnVsbDtcblxuICAvLyBHUFUgYWxnb3JpdGhtIGFsd2F5cyB0YWtlcyBpbiBhbiBpbmRpY2VzIGlucHV0IGJ1dCB0aGlzIGlucHV0IGlzIG5vdCB1c2VkXG4gIC8vIG9uIHRoZSBmaXJzdCBydW4gb2YgYSBHUFUgYWxnb3JpdGhtLCB0aGVyZWZvcmUgaWYgaW5kaWNlcyBpcyBudWxsIHdlIHNpbXBseVxuICAvLyBwYXNzIGluIHgyRCBpbnN0ZWFkIG9mIGl0IGJ1dCB0aGUgdmFsdWUgd2lsbCBub3QgYWN0dWFsbHkgYmUgdXNlZFxuICBjb25zdCBnZXRJbnB1dHMgPSAoKSA9PiBpbmRpY2VzID09PSBudWxsID8gW3gyRCwgeDJEXSA6IFt4MkQsIGluZGljZXNdO1xuXG4gIGNvbnN0IHJ1blN3YXAgPSAoZGlyOiBudW1iZXIsIGluYzogbnVtYmVyLCBzaGFwZTogbnVtYmVyW10pID0+IHtcbiAgICBjb25zdCBpbnB1dHMgPSBnZXRJbnB1dHMoKTtcbiAgICBjb25zdCBwcm9ncmFtID0gbmV3IFN3YXBQcm9ncmFtKHNoYXBlKTtcbiAgICBjb25zdCBmaXJzdFBhc3MgPSBpbmRpY2VzID09PSBudWxsID8gMSA6IDA7XG4gICAgY29uc3QgdW5pZm9ybURhdGFTd2FwID0gW1xuICAgICAgICB7dHlwZTogJ2ludDMyJywgZGF0YTogW2xhc3REaW1dfSxcbiAgICAgICAge3R5cGU6ICdpbnQzMicsIGRhdGE6IFtmaXJzdFBhc3NdfSxcbiAgICAgICAge3R5cGU6ICdmbG9hdDMyJywgZGF0YTogW051bWJlci5ORUdBVElWRV9JTkZJTklUWV19LFxuICAgICAgICB7dHlwZTogJ2ludDMyJywgZGF0YTogW2Rpcl19LFxuICAgICAgICB7dHlwZTogJ2ludDMyJywgZGF0YTogW2luY119XG4gICAgXTtcbiAgICBjb25zdCBwcmV2SW5kaWNlcyA9IGluZGljZXM7XG4gICAgaW5kaWNlcyA9IGJhY2tlbmQucnVuV2ViR1BVUHJvZ3JhbShcbiAgICAgICAgcHJvZ3JhbSwgaW5wdXRzLCAnaW50MzInLCB1bmlmb3JtRGF0YVN3YXApO1xuICAgIGRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JJbmZvT3JOdWxsKGJhY2tlbmQsIHByZXZJbmRpY2VzKTtcbiAgfTtcblxuICAvLyBTdGVwIDE6IGxvY2FsIHNvcnRcbiAgZm9yIChsZXQgbGVuID0gMTsgbGVuIDwga1BvdzI7IGxlbiAqPSAyKSB7XG4gICAgY29uc3QgZGlyID0gbGVuICogMjtcbiAgICBmb3IgKGxldCBpbmMgPSBsZW47IGluYyA+PSAxOyBpbmMgLz0gMikge1xuICAgICAgcnVuU3dhcChkaXIsIGluYywgW2JhdGNoLCBsYXN0RGltUG93Ml0pO1xuICAgIH1cbiAgfVxuXG4gIC8vIFN0ZXAgMjogbWVyZ2VcbiAgZm9yIChsZXQgaW5kaWNlc1NpemUgPSBsYXN0RGltUG93MjsgaW5kaWNlc1NpemUgPiBrUG93MjsgaW5kaWNlc1NpemUgLz0gMikge1xuICAgIGNvbnN0IGlucHV0cyA9IGdldElucHV0cygpO1xuICAgIGNvbnN0IG1lcmdlUHJvZ3JhbSA9IG5ldyBNZXJnZVByb2dyYW0oW2JhdGNoLCBpbmRpY2VzU2l6ZSAvIDJdKTtcbiAgICBjb25zdCBmaXJzdFBhc3MgPSBpbmRpY2VzID09PSBudWxsID8gMSA6IDA7XG4gICAgY29uc3QgdW5pZm9ybURhdGFNZXJnZSA9IFtcbiAgICAgICAge3R5cGU6ICdpbnQzMicsIGRhdGE6IFtsYXN0RGltXX0sXG4gICAgICAgIHt0eXBlOiAnaW50MzInLCBkYXRhOiBbZmlyc3RQYXNzXX0sXG4gICAgICAgIHt0eXBlOiAnaW50MzInLCBkYXRhOiBba1BvdzJdfVxuICAgIF07XG4gICAgY29uc3QgcHJldkluZGljZXMgPSBpbmRpY2VzO1xuICAgIGluZGljZXMgPSBiYWNrZW5kLnJ1bldlYkdQVVByb2dyYW0oXG4gICAgICAgIG1lcmdlUHJvZ3JhbSwgaW5wdXRzLCAnaW50MzInLCB1bmlmb3JtRGF0YU1lcmdlKTtcbiAgICBkaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mb09yTnVsbChiYWNrZW5kLCBwcmV2SW5kaWNlcyk7XG5cbiAgICAvLyBTdGVwIDM6IHJlYnVpbGRcbiAgICBjb25zdCBsZW4gPSBrUG93MiAvIDI7XG4gICAgY29uc3QgZGlyID0gbGVuICogMjtcbiAgICBmb3IgKGxldCBpbmMgPSBsZW47IGluYyA+PSAxOyBpbmMgLz0gMikge1xuICAgICAgcnVuU3dhcChkaXIsIGluYywgaW5kaWNlcy5zaGFwZSk7XG4gICAgfVxuICB9XG5cbiAgLy8gS2VlcCBvbmx5IHRoZSByZXF1ZXN0ZWQgdG9wIEsgcmVzdWx0cyBpbnN0ZWFkIG9mIGtQb3cyXG4gIGxldCBwcmV2SW5kaWNlcyA9IGluZGljZXM7XG4gIGluZGljZXMgPSBzbGljZShcbiAgICAgIHtpbnB1dHM6IHt4OiBpbmRpY2VzfSwgYmFja2VuZCwgYXR0cnM6IHtiZWdpbjogMCwgc2l6ZTogW2JhdGNoLCBrXX19KTtcbiAgZGlzcG9zZUludGVybWVkaWF0ZVRlbnNvckluZm9Pck51bGwoYmFja2VuZCwgcHJldkluZGljZXMpO1xuXG4gIC8vIEdhdGhlciB2YWx1ZXMgb24gbGFzdCBkaW1lbnNpb25cbiAgbGV0IHZhbHVlcyA9IGdhdGhlclYyKFxuICAgICAge2lucHV0czoge3g6IHgyRCwgaW5kaWNlc30sIGJhY2tlbmQsIGF0dHJzOiB7YXhpczogMSwgYmF0Y2hEaW1zOiAxfX0pO1xuICBkaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mb09yTnVsbChiYWNrZW5kLCB4MkQpO1xuXG4gIC8vIFJlc2hhcGUgYmFjayB0byB0aGUgb3JpZ2luYWwgaW5wdXQgc2hhcGUsIGV4Y2VwdCB0aGF0IHRoZSBsYXN0XG4gIC8vIGRpbWVuc2lvbiBpcyBrLlxuICBjb25zdCBuZXdTaGFwZSA9IHhTaGFwZS5zbGljZSgwLCAtMSk7XG4gIG5ld1NoYXBlLnB1c2goayk7XG5cbiAgcHJldkluZGljZXMgPSBpbmRpY2VzO1xuICBpbmRpY2VzID0gcmVzaGFwZSh7aW5wdXRzOiB7eDogaW5kaWNlc30sIGF0dHJzOiB7c2hhcGU6IG5ld1NoYXBlfSwgYmFja2VuZH0pO1xuICBkaXNwb3NlSW50ZXJtZWRpYXRlVGVuc29ySW5mb09yTnVsbChiYWNrZW5kLCBwcmV2SW5kaWNlcyk7XG5cbiAgY29uc3QgcHJldlZhbHVlcyA9IHZhbHVlcztcbiAgdmFsdWVzID0gcmVzaGFwZSh7aW5wdXRzOiB7eDogdmFsdWVzfSwgYXR0cnM6IHtzaGFwZTogbmV3U2hhcGV9LCBiYWNrZW5kfSk7XG4gIGRpc3Bvc2VJbnRlcm1lZGlhdGVUZW5zb3JJbmZvT3JOdWxsKGJhY2tlbmQsIHByZXZWYWx1ZXMpO1xuXG4gIHJldHVybiBbdmFsdWVzLCBpbmRpY2VzXTtcbn1cblxuZXhwb3J0IGNvbnN0IHRvcEtDb25maWc6IEtlcm5lbENvbmZpZyA9IHtcbiAga2VybmVsTmFtZTogVG9wSyxcbiAgYmFja2VuZE5hbWU6ICd3ZWJncHUnLFxuICBrZXJuZWxGdW5jOiB0b3BLIGFzIHVua25vd24gYXMgS2VybmVsRnVuY1xufTtcbiJdfQ==","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { getMainHeaderString as main } from './webgpu_program';\nimport { computeDispatch, flatDispatchLayout } from './webgpu_util';\nexport class TransformProgram {\n    constructor(outShape) {\n        this.variableNames = ['Image', 'Transforms'];\n        this.uniforms = 'interpolationModeId : i32, fillModeId : i32, fillValue : f32,';\n        this.workgroupSize = [64, 1, 1];\n        this.size = true;\n        this.outputShape = outShape;\n        this.dispatchLayout = flatDispatchLayout(this.outputShape);\n        this.dispatch = computeDispatch(this.dispatchLayout, this.outputShape, this.workgroupSize);\n        this.shaderKey = 'transform';\n    }\n    getUserCode() {\n        const userCode = `\n          fn mapCoord(outCoord : f32, len : f32) -> f32{\n            var inCoord = outCoord;\n            if(uniforms.fillModeId == 2) {\n              if (inCoord < 0.0) {\n                if (len <= 1.0) {\n                  inCoord = 0.0;\n                } else {\n                  let sz2 = 2.0 * len;\n                  if (inCoord < sz2) {\n                    inCoord = sz2 * f32(i32(f32(-inCoord / sz2))) +\n                    inCoord;\n                  }\n                  if (inCoord < -len) {\n                    inCoord = inCoord + sz2;\n                  } else {\n                    inCoord = -inCoord - 1.0;\n                  }\n                }\n              } else if (inCoord > len - 1.0) {\n                if (len <= 1.0) {\n                  inCoord = 0.0;\n                } else {\n                  let sz2 = 2.0 * len;\n                  inCoord = inCoord - sz2 * f32(i32(f32(inCoord / sz2)));\n                  if (inCoord >= len) {\n                    inCoord = sz2 - inCoord - 1.0;\n                  }\n                }\n              }\n              return clamp(inCoord, 0.0, len - 1.0);\n            } else if (uniforms.fillModeId == 3) {\n              if (inCoord < 0.0) {\n                if (len <= 1.0) {\n                  inCoord = 0.0;\n                } else {\n                  let sz = len - 1.0;\n                  inCoord = inCoord + len * (f32(i32(f32(-inCoord / sz))) + 1.0);\n                }\n              } else if (inCoord > len - 1.0) {\n                if (len <= 1.0) {\n                  inCoord = 0.0;\n                } else {\n                  let sz = len - 1.0;\n                  inCoord = inCoord - len * f32(i32(f32(inCoord / sz)));\n                }\n              }\n              return clamp(inCoord, 0.0, len - 1.0);\n            } else if (uniforms.fillModeId == 4) {\n              return clamp(outCoord, 0.0, len - 1.0);\n            }\n            return outCoord;\n          }\n          fn readWithFillValue(batch : i32, coordY : i32, coordX : i32,\n            channel : i32) -> f32 {\n            var outputValue : f32;\n            if (0 <= coordY && coordY < uniforms.imageShape[1] && 0 <= coordX && coordX < uniforms.imageShape[2]) {\n                outputValue = getImage(batch, coordY, coordX, channel);\n            } else {\n              outputValue = uniforms.fillValue;\n            }\n            return outputValue;\n          }\n\n          ${main('index')} {\n            if (index < uniforms.size) {\n              let coords = getCoordsFromIndex(index);\n              var outputValue : f32;\n              let batch = coords[0];\n              let x = coords[2];\n              let y = coords[1];\n              let channel = coords[3];\n              let xf = f32(x);\n              let yf = f32(y);\n              let a1 = getTransforms(batch, 0);\n              let a2 = getTransforms(batch, 1);\n              let a3 = getTransforms(batch, 2);\n              let b1 = getTransforms(batch, 3);\n              let b2 = getTransforms(batch, 4);\n              let b3 = getTransforms(batch, 5);\n              let c1 = getTransforms(batch, 6);\n              let c2 = getTransforms(batch, 7);\n              let projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = uniforms.fillValue;\n              } else {\n                let inX = (a1 * xf + a2 * yf + a3) / projection;\n                let inY = (b1 * xf + b2 * yf + b3) / projection;\n                let mapX = mapCoord(inX, f32(uniforms.imageShape[2]));\n                let mapY = mapCoord(inY, f32(uniforms.imageShape[1]));\n\n                if (uniforms.interpolationModeId == 1) {\n                  let coordY = i32(round(mapY));\n                  let coordX = i32(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  let yFloor = floor(mapY);\n                  let xFloor = floor(mapX);\n                  let yCeil = yFloor + 1.0;\n                  let xCeil = xFloor + 1.0;\n                  let valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, i32(yFloor), i32(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, i32(yFloor), i32(xCeil), channel);\n                  let valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, i32(yCeil), i32(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, i32(yCeil), i32(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutputAtIndex(index, outputValue);\n            }\n          }\n        `;\n        return userCode;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHJhbnNmb3JtX3dlYmdwdS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3RmanMtYmFja2VuZC13ZWJncHUvc3JjL3RyYW5zZm9ybV93ZWJncHUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUFDLG1CQUFtQixJQUFJLElBQUksRUFBZ0IsTUFBTSxrQkFBa0IsQ0FBQztBQUM1RSxPQUFPLEVBQUMsZUFBZSxFQUFFLGtCQUFrQixFQUFDLE1BQU0sZUFBZSxDQUFDO0FBRWxFLE1BQU0sT0FBTyxnQkFBZ0I7SUFVM0IsWUFBWSxRQUEwQztRQVR0RCxrQkFBYSxHQUFHLENBQUMsT0FBTyxFQUFFLFlBQVksQ0FBQyxDQUFDO1FBRXhDLGFBQVEsR0FBRywrREFBK0QsQ0FBQztRQUkzRSxrQkFBYSxHQUE2QixDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDckQsU0FBSSxHQUFHLElBQUksQ0FBQztRQUdWLElBQUksQ0FBQyxXQUFXLEdBQUcsUUFBUSxDQUFDO1FBQzVCLElBQUksQ0FBQyxjQUFjLEdBQUcsa0JBQWtCLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQzNELElBQUksQ0FBQyxRQUFRLEdBQUcsZUFBZSxDQUMzQixJQUFJLENBQUMsY0FBYyxFQUFFLElBQUksQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBQy9ELElBQUksQ0FBQyxTQUFTLEdBQUcsV0FBVyxDQUFDO0lBQy9CLENBQUM7SUFFRCxXQUFXO1FBQ1QsTUFBTSxRQUFRLEdBQUc7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7WUFnRVQsSUFBSSxDQUFDLE9BQU8sQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztTQW9EaEIsQ0FBQztRQUNOLE9BQU8sUUFBUSxDQUFDO0lBQ2xCLENBQUM7Q0FDRiIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTEMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi9cblxuaW1wb3J0IHtnZXRNYWluSGVhZGVyU3RyaW5nIGFzIG1haW4sIFdlYkdQVVByb2dyYW19IGZyb20gJy4vd2ViZ3B1X3Byb2dyYW0nO1xuaW1wb3J0IHtjb21wdXRlRGlzcGF0Y2gsIGZsYXREaXNwYXRjaExheW91dH0gZnJvbSAnLi93ZWJncHVfdXRpbCc7XG5cbmV4cG9ydCBjbGFzcyBUcmFuc2Zvcm1Qcm9ncmFtIGltcGxlbWVudHMgV2ViR1BVUHJvZ3JhbSB7XG4gIHZhcmlhYmxlTmFtZXMgPSBbJ0ltYWdlJywgJ1RyYW5zZm9ybXMnXTtcbiAgb3V0cHV0U2hhcGU6IG51bWJlcltdO1xuICB1bmlmb3JtcyA9ICdpbnRlcnBvbGF0aW9uTW9kZUlkIDogaTMyLCBmaWxsTW9kZUlkIDogaTMyLCBmaWxsVmFsdWUgOiBmMzIsJztcbiAgc2hhZGVyS2V5OiBzdHJpbmc7XG4gIGRpc3BhdGNoTGF5b3V0OiB7eDogbnVtYmVyW119O1xuICBkaXNwYXRjaDogW251bWJlciwgbnVtYmVyLCBudW1iZXJdO1xuICB3b3JrZ3JvdXBTaXplOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl0gPSBbNjQsIDEsIDFdO1xuICBzaXplID0gdHJ1ZTtcblxuICBjb25zdHJ1Y3RvcihvdXRTaGFwZTogW251bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcl0pIHtcbiAgICB0aGlzLm91dHB1dFNoYXBlID0gb3V0U2hhcGU7XG4gICAgdGhpcy5kaXNwYXRjaExheW91dCA9IGZsYXREaXNwYXRjaExheW91dCh0aGlzLm91dHB1dFNoYXBlKTtcbiAgICB0aGlzLmRpc3BhdGNoID0gY29tcHV0ZURpc3BhdGNoKFxuICAgICAgICB0aGlzLmRpc3BhdGNoTGF5b3V0LCB0aGlzLm91dHB1dFNoYXBlLCB0aGlzLndvcmtncm91cFNpemUpO1xuICAgIHRoaXMuc2hhZGVyS2V5ID0gJ3RyYW5zZm9ybSc7XG4gIH1cblxuICBnZXRVc2VyQ29kZSgpOiBzdHJpbmcge1xuICAgIGNvbnN0IHVzZXJDb2RlID0gYFxuICAgICAgICAgIGZuIG1hcENvb3JkKG91dENvb3JkIDogZjMyLCBsZW4gOiBmMzIpIC0+IGYzMntcbiAgICAgICAgICAgIHZhciBpbkNvb3JkID0gb3V0Q29vcmQ7XG4gICAgICAgICAgICBpZih1bmlmb3Jtcy5maWxsTW9kZUlkID09IDIpIHtcbiAgICAgICAgICAgICAgaWYgKGluQ29vcmQgPCAwLjApIHtcbiAgICAgICAgICAgICAgICBpZiAobGVuIDw9IDEuMCkge1xuICAgICAgICAgICAgICAgICAgaW5Db29yZCA9IDAuMDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgbGV0IHN6MiA9IDIuMCAqIGxlbjtcbiAgICAgICAgICAgICAgICAgIGlmIChpbkNvb3JkIDwgc3oyKSB7XG4gICAgICAgICAgICAgICAgICAgIGluQ29vcmQgPSBzejIgKiBmMzIoaTMyKGYzMigtaW5Db29yZCAvIHN6MikpKSArXG4gICAgICAgICAgICAgICAgICAgIGluQ29vcmQ7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBpZiAoaW5Db29yZCA8IC1sZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgaW5Db29yZCA9IGluQ29vcmQgKyBzejI7XG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpbkNvb3JkID0gLWluQ29vcmQgLSAxLjA7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2UgaWYgKGluQ29vcmQgPiBsZW4gLSAxLjApIHtcbiAgICAgICAgICAgICAgICBpZiAobGVuIDw9IDEuMCkge1xuICAgICAgICAgICAgICAgICAgaW5Db29yZCA9IDAuMDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgbGV0IHN6MiA9IDIuMCAqIGxlbjtcbiAgICAgICAgICAgICAgICAgIGluQ29vcmQgPSBpbkNvb3JkIC0gc3oyICogZjMyKGkzMihmMzIoaW5Db29yZCAvIHN6MikpKTtcbiAgICAgICAgICAgICAgICAgIGlmIChpbkNvb3JkID49IGxlbikge1xuICAgICAgICAgICAgICAgICAgICBpbkNvb3JkID0gc3oyIC0gaW5Db29yZCAtIDEuMDtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcmV0dXJuIGNsYW1wKGluQ29vcmQsIDAuMCwgbGVuIC0gMS4wKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodW5pZm9ybXMuZmlsbE1vZGVJZCA9PSAzKSB7XG4gICAgICAgICAgICAgIGlmIChpbkNvb3JkIDwgMC4wKSB7XG4gICAgICAgICAgICAgICAgaWYgKGxlbiA8PSAxLjApIHtcbiAgICAgICAgICAgICAgICAgIGluQ29vcmQgPSAwLjA7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIGxldCBzeiA9IGxlbiAtIDEuMDtcbiAgICAgICAgICAgICAgICAgIGluQ29vcmQgPSBpbkNvb3JkICsgbGVuICogKGYzMihpMzIoZjMyKC1pbkNvb3JkIC8gc3opKSkgKyAxLjApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChpbkNvb3JkID4gbGVuIC0gMS4wKSB7XG4gICAgICAgICAgICAgICAgaWYgKGxlbiA8PSAxLjApIHtcbiAgICAgICAgICAgICAgICAgIGluQ29vcmQgPSAwLjA7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIGxldCBzeiA9IGxlbiAtIDEuMDtcbiAgICAgICAgICAgICAgICAgIGluQ29vcmQgPSBpbkNvb3JkIC0gbGVuICogZjMyKGkzMihmMzIoaW5Db29yZCAvIHN6KSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICByZXR1cm4gY2xhbXAoaW5Db29yZCwgMC4wLCBsZW4gLSAxLjApO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh1bmlmb3Jtcy5maWxsTW9kZUlkID09IDQpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGNsYW1wKG91dENvb3JkLCAwLjAsIGxlbiAtIDEuMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gb3V0Q29vcmQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIGZuIHJlYWRXaXRoRmlsbFZhbHVlKGJhdGNoIDogaTMyLCBjb29yZFkgOiBpMzIsIGNvb3JkWCA6IGkzMixcbiAgICAgICAgICAgIGNoYW5uZWwgOiBpMzIpIC0+IGYzMiB7XG4gICAgICAgICAgICB2YXIgb3V0cHV0VmFsdWUgOiBmMzI7XG4gICAgICAgICAgICBpZiAoMCA8PSBjb29yZFkgJiYgY29vcmRZIDwgdW5pZm9ybXMuaW1hZ2VTaGFwZVsxXSAmJiAwIDw9IGNvb3JkWCAmJiBjb29yZFggPCB1bmlmb3Jtcy5pbWFnZVNoYXBlWzJdKSB7XG4gICAgICAgICAgICAgICAgb3V0cHV0VmFsdWUgPSBnZXRJbWFnZShiYXRjaCwgY29vcmRZLCBjb29yZFgsIGNoYW5uZWwpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgb3V0cHV0VmFsdWUgPSB1bmlmb3Jtcy5maWxsVmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gb3V0cHV0VmFsdWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgJHttYWluKCdpbmRleCcpfSB7XG4gICAgICAgICAgICBpZiAoaW5kZXggPCB1bmlmb3Jtcy5zaXplKSB7XG4gICAgICAgICAgICAgIGxldCBjb29yZHMgPSBnZXRDb29yZHNGcm9tSW5kZXgoaW5kZXgpO1xuICAgICAgICAgICAgICB2YXIgb3V0cHV0VmFsdWUgOiBmMzI7XG4gICAgICAgICAgICAgIGxldCBiYXRjaCA9IGNvb3Jkc1swXTtcbiAgICAgICAgICAgICAgbGV0IHggPSBjb29yZHNbMl07XG4gICAgICAgICAgICAgIGxldCB5ID0gY29vcmRzWzFdO1xuICAgICAgICAgICAgICBsZXQgY2hhbm5lbCA9IGNvb3Jkc1szXTtcbiAgICAgICAgICAgICAgbGV0IHhmID0gZjMyKHgpO1xuICAgICAgICAgICAgICBsZXQgeWYgPSBmMzIoeSk7XG4gICAgICAgICAgICAgIGxldCBhMSA9IGdldFRyYW5zZm9ybXMoYmF0Y2gsIDApO1xuICAgICAgICAgICAgICBsZXQgYTIgPSBnZXRUcmFuc2Zvcm1zKGJhdGNoLCAxKTtcbiAgICAgICAgICAgICAgbGV0IGEzID0gZ2V0VHJhbnNmb3JtcyhiYXRjaCwgMik7XG4gICAgICAgICAgICAgIGxldCBiMSA9IGdldFRyYW5zZm9ybXMoYmF0Y2gsIDMpO1xuICAgICAgICAgICAgICBsZXQgYjIgPSBnZXRUcmFuc2Zvcm1zKGJhdGNoLCA0KTtcbiAgICAgICAgICAgICAgbGV0IGIzID0gZ2V0VHJhbnNmb3JtcyhiYXRjaCwgNSk7XG4gICAgICAgICAgICAgIGxldCBjMSA9IGdldFRyYW5zZm9ybXMoYmF0Y2gsIDYpO1xuICAgICAgICAgICAgICBsZXQgYzIgPSBnZXRUcmFuc2Zvcm1zKGJhdGNoLCA3KTtcbiAgICAgICAgICAgICAgbGV0IHByb2plY3Rpb24gPSBjMSAqIHhmICsgYzIgKiB5ZiArIDEuMDtcbiAgICAgICAgICAgICAgaWYgKHByb2plY3Rpb24gPT0gMC4wKSB7XG4gICAgICAgICAgICAgICAgb3V0cHV0VmFsdWUgPSB1bmlmb3Jtcy5maWxsVmFsdWU7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IGluWCA9IChhMSAqIHhmICsgYTIgKiB5ZiArIGEzKSAvIHByb2plY3Rpb247XG4gICAgICAgICAgICAgICAgbGV0IGluWSA9IChiMSAqIHhmICsgYjIgKiB5ZiArIGIzKSAvIHByb2plY3Rpb247XG4gICAgICAgICAgICAgICAgbGV0IG1hcFggPSBtYXBDb29yZChpblgsIGYzMih1bmlmb3Jtcy5pbWFnZVNoYXBlWzJdKSk7XG4gICAgICAgICAgICAgICAgbGV0IG1hcFkgPSBtYXBDb29yZChpblksIGYzMih1bmlmb3Jtcy5pbWFnZVNoYXBlWzFdKSk7XG5cbiAgICAgICAgICAgICAgICBpZiAodW5pZm9ybXMuaW50ZXJwb2xhdGlvbk1vZGVJZCA9PSAxKSB7XG4gICAgICAgICAgICAgICAgICBsZXQgY29vcmRZID0gaTMyKHJvdW5kKG1hcFkpKTtcbiAgICAgICAgICAgICAgICAgIGxldCBjb29yZFggPSBpMzIocm91bmQobWFwWCkpO1xuICAgICAgICAgICAgICAgICAgb3V0cHV0VmFsdWUgPSByZWFkV2l0aEZpbGxWYWx1ZShiYXRjaCwgY29vcmRZLCBjb29yZFgsXG4gICAgICAgICAgICAgICAgICAgIGNoYW5uZWwpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBsZXQgeUZsb29yID0gZmxvb3IobWFwWSk7XG4gICAgICAgICAgICAgICAgICBsZXQgeEZsb29yID0gZmxvb3IobWFwWCk7XG4gICAgICAgICAgICAgICAgICBsZXQgeUNlaWwgPSB5Rmxvb3IgKyAxLjA7XG4gICAgICAgICAgICAgICAgICBsZXQgeENlaWwgPSB4Rmxvb3IgKyAxLjA7XG4gICAgICAgICAgICAgICAgICBsZXQgdmFsdWVZRmxvb3IgPSAoeENlaWwgLSBtYXBYKSAqXG4gICAgICAgICAgICAgICAgICByZWFkV2l0aEZpbGxWYWx1ZShiYXRjaCwgaTMyKHlGbG9vciksIGkzMih4Rmxvb3IpLCBjaGFubmVsKSArXG4gICAgICAgICAgICAgICAgICAobWFwWCAtIHhGbG9vcikgKlxuICAgICAgICAgICAgICAgICAgcmVhZFdpdGhGaWxsVmFsdWUoYmF0Y2gsIGkzMih5Rmxvb3IpLCBpMzIoeENlaWwpLCBjaGFubmVsKTtcbiAgICAgICAgICAgICAgICAgIGxldCB2YWx1ZVlDZWlsID0gKHhDZWlsIC0gbWFwWCkgKlxuICAgICAgICAgICAgICAgICAgcmVhZFdpdGhGaWxsVmFsdWUoYmF0Y2gsIGkzMih5Q2VpbCksIGkzMih4Rmxvb3IpLCBjaGFubmVsKSArXG4gICAgICAgICAgICAgICAgICAobWFwWCAtIHhGbG9vcikgKlxuICAgICAgICAgICAgICAgICAgcmVhZFdpdGhGaWxsVmFsdWUoYmF0Y2gsIGkzMih5Q2VpbCksIGkzMih4Q2VpbCksIGNoYW5uZWwpO1xuICAgICAgICAgICAgICAgICAgb3V0cHV0VmFsdWUgPSAoeUNlaWwgLSBtYXBZKSAqIHZhbHVlWUZsb29yICtcbiAgICAgICAgICAgICAgICAgIChtYXBZIC0geUZsb29yKSAqIHZhbHVlWUNlaWw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHNldE91dHB1dEF0SW5kZXgoaW5kZXgsIG91dHB1dFZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIGA7XG4gICAgcmV0dXJuIHVzZXJDb2RlO1xuICB9XG59XG4iXX0=","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Transform } from '@tensorflow/tfjs-core';\nimport { TransformProgram } from '../transform_webgpu';\nexport function transform(args) {\n    const { inputs, backend, attrs } = args;\n    const { image, transforms } = inputs;\n    const { interpolation, fillMode, fillValue, outputShape } = attrs;\n    const [batch, imageHeight, imageWidth, numChannels] = image.shape;\n    const [outHeight, outWidth] = outputShape != null ? outputShape : [imageHeight, imageWidth];\n    const outShape = [batch, outHeight, outWidth,\n        numChannels];\n    const program = new TransformProgram(outShape);\n    const interpolationModeId = interpolation === 'nearest' ? 1 : 2;\n    let fillModeId;\n    switch (fillMode) {\n        case 'constant':\n            fillModeId = 1;\n            break;\n        case 'reflect':\n            fillModeId = 2;\n            break;\n        case 'wrap':\n            fillModeId = 3;\n            break;\n        case 'nearest':\n            fillModeId = 4;\n            break;\n        default:\n            fillModeId = 1;\n            break;\n    }\n    const uniformData = [\n        { type: 'int32', data: [interpolationModeId] },\n        { type: 'int32', data: [fillModeId] }, { type: 'float32', data: [fillValue] }\n    ];\n    return backend.runWebGPUProgram(program, [image, transforms], 'float32', uniformData);\n}\nexport const transformConfig = {\n    kernelName: Transform,\n    backendName: 'webgpu',\n    kernelFunc: transform\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVHJhbnNmb3JtLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMva2VybmVscy9UcmFuc2Zvcm0udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUF1QyxTQUFTLEVBQWtDLE1BQU0sdUJBQXVCLENBQUM7QUFHdkgsT0FBTyxFQUFDLGdCQUFnQixFQUFDLE1BQU0scUJBQXFCLENBQUM7QUFFckQsTUFBTSxVQUFVLFNBQVMsQ0FBQyxJQUl6QjtJQUNDLE1BQU0sRUFBQyxNQUFNLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBQyxHQUFHLElBQUksQ0FBQztJQUN0QyxNQUFNLEVBQUMsS0FBSyxFQUFFLFVBQVUsRUFBQyxHQUFHLE1BQU0sQ0FBQztJQUNuQyxNQUFNLEVBQUMsYUFBYSxFQUFFLFFBQVEsRUFBRSxTQUFTLEVBQUUsV0FBVyxFQUFDLEdBQUcsS0FBSyxDQUFDO0lBRWhFLE1BQU0sQ0FBQyxLQUFLLEVBQUUsV0FBVyxFQUFFLFVBQVUsRUFBRSxXQUFXLENBQUMsR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDO0lBQ2xFLE1BQU0sQ0FBQyxTQUFTLEVBQUUsUUFBUSxDQUFDLEdBQ3ZCLFdBQVcsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxXQUFXLEVBQUUsVUFBVSxDQUFDLENBQUM7SUFDbEUsTUFBTSxRQUFRLEdBQ1YsQ0FBQyxLQUFLLEVBQUUsU0FBUyxFQUFFLFFBQVE7UUFDMUIsV0FBVyxDQUFxQyxDQUFDO0lBRXRELE1BQU0sT0FBTyxHQUFHLElBQUksZ0JBQWdCLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDL0MsTUFBTSxtQkFBbUIsR0FBRyxhQUFhLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNoRSxJQUFJLFVBQWtCLENBQUM7SUFDdkIsUUFBUSxRQUFRLEVBQUU7UUFDaEIsS0FBSyxVQUFVO1lBQ2IsVUFBVSxHQUFHLENBQUMsQ0FBQztZQUNmLE1BQU07UUFDUixLQUFLLFNBQVM7WUFDWixVQUFVLEdBQUcsQ0FBQyxDQUFDO1lBQ2YsTUFBTTtRQUNSLEtBQUssTUFBTTtZQUNULFVBQVUsR0FBRyxDQUFDLENBQUM7WUFDZixNQUFNO1FBQ1IsS0FBSyxTQUFTO1lBQ1osVUFBVSxHQUFHLENBQUMsQ0FBQztZQUNmLE1BQU07UUFDUjtZQUNFLFVBQVUsR0FBRyxDQUFDLENBQUM7WUFDZixNQUFNO0tBQ1Q7SUFDRCxNQUFNLFdBQVcsR0FBRztRQUNsQixFQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLENBQUMsbUJBQW1CLENBQUMsRUFBQztRQUM1QyxFQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLENBQUMsVUFBVSxDQUFDLEVBQUMsRUFBRSxFQUFDLElBQUksRUFBRSxTQUFTLEVBQUUsSUFBSSxFQUFFLENBQUMsU0FBUyxDQUFDLEVBQUM7S0FDMUUsQ0FBQztJQUNGLE9BQU8sT0FBTyxDQUFDLGdCQUFnQixDQUMzQixPQUFPLEVBQUUsQ0FBQyxLQUFLLEVBQUUsVUFBVSxDQUFDLEVBQUUsU0FBUyxFQUFFLFdBQVcsQ0FBQyxDQUFDO0FBQzVELENBQUM7QUFFRCxNQUFNLENBQUMsTUFBTSxlQUFlLEdBQWlCO0lBQzNDLFVBQVUsRUFBRSxTQUFTO0lBQ3JCLFdBQVcsRUFBRSxRQUFRO0lBQ3JCLFVBQVUsRUFBRSxTQUFrQztDQUMvQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge0tlcm5lbENvbmZpZywgS2VybmVsRnVuYywgVGVuc29ySW5mbywgVHJhbnNmb3JtLCBUcmFuc2Zvcm1BdHRycywgVHJhbnNmb3JtSW5wdXRzfSBmcm9tICdAdGVuc29yZmxvdy90ZmpzLWNvcmUnO1xuXG5pbXBvcnQge1dlYkdQVUJhY2tlbmR9IGZyb20gJy4uL2JhY2tlbmRfd2ViZ3B1JztcbmltcG9ydCB7VHJhbnNmb3JtUHJvZ3JhbX0gZnJvbSAnLi4vdHJhbnNmb3JtX3dlYmdwdSc7XG5cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2Zvcm0oYXJnczoge1xuICBpbnB1dHM6IFRyYW5zZm9ybUlucHV0cyxcbiAgYmFja2VuZDogV2ViR1BVQmFja2VuZCxcbiAgYXR0cnM6IFRyYW5zZm9ybUF0dHJzXG59KTogVGVuc29ySW5mbyB7XG4gIGNvbnN0IHtpbnB1dHMsIGJhY2tlbmQsIGF0dHJzfSA9IGFyZ3M7XG4gIGNvbnN0IHtpbWFnZSwgdHJhbnNmb3Jtc30gPSBpbnB1dHM7XG4gIGNvbnN0IHtpbnRlcnBvbGF0aW9uLCBmaWxsTW9kZSwgZmlsbFZhbHVlLCBvdXRwdXRTaGFwZX0gPSBhdHRycztcblxuICBjb25zdCBbYmF0Y2gsIGltYWdlSGVpZ2h0LCBpbWFnZVdpZHRoLCBudW1DaGFubmVsc10gPSBpbWFnZS5zaGFwZTtcbiAgY29uc3QgW291dEhlaWdodCwgb3V0V2lkdGhdID1cbiAgICAgIG91dHB1dFNoYXBlICE9IG51bGwgPyBvdXRwdXRTaGFwZSA6IFtpbWFnZUhlaWdodCwgaW1hZ2VXaWR0aF07XG4gIGNvbnN0IG91dFNoYXBlID1cbiAgICAgIFtiYXRjaCwgb3V0SGVpZ2h0LCBvdXRXaWR0aCxcbiAgICAgICBudW1DaGFubmVsc10gYXMgW251bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcl07XG5cbiAgY29uc3QgcHJvZ3JhbSA9IG5ldyBUcmFuc2Zvcm1Qcm9ncmFtKG91dFNoYXBlKTtcbiAgY29uc3QgaW50ZXJwb2xhdGlvbk1vZGVJZCA9IGludGVycG9sYXRpb24gPT09ICduZWFyZXN0JyA/IDEgOiAyO1xuICBsZXQgZmlsbE1vZGVJZDogbnVtYmVyO1xuICBzd2l0Y2ggKGZpbGxNb2RlKSB7XG4gICAgY2FzZSAnY29uc3RhbnQnOlxuICAgICAgZmlsbE1vZGVJZCA9IDE7XG4gICAgICBicmVhaztcbiAgICBjYXNlICdyZWZsZWN0JzpcbiAgICAgIGZpbGxNb2RlSWQgPSAyO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnd3JhcCc6XG4gICAgICBmaWxsTW9kZUlkID0gMztcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ25lYXJlc3QnOlxuICAgICAgZmlsbE1vZGVJZCA9IDQ7XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgZmlsbE1vZGVJZCA9IDE7XG4gICAgICBicmVhaztcbiAgfVxuICBjb25zdCB1bmlmb3JtRGF0YSA9IFtcbiAgICB7dHlwZTogJ2ludDMyJywgZGF0YTogW2ludGVycG9sYXRpb25Nb2RlSWRdfSxcbiAgICB7dHlwZTogJ2ludDMyJywgZGF0YTogW2ZpbGxNb2RlSWRdfSwge3R5cGU6ICdmbG9hdDMyJywgZGF0YTogW2ZpbGxWYWx1ZV19XG4gIF07XG4gIHJldHVybiBiYWNrZW5kLnJ1bldlYkdQVVByb2dyYW0oXG4gICAgICBwcm9ncmFtLCBbaW1hZ2UsIHRyYW5zZm9ybXNdLCAnZmxvYXQzMicsIHVuaWZvcm1EYXRhKTtcbn1cblxuZXhwb3J0IGNvbnN0IHRyYW5zZm9ybUNvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBUcmFuc2Zvcm0sXG4gIGJhY2tlbmROYW1lOiAnd2ViZ3B1JyxcbiAga2VybmVsRnVuYzogdHJhbnNmb3JtIGFzIHVua25vd24gYXMgS2VybmVsRnVuY1xufTtcbiJdfQ==","/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { Unpack } from '@tensorflow/tfjs-core';\nimport { reshape } from './Reshape';\nimport { slice } from './Slice';\nexport function unpack(args) {\n    const { inputs, backend, attrs } = args;\n    const { value } = inputs;\n    let { axis } = attrs;\n    if (axis < 0) {\n        axis += value.shape.length;\n    }\n    const x = value;\n    const xRank = x.shape.length;\n    const num = value.shape[axis];\n    const outShape = new Array(xRank - 1);\n    let outIndex = 0;\n    for (let i = 0; i < xRank; i++) {\n        if (i !== axis) {\n            outShape[outIndex++] = x.shape[i];\n        }\n    }\n    const toDispose = [];\n    const begin = new Array(xRank).fill(0);\n    const size = x.shape.slice();\n    size[axis] = 1;\n    const res = new Array(num);\n    for (let i = 0; i < res.length; i++) {\n        begin[axis] = i;\n        const sliced = slice({ inputs: { x }, backend, attrs: { begin, size } });\n        const reshaped = reshape({ inputs: { x: sliced }, backend, attrs: { shape: outShape } });\n        res[i] = reshaped;\n        toDispose.push(sliced);\n    }\n    toDispose.forEach(t => backend.disposeData(t.dataId));\n    return res;\n}\nexport const unpackConfig = {\n    kernelName: Unpack,\n    backendName: 'webgpu',\n    kernelFunc: unpack\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVW5wYWNrLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMva2VybmVscy9VbnBhY2sudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUF1QyxNQUFNLEVBQTRCLE1BQU0sdUJBQXVCLENBQUM7QUFJOUcsT0FBTyxFQUFDLE9BQU8sRUFBQyxNQUFNLFdBQVcsQ0FBQztBQUNsQyxPQUFPLEVBQUMsS0FBSyxFQUFDLE1BQU0sU0FBUyxDQUFDO0FBRTlCLE1BQU0sVUFBVSxNQUFNLENBQ2xCLElBQ3NFO0lBRXhFLE1BQU0sRUFBQyxNQUFNLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBQyxHQUFHLElBQUksQ0FBQztJQUN0QyxNQUFNLEVBQUMsS0FBSyxFQUFDLEdBQUcsTUFBTSxDQUFDO0lBQ3ZCLElBQUksRUFBQyxJQUFJLEVBQUMsR0FBRyxLQUFLLENBQUM7SUFFbkIsSUFBSSxJQUFJLEdBQUcsQ0FBQyxFQUFFO1FBQ1osSUFBSSxJQUFJLEtBQUssQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDO0tBQzVCO0lBRUQsTUFBTSxDQUFDLEdBQUcsS0FBSyxDQUFDO0lBQ2hCLE1BQU0sS0FBSyxHQUFHLENBQUMsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDO0lBRTdCLE1BQU0sR0FBRyxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDOUIsTUFBTSxRQUFRLEdBQWEsSUFBSSxLQUFLLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxDQUFDO0lBQ2hELElBQUksUUFBUSxHQUFHLENBQUMsQ0FBQztJQUNqQixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsS0FBSyxFQUFFLENBQUMsRUFBRSxFQUFFO1FBQzlCLElBQUksQ0FBQyxLQUFLLElBQUksRUFBRTtZQUNkLFFBQVEsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDbkM7S0FDRjtJQUVELE1BQU0sU0FBUyxHQUFHLEVBQUUsQ0FBQztJQUVyQixNQUFNLEtBQUssR0FBRyxJQUFJLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDdkMsTUFBTSxJQUFJLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxLQUFLLEVBQUUsQ0FBQztJQUM3QixJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ2YsTUFBTSxHQUFHLEdBQWlCLElBQUksS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ3pDLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxHQUFHLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO1FBQ25DLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDaEIsTUFBTSxNQUFNLEdBQUcsS0FBSyxDQUFDLEVBQUMsTUFBTSxFQUFFLEVBQUMsQ0FBQyxFQUFDLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxFQUFDLEtBQUssRUFBRSxJQUFJLEVBQUMsRUFBQyxDQUFDLENBQUM7UUFDbkUsTUFBTSxRQUFRLEdBQ1YsT0FBTyxDQUFDLEVBQUMsTUFBTSxFQUFFLEVBQUMsQ0FBQyxFQUFFLE1BQU0sRUFBQyxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsRUFBQyxLQUFLLEVBQUUsUUFBUSxFQUFDLEVBQUMsQ0FBQyxDQUFDO1FBQ3RFLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxRQUFRLENBQUM7UUFFbEIsU0FBUyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztLQUN4QjtJQUVELFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO0lBQ3RELE9BQU8sR0FBRyxDQUFDO0FBQ2IsQ0FBQztBQUVELE1BQU0sQ0FBQyxNQUFNLFlBQVksR0FBaUI7SUFDeEMsVUFBVSxFQUFFLE1BQU07SUFDbEIsV0FBVyxFQUFFLFFBQVE7SUFDckIsVUFBVSxFQUFFLE1BQStCO0NBQzVDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7S2VybmVsQ29uZmlnLCBLZXJuZWxGdW5jLCBUZW5zb3JJbmZvLCBVbnBhY2ssIFVucGFja0F0dHJzLCBVbnBhY2tJbnB1dHN9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7V2ViR1BVQmFja2VuZH0gZnJvbSAnLi4vYmFja2VuZF93ZWJncHUnO1xuXG5pbXBvcnQge3Jlc2hhcGV9IGZyb20gJy4vUmVzaGFwZSc7XG5pbXBvcnQge3NsaWNlfSBmcm9tICcuL1NsaWNlJztcblxuZXhwb3J0IGZ1bmN0aW9uIHVucGFjayhcbiAgICBhcmdzOlxuICAgICAgICB7aW5wdXRzOiBVbnBhY2tJbnB1dHMsIGJhY2tlbmQ6IFdlYkdQVUJhY2tlbmQsIGF0dHJzOiBVbnBhY2tBdHRyc30pOlxuICAgIFRlbnNvckluZm9bXSB7XG4gIGNvbnN0IHtpbnB1dHMsIGJhY2tlbmQsIGF0dHJzfSA9IGFyZ3M7XG4gIGNvbnN0IHt2YWx1ZX0gPSBpbnB1dHM7XG4gIGxldCB7YXhpc30gPSBhdHRycztcblxuICBpZiAoYXhpcyA8IDApIHtcbiAgICBheGlzICs9IHZhbHVlLnNoYXBlLmxlbmd0aDtcbiAgfVxuXG4gIGNvbnN0IHggPSB2YWx1ZTtcbiAgY29uc3QgeFJhbmsgPSB4LnNoYXBlLmxlbmd0aDtcblxuICBjb25zdCBudW0gPSB2YWx1ZS5zaGFwZVtheGlzXTtcbiAgY29uc3Qgb3V0U2hhcGU6IG51bWJlcltdID0gbmV3IEFycmF5KHhSYW5rIC0gMSk7XG4gIGxldCBvdXRJbmRleCA9IDA7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgeFJhbms7IGkrKykge1xuICAgIGlmIChpICE9PSBheGlzKSB7XG4gICAgICBvdXRTaGFwZVtvdXRJbmRleCsrXSA9IHguc2hhcGVbaV07XG4gICAgfVxuICB9XG5cbiAgY29uc3QgdG9EaXNwb3NlID0gW107XG5cbiAgY29uc3QgYmVnaW4gPSBuZXcgQXJyYXkoeFJhbmspLmZpbGwoMCk7XG4gIGNvbnN0IHNpemUgPSB4LnNoYXBlLnNsaWNlKCk7XG4gIHNpemVbYXhpc10gPSAxO1xuICBjb25zdCByZXM6IFRlbnNvckluZm9bXSA9IG5ldyBBcnJheShudW0pO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHJlcy5sZW5ndGg7IGkrKykge1xuICAgIGJlZ2luW2F4aXNdID0gaTtcbiAgICBjb25zdCBzbGljZWQgPSBzbGljZSh7aW5wdXRzOiB7eH0sIGJhY2tlbmQsIGF0dHJzOiB7YmVnaW4sIHNpemV9fSk7XG4gICAgY29uc3QgcmVzaGFwZWQgPVxuICAgICAgICByZXNoYXBlKHtpbnB1dHM6IHt4OiBzbGljZWR9LCBiYWNrZW5kLCBhdHRyczoge3NoYXBlOiBvdXRTaGFwZX19KTtcbiAgICByZXNbaV0gPSByZXNoYXBlZDtcblxuICAgIHRvRGlzcG9zZS5wdXNoKHNsaWNlZCk7XG4gIH1cblxuICB0b0Rpc3Bvc2UuZm9yRWFjaCh0ID0+IGJhY2tlbmQuZGlzcG9zZURhdGEodC5kYXRhSWQpKTtcbiAgcmV0dXJuIHJlcztcbn1cblxuZXhwb3J0IGNvbnN0IHVucGFja0NvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBVbnBhY2ssXG4gIGJhY2tlbmROYW1lOiAnd2ViZ3B1JyxcbiAga2VybmVsRnVuYzogdW5wYWNrIGFzIHVua25vd24gYXMgS2VybmVsRnVuY1xufTtcbiJdfQ==","/**\n * @license\n * Copyright 2023 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { atomicAddSnippet } from './shader_util';\nimport { getMainHeaderString as main } from './webgpu_program';\nimport { computeDispatch, flatDispatchLayout } from './webgpu_util';\nexport class UnsortedSegmentSumProgram {\n    constructor(inShape, outShape, outputDtype) {\n        this.outputShape = [];\n        this.variableNames = ['x', 'segmentIds'];\n        this.uniforms = 'numSegments : i32, xSize: i32,';\n        this.workgroupSize = [64, 1, 1];\n        this.atomic = true;\n        this.outputShape = outShape;\n        this.dispatchLayout = flatDispatchLayout(inShape);\n        this.dispatch =\n            computeDispatch(this.dispatchLayout, inShape, this.workgroupSize);\n        if (outputDtype !== 'float32' && outputDtype !== 'int32') {\n            throw new Error(`UnsortedSegmentSum only supports float32 and int32\n              types, does not support ${outputDtype} type.`);\n        }\n        this.type = outputDtype;\n        this.shaderKey = 'unsortedSegmentSum';\n    }\n    getUserCode() {\n        const userCode = `\n    ${main('index')} {\n      if (index < uniforms.xSize) {\n        let coords = getXCoordsFromIndex(index);\n        let b = coords[0];\n        let inCol = coords[1];\n\n        let segmentId = i32(getSegmentIds(inCol));\n        if (segmentId >= 0) {\n          let flatIndex = b * uniforms.numSegments + segmentId % uniforms.numSegments;\n          let value = getX(b, inCol);\n\n          ${atomicAddSnippet('&result[flatIndex]', 'value', this.type)}\n        }\n      }\n    }\n  `;\n        return userCode;\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidW5zb3J0ZWRfc2VnbWVudF9zdW1fd2ViZ3B1LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMvdW5zb3J0ZWRfc2VnbWVudF9zdW1fd2ViZ3B1LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7Ozs7Ozs7R0FlRztBQUlILE9BQU8sRUFBQyxnQkFBZ0IsRUFBQyxNQUFNLGVBQWUsQ0FBQztBQUMvQyxPQUFPLEVBQUMsbUJBQW1CLElBQUksSUFBSSxFQUFnQixNQUFNLGtCQUFrQixDQUFDO0FBQzVFLE9BQU8sRUFBQyxlQUFlLEVBQUUsa0JBQWtCLEVBQUMsTUFBTSxlQUFlLENBQUM7QUFFbEUsTUFBTSxPQUFPLHlCQUF5QjtJQVdwQyxZQUFZLE9BQWlCLEVBQUUsUUFBa0IsRUFBRSxXQUFxQjtRQVZ4RSxnQkFBVyxHQUFhLEVBQUUsQ0FBQztRQUkzQixrQkFBYSxHQUFHLENBQUMsR0FBRyxFQUFFLFlBQVksQ0FBQyxDQUFDO1FBQ3BDLGFBQVEsR0FBRyxnQ0FBZ0MsQ0FBQztRQUM1QyxrQkFBYSxHQUE2QixDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDckQsV0FBTSxHQUFHLElBQUksQ0FBQztRQUlaLElBQUksQ0FBQyxXQUFXLEdBQUcsUUFBUSxDQUFDO1FBQzVCLElBQUksQ0FBQyxjQUFjLEdBQUcsa0JBQWtCLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDbEQsSUFBSSxDQUFDLFFBQVE7WUFDVCxlQUFlLENBQUMsSUFBSSxDQUFDLGNBQWMsRUFBRSxPQUFPLEVBQUUsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBQ3RFLElBQUksV0FBVyxLQUFLLFNBQVMsSUFBSSxXQUFXLEtBQUssT0FBTyxFQUFFO1lBQ3hELE1BQU0sSUFBSSxLQUFLLENBQUM7d0NBQ2tCLFdBQVcsUUFBUSxDQUFDLENBQUM7U0FDeEQ7UUFDRCxJQUFJLENBQUMsSUFBSSxHQUFHLFdBQVcsQ0FBQztRQUN4QixJQUFJLENBQUMsU0FBUyxHQUFHLG9CQUFvQixDQUFDO0lBQ3hDLENBQUM7SUFFRCxXQUFXO1FBQ1QsTUFBTSxRQUFRLEdBQUc7TUFDZixJQUFJLENBQUMsT0FBTyxDQUFDOzs7Ozs7Ozs7OztZQVlYLGdCQUFnQixDQUNaLG9CQUFvQixFQUFFLE9BQU8sRUFBRSxJQUFJLENBQUMsSUFBMkIsQ0FBQzs7OztHQUl6RSxDQUFDO1FBQ0EsT0FBTyxRQUFRLENBQUM7SUFDbEIsQ0FBQztDQUNGIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjMgR29vZ2xlIExMQy5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5pbXBvcnQge0RhdGFUeXBlfSBmcm9tICdAdGVuc29yZmxvdy90ZmpzLWNvcmUnO1xuXG5pbXBvcnQge2F0b21pY0FkZFNuaXBwZXR9IGZyb20gJy4vc2hhZGVyX3V0aWwnO1xuaW1wb3J0IHtnZXRNYWluSGVhZGVyU3RyaW5nIGFzIG1haW4sIFdlYkdQVVByb2dyYW19IGZyb20gJy4vd2ViZ3B1X3Byb2dyYW0nO1xuaW1wb3J0IHtjb21wdXRlRGlzcGF0Y2gsIGZsYXREaXNwYXRjaExheW91dH0gZnJvbSAnLi93ZWJncHVfdXRpbCc7XG5cbmV4cG9ydCBjbGFzcyBVbnNvcnRlZFNlZ21lbnRTdW1Qcm9ncmFtIGltcGxlbWVudHMgV2ViR1BVUHJvZ3JhbSB7XG4gIG91dHB1dFNoYXBlOiBudW1iZXJbXSA9IFtdO1xuICBzaGFkZXJLZXk6IHN0cmluZztcbiAgZGlzcGF0Y2hMYXlvdXQ6IHt4OiBudW1iZXJbXX07XG4gIGRpc3BhdGNoOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl07XG4gIHZhcmlhYmxlTmFtZXMgPSBbJ3gnLCAnc2VnbWVudElkcyddO1xuICB1bmlmb3JtcyA9ICdudW1TZWdtZW50cyA6IGkzMiwgeFNpemU6IGkzMiwnO1xuICB3b3JrZ3JvdXBTaXplOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl0gPSBbNjQsIDEsIDFdO1xuICBhdG9taWMgPSB0cnVlO1xuICB0eXBlOiBEYXRhVHlwZTtcblxuICBjb25zdHJ1Y3RvcihpblNoYXBlOiBudW1iZXJbXSwgb3V0U2hhcGU6IG51bWJlcltdLCBvdXRwdXREdHlwZTogRGF0YVR5cGUpIHtcbiAgICB0aGlzLm91dHB1dFNoYXBlID0gb3V0U2hhcGU7XG4gICAgdGhpcy5kaXNwYXRjaExheW91dCA9IGZsYXREaXNwYXRjaExheW91dChpblNoYXBlKTtcbiAgICB0aGlzLmRpc3BhdGNoID1cbiAgICAgICAgY29tcHV0ZURpc3BhdGNoKHRoaXMuZGlzcGF0Y2hMYXlvdXQsIGluU2hhcGUsIHRoaXMud29ya2dyb3VwU2l6ZSk7XG4gICAgaWYgKG91dHB1dER0eXBlICE9PSAnZmxvYXQzMicgJiYgb3V0cHV0RHR5cGUgIT09ICdpbnQzMicpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVW5zb3J0ZWRTZWdtZW50U3VtIG9ubHkgc3VwcG9ydHMgZmxvYXQzMiBhbmQgaW50MzJcbiAgICAgICAgICAgICAgdHlwZXMsIGRvZXMgbm90IHN1cHBvcnQgJHtvdXRwdXREdHlwZX0gdHlwZS5gKTtcbiAgICB9XG4gICAgdGhpcy50eXBlID0gb3V0cHV0RHR5cGU7XG4gICAgdGhpcy5zaGFkZXJLZXkgPSAndW5zb3J0ZWRTZWdtZW50U3VtJztcbiAgfVxuXG4gIGdldFVzZXJDb2RlKCk6IHN0cmluZyB7XG4gICAgY29uc3QgdXNlckNvZGUgPSBgXG4gICAgJHttYWluKCdpbmRleCcpfSB7XG4gICAgICBpZiAoaW5kZXggPCB1bmlmb3Jtcy54U2l6ZSkge1xuICAgICAgICBsZXQgY29vcmRzID0gZ2V0WENvb3Jkc0Zyb21JbmRleChpbmRleCk7XG4gICAgICAgIGxldCBiID0gY29vcmRzWzBdO1xuICAgICAgICBsZXQgaW5Db2wgPSBjb29yZHNbMV07XG5cbiAgICAgICAgbGV0IHNlZ21lbnRJZCA9IGkzMihnZXRTZWdtZW50SWRzKGluQ29sKSk7XG4gICAgICAgIGlmIChzZWdtZW50SWQgPj0gMCkge1xuICAgICAgICAgIGxldCBmbGF0SW5kZXggPSBiICogdW5pZm9ybXMubnVtU2VnbWVudHMgKyBzZWdtZW50SWQgJSB1bmlmb3Jtcy5udW1TZWdtZW50cztcbiAgICAgICAgICBsZXQgdmFsdWUgPSBnZXRYKGIsIGluQ29sKTtcblxuICAgICAgICAgICR7XG4gICAgICAgIGF0b21pY0FkZFNuaXBwZXQoXG4gICAgICAgICAgICAnJnJlc3VsdFtmbGF0SW5kZXhdJywgJ3ZhbHVlJywgdGhpcy50eXBlIGFzICdmbG9hdDMyJyB8ICdpbnQzMicpfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICBgO1xuICAgIHJldHVybiB1c2VyQ29kZTtcbiAgfVxufVxuIl19","/**\n * @license\n * Copyright 2023 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { backend_util, UnsortedSegmentSum, util } from '@tensorflow/tfjs-core';\nimport { UnsortedSegmentSumProgram } from '../unsorted_segment_sum_webgpu';\nimport { fill } from './Fill';\nimport { reshape } from './Reshape';\nimport { transpose } from './Transpose';\nexport function unsortedSegmentSum(args) {\n    const { inputs, backend, attrs } = args;\n    const { x, segmentIds } = inputs;\n    const { numSegments } = attrs;\n    const xRank = x.shape.length;\n    const toDispose = [];\n    let axis = 0;\n    const permutation = backend_util.getAxesPermutation([axis], xRank);\n    let permutedX = x;\n    if (permutation != null) {\n        permutedX = transpose({ inputs: { x }, backend, attrs: { perm: permutation } });\n        toDispose.push(permutedX);\n        axis = backend_util.getInnerMostAxes(1, xRank)[0];\n    }\n    const outShape = backend_util.segment_util.computeOutShape(permutedX.shape, axis, numSegments);\n    const inSize = util.sizeFromShape([permutedX.shape[axis]]);\n    const a2D = reshape({ inputs: { x: permutedX }, backend, attrs: { shape: [-1, inSize] } });\n    toDispose.push(a2D);\n    const dtype = x.dtype;\n    const shape = [a2D.shape[0], numSegments];\n    const output = fill({ backend, attrs: { shape, value: 0, dtype } });\n    const program = new UnsortedSegmentSumProgram(a2D.shape, shape, dtype);\n    const uniformData = [\n        { type: 'int32', data: [numSegments] },\n        { type: 'int32', data: [util.sizeFromShape(a2D.shape)] }\n    ];\n    const segResult = backend.runWebGPUProgram(program, [a2D, segmentIds], dtype, uniformData, output);\n    const reshaped = reshape({ inputs: { x: segResult }, backend, attrs: { shape: outShape } });\n    toDispose.push(segResult);\n    let result = reshaped;\n    if (permutation != null) {\n        toDispose.push(reshaped);\n        const perm = backend_util.getUndoAxesPermutation(permutation);\n        result = transpose({ inputs: { x: result }, backend, attrs: { perm } });\n    }\n    toDispose.forEach(t => backend.disposeData(t.dataId));\n    return result;\n}\nexport const unsortedSegmentSumConfig = {\n    kernelName: UnsortedSegmentSum,\n    backendName: 'webgpu',\n    kernelFunc: unsortedSegmentSum\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVW5zb3J0ZWRTZWdtZW50U3VtLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vdGZqcy1iYWNrZW5kLXdlYmdwdS9zcmMva2VybmVscy9VbnNvcnRlZFNlZ21lbnRTdW0udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7OztHQWVHO0FBRUgsT0FBTyxFQUFDLFlBQVksRUFBd0Msa0JBQWtCLEVBQXFELElBQUksRUFBQyxNQUFNLHVCQUF1QixDQUFDO0FBR3RLLE9BQU8sRUFBQyx5QkFBeUIsRUFBQyxNQUFNLGdDQUFnQyxDQUFDO0FBRXpFLE9BQU8sRUFBQyxJQUFJLEVBQUMsTUFBTSxRQUFRLENBQUM7QUFDNUIsT0FBTyxFQUFDLE9BQU8sRUFBQyxNQUFNLFdBQVcsQ0FBQztBQUNsQyxPQUFPLEVBQUMsU0FBUyxFQUFDLE1BQU0sYUFBYSxDQUFDO0FBRXRDLE1BQU0sVUFBVSxrQkFBa0IsQ0FBQyxJQUlsQztJQUNDLE1BQU0sRUFBQyxNQUFNLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBQyxHQUFHLElBQUksQ0FBQztJQUN0QyxNQUFNLEVBQUMsQ0FBQyxFQUFFLFVBQVUsRUFBQyxHQUFHLE1BQU0sQ0FBQztJQUMvQixNQUFNLEVBQUMsV0FBVyxFQUFDLEdBQUcsS0FBSyxDQUFDO0lBRTVCLE1BQU0sS0FBSyxHQUFHLENBQUMsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDO0lBRTdCLE1BQU0sU0FBUyxHQUFHLEVBQUUsQ0FBQztJQUVyQixJQUFJLElBQUksR0FBRyxDQUFDLENBQUM7SUFDYixNQUFNLFdBQVcsR0FBRyxZQUFZLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQztJQUNuRSxJQUFJLFNBQVMsR0FBRyxDQUFDLENBQUM7SUFDbEIsSUFBSSxXQUFXLElBQUksSUFBSSxFQUFFO1FBQ3ZCLFNBQVMsR0FBRyxTQUFTLENBQUMsRUFBQyxNQUFN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QUFDO0FBQ2hCLENBQUM7QUFFRCxNQUFNLENBQUMsTUFBTSx3QkFBd0IsR0FBaUI7SUFDcEQsVUFBVSxFQUFFLGtCQUFrQjtJQUM5QixXQUFXLEVBQUUsUUFBUTtJQUNyQixVQUFVLEVBQUUsa0JBQTJDO0NBQ3hELENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMyBHb29nbGUgTExDLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5cbmltcG9ydCB7YmFja2VuZF91dGlsLCBLZXJuZWxDb25maWcsIEtlcm5lbEZ1bmMsIFRlbnNvckluZm8sIFVuc29ydGVkU2VnbWVudFN1bSwgVW5zb3J0ZWRTZWdtZW50U3VtQXR0cnMsIFVuc29ydGVkU2VnbWVudFN1bUlucHV0cywgdXRpbH0gZnJvbSAnQHRlbnNvcmZsb3cvdGZqcy1jb3JlJztcblxuaW1wb3J0IHtXZWJHUFVCYWNrZW5kfSBmcm9tICcuLi9iYWNrZW5kX3dlYmdwdSc7XG5pbXBvcnQge1Vuc29ydGVkU2VnbWVudFN1bVByb2dyYW19IGZyb20gJy4uL3Vuc29ydGVkX3NlZ21lbnRfc3VtX3dlYmdwdSc7XG5cbmltcG9ydCB7ZmlsbH0gZnJvbSAnLi9GaWxsJztcbmltcG9ydCB7cmVzaGFwZX0gZnJvbSAnLi9SZXNoYXBlJztcbmltcG9ydCB7dHJhbnNwb3NlfSBmcm9tICcuL1RyYW5zcG9zZSc7XG5cbmV4cG9ydCBmdW5jdGlvbiB1bnNvcnRlZFNlZ21lbnRTdW0oYXJnczoge1xuICBpbnB1dHM6IFVuc29ydGVkU2VnbWVudFN1bUlucHV0cyxcbiAgYmFja2VuZDogV2ViR1BVQmFja2VuZCxcbiAgYXR0cnM6IFVuc29ydGVkU2VnbWVudFN1bUF0dHJzXG59KTogVGVuc29ySW5mbyB7XG4gIGNvbnN0IHtpbnB1dHMsIGJhY2tlbmQsIGF0dHJzfSA9IGFyZ3M7XG4gIGNvbnN0IHt4LCBzZWdtZW50SWRzfSA9IGlucHV0cztcbiAgY29uc3Qge251bVNlZ21lbnRzfSA9IGF0dHJzO1xuXG4gIGNvbnN0IHhSYW5rID0geC5zaGFwZS5sZW5ndGg7XG5cbiAgY29uc3QgdG9EaXNwb3NlID0gW107XG5cbiAgbGV0IGF4aXMgPSAwO1xuICBjb25zdCBwZXJtdXRhdGlvbiA9IGJhY2tlbmRfdXRpbC5nZXRBeGVzUGVybXV0YXRpb24oW2F4aXNdLCB4UmFuayk7XG4gIGxldCBwZXJtdXRlZFggPSB4O1xuICBpZiAocGVybXV0YXRpb24gIT0gbnVsbCkge1xuICAgIHBlcm11dGVkWCA9IHRyYW5zcG9zZSh7aW5wdXRzOiB7eH0sIGJhY2tlbmQsIGF0dHJzOiB7cGVybTogcGVybXV0YXRpb259fSk7XG4gICAgdG9EaXNwb3NlLnB1c2gocGVybXV0ZWRYKTtcbiAgICBheGlzID0gYmFja2VuZF91dGlsLmdldElubmVyTW9zdEF4ZXMoMSwgeFJhbmspWzBdO1xuICB9XG5cbiAgY29uc3Qgb3V0U2hhcGUgPSBiYWNrZW5kX3V0aWwuc2VnbWVudF91dGlsLmNvbXB1dGVPdXRTaGFwZShcbiAgICAgIHBlcm11dGVkWC5zaGFwZSwgYXhpcywgbnVtU2VnbWVudHMpO1xuICBjb25zdCBpblNpemUgPSB1dGlsLnNpemVGcm9tU2hhcGUoW3Blcm11dGVkWC5zaGFwZVtheGlzXV0pO1xuICBjb25zdCBhMkQgPVxuICAgICAgcmVzaGFwZSh7aW5wdXRzOiB7eDogcGVybXV0ZWRYfSwgYmFja2VuZCwgYXR0cnM6IHtzaGFwZTogWy0xLCBpblNpemVdfX0pO1xuICB0b0Rpc3Bvc2UucHVzaChhMkQpO1xuXG4gIGNvbnN0IGR0eXBlID0geC5kdHlwZTtcbiAgY29uc3Qgc2hhcGUgPSBbYTJELnNoYXBlWzBdLCBudW1TZWdtZW50c107XG4gIGNvbnN0IG91dHB1dCA9IGZpbGwoe2JhY2tlbmQsIGF0dHJzOiB7c2hhcGUsIHZhbHVlOiAwLCBkdHlwZX19KTtcbiAgY29uc3QgcHJvZ3JhbSA9IG5ldyBVbnNvcnRlZFNlZ21lbnRTdW1Qcm9ncmFtKGEyRC5zaGFwZSwgc2hhcGUsIGR0eXBlKTtcbiAgY29uc3QgdW5pZm9ybURhdGEgPSBbXG4gICAge3R5cGU6ICdpbnQzMicsIGRhdGE6IFtudW1TZWdtZW50c119LFxuICAgIHt0eXBlOiAnaW50MzInLCBkYXRhOiBbdXRpbC5zaXplRnJvbVNoYXBlKGEyRC5zaGFwZSldfVxuICBdO1xuICBjb25zdCBzZWdSZXN1bHQgPSBiYWNrZW5kLnJ1bldlYkdQVVByb2dyYW0oXG4gICAgICBwcm9ncmFtLCBbYTJELCBzZWdtZW50SWRzXSwgZHR5cGUsIHVuaWZvcm1EYXRhLCBvdXRwdXQpO1xuXG4gIGNvbnN0IHJlc2hhcGVkID1cbiAgICAgIHJlc2hhcGUoe2lucHV0czoge3g6IHNlZ1Jlc3VsdH0sIGJhY2tlbmQsIGF0dHJzOiB7c2hhcGU6IG91dFNoYXBlfX0pO1xuICB0b0Rpc3Bvc2UucHVzaChzZWdSZXN1bHQpO1xuICBsZXQgcmVzdWx0ID0gcmVzaGFwZWQ7XG4gIGlmIChwZXJtdXRhdGlvbiAhPSBudWxsKSB7XG4gICAgdG9EaXNwb3NlLnB1c2gocmVzaGFwZWQpO1xuICAgIGNvbnN0IHBlcm0gPSBiYWNrZW5kX3V0aWwuZ2V0VW5kb0F4ZXNQZXJtdXRhdGlvbihwZXJtdXRhdGlvbik7XG4gICAgcmVzdWx0ID0gdHJhbnNwb3NlKHtpbnB1dHM6IHt4OiByZXN1bHR9LCBiYWNrZW5kLCBhdHRyczoge3Blcm19fSk7XG4gIH1cblxuICB0b0Rpc3Bvc2UuZm9yRWFjaCh0ID0+IGJhY2tlbmQuZGlzcG9zZURhdGEodC5kYXRhSWQpKTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZXhwb3J0IGNvbnN0IHVuc29ydGVkU2VnbWVudFN1bUNvbmZpZzogS2VybmVsQ29uZmlnID0ge1xuICBrZXJuZWxOYW1lOiBVbnNvcnRlZFNlZ21lbnRTdW0sXG4gIGJhY2tlbmROYW1lOiAnd2ViZ3B1JyxcbiAga2VybmVsRnVuYzogdW5zb3J0ZWRTZWdtZW50U3VtIGFzIHVua25vd24gYXMgS2VybmVsRnVuY1xufTtcbiJdfQ==","/**\n * @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { registerKernel } from '@tensorflow/tfjs-core';\nimport { _fusedMatMulConfig } from './kernels/_FusedMatMul';\nimport { absConfig } from './kernels/Abs';\nimport { acosConfig } from './kernels/Acos';\nimport { acoshConfig } from './kernels/Acosh';\nimport { addConfig } from './kernels/Add';\nimport { addNConfig } from './kernels/AddN';\nimport { allConfig } from './kernels/All';\nimport { anyConfig } from './kernels/Any';\nimport { argMaxConfig } from './kernels/ArgMax';\nimport { argMinConfig } from './kernels/ArgMin';\nimport { asinConfig } from './kernels/Asin';\nimport { asinhConfig } from './kernels/Asinh';\nimport { atanConfig } from './kernels/Atan';\nimport { atan2Config } from './kernels/Atan2';\nimport { atanhConfig } from './kernels/Atanh';\nimport { avgPoolConfig } from './kernels/AvgPool';\nimport { avgPool3DConfig } from './kernels/AvgPool3D';\nimport { avgPool3DGradConfig } from './kernels/AvgPool3DGrad';\nimport { avgPoolGradConfig } from './kernels/AvgPoolGrad';\nimport { batchMatMulConfig } from './kernels/BatchMatMul';\nimport { batchToSpaceNDConfig } from './kernels/BatchToSpaceND';\nimport { bincountConfig } from './kernels/Bincount';\nimport { broadcastArgsConfig } from './kernels/BroadcastArgs';\nimport { castConfig } from './kernels/Cast';\nimport { ceilConfig } from './kernels/Ceil';\nimport { clipByValueConfig } from './kernels/ClipByValue';\nimport { complexConfig } from './kernels/Complex';\nimport { complexAbsConfig } from './kernels/ComplexAbs';\nimport { concatConfig } from './kernels/Concat';\nimport { conv2DConfig } from './kernels/Conv2D';\nimport { conv2DBackpropFilterConfig } from './kernels/Conv2DBackpropFilter';\nimport { conv2DBackpropInputConfig } from './kernels/Conv2DBackpropInput';\nimport { conv3DConfig } from './kernels/Conv3D';\nimport { conv3DBackpropFilterV2Config } from './kernels/Conv3DBackpropFilterV2';\nimport { conv3DBackpropInputV2Config } from './kernels/Conv3DBackpropInputV2';\nimport { cosConfig } from './kernels/Cos';\nimport { coshConfig } from './kernels/Cosh';\nimport { cropAndResizeConfig } from './kernels/CropAndResize';\nimport { cumprodConfig } from './kernels/Cumprod';\nimport { cumsumConfig } from './kernels/Cumsum';\nimport { denseBincountConfig } from './kernels/DenseBincount';\nimport { depthToSpaceConfig } from './kernels/DepthToSpace';\nimport { depthwiseConv2dNativeConfig } from './kernels/DepthwiseConv2dNative';\nimport { depthwiseConv2dNativeBackpropFilterConfig } from './kernels/DepthwiseConv2dNativeBackpropFilter';\nimport { depthwiseConv2dNativeBackpropInputConfig } from './kernels/DepthwiseConv2dNativeBackpropInput';\nimport { diagConfig } from './kernels/Diag';\nimport { dilation2DConfig } from './kernels/Dilation2D';\nimport { dilation2DBackpropFilterConfig } from './kernels/Dilation2DBackpropFilter';\nimport { dilation2DBackpropInputConfig } from './kernels/Dilation2DBackpropInput';\nimport { drawConfig } from './kernels/Draw';\nimport { einsumConfig } from './kernels/Einsum';\nimport { eluConfig } from './kernels/Elu';\nimport { eluGradConfig } from './kernels/EluGrad';\nimport { equalConfig } from './kernels/Equal';\nimport { erfConfig } from './kernels/Erf';\nimport { expConfig } from './kernels/Exp';\nimport { expandDimsConfig } from './kernels/ExpandDims';\nimport { expm1Config } from './kernels/Expm1';\nimport { fftConfig } from './kernels/FFT';\nimport { fillConfig } from './kernels/Fill';\nimport { flipLeftRightConfig } from './kernels/FlipLeftRight';\nimport { floorConfig } from './kernels/Floor';\nimport { floorDivConfig } from './kernels/FloorDiv';\nimport { fromPixelsConfig } from './kernels/FromPixels';\nimport { fusedBatchNormConfig } from './kernels/FusedBatchNorm';\nimport { fusedConv2DConfig } from './kernels/FusedConv2D';\nimport { fusedDepthwiseConv2DConfig } from './kernels/FusedDepthwiseConv2D';\nimport { gatherNdConfig } from './kernels/GatherNd';\nimport { gatherV2Config } from './kernels/GatherV2';\nimport { greaterConfig } from './kernels/Greater';\nimport { greaterEqualConfig } from './kernels/GreaterEqual';\nimport { identityConfig } from './kernels/Identity';\nimport { ifftConfig } from './kernels/IFFT';\nimport { imagConfig } from './kernels/Imag';\nimport { isFiniteConfig } from './kernels/IsFinite';\nimport { isInfConfig } from './kernels/IsInf';\nimport { isNaNConfig } from './kernels/IsNaN';\nimport { leakyReluConfig } from './kernels/LeakyRelu';\nimport { lessConfig } from './kernels/Less';\nimport { lessEqualConfig } from './kernels/LessEqual';\nimport { linSpaceConfig } from './kernels/LinSpace';\nimport { logConfig } from './kernels/Log';\nimport { log1pConfig } from './kernels/Log1p';\nimport { logicalAndConfig } from './kernels/LogicalAnd';\nimport { logicalNotConfig } from './kernels/LogicalNot';\nimport { logicalOrConfig } from './kernels/LogicalOr';\nimport { lrnConfig } from './kernels/LRN';\nimport { lrnGradConfig } from './kernels/LRNGrad';\nimport { maxConfig } from './kernels/Max';\nimport { maximumConfig } from './kernels/Maximum';\nimport { maxPoolConfig } from './kernels/MaxPool';\nimport { maxPool3DConfig } from './kernels/MaxPool3D';\nimport { maxPool3DGradConfig } from './kernels/MaxPool3DGrad';\nimport { maxPoolGradConfig } from './kernels/MaxPoolGrad';\nimport { maxPoolWithArgmaxConfig } from './kernels/MaxPoolWithArgmax';\nimport { meanConfig } from './kernels/Mean';\nimport { minConfig } from './kernels/Min';\nimport { minimumConfig } from './kernels/Minimum';\nimport { mirrorPadConfig } from './kernels/MirrorPad';\nimport { modConfig } from './kernels/Mod';\nimport { multinomialConfig } from './kernels/Multinomial';\nimport { multiplyConfig } from './kernels/Multiply';\nimport { negConfig } from './kernels/Neg';\nimport { nonMaxSuppressionV3Config } from './kernels/NonMaxSuppressionV3';\nimport { nonMaxSuppressionV5Config } from './kernels/NonMaxSuppressionV5';\nimport { notEqualConfig } from './kernels/NotEqual';\nimport { oneHotConfig } from './kernels/OneHot';\nimport { onesLikeConfig } from './kernels/OnesLike';\nimport { packConfig } from './kernels/Pack';\nimport { padV2Config } from './kernels/PadV2';\nimport { powConfig } from './kernels/Pow';\nimport { preluConfig } from './kernels/Prelu';\nimport { prodConfig } from './kernels/Prod';\nimport { rangeConfig } from './kernels/Range';\nimport { realConfig } from './kernels/Real';\nimport { realDivConfig } from './kernels/RealDiv';\nimport { reciprocalConfig } from './kernels/Reciprocal';\nimport { reluConfig } from './kernels/Relu';\nimport { relu6Config } from './kernels/Relu6';\nimport { reshapeConfig } from './kernels/Reshape';\nimport { resizeBilinearConfig } from './kernels/ResizeBilinear';\nimport { resizeBilinearGradConfig } from './kernels/ResizeBilinearGrad';\nimport { resizeNearestNeighborConfig } from './kernels/ResizeNearestNeighbor';\nimport { resizeNearestNeighborGradConfig } from './kernels/ResizeNearestNeighborGrad';\nimport { reverseConfig } from './kernels/Reverse';\nimport { rotateWithOffsetConfig } from './kernels/RotateWithOffset';\nimport { roundConfig } from './kernels/Round';\nimport { rsqrtConfig } from './kernels/Rsqrt';\nimport { scatterNdConfig } from './kernels/ScatterNd';\nimport { searchSortedConfig } from './kernels/SearchSorted';\nimport { selectConfig } from './kernels/Select';\nimport { seluConfig } from './kernels/Selu';\nimport { sigmoidConfig } from './kernels/Sigmoid';\nimport { signConfig } from './kernels/Sign';\nimport { sinConfig } from './kernels/Sin';\nimport { sinhConfig } from './kernels/Sinh';\nimport { sliceConfig } from './kernels/Slice';\nimport { softmaxConfig } from './kernels/Softmax';\nimport { softplusConfig } from './kernels/Softplus';\nimport { spaceToBatchNDConfig } from './kernels/SpaceToBatchND';\nimport { sparseSegmentMeanConfig } from './kernels/SparseSegmentMean';\nimport { sparseSegmentSumConfig } from './kernels/SparseSegmentSum';\nimport { sparseToDenseConfig } from './kernels/SparseToDense';\nimport { splitVConfig } from './kernels/SplitV';\nimport { sqrtConfig } from './kernels/Sqrt';\nimport { squareConfig } from './kernels/Square';\nimport { squaredDifferenceConfig } from './kernels/SquaredDifference';\nimport { stepConfig } from './kernels/Step';\nimport { stridedSliceConfig } from './kernels/StridedSlice';\nimport { stringNGramsConfig } from './kernels/StringNGrams';\nimport { subConfig } from './kernels/Sub';\nimport { sumConfig } from './kernels/Sum';\nimport { tanConfig } from './kernels/Tan';\nimport { tanhConfig } from './kernels/Tanh';\nimport { tensorScatterUpdateConfig } from './kernels/TensorScatterUpdate';\nimport { tileConfig } from './kernels/Tile';\nimport { topKConfig } from './kernels/TopK';\nimport { transformConfig } from './kernels/Transform';\nimport { transposeConfig } from './kernels/Transpose';\nimport { unpackConfig } from './kernels/Unpack';\nimport { unsortedSegmentSumConfig } from './kernels/UnsortedSegmentSum';\nimport { zerosLikeConfig } from './kernels/ZerosLike';\n// List all kernel configs here\nconst kernelConfigs = [\n    _fusedMatMulConfig,\n    absConfig,\n    acosConfig,\n    acoshConfig,\n    addConfig,\n    addNConfig,\n    allConfig,\n    anyConfig,\n    argMaxConfig,\n    argMinConfig,\n    asinConfig,\n    asinhConfig,\n    atanConfig,\n    atan2Config,\n    atanhConfig,\n    avgPoolConfig,\n    avgPool3DConfig,\n    avgPool3DGradConfig,\n    avgPoolGradConfig,\n    batchMatMulConfig,\n    batchToSpaceNDConfig,\n    bincountConfig,\n    broadcastArgsConfig,\n    castConfig,\n    ceilConfig,\n    clipByValueConfig,\n    complexConfig,\n    complexAbsConfig,\n    concatConfig,\n    conv2DConfig,\n    conv2DBackpropFilterConfig,\n    conv2DBackpropInputConfig,\n    conv3DConfig,\n    conv3DBackpropFilterV2Config,\n    conv3DBackpropInputV2Config,\n    cosConfig,\n    coshConfig,\n    cropAndResizeConfig,\n    cumprodConfig,\n    cumsumConfig,\n    denseBincountConfig,\n    depthToSpaceConfig,\n    depthwiseConv2dNativeBackpropFilterConfig,\n    depthwiseConv2dNativeBackpropInputConfig,\n    depthwiseConv2dNativeConfig,\n    diagConfig,\n    dilation2DConfig,\n    dilation2DBackpropFilterConfig,\n    dilation2DBackpropInputConfig,\n    drawConfig,\n    einsumConfig,\n    eluConfig,\n    eluGradConfig,\n    equalConfig,\n    erfConfig,\n    expConfig,\n    expandDimsConfig,\n    expm1Config,\n    fftConfig,\n    fillConfig,\n    flipLeftRightConfig,\n    fromPixelsConfig,\n    floorConfig,\n    floorDivConfig,\n    fusedBatchNormConfig,\n    fusedConv2DConfig,\n    fusedDepthwiseConv2DConfig,\n    gatherNdConfig,\n    gatherV2Config,\n    greaterConfig,\n    greaterEqualConfig,\n    identityConfig,\n    ifftConfig,\n    imagConfig,\n    isFiniteConfig,\n    isInfConfig,\n    isNaNConfig,\n    leakyReluConfig,\n    lessConfig,\n    lessEqualConfig,\n    linSpaceConfig,\n    log1pConfig,\n    logConfig,\n    logicalAndConfig,\n    logicalNotConfig,\n    logicalOrConfig,\n    lrnConfig,\n    lrnGradConfig,\n    maxConfig,\n    maximumConfig,\n    maxPoolConfig,\n    maxPoolGradConfig,\n    maxPool3DConfig,\n    maxPool3DGradConfig,\n    maxPoolWithArgmaxConfig,\n    meanConfig,\n    minConfig,\n    minimumConfig,\n    mirrorPadConfig,\n    modConfig,\n    multinomialConfig,\n    multiplyConfig,\n    negConfig,\n    nonMaxSuppressionV3Config,\n    nonMaxSuppressionV5Config,\n    notEqualConfig,\n    oneHotConfig,\n    onesLikeConfig,\n    packConfig,\n    padV2Config,\n    powConfig,\n    preluConfig,\n    prodConfig,\n    rangeConfig,\n    realConfig,\n    realDivConfig,\n    reciprocalConfig,\n    reluConfig,\n    relu6Config,\n    reshapeConfig,\n    resizeBilinearConfig,\n    resizeBilinearGradConfig,\n    resizeNearestNeighborConfig,\n    resizeNearestNeighborGradConfig,\n    reverseConfig,\n    rotateWithOffsetConfig,\n    roundConfig,\n    rsqrtConfig,\n    scatterNdConfig,\n    searchSortedConfig,\n    selectConfig,\n    seluConfig,\n    sigmoidConfig,\n    signConfig,\n    sinConfig,\n    sinhConfig,\n    sliceConfig,\n    stepConfig,\n    stridedSliceConfig,\n    stringNGramsConfig,\n    softmaxConfig,\n    softplusConfig,\n    spaceToBatchNDConfig,\n    sparseSegmentMeanConfig,\n    sparseSegmentSumConfig,\n    sparseToDenseConfig,\n    splitVConfig,\n    sqrtConfig,\n    squareConfig,\n    squaredDifferenceConfig,\n    subConfig,\n    sumConfig,\n    tanConfig,\n    tanhConfig,\n    tensorScatterUpdateConfig,\n    tileConfig,\n    topKConfig,\n    transformConfig,\n    transposeConfig,\n    unpackConfig,\n    unsortedSegmentSumConfig,\n    zerosLikeConfig\n];\nfor (const kernelConfig of kernelConfigs) {\n    registerKernel(kernelConfig);\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVnaXN0ZXJfYWxsX2tlcm5lbHMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9yZWdpc3Rlcl9hbGxfa2VybmVscy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFDSCxPQUFPLEVBQWUsY0FBYyxFQUFDLE1BQU0sdUJBQXVCLENBQUM7QUFFbkUsT0FBTyxFQUFDLGtCQUFrQixFQUFDLE1BQU0sd0JBQXdCLENBQUM7QUFDMUQsT0FBTyxFQUFDLFNBQVMsRUFBQyxNQUFNLGVBQWUsQ0FBQztBQUN4QyxPQUFPLEVBQUMsVUFBVSxFQUFDLE1BQU0sZ0JBQWdCLENBQUM7QUFDMUMsT0FBTyxFQUFDLFdBQVcsRUFBQyxNQUFNLGlCQUFpQixDQUFDO0FBQzVDLE9BQU8sRUFBQyxTQUFTLEVBQUMsTUFBTSxlQUFlLENBQUM7QUFDeEMsT0FBTyxFQUFDLFVBQVUsRUFBQyxNQUFNLGdCQUFnQixDQUFDO0FBQzFDLE9BQU8sRUFBQyxTQUFTLEVBQUMsTUFBTSxlQUFlLENBQUM7QUFDeEMsT0FBTyxFQUFDLFNBQVMsRUFBQyxNQUFNLGVBQWUsQ0FBQztBQUN4QyxPQUFPLEVBQUMsWUFBWSxFQUFDLE1BQU0sa0JBQWtCLENBQUM7QUFDOUMsT0FBTyxFQUFDLFlBQVksRUFBQyxNQUFNLGtCQUFrQixDQUFDO0FBQzlDLE9BQU8sRUFBQyxVQUFVLEVBQUMsTUFBTSxnQkFBZ0IsQ0FBQztBQUMxQyxPQUFPLEVBQUMsV0FBVyxFQUFDLE1BQU0saUJBQWlCLENBQUM7QUFDNUMsT0FBTyxFQUFDLFVBQVUsRUFBQyxNQUFNLGdCQUFnQixDQUFDO0FBQzFDLE9BQU8sRUFBQyxXQUFXLEVBQUMsTUFBTSxpQkFBaUIsQ0FBQztBQUM1QyxPQUFPLEVBQUMsV0FBVyxFQUFDLE1BQU0saUJBQWlCLENBQUM7QUFDNUMsT0FBTyxFQUFDLGFBQWEsRUFBQyxNQUFNLG1C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QixVQUFVO0lBQ1YsVUFBVTtJQUNWLGVBQWU7SUFDZixlQUFlO0lBQ2YsWUFBWTtJQUNaLHdCQUF3QjtJQUN4QixlQUFlO0NBQ2hCLENBQUM7QUFFRixLQUFLLE1BQU0sWUFBWSxJQUFJLGFBQWEsRUFBRTtJQUN4QyxjQUFjLENBQUMsWUFBWSxDQUFDLENBQUM7Q0FDOUIiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovXG5pbXBvcnQge0tlcm5lbENvbmZpZywgcmVnaXN0ZXJLZXJuZWx9IGZyb20gJ0B0ZW5zb3JmbG93L3RmanMtY29yZSc7XG5cbmltcG9ydCB7X2Z1c2VkTWF0TXVsQ29uZmlnfSBmcm9tICcuL2tlcm5lbHMvX0Z1c2VkTWF0TXVsJztcbmltcG9ydCB7YWJzQ29uZmlnfSBmcm9tICcuL2tlcm5lbHMvQWJzJztcbmltcG9ydCB7YWNvc0NvbmZpZ30gZnJvbSAnLi9rZXJuZWxzL0Fjb3MnO1xuaW1wb3J0IHthY29zaENvbmZpZ30gZnJvbSAnLi9rZXJuZWxzL0Fjb3NoJztcbmltcG9ydCB7YWRkQ29uZmlnfSBmcm9tICcuL2tlcm5lbHMvQWRkJztcbmltcG9ydCB7YWRkTkNvbmZpZ30gZnJvbSAnLi9rZXJuZWxzL0FkZE4nO1xuaW1wb3J0IHthbGxDb25maWd9IGZyb20gJy4va2VybmVscy9BbGwnO1xuaW1wb3J0IHthbnlDb25maWd9IGZyb20gJy4va2VybmVscy9BbnknO1xuaW1wb3J0IHthcmdNYXhDb25maWd9IGZyb20gJy4va2VybmVscy9BcmdNYXgnO1xuaW1wb3J0IHthcmdNaW5Db25maWd9IGZyb20gJy4va2VybmVscy9BcmdNaW4nO1xuaW1wb3J0IHthc2luQ29uZmlnfSBmcm9tICcuL2tlcm5lbHMvQXNpbic7XG5pbXBvcnQge2FzaW5oQ29uZmlnfSBmcm9tICcuL2tlcm5lbHMvQXNpbmgnO1xuaW1wb3J0IHthdGFuQ29uZmlnfSBmcm9tICcuL2tlcm5lbHMvQXRhbic7XG5pbXBvcnQge2F0YW4yQ29uZmlnfSBmcm9tICcuL2tlcm5lbHMvQXRhbjInO1xuaW1wb3J0IHthdGFuaENvbmZpZ30gZnJvbSAnLi9rZXJuZWxzL0F0YW5oJztcbmltcG9ydCB7YXZnUG9vbENvbmZpZ30gZnJvbSAnLi9rZXJuZWxzL0F2Z1Bvb2wnO1xuaW1wb3J0IHthdmdQb29sM0RDb25maWd9IGZyb20gJy4va2VybmVscy9BdmdQb29sM0QnO1xuaW1wb3J0IHthdmdQb29sM0RHcmFkQ29uZmlnfSBmcm9tICcuL2tlcm5lbHMvQXZnUG9vbDNER3JhZCc7XG5pbXBvcnQge2F2Z1Bvb2xHcmFkQ29uZmlnfSBmcm9tICcuL2tlcm5lbHMvQXZnUG9vbEdyYWQnO1xuaW1wb3J0IHtiYXRjaE1hdE11bENvbmZpZ30gZnJvbSAnLi9rZXJuZWxzL0JhdGNoTWF0TXVsJztcbmltcG9ydCB7YmF0Y2hUb1NwYWNlTkRDb25maWd9IGZyb20gJy4va2VybmVscy9CYXRjaFRvU3BhY2VORCc7XG5pbXBvcnQge2JpbmNvdW50Q29uZmlnfSBmcm9tICcuL2tlcm5lbHMvQmluY291bnQnO1xuaW1wb3J0IHticm9hZGNhc3RBcmdzQ29uZmlnfSBmcm9tICcuL2tlcm5lbHMvQnJvYWRjYXN0QXJncyc7XG5pbXBvcnQge2Nhc3RDb25maWd9IGZyb20gJy4va2VybmVscy9DYXN0JztcbmltcG9ydCB7Y2VpbENvbmZpZ30gZnJvbSAnLi9rZXJuZWxzL0NlaWwnO1xuaW1wb3J0IHtjbGlwQnlWYWx1ZUNvbmZpZ30gZnJvbSAnLi9rZXJuZWxzL0NsaXBCeVZhbHVlJztcbmltcG9ydCB7Y29tcGxleENvbmZpZ30gZnJvbSAnLi9rZXJuZWxzL0NvbXBsZXgnO1xuaW1wb3J0IHtjb21wbGV4QWJzQ29uZmlnfSBmcm9tICcuL2tlcm5lbHMvQ29tcGxleEFicyc7XG5pbXBvcnQge2NvbmNhdENvbmZpZ30gZnJvbSAnLi9rZXJuZWxzL0NvbmNhdCc7XG5pbXBvcnQge2NvbnYyRENvbmZpZ30gZnJvbSAnLi9rZXJuZWxzL0NvbnYyRCc7XG5pbXBvcnQge2NvbnYyREJhY2twcm9wRmlsdGVyQ29uZmlnfSBmcm9tICcuL2tlcm5lbHMvQ29udjJEQmFja3Byb3BGaWx0ZXInO1xuaW1wb3J0IHtjb252MkRCYWNrcHJvcElucHV0Q29uZmlnfSBmcm9tICcuL2tlcm5lbHMvQ29udjJEQmFja3Byb3BJbnB1dCc7XG5pbXBvcnQge2NvbnYzRENvbmZpZ30gZnJvbSAnLi9rZXJuZWxzL0NvbnYzRCc7XG5pbXBvcnQge2NvbnYzREJhY2twcm9wRmlsdGVyVjJDb25maWd9IGZyb20gJy4va2VybmVscy9Db252M0RCYWNrcHJvcEZpbHRlclYyJztcbmltcG9ydCB7Y29udjNEQmFja3Byb3BJbnB1dFYyQ29uZmlnfSBmcm9tICcuL2tlcm5lbHMvQ29udjNEQmFja3Byb3BJbnB1dFYyJztcbmltcG9ydCB7Y29zQ29uZmlnfSBmcm9tICcuL2tlcm5lbHMvQ29zJztcbmltcG9ydCB7Y29zaENvbmZpZ30gZnJvbSAnLi9rZXJuZWxzL0Nvc2gnO1xuaW1wb3J0IHtjcm9wQW5kUmVzaXplQ29uZmlnfSBmcm9tICcuL2tlcm5lbHMvQ3JvcEFuZFJlc2l6ZSc7XG5pbXBvcnQge2N1bXByb2RDb25maWd9IGZyb20gJy4va2VybmVscy9DdW1wcm9kJztcbmltcG9ydCB7Y3Vtc3VtQ29uZmlnfSBmcm9tICcuL2tlcm5lbHMvQ3Vtc3VtJztcbmltcG9ydCB7ZGVuc2VCaW5jb3VudENvbmZpZ30gZnJvbSAnLi9rZXJuZWxzL0RlbnNlQmluY291bnQnO1xuaW1wb3J0IHtkZXB0aFRvU3BhY2VDb25maWd9IGZyb20gJy4va2VybmVscy9EZXB0aFRvU3BhY2UnO1xuaW1wb3J0IHtkZXB0aHdpc2VDb252MmROYXRpdmVDb25maWd9IGZyb20gJy4va2VybmVscy9EZXB0aHdpc2VDb252MmROYXRpdmUnO1xuaW1wb3J0IHtkZXB0aHdpc2VDb252MmROYXRpdmVCYWNrcHJvcEZpbHRlckNvbmZpZ30gZnJvbSAnLi9rZXJuZWxzL0RlcHRod2lzZUNvbnYyZE5hdGl2ZUJhY2twcm9wRmlsdGVyJztcbmltcG9ydCB7ZGVwdGh3aXNlQ29udjJkTmF0aXZlQmFja3Byb3BJbnB1dENvbmZpZ30gZnJvbSAnLi9rZXJuZWxzL0RlcHRod2lzZUNvbnYyZE5hdGl2ZUJhY2twcm9wSW5wdXQnO1xuaW1wb3J0IHtkaWFnQ29uZmlnfSBmcm9tICcuL2tlcm5lbHMvRGlhZyc7XG5pbXBvcnQge2RpbGF0aW9uMkRDb25maWd9IGZyb20gJy4va2VybmVscy9EaWxhdGlvbjJEJztcbmltcG9ydCB7ZGlsYXRpb24yREJhY2twcm9wRmlsdGVyQ29uZmlnfSBmcm9tICcuL2tlcm5lbHMvRGlsYXRpb24yREJhY2twcm9wRmlsdGVyJztcbmltcG9ydCB7ZGlsYXRpb24yREJhY2twcm9wSW5wdXRDb25maWd9IGZyb20gJy4va2VybmVscy9EaWxhdGlvbjJEQmFja3Byb3BJbnB1dCc7XG5pbXBvcnQge2RyYXdDb25maWd9IGZyb20gJy4va2VybmVscy9EcmF3JztcbmltcG9ydCB7ZWluc3VtQ29uZmlnfSBmcm9tICcuL2tlcm5lbHMvRWluc3VtJztcbmltcG9ydCB7ZWx1Q29uZmlnfSBmcm9tICcuL2tlcm5lbHMvRWx1JztcbmltcG9ydCB7ZWx1R3JhZENvbmZpZ30gZnJvbSAnLi9rZXJuZWxzL0VsdUdyYWQnO1xuaW1wb3J0IHtlcXVhbENvbmZpZ30gZnJvbSAnLi9rZXJuZWxzL0VxdWFsJztcbmltcG9ydCB7ZXJmQ29uZmlnfSBmcm9tICcuL2tlcm5lbHMvRXJmJztcbmltcG9ydCB7ZXhwQ29uZmlnfSBmcm9tICcuL2tlcm5lbHMvRXhwJztcbmltcG9ydCB7ZXhwYW5kRGltc0NvbmZpZ30gZnJvbSAnLi9rZXJuZWxzL0V4cGFuZERpbXMnO1xuaW1wb3J0IHtleHBtMUNvbmZpZ30gZnJvbSAnLi9rZXJuZWxzL0V4cG0xJztcbmltcG9ydCB7ZmZ0Q29uZmlnfSBmcm9tICcuL2tlcm5lbHMvRkZUJztcbmltcG9ydCB7ZmlsbENvbmZpZ30gZnJvbSAnLi9rZXJuZWxzL0ZpbGwnO1xuaW1wb3J0IHtmbGlwTGVmdFJpZ2h0Q29uZmlnfSBmcm9tICcuL2tlcm5lbHMvRmxpcExlZnRSaWdodCc7XG5pbXBvcnQge2Zsb29yQ29uZmlnfSBmcm9tICcuL2tlcm5lbHMvRmxvb3InO1xuaW1wb3J0IHtmbG9vckRpdkNvbmZpZ30gZnJvbSAnLi9rZXJuZWxzL0Zsb29yRGl2JztcbmltcG9ydCB7ZnJvbVBpeGVsc0NvbmZpZ30gZnJvbSAnLi9rZXJuZWxzL0Zyb21QaXhlbHMnO1xuaW1wb3J0IHtmdXNlZEJhdGNoTm9ybUNvbmZpZ30gZnJvbSAnLi9rZXJuZWxzL0Z1c2VkQmF0Y2hOb3JtJztcbmltcG9ydCB7ZnVzZWRDb252MkRDb25maWd9IGZyb20gJy4va2VybmVscy9GdXNlZENvbnYyRCc7XG5pbXBvcnQge2Z1c2VkRGVwdGh3aXNlQ29udjJEQ29uZmlnfSBmcm9tICcuL2tlcm5lbHMvRnVzZWREZXB0aHdpc2VDb252MkQnO1xuaW1wb3J0IHtnYXRoZXJOZENvbmZpZ30gZnJvbSAnLi9rZXJuZWxzL0dhdGhlck5kJztcbmltcG9ydCB7Z2F0aGVyVjJDb25maWd9IGZyb20gJy4va2VybmVscy9HYXRoZXJWMic7XG5pbXBvcnQge2dyZWF0ZXJDb25maWd9IGZyb20gJy4va2VybmVscy9HcmVhdGVyJztcbmltcG9ydCB7Z3JlYXRlckVxdWFsQ29uZmlnfSBmcm9tICcuL2tlcm5lbHMvR3JlYXRlckVxdWFsJztcbmltcG9ydCB7aWRlbnRpdHlDb25maWd9IGZyb20gJy4va2VybmVscy9JZGVudGl0eSc7XG5pbXBvcnQge2lmZnRDb25maWd9IGZyb20gJy4va2VybmVscy9JRkZUJztcbmltcG9ydCB7aW1hZ0NvbmZpZ30gZnJvbSAnLi9rZXJuZWxzL0ltYWcnO1xuaW1wb3J0IHtpc0Zpbml0ZUNvbmZpZ30gZnJvbSAnLi9rZXJuZWxzL0lzRmluaXRlJztcbmltcG9ydCB7aXNJbmZDb25maWd9IGZyb20gJy4va2VybmVscy9Jc0luZic7XG5pbXBvcnQge2lzTmFOQ29uZmlnfSBmcm9tICcuL2tlcm5lbHMvSXNOYU4nO1xuaW1wb3J0IHtsZWFreVJlbHVDb25maWd9IGZyb20gJy4va2VybmVscy9MZWFreVJlbHUnO1xuaW1wb3J0IHtsZXNzQ29uZmlnfSBmcm9tICcuL2tlcm5lbHMvTGVzcyc7XG5pbXBvcnQge2xlc3NFcXVhbENvbmZpZ30gZnJvbSAnLi9rZXJuZWxzL0xlc3NFcXVhbCc7XG5pbXBvcnQge2xpblNwYWNlQ29uZmlnfSBmcm9tICcuL2tlcm5lbHMvTGluU3BhY2UnO1xuaW1wb3J0IHtsb2dDb25maWd9IGZyb20gJy4va2VybmVscy9Mb2cnO1xuaW1wb3J0IHtsb2cxcENvbmZpZ30gZnJvbSAnLi9rZXJuZWxzL0xvZzFwJztcbmltcG9ydCB7bG9naWNhbEFuZENvbmZpZ30gZnJvbSAnLi9rZXJuZWxzL0xvZ2ljYWxBbmQnO1xuaW1wb3J0IHtsb2dpY2FsTm90Q29uZmlnfSBmcm9tICcuL2tlcm5lbHMvTG9naWNhbE5vdCc7XG5pbXBvcnQge2xvZ2ljYWxPckNvbmZpZ30gZnJvbSAnLi9rZXJuZWxzL0xvZ2ljYWxPcic7XG5pbXBvcnQge2xybkNvbmZpZ30gZnJvbSAnLi9rZXJuZWxzL0xSTic7XG5pbXBvcnQge2xybkdyYWRDb25maWd9IGZyb20gJy4va2VybmVscy9MUk5HcmFkJztcbmltcG9ydCB7bWF4Q29uZmlnfSBmcm9tICcuL2tlcm5lbHMvTWF4JztcbmltcG9ydCB7bWF4aW11bUNvbmZpZ30gZnJvbSAnLi9rZXJuZWxzL01heGltdW0nO1xuaW1wb3J0IHttYXhQb29sQ29uZmlnfSBmcm9tICcuL2tlcm5lbHMvTWF4UG9vbCc7XG5pbXBvcnQge21heFBvb2wzRENvbmZpZ30gZnJvbSAnLi9rZXJuZWxzL01heFBvb2wzRCc7XG5pbXBvcnQge21heFBvb2wzREdyYWRDb25maWd9IGZyb20gJy4va2VybmVscy9NYXhQb29sM0RHcmFkJztcbmltcG9ydCB7bWF4UG9vbEdyYWRDb25maWd9IGZyb20gJy4va2VybmVscy9NYXhQb29sR3JhZCc7XG5pbXBvcnQge21heFBvb2xXaXRoQXJnbWF4Q29uZmlnfSBmcm9tICcuL2tlcm5lbHMvTWF4UG9vbFdpdGhBcmdtYXgnO1xuaW1wb3J0IHttZWFuQ29uZmlnfSBmcm9tICcuL2tlcm5lbHMvTWVhbic7XG5pbXBvcnQge21pbkNvbmZpZ30gZnJvbSAnLi9rZXJuZWxzL01pbic7XG5pbXBvcnQge21pbmltdW1Db25maWd9IGZyb20gJy4va2VybmVscy9NaW5pbXVtJztcbmltcG9ydCB7bWlycm9yUGFkQ29uZmlnfSBmcm9tICcuL2tlcm5lbHMvTWlycm9yUGFkJztcbmltcG9ydCB7bW9kQ29uZmlnfSBmcm9tICcuL2tlcm5lbHMvTW9kJztcbmltcG9ydCB7bXVsdGlub21pYWxDb25maWd9IGZyb20gJy4va2VybmVscy9NdWx0aW5vbWlhbCc7XG5pbXBvcnQge211bHRpcGx5Q29uZmlnfSBmcm9tICcuL2tlcm5lbHMvTXVsdGlwbHknO1xuaW1wb3J0IHtuZWdDb25maWd9IGZyb20gJy4va2VybmVscy9OZWcnO1xuaW1wb3J0IHtub25NYXhTdXBwcmVzc2lvblYzQ29uZmlnfSBmcm9tICcuL2tlcm5lbHMvTm9uTWF4U3VwcHJlc3Npb25WMyc7XG5pbXBvcnQge25vbk1heFN1cHByZXNzaW9uVjVDb25maWd9IGZyb20gJy4va2VybmVscy9Ob25NYXhTdXBwcmVzc2lvblY1JztcbmltcG9ydCB7bm90RXF1YWxDb25maWd9IGZyb20gJy4va2VybmVscy9Ob3RFcXVhbCc7XG5pbXBvcnQge29uZUhvdENvbmZpZ30gZnJvbSAnLi9rZXJuZWxzL09uZUhvdCc7XG5pbXBvcnQge29uZXNMaWtlQ29uZmlnfSBmcm9tICcuL2tlcm5lbHMvT25lc0xpa2UnO1xuaW1wb3J0IHtwYWNrQ29uZmlnfSBmcm9tICcuL2tlcm5lbHMvUGFjayc7XG5pbXBvcnQge3BhZFYyQ29uZmlnfSBmcm9tICcuL2tlcm5lbHMvUGFkVjInO1xuaW1wb3J0IHtwb3dDb25maWd9IGZyb20gJy4va2VybmVscy9Qb3cnO1xuaW1wb3J0IHtwcmVsdUNvbmZpZ30gZnJvbSAnLi9rZXJuZWxzL1ByZWx1JztcbmltcG9ydCB7cHJvZENvbmZpZ30gZnJvbSAnLi9rZXJuZWxzL1Byb2QnO1xuaW1wb3J0IHtyYW5nZUNvbmZpZ30gZnJvbSAnLi9rZXJuZWxzL1JhbmdlJztcbmltcG9ydCB7cmVhbENvbmZpZ30gZnJvbSAnLi9rZXJuZWxzL1JlYWwnO1xuaW1wb3J0IHtyZWFsRGl2Q29uZmlnfSBmcm9tICcuL2tlcm5lbHMvUmVhbERpdic7XG5pbXBvcnQge3JlY2lwcm9jYWxDb25maWd9IGZyb20gJy4va2VybmVscy9SZWNpcHJvY2FsJztcbmltcG9ydCB7cmVsdUNvbmZpZ30gZnJvbSAnLi9rZXJuZWxzL1JlbHUnO1xuaW1wb3J0IHtyZWx1NkNvbmZpZ30gZnJvbSAnLi9rZXJuZWxzL1JlbHU2JztcbmltcG9ydCB7cmVzaGFwZUNvbmZpZ30gZnJvbSAnLi9rZXJuZWxzL1Jlc2hhcGUnO1xuaW1wb3J0IHtyZXNpemVCaWxpbmVhckNvbmZpZ30gZnJvbSAnLi9rZXJuZWxzL1Jlc2l6ZUJpbGluZWFyJztcbmltcG9ydCB7cmVzaXplQmlsaW5lYXJHcmFkQ29uZmlnfSBmcm9tICcuL2tlcm5lbHMvUmVzaXplQmlsaW5lYXJHcmFkJztcbmltcG9ydCB7cmVzaXplTmVhcmVzdE5laWdoYm9yQ29uZmlnfSBmcm9tICcuL2tlcm5lbHMvUmVzaXplTmVhcmVzdE5laWdoYm9yJztcbmltcG9ydCB7cmVzaXplTmVhcmVzdE5laWdoYm9yR3JhZENvbmZpZ30gZnJvbSAnLi9rZXJuZWxzL1Jlc2l6ZU5lYXJlc3ROZWlnaGJvckdyYWQnO1xuaW1wb3J0IHtyZXZlcnNlQ29uZmlnfSBmcm9tICcuL2tlcm5lbHMvUmV2ZXJzZSc7XG5pbXBvcnQge3JvdGF0ZVdpdGhPZmZzZXRDb25maWd9IGZyb20gJy4va2VybmVscy9Sb3RhdGVXaXRoT2Zmc2V0JztcbmltcG9ydCB7cm91bmRDb25maWd9IGZyb20gJy4va2VybmVscy9Sb3VuZCc7XG5pbXBvcnQge3JzcXJ0Q29uZmlnfSBmcm9tICcuL2tlcm5lbHMvUnNxcnQnO1xuaW1wb3J0IHtzY2F0dGVyTmRDb25maWd9IGZyb20gJy4va2VybmVscy9TY2F0dGVyTmQnO1xuaW1wb3J0IHtzZWFyY2hTb3J0ZWRDb25maWd9IGZyb20gJy4va2VybmVscy9TZWFyY2hTb3J0ZWQnO1xuaW1wb3J0IHtzZWxlY3RDb25maWd9IGZyb20gJy4va2VybmVscy9TZWxlY3QnO1xuaW1wb3J0IHtzZWx1Q29uZmlnfSBmcm9tICcuL2tlcm5lbHMvU2VsdSc7XG5pbXBvcnQge3NpZ21vaWRDb25maWd9IGZyb20gJy4va2VybmVscy9TaWdtb2lkJztcbmltcG9ydCB7c2lnbkNvbmZpZ30gZnJvbSAnLi9rZXJuZWxzL1NpZ24nO1xuaW1wb3J0IHtzaW5Db25maWd9IGZyb20gJy4va2VybmVscy9TaW4nO1xuaW1wb3J0IHtzaW5oQ29uZmlnfSBmcm9tICcuL2tlcm5lbHMvU2luaCc7XG5pbXBvcnQge3NsaWNlQ29uZmlnfSBmcm9tICcuL2tlcm5lbHMvU2xpY2UnO1xuaW1wb3J0IHtzb2Z0bWF4Q29uZmlnfSBmcm9tICcuL2tlcm5lbHMvU29mdG1heCc7XG5pbXBvcnQge3NvZnRwbHVzQ29uZmlnfSBmcm9tICcuL2tlcm5lbHMvU29mdHBsdXMnO1xuaW1wb3J0IHtzcGFjZVRvQmF0Y2hORENvbmZpZ30gZnJvbSAnLi9rZXJuZWxzL1NwYWNlVG9CYXRjaE5EJztcbmltcG9ydCB7c3BhcnNlU2VnbWVudE1lYW5Db25maWd9IGZyb20gJy4va2VybmVscy9TcGFyc2VTZWdtZW50TWVhbic7XG5pbXBvcnQge3NwYXJzZVNlZ21lbnRTdW1Db25maWd9IGZyb20gJy4va2VybmVscy9TcGFyc2VTZWdtZW50U3VtJztcbmltcG9ydCB7c3BhcnNlVG9EZW5zZUNvbmZpZ30gZnJvbSAnLi9rZXJuZWxzL1NwYXJzZVRvRGVuc2UnO1xuaW1wb3J0IHtzcGxpdFZDb25maWd9IGZyb20gJy4va2VybmVscy9TcGxpdFYnO1xuaW1wb3J0IHtzcXJ0Q29uZmlnfSBmcm9tICcuL2tlcm5lbHMvU3FydCc7XG5pbXBvcnQge3NxdWFyZUNvbmZpZ30gZnJvbSAnLi9rZXJuZWxzL1NxdWFyZSc7XG5pbXBvcnQge3NxdWFyZWREaWZmZXJlbmNlQ29uZmlnfSBmcm9tICcuL2tlcm5lbHMvU3F1YXJlZERpZmZlcmVuY2UnO1xuaW1wb3J0IHtzdGVwQ29uZmlnfSBmcm9tICcuL2tlcm5lbHMvU3RlcCc7XG5pbXBvcnQge3N0cmlkZWRTbGljZUNvbmZpZ30gZnJvbSAnLi9rZXJuZWxzL1N0cmlkZWRTbGljZSc7XG5pbXBvcnQge3N0cmluZ05HcmFtc0NvbmZpZ30gZnJvbSAnLi9rZXJuZWxzL1N0cmluZ05HcmFtcyc7XG5pbXBvcnQge3N1YkNvbmZpZ30gZnJvbSAnLi9rZXJuZWxzL1N1Yic7XG5pbXBvcnQge3N1bUNvbmZpZ30gZnJvbSAnLi9rZXJuZWxzL1N1bSc7XG5pbXBvcnQge3RhbkNvbmZpZ30gZnJvbSAnLi9rZXJuZWxzL1Rhbic7XG5pbXBvcnQge3RhbmhDb25maWd9IGZyb20gJy4va2VybmVscy9UYW5oJztcbmltcG9ydCB7dGVuc29yU2NhdHRlclVwZGF0ZUNvbmZpZ30gZnJvbSAnLi9rZXJuZWxzL1RlbnNvclNjYXR0ZXJVcGRhdGUnO1xuaW1wb3J0IHt0aWxlQ29uZmlnfSBmcm9tICcuL2tlcm5lbHMvVGlsZSc7XG5pbXBvcnQge3RvcEtDb25maWd9IGZyb20gJy4va2VybmVscy9Ub3BLJztcbmltcG9ydCB7dHJhbnNmb3JtQ29uZmlnfSBmcm9tICcuL2tlcm5lbHMvVHJhbnNmb3JtJztcbmltcG9ydCB7dHJhbnNwb3NlQ29uZmlnfSBmcm9tICcuL2tlcm5lbHMvVHJhbnNwb3NlJztcbmltcG9ydCB7dW5wYWNrQ29uZmlnfSBmcm9tICcuL2tlcm5lbHMvVW5wYWNrJztcbmltcG9ydCB7dW5zb3J0ZWRTZWdtZW50U3VtQ29uZmlnfSBmcm9tICcuL2tlcm5lbHMvVW5zb3J0ZWRTZWdtZW50U3VtJztcbmltcG9ydCB7emVyb3NMaWtlQ29uZmlnfSBmcm9tICcuL2tlcm5lbHMvWmVyb3NMaWtlJztcblxuLy8gTGlzdCBhbGwga2VybmVsIGNvbmZpZ3MgaGVyZVxuY29uc3Qga2VybmVsQ29uZmlnczogS2VybmVsQ29uZmlnW10gPSBbXG4gIF9mdXNlZE1hdE11bENvbmZpZyxcbiAgYWJzQ29uZmlnLFxuICBhY29zQ29uZmlnLFxuICBhY29zaENvbmZpZyxcbiAgYWRkQ29uZmlnLFxuICBhZGROQ29uZmlnLFxuICBhbGxDb25maWcsXG4gIGFueUNvbmZpZyxcbiAgYXJnTWF4Q29uZmlnLFxuICBhcmdNaW5Db25maWcsXG4gIGFzaW5Db25maWcsXG4gIGFzaW5oQ29uZmlnLFxuICBhdGFuQ29uZmlnLFxuICBhdGFuMkNvbmZpZyxcbiAgYXRhbmhDb25maWcsXG4gIGF2Z1Bvb2xDb25maWcsXG4gIGF2Z1Bvb2wzRENvbmZpZyxcbiAgYXZnUG9vbDNER3JhZENvbmZpZyxcbiAgYXZnUG9vbEdyYWRDb25maWcsXG4gIGJhdGNoTWF0TXVsQ29uZmlnLFxuICBiYXRjaFRvU3BhY2VORENvbmZpZyxcbiAgYmluY291bnRDb25maWcsXG4gIGJyb2FkY2FzdEFyZ3NDb25maWcsXG4gIGNhc3RDb25maWcsXG4gIGNlaWxDb25maWcsXG4gIGNsaXBCeVZhbHVlQ29uZmlnLFxuICBjb21wbGV4Q29uZmlnLFxuICBjb21wbGV4QWJzQ29uZmlnLFxuICBjb25jYXRDb25maWcsXG4gIGNvbnYyRENvbmZpZyxcbiAgY29udjJEQmFja3Byb3BGaWx0ZXJDb25maWcsXG4gIGNvbnYyREJhY2twcm9wSW5wdXRDb25maWcsXG4gIGNvbnYzRENvbmZpZyxcbiAgY29udjNEQmFja3Byb3BGaWx0ZXJWMkNvbmZpZyxcbiAgY29udjNEQmFja3Byb3BJbnB1dFYyQ29uZmlnLFxuICBjb3NDb25maWcsXG4gIGNvc2hDb25maWcsXG4gIGNyb3BBbmRSZXNpemVDb25maWcsXG4gIGN1bXByb2RDb25maWcsXG4gIGN1bXN1bUNvbmZpZyxcbiAgZGVuc2VCaW5jb3VudENvbmZpZyxcbiAgZGVwdGhUb1NwYWNlQ29uZmlnLFxuICBkZXB0aHdpc2VDb252MmROYXRpdmVCYWNrcHJvcEZpbHRlckNvbmZpZyxcbiAgZGVwdGh3aXNlQ29udjJkTmF0aXZlQmFja3Byb3BJbnB1dENvbmZpZyxcbiAgZGVwdGh3aXNlQ29udjJkTmF0aXZlQ29uZmlnLFxuICBkaWFnQ29uZmlnLFxuICBkaWxhdGlvbjJEQ29uZmlnLFxuICBkaWxhdGlvbjJEQmFja3Byb3BGaWx0ZXJDb25maWcsXG4gIGRpbGF0aW9uMkRCYWNrcHJvcElucHV0Q29uZmlnLFxuICBkcmF3Q29uZmlnLFxuICBlaW5zdW1Db25maWcsXG4gIGVsdUNvbmZpZyxcbiAgZWx1R3JhZENvbmZpZyxcbiAgZXF1YWxDb25maWcsXG4gIGVyZkNvbmZpZyxcbiAgZXhwQ29uZmlnLFxuICBleHBhbmREaW1zQ29uZmlnLFxuICBleHBtMUNvbmZpZyxcbiAgZmZ0Q29uZmlnLFxuICBmaWxsQ29uZmlnLFxuICBmbGlwTGVmdFJpZ2h0Q29uZmlnLFxuICBmcm9tUGl4ZWxzQ29uZmlnLFxuICBmbG9vckNvbmZpZyxcbiAgZmxvb3JEaXZDb25maWcsXG4gIGZ1c2VkQmF0Y2hOb3JtQ29uZmlnLFxuICBmdXNlZENvbnYyRENvbmZpZyxcbiAgZnVzZWREZXB0aHdpc2VDb252MkRDb25maWcsXG4gIGdhdGhlck5kQ29uZmlnLFxuICBnYXRoZXJWMkNvbmZpZyxcbiAgZ3JlYXRlckNvbmZpZyxcbiAgZ3JlYXRlckVxdWFsQ29uZmlnLFxuICBpZGVudGl0eUNvbmZpZyxcbiAgaWZmdENvbmZpZyxcbiAgaW1hZ0NvbmZpZyxcbiAgaXNGaW5pdGVDb25maWcsXG4gIGlzSW5mQ29uZmlnLFxuICBpc05hTkNvbmZpZyxcbiAgbGVha3lSZWx1Q29uZmlnLFxuICBsZXNzQ29uZmlnLFxuICBsZXNzRXF1YWxDb25maWcsXG4gIGxpblNwYWNlQ29uZmlnLFxuICBsb2cxcENvbmZpZyxcbiAgbG9nQ29uZmlnLFxuICBsb2dpY2FsQW5kQ29uZmlnLFxuICBsb2dpY2FsTm90Q29uZmlnLFxuICBsb2dpY2FsT3JDb25maWcsXG4gIGxybkNvbmZpZyxcbiAgbHJuR3JhZENvbmZpZyxcbiAgbWF4Q29uZmlnLFxuICBtYXhpbXVtQ29uZmlnLFxuICBtYXhQb29sQ29uZmlnLFxuICBtYXhQb29sR3JhZENvbmZpZyxcbiAgbWF4UG9vbDNEQ29uZmlnLFxuICBtYXhQb29sM0RHcmFkQ29uZmlnLFxuICBtYXhQb29sV2l0aEFyZ21heENvbmZpZyxcbiAgbWVhbkNvbmZpZyxcbiAgbWluQ29uZmlnLFxuICBtaW5pbXVtQ29uZmlnLFxuICBtaXJyb3JQYWRDb25maWcsXG4gIG1vZENvbmZpZyxcbiAgbXVsdGlub21pYWxDb25maWcsXG4gIG11bHRpcGx5Q29uZmlnLFxuICBuZWdDb25maWcsXG4gIG5vbk1heFN1cHByZXNzaW9uVjNDb25maWcsXG4gIG5vbk1heFN1cHByZXNzaW9uVjVDb25maWcsXG4gIG5vdEVxdWFsQ29uZmlnLFxuICBvbmVIb3RDb25maWcsXG4gIG9uZXNMaWtlQ29uZmlnLFxuICBwYWNrQ29uZmlnLFxuICBwYWRWMkNvbmZpZyxcbiAgcG93Q29uZmlnLFxuICBwcmVsdUNvbmZpZyxcbiAgcHJvZENvbmZpZyxcbiAgcmFuZ2VDb25maWcsXG4gIHJlYWxDb25maWcsXG4gIHJlYWxEaXZDb25maWcsXG4gIHJlY2lwcm9jYWxDb25maWcsXG4gIHJlbHVDb25maWcsXG4gIHJlbHU2Q29uZmlnLFxuICByZXNoYXBlQ29uZmlnLFxuICByZXNpemVCaWxpbmVhckNvbmZpZyxcbiAgcmVzaXplQmlsaW5lYXJHcmFkQ29uZmlnLFxuICByZXNpemVOZWFyZXN0TmVpZ2hib3JDb25maWcsXG4gIHJlc2l6ZU5lYXJlc3ROZWlnaGJvckdyYWRDb25maWcsXG4gIHJldmVyc2VDb25maWcsXG4gIHJvdGF0ZVdpdGhPZmZzZXRDb25maWcsXG4gIHJvdW5kQ29uZmlnLFxuICByc3FydENvbmZpZyxcbiAgc2NhdHRlck5kQ29uZmlnLFxuICBzZWFyY2hTb3J0ZWRDb25maWcsXG4gIHNlbGVjdENvbmZpZyxcbiAgc2VsdUNvbmZpZyxcbiAgc2lnbW9pZENvbmZpZyxcbiAgc2lnbkNvbmZpZyxcbiAgc2luQ29uZmlnLFxuICBzaW5oQ29uZmlnLFxuICBzbGljZUNvbmZpZyxcbiAgc3RlcENvbmZpZyxcbiAgc3RyaWRlZFNsaWNlQ29uZmlnLFxuICBzdHJpbmdOR3JhbXNDb25maWcsXG4gIHNvZnRtYXhDb25maWcsXG4gIHNvZnRwbHVzQ29uZmlnLFxuICBzcGFjZVRvQmF0Y2hORENvbmZpZyxcbiAgc3BhcnNlU2VnbWVudE1lYW5Db25maWcsXG4gIHNwYXJzZVNlZ21lbnRTdW1Db25maWcsXG4gIHNwYXJzZVRvRGVuc2VDb25maWcsXG4gIHNwbGl0VkNvbmZpZyxcbiAgc3FydENvbmZpZyxcbiAgc3F1YXJlQ29uZmlnLFxuICBzcXVhcmVkRGlmZmVyZW5jZUNvbmZpZyxcbiAgc3ViQ29uZmlnLFxuICBzdW1Db25maWcsXG4gIHRhbkNvbmZpZyxcbiAgdGFuaENvbmZpZyxcbiAgdGVuc29yU2NhdHRlclVwZGF0ZUNvbmZpZyxcbiAgdGlsZUNvbmZpZyxcbiAgdG9wS0NvbmZpZyxcbiAgdHJhbnNmb3JtQ29uZmlnLFxuICB0cmFuc3Bvc2VDb25maWcsXG4gIHVucGFja0NvbmZpZyxcbiAgdW5zb3J0ZWRTZWdtZW50U3VtQ29uZmlnLFxuICB6ZXJvc0xpa2VDb25maWdcbl07XG5cbmZvciAoY29uc3Qga2VybmVsQ29uZmlnIG9mIGtlcm5lbENvbmZpZ3MpIHtcbiAgcmVnaXN0ZXJLZXJuZWwoa2VybmVsQ29uZmlnKTtcbn1cbiJdfQ==","/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nexport * from './base';\nimport './register_all_kernels';\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi90ZmpzLWJhY2tlbmQtd2ViZ3B1L3NyYy9pbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxjQUFjLFFBQVEsQ0FBQztBQUN2QixPQUFPLHdCQUF3QixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuXG5leHBvcnQgKiBmcm9tICcuL2Jhc2UnO1xuaW1wb3J0ICcuL3JlZ2lzdGVyX2FsbF9rZXJuZWxzJztcbiJdfQ=="],"names":["fromPixels2DContext","PixelsOpType","MatMulProgramType","BinaryOpType","UnaryOpType","CumOpType","ENV","dist","OBj","registerFlag","AdapterInfo","constructor","adapterInfo","vendor","architecture","intelGPUGeneration","getIntelGPUGeneration","isIntel","startsWith","Number","match","BufferManager","device","numUsedBuffers","numFreeBuffers","freeBuffers","Map","usedBuffers","numBytesUsed","numBytesAllocated","acquireBuffer","size","usage","mappedAtCreation","reuse","buffer","key","has","set","get","length","pop","createBuffer","push","releaseBuffer","bufferArray","index","indexOf","destroy","getNumUsedBuffers","getNumFreeBuffers","dispose","forEach","buffers","TextureManager","numUsedTextures","numFreeTextures","freeTextures","usedTextures","acquireTexture","width","height","format","bytesPerElement","getBytesPerElement","byteSize","getTextureKey","newTexture","shift","createTexture","releaseTexture","texture","textureList","textureIndex","splice","getNumUsedTextures","getNumFreeTextures","textures","atomicAddSnippet","ptr","v","type","compileProgram","program","inputsData","output","parallelCompilation","outputData","dtype","shape","source","makeShader","inputInfo","uniformShader","stridesDataType","prefixSnippets","flatWorkgroupSize","workgroupSize","outputComponent","isFlatDispatch","pixelsOpType","inoutSnippet","FROM_PIXELS","dataTypeToGPUType","outShapeStridesType","useGlobalIndex","isFlatDispatchLayout","commonSnippet","join","getCoordsFromIndexSnippet","getUserCode","getStartHeaderString","uniformDeclaration","variableNames","x","i","perDataType","getCoordsDataType","charAt","toLowerCase","slice","outputDataType","uniforms","replace","_","p1","p2","atomic","variableComponents","coordsSnippet","getOutputCoordsSnippet","outShape","dispatchLayout","y","z","outRank","rank","snippet","gatherDimensionsStr","dims","arr","strides","symbolicallyComputeStrides","indicesArr","variableName","Math","max","numCoords","map","d","indicesStr","j","dimensions","sources","isInfSnippet","getOutputIndexFromCoordsSnippet","D5U","assert","setOutputSnippet","outBufferType","component","gpuType","typeSnippet","inputSnippet","getInputSnippet","res","getInputAtCoordsSnippet","texName","name","funcName","toUpperCase","inputs","shapeStr","rankStr","inShape","getInputByOutputSnippet","texFuncSnippet","inRank","arraysEqual","broadcastDims","backend_util","getBroadcastDims","rankDiff","getCoordsXYZ","unpackedCoordsSnippet","coordsType","coordsValues","s","module","createShaderModule","code","label","printShaderString","printShaderArray","split","some","item","shaderKey","includes","console","group","debug","groupEnd","createComputePipelineAsync","compute","entryPoint","layout","createComputePipeline","Error","getMainHeaderString","params","stridesName","computeStrides","coords","line1","line2","dispatch","hasOwnProperty","arrayProduct","product","tilesFitEvenlyIntoShape","tileSize","every","dim","dimIdx","computeDispatch","outputShape","elementsPerThread","dispatchX","dispatchY","dispatchZ","ceil","computeWorkgroupInfoForMatMul","dimAOuter","dimInner","dimBOuter","transposeA","computeWorkgroupSizeForConv2d","isVec4","dim0","dim1","computeWorkPerThreadForConv2d","flatDispatchLayout","GPUBytesPerElement","isWebGPUSupported","globalThis","navigator","gpu","assertNotComplex","tensor","opName","Array","isArray","t","CPU_HANDOFF_SIZE_THRESHOLD","getNumber","reshapeDispatch","MAX_COMPUTE_PER_DIMENSION_DISPATCH_SIZE","limits","maxComputeWorkgroupsPerDimension","undefined","dispatchAverage","sqrt","cbrt","WebGPUBackend","Zuw","nextDataId","commandQueueOwnedIds","WeakSet","dispatchCountInPass","disposed","downloadWaitMs","tensorDataPendingDisposal","queryResolveBuffer","querySet","querySetCount","stagingPendingDisposal","uniformPendingDisposal","uploadWaitMs","hasReadSyncWarned","hasTimestampQueryWarned","pipelineCache","queue","commandEncoder","computePassEncoder","supportTimestampQuery","features","thresholdToIncreaseWorkgroups","bufferManager","textureManager","tensorMap","JLz","SRH","getBool","dummyCanvas","document","createElement","dummyContext","getContext","configure","body","appendChild","floatPrecision","disposeData","dataId","force","tensorData","refCount","complexTensorInfos","real","imag","releaseResource","delete","memory","numBytesInGPU","numBytesAllocatedInGPU","unreliable","resource","external","GPUBuffer","GPUTexture","incRef","decRef","write","values","id","move","submitQueue","submit","finish","b","ensureCommandEncoderReady","createCommandEncoder","endComputePassEncoder","end","checkCompileCompletionAsync","pipelines","Promise","all","Object","e","message","keys","getBufferData","warn","stagingBuffer","GPUBufferUsage","COPY_DST","MAP_READ","copyBufferToBuffer","mapAsync","GPUMapMode","READ","getMappedRange","unmap","getCurrentTexture","convertAndCacheOnCPU","data","readSync","realValues","imagValues","complexVals","convertBackendValuesAndArrayBuffer","mergeRealAndImagArrays","alphaModes","bufferSize","pixelsSize","valsGPU","ArrayBuffer","stagingDeviceStorage","OffscreenCanvas","stagingHostStorage","storage","context","GPUTextureUsage","alphaMode","readDataGPUToCPU","offset","copyBufferToTexture","bytesPerRow","canvasWidth","willReadFrequently","clearRect","drawImage","stagingValues","getImageData","span","Uint8ClampedArray","k","value","fullyReadCount","floor","remainSize","vals","read","ps","copyBuffer","srcBuffer","dstBuffer","createTensorFromGPUData","webGPUData","zeroCopy","sizeFromShape","STORAGE","COPY_SRC","makeTensorFromDataId","readToGPU","srcTensorData","tensorInfo","makeTensorInfo","tensorRef","makeTensorFromTensorInfo","bufferSync","strings","decodeString","f3b","_a","time","f","oldActiveTimers","activeTimers","newActiveTimers","outerMostTime","programTimersStack","flattenedActiveTimerQueries","flatten","query","filter","flattenedActiveTimerNames","kernelMs","wallMs","sum","ms","isString","encodeString","tensorToBinding","createView","uploadToGPU","mapState","MAP_WRITE","arrayBuffer","Int32Array","Float32Array","makeUniforms","programUniform","currentOffset","preLength","offsets","maxAlignmentOfField","baseAlignment","Uint32Array","uniformBuffer","UNIFORM","writeBuffer","runWebGPUProgram","outputDtype","programDefinedUniform","getTypedArrayFromDType","input","makeShaderKey","shapes","types","element","inputShapesEqualsOutShape","broadcastDimsKey","flatDispatchString","pipeline","recordAndSubmit","bufferShapes","uniformsType","NaN","Infinity","concat","bindings","add","bindGroup","createBindGroup","getBindGroupLayout","entries","binding","shouldTimeProgram","computePassDescriptor","createQuerySet","count","timestampWrites","beginningOfPassWriteIndex","endOfPassWriteIndex","beginComputePass","setPipeline","setBindGroup","dispatchWorkgroups","DRAW","getQueryTime","QUERY_RESOLVE","resolveQuerySet","queryStagingBuffer","BigUint64Array","shouldExecuteOnCPU","sizeThreshold","numDataIds","jqO","gpuDescriptor","powerPreference","adapter","requestAdapter","deviceDescriptor","requiredFeatures","adapterLimits","requiredLimits","maxComputeWorkgroupStorageSize","maxStorageBufferBindingSize","maxBufferSize","maxComputeWorkgroupSizeX","maxComputeInvocationsPerWorkgroup","requestDevice","requestAdapterInfo","EQUAL","FLOOR_DIV","GREATER","GREATER_EQUAL","LESS","LESS_EQUAL","LOGICAL_AND_VEC4","LOGICAL_OR_VEC4","MOD","MOD_VEC4","NOT_EQUAL","NOT_EQUAL_VEC4","POW","POW_VEC4","PRELU_VEC4","getBinaryOpString","useVec4","doOpSnippet","isNaN","dTypeN","boolN","ATAN2","MAX","MIN","ADD","COMPLEX_MULTIPLY_IMAG","COMPLEX_MULTIPLY_REAL","DIV","ELU_DER","LOGICAL_AND","LOGICAL_OR","MUL","PRELU","SQUARED_DIFFERENCE","SUB","ACOS","ACOSH","ASIN","ATAN","ATANH","COSH","ELU_VEC4","ERF","ERF_P","ERF_A1","ERF_A2","ERF_A3","ERF_A4","ERF_A5","LOG","LOG1P","LEAKYRELU_VEC4","RELU_VEC4","SELU","SELU_SCALE","SELU_SCALEALPHA","SINH","SOFTPLUS","STEP","TANH","getUnaryOpString","ABS","ASINH","COS","CEIL","ELU","EXP","EXPM1","FLOOR","IS_FINITE","IS_INF","IS_NAN","LINEAR","LOGICAL_NOT","NEG","LEAKYRELU","RECIPROCAL","RELU","RELU6","ROUND","RSQRT","SIGMOID","SIGN","SIN","SQRT","SQUARE","TAN","TO_INT","activationFnSnippet","activation","hasPreluActivationWeights","packed","coordsLength","activationOpSnippet","elementSize","dataType","biasActivationSnippet","hasBias","matMulReadFnSource","transposeB","fitAOuter","fitBOuter","fitInner","sampleA","matMulReadWriteFnSource","writeDataToSubAVec4Snippet","transpose","innerElementSize","calculateResultSnippet","rowPerThread","tileInner","bCachedStr","accStr","makeMatMulPackedVec4Source","workPerThread","splitK","splitedDimInner","broadcastBatch","tileAOuter","tileBOuter","tileAWidth","tileAHight","rowPerThreadB","colPerThread","writeDataToSubASnippet","readDataFromSubASnippet","makeMatMulPackedSource","sequentialAccessByThreads","rowPerThreadA","colPerThreadA","matmulSnippet","readVectorASnippet","MatMulPackedProgram","aShape","bias","preluActivationWeights","isVectorA","workgroupInfo","addBias","getShapeFit","userCode","makeVectorMatrixProductSource","MatMulReduceProgram","workgroupSizeX","MatMulSmallOutputSizeProgram","bShape","makeMatMulSmallOutputSizeSource","MatMulSplitKProgram","BiasActivationProgram","FillProgram","fill","args","backend","attrs","inferDtype","getArrayFromDType","uniformData","fillConfig","kernelName","deh","backendName","kernelFunc","reshape","xSize","$shape","inferFromImplicitShape","$xSize","reshapeConfig","HZH","batchMatMulImpl","a","leakyreluAlpha","out","aRank","bRank","innerShapeA","innerShapeB","outerShapeA","outerShapeB","outerDimsA","outerDimsB","batchDimA","batchDimB","outShapeOuterDims","Jyw","assertAndGetBroadcastShape","a3dShape","b3dShape","a3d","b3d","intermediates","batchDim","matmulProgramType","thresholdFlagValue","workgroupsBy32x32","hasFewWorkgroups","biasActivationProgram","activationInputs","outActivated","outReshaped","_fusedMatMulConfig","usg","BinaryOpComplexProgram","op","opStr","BinaryOpProgram","useSharedMemoryWithA","useSharedMemoryWithB","lastDimensionSize","aDivisibleBy4","bDivisibleBy4","isScalarShape","dType","opFnStr","sharedIndexSnippet","accessDataSnippet","identity","identityConfig","iJz","complex","complexInfo","realTensorInfo","imagTensorInfo","complexConfig","Zz9","UnaryOpProgram","unaryKernelFunc","opType","cpuKernelImpl","$dtype","webgpuBackend","xData","outValues","binaryKernelFunc","supportsComplex","aData","bData","complexParts","aPart","bPart","aHandle","bHandle","x8V","realProgram","imagProgram","complexOutput","decodedAVals","fromUint8ToStringArray","decodedBVals","addImpl","addImplCPU","castImpl","castImplCPU","ceilImpl","ceilImplCPU","concatImpl","concatImplCPU","equalImpl","equalImplCPU","expImpl","expImplCPU","expm1Impl","expm1ImplCPU","floorImpl","floorImplCPU","floorDivImpl","floorDivImplCPU","gatherNdImpl","gatherNdImplCPU","gatherV2Impl","gatherV2ImplCPU","greaterEqualImpl","greaterEqualImplCPU","greaterImpl","greaterImplCPU","lessEqualImpl","lessEqualImplCPU","lessImpl","lessImplCPU","logImpl","logImplCPU","maxImpl","maxImplCPU","maximumImpl","maximumImplCPU","minimumImpl","minimumImplCPU","multiplyImpl","multiplyImplCPU","negImpl","negImplCPU","notEqualImpl","notEqualImplCPU","prodImpl","prodImplCPU","rangeImpl","rangeImplCPU","rsqrtImpl","rsqrtImplCPU","scatterImpl","scatterImplCPU","simpleAbsImpl","simpleAbsImplCPU","sliceImpl","sliceImplCPU","stridedSliceImpl","stridedSliceImplCPU","stringNGramsImpl","stringNGramsImplCPU","subImpl","subImplCPU","tileImpl","tileImplCPU","topKImpl","topKImplCPU","transposeImpl","transposeImplCPU","uniqueImpl","uniqueImplCPU","shared","abs","absConfig","SYM","acos","acosConfig","VGw","acosh","acoshConfig","SpW","addKernelFunc","addConfig","mm_","AddNPackedProgram","snippets","variable","operation","addNConfig","Xze","tensors","reduce","d1","d2","TransposeSharedProgram","newDim","TransposeProgram","switched","getSwitchedCoords","switchedCoords","perm","xRank","newShape","transposeConfig","G3Y","ReduceProgram","reduceInfo","reduceType","inputShape","batchSize","inSize","computeOutAndReduceShapes","reduceOp","initValue","outputSnippet","sharedMemorySnippet","RETURN_TYPES","axis","keepDims","toDispose","origAxes","parseAxisParam","axes","permutedAxes","getAxesPermutation","getInnerMostAxes","assertAxesAreInnerMostDims","reduceOutShape","reduceShape","resOutShape","expandShapeToKeepDim","xVals","outVals","outDtype","z4k","windowSize","outSize","reduced","allConfig","oT6","anyConfig","IKK","ArgMinMaxProgram","getInputShapeLastDim","splitOutputCoords","argMaxConfig","sJF","$x","intermediateTensorInfos","NEGATIVE_INFINITY","argMinConfig","aJk","POSITIVE_INFINITY","asin","asinConfig","M2y","asinh","asinhConfig","qw7","atan","atanConfig","jMg","atan2","atan2Config","QCc","atanh","atanhConfig","Oyi","PoolWithFilterSizeEqualsOneProgram","convInfo","Pool2DProgram","poolType","computePositions","flattenPositions","includeBatchIndex","updateSnippet","positionStr","returnValue","Pool3DProgram","reductionIndices","maxConfig","YoZ","mean","meanConfig","q2K","poolImpl","filterWidth","filterHeight","inWidth","inHeight","padInfo","reduceX","reshapeX","result","strideHeight","strideWidth","top","left","dilationHeight","dilationWidth","effectiveFilterHeight","effectiveFilterWidth","avgPoolConfig","JhU","filterSize","pad","dimRoundingMode","computePool2DInfo","avgPool3DConfig","_k9","dataFormat","computePool3DInfo","avgPoolProgram","strideDepth","front","inDepth","effectiveFilterDepth","AvgPool2DBackpropProgram","AvgPool3DBackpropProgram","avgPool3DGradConfig","IMb","dy","avgMultiplier","filterDepth","outDepth","outHeight","outWidth","avgPoolGradConfig","ROF","batchMatMulConfig","XLW","SliceProgram","start","destSize","coordSum","sourceCoords","getCoords","coord","begin","$begin","$size","kuN","parseSliceParams","assertParamsValid","xTensorData","sliceConfig","p2w","batchToSpaceNDConfig","zws","blockShape","crops","prod","reshaped","getReshaped","permuted","getPermuted","reshapedPermuted","getReshapedPermuted","sliceBeginCoords","getSliceBeginCoords","sliceSize","getSliceSize","reshapedIntermediate","transposedIntermediate","reshapedIntermediate2","sliced","writeSnippet","binaryWriteSnippet","BincountProgram","hasWeights","binaryOutput","bincountConfig","zvY","weights","weightsSize","bincountInputs","BroadcastArgsProgram","broadcastArgsConfig","eEB","s0","s1","s0TensorInfo","s1TensorInfo","s0Vals","s1Vals","broadcastShape","from","s0Size","s1Size","outputSize","notEqual","notEqualConfig","yQU","inputData","realConfig","xJR","castConfig","RFZ","cast","zerosTensor","lls","floatX","realPart","hasEncodingLoss","resultShape","resultType","resultData","int_int","zerosTensorInfo","ceilConfig","gJX","ClipVec4Program","ClipProgram","clipByValueConfig","xnO","clipValueMin","clipValueMax","ComplexAbsProgram","makeComplexComponentTensorInfo","complexTensor","complexPart","complexAbsConfig","yj2","programInputs","ConcatProgram","computeOutShape","offsetLength","lastIndex","lastShiftIndex","imagConfig","J_u","$axis","assertParamsConsistent","$inputs","reals","imags","realConcated","imagConcated","r","runOnCpu","tensors2D","innerSize","inputsValShapes","simplyConcat","finalOutShape","outInfo","maxInputNum","maxStorageBuffersPerShaderStage","reducedInputs","subArray","computeTensors2D","reshapedResult","concatConfig","Eh3","Conv2DMMProgram","isChannelsLast","inChannels","outChannels","matMulSource","elementsSize","conv2dCommonSnippet","innerElementSizeX","innerElementSizeW","coordASnippet","coordResSnippet","row","col","readXSnippet","getXSnippet","sampleX","sampleW","getWSnippet","resType","aType","bType","Conv2DNaiveProgram","Im2ColProgram","rowDim","colDim","getShapeForBatchMatMul","conv2DImpl","sameSize","useNaiveConv2d","conv2dByMatMul","xReshaped","filterReshaped","sharedDim","targetShape","conv2dWithIm2Col","numCols","x2ColShape","im2ColProgram","x2Col","inputVar","conv2DConfig","mhS","dilations","$dataFormat","convertConv2DDataFormat","computeConv2DInfo","Conv2DDerInputProgram","channelDim","vec4Snippet","Conv2DDerFilterProgram","filterShape","Conv3DDerFilterProgram","Conv3DDerInputProgram","conv2DBackpropFilterConfig","wUP","Conv2DDerInputMMProgram","conv2dTransposeCommonSnippet","readASnippet","conv2DBackpropInputConfig","wm","Conv3DNaiveProgram","conv3DConfig","x12","computeConv3DInfo","dilationDepth","conv3DBackpropFilterV2Config","o2y","conv3DBackpropInputV2Config","ik2","cos","cosConfig","mc4","cosh","coshConfig","TR1","CropAndResizeProgram","channnel","boxShape","cropSize","method","numBoxes","methodId","cropHeightBiggerThan1","cropWidthBiggerThan1","inputHeightFloat","inputWidthFloat","heightRatio","heightScale","inY","widthRatio","widthScale","inX","cropAndResizeConfig","VcC","image","boxes","boxInd","extrapolationValue","CumProgram","exclusive","reverse","initVal","Prod","val","cum_webgpu_getCoords","condition","idxString","getFinalCoord","cumImpl","permutation","permutedX","permutedAxis","log2","prevResult","reversePermutation","getUndoAxesPermutation","reverseTransposedResult","cumprodConfig","Byc","cumsumConfig","iHb","Sum","denseBincountConfig","QRR","xRankOne","DepthToSpaceProgram","getHeightCoordString","getWidthCoordString","getDepthCoordString","getOutputDepthSize","getInputSamplingString","depthToSpaceConfig","T0n","blockSize","inputHeight","inputWidth","inputDepth","outputHeight","outputWidth","outputDepth","DepthwiseConv2DNCHWSharedProgram","hasPreluActivation","tileAHeight","DepthwiseConv2DVec4Program","virtualWidth","virtualOutputShape","xNumber","DepthwiseConv2DProgram","depthwiseConv2dNativeConfig","cie","$dilations","DepthwiseConv2DDerFilterProgram","DepthwiseConv2DDerInputProgram","depthwiseConv2dNativeBackpropFilterConfig","sL$","depthwiseConv2dNativeBackpropInputConfig","y7R","DiagProgram","diagConfig","$w","flat","Dilation2DProgram","dilation2DConfig","p4S","computeDilation2DInfo","Dilation2DBackpropInputProgram","Dilation2DBackpropFilterProgram","dilation2DBackpropFilterConfig","Vn9","dilation2DBackpropInputConfig","ekb","DrawProgram","textureFormat","calculateResult","drawConfig","hGc","canvasWebGPU","canvas","options","imageOptions","alpha","gpuContext","numChannels","STORAGE_BINDING","info","canvas2dContext","multiplyKernelFunc","multiplyConfig","wYn","sumConfig","GBy","einsumConfig","$g6","equation","allDims","summedDims","idDims","decodeEinsumEquation","checkEinsumDimSizes","path","steps","getEinsumComputePath","nSteps","numDimsRemaining","tensorsToDispose","idTerm","permutationIndices","expandDims","dimsToExpand","getEinsumPermutation","isIdentityPermutation","elu","eluConfig","SX0","eluGradConfig","HEU","equal","equalConfig","hdR","erf","erfConfig","Omj","exp","expConfig","NEP","inputRank","$dim","expandDimsConfig","YFo","expm1","expm1Config","Y0y","FFTProgram","opString","fftImpl","inverse","inputSize","innerDimensionSize","batch","input2D","xShape","denominator","PI","imagPart","complexOutputReshaped","fftConfig","vwp","FlipLeftRightProgram","imageShape","flipLeftRightConfig","Uyb","floorConfig","OR","floorDiv","floorDivConfig","jeX","FromPixelsProgram","importVideo","textureLoad","textureType","fromPixelsConfig","eBW","pixels","isVideo","HTMLVideoElement","isImage","HTMLImageElement","isCanvas","HTMLCanvasElement","isImageBitmap","ImageBitmap","videoWidth","videoHeight","isVideoOrImage","importExternalTexture","newWillReadFrequently","RENDER_ATTACHMENT","TEXTURE_BINDING","copyExternalImageToTexture","imageData","pixelArray","Uint8Array","dataLength","BatchNormProgram","meanShape","varianceShape","offsetShape","scaleShape","offsetSnippet","scaleSnippet","fusedBatchNormConfig","sHE","scale","variance","varianceEpsilon","batchNormInputs","webGPUBackend","fusedConv2DConfig","_V0","fusedDepthwiseConv2DConfig","luS","eitherStridesOrDilationsAreOne","GatherNDProgram","sliceDim","strideString","gatherNdConfig","q1x","indices","indicesShape","sliceRank","paramsSize","numSlices","prepareAndValidate","flattenIndices","flattenX","indicesData","paramsBuf","outValue","GatherProgram","getSourceCoords","currentCoords","gatherV2","batchDims","parsedAxis","shapeInfo","segment_util","collectGatherOpShapeInfo","indicesSize","outerSize","dimSize","flattenIndex","flattenOutputShape","indicesTensorData","indicesValues","indicesBuffer","flattenXTensorData","xValues","xBuffer","outBuf","gatherV2Config","qi_","greater","greaterConfig","iZT","greaterEqual","greaterEqualConfig","Acj","ifftConfig","Qg5","IsFinite_isFinite","isFiniteConfig","avt","isInf","isInfConfig","iWB","IsNaN_isNaN","isNaNConfig","r7n","leakyReluConfig","J$2","less","lessConfig","vtC","lessEqual","lessEqualConfig","CAk","LinSpaceProgram","linSpaceConfig","e7N","stop","num","step","log","logConfig","ZbH","log1p","log1pConfig","kU","logicalAnd","logicalAndConfig","PYm","logicalNot","logicalNotConfig","VfG","logicalOr","logicalOrConfig","MZg","powOperatorSnippet","LRNProgram","LRNSharedProgram","radius","maxAllowRadius","elementsPerWorkgroup","lrnConfig","eZ0","depthRadius","beta","LRNGradProgram","lrnGradConfig","Hhh","maximum","maximumConfig","BMI","maxPoolConfig","mTV","maxPool3DConfig","OAf","maxPoolProgram","MaxPool2DBackpropProgram","MaxPool3DBackpropProgram","maxPool3DGradConfig","OU7","maxPool3dPositionsProgram","maxPool3dPositions","maxPool3dBackpropProgram","maxPoolGradConfig","OV7","maxPoolPositionsProgram","maxPoolPositions","maxPoolBackpropProgram","maxPoolWithArgmaxConfig","vFR","includeBatchInIndex","poolOutput","indexOutput","minConfig","c17","minimum","minimumConfig","q8u","MirrorPadProgram","paddings","mode","p","shaderStart","shaderEnd","shaderOutC","unpackedCoords","mirrorPadConfig","jQs","mod","modConfig","Vbg","MultinomialProgram","numSamples","SoftmaxProgram","softmax","logits","logitsReshaped","resReshaped","softmaxConfig","Gcp","multinomialConfig","NZg","seed","normalized","probs","numOutcomes","negConfig","kuV","nonMaxSuppressionV3Config","uv1","scores","maxOutputSize","iouThreshold","scoreThreshold","boxesVals","scoresVals","selectedIndices","GDt","nonMaxSuppressionV3Impl","nonMaxSuppressionV5Config","W0H","softNmsSigma","selectedScores","nonMaxSuppressionV5Impl","OneHotProgram","numIndices","depth","oneHotConfig","we_","onValue","offValue","zerosLike","zerosLikeConfig","RuY","onesLikeConfig","qWM","onesLike","packConfig","QiL","assertShapesMatch","expandedTensors","expandedT","padCommon","fillZero","startValue","endValue","leftPadCondition","rightPadCondition","PadProgram","padV2Config","lyA","constantValue","pow","powConfig","pe_","preluConfig","o0g","prodConfig","DlI","rangeConfig","e6w","realDiv","realDivConfig","oHH","reciprocal","reciprocalConfig","$HU","relu","reluConfig","qkr","relu6","relu6Config","SbG","ResizeBilinearProgram","newHeight","newWidth","resizeBilinearConfig","_Yw","images","alignCorners","halfPixelCenters","adjustHeight","adjustWidth","ResizeBilinearBackpropProgram","resizeBilinearGradConfig","zbQ","xHeight","xWidth","yHeight","yWidth","effectiveXSize","effectiveYSize","invHeightScale","invWidthScale","winHeight","winWidth","ResizeNearestNeighborProgram","sourceFracIndexRC","resizeNearestNeighborConfig","dpD","ResizeNearestNeigborBackpropProgram","resizeNearestNeighborGradConfig","Hmb","ReverseProgram","reverseCoordsSnippet","reverseConfig","mKl","xShape4D","dims4D","ax","RotateProgram","fillValue","fillSnippet","rotateWithOffsetConfig","b9H","radians","center","centerX","centerY","getImageCenter","sin","parseFloat","toFixed","round","roundConfig","e07","rsqrt","rsqrtConfig","bV0","ScatterProgram","flattenXShape","indicesRank","updatesRank","sumDupeIndices","sliceDimGreaterThanOne","stridesType","indicesString","indicesSnippet","outCoordsString","getUpdatesCoordsFromFlatIndex","updatesString","idx","updatesSnippet","scatterNdConfig","xQA","updates","numUpdates","calculateShapes","flattenShape","SearchSortedProgram","side","boundComparator","searchSortedConfig","nr8","sortedSequence","SelectProgram","cRank","cCoords","abCoords","cCoordVars","abCoordVars","selectConfig","PhF","selu","seluConfig","oFR","sigmoid","sigmoidConfig","a5O","sign","signConfig","i5y","sinConfig","RQH","sinh","sinhConfig","wYB","softplus","softplusConfig","MRv","SpaceToBatchNDProgram","paddedXShape","reshapedPaddedXShape","paddedXShapeStridesShapeLength","spaceToBatchNDConfig","TQc","completePaddings","reshapedPaddedShape","permutedReshapedPaddedPermutation","paddedXShapeStrides","paddedXT","SparseSegmentSumProgram","sparseSize","SparseSegmentIdCountProgram","segmentIdsShape","SparseSegmentMeanProgram","sparseSegmentReduce","segmentIds","isSum","segmentSize","$segmentIds","lastSegmentIdPlusOne","sparseSegmentSum","$sparseSegmentSum","sparseSegmentIdCount","$sparseSegmentIdCount","sparseSegmentMean","$sparseSegmentMean","sparseSegmentMeanConfig","w3H","sparseSegmentSumConfig","ZjV","TileProgram","reps","tile_webgpu_getSourceCoords","uniformPrefix","tile","buf","tileConfig","n9L","sparseToDenseConfig","D2d","sparseIndices","sparseValues","defaultValue","indicesBuf","updatesBuf","$defaultValue","$sparseIndices","$sparseValues","zero","makeZerosTypedArray","$denseValues","denseValues","splitVConfig","L8s","numOrSizeSplits","splitSizes","prepareSplitSize","sliceT","sqrtConfig","FKq","squareConfig","bK0","squaredDifference","squaredDifferenceConfig","_tC","stepConfig","h8e","StridedSliceProgram","newCoords","outputAxis","stridedSliceConfig","jQk","beginMask","endMask","ellipsisMask","newAxisMask","shrinkAxisMask","finalShapeSparse","finalShape","isIdentity","sliceDim0","isSimpleSlice","$end","$strides","sliceInfo","xBuf","resultValues","stringNGramsConfig","_JP","separator","nGramWidths","leftPad","rightPad","padWidth","preserveShortSequences","dataSplits","$data","$dataSplits","nGrams","nGramsSplits","sub","subConfig","Tr8","tan","tanConfig","sEM","tanh","tanhConfig","MIZ","tensorScatterUpdateConfig","SIB","flattenTensor","SwapProgram","MergeProgram","disposeIntermediateTensorInfoOrNull","roundUpToPow2","pow2","topKConfig","cWu","sorted","lastDim","allTopKVals","allTopKIndices","x2D","kPow2","lastDimPow2","getInputs","runSwap","dir","inc","firstPass","uniformDataSwap","prevIndices","len","mergeProgram","uniformDataMerge","prevValues","TransformProgram","transformConfig","wx7","fillModeId","transforms","interpolation","fillMode","imageHeight","imageWidth","unpackConfig","ToN","outIndex","UnsortedSegmentSumProgram","unsortedSegmentSumConfig","Qvg","numSegments","a2D","segResult","kernelConfig","wCN"],"sourceRoot":""}