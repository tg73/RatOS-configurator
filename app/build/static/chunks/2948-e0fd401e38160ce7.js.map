{"version":3,"file":"static/chunks/2948-e0fd401e38160ce7.js","mappings":"2MAUO,IAAMA,aAA4C,GAEvD,GAAAC,EAAAC,GAAA,EAACC,EAAAA,CAAMA,CAAAA,CACNC,MAAM,MACNC,KAAMC,EACNC,MAAOC,EAAMD,KAAK,CAAG,UAAYC,EAAMD,KAAK,CAAG,QAC/CE,UAAWC,CAAAA,EAAAA,EAAAA,EAAAA,EAAQF,EAAMC,SAAS,CAAE,gCAEnCD,EAAMG,QAAQ,2GCfX,IAAMC,eAAiB,GAE5B,GAAAX,EAAAC,GAAA,EAACW,MAAAA,CAAIJ,UAAWK,CAAAA,EAAAA,EAAAA,EAAAA,EAAO,wDAAyDN,EAAMC,SAAS,WAC9F,GAAAR,EAAAC,GAAA,EAACa,EAAAA,CAAOA,CAAAA,CAACN,UAAU,iICGf,IAAMO,YAA0C,GAErD,GAAAf,EAAAC,GAAA,EAACC,EAAAA,CAAMA,CAAAA,CACNC,MAAM,OACNC,KAAMY,EACNV,MAAOC,EAAMD,KAAK,CAAGC,EAAMD,KAAK,CAAG,OACnCE,UAAWD,EAAMC,SAAS,UAEzBD,EAAMG,QAAQ,oICVlB,IAAMO,OAAS,OAAC,CAAEC,sBAAAA,EAAwB,EAAI,CAAE,GAAGX,EAA0D,CAAAY,QAC5G,GAAAC,EAAAnB,GAAA,EAACoB,EAAAA,CAAeA,CAACC,IAAI,EAACJ,sBAAuBA,EAAwB,GAAGX,CAAK,EAAG,CAEjFU,CAAAA,OAAOM,WAAW,CAAG,SAErB,IAAMC,EAAgBH,EAAAA,CAAeA,CAACI,OAAO,CAEvCC,EAAeL,EAAAA,CAAeA,CAACM,MAAM,CAErCC,EAAcP,EAAAA,CAAeA,CAACQ,KAAK,CAEnCC,EAAgBC,EAAAA,UAAgB,CAGpC,CAAAZ,EAA0Ba,QAAzB,CAAExB,UAAAA,CAAS,CAAE,GAAGD,EAAO,CAAAY,QACzB,GAAAC,EAAAnB,GAAA,EAACoB,EAAAA,CAAeA,CAACY,OAAO,EAACD,IAAKA,EAAKxB,UAAW0B,CAAAA,EAAAA,EAAAA,EAAAA,EAAG,iCAAkC1B,GAAa,GAAGD,CAAK,EAAG,GAE5G4B,CAAAA,EAAAA,EAAAA,CAAAA,EAAeL,EAAeT,EAAAA,CAAeA,CAACY,OAAO,CAACV,WAAW,EAEjE,IAAMa,EAAgBL,EAAAA,UAAgB,CAGpC,CAAAZ,EAAoCa,QAAnC,CAAExB,UAAAA,CAAS,CAAEE,SAAAA,CAAQ,CAAE,GAAGH,EAAO,CAAAY,QACnC,GAAAC,EAAAiB,IAAA,EAACX,EAAAA,WACA,GAAAN,EAAAnB,GAAA,EAAC6B,EAAAA,CAAAA,GACD,GAAAV,EAAAiB,IAAA,EAAChB,EAAAA,CAAeA,CAACiB,OAAO,EACvBN,IAAKA,EACLxB,UAAW0B,CAAAA,EAAAA,EAAAA,EAAAA,EACV,kKACA1B,GAEA,GAAGD,CAAK,WAET,GAAAa,EAAAnB,GAAA,EAACW,MAAAA,CAAIJ,UAAU,qDACdE,OAEW,GAEfyB,CAAAA,EAAAA,EAAAA,CAAAA,EAAeC,EAAe,iBAE9B,IAAMG,aAAe,OAAC,CAAE/B,UAAAA,CAAS,CAAE,GAAGD,EAA6C,CAAAY,QAClF,GAAAC,EAAAnB,GAAA,EAACW,MAAAA,CAAIJ,UAAW0B,CAAAA,EAAAA,EAAAA,EAAAA,EAAG,4CAA6C1B,GAAa,GAAGD,CAAK,EAAG,CAEzFgC,CAAAA,aAAahB,WAAW,CAAG,eAE3B,IAAMiB,aAAe,OAAC,CAAEhC,UAAAA,CAAS,CAAE,GAAGD,EAA6C,CAAAY,QAClF,GAAAC,EAAAnB,GAAA,EAACW,MAAAA,CAAIJ,UAAW0B,CAAAA,EAAAA,EAAAA,EAAAA,EAAG,kCAAmC1B,GAAa,GAAGD,CAAK,EAAG,CAE/EiC,CAAAA,aAAajB,WAAW,CAAG,eAE3B,IAAMkB,EAAcV,EAAAA,UAAgB,CAGlC,CAAAZ,EAA0Ba,QAAzB,CAAExB,UAAAA,CAAS,CAAE,GAAGD,EAAO,CAAAY,QACzB,GAAAC,EAAAnB,GAAA,EAACoB,EAAAA,CAAeA,CAACqB,KAAK,EACrBV,IAAKA,EACLxB,UAAW0B,CAAAA,EAAAA,EAAAA,EAAAA,EAAG,oDAAqD1B,GAClE,GAAGD,CAAK,EACT,GAEF4B,CAAAA,EAAAA,EAAAA,CAAAA,EAAeM,EAAapB,EAAAA,CAAeA,CAACqB,KAAK,CAACnB,WAAW,EAE7D,IAAMoB,EAAoBZ,EAAAA,UAAgB,CAGxC,CAAAZ,EAA0Ba,QAAzB,CAAExB,UAAAA,CAAS,CAAE,GAAGD,EAAO,CAAAY,QACzB,GAAAC,EAAAnB,GAAA,EAACoB,EAAAA,CAAeA,CAACuB,WAAW,EAACZ,IAAKA,EAAKxB,UAAW0B,CAAAA,EAAAA,EAAAA,EAAAA,EAAG,gCAAiC1B,GAAa,GAAGD,CAAK,EAAG,GAE/G4B,CAAAA,EAAAA,EAAAA,CAAAA,EAAeQ,EAAmBtB,EAAAA,CAAeA,CAACuB,WAAW,CAACrB,WAAW,wEEjBlE,IAAMsB,YAAc,IAC1B,GAAM,CAACC,EAAmBC,EAAqB,CAAGC,CAAAA,EAAAA,EAAAA,QAAAA,EAAwB,IACpE,CAAEC,KAAAA,CAAI,CAAE,CAAG1C,EACX,CAAE2C,QAAAA,CAAO,CAAExC,SAAAA,CAAQ,CAAE,CAAGH,EAAM4C,MAAM,CAAC5C,KAAK,CAC1C6C,EAAgBC,CAAAA,EAAAA,EAAAA,WAAAA,EAAY,UACjC,IAAMC,EAAWJ,MAAAA,EAAAA,KAAAA,EAAAA,IACjB,GAAII,aAAoBC,QAAS,CAChCR,EAAqB,GACrB,GAAI,CACH,MAAMO,EACNL,GACD,CAAE,MAAOO,EAAG,CAIX,MAHIA,aAAaC,OAChBC,EAAAA,CAAKA,CAACC,KAAK,CAACH,EAAEI,OAAO,EAEhBJ,CACP,QAAU,CACTT,EAAqB,GACtB,CACD,MACCE,GAEF,EAAG,CAACC,EAASD,EAAK,EAClB,OAAOlB,EAAAA,YAAkB,CAACxB,EAAM4C,MAAM,CAAE,CACvCD,QAASE,EACTS,MAAO,CAAEC,UAAW,KAAM,EAC1BpD,SACC,GAAAU,EAAAiB,IAAA,EAAAjB,EAAA2C,QAAA,YACErD,EACAoC,IAAAA,GAA2B,GAAA1B,EAAAnB,GAAA,EAACa,EAAAA,CAAOA,CAAAA,CAACN,UAAU,eAAewD,SAAU,OAG3E,EACD,EAEO,SAASC,MAAM1D,CAAiB,MAgCtBA,EAGGA,EAOAA,EAqDGA,EACfA,EAyCeA,EACfA,EAzIP,GAAM,CAAE2C,QAAAA,CAAO,CAAEgB,QAASC,CAAQ,CAAEC,SAAAA,CAAQ,CAAEC,oBAAAA,CAAmB,CAAE,CAAG9D,EAChE,CAAC+D,EAAMC,EAAQ,CAAGvB,CAAAA,EAAAA,EAAAA,QAAAA,EAASzC,MAAAA,EAAMG,QAAQ,EACzCuC,EAAOI,CAAAA,EAAAA,EAAAA,WAAAA,EAAY,KACxBc,MAAAA,GAAAA,IACAI,EAAQ,IACJH,GACHI,WAAW,KACVJ,GACD,EAAG,IAEL,EAAG,CAACA,EAAUD,EAAS,EAEjBM,EAAOpB,CAAAA,EAAAA,EAAAA,WAAAA,EAAY,KACxBkB,EAAQ,GACT,EAAG,EAAE,EAECG,EAAUnE,EAAMoE,SAAS,CAC9B,GAAAvD,EAAAnB,GAAA,EAACW,MAAAA,CAAIJ,UAAU,8GACd,GAAAY,EAAAnB,GAAA,EAACa,EAAAA,CAAOA,CAAAA,CAACN,UAAU,UAAUwD,SAAU,GAAMY,cAAY,WAEvDrE,CAAkB,IAAlBA,EAAMmE,OAAO,CAChB,GAAAtD,EAAAnB,GAAA,EAACW,MAAAA,CAAIJ,UAAU,8GACd,GAAAY,EAAAnB,GAAA,EAAC4E,EAAAA,CAAKA,CAAAA,CAACrE,UAAU,2CAA2CoE,cAAY,WAEtErE,CAAkB,IAAlBA,EAAMmE,OAAO,CAChB,GAAAtD,EAAAnB,GAAA,EAACW,MAAAA,CAAIJ,UAAU,8GACd,GAAAY,EAAAnB,GAAA,EAAC6E,EAAAA,CAAKA,CAAAA,CAACtE,UAAU,2CAA2CoE,cAAY,WAEtE,KACEG,EAAYC,SDxHWC,CAAa,MAEHC,EADvC,IAAMA,EAAiDC,OAAOC,UAAU,CAACH,GACnE,CAACI,EAASC,EAAW,CAAGtC,CAAAA,EAAAA,EAAAA,QAAAA,EAASkC,OAAAA,CAAAA,EAAAA,MAAAA,EAAAA,KAAAA,EAAAA,EAAgBG,OAAO,GAAvBH,KAAAA,IAAAA,GAAAA,GAiBvC,MAfAK,CAAAA,EAAAA,EAAAA,SAAAA,EAAU,KACT,GAAIL,MAAAA,EACH,OAED,IAAMM,aAAe,IACpBF,EAAWG,EAAMJ,OAAO,CACzB,EAIA,OAFAH,EAAeQ,gBAAgB,CAAC,SAAUF,cAEnC,KACNN,EAAeS,mBAAmB,CAAC,SAAUH,aAC9C,CACD,EAAG,CAACN,EAAe,EAEZG,CACR,ECoGiC,sBAE1BO,EAAUrF,OAAAA,CAAAA,EAAAA,EAAMqF,OAAO,GAAbrF,KAAAA,IAAAA,EAAAA,EAAiB,EAAE,OAgBnC,CAfIA,EAAMsF,WAAW,EAAI3C,GACxB0C,EAAQE,IAAI,CACX,GAAA1E,EAAAnB,GAAA,EAAC8F,EAAAA,CAAMA,CAAAA,CAACC,QAASzF,OAAAA,CAAAA,EAAAA,EAAM0F,aAAa,GAAnB1F,KAAAA,IAAAA,EAAAA,EAAuB,OAAQ2C,QAASA,WACvD3C,EAAMsF,WAAW,IAIjBtF,EAAM2F,iBAAiB,EAAI7B,GAC9BuB,EAAQE,IAAI,CACX,GAAA1E,EAAAnB,GAAA,EAAC8F,EAAAA,CAAMA,CAAAA,CAACC,QAASzF,OAAAA,CAAAA,EAAAA,EAAM4F,mBAAmB,GAAzB5F,KAAAA,IAAAA,EAAAA,EAA6B,gBAAiB2C,QAASmB,WACtE9D,EAAM2F,iBAAiB,IAKvBnB,GAEF,GAAA3D,EAAAiB,IAAA,EAAC+D,EAAAA,EAAMA,CAAAA,CACN9B,KAAMA,EACN+B,aAAc,IACRC,EAGJ7B,IAFAxB,GAIF,YAEC1C,EAAMG,QAAQ,EAAI,GAAAU,EAAAnB,GAAA,EAACsG,EAAAA,EAAaA,CAAAA,CAACC,QAAO,YAAEjG,EAAMG,QAAQ,GACzD,GAAAU,EAAAiB,IAAA,EAACoE,EAAAA,EAAaA,CAAAA,CACbjG,UAAWK,CAAAA,EAAAA,EAAAA,EAAAA,EACVN,WAAAA,EAAMmG,IAAI,CAAgB,mBAAqBnG,EAAMmG,IAAI,CAAG,YAAc,gBAC1E,8BAEDC,QAASpG,EAAMoG,OAAO,WAEtB,GAAAvF,EAAAiB,IAAA,EAACzB,MAAAA,CAAIJ,UAAU,gDACbkE,EACD,GAAAtD,EAAAiB,IAAA,EAACuE,EAAAA,EAAYA,CAAAA,CAACpG,UAAU,mBACvB,GAAAY,EAAAiB,IAAA,EAACwE,EAAAA,EAAWA,CAAAA,CAACrG,UAAU,8BACtB,GAAAY,EAAAnB,GAAA,EAACW,MAAAA,CAAIJ,UAAU,kBAAUD,EAAMD,KAAK,GACnCC,EAAMuG,YAAY,EAAI,GAAA1F,EAAAnB,GAAA,EAACW,MAAAA,CAAIJ,UAAU,oBAAYD,EAAMuG,YAAY,MAErE,GAAA1F,EAAAnB,GAAA,EAAC8G,EAAAA,EAAiBA,CAAAA,UAAExG,EAAMyG,IAAI,SAGhC,GAAA5F,EAAAnB,GAAA,EAACgH,EAAAA,CAAiBA,CAAAA,CACjBC,mBAAmB,cACnB1G,UAAU,uFAETD,EAAM4G,OAAO,GAEf,GAAA/F,EAAAiB,IAAA,EAACzB,MAAAA,CACAiD,MAAO,CAAEC,UAAW,KAAM,EAC1BtD,UAAWK,CAAAA,EAAAA,EAAAA,EAAAA,EACV,mDACA+E,EAAQwB,MAAM,CAAG,GAAK7G,WAAAA,EAAMmG,IAAI,CAC7B,4CACAd,IAAAA,EAAQwB,MAAM,CACb,cACA,yBAGL,GAAAhG,EAAAnB,GAAA,EAAC8F,EAAAA,CAAMA,CAAAA,CAACC,QAASzF,OAAAA,CAAAA,EAAAA,EAAM8G,cAAc,GAApB9G,KAAAA,IAAAA,EAAAA,EAAwB,UAAW2C,QAASD,EAAMY,MAAO,CAAEC,UAAW,QAAS,WAC9FvD,OAAAA,CAAAA,EAAAA,EAAM+G,WAAW,GAAjB/G,KAAAA,IAAAA,EAAAA,EAAqB,WAEtBqF,EAAQ2B,GAAG,CAAC,CAACpE,EAAQqE,IACrB,GAAApG,EAAAnB,GAAA,EAAC4C,YAAAA,CAAYM,OAAQA,EAAgBF,KAAMA,GAATuE,aASvC,GAAApG,EAAAiB,IAAA,EAACpB,OAAMA,CACNqD,KAAMA,EACN+B,aAAc,IACRC,EAGJ7B,IAFAxB,GAIF,YAEC1C,EAAMG,QAAQ,EAAI,GAAAU,EAAAnB,GAAA,EAACuB,EAAaA,CAACgF,QAAO,YAAEjG,EAAMG,QAAQ,GACzD,GAAAU,EAAAiB,IAAA,EAACD,EAAaA,CAAC5B,UAAU,uCACxB,GAAAY,EAAAiB,IAAA,EAACE,aAAYA,CAAC/B,UAAU,0DACtBkE,EACD,GAAAtD,EAAAiB,IAAA,EAACzB,MAAAA,WACA,GAAAQ,EAAAnB,GAAA,EAACwC,EAAWA,UAAElC,EAAMD,KAAK,GACzB,GAAAc,EAAAnB,GAAA,EAAC0C,EAAiBA,UAAEpC,EAAMyG,IAAI,SAG/BzG,EAAM4G,OAAO,EACb,GAAA/F,EAAAnB,GAAA,EAACW,MAAAA,CAAIJ,UAAU,qGACbD,EAAM4G,OAAO,GAGhB,GAAA/F,EAAAiB,IAAA,EAACG,aAAYA,CAAChC,UAAU,6BACtBoF,EAAQ2B,GAAG,CAAC,CAACpE,EAAQqE,IACrB,GAAApG,EAAAnB,GAAA,EAAC4C,YAAAA,CAAYM,OAAQA,EAAgBF,KAAMA,GAATuE,IAEnC,GAAApG,EAAAnB,GAAA,EAAC2B,EAAWA,CAAC4E,QAAO,YACnB,GAAApF,EAAAnB,GAAA,EAAC8F,EAAAA,CAAMA,CAAAA,CAACC,QAASzF,OAAAA,CAAAA,EAAAA,EAAM8G,cAAc,GAApB9G,KAAAA,IAAAA,EAAAA,EAAwB,UAAW2C,QAASD,WAC3D1C,OAAAA,CAAAA,EAAAA,EAAM+G,WAAW,GAAjB/G,KAAAA,IAAAA,EAAAA,EAAqB,qBAO7B,uHCzOO,IAAMkH,MAAQ,QAEgDlH,EADpE,IAAMmH,EAAWC,CAAAA,EAAAA,EAAAA,CAAAA,IACjB,OAAOD,EAAW,GAAA1H,EAAAC,GAAA,EAAC2H,EAAAA,UAAerH,EAAMG,QAAQ,GAAoBH,OAAAA,CAAAA,EAAAA,EAAMsH,QAAQ,GAAdtH,KAAAA,IAAAA,EAAAA,EAAkB,GAAAP,EAAAC,GAAA,EAACU,EAAAA,CAAcA,CAAAA,CAAAA,EACtG,EACMiH,EAAgBE,CAAAA,EAAAA,EAAAA,IAAAA,EAAK,IAC1BvE,QAAQwE,OAAO,CAAC,CAAEC,QAAS,GAAoC,GAAAhI,EAAAC,GAAA,EAAAD,EAAA+D,QAAA,WAAGxD,EAAMG,QAAQ,EAAK,0MCF/E,IAAMuH,sBAAwB,KACpC,GAAM,CAAEhD,MAAAA,CAAK,CAAEiD,YAAAA,CAAW,CAAE,CAAGC,CAAAA,EAAAA,EAAAA,EAAAA,EAAa,CAC3CC,yBAA0B,CAAC,sBAAuB,yBAA0B,6BAA6B,GAEpG,CAACC,EAAkBC,EAAoB,CAAGtF,CAAAA,EAAAA,EAAAA,QAAAA,EAA4B,WAEtEuF,EAAmBlF,CAAAA,EAAAA,EAAAA,WAAAA,EAAY,UACpC,GAAI4B,MAAAA,EACH,GAAI,CACH,IAAMuD,EAAa,MAAMvD,EAAM,eAC/B,GAAIuD,CAAAA,MAAAA,EAAAA,KAAAA,EAAAA,EAAYC,YAAY,GAAI,KAAM,OACtC,IAAMC,EAAiCF,EAAWC,YAAY,CAC9DH,EAAoBI,GACA,YAAhBA,GAGHlE,WAAW,KACV+D,GACD,EAAG,IAEL,CAAE,MAAO/E,EAAG,CACX8E,EAAoB,UACrB,CAEF,EAAG,CAACrD,EAAOqD,EAAoB,EAqB/B,MAnBA/C,CAAAA,EAAAA,EAAAA,SAAAA,EAAU,KACI,MAATN,GACHsD,GAEF,EAAG,CAACtD,EAAOsD,EAAiB,EAE5BhD,CAAAA,EAAAA,EAAAA,SAAAA,EAAU,KACL2C,GAAe,WAAYA,GAAeA,wBAAAA,EAAYS,MAAM,EAC/DL,EAAoB,SAEjBJ,GAAe,WAAYA,GAAeA,2BAAAA,EAAYS,MAAM,EAC/DL,EAAoB,YAEjBJ,GAAe,WAAYA,GAAeA,+BAAAA,EAAYS,MAAM,GAC/DL,EAAoB,WACpBC,IAEF,EAAG,CAACL,EAAaK,EAAkBD,EAAoB,EAEhDD,CACR,EC3CMO,mBAAqB,IAC1B,OAAQF,GACP,IAAK,QACJ,MAAO,sBACR,KAAK,QACJ,MAAO,sBACR,KAAK,WACJ,MAAO,yBACR,KAAK,UACJ,MAAO,wBACR,SACC,MAAO,wBAGT,CACD,EAEaG,iBAAoC,IAChD,IAAMH,EAAcT,wBAChB9H,EAA6B,SACjC,OAAQuI,GACP,IAAK,QACJvI,EAAQ,MACR,KACD,KAAK,QACJA,EAAQ,QACR,KACD,KAAK,WAML,IAAK,UAGL,QARCA,EAAQ,SACR,KACD,KAAK,UACJA,EAAQ,QAQV,CAEA,MACC,GAAAiB,EAAAiB,IAAA,EAACyG,EAAAA,EAAKA,CAAAA,CAAC3I,MAAOA,EAAOG,MAAOsI,mBAAmBF,aAC9C,GAAAtH,EAAAnB,GAAA,EAAC8I,MAAAA,CAAIvI,UAAWK,CAAAA,EAAAA,EAAAA,EAAAA,EAAOmI,CAAAA,EAAAA,EAAAA,EAAAA,EAAoB,CAAE7I,MAAAA,CAAM,GAAI,WAAY8I,KAAK,eAAeC,QAAQ,mBAC9F,GAAA9H,EAAAnB,GAAA,EAACkJ,SAAAA,CAAOC,GAAI,EAAGC,GAAI,EAAGC,EAAG,MACpB,YAIT,EChDMC,sBAAwB,IAC7B,OAAQC,GACP,IAAK,cACJ,MAAO,8BACR,KAAK,YACJ,MAAO,4BACR,KAAK,aACJ,MAAO,6BACR,SACC,MAAO,0BACT,CACD,EAEaC,oBAAuC,IACnD,GAAM,CAAEC,OAAAA,CAAM,CAAE,CAAGvB,CAAAA,EAAAA,EAAAA,EAAAA,IACfhI,EAA6B,SACjC,OAAQuJ,GACP,IAAK,cACJvJ,EAAQ,MACR,KACD,KAAK,YACJA,EAAQ,QACR,KACD,KAAK,aACJA,EAAQ,SACR,KACD,SACCA,EAAQ,QAEV,CACA,MACC,GAAAiB,EAAAiB,IAAA,EAACyG,EAAAA,EAAKA,CAAAA,CAAC3I,MAAOA,EAAOG,MAAOiJ,sBAAsBG,aACjD,GAAAtI,EAAAnB,GAAA,EAAC8I,MAAAA,CAAIvI,UAAWK,CAAAA,EAAAA,EAAAA,EAAAA,EAAOmI,CAAAA,EAAAA,EAAAA,EAAAA,EAAoB,CAAE7I,MAAAA,CAAM,GAAI,WAAY8I,KAAK,eAAeC,QAAQ,mBAC9F,GAAA9H,EAAAnB,GAAA,EAACkJ,SAAAA,CAAOC,GAAI,EAAGC,GAAI,EAAGC,EAAG,MACpB,cAIT,4BC9BO,IAAMK,cAA8C,QAUnDpJ,EATP,MACC,GAAAa,EAAAiB,IAAA,EAACzB,MAAAA,CAAIJ,UAAU,4BACd,GAAAY,EAAAnB,GAAA,EAACW,MAAAA,CAAIJ,UAAU,oEACd,GAAAY,EAAAiB,IAAA,EAACzB,MAAAA,CAAIJ,UAAU,mGACd,GAAAY,EAAAiB,IAAA,EAACzB,MAAAA,CAAIJ,UAAU,sCACd,GAAAY,EAAAnB,GAAA,EAACW,MAAAA,CAAIJ,UAAWC,CAAAA,EAAAA,EAAAA,EAAAA,EAAQ,2DAA4DF,EAAMqJ,eAAe,WACxG,GAAAxI,EAAAnB,GAAA,EAACW,MAAAA,CAAIJ,UAAU,sCAEhB,GAAAY,EAAAnB,GAAA,EAAC4J,KAAAA,CAAGrJ,UAAU,4CACI,OAAhBD,CAAAA,EAAAA,EAAMuJ,UAAU,GAAhBvJ,KAAAA,IAAAA,EAAAA,KAAAA,EAAAA,EAAkBgH,GAAG,CAAC,CAACwC,EAAIC,SAIfzJ,EAAAA,EAHZ,MACC,GAAAa,EAAAiB,IAAA,EAAC0B,EAAAA,QAAQA,CAAAA,WACR,GAAA3C,EAAAnB,GAAA,EAACgK,OAAAA,CAAKzJ,UAAU,oCAA4BuJ,IAC3CC,EAAQ,CAACzJ,OAAAA,CAAAA,EAAAA,OAAAA,CAAAA,EAAAA,EAAMuJ,UAAU,GAAhBvJ,KAAAA,IAAAA,EAAAA,KAAAA,EAAAA,EAAkB6G,MAAM,GAAxB7G,KAAAA,IAAAA,EAAAA,EAA4B,GAAK,GAAK,GAAAa,EAAAnB,GAAA,EAACgK,OAAAA,CAAKzJ,UAAU,yBAAgB,QAFlEwJ,EAKjB,QAGF,GAAA5I,EAAAnB,GAAA,EAACW,MAAAA,CAAIJ,UAAU,sBAAcD,EAAM2J,MAAM,QAG3C,GAAA9I,EAAAnB,GAAA,EAACkK,SAAAA,CAAO3J,UAAU,8IACjB,GAAAY,EAAAiB,IAAA,EAACzB,MAAAA,CAAIJ,UAAU,uDACd,GAAAY,EAAAnB,GAAA,EAACmK,KAAAA,CAAG5J,UAAU,qHACZD,EAAMD,KAAK,GAEb,GAAAc,EAAAnB,GAAA,EAACoK,IAAAA,CAAE7J,UAAU,wKACXD,EAAM+J,WAAW,UAMxB,EAEaC,mBAAwE,QAK/DC,EAclB9B,EACAA,EACAA,EACAA,EArBH,IAAM+B,EAAcC,CAAAA,EAAAA,EAAAA,EAAAA,EAAiB,sBAAuB,CAAEC,YAAa,YAAa,GAClFC,EAAeC,CAAAA,EAAAA,EAAAA,EAAAA,EAAeC,EAAAA,EAAoBA,EAClDpC,EAAcqC,CAAAA,EAAAA,EAAAA,EAAAA,EAAkB,eAChCP,EAAoBQ,CAAAA,EAAAA,EAAAA,EAAAA,EAAsB,eAC1CC,EAAAA,OAAeT,CAAAA,EAAAA,EAAkBU,IAAI,GAAtBV,KAAAA,IAAAA,EAAAA,KAAAA,EAAAA,EAAwBW,WAAW,CAACC,KAAK,CACxDC,EAAcC,CAAAA,EAAAA,EAAAA,OAAAA,EAAQ,SACDb,EAA1B,IAAMc,EAAmB,CAACd,OAAAA,CAAAA,EAAAA,EAAYS,IAAI,GAAhBT,KAAAA,IAAAA,EAAAA,EAAoB,QAAQ,CAMtD,OALI/B,EAAY/D,SAAS,CACxB4G,EAAOzF,IAAI,CAAC,cACF8E,CAAAA,MAAAA,EAAAA,KAAAA,EAAAA,EAAcY,IAAI,GAC5BD,EAAOzF,IAAI,CAAC8E,EAAaY,IAAI,EAEvBD,CACR,EAAG,CAAC7C,EAAY/D,SAAS,CAAE8F,EAAYS,IAAI,CAAEN,MAAAA,EAAAA,KAAAA,EAAAA,EAAcY,IAAI,CAAC,EAC1D9D,EAAWC,CAAAA,EAAAA,EAAAA,CAAAA,IACjB,OAAOD,EACN,GAAAtG,EAAAnB,GAAA,EAAC0J,cAAAA,CACAC,gBAAiB/I,CAAAA,EAAAA,EAAAA,EAAAA,EAChB6H,CAAAA,OAAAA,CAAAA,EAAAA,EAAYwC,IAAI,GAAhBxC,KAAAA,IAAAA,EAAAA,KAAAA,EAAAA,EAAkBD,YAAY,IAAK,SAAW,6BAC9CC,CAAAA,OAAAA,CAAAA,EAAAA,EAAYwC,IAAI,GAAhBxC,KAAAA,IAAAA,EAAAA,KAAAA,EAAAA,EAAkBD,YAAY,IAAK,WAAa,iCAChDC,CAAAA,OAAAA,CAAAA,EAAAA,EAAYwC,IAAI,GAAhBxC,KAAAA,IAAAA,EAAAA,KAAAA,EAAAA,EAAkBD,YAAY,IAAK,SAAW,iCAC9CC,CAAAA,OAAAA,CAAAA,EAAAA,EAAYwC,IAAI,GAAhBxC,KAAAA,IAAAA,EAAAA,KAAAA,EAAAA,EAAkBD,YAAY,IAAK,YAAc,8BAElDqB,WAAYuB,EACZnB,OACC,GAAA9I,EAAAnB,GAAA,EAAC6I,EAAAA,EAAKA,CAAAA,CACLtI,UAAU,+CACVL,MACC8K,KAAiBQ,IAAjBR,EACG,OACAA,YAAAA,EACC,OACAA,YAAAA,EACC,QACAA,SAAAA,EACC,MACAA,WAAAA,EACC,MACAA,aAAAA,EACC,SACAA,YAAAA,EACC,QACA,gBAGTA,KAAiBQ,IAAjBR,EAA6B,UAAYA,MAAAA,EAAAA,EAAgB,eAG5D3K,MAAOC,EAAMD,KAAK,CAClBgK,YAAa/J,EAAM+J,WAAW,GAG/B,GAAAlJ,EAAAnB,GAAA,EAACyL,0BAAAA,CAAAA,EAEH,EAEaC,wBAA6E,QAiBtFjD,EACAA,EACAA,EACAA,EAnBH,IAAM+B,EAAcC,CAAAA,EAAAA,EAAAA,EAAAA,EAAiB,sBAAuB,CAAEC,YAAa,YAAa,GAClFC,EAAeC,CAAAA,EAAAA,EAAAA,EAAAA,EAAeC,EAAAA,EAAoBA,EAClDpC,EAAcqC,CAAAA,EAAAA,EAAAA,EAAAA,EAAkB,eAChCrD,EAAWC,CAAAA,EAAAA,EAAAA,CAAAA,IACX0D,EAAcC,CAAAA,EAAAA,EAAAA,OAAAA,EAAQ,SACDb,EAA1B,IAAMc,EAAmB,CAACd,OAAAA,CAAAA,EAAAA,EAAYS,IAAI,GAAhBT,KAAAA,IAAAA,EAAAA,EAAoB,QAAQ,CAMtD,OALI/B,EAAY/D,SAAS,CACxB4G,EAAOzF,IAAI,CAAC,cACF8E,CAAAA,MAAAA,EAAAA,KAAAA,EAAAA,EAAcY,IAAI,GAC5BD,EAAOzF,IAAI,CAAC8E,EAAaY,IAAI,EAEvBD,CACR,EAAG,CAAC7C,EAAY/D,SAAS,CAAE8F,EAAYS,IAAI,CAAEN,MAAAA,EAAAA,KAAAA,EAAAA,EAAcY,IAAI,CAAC,EAChE,OAAO9D,EACN,GAAAtG,EAAAnB,GAAA,EAAC0J,cAAAA,CACAC,gBAAiB/I,CAAAA,EAAAA,EAAAA,EAAAA,EAChB6H,CAAAA,OAAAA,CAAAA,EAAAA,EAAYwC,IAAI,GAAhBxC,KAAAA,IAAAA,EAAAA,KAAAA,EAAAA,EAAkBD,YAAY,IAAK,SAAW,6BAC9CC,CAAAA,OAAAA,CAAAA,EAAAA,EAAYwC,IAAI,GAAhBxC,KAAAA,IAAAA,EAAAA,KAAAA,EAAAA,EAAkBD,YAAY,IAAK,WAAa,iCAChDC,CAAAA,OAAAA,CAAAA,EAAAA,EAAYwC,IAAI,GAAhBxC,KAAAA,IAAAA,EAAAA,KAAAA,EAAAA,EAAkBD,YAAY,IAAK,SAAW,iCAC9CC,CAAAA,OAAAA,CAAAA,EAAAA,EAAYwC,IAAI,GAAhBxC,KAAAA,IAAAA,EAAAA,KAAAA,EAAAA,EAAkBD,YAAY,IAAK,YAAc,8BAElDqB,WAAYuB,EACZnB,OACC,GAAA9I,EAAAiB,IAAA,EAACzB,MAAAA,CAAIJ,UAAU,2GACd,GAAAY,EAAAnB,GAAA,EAAC4I,iBAAgBA,CAAAA,GACjB,GAAAzH,EAAAnB,GAAA,EAACwJ,oBAAmBA,CAAAA,MAGtBnJ,MAAOC,EAAMD,KAAK,CAClBgK,YAAa/J,EAAM+J,WAAW,GAG/B,GAAAlJ,EAAAnB,GAAA,EAACyL,0BAAAA,CAAAA,EAEH,EAEaA,0BAAsC,IAClD,GAAAtK,EAAAnB,GAAA,EAAC0J,cAAAA,CACAC,gBAAgB,+BAChBE,WAAY,CAAC,QAAS,aAAa,CACnCxJ,MAAM,2BACNgK,YAAY,mDACZJ,OACC,GAAA9I,EAAAiB,IAAA,EAACzB,MAAAA,CAAIJ,UAAU,oGACd,GAAAY,EAAAnB,GAAA,EAAC4I,iBAAgBA,CAAAA,GACjB,GAAAzH,EAAAnB,GAAA,EAACwJ,oBAAmBA,CAAAA,yHCtJjB,IAAMmC,YAAc,IAC1B,IAAIzE,EAAU,KACd,GAAIlC,EAAM4G,OAAO,CAAE,KAGD5G,EAFjBkC,EACC,GAAAnH,EAAAC,GAAA,EAACW,MAAAA,CAAIJ,UAAU,gBACd,GAAAR,EAAAC,GAAA,EAACF,EAAAA,CAAYA,CAAAA,UAAa,OAAXkF,CAAAA,EAAAA,EAAMtB,KAAK,GAAXsB,KAAAA,IAAAA,EAAAA,KAAAA,EAAAA,EAAarB,OAAO,IAGtC,CAQA,OAPIqB,EAAMN,SAAS,EAClBwC,CAAAA,EACC,GAAAnH,EAAAC,GAAA,EAACW,MAAAA,CAAIJ,UAAU,iDACd,GAAAR,EAAAC,GAAA,EAACa,EAAAA,CAAOA,CAAAA,CAAAA,MAIJ,GAAAd,EAAAC,GAAA,EAACgH,EAAAA,CAAiBA,CAAAA,UAAEE,GAC5B,4MCrBA,IAAM2E,EAAoB,CACzBC,GAAI,GAEF,GAAA3K,EAAAiB,IAAA,EAAC0G,MAAAA,CACAiD,MAAM,6BACNC,MAAM,KACNC,OAAO,KACPhD,QAAQ,YACRD,KAAK,OACLkD,OAAO,eACPC,YAAY,IACZC,cAAc,QACdC,eAAe,QACf9L,UAAWK,CAAAA,EAAAA,EAAAA,EAAAA,EAAO,mCAAoCN,EAAMC,SAAS,YAErE,GAAAY,EAAAnB,GAAA,EAACsM,OAAAA,CAAKC,EAAE,kBACR,GAAApL,EAAAnB,GAAA,EAACsM,OAAAA,CAAKC,EAAE,aACR,GAAApL,EAAAnB,GAAA,EAACsM,OAAAA,CAAKC,EAAE,WAAWC,gBAAgB,WAItCC,KAAM,GAEJ,GAAAtL,EAAAiB,IAAA,EAAC0G,MAAAA,CACAiD,MAAM,6BACNC,MAAM,KACNC,OAAO,KACPhD,QAAQ,YACRD,KAAK,OACLkD,OAAO,eACPC,YAAY,IACZC,cAAc,QACdC,eAAe,QACf9L,UAAWK,CAAAA,EAAAA,EAAAA,EAAAA,EAAO,8CAA+CN,EAAMC,SAAS,YAEhF,GAAAY,EAAAnB,GAAA,EAACsM,OAAAA,CAAKC,EAAE,kBACR,GAAApL,EAAAnB,GAAA,EAACsM,OAAAA,CAAKC,EAAE,aACR,GAAApL,EAAAnB,GAAA,EAACsM,OAAAA,CAAKC,EAAE,WAAWC,gBAAgB,WAItCE,KAAMC,EAAAA,CAAcA,EAYN,SAASC,OAAO1L,CAA6E,KAA7E,CAAE2L,MAAAA,CAAK,CAAEC,IAAAA,CAAG,CAAEjJ,UAAAA,CAAS,CAAEkJ,SAAAA,CAAQ,CAAEC,eAAAA,CAAc,CAAEC,QAAAA,CAAO,CAAE,GAAG3M,EAAc,CAA7EY,EACxBgM,EAAS9J,CAAAA,EAAAA,EAAAA,WAAAA,EAAY,IAAM2J,EAASF,EAAOC,GAAM,CAACC,EAAUF,EAAOC,EAAI,EAEvEK,EAAWtB,CAAiB,CAAChI,EAAU,CAG7C,MACC,GAAA1C,EAAAiB,IAAA,EAACgL,EAAAA,CAAUA,CAAAA,CAAE,GAAG9M,CAAK,WACpB,GAAAa,EAAAnB,GAAA,EAACW,MAAAA,CACAJ,UAAU,mKACV0C,QAASiK,EACT7M,MAAO,SAAqDgN,MAAA,CAA5CxJ,SAAAA,EAAuB,GAAK,IAAMA,YAElD,GAAA1C,EAAAnB,GAAA,EAACmN,EAAAA,CAAS5M,UAAU,aAErB,GAAAY,EAAAnB,GAAA,EAACW,MAAAA,CAAIJ,UAAU,4HACbyM,MAAAA,EACA,GAAA7L,EAAAnB,GAAA,EAACgK,OAAAA,CAAKzJ,UAAU,qBAEhB,GAAAY,EAAAiB,IAAA,EAAC4H,OAAAA,CAAKzJ,UAAW0M,EAAU,oCAAsCzB,KAAAA,YAC/D,MAAM,IAAEwB,EAAe,kBAAgBA,IAAAA,EAAuB,GAAK,IAAI,IAAE,aAMhF,CCzEe,SAASM,gBAAgBpM,CAA0D,KAA1D,CAAEqM,aAAAA,CAAY,CAAEC,YAAAA,CAAW,CAAEC,WAAAA,CAAU,CAAEV,SAAAA,CAAQ,CAAS,CAA1D7L,EACvC,GAAI,CAACsM,EAAa,CACjB,IAAME,EAAYH,EAAaI,QAAQ,CAAGJ,EAAaK,QAAQ,CACzDZ,EAAiBS,EAAaC,EAAY,SAEhD,GAAsB,EACd,KAIP,GAAAvM,EAAAnB,GAAA,EAAC4M,OAAMA,CACN/I,UAAU,OACVgJ,MAAOa,EACPZ,IAAKE,EAfe,GAeoBU,EAfpB,GAekDD,EAAa,EACnFT,eAAgBA,EAChBD,SAAUA,GAGb,CAEA,IAAMC,EAAiBa,CAAAA,EAAAA,EAAAA,EAAAA,EAA8BN,EAAcC,GAEnE,GAAI,CAACD,EAAc,CAClB,GAAI,CAACP,EACJ,OAAO,KAGR,IAAMH,EAAQiB,KAAKC,GAAG,CAACP,EAAYG,QAAQ,CA7BrB,GA6ByC,GAE/D,MACC,GAAAxM,EAAAnB,GAAA,EAAC4M,OAAMA,CACN/I,UAAU,KACVgJ,MAAOG,EAlCa,GAkCsBH,EAAQ,EAClDC,IAAKU,EAAYG,QAAQ,CACzBX,eAAgBA,EAChBD,SAAUA,GAGb,CAEA,IAAMiB,EAAiBT,EAAaI,QAAQ,CAAGJ,EAAaK,QAAQ,CAC9DK,EAAeT,EAAYG,QAAQ,QAEzC,EA7CuB,GA+CrB,GAAAxM,EAAAnB,GAAA,EAAC4M,OAAMA,CACN/I,UAAU,OACVgJ,MAAOmB,EACPlB,IAAKmB,EACLlB,SAAUA,EACVC,eAAgBA,IAMlB,GAAA7L,EAAAiB,IAAA,EAAAjB,EAAA2C,QAAA,YACC,GAAA3C,EAAAnB,GAAA,EAAC4M,OAAMA,CACN/I,UAAU,OACVgJ,MAAOmB,EACPlB,IAAKkB,EA9De,GA+DpBjB,SAAUA,EACVC,eAAgB,OAEjB,GAAA7L,EAAAnB,GAAA,EAAC4M,OAAMA,CACN/I,UAAU,KACVgJ,MAAOoB,EApEa,GAqEpBnB,IAAKmB,EACLlB,SAAUA,EACVE,QAAS,GACTD,eAAgBA,MAIpB,gBC1CA,IAAMkB,EAAY,IAAIC,OAAOC,EAAAC,EAAA,KAAIC,IAAIF,EAAAhE,CAAA,CAAAgE,EAAAG,CAAA,OAAAH,EAAAI,CAA0C,IAEzEC,WAAa,GAEjB,GAAAtN,EAAAnB,GAAA,EAAC8I,MAAAA,CACAG,QAAQ,YACRD,KAAK,OACLmD,YAAY,MACZD,OAAO,eACPH,MAAM,6BACNxL,UAAWC,CAAAA,EAAAA,EAAAA,EAAAA,EAAQ,UAAWF,EAAMC,SAAS,WAE7C,GAAAY,EAAAnB,GAAA,EAACsM,OAAAA,CACAF,cAAc,QACdC,eAAe,QACfE,EAAE,wNAKAmC,aAAe,GAEnB,GAAAvN,EAAAnB,GAAA,EAAC8I,MAAAA,CACAG,QAAQ,YACRD,KAAK,OACLmD,YAAY,MACZD,OAAO,eACPH,MAAM,6BACNxL,UAAWC,CAAAA,EAAAA,EAAAA,EAAAA,EAAQ,UAAWF,EAAMC,SAAS,WAE7C,GAAAY,EAAAnB,GAAA,EAACsM,OAAAA,CACAF,cAAc,QACdC,eAAe,QACfE,EAAE,qMAuCOoC,UAAsC,QAacrO,EAZhE,GAAM,CAAEsO,OAAAA,CAAM,CAAEC,UAAAA,CAAS,CAAE,CAAGvO,EACxB,CAACwO,EAAUC,EAAY,CAAGhM,CAAAA,EAAAA,EAAAA,QAAAA,EAAmB,WAE7CiM,EAAQ5L,CAAAA,EAAAA,EAAAA,WAAAA,EAAY,KACzByL,EAAU,GACX,EAAG,CAACA,EAAU,EAERI,EAAO5D,CAAAA,EAAAA,EAAAA,OAAAA,EAAQ,IACb6D,CAAAA,EAAAA,EAAAA,EAAAA,EAAU5O,EAAM6O,IAAI,CAAC,CAAC,EAAE,CAC7B,CAAC7O,EAAM6O,IAAI,CAAC,EACT1B,EAAanN,EAAM8O,MAAM,CAAG9O,EAAM8O,MAAM,CAACC,KAAK,CAAC,MAAMlI,MAAM,CAAG,EAE9D,CAAEmI,OAAAA,CAAM,CAAEC,YAAAA,CAAW,CAAEC,MAAAA,CAAK,CAAE,CAAGC,SA7BlBD,CAAiB,CAAEE,CAAwB,EAChE,GAAM,CAACC,EAAyBJ,EAAY,CAAGK,CAAAA,EAAAA,EAAAA,EAAAA,EAAmBJ,EAAOE,GACnEG,EAA6BC,CAAAA,EAAAA,EAAAA,EAAAA,EAAqB,EAAGH,EAAyBD,GAM9E,CAAEJ,OAAAA,CAAM,CAAE,CAAGS,CAAAA,EAAAA,EAAAA,EAAAA,EAAkB7B,EALrB,CACfwB,UAAAA,EACAM,SAAU,aACVR,MAAOK,CACR,GAEA,MAAO,CACNN,YAAAA,EACAD,OAAAA,EACAE,MAAOK,CACR,CACD,EAeqDZ,EAAKO,KAAK,CAAElP,OAAAA,CAAAA,EAAAA,EAAM8O,MAAM,GAAZ9O,KAAAA,IAAAA,EAAAA,EAAgB,IAE1E2P,EAAe7M,CAAAA,EAAAA,EAAAA,WAAAA,EAAY,OAAC,CAAE8M,OAAAA,CAAM,CAAEC,KAAAA,CAAI,CAAiB,CAAAjP,EAC1DkP,EAAaD,QAAAA,EAAiBE,CAAAA,EAAAA,EAAAA,EAAAA,EAAqBH,GAAUI,CAAAA,EAAAA,EAAAA,EAAAA,EAAqBJ,GAClFK,EACLL,WAAAA,EAAOM,IAAI,EAAiBL,QAAAA,EAC3B,GAAAhP,EAAAnB,GAAA,EAACyQ,EAAAA,CAAKA,CAAAA,CAAClQ,UAAU,YACd2P,WAAAA,EAAOM,IAAI,EAAiBL,QAAAA,EAC/B,GAAAhP,EAAAnB,GAAA,EAAC0Q,EAAAA,CAAIA,CAAAA,CAACnQ,UAAU,YAEhB,GAEF,MACC,GAAAY,EAAAiB,IAAA,EAACzB,MAAAA,CAAIJ,UAAU,qDACd,GAAAY,EAAAnB,GAAA,EAACgK,OAAAA,CAAKzJ,UAAU,kBAAU6P,KAAAA,EAAoB,KAAOA,IACpDG,IAGJ,EAAG,EAAE,EAECI,WAAa,CAAClQ,EAA0BmQ,EAAgBrJ,EAAWiI,KACxE,IAAMqB,EAAkBpQ,CAAQ,CAACA,EAAS0G,MAAM,CAAG,EAAE,CAC/C2J,EAAoBxQ,EAAM8O,MAAM,CACrC,GAAAjO,EAAAnB,GAAA,EAACsN,gBAAeA,CAEfC,aAAcsD,GAAmBA,EAAgBvQ,KAAK,CAACsQ,IAAI,CAC3DpD,YAAaoD,EACbnD,WAAYA,EACZV,SAAUwC,GAJL,cAA2BlC,MAAA,CAAbuD,EAAK1J,OAAO,GAOhC,GAAA/F,EAAAnB,GAAA,EAAAmB,EAAA2C,QAAA,KAEDrD,EAASoF,IAAI,CAACiL,GAEd,IAAMC,EAAc,GAAA5P,EAAAnB,GAAA,EAACgR,EAAAA,EAAIA,CAAAA,CAA8BJ,KAAMA,GAA9B,QAAqBvD,MAAA,CAAbuD,EAAK1J,OAAO,GAGnD,GAFAzG,EAASoF,IAAI,CAACkL,GAEVxJ,IAAMiI,EAAMrI,MAAM,CAAG,GAAK7G,EAAM8O,MAAM,CAAE,CAC3C,IAAM6B,EACL,GAAA9P,EAAAnB,GAAA,EAACsN,gBAAeA,CAAuBC,aAAcqD,EAAMnD,WAAYA,EAAYV,SAAUwC,GAAxE,mBAEtB9O,EAASoF,IAAI,CAACoL,EACf,CAEA,OAAOxQ,CACR,EAEMyQ,EAAqB5Q,YAAAA,EAAM6K,KAAK,CAAiB,SAAW7K,YAAAA,EAAM6K,KAAK,CAAiB,MAAQ,SACtG,OACCyD,GACC,GAAAzN,EAAAnB,GAAA,EAACgE,EAAAA,CAAKA,CAAAA,CACL3D,MAAO,cAA6BgN,MAAA,CAAf/M,EAAM6Q,QAAQ,EACnChN,SAAU6K,EACVtI,QAAS,GACTD,KAAK,SACLd,QAASrF,EAAMqF,OAAO,CACtBoB,KAAM,gDAA+DsG,MAAA,CAAf/M,EAAM6Q,QAAQ,CAAC,0CACrE9J,YAAY,QACZR,aACC,GAAA1F,EAAAiB,IAAA,EAACzB,MAAAA,CAAIJ,UAAU,+EACd,GAAAY,EAAAnB,GAAA,EAACkD,SAAAA,CACA3C,UAAWK,CAAAA,EAAAA,EAAAA,EAAAA,EACVkO,YAAAA,EACG,gDACA,gDAEJ7L,QAAS,IAAM8L,EAAY,WAC3B1O,MAAM,wBAEN,GAAAc,EAAAnB,GAAA,EAAC0O,aAAAA,CAAanO,UAAU,cAEzB,GAAAY,EAAAnB,GAAA,EAACkD,SAAAA,CACA3C,UAAWK,CAAAA,EAAAA,EAAAA,EAAAA,EACVkO,UAAAA,EACG,gDACA,gDAEJ7L,QAAS,IAAM8L,EAAY,SAC3B1O,MAAM,sBAEN,GAAAc,EAAAnB,GAAA,EAACyO,WAAAA,CAAWlO,UAAU,cAEvB,GAAAY,EAAAnB,GAAA,EAACW,MAAAA,CAAIJ,UAAU,sEACf,GAAAY,EAAAnB,GAAA,EAACkD,SAAAA,CAAO3C,UAAU,+CAA+C0C,QAAS+L,WACzE,GAAA7N,EAAAnB,GAAA,EAACoR,EAAAA,CAACA,CAAAA,CAAC7Q,UAAU,iBAIhB2G,QACC,GAAA/F,EAAAnB,GAAA,EAAAmB,EAAA2C,QAAA,WACC,GAAA3C,EAAAiB,IAAA,EAACzB,MAAAA,CAAIJ,UAAU,6IACbD,gBAAAA,EAAM6Q,QAAQ,EAAsB7Q,EAAM+Q,aAAa,EACvD,GAAAlQ,EAAAnB,GAAA,EAACc,EAAAA,CAAWA,CAAAA,CAACT,MAAM,mCAAmCE,UAAU,gBAAO,8RAMxE,GAAAY,EAAAnB,GAAA,EAACsR,EAAAA,EAAIA,CAAAA,CAAC9B,MAAOA,EAAOV,SAAUA,EAAUoC,SAAUA,EAAU5B,OAAQA,EAAQW,aAAcA,WACxF,GAAWT,EAAM+B,MAAM,CAACZ,WAAY,EAAE,UAQ/C,4BCpOO,IAAMa,EAAsBC,CAAAA,EAAAA,EAAAA,CAAAA,EAAI,2CAA4C,CAClFC,SAAU,CACTvG,MAAO,CACN1G,QAAS,qDACTkN,KAAM,+CACNC,QAAS,wDACTC,OAAQ,kDACRC,cAAe,kDACfC,MAAO,kDACPC,QAAS,oDACV,CACD,CACD,GAQaC,YAA0C,QAQlD3R,EAPJ,MACC,GAAAa,EAAAiB,IAAA,EAACzB,MAAAA,CAAIJ,UAAWiR,EAAoBlR,aACnC,GAAAa,EAAAnB,GAAA,EAACW,MAAAA,CACAN,MAAOC,EAAMD,KAAK,CAClBE,UAAWC,CAAAA,EAAAA,EAAAA,EAAAA,EACV,+CACAF,EAAM4R,IAAI,CAAG,cAAgB,YAC7B5R,OAAAA,CAAAA,EAAAA,EAAM6R,aAAa,GAAnB7R,KAAAA,IAAAA,EAAAA,EAAuB,gBAGxB,GAAAa,EAAAnB,GAAA,EAACW,MAAAA,CACAJ,UAAWC,CAAAA,EAAAA,EAAAA,EAAAA,EAAQ,4FAGrB,GAAAW,EAAAnB,GAAA,EAACW,MAAAA,CAAIJ,UAAU,sCAGlB,+HCMA,IAAM6R,YAA0C,IAC/C,GAAM,CACLC,gBAAAA,CAAe,CACfC,mBAAAA,CAAkB,CAClBrD,KAAAA,CAAI,CACJsD,mBAAAA,CAAkB,CAClBC,sBAAAA,CAAqB,CACrBC,gBAAAA,CAAe,CACfC,oBAAAA,CAAmB,CACnB,CAAGpS,EAEE,CAACqS,EAAiBC,EAAmB,CAAG7P,CAAAA,EAAAA,EAAAA,QAAAA,EAAS,IACjD8P,EAAgBzP,CAAAA,EAAAA,EAAAA,WAAAA,EAAY,IACjCwP,EAAmB,GACpB,EAAG,EAAE,EAECE,EACL7D,YAAAA,EAAM9D,KAAK,EAAmB8D,CAAAA,EAAK8D,SAAS,EAAIL,CAAAA,GAChDzD,YAAAA,EAAK9D,KAAK,EACV8D,YAAAA,EAAK9D,KAAK,CACL6H,EAAiB/D,YAAAA,EAAK9D,KAAK,CAC3B8H,EAAchE,YAAAA,EAAK9D,KAAK,EAAkB8D,YAAAA,EAAK9D,KAAK,EAAkB8D,YAAAA,EAAK9D,KAAK,CAEhF+H,EAAgBR,GAAwBzD,EAAK8D,SAAS,EAAI9D,EAAKkE,MAAM,CACrEC,EACLH,GAAe,CAHER,GAGY,CAACS,GAAiB,CAACJ,GAA2B7D,CAA2B,IAA3BA,EAAKoE,iBAAiB,CAChFpE,EAAK9D,KAAK,CACV8D,EAAK9D,KAAK,CACV8D,EAAK9D,KAAK,CAE5B,IAAMmI,EAAUjI,CAAAA,EAAAA,EAAAA,OAAAA,EAAQ,KACvB,GAAI4D,cAAAA,EAAKkC,QAAQ,CAChB,MAAO,EAAE,CAEV,IAAIoC,EAAsB,KACtBC,EAAwB,KACxBT,EAA2B,KAC3BU,EAAuB,KACvBC,EAAwB,KA6C5B,OA5CIR,GAAiB,CAjBJT,EAkBhBc,EAAO,CACNlT,MAAO,OACPsT,OAAQ,gBACRC,KAAMC,EAAAA,CAAWA,CACjBC,OAAQpB,EAAsBF,EAAwBH,CACvD,EACUW,GACVD,CAAAA,EAAY,CACX1S,MAAO,iBACPsT,OAAQ,UACRC,KAAMhP,EAAAA,CAAKA,CACXkP,OAAQrB,EACL,IACAF,EAAmBwB,GACnBzB,EAAmByB,EACpB,EACCzB,CACJ,GAEGW,CAAAA,GArCaR,GAqCiBS,EArCjBT,IA6CZxD,YAAAA,EAAK9D,KAAK,CACbuI,EAAS,CACRrT,MAAO,SACPsT,OAAQ,SACRC,KAAMI,EAAAA,CAAKA,CACXF,OAAQvB,CACT,EACUU,GAAe,CAACD,GAC1BS,CAAAA,EAAQ,CACPpT,MAAO,QACPuT,KAAMlD,EAAAA,CAAIA,CACViD,OAAQ,UACRG,OAAQvB,CACT,IApBDiB,EAAS,CACRnT,MAAO,qBACPuT,KAAMK,EAAAA,CAASA,CACfN,OAAQP,EAAuBnE,gBAAAA,EAAKkC,QAAQ,CAAqB,OAAS,SAAY,gBACtF2C,OAAQzB,CACT,EAkBM,CAACkB,EAAMC,EAAQT,EAAWU,EAAOC,EAAO,CAACQ,MAAM,CAACC,QACxD,EAAG,CACF9B,EACAC,EACArD,EAAKkC,QAAQ,CACblC,EAAK9D,KAAK,CACV8H,EAnEiBR,EAqEjBA,EACAC,EACAM,EACAE,EACAE,EACAb,EACAC,EACA,EAEK4B,EAAqB/I,CAAAA,EAAAA,EAAAA,OAAAA,EAAQ,IAClC,EACQ,SAEJ4D,YAAAA,EAAK9D,KAAK,CACb,GAAkB8D,EAAK8D,SAAS,EAAMG,GAAiB,CAACjE,EAAK8D,SAAS,CAC9D,UACGG,EACH,UAEA,gBAGLjE,YAAAA,EAAK9D,KAAK,CACb,EACQ,SAEA,UAGT,YAAI8D,EAAK9D,KAAK,EAlGGsH,EAuGV,gBAHE,UAIP,CAACxD,EAAK8D,SAAS,CAAE9D,EAAK9D,KAAK,CAxGZsH,EAwGyBS,EAAeE,EAAoB,EAExE,CAACiB,EAAW,CAAGC,CAAAA,EAAAA,EAAAA,CAAAA,EAAgB,CAACF,EAAU,CAAE,KAElD,MACC,GAAAjT,EAAAiB,IAAA,EAACmS,KAAAA,CAAuBhU,UAAU,2DAChC0O,CAAAA,MAAAA,EAAAA,KAAAA,EAAAA,EAAME,IAAI,GAAI,MACd,GAAAhO,EAAAnB,GAAA,EAAC2O,UAASA,CACTQ,KAAMF,EAAKE,IAAI,CACfgC,SAAUlC,EAAKkC,QAAQ,CACvBhG,MAAO8D,EAAK9D,KAAK,CACjBkG,cAAepC,EAAKoC,aAAa,CACjCjC,OAAQH,EAAKuF,WAAW,CACxB3F,UAAW+D,EACXjN,QAAS2N,EAAQhM,GAAG,CAAC,GAEnB,GAAAnG,EAAAiB,IAAA,EAAC0D,EAAAA,CAAMA,CAAAA,CACN7C,QAAS,KACRwR,EAAEX,MAAM,CAAC7E,EAAKkC,QAAQ,EACtByB,EAAmB,GACpB,EACA7M,QAAS0O,EAAEd,MAAM,WAGjB,GAAAxS,EAAAnB,GAAA,EAACyU,EAAEb,IAAI,EAACrT,UAAU,YACjBkU,EAAEpU,KAAK,GAHHoU,EAAEpU,KAAK,GAOfuO,OAAQ+D,IAGV,GAAAxR,EAAAiB,IAAA,EAACzB,MAAAA,CAAIJ,UAAU,oBACd,GAAAY,EAAAiB,IAAA,EAACzB,MAAAA,CAAIJ,UAAU,sCACd,GAAAY,EAAAnB,GAAA,EAACiS,YAAWA,CAAC9G,MAAOiJ,EAAWlC,KAAMmC,IACrC,GAAAlT,EAAAnB,GAAA,EAACoK,IAAAA,CAAE7J,UAAU,0EAAkE0O,EAAKkC,QAAQ,GAC5F,GAAAhQ,EAAAnB,GAAA,EAAC6I,EAAAA,EAAKA,CAAAA,CACL6L,KAAK,KACLxU,MACC+O,YAAAA,EAAK9D,KAAK,CACP,EAAMkI,iBAAiB,CAEtB,SADA,MAEDpE,YAAAA,EAAK9D,KAAK,CACT,QACA8D,YAAAA,EAAK9D,KAAK,CACT,OACA,gBAGL8D,YAAAA,EAAK9D,KAAK,CACR8D,EAAKoE,iBAAiB,CACrB,kBACA,kBACDpE,YAAAA,EAAK9D,KAAK,CACT,WACA8D,YAAAA,EAAK9D,KAAK,CACT,UACA,eAEL8D,EAAKoC,aAAa,EAClB,GAAAlQ,EAAAnB,GAAA,EAAC6I,EAAAA,EAAKA,CAAAA,CAAC6L,KAAK,KAAKxU,MAAM,eAAM,uBAK/B,GAAAiB,EAAAnB,GAAA,EAACW,MAAAA,CAAIJ,UAAU,6FACd,GAAAY,EAAAiB,IAAA,EAACgI,IAAAA,CAAE7J,UAAU,aACX0O,YAAAA,EAAK9D,KAAK,EACT+H,CAAAA,GAAiB,CA7KNT,EA8KT,0CACAxD,CAAAA,aAAAA,EAAKkC,QAAQ,CAAmB,6DAA8D,IAC9F,EAEC,iDADA,uBACA,EACJlC,YAAAA,EAAK9D,KAAK,EAAmBwJ,CAAAA,EAAY,wBAA0B,yBACnE1F,YAAAA,EAAK9D,KAAK,EAAmB,GAAuC,8BAA1B,uBAA0B,EACpE8D,cAAAA,EAAK9D,KAAK,EACT8D,CAAAA,EAAKoC,aAAa,CAAG,+BAAiC,mCAI3D,GAAAlQ,EAAAiB,IAAA,EAACzB,MAAAA,CAAIJ,UAAU,gDACd,GAAAY,EAAAnB,GAAA,EAACW,MAAAA,CAAIJ,UAAU,uCACb6S,EACA,GAAAjS,EAAAnB,GAAA,EAAC8F,EAAAA,CAAMA,CAAAA,CAACC,QAAQ,OAAO9C,QAAS,IAAM4P,EAAc5D,YAAO,mBAI3D,GAAA9N,EAAAnB,GAAA,EAAC4U,EAASA,CAACrU,UAAU,6CAA6CoE,cAAY,WAGhF,GAAAxD,EAAAiB,IAAA,EAACyS,EAAAA,EAAYA,CAAAA,WACZ,GAAA1T,EAAAiB,IAAA,EAAC0S,EAAAA,EAAmBA,CAAAA,CAACvU,UAAU,6GAC9B,GAAAY,EAAAnB,GAAA,EAACgK,OAAAA,CAAKzJ,UAAU,mBAAU,iBAC1B,GAAAY,EAAAnB,GAAA,EAAC+U,EAAoBA,CAACxU,UAAU,UAAUoE,cAAY,YAEvD,GAAAxD,EAAAiB,IAAA,EAAC4S,EAAAA,EAAmBA,CAAAA,WAClB1B,EAAQhM,GAAG,CAAC,GACZ,GAAAnG,EAAAiB,IAAA,EAAC6S,EAAAA,EAAgBA,CAAAA,CAAoBhS,QAAS,IAAM6Q,EAAOA,MAAM,CAAC7E,EAAKkC,QAAQ,EAAG5Q,UAAU,kBAC1F,GAAAY,EAAAnB,GAAA,EAAC8T,EAAOF,IAAI,EAACrT,UAAU,kCACvBuT,EAAOzT,KAAK,GAFSyT,EAAOzT,KAAK,GAKpC,GAAAc,EAAAiB,IAAA,EAAC6S,EAAAA,EAAgBA,CAAAA,CAACC,SAAUjG,MAAAA,EAAKE,IAAI,CAAUlM,QAAS,IAAM4P,EAAc5D,GAAO1O,UAAU,kBAC5F,GAAAY,EAAAnB,GAAA,EAACmV,EAAAA,CAAQA,CAAAA,CAAC5U,UAAU,kCAAkC,0BApGlD0O,EAAKkC,QAAQ,CA4GxB,EAEaiE,YAA0C,QA2ClDC,EA1CJ,GAAM,CAAEC,iBAAAA,CAAgB,CAAEC,sBAAAA,CAAqB,CAAEC,yBAAAA,CAAwB,CAAE,CAAGlV,EACxE,CAACmV,EAAkBC,EAAoB,CAAG3S,CAAAA,EAAAA,EAAAA,QAAAA,EAAmB,EAAE,EAE/DuP,EAAqBlP,CAAAA,EAAAA,EAAAA,WAAAA,EAAY,IACtCsS,EAAoB,GAAYC,EAAMC,QAAQ,CAACzE,GAAYwE,EAAQ,IAAIA,EAAOxE,EAAS,CACxF,EAAG,EAAE,EAECqB,EAAwBpP,CAAAA,EAAAA,EAAAA,WAAAA,EAAY,IACzCsS,EAAoB,GAAYC,EAAMC,QAAQ,CAACzE,GAAYwE,EAAMzB,MAAM,CAAC,GAAUjF,IAASkC,GAAYwE,EACxG,EAAG,EAAE,EAEC,CAACE,EAAeC,EAAiB,CAAG/S,CAAAA,EAAAA,EAAAA,QAAAA,EAAmB,EAAE,EAEzDsP,EAAkBjP,CAAAA,EAAAA,EAAAA,WAAAA,EAAY,IACnC0S,EAAiB,GAAYH,EAAMC,QAAQ,CAACzE,GAAYwE,EAAQ,IAAIA,EAAOxE,EAAS,CACrF,EAAG,EAAE,EAECoB,EAAqBnP,CAAAA,EAAAA,EAAAA,WAAAA,EAAY,IACtC0S,EAAiB,GAAYH,EAAMC,QAAQ,CAACzE,GAAYwE,EAAMzB,MAAM,CAAC,GAAUjF,IAASkC,GAAYwE,EACrG,EAAG,EAAE,EAELrQ,CAAAA,EAAAA,EAAAA,SAAAA,EAAU,KACTkQ,EAAyBC,EAC1B,EAAG,CAACA,EAAkBD,EAAyB,EAC/ClQ,CAAAA,EAAAA,EAAAA,SAAAA,EAAU,KACTiQ,EAAsBM,EACvB,EAAG,CAACA,EAAeN,EAAsB,EAEzC,IAAMQ,EAASC,EAAAA,EAAIA,CAACC,QAAQ,GAAGF,MAAM,CAC/BV,EAAea,CAAAA,EAAAA,EAAAA,CAAAA,EAAS,CAC7BC,SAAU,CAAC,uBAAwBb,EAAiB,CACpDc,QAAS,UACR,IAAMC,EAAM,MAAMN,EAAOO,OAAO,CAACC,eAAe,CAACC,MAAM,CAAC,CACvDC,OAAQnB,MAAAA,EAAAA,EAAqB,CAAC,CAC/B,GACA,OAAOe,CACR,EACAK,QAASpB,MAAAA,CACV,GACA,MACC,GAAAnU,EAAAiB,IAAA,EAAAjB,EAAA2C,QAAA,YACC,GAAA3C,EAAAnB,GAAA,EAAC2W,KAAAA,CAAGC,KAAK,OAAOrW,UAAU,yDACP,OAAjB8U,CAAAA,EAAAA,EAAapK,IAAI,GAAjBoK,KAAAA,IAAAA,EAAAA,KAAAA,EAAAA,EAAmB/N,GAAG,CAAC,GAEtB,GAAAnG,EAAAnB,GAAA,EAACoS,YAAAA,CAEAnD,KAAM4H,EACNpE,gBAAiBoD,EAAcD,QAAQ,CAACiB,EAAY1F,QAAQ,EAC5DuB,oBAAqB+C,EAAiBG,QAAQ,CAACiB,EAAY1F,QAAQ,EACnEkB,gBAAiBA,EACjBC,mBAAoBA,EACpBC,mBAAoBA,EACpBC,sBAAuBA,GAPlBqE,EAAY1F,QAAQ,KAY7B,GAAAhQ,EAAAnB,GAAA,EAAC2L,EAAAA,CAAWA,CAAAA,CAAE,GAAG0J,CAAY,KAGhC,gUCvUkByB,EAAAA,CAACA,CAACC,KAAK,CAACC,EAAAA,EAAeA,EAelC,IAAMC,oBAA0D,QAUtC3W,EAAAA,EAoB5BA,EAyQWA,EAAAA,EAxRZ4W,EASCC,EAMA7W,EAwCS4W,EAgCZE,EAAAA,EArGD,IAAMC,EAAYC,CAAAA,EAAAA,EAAAA,EAAAA,IACZC,EAAWF,EAAUG,IAAI,CAAC,GAAQC,EAAGC,eAAe,KAAOpX,EAAMqX,WAAW,CAACC,IAAI,EACjFC,EAAyBR,EAAUS,KAAK,CAAC,GAAQL,EAAGM,YAAY,IAChEC,EAAgBT,CAAAA,MAAAA,EAAAA,KAAAA,EAAAA,EAAUG,eAAe,MAAOpX,EAAM2X,kBAAkB,CAACL,IAAI,EAAIL,CAAAA,MAAAA,EAAAA,KAAAA,EAAAA,EAAUQ,YAAY,IACvGb,EAAQc,EAAgBT,EAASW,YAAY,GAAK5X,EAAM6X,aAAa,CACrE,CAACC,EAAiBC,EAAmB,CAAGtV,CAAAA,EAAAA,EAAAA,QAAAA,EAAS,CAAC,CAACzC,EAAM8X,eAAe,EACxEE,EAAiBC,CAAAA,EAAAA,EAAAA,EAAAA,EAAkBC,CAAAA,EAAAA,EAAAA,EAAAA,EAAiBlY,EAAMqX,WAAW,CAACC,IAAI,GAC1Ea,EAAe7N,CAAAA,EAAAA,EAAAA,EAAAA,EAAe8N,EAAAA,EAAiBA,EAC/C,CAACC,EAAWC,EAAa,CAAG7V,CAAAA,EAAAA,EAAAA,QAAAA,EACjCzC,EAAMqX,WAAW,CAACgB,SAAS,UAAIrY,CAAAA,EAAAA,EAAM6X,aAAa,GAAnB7X,KAAAA,IAAAA,EAAAA,KAAAA,EAAAA,OAAAA,CAAAA,EAAAA,EAAqBuY,UAAU,GAA/BvY,KAAAA,IAAAA,EAAAA,KAAAA,EAAAA,CAAiC,CAACA,EAAMqX,WAAW,CAACgB,SAAS,CAAC,EAC1FrY,EAAMqX,WAAW,CAACgB,SAAS,CAC3BnN,KAAAA,GAEEsN,EAAmB5B,CAAAA,MAAAA,EAAAA,KAAAA,EAAAA,EAAO6B,iBAAiB,EAC9C7B,OAAAA,CAAAA,EAAAA,EAAM6B,iBAAiB,CACvBJ,MAAAA,EAAAA,EAAcrY,EAAMqX,WAAW,CAACC,IAAI,CAACoB,UAAU,CAAC,YAAcC,EAAAA,EAAWA,CAACC,QAAQ,CAAG5Y,EAAMqX,WAAW,CAACC,IAAI,CAC3G,GAFAV,KAAAA,IAAAA,EAAAA,EAGDA,EAAM6B,iBAAiB,CACtBzY,EAAMqX,WAAW,CAACC,IAAI,CAACoB,UAAU,CAAC,YAAcC,EAAAA,EAAWA,CAACC,QAAQ,CAAG5Y,EAAMqX,WAAW,CAACC,IAAI,CAC7F,CACA,KACG,CAACuB,EAAQC,EAAU,CAAGrW,CAAAA,EAAAA,EAAAA,QAAAA,EACP,MAApB+V,GACG3B,OAAAA,CAAAA,EAAAA,CAAAA,EAAAA,EAAAA,EAAAA,EAAkB2B,EAAAA,GAAlB3B,KAAAA,IAAAA,EAAAA,EAAuC7W,EAAMqX,WAAW,CAACwB,MAAM,EAG7D,CAACE,EAASC,EAAW,CAAGvW,CAAAA,EAAAA,EAAAA,QAAAA,EAASzC,EAAMqX,WAAW,CAAC0B,OAAO,EAC1D,CAACE,EAAaC,EAAe,CAAGzW,CAAAA,EAAAA,EAAAA,QAAAA,EACrCqV,GACG9X,OAAAA,CAAAA,EAAAA,OAAAA,CAAAA,EAAAA,EAAM2X,kBAAkB,CAACG,eAAe,GAAxC9X,KAAAA,IAAAA,EAAAA,KAAAA,EAAAA,EAA0CiZ,WAAW,GAArDjZ,KAAAA,IAAAA,EAAAA,EAAyDA,EAAM2X,kBAAkB,CAACsB,WAAW,EAG3FE,EACLnZ,MAAAA,EAAMoZ,MAAM,CACT,EACAC,OAAOC,IAAI,CAACtZ,EAAMoZ,MAAM,EAAEnI,MAAM,CAAC,CAACsI,EAAKC,SAErBxZ,EAAlB,IAAMyZ,EAAAA,OAAYzZ,CAAAA,EAAAA,EAAMoZ,MAAM,GAAZpZ,KAAAA,IAAAA,EAAAA,KAAAA,EAAAA,CAAc,CADjBwZ,EACyB,CACxC,GAAIC,MAAAA,EACH,OAAOF,EAER,IAAMG,EAAQC,MAAMC,OAAO,CAACH,GAAaA,EAAU5S,MAAM,CAAG4S,EAAUI,OAAO,CAAChT,MAAM,CACpF,OAAO0S,EAAMG,CACd,EAAG,GAEAI,EAAchX,CAAAA,EAAAA,EAAAA,WAAAA,EACnB,GACC,MAAIiX,GAGG5B,EAAa6B,IAAI,CAAC,IACxB,IAAMC,EAAelD,EAAUG,IAAI,CAAC,GAAQC,EAAGC,eAAe,KAAO8C,EAAG5C,IAAI,QAC5E,EAAI4C,EAAG5C,IAAI,GAAKtX,EAAMqX,WAAW,CAACC,IAAI,EAGlC2C,CAAAA,MAAAA,EAAAA,KAAAA,EAAAA,EAAcxC,YAAY,MAIvByC,EAAG7B,SAAS,GAAK0B,CACzB,GAED,CAAC5B,EAAcnY,EAAMqX,WAAW,CAACC,IAAI,CAAEP,EAAU,EAG5CoD,EAAiBzE,EAAAA,EAAIA,CAAC0E,GAAG,CAACC,gBAAgB,CAACzE,QAAQ,CACxD,CACC0B,KAAMtX,EAAMqX,WAAW,CAACC,IAAI,CAC5BgD,0BAA2B/C,EAC3BgD,UAAW3D,OAAAA,CAAAA,EAAAA,MAAAA,EAAAA,KAAAA,EAAAA,EAAO5K,IAAI,GAAX4K,KAAAA,IAAAA,EAAAA,EAAe,EAC3B,EACA,CAAER,QAAS,CAAC,CAACQ,CAAM,GAEpB5R,CAAAA,EAAAA,EAAAA,SAAAA,EAAU,SACuC4R,CAA5CuD,CAAAA,EAAexP,IAAI,EAAI0N,MAAAA,GAAqBzB,CAAAA,MAAAA,EAAAA,KAAAA,EAAAA,OAAAA,CAAAA,EAAAA,EAAO2B,UAAU,GAAjB3B,KAAAA,IAAAA,EAAAA,KAAAA,EAAAA,CAAmB,CAACuD,EAAexP,IAAI,CAAC,GAAI,MAE3F6P,CAAAA,EAAAA,EAAAA,eAAAA,EAAgB,SAEY5D,EAA3B,GADA0B,EAAa6B,EAAexP,IAAI,CAAGwP,EAAexP,IAAI,CAAGO,KAAAA,GACrDiP,EAAexP,IAAI,EAAIiM,CAAAA,MAAAA,EAAAA,KAAAA,EAAAA,OAAAA,CAAAA,EAAAA,EAAO6B,iBAAiB,GAAxB7B,KAAAA,IAAAA,EAAAA,KAAAA,EAAAA,CAA0B,CAACuD,EAAexP,IAAI,CAAC,GAAI,KAAM,CACnF,IAAM8P,EAAY5D,CAAAA,EAAAA,EAAAA,EAAAA,EAAkBD,EAAM6B,iBAAiB,CAAC0B,EAAexP,IAAI,CAAC,EAC5E8P,GACH3B,EAAU2B,EAEZ,CACD,EAEF,EAAG,CAAC7D,EAAOuD,EAAexP,IAAI,CAAE0N,EAAWrY,EAAM2X,kBAAkB,CAACL,IAAI,CAAC,EAEzE,IAAMR,GAAoB4D,CAAAA,EAAAA,EAAAA,EAAAA,EAAqB9D,EAAOiC,GAAQ7R,GAAG,CAAC,GAC1D,EACN,GAAG2T,CAAC,CACJC,MACCC,MAAAA,CAAAA,EAAAA,EAAAA,CAAAA,EAAW9B,EAASF,EAAQ8B,EAAEG,EAAE,CAAE5P,KAAAA,EAAW4M,GACzC,CACD3X,SAAU,eACVP,MAAO,KACR,EACCsL,KAAAA,CACL,IAEK,CAAC6P,GAASC,GAAW,CAAGvY,CAAAA,EAAAA,EAAAA,QAAAA,EAC7BqU,OAAAA,CAAAA,EAAAA,OAAAA,CAAAA,EAAAA,GAAkBI,IAAI,CAAC,GAAOyD,EAAEG,EAAE,GAAK9a,EAAMqX,WAAW,CAAC0D,OAAO,IAAhEjE,KAAAA,IAAAA,EAAAA,EACCA,GAAkBI,IAAI,CACrB,QAEqBlX,SADpB2a,EAAEG,EAAE,GACHhD,CAAAA,GAAAA,CAAAA,OAAmB9X,CAAAA,EAAAA,EAAM2X,kBAAkB,CAACG,eAAe,GAAxC9X,KAAAA,IAAAA,EAAAA,KAAAA,EAAAA,EAA0C+a,OAAO,EAClE/a,EAAM2X,kBAAkB,CAACG,eAAe,CAACiD,OAAO,CAChD/a,EAAM2X,kBAAkB,CAACoD,OAAO,MANtCjE,KAAAA,IAAAA,EAAAA,EAQCA,EAAiB,CAAC,EAAE,EAEhB,CAACmE,GAASC,GAAW,CAAGzY,CAAAA,EAAAA,EAAAA,QAAAA,EAASzC,EAAMqX,WAAW,CAAC4D,OAAO,EAC1DE,GAAgBpQ,CAAAA,EAAAA,EAAAA,OAAAA,EACrB,IACC8P,CAAAA,EAAAA,EAAAA,CAAAA,EACC7a,EAAM2X,kBAAkB,CAACoB,OAAO,CAChC/Y,EAAM2X,kBAAkB,CAACkB,MAAM,CAC/B7Y,EAAM2X,kBAAkB,CAACoD,OAAO,CAChC/a,EAAM2X,kBAAkB,CAACsD,OAAO,EAElC,CAACjb,EAAM2X,kBAAkB,CAAC,EAErByD,GAAoBrQ,CAAAA,EAAAA,EAAAA,OAAAA,EACzB,IAAM8P,CAAAA,EAAAA,EAAAA,CAAAA,EAAW9B,EAASF,EAAQkC,GAAQD,EAAE,CAAE5P,KAAAA,EAAW4M,GACzD,CAACiB,EAASF,EAAQkC,GAASjD,EAAgB,EAEtCuD,GAAiBtQ,CAAAA,EAAAA,EAAAA,OAAAA,EACtB,IAAM8P,CAAAA,EAAAA,EAAAA,CAAAA,EAAW9B,EAASF,EAAQkC,GAAQD,EAAE,CAAEG,GAASnD,GACvD,CAACiB,EAASF,EAAQkC,GAASjD,EAAiBmD,GAAQ,EAG/CK,GAAmBC,EAAAA,CAAOA,CAAC3H,MAAM,CAAC,GAChC3H,SAAAA,EAAEuP,QAAQ,EAAe5E,CAAAA,MAAAA,EAAAA,KAAAA,EAAAA,EAAO6E,UAAU,GAAI,MACnDzU,GAAG,CAAC,GACC,EACN,GAAGiF,CAAC,CACJ2O,MACCC,MAAAA,CAAAA,EAAAA,EAAAA,CAAAA,EAAW9B,EAAS9M,EAAG8O,GAAQD,EAAE,CAAE5P,KAAAA,EAAW4M,GAC1C,CACD3X,SAAU,eACVP,MAAO,KACR,EACCsL,KAAAA,CACL,IAEKwQ,GAAWC,EAAAA,CAAQA,CAAC3U,GAAG,CAAC,GACtB,EACN,GAAG4U,CAAC,CACJhB,MACCC,MAAAA,CAAAA,EAAAA,EAAAA,CAAAA,EAAWe,EAAG/C,EAAQkC,GAAQD,EAAE,CAAE5P,KAAAA,EAAW4M,GACzC,CACD3X,SAAU,eACVP,MAAO,KACR,EACCsL,KAAAA,CACL,IAGDlG,CAAAA,EAAAA,EAAAA,SAAAA,EAAU,KAGT,GAAI6W,CAAAA,EAAAA,EAAAA,EAAAA,EAAmB7b,EAAMqX,WAAW,CAAErX,EAAM2X,kBAAkB,CAAE,CAAC3X,EAAM8X,eAAe,EAAG,KAE5E9X,EAGb8W,EAUSA,CAdR9W,CAAAA,EAAM8X,eAAe,EAAI9X,EAAM2X,kBAAkB,CAACG,eAAe,EACpEoB,EAAelZ,OAAAA,CAAAA,EAAAA,EAAM2X,kBAAkB,CAACG,eAAe,CAACmB,WAAW,GAApDjZ,KAAAA,IAAAA,EAAAA,EAAwDA,EAAMqX,WAAW,CAAC4B,WAAW,EAC5C,MAApDjZ,EAAM2X,kBAAkB,CAACG,eAAe,CAACiD,OAAO,EACnDC,GACClE,OAAAA,CAAAA,EAAAA,GAAkBI,IAAI,CACrB,QAAmBlX,EAAAA,SAAX8b,EAAGhB,EAAE,GAAM9a,CAAAA,OAAAA,CAAAA,EAAAA,OAAAA,CAAAA,EAAAA,EAAM2X,kBAAkB,CAACG,eAAe,GAAxC9X,KAAAA,IAAAA,EAAAA,KAAAA,EAAAA,EAA0C+a,OAAO,GAAjD/a,KAAAA,IAAAA,EAAAA,EAAqDA,EAAM2X,kBAAkB,CAACoD,OAAO,MADzGjE,KAAAA,IAAAA,EAAAA,EAEKA,EAAiB,CAAC,EAAE,EAG6B,MAApD9W,EAAM2X,kBAAkB,CAACG,eAAe,CAACmD,OAAO,EACnDC,GAAWlb,EAAM2X,kBAAkB,CAACG,eAAe,CAACmD,OAAO,IAG5D/B,EAAelZ,EAAM2X,kBAAkB,CAACsB,WAAW,EACnD+B,GAAWlE,OAAAA,CAAAA,EAAAA,GAAkBI,IAAI,CAAC,GAAQ4E,EAAGhB,EAAE,GAAK9a,EAAM2X,kBAAkB,CAACoD,OAAO,IAAzEjE,KAAAA,IAAAA,EAAAA,EAA8EA,EAAiB,CAAC,EAAE,EAC7GoE,GAAWlb,EAAM2X,kBAAkB,CAACsD,OAAO,EAE7C,CACAlD,EAAmB,CAAC,CAAC/X,EAAM8X,eAAe,CAG3C,EAAG,CAAC9X,EAAM8X,eAAe,CAAC,EAE1B9S,CAAAA,EAAAA,EAAAA,SAAAA,EAAU,KACT,IAAM+W,EAAiBjF,GAAkBI,IAAI,CAAC,GAAQ4E,EAAGhB,EAAE,GAAKC,GAAQD,EAAE,EAC1E,GAAI,CAACiB,EAAgB,KAGhBjF,EAFJkE,GACCI,IACGtE,OAAAA,CAAAA,EAAAA,GAAkBI,IAAI,CAAC,GAAQ4E,EAAGhB,EAAE,GAAKM,GAAkBL,OAAO,IAAlEjE,KAAAA,IAAAA,EAAAA,EAAuEA,EAAiB,CAAC,EAAE,EAG3FsE,IACHF,GAAWE,GAAkBY,WAAW,CAE1C,CACD,EAAG,CAAClF,GAAmBiE,GAASK,GAAkB,EAElDpW,CAAAA,EAAAA,EAAAA,SAAAA,EAAU,KACT,IAAMiX,EAAW,CAChB3E,KAAMtX,EAAMqX,WAAW,CAACC,IAAI,CAC5B4E,gBAAiBlc,EAAMqX,WAAW,CAAC6E,eAAe,CAClDC,iBAAkBnc,EAAMqX,WAAW,CAAC8E,gBAAgB,CACpDlD,YAAaA,EACbZ,UAAWA,EACXQ,OAAAA,EACAkC,QAASA,GAAQD,EAAE,CACnB/B,QAAAA,EACAkC,QAAAA,EACD,EACMmB,EAAgBC,CAAAA,EAAAA,EAAAA,EAAAA,EAAqBJ,GACrCK,EAAgBD,CAAAA,EAAAA,EAAAA,EAAAA,EAAqBrc,EAAMqX,WAAW,EACtDkF,EAAUlD,OAAOC,IAAI,CAAC8C,GAAepC,IAAI,CAAC,GACxCoC,CAAa,CAAC5C,EAAkC,GAAK8C,CAAa,CAAC9C,EAAkC,EAEzG+C,GACH/B,CAAAA,EAAAA,EAAAA,eAAAA,EAAgB,KACfxC,EAAeoE,EAChB,EAEF,EAAG,CAACnB,GAASpC,EAAQ7Y,EAAMqX,WAAW,CAAE4B,EAAajB,EAAgBe,EAASgC,GAAQD,EAAE,CAAEzC,EAAU,EAEpG,IAAMmE,GAAgCpB,IAAqBA,GAAkBY,WAAW,GAAKf,GACvFwB,GACLzc,aAAAA,EAAMqX,WAAW,CAACC,IAAI,CACnB,cACAtX,EAAMqX,WAAW,CAACC,IAAI,GAAKqB,EAAAA,EAAWA,CAAC+D,SAAS,CAC/C,cACA,WAAa1c,EAAMqX,WAAW,CAACC,IAAI,CAACqF,iBAAiB,GACpDC,GACLhG,CAAAA,MAAAA,EAAAA,KAAAA,EAAAA,EAAO2B,UAAU,GAAI,MAAQc,OAAOC,IAAI,CAAC1C,EAAM2B,UAAU,EAAE1R,MAAM,CAAG,EACjEwS,OAAOC,IAAI,CAAC1C,EAAM2B,UAAU,EAC3BvR,GAAG,CAAC,QACA4P,EAGeA,EACGA,EAOdA,EAXR,GAAIA,CAAAA,OAAAA,CAAAA,EAAAA,EAAM2B,UAAU,GAAhB3B,KAAAA,IAAAA,EAAAA,KAAAA,EAAAA,CAAkB,CAACiG,EAAG,CAAC9c,KAAK,GAAI,KACnC,OAAO,KAER,IAAM+c,EAAalG,CAAAA,OAAAA,CAAAA,EAAAA,EAAM2B,UAAU,GAAhB3B,KAAAA,IAAAA,EAAAA,KAAAA,EAAAA,CAAkB,CAACiG,EAAG,CAACE,QAAQ,GAAI,KAChDC,EAAgBpG,CAAAA,OAAAA,CAAAA,EAAAA,EAAM2B,UAAU,GAAhB3B,KAAAA,IAAAA,EAAAA,KAAAA,EAAAA,CAAkB,CAACiG,EAAG,CAACI,WAAW,GAAI,KACtDC,EAAUpD,EAAY+C,GACtBjI,EACL,CAAC5U,EAAM2X,kBAAkB,CAACL,IAAI,CAACoB,UAAU,CAAC,MAAQ1Y,EAAM2X,kBAAkB,CAACL,IAAI,CAACoB,UAAU,CAAC,OAC3F,CAACoE,EACF,MAAO,CACNhC,GAAI+B,EACJ9c,MAAK,OAAE6W,CAAAA,EAAAA,EAAM2B,UAAU,GAAhB3B,KAAAA,IAAAA,EAAAA,KAAAA,EAAAA,CAAkB,CAACiG,EAAG,CAAC9c,KAAK,CACnC6U,SAAUA,EACVgG,MAAO,CACN,EAEG1P,KAAAA,EADC,CAAE/K,SAAU,cAAeP,MAAOgV,EAAW,MAAQ,MAAO,EAEhE,EAAwF1J,KAAAA,EAAtE,CAAE/K,SAAU,iBAAkBP,MAAO,MAAO,EAC9Dsd,CAAY,IAAZA,EAAoB,CAAE/c,SAAU,SAAUP,MAAO,QAAS,EAA0BsL,KAAAA,EACpF,CAAC0I,MAAM,CAACC,QACV,CACD,GACCD,MAAM,CAACC,SACR,KACEsJ,GAAiBpS,CAAAA,EAAAA,EAAAA,OAAAA,EAAQ,SACL6L,EAGNA,EAHnB,GAAIyB,MAAAA,GAAqBzB,CAAAA,MAAAA,EAAAA,KAAAA,EAAAA,OAAAA,CAAAA,EAAAA,EAAO2B,UAAU,GAAjB3B,KAAAA,IAAAA,EAAAA,KAAAA,EAAAA,CAAmB,CAACyB,EAAU,CAACtY,KAAK,GAAI,KAChE,OAED,IAAM+c,EAAalG,CAAAA,OAAAA,CAAAA,EAAAA,EAAM2B,UAAU,GAAhB3B,KAAAA,IAAAA,EAAAA,KAAAA,EAAAA,CAAkB,CAACyB,EAAU,CAAC0E,QAAQ,GAAI,KACvDnI,EACL,CAAC5U,EAAM2X,kBAAkB,CAACL,IAAI,CAACoB,UAAU,CAAC,MAAQ1Y,EAAM2X,kBAAkB,CAACL,IAAI,CAACoB,UAAU,CAAC,OAAS,CAACoE,EACtG,MAAO,CAACA,GAAclI,EAAY,CAAEzU,SAAU,cAAeP,MAAO,KAAM,EAA0BsL,KAAAA,CACrG,EAAG,CAAC0L,EAAOyB,EAAWrY,EAAM2X,kBAAkB,CAACL,IAAI,CAAC,EACpD,MACC,GAAA7X,EAAAC,GAAA,EAAC0d,EAAAA,CAAeA,CAAAA,UACdpd,EAAMqd,SAAS,EACf,GAAA5d,EAAAqC,IAAA,EAACwb,EAAAA,IAAIA,CAAAA,CAEJC,KAAM,CAAEC,QAAS,EAAGC,MAAO,GAAKC,EAAG,GAAI,EACvCC,QAAS,CAAEH,QAAS,EAAGC,MAAO,GAAKC,EAAG,EAAG,EACzCE,QAAS,CAAEJ,QAAS,EAAGC,MAAO,EAAGC,EAAG,CAAE,EACtCzd,UAAWC,CAAAA,EAAAA,EAAAA,EAAAA,EACV,4BACAiZ,EAAa,GAAK0E,CAAAA,EAAAA,EAAAA,EAAAA,EAAsB,CAAEje,MAAO,KAAM,GACvDuZ,EAAa,GAAK2E,CAAAA,EAAAA,EAAAA,EAAAA,EAA0B,CAAEle,MAAO,KAAM,GAC3DuZ,EAAa,GAAK,oBAGnB,GAAA1Z,EAAAqC,IAAA,EAACic,EAAAA,EAAUA,CAAAA,CAAC9d,UAAU,aACrB,GAAAR,EAAAC,GAAA,EAACse,EAAAA,EAASA,CAAAA,CAAC/d,UAAWC,CAAAA,EAAAA,EAAAA,EAAAA,EAAQiZ,EAAa,GAAK,8CAAuCsD,KACvF,GAAAhd,EAAAC,GAAA,EAACue,EAAAA,EAAeA,CAAAA,CAAChe,UAAWC,CAAAA,EAAAA,EAAAA,EAAAA,EAAQiZ,EAAa,GAAK,iDACpDnZ,EAAMqX,WAAW,CAAC6E,eAAe,MAGpC,GAAAzc,EAAAqC,IAAA,EAACoc,EAAAA,EAAWA,CAAAA,CAACje,UAAU,oDACrB2c,IACA,GAAAnd,EAAAC,GAAA,EAACW,MAAAA,CAAIJ,UAAU,yBACd,GAAAR,EAAAC,GAAA,EAACye,EAAAA,EAAQA,CAAAA,CACRC,MAAM,aACNC,QAASzB,GACTxZ,MAAK,OAAEpD,CAAAA,EAAAA,EAAMoZ,MAAM,GAAZpZ,KAAAA,IAAAA,EAAAA,KAAAA,EAAAA,OAAAA,CAAAA,EAAAA,EAAcqY,SAAS,GAAvBrY,KAAAA,IAAAA,EAAAA,KAAAA,EAAAA,EAAyB6Z,OAAO,CAACyE,IAAI,CAAC,MAC7CC,SAAU,QAEL3H,EACOC,EAFXyB,EAAauE,EAAG/B,EAAE,EACdlE,CAAAA,MAAAA,EAAAA,KAAAA,EAAAA,OAAAA,CAAAA,EAAAA,EAAO6B,iBAAiB,GAAxB7B,KAAAA,IAAAA,EAAAA,KAAAA,EAAAA,CAA0B,CAACiG,EAAG/B,EAAE,CAAC,GAAI,MACxChC,EAAUjC,OAAAA,CAAAA,EAAAA,CAAAA,EAAAA,EAAAA,EAAAA,EAAkBD,EAAM6B,iBAAiB,CAACoE,EAAG/B,EAAE,CAAC,IAAhDjE,KAAAA,IAAAA,EAAAA,EAAqDgC,EAEjE,EACA2F,MAAOnG,EAAYuE,GAAiB1F,IAAI,CAAC,GAAQ2F,EAAG/B,EAAE,GAAKzC,GAAanN,KAAAA,EACxE0P,MAAOuC,OAIV,GAAA1d,EAAAC,GAAA,EAACW,MAAAA,CAAIJ,UAAU,yBACd,GAAAR,EAAAC,GAAA,EAACye,EAAAA,EAAQA,CAAAA,CACRC,MAAM,SACNC,QAAS/C,GACTiD,SAAUzF,EACV0F,MAAO3F,EACPjE,SAAU4D,MAAAA,EACVoC,MAAO,CACNpC,MAAAA,EACI,CAAErY,SAAU,aAAcP,MAAO,KAAM,EACxCsL,KAAAA,EACHwM,EAAiB,CAAEvX,SAAU,YAAaP,MAAO,QAAS,EAA0BsL,KAAAA,EACpF,CAAC0I,MAAM,CAACC,aAGX,GAAApU,EAAAC,GAAA,EAACW,MAAAA,CAAIJ,UAAU,yBACd,GAAAR,EAAAC,GAAA,EAACye,EAAAA,EAAQA,CAAAA,CAACC,MAAM,UAAUC,QAAS3C,GAAU6C,SAAUvF,EAAYwF,MAAOzF,MAE3E,GAAAtZ,EAAAC,GAAA,EAACW,MAAAA,CAAIJ,UAAU,sBACd,GAAAR,EAAAC,GAAA,EAACye,EAAAA,EAAQA,CAAAA,CAACC,MAAM,UAAUC,QAASvH,GAAmByH,SAAUvD,GAAYwD,MAAOzD,OAEpF,GAAAtb,EAAAC,GAAA,EAACW,MAAAA,CAAIJ,UAAU,sBACd,GAAAR,EAAAC,GAAA,EAAC+e,EAAAA,CAASA,CAAAA,CACTvO,KAAK,SACLkO,MAAM,UACNI,MAAOvD,GACPyD,SAAUxD,GACVyD,UAAU,UACVC,KAAK,MACLC,IAAK,EACLpR,IAAKoL,EAAOiG,UAAU,KAGvB/F,EAAQgG,cAAc,CAAG,KAAO9D,IAChC,GAAAxb,EAAAqC,IAAA,EAACnC,EAAAA,CAAMA,CAAAA,CAACE,KAAMmf,EAAUpf,MAAM,SAASG,MAAM,uBAAuBE,UAAU,0BAAgB,mCAC5DuN,KAAKyR,KAAK,CAAClG,IAAAA,EAASgG,cAAc,CAAU,MAAQ,IAAI,4BAC9E9D,GAAQ,QAGpBI,MAAAA,IACA,GAAA5b,EAAAC,GAAA,EAACC,EAAAA,CAAMA,CAAAA,CAACE,KAAMqf,EAAetf,MAAM,QAAQG,MAAM,yBAAyBE,UAAU,yBAAgB,wCAIpGob,CAAAA,MAAAA,GAAAA,KAAAA,EAAAA,GAAgBW,WAAW,IAAKb,CAAAA,MAAAA,GAAAA,KAAAA,EAAAA,GAAea,WAAW,GAC1DZ,IACA,CAACoB,IACA,GAAA/c,EAAAqC,IAAA,EAACnC,EAAAA,CAAMA,CAAAA,CACNE,KAAMsf,EACNvf,MAAM,MACNG,MAAM,2DACNE,UAAU,0BACV,+DAC6Dmb,GAAkBY,WAAW,CAAC,aAAW,IACtG,GAAAvc,EAAAqC,IAAA,EAAC4H,OAAAA,CACAzJ,UAAU,wDACV0C,QAAS,IAAMuY,GAAWE,GAAkBY,WAAW,YACvD,yBACuBZ,GAAkBY,WAAW,CAAC,OAC9C,IAAI,6CA9FXhc,EAAMqX,WAAW,CAACC,IAAI,GAuGhC,mGC/ZA1V,CAAAA,EAAAA,SAAAA,CAAAA,EAAe4D,EAAAA,CAAMA,CAAE,6QCKvB,IAAM+O,EAAe6K,EAAAA,EAA0B,CAEzC5K,EAAsB4K,EAAAA,EAA6B,CAE/BA,EAAAA,EAA2B,CAE1BA,EAAAA,EAA4B,CAE/BA,EAAAA,EAAyB,CAElBA,EAAAA,EAAgC,CAE/D,IAAMC,EAAyB7d,EAAAA,UAAgB,CAK7C,CAAAZ,EAA2Ca,QAA1C,CAAExB,UAAAA,CAAS,CAAEqf,MAAAA,CAAK,CAAEnf,SAAAA,CAAQ,CAAE,GAAGH,EAAO,CAAAY,QAC1C,GAAAnB,EAAAqC,IAAA,EAACsd,EAAAA,EAAgC,EAChC3d,IAAKA,EACLxB,UAAW0B,CAAAA,EAAAA,EAAAA,EAAAA,EACV,uIACA2d,GAAS,OACTrf,GAEA,GAAGD,CAAK,WAERG,EACD,GAAAV,EAAAC,GAAA,EAAC6f,EAAAA,GAAgBA,CAAAA,CAACtf,UAAU,sBACK,GAEnC2B,CAAAA,EAAAA,EAAAA,CAAAA,EAAeyd,EAAwBD,EAAAA,EAAgC,CAACpe,WAAW,EAEnF,IAAMwe,EAAyBhe,EAAAA,UAAgB,CAG7C,CAAAZ,EAA0Ba,QAAzB,CAAExB,UAAAA,CAAS,CAAE,GAAGD,EAAO,CAAAY,QACzB,GAAAnB,EAAAC,GAAA,EAAC0f,EAAAA,EAAgC,EAChC3d,IAAKA,EACLxB,UAAW0B,CAAAA,EAAAA,EAAAA,EAAAA,EACV,wbACA1B,GAEA,GAAGD,CAAK,EACT,GAEF4B,CAAAA,EAAAA,EAAAA,CAAAA,EAAe4d,EAAwBJ,EAAAA,EAAgC,CAACpe,WAAW,EAEnF,IAAM0T,EAAsBlT,EAAAA,UAAgB,CAG1C,CAAAZ,EAA0Ca,QAAzC,CAAExB,UAAAA,CAAS,CAAEwf,WAAAA,EAAa,CAAC,CAAE,GAAGzf,EAAO,CAAAY,QACzC,GAAAnB,EAAAC,GAAA,EAAC0f,EAAAA,EAA4B,WAC5B,GAAA3f,EAAAC,GAAA,EAAC0f,EAAAA,EAA6B,EAC7B3d,IAAKA,EACLge,WAAYA,EACZxf,UAAW0B,CAAAA,EAAAA,EAAAA,EAAAA,EACV,uGACA,mVACA1B,GAEA,GAAGD,CAAK,IAEmB,GAE/B4B,CAAAA,EAAAA,EAAAA,CAAAA,EAAe8S,EAAqB0K,EAAAA,EAA6B,CAACpe,WAAW,EAE7E,IAAM2T,EAAmBnT,EAAAA,UAAgB,CAKvC,CAAAZ,EAAiCa,QAAhC,CAAExB,UAAAA,CAAS,CAAEqf,MAAAA,CAAK,CAAE,GAAGtf,EAAO,CAAAY,QAChC,GAAAnB,EAAAC,GAAA,EAAC0f,EAAAA,EAA0B,EAC1B3d,IAAKA,EACLxB,UAAW0B,CAAAA,EAAAA,EAAAA,EAAAA,EACV,kOACA2d,GAAS,OACTrf,GAEA,GAAGD,CAAK,EACT,GAEF4B,CAAAA,EAAAA,EAAAA,CAAAA,EAAe+S,EAAkByK,EAAAA,EAA0B,CAACpe,WAAW,EAEvE,IAAM0e,EAA2Ble,EAAAA,UAAgB,CAG/C,CAAAZ,EAA6Ca,QAA5C,CAAExB,UAAAA,CAAS,CAAEE,SAAAA,CAAQ,CAAEwf,QAAAA,CAAO,CAAE,GAAG3f,EAAO,CAAAY,QAC5C,GAAAnB,EAAAqC,IAAA,EAACsd,EAAAA,EAAkC,EAClC3d,IAAKA,EACLxB,UAAW0B,CAAAA,EAAAA,EAAAA,EAAAA,EACV,uOACA1B,GAED0f,QAASA,EACR,GAAG3f,CAAK,WAET,GAAAP,EAAAC,GAAA,EAACgK,OAAAA,CAAKzJ,UAAU,wEACf,GAAAR,EAAAC,GAAA,EAAC0f,EAAAA,EAAmC,WACnC,GAAA3f,EAAAC,GAAA,EAAC4U,EAAAA,GAASA,CAAAA,CAACrU,UAAU,gBAGtBE,IACkC,GAErCyB,CAAAA,EAAAA,EAAAA,CAAAA,EAAe8d,EAA0BN,EAAAA,EAAkC,CAACpe,WAAW,EAEvF,IAAM4e,EAAwBpe,EAAAA,UAAgB,CAG5C,CAAAZ,EAAoCa,QAAnC,CAAExB,UAAAA,CAAS,CAAEE,SAAAA,CAAQ,CAAE,GAAGH,EAAO,CAAAY,QACnC,GAAAnB,EAAAqC,IAAA,EAACsd,EAAAA,EAA+B,EAC/B3d,IAAKA,EACLxB,UAAW0B,CAAAA,EAAAA,EAAAA,EAAAA,EACV,uOACA1B,GAEA,GAAGD,CAAK,WAET,GAAAP,EAAAC,GAAA,EAACgK,OAAAA,CAAKzJ,UAAU,wEACf,GAAAR,EAAAC,GAAA,EAAC0f,EAAAA,EAAmC,WACnC,GAAA3f,EAAAC,GAAA,EAACmgB,EAAAA,GAAaA,CAAAA,CAAC5f,UAAU,6BAG1BE,IAC+B,GAElCyB,CAAAA,EAAAA,EAAAA,CAAAA,EAAege,EAAuBR,EAAAA,EAA+B,CAACpe,WAAW,EAEjF,IAAM8e,EAAoBte,EAAAA,UAAgB,CAKxC,CAAAZ,EAAiCa,QAAhC,CAAExB,UAAAA,CAAS,CAAEqf,MAAAA,CAAK,CAAE,GAAGtf,EAAO,CAAAY,QAChC,GAAAnB,EAAAC,GAAA,EAAC0f,EAAAA,EAA2B,EAC3B3d,IAAKA,EACLxB,UAAW0B,CAAAA,EAAAA,EAAAA,EAAAA,EAAG,oCAAqC2d,GAAS,OAAQrf,GACnE,GAAGD,CAAK,EACT,GAEF4B,CAAAA,EAAAA,EAAAA,CAAAA,EAAeke,EAAmBV,EAAAA,EAA2B,CAACpe,WAAW,EAEzE,IAAM+e,EAAwBve,EAAAA,UAAgB,CAG5C,CAAAZ,EAA0Ba,QAAzB,CAAExB,UAAAA,CAAS,CAAE,GAAGD,EAAO,CAAAY,QACzB,GAAAnB,EAAAC,GAAA,EAAC0f,EAAAA,EAA+B,EAAC3d,IAAKA,EAAKxB,UAAW0B,CAAAA,EAAAA,EAAAA,EAAAA,EAAG,2BAA4B1B,GAAa,GAAGD,CAAK,EAAG,GAE9G4B,CAAAA,EAAAA,EAAAA,CAAAA,EAAeme,EAAuBX,EAAAA,EAA+B,CAACpe,WAAW,kIC5J1E,IAAMgT,gBAAkB,SAACgM,CAAAA,CAAiBC,CAAAA,MAAqBC,EAAAA,UAAAA,MAAAA,CAAAA,GAAAA,KAAAA,IAAAA,SAAAA,CAAAA,EAAAA,EAAAA,SAAAA,CAAAA,EAAAA,CAC/D,CAACC,EAAYC,EAAc,CAAG3d,CAAAA,EAAAA,EAAAA,QAAAA,EAAS,GACvC4d,EAAWC,CAAAA,EAAAA,EAAAA,MAAAA,EAAO,IAAIN,EAAK,EACjChb,CAAAA,EAAAA,EAAAA,SAAAA,EAAU,KACT,IAAIub,EAAU,GACdF,EAASpF,OAAO,CAACuF,OAAO,CAAC,CAACC,EAAKxZ,KAC1BwZ,IAAQT,CAAI,CAAC/Y,EAAE,EAClBsZ,CAAAA,EAAU,GAEZ,GACIA,GACHH,EAAc,GAAiBF,EAAuBC,EAAa,EAAI,GAExEE,EAASpF,OAAO,CAAG,IAAI+E,EAAK,EAE1B,IAAIA,EAAK,EAEZ,IAAMU,EAAQ5d,CAAAA,EAAAA,EAAAA,WAAAA,EAAY,KACzBsd,EAAc,EACf,EAAG,EAAE,EAcL,MAZApb,CAAAA,EAAAA,EAAAA,SAAAA,EAAU,KACT,GAAIib,MAAAA,GAAsBE,EAAa,EAAG,CACzC,IAAMQ,EAAU1c,WAAW,KAC1Bmc,EAAc,EACf,EAAGH,GACH,MAAO,KACNW,aAAaD,EACd,CACD,CAED,EAAG,CAACV,EAAYE,EAAW,EAEpB,CAACA,EAAa,EAAGO,EAAM,EAGlBG,uBAAyB,SACrCb,CAAAA,CACAc,CAAAA,CACAb,CAAAA,MACAC,EAAAA,UAAAA,MAAAA,CAAAA,GAAAA,KAAAA,IAAAA,SAAAA,CAAAA,EAAAA,EAAAA,SAAAA,CAAAA,EAAAA,CAEM,CAACa,EAAaC,EAAe,CAAGve,CAAAA,EAAAA,EAAAA,QAAAA,EAAS,GACzC4d,EAAWC,CAAAA,EAAAA,EAAAA,MAAAA,EAAO,IAAIN,EAAK,EAC3BW,EAAUL,CAAAA,EAAAA,EAAAA,MAAAA,EAAsB,MACtCtb,CAAAA,EAAAA,EAAAA,SAAAA,EAAU,KAKT,IAAIub,EAAU,GAMd,GALAF,EAASpF,OAAO,CAACuF,OAAO,CAAC,CAACC,EAAKxZ,KAC1BwZ,IAAQT,CAAI,CAAC/Y,EAAE,EAClBsZ,CAAAA,EAAU,GAEZ,GACIA,EAAS,CACZ,IAAMU,QAAU,IAAMD,EAAe,GAAiBd,EAAuBC,EAAa,EAAI,EAC9FQ,CAAAA,EAAQ1F,OAAO,CAAGrW,OAAOX,UAAU,CAAC,KACnCgd,UACAN,EAAQ1F,OAAO,CAAG,IACnB,EAAG6F,EACJ,CACAT,EAASpF,OAAO,CAAG,IAAI+E,EAAK,EAE1B,IAAIA,EAAK,EACZhb,CAAAA,EAAAA,EAAAA,SAAAA,EAAU,IACF,KACF2b,EAAQ1F,OAAO,EAClB2F,aAAaD,EAAQ1F,OAAO,CAE9B,EACE,EAAE,EACL,GAAM,CAACkF,EAAYO,EAAM,CAAG1M,gBAAgB,CAAC+M,EAAY,CAAEd,EAAYC,GACvE,MAAO,CAACC,EAAYO,EAAM,gGCvEpB,IAAMvW,iBAAmB,CAI/BqP,EACA6E,IACI6C,CAAAA,EAAAA,EAAAA,EAAAA,EAAuB,WAAY1H,EAAK6E","sources":["webpack://_N_E/./components/common/error-message.tsx","webpack://_N_E/./components/common/full-load-screen.tsx","webpack://_N_E/./components/common/info-message.tsx","webpack://_N_E/./components/ui/drawer.tsx","webpack://_N_E/./hooks/useMediaQuery.tsx","webpack://_N_E/./components/common/modal.tsx","webpack://_N_E/./components/common/no-ssr.tsx","webpack://_N_E/./hooks/useKlippyStateHandler.tsx","webpack://_N_E/./components/klippy-state-badge.tsx","webpack://_N_E/./components/moonraker-state-badge.tsx","webpack://_N_E/./components/common/printer-state-header.tsx","webpack://_N_E/./components/common/query-status.tsx","webpack://_N_E/./components/setup-steps/unfold.tsx","webpack://_N_E/./components/setup-steps/unfold-collapsed.tsx","webpack://_N_E/./components/setup-steps/diff-modal.tsx","webpack://_N_E/./components/common/state-circle.tsx","webpack://_N_E/./components/setup-steps/file-changes.tsx","webpack://_N_E/./components/setup-steps/printer-rail-settings.tsx","webpack://_N_E/./components/ui/button.tsx","webpack://_N_E/./components/ui/dropdown-menu.tsx","webpack://_N_E/./hooks/useChangeEffect.tsx","webpack://_N_E/./hooks/useMainsail.tsx","webpack://_N_E/<anon>"],"sourcesContent":["import { XCircleIcon } from '@heroicons/react/24/solid';\nimport React from 'react';\nimport { twMerge } from 'tailwind-merge';\nimport { Banner } from '@/components/common/banner';\n\nexport type ErrorMessageProps = React.PropsWithChildren<{\n\ttitle?: string;\n\tclassName?: string;\n}>;\n\nexport const ErrorMessage: React.FC<ErrorMessageProps> = (props) => {\n\treturn (\n\t\t<Banner\n\t\t\tcolor=\"red\"\n\t\t\tIcon={XCircleIcon}\n\t\t\ttitle={props.title ? 'Error: ' + props.title : 'Error'}\n\t\t\tclassName={twMerge(props.className, 'whitespace-pre-wrap')}\n\t\t>\n\t\t\t{props.children}\n\t\t</Banner>\n\t);\n};\n","import { Spinner } from '@/components/common/spinner';\nimport { twJoin } from 'tailwind-merge';\n\nexport const FullLoadScreen = (props: { className?: string }) => {\n\treturn (\n\t\t<div className={twJoin('flex h-full w-full flex-1 items-center justify-center', props.className)}>\n\t\t\t<Spinner className=\"h-8 w-8\" />\n\t\t</div>\n\t);\n};\n","import { InformationCircleIcon } from '@heroicons/react/24/solid';\nimport React from 'react';\nimport { Banner } from '@/components/common/banner';\n\nexport type InfoMessageProps = React.PropsWithChildren<{\n\ttitle?: string;\n\tclassName?: string;\n}>;\n\nexport const InfoMessage: React.FC<InfoMessageProps> = (props) => {\n\treturn (\n\t\t<Banner\n\t\t\tcolor=\"blue\"\n\t\t\tIcon={InformationCircleIcon}\n\t\t\ttitle={props.title ? props.title : 'Info'}\n\t\t\tclassName={props.className}\n\t\t>\n\t\t\t{props.children}\n\t\t</Banner>\n\t);\n};\n","'use client';\n\nimport * as React from 'react';\nimport { Drawer as DrawerPrimitive } from 'vaul';\n\nimport { cn, setDisplayName } from '@/helpers/utils';\n\nconst Drawer = ({ shouldScaleBackground = true, ...props }: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n\t<DrawerPrimitive.Root shouldScaleBackground={shouldScaleBackground} {...props} />\n);\nDrawer.displayName = 'Drawer';\n\nconst DrawerTrigger = DrawerPrimitive.Trigger;\n\nconst DrawerPortal = DrawerPrimitive.Portal;\n\nconst DrawerClose = DrawerPrimitive.Close;\n\nconst DrawerOverlay = React.forwardRef<\n\tReact.ElementRef<typeof DrawerPrimitive.Overlay>,\n\tReact.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n\t<DrawerPrimitive.Overlay ref={ref} className={cn('fixed inset-0 z-50 bg-black/80', className)} {...props} />\n));\nsetDisplayName(DrawerOverlay, DrawerPrimitive.Overlay.displayName);\n\nconst DrawerContent = React.forwardRef<\n\tReact.ElementRef<typeof DrawerPrimitive.Content>,\n\tReact.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n\t<DrawerPortal>\n\t\t<DrawerOverlay />\n\t\t<DrawerPrimitive.Content\n\t\t\tref={ref}\n\t\t\tclassName={cn(\n\t\t\t\t'fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background outline-none focus:outline-none focus:ring-0 focus:ring-offset-0',\n\t\t\t\tclassName,\n\t\t\t)}\n\t\t\t{...props}\n\t\t>\n\t\t\t<div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n\t\t\t{children}\n\t\t</DrawerPrimitive.Content>\n\t</DrawerPortal>\n));\nsetDisplayName(DrawerContent, 'DrawerContent');\n\nconst DrawerHeader = ({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) => (\n\t<div className={cn('grid gap-1.5 p-4 text-center sm:text-left', className)} {...props} />\n);\nDrawerHeader.displayName = 'DrawerHeader';\n\nconst DrawerFooter = ({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) => (\n\t<div className={cn('mt-auto flex flex-col gap-2 p-4', className)} {...props} />\n);\nDrawerFooter.displayName = 'DrawerFooter';\n\nconst DrawerTitle = React.forwardRef<\n\tReact.ElementRef<typeof DrawerPrimitive.Title>,\n\tReact.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n\t<DrawerPrimitive.Title\n\t\tref={ref}\n\t\tclassName={cn('text-lg font-semibold leading-none tracking-tight', className)}\n\t\t{...props}\n\t/>\n));\nsetDisplayName(DrawerTitle, DrawerPrimitive.Title.displayName);\n\nconst DrawerDescription = React.forwardRef<\n\tReact.ElementRef<typeof DrawerPrimitive.Description>,\n\tReact.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n\t<DrawerPrimitive.Description ref={ref} className={cn('text-sm text-muted-foreground', className)} {...props} />\n));\nsetDisplayName(DrawerDescription, DrawerPrimitive.Description.displayName);\n\nexport {\n\tDrawer,\n\tDrawerPortal,\n\tDrawerOverlay,\n\tDrawerTrigger,\n\tDrawerClose,\n\tDrawerContent,\n\tDrawerHeader,\n\tDrawerFooter,\n\tDrawerTitle,\n\tDrawerDescription,\n};\n","'use client';\nimport { useEffect, useState } from 'react';\n\nexport function useMediaQuery(query: string): boolean {\n\tconst mediaQueryList = typeof window !== 'undefined' ? window.matchMedia(query) : null;\n\tconst [matches, setMatches] = useState(mediaQueryList?.matches ?? false);\n\n\tuseEffect(() => {\n\t\tif (mediaQueryList == null) {\n\t\t\treturn;\n\t\t}\n\t\tconst handleChange = (event: MediaQueryListEvent) => {\n\t\t\tsetMatches(event.matches);\n\t\t};\n\n\t\tmediaQueryList.addEventListener('change', handleChange);\n\n\t\treturn () => {\n\t\t\tmediaQueryList.removeEventListener('change', handleChange);\n\t\t};\n\t}, [mediaQueryList]);\n\n\treturn matches;\n}\n","'use client';\n/* This example requires Tailwind CSS v2.0+ */\nimport React, { Fragment, ReactElement, useCallback, useState } from 'react';\n\nimport { Button } from '@/components/ui/button';\nimport {\n\tDialog,\n\tDialogContent,\n\tDialogDescription,\n\tDialogHeader,\n\tDialogTitle,\n\tDialogTrigger,\n} from '@/components/ui/dialog';\nimport {\n\tDrawer,\n\tDrawerClose,\n\tDrawerContent,\n\tDrawerDescription,\n\tDrawerFooter,\n\tDrawerHeader,\n\tDrawerTitle,\n\tDrawerTrigger,\n} from '@/components/ui/drawer';\nimport { useMediaQuery } from '@/hooks/useMediaQuery';\nimport { Spinner } from '@/components/common/spinner';\nimport { Check, Cross } from 'lucide-react';\nimport { twJoin, twMerge } from 'tailwind-merge';\nimport { toast } from 'sonner';\nimport { ButtonProps, ButtonVariantProps } from '@/components/common/button';\nimport { AnimatedContainer } from '@/components/common/animated-container';\n\nexport interface ModalProps extends React.PropsWithChildren {\n\ttitle: string;\n\ttitleActions?: React.ReactNode;\n\tbody: string;\n\twide?: boolean | 'screen';\n\tisLoading?: boolean;\n\tcontent?: React.ReactNode;\n\tsuccess?: boolean;\n\tbuttonLabel?: string;\n\tbuttonVariant?: ButtonVariantProps['variant'];\n\tnoClose?: boolean;\n\tsecondButtonLabel?: string;\n\tdismissText?: string;\n\tdismissVariant?: ButtonVariantProps['variant'];\n\tsecondButtonVariant?: ButtonVariantProps['variant'];\n\tonClick?: () => any | Promise<any>;\n\tonClickSecondButton?: () => any | Promise<any>;\n\tonClose?: () => void;\n\tonClosed?: () => void;\n\tbuttons?: ReactElement<ButtonProps<string>>[];\n}\n\nexport interface ModalButtonProps<T extends string> {\n\tbutton: ReactElement<ButtonProps<T>>;\n\thide: () => void;\n}\n\nexport const ModalButton = <T extends string>(props: ModalButtonProps<T>) => {\n\tconst [isCompletingClick, setIsCompletingClick] = useState<1 | 2 | false>(false);\n\tconst { hide } = props;\n\tconst { onClick, children } = props.button.props;\n\tconst onButtonClick = useCallback(async () => {\n\t\tconst clickRes = onClick?.() as any | Promise<any>;\n\t\tif (clickRes instanceof Promise) {\n\t\t\tsetIsCompletingClick(1);\n\t\t\ttry {\n\t\t\t\tawait clickRes;\n\t\t\t\thide();\n\t\t\t} catch (e) {\n\t\t\t\tif (e instanceof Error) {\n\t\t\t\t\ttoast.error(e.message);\n\t\t\t\t}\n\t\t\t\tthrow e;\n\t\t\t} finally {\n\t\t\t\tsetIsCompletingClick(false);\n\t\t\t}\n\t\t} else {\n\t\t\thide();\n\t\t}\n\t}, [onClick, hide]);\n\treturn React.cloneElement(props.button, {\n\t\tonClick: onButtonClick,\n\t\tstyle: { direction: 'ltr' },\n\t\tchildren: (\n\t\t\t<>\n\t\t\t\t{children}\n\t\t\t\t{isCompletingClick === 1 && <Spinner className=\"inline-block\" noMargin={true} />}\n\t\t\t</>\n\t\t),\n\t});\n};\n\nexport function Modal(props: ModalProps) {\n\tconst { onClick, onClose: _onClose, onClosed, onClickSecondButton } = props;\n\tconst [open, setOpen] = useState(props.children == null);\n\tconst hide = useCallback(() => {\n\t\t_onClose?.();\n\t\tsetOpen(false);\n\t\tif (onClosed) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tonClosed();\n\t\t\t}, 250);\n\t\t}\n\t}, [onClosed, _onClose]);\n\n\tconst show = useCallback(() => {\n\t\tsetOpen(true);\n\t}, []);\n\n\tconst success = props.isLoading ? (\n\t\t<div className=\"flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-zinc-100 dark:bg-zinc-700\">\n\t\t\t<Spinner className=\"h-6 w-6\" noMargin={true} aria-hidden=\"true\" />\n\t\t</div>\n\t) : props.success === true ? (\n\t\t<div className=\"flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-lime-100 dark:bg-lime-700\">\n\t\t\t<Check className=\"h-6 w-6 text-lime-600 dark:text-lime-100\" aria-hidden=\"true\" />\n\t\t</div>\n\t) : props.success === false ? (\n\t\t<div className=\"flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-rose-100 dark:bg-rose-700\">\n\t\t\t<Cross className=\"h-6 w-6 text-rose-600 dark:text-rose-100\" aria-hidden=\"true\" />\n\t\t</div>\n\t) : null;\n\tconst isDesktop = useMediaQuery('(min-width: 768px)');\n\n\tconst buttons = props.buttons ?? [];\n\tif (props.buttonLabel && onClick) {\n\t\tbuttons.push(\n\t\t\t<Button variant={props.buttonVariant ?? 'info'} onClick={onClick}>\n\t\t\t\t{props.buttonLabel}\n\t\t\t</Button>,\n\t\t);\n\t}\n\tif (props.secondButtonLabel && onClickSecondButton) {\n\t\tbuttons.push(\n\t\t\t<Button variant={props.secondButtonVariant ?? 'indeterminate'} onClick={onClickSecondButton}>\n\t\t\t\t{props.secondButtonLabel}\n\t\t\t</Button>,\n\t\t);\n\t}\n\n\tif (isDesktop) {\n\t\treturn (\n\t\t\t<Dialog\n\t\t\t\topen={open}\n\t\t\t\tonOpenChange={(val) => {\n\t\t\t\t\tif (!val) {\n\t\t\t\t\t\thide();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tshow();\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{props.children && <DialogTrigger asChild>{props.children}</DialogTrigger>}\n\t\t\t\t<DialogContent\n\t\t\t\t\tclassName={twJoin(\n\t\t\t\t\t\tprops.wide === 'screen' ? 'max-w-screen-2xl' : props.wide ? 'max-w-6xl' : 'max-w-[600px]',\n\t\t\t\t\t\t'flex max-h-[90vh] flex-col',\n\t\t\t\t\t)}\n\t\t\t\t\tnoClose={props.noClose}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"flex flex-grow-0 items-center gap-4\">\n\t\t\t\t\t\t{success}\n\t\t\t\t\t\t<DialogHeader className=\"flex-1\">\n\t\t\t\t\t\t\t<DialogTitle className=\"flex items-center\">\n\t\t\t\t\t\t\t\t<div className=\"flex-1\">{props.title}</div>\n\t\t\t\t\t\t\t\t{props.titleActions && <div className=\"shrink-0\">{props.titleActions}</div>}\n\t\t\t\t\t\t\t</DialogTitle>\n\t\t\t\t\t\t\t<DialogDescription>{props.body}</DialogDescription>\n\t\t\t\t\t\t</DialogHeader>\n\t\t\t\t\t</div>\n\t\t\t\t\t<AnimatedContainer\n\t\t\t\t\t\tcontainerClassName=\"flex-1 flex\"\n\t\t\t\t\t\tclassName=\"scrollable -mr-4 grid flex-1 gap-2 overflow-hidden overflow-y-scroll pr-1.5\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{props.content}\n\t\t\t\t\t</AnimatedContainer>\n\t\t\t\t\t<div\n\t\t\t\t\t\tstyle={{ direction: 'rtl' }}\n\t\t\t\t\t\tclassName={twJoin(\n\t\t\t\t\t\t\t'grid flex-grow-0 grid-flow-col justify-end gap-2',\n\t\t\t\t\t\t\tbuttons.length > 1 || props.wide === 'screen'\n\t\t\t\t\t\t\t\t? 'grid-cols-3 lg:grid-cols-4 xl:grid-cols-5'\n\t\t\t\t\t\t\t\t: buttons.length === 1\n\t\t\t\t\t\t\t\t\t? 'grid-cols-2'\n\t\t\t\t\t\t\t\t\t: 'grid-cols-1',\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Button variant={props.dismissVariant ?? 'outline'} onClick={hide} style={{ direction: 'revert' }}>\n\t\t\t\t\t\t\t{props.dismissText ?? 'Cancel'}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t{buttons.map((button, i) => (\n\t\t\t\t\t\t\t<ModalButton button={button} key={i} hide={hide} />\n\t\t\t\t\t\t))}\n\t\t\t\t\t</div>\n\t\t\t\t</DialogContent>\n\t\t\t</Dialog>\n\t\t);\n\t}\n\n\treturn (\n\t\t<Drawer\n\t\t\topen={open}\n\t\t\tonOpenChange={(val) => {\n\t\t\t\tif (!val) {\n\t\t\t\t\thide();\n\t\t\t\t} else {\n\t\t\t\t\tshow();\n\t\t\t\t}\n\t\t\t}}\n\t\t>\n\t\t\t{props.children && <DrawerTrigger asChild>{props.children}</DrawerTrigger>}\n\t\t\t<DrawerContent className=\"flex max-h-[90vh] flex-col\">\n\t\t\t\t<DrawerHeader className=\"flex flex-grow-0 items-center gap-4 text-left\">\n\t\t\t\t\t{success}\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<DrawerTitle>{props.title}</DrawerTitle>\n\t\t\t\t\t\t<DrawerDescription>{props.body}</DrawerDescription>\n\t\t\t\t\t</div>\n\t\t\t\t</DrawerHeader>\n\t\t\t\t{props.content && (\n\t\t\t\t\t<div className=\"scrollable col-span-2 -mr-4 grid flex-1 gap-2 overflow-hidden overflow-y-scroll px-4 pb-2\">\n\t\t\t\t\t\t{props.content}\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\t<DrawerFooter className=\"flex-grow-0 pt-2\">\n\t\t\t\t\t{buttons.map((button, i) => (\n\t\t\t\t\t\t<ModalButton button={button} key={i} hide={hide} />\n\t\t\t\t\t))}\n\t\t\t\t\t<DrawerClose asChild>\n\t\t\t\t\t\t<Button variant={props.dismissVariant ?? 'outline'} onClick={hide}>\n\t\t\t\t\t\t\t{props.dismissText ?? 'Cancel'}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</DrawerClose>\n\t\t\t\t</DrawerFooter>\n\t\t\t</DrawerContent>\n\t\t</Drawer>\n\t);\n}\n","'use client';\nimport { useIsClient } from '@/hooks/isClient';\nimport dynamic from 'next/dynamic';\nimport React, { lazy } from 'react';\nimport { FullLoadScreen } from '@/components/common/full-load-screen';\nexport const NoSSR = (props: React.PropsWithChildren<{ fallback?: React.ReactNode }>) => {\n\tconst isClient = useIsClient();\n\treturn isClient ? <DynamicImport>{props.children}</DynamicImport> : props.fallback ?? <FullLoadScreen />;\n};\nconst DynamicImport = lazy(() =>\n\tPromise.resolve({ default: (props: React.PropsWithChildren) => <>{props.children}</> }),\n);\n","'use client';\n\nimport { useCallback, useEffect, useState } from 'react';\nimport { atom, useSetRecoilState } from 'recoil';\nimport { useMoonraker } from '@/moonraker/hooks';\n\nexport type KlippyReadyStates = 'ready' | 'error' | 'shutdown' | 'startup' | 'unknown';\n\nexport const useKlippyStateHandler = () => {\n\tconst { query, lastMessage } = useMoonraker({\n\t\tpassThroughUpdateMethods: ['notify_klippy_ready', 'notify_klippy_shutdown', 'notify_klippy_disconnected'],\n\t});\n\tconst [klippyReadyState, setKlippyReadyState] = useState<KlippyReadyStates>('unknown');\n\n\tconst queryKlippyState = useCallback(async () => {\n\t\tif (query != null) {\n\t\t\ttry {\n\t\t\t\tconst serverInfo = await query('server.info');\n\t\t\t\tif (serverInfo?.klippy_state == null) return;\n\t\t\t\tconst klippyState: KlippyReadyStates = serverInfo.klippy_state;\n\t\t\t\tsetKlippyReadyState(klippyState);\n\t\t\t\tif (klippyState === 'startup') {\n\t\t\t\t\t// Query for server info in two seconds as instructed by the moonraker docs.\n\t\t\t\t\t// Seems unnecessary with globally published events?\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tqueryKlippyState();\n\t\t\t\t\t}, 2000);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tsetKlippyReadyState('unknown');\n\t\t\t}\n\t\t}\n\t}, [query, setKlippyReadyState]);\n\n\tuseEffect(() => {\n\t\tif (query != null) {\n\t\t\tqueryKlippyState();\n\t\t}\n\t}, [query, queryKlippyState]);\n\n\tuseEffect(() => {\n\t\tif (lastMessage && 'method' in lastMessage && lastMessage.method === 'notify_klippy_ready') {\n\t\t\tsetKlippyReadyState('ready');\n\t\t}\n\t\tif (lastMessage && 'method' in lastMessage && lastMessage.method === 'notify_klippy_shutdown') {\n\t\t\tsetKlippyReadyState('shutdown');\n\t\t}\n\t\tif (lastMessage && 'method' in lastMessage && lastMessage.method === 'notify_klippy_disconnected') {\n\t\t\tsetKlippyReadyState('unknown');\n\t\t\tqueryKlippyState();\n\t\t}\n\t}, [lastMessage, queryKlippyState, setKlippyReadyState]);\n\n\treturn klippyReadyState;\n};\n","'use client';\nimport React from 'react';\nimport { useRecoilValue } from 'recoil';\nimport { twJoin } from 'tailwind-merge';\nimport { KlippyReadyStates, useKlippyStateHandler } from '@/hooks/useKlippyStateHandler';\nimport { Badge, BadgeProps, badgeTextColorStyle } from '@/components/common/badge';\n\ninterface Props {\n\tclassName?: string;\n}\n\nconst klipperStateToText = (klippyState: KlippyReadyStates) => {\n\tswitch (klippyState) {\n\t\tcase 'error':\n\t\t\treturn 'Klipper State: Error';\n\t\tcase 'ready':\n\t\t\treturn 'Klipper State: Ready';\n\t\tcase 'shutdown':\n\t\t\treturn 'Klipper State: Shutdown';\n\t\tcase 'startup':\n\t\t\treturn 'Klipper State: Startup';\n\t\tcase 'unknown':\n\t\t\treturn 'Klipper State: Unknown';\n\t\tdefault:\n\t\t\treturn 'Klipper State: Unknown';\n\t}\n};\n\nexport const KlippyStateBadge: React.FC<Props> = (props) => {\n\tconst klippyState = useKlippyStateHandler();\n\tlet color: BadgeProps['color'] = 'orange';\n\tswitch (klippyState) {\n\t\tcase 'error':\n\t\t\tcolor = 'red';\n\t\t\tbreak;\n\t\tcase 'ready':\n\t\t\tcolor = 'brand';\n\t\t\tbreak;\n\t\tcase 'shutdown':\n\t\t\tcolor = 'orange';\n\t\t\tbreak;\n\t\tcase 'startup':\n\t\t\tcolor = 'yellow';\n\t\t\tbreak;\n\t\tcase 'unknown':\n\t\t\tcolor = 'orange';\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tcolor = 'orange';\n\t\t\tbreak;\n\t}\n\n\treturn (\n\t\t<Badge color={color} title={klipperStateToText(klippyState)}>\n\t\t\t<svg className={twJoin(badgeTextColorStyle({ color }), 'h-2 w-2')} fill=\"currentColor\" viewBox=\"0 0 8 8\">\n\t\t\t\t<circle cx={4} cy={4} r={3} />\n\t\t\t</svg>\n\t\t\tKlipper\n\t\t</Badge>\n\t);\n};\n","'use client';\n\nimport React from 'react';\nimport { twJoin } from 'tailwind-merge';\nimport { useMoonraker } from '@/moonraker/hooks';\nimport { Badge, BadgeProps, badgeTextColorStyle } from '@/components/common/badge';\nimport { MoonrakerStatus } from '@/moonraker/types';\n\ninterface Props {\n\tclassName?: string;\n}\n\nconst moonrakerStatusToText = (moonrakerState: MoonrakerStatus | null) => {\n\tswitch (moonrakerState) {\n\t\tcase 'not-running':\n\t\t\treturn 'Moonraker State: Not Running';\n\t\tcase 'connected':\n\t\t\treturn 'Moonraker State: Connected';\n\t\tcase 'connecting':\n\t\t\treturn 'Moonraker State: Connecting';\n\t\tdefault:\n\t\t\treturn 'Moonraker State: Unknown';\n\t}\n};\n\nexport const MoonrakerStateBadge: React.FC<Props> = (props) => {\n\tconst { status } = useMoonraker();\n\tlet color: BadgeProps['color'] = 'orange';\n\tswitch (status) {\n\t\tcase 'not-running':\n\t\t\tcolor = 'red';\n\t\t\tbreak;\n\t\tcase 'connected':\n\t\t\tcolor = 'brand';\n\t\t\tbreak;\n\t\tcase 'connecting':\n\t\t\tcolor = 'yellow';\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tcolor = 'orange';\n\t\t\tbreak;\n\t}\n\treturn (\n\t\t<Badge color={color} title={moonrakerStatusToText(status)}>\n\t\t\t<svg className={twJoin(badgeTextColorStyle({ color }), 'h-2 w-2')} fill=\"currentColor\" viewBox=\"0 0 8 8\">\n\t\t\t\t<circle cx={4} cy={4} r={3} />\n\t\t\t</svg>\n\t\t\tMoonraker\n\t\t</Badge>\n\t);\n};\n","import { twJoin, twMerge } from 'tailwind-merge';\nimport { useIsClient } from '@/hooks/isClient';\nimport { Badge } from '@/components/common/badge';\nimport { useMainsailQuery } from '@/hooks/useMainsail';\nimport { useMoonrakerQuery, usePrinterObjectQuery } from '@/moonraker/hooks';\nimport { trpc } from '@/utils/trpc';\nimport React, { Fragment, useMemo } from 'react';\nimport { KlippyStateBadge } from '@/components/klippy-state-badge';\nimport { MoonrakerStateBadge } from '@/components/moonraker-state-badge';\nimport { LoadablePrinterState } from '@/recoil/printer';\nimport { useRecoilValue } from 'recoil';\n\ninterface PrinterHeaderProps {\n\tstateColorClass?: string;\n\tbreadcrumb?: React.ReactNode[];\n\tbadges?: React.ReactNode;\n\ttitle: React.ReactNode;\n\tdescription: React.ReactNode;\n}\n\nexport const PrinterHeader: React.FC<PrinterHeaderProps> = (props) => {\n\treturn (\n\t\t<div className=\"mt-6 @container\">\n\t\t\t<div className=\"border-t border-white/10 bg-zinc-700/15 backdrop-blur-sm\">\n\t\t\t\t<div className=\"mx-auto flex max-w-7xl flex-row items-center justify-between gap-x-8 gap-y-4 px-4 py-4\">\n\t\t\t\t\t<div className=\"flex items-center gap-x-3\">\n\t\t\t\t\t\t<div className={twMerge('flex-none rounded-full bg-green-400/10 p-1 text-zinc-400', props.stateColorClass)}>\n\t\t\t\t\t\t\t<div className=\"h-2 w-2 rounded-full bg-current\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<h1 className=\"flex gap-x-3 text-base leading-7\">\n\t\t\t\t\t\t\t{props.breadcrumb?.map((bc, index) => {\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<Fragment key={index}>\n\t\t\t\t\t\t\t\t\t\t<span className=\"font-semibold text-white\">{bc}</span>\n\t\t\t\t\t\t\t\t\t\t{index < (props.breadcrumb?.length ?? 0) - 1 && <span className=\"text-zinc-400\">/</span>}\n\t\t\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</h1>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"capitalize\">{props.badges}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<header className=\"sticky top-14 z-10 flex flex-grow-0 items-center gap-1 border-y border-b-white/10 border-t-white/5 bg-zinc-700/10 backdrop-blur-sm\">\n\t\t\t\t<div className=\"mx-auto w-full max-w-7xl gap-x-8 px-4 py-4\">\n\t\t\t\t\t<h3 className=\"dark:focus-ring-0 flex h-auto flex-1 border-none p-0 text-xl font-medium focus:ring-0 focus:ring-offset-0\">\n\t\t\t\t\t\t{props.title}\n\t\t\t\t\t</h3>\n\t\t\t\t\t<p className=\"dark:focus-ring-0 flex h-auto flex-1 border-none p-0 text-base font-medium text-muted-foreground focus:ring-0 focus:ring-offset-0 dark:text-muted-foreground\">\n\t\t\t\t\t\t{props.description}\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</header>\n\t\t</div>\n\t);\n};\n\nexport const PrinterStateHeader: React.FC<{ title?: string; description: string }> = (props) => {\n\tconst printerName = useMainsailQuery('general.printername', { initialData: 'Loading...' });\n\tconst savedPrinter = useRecoilValue(LoadablePrinterState);\n\tconst klippyState = useMoonrakerQuery('server.info');\n\tconst printerStateQuery = usePrinterObjectQuery('print_stats');\n\tconst printerState = printerStateQuery.data?.print_stats.state;\n\tconst breadCrumbs = useMemo(() => {\n\t\tconst crumbs: string[] = [printerName.data ?? 'RatOS'];\n\t\tif (klippyState.isLoading) {\n\t\t\tcrumbs.push('Loading...');\n\t\t} else if (savedPrinter?.name) {\n\t\t\tcrumbs.push(savedPrinter.name);\n\t\t}\n\t\treturn crumbs;\n\t}, [klippyState.isLoading, printerName.data, savedPrinter?.name]);\n\tconst isClient = useIsClient();\n\treturn isClient ? (\n\t\t<PrinterHeader\n\t\t\tstateColorClass={twJoin(\n\t\t\t\tklippyState.data?.klippy_state === 'error' && 'bg-red-400/10 text-red-400',\n\t\t\t\tklippyState.data?.klippy_state === 'startup' && 'bg-amber-400/10 text-amber-400',\n\t\t\t\tklippyState.data?.klippy_state === 'ready' && 'bg-green-400/10 text-green-400',\n\t\t\t\tklippyState.data?.klippy_state === 'shutdown' && 'bg-red-400/10 text-red-400',\n\t\t\t)}\n\t\t\tbreadcrumb={breadCrumbs}\n\t\t\tbadges={\n\t\t\t\t<Badge\n\t\t\t\t\tclassName=\"order-first capitalize @screen-sm:order-none\"\n\t\t\t\t\tcolor={\n\t\t\t\t\t\tprinterState === undefined\n\t\t\t\t\t\t\t? 'gray'\n\t\t\t\t\t\t\t: printerState == 'canceled'\n\t\t\t\t\t\t\t\t? 'pink'\n\t\t\t\t\t\t\t\t: printerState == 'complete'\n\t\t\t\t\t\t\t\t\t? 'green'\n\t\t\t\t\t\t\t\t\t: printerState == 'error'\n\t\t\t\t\t\t\t\t\t\t? 'red'\n\t\t\t\t\t\t\t\t\t\t: printerState === 'paused'\n\t\t\t\t\t\t\t\t\t\t\t? 'sky'\n\t\t\t\t\t\t\t\t\t\t\t: printerState === 'printing'\n\t\t\t\t\t\t\t\t\t\t\t\t? 'yellow'\n\t\t\t\t\t\t\t\t\t\t\t\t: printerState === 'standby'\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 'brand'\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 'gray'\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t{printerState === undefined ? 'Offline' : printerState ?? 'Loading...'}\n\t\t\t\t</Badge>\n\t\t\t}\n\t\t\ttitle={props.title}\n\t\t\tdescription={props.description}\n\t\t/>\n\t) : (\n\t\t<PrinterStateLoadingHeader />\n\t);\n};\n\nexport const PrinterConnectionHeader: React.FC<{ title?: string; description: string }> = (props) => {\n\tconst printerName = useMainsailQuery('general.printername', { initialData: 'Loading...' });\n\tconst savedPrinter = useRecoilValue(LoadablePrinterState);\n\tconst klippyState = useMoonrakerQuery('server.info');\n\tconst isClient = useIsClient();\n\tconst breadCrumbs = useMemo(() => {\n\t\tconst crumbs: string[] = [printerName.data ?? 'RatOS'];\n\t\tif (klippyState.isLoading) {\n\t\t\tcrumbs.push('Loading...');\n\t\t} else if (savedPrinter?.name) {\n\t\t\tcrumbs.push(savedPrinter.name);\n\t\t}\n\t\treturn crumbs;\n\t}, [klippyState.isLoading, printerName.data, savedPrinter?.name]);\n\treturn isClient ? (\n\t\t<PrinterHeader\n\t\t\tstateColorClass={twJoin(\n\t\t\t\tklippyState.data?.klippy_state === 'error' && 'bg-red-400/10 text-red-400',\n\t\t\t\tklippyState.data?.klippy_state === 'startup' && 'bg-amber-400/10 text-amber-400',\n\t\t\t\tklippyState.data?.klippy_state === 'ready' && 'bg-green-400/10 text-green-400',\n\t\t\t\tklippyState.data?.klippy_state === 'shutdown' && 'bg-red-400/10 text-red-400',\n\t\t\t)}\n\t\t\tbreadcrumb={breadCrumbs}\n\t\t\tbadges={\n\t\t\t\t<div className=\"inline-flex space-x-1 sm:flex-row-reverse sm:justify-end sm:space-x-2 sm:space-y-0 md:flex-row\">\n\t\t\t\t\t<KlippyStateBadge />\n\t\t\t\t\t<MoonrakerStateBadge />\n\t\t\t\t</div>\n\t\t\t}\n\t\t\ttitle={props.title}\n\t\t\tdescription={props.description}\n\t\t/>\n\t) : (\n\t\t<PrinterStateLoadingHeader />\n\t);\n};\n\nexport const PrinterStateLoadingHeader: React.FC = () => (\n\t<PrinterHeader\n\t\tstateColorClass=\"bg-gray-400/10 text-gray-400\"\n\t\tbreadcrumb={['RatOS', 'Loading...']}\n\t\ttitle=\"Loading printer state...\"\n\t\tdescription=\"Please wait while RatOS loads your printer state\"\n\t\tbadges={\n\t\t\t<div className=\"flex space-x-1 sm:flex-row-reverse sm:justify-end sm:space-x-2 sm:space-y-0 md:flex-row\">\n\t\t\t\t<KlippyStateBadge />\n\t\t\t\t<MoonrakerStateBadge />\n\t\t\t</div>\n\t\t}\n\t/>\n);\n","'use client';\nimport { TRPCClientErrorLike } from '@trpc/client';\nimport { UseTRPCQueryResult } from '@trpc/react-query/src/shared/hooks/types';\nimport { AppRouter } from '@/server/routers';\nimport { ErrorMessage } from '@/components/common/error-message';\nimport { Spinner } from '@/components/common/spinner';\nimport { motion } from 'framer-motion';\nimport { AnimatedContainer } from '@/components/common/animated-container';\nimport { UseQueryResult } from '@tanstack/react-query';\n\nexport const QueryStatus = (query: UseQueryResult<any, any>) => {\n\tlet content = null;\n\tif (query.isError) {\n\t\tcontent = (\n\t\t\t<div className=\"mb-4\">\n\t\t\t\t<ErrorMessage>{query.error?.message}</ErrorMessage>\n\t\t\t</div>\n\t\t);\n\t}\n\tif (query.isLoading) {\n\t\tcontent = (\n\t\t\t<div className=\"mb-4 flex items-center justify-center\">\n\t\t\t\t<Spinner />\n\t\t\t</div>\n\t\t);\n\t}\n\treturn <AnimatedContainer>{content}</AnimatedContainer>;\n};\n","import { CaretDownIcon, CaretUpIcon } from '@radix-ui/react-icons';\nimport { ArrowDownFromLine, ArrowUpFromLine, PlusCircle, UnfoldVertical } from 'lucide-react';\nimport { createElement, useCallback } from 'react';\nimport { Decoration, DecorationProps } from 'react-diff-view';\nimport { twJoin } from 'tailwind-merge';\n\nconst ICON_TYPE_MAPPING = {\n\tup: (props: { className?: string }) => {\n\t\treturn (\n\t\t\t<svg\n\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\twidth=\"24\"\n\t\t\t\theight=\"24\"\n\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\tfill=\"none\"\n\t\t\t\tstroke=\"currentColor\"\n\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\tstrokeLinecap=\"round\"\n\t\t\t\tstrokeLinejoin=\"round\"\n\t\t\t\tclassName={twJoin('lucide lucide-arrow-up-from-line', props.className)}\n\t\t\t>\n\t\t\t\t<path d=\"m18 9-6-6-6 6\" />\n\t\t\t\t<path d=\"M12 3v14\" />\n\t\t\t\t<path d=\"M5 21h14\" strokeDasharray=\"2,4\" />\n\t\t\t</svg>\n\t\t);\n\t},\n\tdown: (props: { className?: string }) => {\n\t\treturn (\n\t\t\t<svg\n\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\twidth=\"24\"\n\t\t\t\theight=\"24\"\n\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\tfill=\"none\"\n\t\t\t\tstroke=\"currentColor\"\n\t\t\t\tstrokeWidth=\"2\"\n\t\t\t\tstrokeLinecap=\"round\"\n\t\t\t\tstrokeLinejoin=\"round\"\n\t\t\t\tclassName={twJoin('lucide lucide-arrow-up-from-line rotate-180', props.className)}\n\t\t\t>\n\t\t\t\t<path d=\"m18 9-6-6-6 6\" />\n\t\t\t\t<path d=\"M12 3v14\" />\n\t\t\t\t<path d=\"M5 21h14\" strokeDasharray=\"2,4\" />\n\t\t\t</svg>\n\t\t);\n\t},\n\tnone: UnfoldVertical,\n};\n\ninterface Props extends Omit<DecorationProps, 'children'> {\n\tstart: number;\n\tend: number;\n\tcollapsedLines: number | null;\n\tfloatUp?: boolean;\n\tdirection: 'up' | 'down' | 'none';\n\tonExpand: (start: number, end: number) => void;\n}\n\nexport default function Unfold({ start, end, direction, onExpand, collapsedLines, floatUp, ...props }: Props) {\n\tconst expand = useCallback(() => onExpand(start, end), [onExpand, start, end]);\n\n\tconst IconType = ICON_TYPE_MAPPING[direction];\n\tconst lines = end - start;\n\n\treturn (\n\t\t<Decoration {...props}>\n\t\t\t<div\n\t\t\t\tclassName=\"flex cursor-pointer items-center justify-center gap-1 bg-sky-400/20 p-3 font-sans text-base font-medium text-slate-400 hover:bg-sky-400/50 hover:text-foreground\"\n\t\t\t\tonClick={expand}\n\t\t\t\ttitle={`Expand${direction === 'none' ? '' : ' ' + direction}`}\n\t\t\t>\n\t\t\t\t<IconType className=\"size-4\" />\n\t\t\t</div>\n\t\t\t<div className=\"flex h-full w-full items-center justify-center bg-sky-400/5 p-3 text-[1rem] font-normal leading-4 text-slate-600\">\n\t\t\t\t{collapsedLines == null ? (\n\t\t\t\t\t<span className=\"inline-block h-4\" />\n\t\t\t\t) : (\n\t\t\t\t\t<span className={floatUp ? 'relative -top-1 -translate-y-full' : undefined}>\n\t\t\t\t\t\t{'<--'} {collapsedLines} collapsed line{collapsedLines === 1 ? '' : 's'} {'-->'}\n\t\t\t\t\t</span>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</Decoration>\n\t);\n}\n","import { getCollapsedLinesCountBetween, HunkData } from 'react-diff-view';\nimport Unfold from '@/components/setup-steps/unfold';\n\ninterface Props {\n\tpreviousHunk: HunkData;\n\tcurrentHunk?: HunkData;\n\tlinesCount: number;\n\tonExpand: (start: number, end: number) => void;\n}\n\nconst LINES_TO_EXPAND = 20;\n\nexport default function UnfoldCollapsed({ previousHunk, currentHunk, linesCount, onExpand }: Props) {\n\tif (!currentHunk) {\n\t\tconst nextStart = previousHunk.oldStart + previousHunk.oldLines;\n\t\tconst collapsedLines = linesCount - nextStart + 1;\n\n\t\tif (collapsedLines <= 0) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn (\n\t\t\t<Unfold\n\t\t\t\tdirection=\"down\"\n\t\t\t\tstart={nextStart}\n\t\t\t\tend={collapsedLines > LINES_TO_EXPAND ? nextStart + LINES_TO_EXPAND : linesCount + 1}\n\t\t\t\tcollapsedLines={collapsedLines}\n\t\t\t\tonExpand={onExpand}\n\t\t\t/>\n\t\t);\n\t}\n\n\tconst collapsedLines = getCollapsedLinesCountBetween(previousHunk, currentHunk);\n\n\tif (!previousHunk) {\n\t\tif (!collapsedLines) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst start = Math.max(currentHunk.oldStart - LINES_TO_EXPAND, 1);\n\n\t\treturn (\n\t\t\t<Unfold\n\t\t\t\tdirection=\"up\"\n\t\t\t\tstart={collapsedLines > LINES_TO_EXPAND ? start : 1}\n\t\t\t\tend={currentHunk.oldStart}\n\t\t\t\tcollapsedLines={collapsedLines}\n\t\t\t\tonExpand={onExpand}\n\t\t\t/>\n\t\t);\n\t}\n\n\tconst collapsedStart = previousHunk.oldStart + previousHunk.oldLines;\n\tconst collapsedEnd = currentHunk.oldStart;\n\n\tif (collapsedLines < LINES_TO_EXPAND) {\n\t\treturn (\n\t\t\t<Unfold\n\t\t\t\tdirection=\"none\"\n\t\t\t\tstart={collapsedStart}\n\t\t\t\tend={collapsedEnd}\n\t\t\t\tonExpand={onExpand}\n\t\t\t\tcollapsedLines={collapsedLines}\n\t\t\t/>\n\t\t);\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<Unfold\n\t\t\t\tdirection=\"down\"\n\t\t\t\tstart={collapsedStart}\n\t\t\t\tend={collapsedStart + LINES_TO_EXPAND}\n\t\t\t\tonExpand={onExpand}\n\t\t\t\tcollapsedLines={null}\n\t\t\t/>\n\t\t\t<Unfold\n\t\t\t\tdirection=\"up\"\n\t\t\t\tstart={collapsedEnd - LINES_TO_EXPAND}\n\t\t\t\tend={collapsedEnd}\n\t\t\t\tonExpand={onExpand}\n\t\t\t\tfloatUp={true}\n\t\t\t\tcollapsedLines={collapsedLines}\n\t\t\t/>\n\t\t</>\n\t);\n}\n","'use client';\n/* This example requires Tailwind CSS v2.0+ */\nimport React, { Fragment, ReactElement, useCallback, useMemo, useState } from 'react';\nimport { Dialog, Transition } from '@headlessui/react';\nimport {\n\tparseDiff,\n\tDiff,\n\tDiffType,\n\tViewType,\n\tHunkData,\n\tTokenizeOptions,\n\ttokenize,\n\tuseTokenizeWorker,\n\tmarkEdits,\n\tDecoration,\n\twithSourceExpansion,\n\tHunk,\n\tuseSourceExpansion,\n\tuseMinCollapsedLines,\n\tGutterOptions,\n\tcomputeOldLineNumber,\n\tcomputeNewLineNumber,\n} from 'react-diff-view';\nimport type { FileState } from '@/server/routers/printer';\nimport 'react-diff-view/style/index.css';\nimport { XMarkIcon } from '@heroicons/react/20/solid';\nimport { Button, ButtonProps } from '@/components/common/button';\nimport { twJoin, twMerge } from 'tailwind-merge';\nimport { Modal } from '@/components/common/modal';\nimport { Minus, Plus, X } from 'lucide-react';\nimport UnfoldCollapsed from '@/components/setup-steps/unfold-collapsed';\nimport { InfoMessage } from '@/components/common/info-message';\n\ninterface DiffModalProps {\n\tfileName: string;\n\tdiff: string;\n\tstate: FileState;\n\tsource?: string | null;\n\tchangedOnDisk?: boolean;\n\tisOpen: boolean;\n\tbuttons?: ReactElement<ButtonProps<string>>[];\n\tsetIsOpen: (open: boolean) => void;\n}\n\nconst Tokenizer = new Worker(new URL('@/app/_worker/tokenizer', import.meta.url));\n\nconst TwoColumns = (props: { className?: string }) => {\n\treturn (\n\t\t<svg\n\t\t\tviewBox=\"0 0 24 24\"\n\t\t\tfill=\"none\"\n\t\t\tstrokeWidth=\"1.5\"\n\t\t\tstroke=\"currentColor\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\tclassName={twMerge('h-6 w-6', props.className)}\n\t\t>\n\t\t\t<path\n\t\t\t\tstrokeLinecap=\"round\"\n\t\t\t\tstrokeLinejoin=\"round\"\n\t\t\t\td=\"M 12 4.5 L 12 19.5 M 4.125 19.5 L 19.875 19.5 C 20.496 19.5 21 18.996 21 18.375 L 21 5.625 C 21 5.004 20.496 4.5 19.875 4.5 L 4.125 4.5 C 3.504 4.5 3 5.004 3 5.625 L 3 18.375 C 3 18.996 3.504 19.5 4.125 19.5 Z\"\n\t\t\t/>\n\t\t</svg>\n\t);\n};\nconst SingleColumn = (props: { className?: string }) => {\n\treturn (\n\t\t<svg\n\t\t\tviewBox=\"0 0 24 24\"\n\t\t\tfill=\"none\"\n\t\t\tstrokeWidth=\"1.5\"\n\t\t\tstroke=\"currentColor\"\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\tclassName={twMerge('h-6 w-6', props.className)}\n\t\t>\n\t\t\t<path\n\t\t\t\tstrokeLinecap=\"round\"\n\t\t\t\tstrokeLinejoin=\"round\"\n\t\t\t\td=\"M 4.125 19.5 L 19.875 19.5 C 20.496 19.5 21 18.996 21 18.375 L 21 5.625 C 21 5.004 20.496 4.5 19.875 4.5 L 4.125 4.5 C 3.504 4.5 3 5.004 3 5.625 L 3 18.375 C 3 18.996 3.504 19.5 4.125 19.5 Z\"\n\t\t\t/>\n\t\t</svg>\n\t);\n};\n\nconst proccessTokens = (hunks: HunkData[]) => {\n\tif (!hunks) {\n\t\treturn undefined;\n\t}\n\n\tconst options: TokenizeOptions = {\n\t\thighlight: false,\n\t\tenhancers: [markEdits(hunks, { type: 'block' })],\n\t};\n\n\ttry {\n\t\treturn tokenize(hunks, options);\n\t} catch (ex) {\n\t\treturn undefined;\n\t}\n};\n\nfunction useEnhancers(hunks: HunkData[], oldSource: string | null) {\n\tconst [hunksWithSourceExpanded, expandRange] = useSourceExpansion(hunks, oldSource);\n\tconst hunksWithMinLinesCollapsed = useMinCollapsedLines(0, hunksWithSourceExpanded, oldSource);\n\tconst options = {\n\t\toldSource,\n\t\tlanguage: 'properties',\n\t\thunks: hunksWithMinLinesCollapsed,\n\t};\n\tconst { tokens } = useTokenizeWorker(Tokenizer, options);\n\treturn {\n\t\texpandRange,\n\t\ttokens,\n\t\thunks: hunksWithMinLinesCollapsed,\n\t};\n}\n\nexport const DiffModal: React.FC<DiffModalProps> = (props) => {\n\tconst { isOpen, setIsOpen } = props;\n\tconst [viewType, setViewType] = useState<ViewType>('unified');\n\n\tconst close = useCallback(() => {\n\t\tsetIsOpen(false);\n\t}, [setIsOpen]);\n\n\tconst file = useMemo(() => {\n\t\treturn parseDiff(props.diff)[0];\n\t}, [props.diff]);\n\tconst linesCount = props.source ? props.source.split('\\n').length : 0;\n\n\tconst { tokens, expandRange, hunks } = useEnhancers(file.hunks, props.source ?? '');\n\n\tconst renderGutter = useCallback(({ change, side }: GutterOptions) => {\n\t\tconst lineNumber = side === 'old' ? computeOldLineNumber(change) : computeNewLineNumber(change);\n\t\tconst changeIcon =\n\t\t\tchange.type === 'delete' && side === 'old' ? (\n\t\t\t\t<Minus className=\"h-4 w-4\" />\n\t\t\t) : change.type === 'insert' && side === 'new' ? (\n\t\t\t\t<Plus className=\"h-4 w-4\" />\n\t\t\t) : (\n\t\t\t\t''\n\t\t\t);\n\t\treturn (\n\t\t\t<div className=\"flex flex-1 items-center gap-1 text-left\">\n\t\t\t\t<span className=\"flex-1\">{lineNumber === -1 ? null : lineNumber}</span>\n\t\t\t\t{changeIcon}\n\t\t\t</div>\n\t\t);\n\t}, []);\n\n\tconst renderHunk = (children: ReactElement[], hunk: HunkData, i: number, hunks: HunkData[]) => {\n\t\tconst previousElement = children[children.length - 1];\n\t\tconst decorationElement = props.source ? (\n\t\t\t<UnfoldCollapsed\n\t\t\t\tkey={`decoration-${hunk.content}`}\n\t\t\t\tpreviousHunk={previousElement && previousElement.props.hunk}\n\t\t\t\tcurrentHunk={hunk}\n\t\t\t\tlinesCount={linesCount}\n\t\t\t\tonExpand={expandRange}\n\t\t\t/>\n\t\t) : (\n\t\t\t<></>\n\t\t);\n\t\tchildren.push(decorationElement);\n\n\t\tconst hunkElement = <Hunk key={`hunk-${hunk.content}`} hunk={hunk} />;\n\t\tchildren.push(hunkElement);\n\n\t\tif (i === hunks.length - 1 && props.source) {\n\t\t\tconst unfoldTailElement = (\n\t\t\t\t<UnfoldCollapsed key=\"decoration-tail\" previousHunk={hunk} linesCount={linesCount} onExpand={expandRange} />\n\t\t\t);\n\t\t\tchildren.push(unfoldTailElement);\n\t\t}\n\n\t\treturn children;\n\t};\n\n\tconst diffType: DiffType = props.state === 'changed' ? 'modify' : props.state === 'created' ? 'add' : 'delete';\n\treturn (\n\t\tisOpen && (\n\t\t\t<Modal\n\t\t\t\ttitle={`Changes to ${props.fileName}`}\n\t\t\t\tonClosed={close}\n\t\t\t\tnoClose={true}\n\t\t\t\twide=\"screen\"\n\t\t\t\tbuttons={props.buttons}\n\t\t\t\tbody={`RatOS wants to make the following changes to ${props.fileName}. Do you want to accept these changes?`}\n\t\t\t\tdismissText=\"Close\"\n\t\t\t\ttitleActions={\n\t\t\t\t\t<div className=\"relative flex flex-nowrap items-center gap-2 text-muted-foreground\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName={twJoin(\n\t\t\t\t\t\t\t\tviewType === 'unified'\n\t\t\t\t\t\t\t\t\t? 'cursor-default text-sky-600 dark:text-sky-400'\n\t\t\t\t\t\t\t\t\t: 'hover:text-zinc-800 dark:hover:text-zinc-100',\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\tonClick={() => setViewType('unified')}\n\t\t\t\t\t\t\ttitle=\"Unified View\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<SingleColumn className=\"h-6 w-6\" />\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclassName={twJoin(\n\t\t\t\t\t\t\t\tviewType === 'split'\n\t\t\t\t\t\t\t\t\t? 'cursor-default text-sky-600 dark:text-sky-400'\n\t\t\t\t\t\t\t\t\t: 'hover:text-zinc-800 dark:hover:text-zinc-100',\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\tonClick={() => setViewType('split')}\n\t\t\t\t\t\t\ttitle=\"Split View\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<TwoColumns className=\"h-6 w-6\" />\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<div className=\"!ml-2 !mr-1 h-6 border-l border-l-zinc-200 dark:border-l-zinc-800\"></div>\n\t\t\t\t\t\t<button className=\"hover:text-zinc-800 dark:hover:text-zinc-100\" onClick={close}>\n\t\t\t\t\t\t\t<X className=\"h-6 w-6\" />\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t\tcontent={\n\t\t\t\t\t<>\n\t\t\t\t\t\t<div className=\"git-diff flex-1 overflow-y-auto scrollbar-thin scrollbar-thumb-zinc-400 scrollbar-thumb-rounded-md dark:scrollbar-thumb-zinc-600\">\n\t\t\t\t\t\t\t{props.fileName === 'printer.cfg' && props.changedOnDisk && (\n\t\t\t\t\t\t\t\t<InfoMessage title=\"You might not need these changes\" className=\"mb-4\">\n\t\t\t\t\t\t\t\t\tRatOS currently does not have the ability to port your customizations to generated code, and\n\t\t\t\t\t\t\t\t\tprinter.cfg is usually only regenerated when printer limit defaults have changed or you swap hardware\n\t\t\t\t\t\t\t\t\ttype. If you haven't changed hardware types, you can most likely ignore these changes.\n\t\t\t\t\t\t\t\t</InfoMessage>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t<Diff hunks={hunks} viewType={viewType} diffType={diffType} tokens={tokens} renderGutter={renderGutter}>\n\t\t\t\t\t\t\t\t{(hunks) => hunks.reduce(renderHunk, [])}\n\t\t\t\t\t\t\t</Diff>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>\n\t\t\t\t}\n\t\t\t></Modal>\n\t\t)\n\t);\n};\n","import { cva, VariantProps } from 'class-variance-authority';\nimport React from 'react';\nimport { twMerge } from 'tailwind-merge';\nimport type { Intents } from '@/components/common/button';\n\ntype IntentNoOutline = Exclude<Intents, 'outline'>;\n\ntype StateIntents = { [key in IntentNoOutline]: string };\n\nexport const StateCircleVariants = cva('flex-none rounded-full p-1 relative flex', {\n\tvariants: {\n\t\tstate: {\n\t\t\tsuccess: 'dark:text-green-400 text-green-500 bg-green-400/20',\n\t\t\tinfo: 'dark:text-sky-400 text-sky-500 bg-sky-400/20',\n\t\t\twarning: 'dark:text-yellow-400 text-yellow-500 bg-yellow-400/20',\n\t\t\tdanger: 'dark:text-rose-400 text-rose-500 bg-rose-400/20',\n\t\t\tindeterminate: 'dark:text-zinc-400 text-zinc-500 bg-zinc-500/20',\n\t\t\tplain: 'dark:text-zinc-400 text-zinc-500 bg-zinc-500/20',\n\t\t\tprimary: 'dark:text-brand-400 text-brand-500 bg-brand-500/20',\n\t\t} satisfies StateIntents,\n\t},\n});\n\nexport type StateCircleProps = VariantProps<typeof StateCircleVariants> & {\n\tping?: boolean;\n\ttitle?: string;\n\tpingClassName?: string;\n};\n\nexport const StateCircle: React.FC<StateCircleProps> = (props) => {\n\treturn (\n\t\t<div className={StateCircleVariants(props)}>\n\t\t\t<div\n\t\t\t\ttitle={props.title}\n\t\t\t\tclassName={twMerge(\n\t\t\t\t\t'absolute inset-0 transition-all duration-700',\n\t\t\t\t\tprops.ping ? 'opacity-100' : 'opacity-0',\n\t\t\t\t\tprops.pingClassName ?? 'z-2',\n\t\t\t\t)}\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclassName={twMerge('absolute inset-0 inline-flex animate-ping rounded-full bg-current opacity-0 ease-out')}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className=\"h-2 w-2 rounded-full bg-current\" />\n\t\t</div>\n\t);\n};\n","import React, { Fragment, useCallback, useEffect, useMemo, useState } from 'react';\nimport { SerializedPrinterConfiguration } from '@/zods/printer-configuration';\nimport { trpc } from '@/utils/trpc';\nimport { useQuery } from '@tanstack/react-query';\nimport type { FilesToWriteWithState, FileState } from '@/server/routers/printer';\nimport { DiffModal } from '@/components/setup-steps/diff-modal';\nimport { twJoin } from 'tailwind-merge';\nimport { Menu, Transition } from '@headlessui/react';\nimport { EllipsisVerticalIcon } from '@heroicons/react/20/solid';\nimport { StateCircle } from '@/components/common/state-circle';\nimport { Badge } from '@/components/common/badge';\nimport { Button, Intents } from '@/components/common/button';\nimport { useChangeEffect } from '@/hooks/useChangeEffect';\nimport { CheckIcon } from '@heroicons/react/24/outline';\nimport { QueryStatus } from '@/components/common/query-status';\nimport {\n\tDropdownMenu,\n\tDropdownMenuTrigger,\n\tDropdownMenuContent,\n\tDropdownMenuItem,\n} from '@/components/ui/dropdown-menu';\nimport { Check, ChevronLast, FileClock, FileDiff, LucideIcon, Plus, Trash } from 'lucide-react';\n\ninterface FileChangesProps {\n\tserializedConfig: SerializedPrinterConfiguration | null;\n\tonFilesToOverwriteChange: (files: string[]) => void;\n\tonFilesToIgnoreChange: (files: string[]) => void;\n}\n\ninterface ChangedFileProps {\n\tfile: Unpacked<FilesToWriteWithState>;\n\tisMarkedOverwritten: boolean;\n\tisMarkedIgnored: boolean;\n\taddFileToOverwrite: (fileName: string) => void;\n\tremoveFileToOverwrite: (fileName: string) => void;\n\taddFileToIgnore: (fileName: string) => void;\n\tremoveFileToIgnore: (fileName: string) => void;\n}\n\nconst statuses: { [key in FileState]: string } = {\n\tcreated: 'text-green-700 bg-green-50 ring-green-600/20',\n\tunchanged: 'text-zinc-600 bg-zinc-50 ring-zinc-500/10',\n\tchanged: 'text-yellow-800 bg-yellow-50 ring-yellow-600/20',\n\tremoved: 'text-rose-700 bg-rose-50 ring-rose-600/20',\n};\n\ntype Action = {\n\taction: (fileName: string) => void;\n\tintent: Intents;\n\ttitle: string;\n\ticon: LucideIcon;\n};\n\nconst ChangedFile: React.FC<ChangedFileProps> = (props) => {\n\tconst {\n\t\taddFileToIgnore,\n\t\taddFileToOverwrite,\n\t\tfile,\n\t\tremoveFileToIgnore,\n\t\tremoveFileToOverwrite,\n\t\tisMarkedIgnored,\n\t\tisMarkedOverwritten,\n\t} = props;\n\n\tconst [isDiffModalOpen, setIsDiffModalOpen] = useState(false);\n\tconst showDiffModal = useCallback((file: Unpacked<FilesToWriteWithState>) => {\n\t\tsetIsDiffModalOpen(true);\n\t}, []);\n\n\tconst wouldOtherwiseBeWritten =\n\t\t(file.state === 'changed' && (file.overwrite || isMarkedOverwritten)) ||\n\t\tfile.state === 'created' ||\n\t\tfile.state === 'removed';\n\tconst isOverwritable = file.state === 'changed';\n\tconst isIgnorable = file.state === 'created' || file.state === 'removed' || file.state === 'changed';\n\tconst isIgnored = isMarkedIgnored;\n\tconst isOverwritten = isMarkedOverwritten || (file.overwrite && file.exists);\n\tconst needsExplicitAction =\n\t\tisIgnorable && !isIgnored && !isOverwritten && !wouldOtherwiseBeWritten && file.changedFromConfig === true;\n\tconst isDeleted = file.state === 'removed' && !isIgnored;\n\tconst isCreated = file.state === 'created' && !isIgnored;\n\tconst isChanged = file.state === 'changed' && !isIgnored && isOverwritten;\n\n\tconst actions = useMemo(() => {\n\t\tif (file.fileName === 'RatOS.cfg') {\n\t\t\treturn [];\n\t\t}\n\t\tlet skip: null | Action = null;\n\t\tlet ignore: null | Action = null;\n\t\tlet overwrite: null | Action = null;\n\t\tlet write: null | Action = null;\n\t\tlet remove: null | Action = null;\n\t\tif (isOverwritten && !isIgnored) {\n\t\t\tskip = {\n\t\t\t\ttitle: 'Skip',\n\t\t\t\tintent: 'indeterminate',\n\t\t\t\ticon: ChevronLast,\n\t\t\t\taction: isMarkedOverwritten ? removeFileToOverwrite : addFileToIgnore,\n\t\t\t};\n\t\t} else if (isOverwritable) {\n\t\t\toverwrite = {\n\t\t\t\ttitle: 'Accept changes',\n\t\t\t\tintent: 'warning',\n\t\t\t\ticon: Check,\n\t\t\t\taction: isMarkedIgnored\n\t\t\t\t\t? (f) => {\n\t\t\t\t\t\t\tremoveFileToIgnore(f);\n\t\t\t\t\t\t\taddFileToOverwrite(f);\n\t\t\t\t\t\t}\n\t\t\t\t\t: addFileToOverwrite,\n\t\t\t};\n\t\t}\n\t\tif (isIgnorable && !isIgnored && !isOverwritten) {\n\t\t\tignore = {\n\t\t\t\ttitle: 'Keep existing file',\n\t\t\t\ticon: FileClock,\n\t\t\t\tintent: needsExplicitAction ? (file.fileName === 'printer.cfg' ? 'info' : 'danger') : 'indeterminate',\n\t\t\t\taction: addFileToIgnore,\n\t\t\t};\n\t\t} else if (isIgnored) {\n\t\t\tif (file.state === 'removed') {\n\t\t\t\tremove = {\n\t\t\t\t\ttitle: 'Delete',\n\t\t\t\t\tintent: 'danger',\n\t\t\t\t\ticon: Trash,\n\t\t\t\t\taction: removeFileToIgnore,\n\t\t\t\t};\n\t\t\t} else if (isIgnorable && !isOverwritable) {\n\t\t\t\twrite = {\n\t\t\t\t\ttitle: 'Write',\n\t\t\t\t\ticon: Plus,\n\t\t\t\t\tintent: 'success',\n\t\t\t\t\taction: removeFileToIgnore,\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\treturn [skip, ignore, overwrite, write, remove].filter(Boolean);\n\t}, [\n\t\taddFileToIgnore,\n\t\taddFileToOverwrite,\n\t\tfile.fileName,\n\t\tfile.state,\n\t\tisIgnorable,\n\t\tisIgnored,\n\t\tisMarkedIgnored,\n\t\tisMarkedOverwritten,\n\t\tisOverwritable,\n\t\tisOverwritten,\n\t\tneedsExplicitAction,\n\t\tremoveFileToIgnore,\n\t\tremoveFileToOverwrite,\n\t]);\n\n\tconst fileState: Intents = useMemo(() => {\n\t\tif (needsExplicitAction) {\n\t\t\treturn 'danger';\n\t\t}\n\t\tif (file.state === 'changed') {\n\t\t\tif ((isIgnored && file.overwrite) || (isOverwritten && !file.overwrite)) {\n\t\t\t\treturn 'warning';\n\t\t\t} else if (isOverwritten) {\n\t\t\t\treturn 'success';\n\t\t\t} else {\n\t\t\t\treturn 'indeterminate';\n\t\t\t}\n\t\t}\n\t\tif (file.state === 'created') {\n\t\t\tif (isIgnored) {\n\t\t\t\treturn 'danger';\n\t\t\t} else {\n\t\t\t\treturn 'success';\n\t\t\t}\n\t\t}\n\t\tif (file.state === 'removed') {\n\t\t\tif (!isIgnored) {\n\t\t\t\treturn 'warning';\n\t\t\t}\n\t\t}\n\t\treturn 'indeterminate';\n\t}, [file.overwrite, file.state, isIgnored, isOverwritten, needsExplicitAction]);\n\n\tconst [shouldPing] = useChangeEffect([fileState], 4000);\n\n\treturn (\n\t\t<li key={file.fileName} className=\"flex items-center justify-between gap-x-6 py-5\">\n\t\t\t{file?.diff != null && (\n\t\t\t\t<DiffModal\n\t\t\t\t\tdiff={file.diff}\n\t\t\t\t\tfileName={file.fileName}\n\t\t\t\t\tstate={file.state}\n\t\t\t\t\tchangedOnDisk={file.changedOnDisk}\n\t\t\t\t\tsource={file.diskContent}\n\t\t\t\t\tsetIsOpen={setIsDiffModalOpen}\n\t\t\t\t\tbuttons={actions.map((a) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\ta.action(file.fileName);\n\t\t\t\t\t\t\t\t\tsetIsDiffModalOpen(false);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tvariant={a.intent}\n\t\t\t\t\t\t\t\tkey={a.title}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<a.icon className=\"h-4 w-4\" />\n\t\t\t\t\t\t\t\t{a.title}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t\tisOpen={isDiffModalOpen}\n\t\t\t\t></DiffModal>\n\t\t\t)}\n\t\t\t<div className=\"min-w-0\">\n\t\t\t\t<div className=\"flex items-center gap-x-3\">\n\t\t\t\t\t<StateCircle state={fileState} ping={shouldPing} />\n\t\t\t\t\t<p className=\"text-sm font-medium leading-6 text-zinc-900 dark:text-zinc-100\">{file.fileName}</p>\n\t\t\t\t\t<Badge\n\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\tcolor={\n\t\t\t\t\t\t\tfile.state === 'changed'\n\t\t\t\t\t\t\t\t? !file.changedFromConfig\n\t\t\t\t\t\t\t\t\t? 'sky'\n\t\t\t\t\t\t\t\t\t: 'yellow'\n\t\t\t\t\t\t\t\t: file.state === 'created'\n\t\t\t\t\t\t\t\t\t? 'green'\n\t\t\t\t\t\t\t\t\t: file.state === 'removed'\n\t\t\t\t\t\t\t\t\t\t? 'rose'\n\t\t\t\t\t\t\t\t\t\t: 'gray'\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t{file.state === 'changed'\n\t\t\t\t\t\t\t? file.changedFromConfig\n\t\t\t\t\t\t\t\t? 'Pending changes'\n\t\t\t\t\t\t\t\t: 'Changed on disk'\n\t\t\t\t\t\t\t: file.state === 'created'\n\t\t\t\t\t\t\t\t? 'New file'\n\t\t\t\t\t\t\t\t: file.state === 'removed'\n\t\t\t\t\t\t\t\t\t? 'Deleted'\n\t\t\t\t\t\t\t\t\t: 'No updates'}\n\t\t\t\t\t</Badge>\n\t\t\t\t\t{file.changedOnDisk && (\n\t\t\t\t\t\t<Badge size=\"sm\" color=\"sky\">\n\t\t\t\t\t\t\tChanged on disk\n\t\t\t\t\t\t</Badge>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t\t<div className=\"mt-1 flex items-center gap-x-2 text-xs leading-5 text-zinc-500 dark:text-zinc-400\">\n\t\t\t\t\t<p className=\"\">\n\t\t\t\t\t\t{file.state === 'changed' &&\n\t\t\t\t\t\t\t(isOverwritten && !isIgnored\n\t\t\t\t\t\t\t\t? 'File will be backed up and overwritten.' +\n\t\t\t\t\t\t\t\t\t(file.fileName != 'RatOS.cfg' ? ` Any changes you've made can be recovered from the backup.` : '')\n\t\t\t\t\t\t\t\t: !needsExplicitAction\n\t\t\t\t\t\t\t\t\t? 'File will be skipped.'\n\t\t\t\t\t\t\t\t\t: 'Please review the changes and make a decision.')}\n\t\t\t\t\t\t{file.state === 'created' && (isIgnored ? 'File will be skipped.' : 'File will be created.')}\n\t\t\t\t\t\t{file.state === 'removed' && (!isIgnored ? 'File will be deleted.' : 'File will remain untouched.')}\n\t\t\t\t\t\t{file.state === 'unchanged' &&\n\t\t\t\t\t\t\t(file.changedOnDisk ? 'File has user modifications.' : 'File remains untouched.')}\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"flex flex-none items-center gap-x-4\">\n\t\t\t\t<div className=\"flex flex-none items-center\">\n\t\t\t\t\t{needsExplicitAction ? (\n\t\t\t\t\t\t<Button variant=\"info\" onClick={() => showDiffModal(file)}>\n\t\t\t\t\t\t\tReview changes\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<CheckIcon className=\"h-5 w-5 text-green-500 dark:text-brand-500\" aria-hidden=\"true\" />\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t\t<DropdownMenu>\n\t\t\t\t\t<DropdownMenuTrigger className=\"-m-2.5 block p-2.5 text-zinc-500 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-zinc-100\">\n\t\t\t\t\t\t<span className=\"sr-only\">Open options</span>\n\t\t\t\t\t\t<EllipsisVerticalIcon className=\"h-5 w-5\" aria-hidden=\"true\" />\n\t\t\t\t\t</DropdownMenuTrigger>\n\t\t\t\t\t<DropdownMenuContent>\n\t\t\t\t\t\t{actions.map((action) => (\n\t\t\t\t\t\t\t<DropdownMenuItem key={action.title} onClick={() => action.action(file.fileName)} className=\"gap-2\">\n\t\t\t\t\t\t\t\t{<action.icon className=\"h-4 w-4 text-muted-foreground\" />}\n\t\t\t\t\t\t\t\t{action.title}\n\t\t\t\t\t\t\t</DropdownMenuItem>\n\t\t\t\t\t\t))}\n\t\t\t\t\t\t<DropdownMenuItem disabled={file.diff == null} onClick={() => showDiffModal(file)} className=\"gap-2\">\n\t\t\t\t\t\t\t<FileDiff className=\"h-4 w-4 text-muted-foreground\" />\n\t\t\t\t\t\t\tView diff\n\t\t\t\t\t\t</DropdownMenuItem>\n\t\t\t\t\t</DropdownMenuContent>\n\t\t\t\t</DropdownMenu>\n\t\t\t</div>\n\t\t</li>\n\t);\n};\n\nexport const FileChanges: React.FC<FileChangesProps> = (props) => {\n\tconst { serializedConfig, onFilesToIgnoreChange, onFilesToOverwriteChange } = props;\n\tconst [filesToOverwrite, setFilesToOverwrite] = useState<string[]>([]);\n\n\tconst addFileToOverwrite = useCallback((fileName: string) => {\n\t\tsetFilesToOverwrite((files) => (files.includes(fileName) ? files : [...files, fileName]));\n\t}, []);\n\n\tconst removeFileToOverwrite = useCallback((fileName: string) => {\n\t\tsetFilesToOverwrite((files) => (files.includes(fileName) ? files.filter((file) => file !== fileName) : files));\n\t}, []);\n\n\tconst [filesToIgnore, setFilesToIgnore] = useState<string[]>([]);\n\n\tconst addFileToIgnore = useCallback((fileName: string) => {\n\t\tsetFilesToIgnore((files) => (files.includes(fileName) ? files : [...files, fileName]));\n\t}, []);\n\n\tconst removeFileToIgnore = useCallback((fileName: string) => {\n\t\tsetFilesToIgnore((files) => (files.includes(fileName) ? files.filter((file) => file !== fileName) : files));\n\t}, []);\n\n\tuseEffect(() => {\n\t\tonFilesToOverwriteChange(filesToOverwrite);\n\t}, [filesToOverwrite, onFilesToOverwriteChange]);\n\tuseEffect(() => {\n\t\tonFilesToIgnoreChange(filesToIgnore);\n\t}, [filesToIgnore, onFilesToIgnoreChange]);\n\n\tconst client = trpc.useUtils().client;\n\tconst filesToWrite = useQuery({\n\t\tqueryKey: ['printer.filesToWrite', serializedConfig],\n\t\tqueryFn: async () => {\n\t\t\tconst res = await client.printer.getFilesToWrite.mutate({\n\t\t\t\tconfig: serializedConfig ?? ({} as any),\n\t\t\t});\n\t\t\treturn res;\n\t\t},\n\t\tenabled: serializedConfig != null,\n\t});\n\treturn (\n\t\t<>\n\t\t\t<ul role=\"list\" className=\"divide-y divide-zinc-100 dark:divide-zinc-800\">\n\t\t\t\t{filesToWrite.data?.map((fileToWrite) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<ChangedFile\n\t\t\t\t\t\t\tkey={fileToWrite.fileName}\n\t\t\t\t\t\t\tfile={fileToWrite}\n\t\t\t\t\t\t\tisMarkedIgnored={filesToIgnore.includes(fileToWrite.fileName)}\n\t\t\t\t\t\t\tisMarkedOverwritten={filesToOverwrite.includes(fileToWrite.fileName)}\n\t\t\t\t\t\t\taddFileToIgnore={addFileToIgnore}\n\t\t\t\t\t\t\taddFileToOverwrite={addFileToOverwrite}\n\t\t\t\t\t\t\tremoveFileToIgnore={removeFileToIgnore}\n\t\t\t\t\t\t\tremoveFileToOverwrite={removeFileToOverwrite}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</ul>\n\t\t\t<QueryStatus {...filesToWrite} />\n\t\t</>\n\t);\n};\n","import { Dropdown } from '@/components/forms/dropdown';\nimport { Board } from '@/zods/boards';\nimport React, { startTransition, useCallback, useEffect, useMemo, useState } from 'react';\nimport { Drivers } from '@/data/drivers';\nimport { findPreset, Steppers } from '@/data/steppers';\nimport { BadgeProps, badgeBackgroundColorStyle, badgeBorderColorStyle } from '@/components/common/badge';\nimport { TextInput } from '@/components/forms/text-input';\nimport { Banner } from '@/components/common/banner';\nimport { BoltIcon, LightBulbIcon } from '@heroicons/react/24/outline';\nimport { useRecoilValue, useSetRecoilState } from 'recoil';\nimport { FireIcon } from '@heroicons/react/24/solid';\nimport {\n\tBasePrinterRail,\n\tPrinterAxis,\n\tPrinterRailDefinition,\n\tgetSupportedVoltages,\n\tmatchesDefaultRail,\n} from '@/zods/motion';\nimport { deserializeDriver, serializePrinterRail } from '@/utils/serialization';\nimport { PrinterRailState, PrinterRailsState } from '@/recoil/printer';\nimport { useToolheads } from '@/hooks/useToolheadConfiguration';\nimport { trpc } from '@/utils/trpc';\nimport { twMerge } from 'tailwind-merge';\nimport { z } from 'zod';\nimport { AnimatePresence, motion } from 'framer-motion';\nimport { Card } from '@/components/common/card';\nimport { CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\n\nconst railArray = z.array(BasePrinterRail);\n\ninterface PrinterRailSettingsProps {\n\tselectedBoard: Board | null;\n\tprinterRail: Zod.infer<typeof BasePrinterRail>;\n\tprinterRailDefault: Zod.infer<typeof PrinterRailDefinition>;\n\tperformanceMode?: boolean | null;\n\terrors?: z.inferFormattedError<typeof BasePrinterRail>;\n\t/**\n\t * This component should always be rendered to ensure the settings are updated when\n\t * switching performance mode, even if it isn't visible.\n\t */\n\tisVisible?: boolean;\n}\n\nexport const PrinterRailSettings: React.FC<PrinterRailSettingsProps> = (props) => {\n\tconst toolheads = useToolheads();\n\tconst toolhead = toolheads.find((th) => th.getExtruderAxis() === props.printerRail.axis);\n\tconst canBeExtruderlessBoard = toolheads.every((th) => th.hasToolboard());\n\tconst usesToolboard = toolhead?.getExtruderAxis() === props.printerRailDefault.axis && toolhead?.hasToolboard();\n\tconst board = usesToolboard ? toolhead.getToolboard() : props.selectedBoard;\n\tconst [performanceMode, setPerformanceMode] = useState(!!props.performanceMode);\n\tconst setPrinterRail = useSetRecoilState(PrinterRailState(props.printerRail.axis));\n\tconst printerRails = useRecoilValue(PrinterRailsState);\n\tconst [motorSlot, setMotorSlot] = useState(\n\t\tprops.printerRail.motorSlot && props.selectedBoard?.motorSlots?.[props.printerRail.motorSlot]\n\t\t\t? props.printerRail.motorSlot\n\t\t\t: undefined,\n\t);\n\tconst integratedDriver = board?.integratedDrivers\n\t\t? board.integratedDrivers[\n\t\t\t\tmotorSlot ?? (props.printerRail.axis.startsWith('extruder') ? PrinterAxis.extruder : props.printerRail.axis)\n\t\t\t] ??\n\t\t\tboard.integratedDrivers[\n\t\t\t\tprops.printerRail.axis.startsWith('extruder') ? PrinterAxis.extruder : props.printerRail.axis\n\t\t\t]\n\t\t: null;\n\tconst [driver, setDriver] = useState(\n\t\tintegratedDriver != null\n\t\t\t? deserializeDriver(integratedDriver) ?? props.printerRail.driver\n\t\t\t: props.printerRail.driver,\n\t);\n\tconst [stepper, setStepper] = useState(props.printerRail.stepper);\n\tconst [homingSpeed, setHomingSpeed] = useState(\n\t\tperformanceMode\n\t\t\t? props.printerRailDefault.performanceMode?.homingSpeed ?? props.printerRailDefault.homingSpeed\n\t\t\t: props.printerRailDefault.homingSpeed,\n\t);\n\tconst errorCount =\n\t\tprops.errors == null\n\t\t\t? 0\n\t\t\t: Object.keys(props.errors).reduce((acc, key) => {\n\t\t\t\t\tconst objKey = key as keyof typeof props.errors;\n\t\t\t\t\tconst keyErrors = props.errors?.[objKey];\n\t\t\t\t\tif (keyErrors == null) {\n\t\t\t\t\t\treturn acc;\n\t\t\t\t\t}\n\t\t\t\t\tconst count = Array.isArray(keyErrors) ? keyErrors.length : keyErrors._errors.length;\n\t\t\t\t\treturn acc + count;\n\t\t\t\t}, 0);\n\n\tconst isSlotInUse = useCallback(\n\t\t(slot: string | undefined) => {\n\t\t\tif (slot == null) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn printerRails.some((pr) => {\n\t\t\t\tconst railToolhead = toolheads.find((th) => th.getExtruderAxis() === pr.axis);\n\t\t\t\tif (pr.axis === props.printerRail.axis) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (railToolhead?.hasToolboard()) {\n\t\t\t\t\t// The rail is an extruder rail and the toolhead has a toolboard, no chance of conflict.\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn pr.motorSlot === slot;\n\t\t\t});\n\t\t},\n\t\t[printerRails, props.printerRail.axis, toolheads],\n\t);\n\n\tconst guessMotorSlot = trpc.mcu.reversePinLookup.useQuery(\n\t\t{\n\t\t\taxis: props.printerRail.axis,\n\t\t\tcanUseExtruderlessConfigs: canBeExtruderlessBoard,\n\t\t\tboardPath: board?.path ?? '',\n\t\t},\n\t\t{ enabled: !!board },\n\t);\n\tuseEffect(() => {\n\t\tif (guessMotorSlot.data && motorSlot == null && board?.motorSlots?.[guessMotorSlot.data] != null) {\n\t\t\t// Once the motorslot has been determined, make sure we update all affected details.\n\t\t\tstartTransition(() => {\n\t\t\t\tsetMotorSlot(guessMotorSlot.data ? guessMotorSlot.data : undefined);\n\t\t\t\tif (guessMotorSlot.data && board?.integratedDrivers?.[guessMotorSlot.data] != null) {\n\t\t\t\t\tconst newDriver = deserializeDriver(board.integratedDrivers[guessMotorSlot.data]);\n\t\t\t\t\tif (newDriver) {\n\t\t\t\t\t\tsetDriver(newDriver);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}, [board, guessMotorSlot.data, motorSlot, props.printerRailDefault.axis]);\n\n\tconst supportedVoltages = getSupportedVoltages(board, driver).map((v) => {\n\t\treturn {\n\t\t\t...v,\n\t\t\tbadge:\n\t\t\t\tfindPreset(stepper, driver, v.id, undefined, performanceMode) != null\n\t\t\t\t\t? ({\n\t\t\t\t\t\t\tchildren: 'Tuned Preset',\n\t\t\t\t\t\t\tcolor: 'sky',\n\t\t\t\t\t\t} satisfies BadgeProps)\n\t\t\t\t\t: undefined,\n\t\t};\n\t});\n\tconst [voltage, setVoltage] = useState(\n\t\tsupportedVoltages.find((v) => v.id === props.printerRail.voltage) ??\n\t\t\tsupportedVoltages.find(\n\t\t\t\t(v) =>\n\t\t\t\t\tv.id ===\n\t\t\t\t\t(performanceMode && props.printerRailDefault.performanceMode?.voltage\n\t\t\t\t\t\t? props.printerRailDefault.performanceMode.voltage\n\t\t\t\t\t\t: props.printerRailDefault.voltage),\n\t\t\t) ??\n\t\t\tsupportedVoltages[0],\n\t);\n\tconst [current, setCurrent] = useState(props.printerRail.current);\n\tconst defaultPreset = useMemo(\n\t\t() =>\n\t\t\tfindPreset(\n\t\t\t\tprops.printerRailDefault.stepper,\n\t\t\t\tprops.printerRailDefault.driver,\n\t\t\t\tprops.printerRailDefault.voltage,\n\t\t\t\tprops.printerRailDefault.current,\n\t\t\t),\n\t\t[props.printerRailDefault],\n\t);\n\tconst recommendedPreset = useMemo(\n\t\t() => findPreset(stepper, driver, voltage.id, undefined, performanceMode),\n\t\t[stepper, driver, voltage, performanceMode],\n\t);\n\tconst matchingPreset = useMemo(\n\t\t() => findPreset(stepper, driver, voltage.id, current, performanceMode),\n\t\t[stepper, driver, voltage, performanceMode, current],\n\t);\n\n\tconst supportedDrivers = Drivers.filter((d) => {\n\t\treturn d.protocol === 'UART' || board?.stepperSPI != null;\n\t}).map((d) => {\n\t\treturn {\n\t\t\t...d,\n\t\t\tbadge:\n\t\t\t\tfindPreset(stepper, d, voltage.id, undefined, performanceMode) != null\n\t\t\t\t\t? ({\n\t\t\t\t\t\t\tchildren: 'Tuned Preset',\n\t\t\t\t\t\t\tcolor: 'sky',\n\t\t\t\t\t\t} satisfies BadgeProps)\n\t\t\t\t\t: undefined,\n\t\t};\n\t});\n\tconst steppers = Steppers.map((s) => {\n\t\treturn {\n\t\t\t...s,\n\t\t\tbadge:\n\t\t\t\tfindPreset(s, driver, voltage.id, undefined, performanceMode) != null\n\t\t\t\t\t? ({\n\t\t\t\t\t\t\tchildren: 'Tuned Preset',\n\t\t\t\t\t\t\tcolor: 'sky',\n\t\t\t\t\t\t} satisfies BadgeProps)\n\t\t\t\t\t: undefined,\n\t\t};\n\t});\n\n\tuseEffect(() => {\n\t\t// If current rail configuration matches the default rail configuration, adapt current and voltage\n\t\t// to match the performance mode when performance mode changes.\n\t\tif (matchesDefaultRail(props.printerRail, props.printerRailDefault, !props.performanceMode)) {\n\t\t\tif (props.performanceMode && props.printerRailDefault.performanceMode) {\n\t\t\t\tsetHomingSpeed(props.printerRailDefault.performanceMode.homingSpeed ?? props.printerRail.homingSpeed);\n\t\t\t\tif (props.printerRailDefault.performanceMode.voltage != null) {\n\t\t\t\t\tsetVoltage(\n\t\t\t\t\t\tsupportedVoltages.find(\n\t\t\t\t\t\t\t(sv) => sv.id === (props.printerRailDefault.performanceMode?.voltage ?? props.printerRailDefault.voltage),\n\t\t\t\t\t\t) ?? supportedVoltages[0],\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tif (props.printerRailDefault.performanceMode.current != null) {\n\t\t\t\t\tsetCurrent(props.printerRailDefault.performanceMode.current);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tsetHomingSpeed(props.printerRailDefault.homingSpeed);\n\t\t\t\tsetVoltage(supportedVoltages.find((sv) => sv.id === props.printerRailDefault.voltage) ?? supportedVoltages[0]);\n\t\t\t\tsetCurrent(props.printerRailDefault.current);\n\t\t\t}\n\t\t}\n\t\tsetPerformanceMode(!!props.performanceMode);\n\t\t// We don't want to react to anything other than performance mode changes.\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [props.performanceMode]);\n\n\tuseEffect(() => {\n\t\tconst currentVoltage = supportedVoltages.find((sv) => sv.id === voltage.id);\n\t\tif (!currentVoltage) {\n\t\t\tsetVoltage(\n\t\t\t\trecommendedPreset\n\t\t\t\t\t? supportedVoltages.find((sv) => sv.id === recommendedPreset.voltage) ?? supportedVoltages[0]\n\t\t\t\t\t: supportedVoltages[0],\n\t\t\t);\n\t\t\tif (recommendedPreset) {\n\t\t\t\tsetCurrent(recommendedPreset.run_current);\n\t\t\t}\n\t\t}\n\t}, [supportedVoltages, voltage, recommendedPreset]);\n\n\tuseEffect(() => {\n\t\tconst newState = {\n\t\t\taxis: props.printerRail.axis,\n\t\t\taxisDescription: props.printerRail.axisDescription,\n\t\t\trotationDistance: props.printerRail.rotationDistance,\n\t\t\thomingSpeed: homingSpeed,\n\t\t\tmotorSlot: motorSlot,\n\t\t\tdriver,\n\t\t\tvoltage: voltage.id,\n\t\t\tstepper,\n\t\t\tcurrent,\n\t\t};\n\t\tconst serializedNew = serializePrinterRail(newState);\n\t\tconst serializedOld = serializePrinterRail(props.printerRail);\n\t\tconst isDirty = Object.keys(serializedNew).some((key) => {\n\t\t\treturn serializedNew[key as keyof typeof serializedNew] !== serializedOld[key as keyof typeof serializedNew];\n\t\t});\n\t\tif (isDirty) {\n\t\t\tstartTransition(() => {\n\t\t\t\tsetPrinterRail(serializedNew);\n\t\t\t});\n\t\t}\n\t}, [current, driver, props.printerRail, homingSpeed, setPrinterRail, stepper, voltage.id, motorSlot]);\n\n\tconst isRecommendedPresetCompatible = recommendedPreset && recommendedPreset.run_current === current;\n\tconst railName =\n\t\tprops.printerRail.axis === 'extruder'\n\t\t\t? 'Extruder T0'\n\t\t\t: props.printerRail.axis === PrinterAxis.extruder1\n\t\t\t\t? 'Extruder T1'\n\t\t\t\t: 'Stepper ' + props.printerRail.axis.toLocaleUpperCase();\n\tconst motorSlotOptions =\n\t\tboard?.motorSlots != null && Object.keys(board.motorSlots).length > 0\n\t\t\t? Object.keys(board.motorSlots)\n\t\t\t\t\t.map((ms) => {\n\t\t\t\t\t\tif (board.motorSlots?.[ms].title == null) {\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst hasDiagPin = board.motorSlots?.[ms].diag_pin != null;\n\t\t\t\t\t\tconst hasEndstopPin = board.motorSlots?.[ms].endstop_pin != null;\n\t\t\t\t\t\tconst isInUse = isSlotInUse(ms);\n\t\t\t\t\t\tconst disabled =\n\t\t\t\t\t\t\t(props.printerRailDefault.axis.startsWith('x') || props.printerRailDefault.axis.startsWith('y')) &&\n\t\t\t\t\t\t\t!hasDiagPin;\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tid: ms,\n\t\t\t\t\t\t\ttitle: board.motorSlots?.[ms].title,\n\t\t\t\t\t\t\tdisabled: disabled,\n\t\t\t\t\t\t\tbadge: [\n\t\t\t\t\t\t\t\t!hasDiagPin\n\t\t\t\t\t\t\t\t\t? ({ children: 'No diag pin', color: disabled ? 'red' : 'gray' } satisfies BadgeProps)\n\t\t\t\t\t\t\t\t\t: undefined,\n\t\t\t\t\t\t\t\t!hasEndstopPin ? ({ children: 'No endstop pin', color: 'gray' } satisfies BadgeProps) : undefined,\n\t\t\t\t\t\t\t\tisInUse === true ? ({ children: 'In use', color: 'orange' } satisfies BadgeProps) : undefined,\n\t\t\t\t\t\t\t].filter(Boolean),\n\t\t\t\t\t\t};\n\t\t\t\t\t})\n\t\t\t\t\t.filter(Boolean)\n\t\t\t: null;\n\tconst motorSlotBadge = useMemo(() => {\n\t\tif (motorSlot == null || board?.motorSlots?.[motorSlot].title == null) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst hasDiagPin = board.motorSlots?.[motorSlot].diag_pin != null;\n\t\tconst disabled =\n\t\t\t(props.printerRailDefault.axis.startsWith('x') || props.printerRailDefault.axis.startsWith('y')) && !hasDiagPin;\n\t\treturn !hasDiagPin && disabled ? ({ children: 'No diag pin', color: 'red' } satisfies BadgeProps) : undefined;\n\t}, [board, motorSlot, props.printerRailDefault.axis]);\n\treturn (\n\t\t<AnimatePresence>\n\t\t\t{props.isVisible && (\n\t\t\t\t<Card\n\t\t\t\t\tkey={props.printerRail.axis}\n\t\t\t\t\texit={{ opacity: 0, scale: 0.9, y: -40 }}\n\t\t\t\t\tinitial={{ opacity: 0, scale: 0.9, y: 40 }}\n\t\t\t\t\tanimate={{ opacity: 1, scale: 1, y: 0 }}\n\t\t\t\t\tclassName={twMerge(\n\t\t\t\t\t\t'break-inside-avoid-column',\n\t\t\t\t\t\terrorCount > 0 && badgeBorderColorStyle({ color: 'red' }),\n\t\t\t\t\t\terrorCount > 0 && badgeBackgroundColorStyle({ color: 'red' }),\n\t\t\t\t\t\terrorCount > 0 && 'ring-1',\n\t\t\t\t\t)}\n\t\t\t\t>\n\t\t\t\t\t<CardHeader className=\"\">\n\t\t\t\t\t\t<CardTitle className={twMerge(errorCount > 0 && 'text-red-900/80 dark:text-red-100')}>{railName}</CardTitle>\n\t\t\t\t\t\t<CardDescription className={twMerge(errorCount > 0 && 'text-red-800/80 dark:text-red-100/60')}>\n\t\t\t\t\t\t\t{props.printerRail.axisDescription}\n\t\t\t\t\t\t</CardDescription>\n\t\t\t\t\t</CardHeader>\n\t\t\t\t\t<CardContent className=\"grid grid-cols-1 gap-4 @2xs:grid-cols-2\">\n\t\t\t\t\t\t{motorSlotOptions && (\n\t\t\t\t\t\t\t<div className=\"col-span-full\">\n\t\t\t\t\t\t\t\t<Dropdown\n\t\t\t\t\t\t\t\t\tlabel=\"Motor Slot\"\n\t\t\t\t\t\t\t\t\toptions={motorSlotOptions}\n\t\t\t\t\t\t\t\t\terror={props.errors?.motorSlot?._errors.join('\\n')}\n\t\t\t\t\t\t\t\t\tonSelect={(ms) => {\n\t\t\t\t\t\t\t\t\t\tsetMotorSlot(ms.id);\n\t\t\t\t\t\t\t\t\t\tif (board?.integratedDrivers?.[ms.id] != null) {\n\t\t\t\t\t\t\t\t\t\t\tsetDriver(deserializeDriver(board.integratedDrivers[ms.id]) ?? driver);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tvalue={motorSlot ? motorSlotOptions.find((ms) => ms.id === motorSlot) : undefined}\n\t\t\t\t\t\t\t\t\tbadge={motorSlotBadge}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<div className=\"col-span-full\">\n\t\t\t\t\t\t\t<Dropdown\n\t\t\t\t\t\t\t\tlabel=\"Driver\"\n\t\t\t\t\t\t\t\toptions={supportedDrivers}\n\t\t\t\t\t\t\t\tonSelect={setDriver}\n\t\t\t\t\t\t\t\tvalue={driver}\n\t\t\t\t\t\t\t\tdisabled={integratedDriver != null}\n\t\t\t\t\t\t\t\tbadge={[\n\t\t\t\t\t\t\t\t\tintegratedDriver != null\n\t\t\t\t\t\t\t\t\t\t? ({ children: 'Integrated', color: 'sky' } satisfies BadgeProps)\n\t\t\t\t\t\t\t\t\t\t: undefined,\n\t\t\t\t\t\t\t\t\tusesToolboard ? ({ children: 'Toolboard', color: 'yellow' } satisfies BadgeProps) : undefined,\n\t\t\t\t\t\t\t\t].filter(Boolean)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"col-span-full\">\n\t\t\t\t\t\t\t<Dropdown label=\"Stepper\" options={steppers} onSelect={setStepper} value={stepper} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"col-span-1\">\n\t\t\t\t\t\t\t<Dropdown label=\"Voltage\" options={supportedVoltages} onSelect={setVoltage} value={voltage} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"col-span-1\">\n\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\tlabel=\"Current\"\n\t\t\t\t\t\t\t\tvalue={current}\n\t\t\t\t\t\t\t\tonChange={setCurrent}\n\t\t\t\t\t\t\t\tinputMode=\"decimal\"\n\t\t\t\t\t\t\t\tstep=\"any\"\n\t\t\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\t\t\tmax={driver.maxCurrent}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{stepper.maxPeakCurrent / 1.41 < current && (\n\t\t\t\t\t\t\t<Banner Icon={FireIcon} color=\"yellow\" title=\"Stepper overcurrent!\" className=\"col-span-full\">\n\t\t\t\t\t\t\t\tYour stepper motor is rated for {Math.floor((stepper.maxPeakCurrent * 100) / 1.41) / 100}A RMS, but you\n\t\t\t\t\t\t\t\tare using {current}A.\n\t\t\t\t\t\t\t</Banner>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{matchingPreset != null && (\n\t\t\t\t\t\t\t<Banner Icon={LightBulbIcon} color=\"brand\" title=\"Driver tuning applied!\" className=\"col-span-full\">\n\t\t\t\t\t\t\t\tRatOS preset applied automatically.\n\t\t\t\t\t\t\t</Banner>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{matchingPreset?.run_current !== defaultPreset?.run_current &&\n\t\t\t\t\t\t\trecommendedPreset &&\n\t\t\t\t\t\t\t!isRecommendedPresetCompatible && (\n\t\t\t\t\t\t\t\t<Banner\n\t\t\t\t\t\t\t\t\tIcon={BoltIcon}\n\t\t\t\t\t\t\t\t\tcolor=\"sky\"\n\t\t\t\t\t\t\t\t\ttitle=\"Recommended tuning preset available at different current\"\n\t\t\t\t\t\t\t\t\tclassName=\"col-span-full\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tRatOS has a recommended preset for your current settings at {recommendedPreset.run_current}A. You can{' '}\n\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\tclassName=\"cursor-pointer font-bold underline hover:no-underline\"\n\t\t\t\t\t\t\t\t\t\tonClick={() => setCurrent(recommendedPreset.run_current)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tchange the current to {recommendedPreset.run_current}A\n\t\t\t\t\t\t\t\t\t</span>{' '}\n\t\t\t\t\t\t\t\t\tto apply the preset automatically.\n\t\t\t\t\t\t\t\t</Banner>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t</CardContent>\n\t\t\t\t</Card>\n\t\t\t)}\n\t\t</AnimatePresence>\n\t);\n};\n","import { Button, buttonVariants } from '@/components/common/button';\nimport { setDisplayName } from '@/helpers/utils';\n\nsetDisplayName(Button, 'Button');\n\nexport { Button, buttonVariants };\n","'use client';\n\nimport * as React from 'react';\nimport * as DropdownMenuPrimitive from '@radix-ui/react-dropdown-menu';\nimport { CheckIcon, ChevronRightIcon, DotFilledIcon } from '@radix-ui/react-icons';\n\nimport { cn, setDisplayName } from '@/helpers/utils';\n\nconst DropdownMenu = DropdownMenuPrimitive.Root;\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger;\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group;\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal;\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub;\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup;\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n\tReact.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n\tReact.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n\t\tinset?: boolean;\n\t}\n>(({ className, inset, children, ...props }, ref) => (\n\t<DropdownMenuPrimitive.SubTrigger\n\t\tref={ref}\n\t\tclassName={cn(\n\t\t\t'flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent',\n\t\t\tinset && 'pl-8',\n\t\t\tclassName,\n\t\t)}\n\t\t{...props}\n\t>\n\t\t{children}\n\t\t<ChevronRightIcon className=\"ml-auto h-4 w-4\" />\n\t</DropdownMenuPrimitive.SubTrigger>\n));\nsetDisplayName(DropdownMenuSubTrigger, DropdownMenuPrimitive.SubTrigger.displayName);\n\nconst DropdownMenuSubContent = React.forwardRef<\n\tReact.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n\tReact.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n\t<DropdownMenuPrimitive.SubContent\n\t\tref={ref}\n\t\tclassName={cn(\n\t\t\t'z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2',\n\t\t\tclassName,\n\t\t)}\n\t\t{...props}\n\t/>\n));\nsetDisplayName(DropdownMenuSubContent, DropdownMenuPrimitive.SubContent.displayName);\n\nconst DropdownMenuContent = React.forwardRef<\n\tReact.ElementRef<typeof DropdownMenuPrimitive.Content>,\n\tReact.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n\t<DropdownMenuPrimitive.Portal>\n\t\t<DropdownMenuPrimitive.Content\n\t\t\tref={ref}\n\t\t\tsideOffset={sideOffset}\n\t\t\tclassName={cn(\n\t\t\t\t'z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md',\n\t\t\t\t'data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2',\n\t\t\t\tclassName,\n\t\t\t)}\n\t\t\t{...props}\n\t\t/>\n\t</DropdownMenuPrimitive.Portal>\n));\nsetDisplayName(DropdownMenuContent, DropdownMenuPrimitive.Content.displayName);\n\nconst DropdownMenuItem = React.forwardRef<\n\tReact.ElementRef<typeof DropdownMenuPrimitive.Item>,\n\tReact.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n\t\tinset?: boolean;\n\t}\n>(({ className, inset, ...props }, ref) => (\n\t<DropdownMenuPrimitive.Item\n\t\tref={ref}\n\t\tclassName={cn(\n\t\t\t'relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground',\n\t\t\tinset && 'pl-8',\n\t\t\tclassName,\n\t\t)}\n\t\t{...props}\n\t/>\n));\nsetDisplayName(DropdownMenuItem, DropdownMenuPrimitive.Item.displayName);\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n\tReact.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n\tReact.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n\t<DropdownMenuPrimitive.CheckboxItem\n\t\tref={ref}\n\t\tclassName={cn(\n\t\t\t'relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground',\n\t\t\tclassName,\n\t\t)}\n\t\tchecked={checked}\n\t\t{...props}\n\t>\n\t\t<span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n\t\t\t<DropdownMenuPrimitive.ItemIndicator>\n\t\t\t\t<CheckIcon className=\"h-4 w-4\" />\n\t\t\t</DropdownMenuPrimitive.ItemIndicator>\n\t\t</span>\n\t\t{children}\n\t</DropdownMenuPrimitive.CheckboxItem>\n));\nsetDisplayName(DropdownMenuCheckboxItem, DropdownMenuPrimitive.CheckboxItem.displayName);\n\nconst DropdownMenuRadioItem = React.forwardRef<\n\tReact.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n\tReact.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n\t<DropdownMenuPrimitive.RadioItem\n\t\tref={ref}\n\t\tclassName={cn(\n\t\t\t'relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground',\n\t\t\tclassName,\n\t\t)}\n\t\t{...props}\n\t>\n\t\t<span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n\t\t\t<DropdownMenuPrimitive.ItemIndicator>\n\t\t\t\t<DotFilledIcon className=\"h-4 w-4 fill-current\" />\n\t\t\t</DropdownMenuPrimitive.ItemIndicator>\n\t\t</span>\n\t\t{children}\n\t</DropdownMenuPrimitive.RadioItem>\n));\nsetDisplayName(DropdownMenuRadioItem, DropdownMenuPrimitive.RadioItem.displayName);\n\nconst DropdownMenuLabel = React.forwardRef<\n\tReact.ElementRef<typeof DropdownMenuPrimitive.Label>,\n\tReact.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n\t\tinset?: boolean;\n\t}\n>(({ className, inset, ...props }, ref) => (\n\t<DropdownMenuPrimitive.Label\n\t\tref={ref}\n\t\tclassName={cn('px-2 py-1.5 text-sm font-semibold', inset && 'pl-8', className)}\n\t\t{...props}\n\t/>\n));\nsetDisplayName(DropdownMenuLabel, DropdownMenuPrimitive.Label.displayName);\n\nconst DropdownMenuSeparator = React.forwardRef<\n\tReact.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n\tReact.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n\t<DropdownMenuPrimitive.Separator ref={ref} className={cn('-mx-1 my-1 h-px bg-muted', className)} {...props} />\n));\nsetDisplayName(DropdownMenuSeparator, DropdownMenuPrimitive.Separator.displayName);\n\nconst DropdownMenuShortcut = ({ className, ...props }: React.HTMLAttributes<HTMLSpanElement>) => {\n\treturn <span className={cn('ml-auto text-xs tracking-widest opacity-60', className)} {...props} />;\n};\nDropdownMenuShortcut.displayName = 'DropdownMenuShortcut';\n\nexport {\n\tDropdownMenu,\n\tDropdownMenuTrigger,\n\tDropdownMenuContent,\n\tDropdownMenuItem,\n\tDropdownMenuCheckboxItem,\n\tDropdownMenuRadioItem,\n\tDropdownMenuLabel,\n\tDropdownMenuSeparator,\n\tDropdownMenuShortcut,\n\tDropdownMenuGroup,\n\tDropdownMenuPortal,\n\tDropdownMenuSub,\n\tDropdownMenuSubContent,\n\tDropdownMenuSubTrigger,\n\tDropdownMenuRadioGroup,\n};\n","import { useCallback, useEffect, useRef, useState } from 'react';\n\nexport const useChangeEffect = (deps: unknown[], clearAfter?: number, resetTimeoutOnChange: boolean = false) => {\n\tconst [hasChanged, setHasChanged] = useState(0);\n\tconst lastDeps = useRef([...deps]);\n\tuseEffect(() => {\n\t\tlet changed = false;\n\t\tlastDeps.current.forEach((dep, i) => {\n\t\t\tif (dep !== deps[i]) {\n\t\t\t\tchanged = true;\n\t\t\t}\n\t\t});\n\t\tif (changed) {\n\t\t\tsetHasChanged((hasChanged) => (resetTimeoutOnChange ? hasChanged + 1 : 1));\n\t\t}\n\t\tlastDeps.current = [...deps];\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [...deps]);\n\n\tconst clear = useCallback(() => {\n\t\tsetHasChanged(0);\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif (clearAfter != null && hasChanged > 0) {\n\t\t\tconst timeout = setTimeout(() => {\n\t\t\t\tsetHasChanged(0);\n\t\t\t}, clearAfter);\n\t\t\treturn () => {\n\t\t\t\tclearTimeout(timeout);\n\t\t\t};\n\t\t}\n\t\treturn;\n\t}, [clearAfter, hasChanged]);\n\n\treturn [hasChanged > 0, clear] as const;\n};\n\nexport const useDelayedChangeEffect = (\n\tdeps: unknown[],\n\tdelay: number,\n\tclearAfter?: number,\n\tresetTimeoutOnChange: boolean = false,\n) => {\n\tconst [changeCount, setChangeCount] = useState(0);\n\tconst lastDeps = useRef([...deps]);\n\tconst timeout = useRef<number | null>(null);\n\tuseEffect(() => {\n\t\tif (typeof window === 'undefined') {\n\t\t\treturn;\n\t\t}\n\n\t\tlet changed = false;\n\t\tlastDeps.current.forEach((dep, i) => {\n\t\t\tif (dep !== deps[i]) {\n\t\t\t\tchanged = true;\n\t\t\t}\n\t\t});\n\t\tif (changed) {\n\t\t\tconst trigger = () => setChangeCount((hasChanged) => (resetTimeoutOnChange ? hasChanged + 1 : 1));\n\t\t\ttimeout.current = window.setTimeout(() => {\n\t\t\t\ttrigger();\n\t\t\t\ttimeout.current = null;\n\t\t\t}, delay);\n\t\t}\n\t\tlastDeps.current = [...deps];\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [...deps]);\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tif (timeout.current) {\n\t\t\t\tclearTimeout(timeout.current);\n\t\t\t}\n\t\t};\n\t}, []);\n\tconst [hasChanged, clear] = useChangeEffect([changeCount], clearAfter, resetTimeoutOnChange);\n\treturn [hasChanged, clear] as const;\n};\n","import { useCallback } from 'react';\nimport { useMoonraker, useNamespacedItemMutation, useNamespacedItemQuery } from '@/moonraker/hooks';\nimport { UseMutationOptions, UseQueryOptions } from '@tanstack/react-query';\nimport { MoonrakerDBItemResponse, MoonrakerDBValue, MoonrakerNamespaceKeys } from '@/moonraker/types';\n\nexport const useMainsailQuery = <\n\tK extends MoonrakerNamespaceKeys<'mainsail'>,\n\tV extends MoonrakerDBValue<'mainsail', K>,\n>(\n\tkey: K,\n\toptions?: Omit<UseQueryOptions<V, unknown, V, 'mainsail'[]>, 'queryKey' | 'queryFn'>,\n) => useNamespacedItemQuery('mainsail', key, options);\n\nexport const useMainsailMutation = <\n\tK extends MoonrakerNamespaceKeys<'mainsail'>,\n\tV extends MoonrakerDBValue<'mainsail', K>,\n>(\n\tkey: K,\n\toptions?: Omit<UseMutationOptions<MoonrakerDBItemResponse<V>, unknown, V>, 'mutationKey' | 'mutationFn'>,\n) => useNamespacedItemMutation('mainsail', key, options);\n\nexport function useMainsail() {\n\tconst moonraker = useMoonraker();\n\tconst getMainsailItem = useCallback(\n\t\tasync <K extends MoonrakerNamespaceKeys<'mainsail'>, V extends MoonrakerDBValue<'mainsail', K>>(\n\t\t\tkey: MoonrakerNamespaceKeys<'mainsail'>,\n\t\t): Promise<V> => {\n\t\t\treturn (await moonraker.getItem('mainsail', key)) as V;\n\t\t},\n\t\t[moonraker],\n\t);\n\tconst saveMainsailItem = useCallback(\n\t\tasync <K extends MoonrakerNamespaceKeys<'mainsail'>, V extends MoonrakerDBValue<'mainsail', K>>(\n\t\t\tkey: K,\n\t\t\tvalue: V,\n\t\t): Promise<MoonrakerDBItemResponse<V>> => {\n\t\t\treturn await moonraker.saveItem('mainsail', key, value as V);\n\t\t},\n\t\t[moonraker],\n\t);\n\n\treturn {\n\t\tgetItem: getMainsailItem,\n\t\tsaveItem: saveMainsailItem,\n\t};\n}\n"],"names":["ErrorMessage","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","jsx","Banner","color","Icon","XCircleIcon","title","props","className","twMerge","children","FullLoadScreen","div","twJoin","Spinner","InfoMessage","InformationCircleIcon","Drawer","shouldScaleBackground","param","jsx_runtime","DrawerPrimitive","Root","displayName","DrawerTrigger","Trigger","DrawerPortal","Portal","DrawerClose","Close","DrawerOverlay","React","ref","Overlay","cn","setDisplayName","DrawerContent","jsxs","Content","DrawerHeader","DrawerFooter","DrawerTitle","Title","DrawerDescription","Description","ModalButton","isCompletingClick","setIsCompletingClick","useState","hide","onClick","button","onButtonClick","useCallback","clickRes","Promise","e","Error","toast","error","message","style","direction","Fragment","noMargin","Modal","onClose","_onClose","onClosed","onClickSecondButton","open","setOpen","setTimeout","show","success","isLoading","aria-hidden","Check","Cross","isDesktop","useMediaQuery","query","mediaQueryList","window","matchMedia","matches","setMatches","useEffect","handleChange","event","addEventListener","removeEventListener","buttons","buttonLabel","push","Button","variant","buttonVariant","secondButtonLabel","secondButtonVariant","Dialog","onOpenChange","val","DialogTrigger","asChild","DialogContent","wide","noClose","DialogHeader","DialogTitle","titleActions","DialogDescription","body","AnimatedContainer","containerClassName","content","length","dismissVariant","dismissText","map","i","NoSSR","isClient","useIsClient","DynamicImport","fallback","lazy","resolve","default","useKlippyStateHandler","lastMessage","useMoonraker","passThroughUpdateMethods","klippyReadyState","setKlippyReadyState","queryKlippyState","serverInfo","klippy_state","klippyState","method","klipperStateToText","KlippyStateBadge","Badge","svg","badgeTextColorStyle","fill","viewBox","circle","cx","cy","r","moonrakerStatusToText","moonrakerState","MoonrakerStateBadge","status","PrinterHeader","stateColorClass","h1","breadcrumb","bc","index","span","badges","header","h3","p","description","PrinterStateHeader","printerStateQuery","printerName","useMainsailQuery","initialData","savedPrinter","useRecoilValue","LoadablePrinterState","useMoonrakerQuery","usePrinterObjectQuery","printerState","data","print_stats","state","breadCrumbs","useMemo","crumbs","name","undefined","PrinterStateLoadingHeader","PrinterConnectionHeader","QueryStatus","isError","ICON_TYPE_MAPPING","up","xmlns","width","height","stroke","strokeWidth","strokeLinecap","strokeLinejoin","path","d","strokeDasharray","down","none","UnfoldVertical","Unfold","start","end","onExpand","collapsedLines","floatUp","expand","IconType","Decoration","concat","UnfoldCollapsed","previousHunk","currentHunk","linesCount","nextStart","oldStart","oldLines","getCollapsedLinesCountBetween","Math","max","collapsedStart","collapsedEnd","Tokenizer","Worker","__webpack_require__","tu","URL","u","b","TwoColumns","SingleColumn","DiffModal","isOpen","setIsOpen","viewType","setViewType","close","file","parseDiff","diff","source","split","tokens","expandRange","hunks","useEnhancers","oldSource","hunksWithSourceExpanded","useSourceExpansion","hunksWithMinLinesCollapsed","useMinCollapsedLines","useTokenizeWorker","language","renderGutter","change","side","lineNumber","computeOldLineNumber","computeNewLineNumber","changeIcon","type","Minus","Plus","renderHunk","hunk","previousElement","decorationElement","hunkElement","Hunk","unfoldTailElement","diffType","fileName","X","changedOnDisk","Diff","reduce","StateCircleVariants","cva","variants","info","warning","danger","indeterminate","plain","primary","StateCircle","ping","pingClassName","ChangedFile","addFileToIgnore","addFileToOverwrite","removeFileToIgnore","removeFileToOverwrite","isMarkedIgnored","isMarkedOverwritten","isDiffModalOpen","setIsDiffModalOpen","showDiffModal","wouldOtherwiseBeWritten","overwrite","isOverwritable","isIgnorable","isOverwritten","exists","needsExplicitAction","changedFromConfig","actions","skip","ignore","write","remove","intent","icon","ChevronLast","action","f","Trash","FileClock","filter","Boolean","fileState","shouldPing","useChangeEffect","li","diskContent","a","size","isIgnored","CheckIcon","DropdownMenu","DropdownMenuTrigger","EllipsisVerticalIcon","DropdownMenuContent","DropdownMenuItem","disabled","FileDiff","FileChanges","filesToWrite","serializedConfig","onFilesToIgnoreChange","onFilesToOverwriteChange","filesToOverwrite","setFilesToOverwrite","files","includes","filesToIgnore","setFilesToIgnore","client","trpc","useUtils","useQuery","queryKey","queryFn","res","printer","getFilesToWrite","mutate","config","enabled","ul","role","fileToWrite","z","array","BasePrinterRail","PrinterRailSettings","board","deserializeDriver","supportedVoltages","toolheads","useToolheads","toolhead","find","th","getExtruderAxis","printerRail","axis","canBeExtruderlessBoard","every","hasToolboard","usesToolboard","printerRailDefault","getToolboard","selectedBoard","performanceMode","setPerformanceMode","setPrinterRail","useSetRecoilState","PrinterRailState","printerRails","PrinterRailsState","motorSlot","setMotorSlot","motorSlots","integratedDriver","integratedDrivers","startsWith","PrinterAxis","extruder","driver","setDriver","stepper","setStepper","homingSpeed","setHomingSpeed","errorCount","errors","Object","keys","acc","key","keyErrors","count","Array","isArray","_errors","isSlotInUse","slot","some","railToolhead","pr","guessMotorSlot","mcu","reversePinLookup","canUseExtruderlessConfigs","boardPath","startTransition","newDriver","getSupportedVoltages","v","badge","findPreset","id","voltage","setVoltage","current","setCurrent","defaultPreset","recommendedPreset","matchingPreset","supportedDrivers","Drivers","protocol","stepperSPI","steppers","Steppers","s","matchesDefaultRail","sv","currentVoltage","run_current","newState","axisDescription","rotationDistance","serializedNew","serializePrinterRail","serializedOld","isDirty","isRecommendedPresetCompatible","railName","extruder1","toLocaleUpperCase","motorSlotOptions","ms","hasDiagPin","diag_pin","hasEndstopPin","endstop_pin","isInUse","motorSlotBadge","AnimatePresence","isVisible","Card","exit","opacity","scale","y","initial","animate","badgeBorderColorStyle","badgeBackgroundColorStyle","CardHeader","CardTitle","CardDescription","CardContent","Dropdown","label","options","join","onSelect","value","TextInput","onChange","inputMode","step","min","maxCurrent","maxPeakCurrent","FireIcon","floor","LightBulbIcon","BoltIcon","DropdownMenuPrimitive","DropdownMenuSubTrigger","inset","ChevronRightIcon","DropdownMenuSubContent","sideOffset","DropdownMenuCheckboxItem","checked","DropdownMenuRadioItem","DotFilledIcon","DropdownMenuLabel","DropdownMenuSeparator","deps","clearAfter","resetTimeoutOnChange","hasChanged","setHasChanged","lastDeps","useRef","changed","forEach","dep","clear","timeout","clearTimeout","useDelayedChangeEffect","delay","changeCount","setChangeCount","trigger","useNamespacedItemQuery"],"sourceRoot":""}