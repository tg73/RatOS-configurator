(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8411],{41817:function(e,i,s){Promise.resolve().then(s.bind(s,16509))},16509:function(e,i,s){"use strict";s.r(i),s.d(i,{default:function(){return Page}});var n=s(72612),r=s(39164),a=s(34709),l=s(94809),t=s(88192),o=s(98130),c=s(84923),d=s(59672),u=s(73371),x=s(37652),g=s(21264),f=s(79293),h=s(9948),m=s(57818),j=s(94787);let Motion=()=>{var e,i,s;let{selectedBoard:v,selectedPrinter:p,performanceMode:b,selectedPrinterRails:C,parsedPrinterConfiguration:N}=(0,x.usePrinterConfiguration)(),w=!1===N.success?N.error.format():null,[S,k]=(0,r.useState)([]),[y,z]=(0,r.useState)([]),F=(0,r.useMemo)(()=>!0===N.success?(0,x.serializePrinterConfiguration)(N.data):null,[N]),O=f.SX.printer.saveConfiguration.useMutation(),P=(0,r.useCallback)(async()=>{N.success&&O.mutate({config:(0,x.serializePrinterConfiguration)(N.data),overwriteFiles:S,skipFiles:y},{onSuccess:()=>j.A.success("Configuration saved"),onError:()=>j.A.error("Failed to save configuration")})},[N,O,S,y]),_=f.SX.useUtils().client,L=(0,h.a)({queryKey:["filesToWrite",F],queryFn:async()=>{let e=await _.printer.getFilesToWrite.mutate({config:null!=F?F:{}});return e},enabled:N.success}),M=null===(e=L.data)||void 0===e?void 0:e.some(e=>"changed"===e.state&&!0===e.changedFromConfig&&!1===e.overwrite&&!y.includes(e.fileName)&&!S.includes(e.fileName));return null==p?(0,n.jsx)("div",{className:"mx-auto flex items-center justify-center p-8",children:(0,n.jsx)(o.$,{})}):(0,n.jsxs)("div",{className:"grid gap-8",children:[(0,n.jsx)(m.S,{id:"rails",children:(0,n.jsx)(a.i,{className:"grid gap-4 @3xl:grid-cols-2 @6xl:grid-cols-3",children:C.map((e,i)=>{var s;let r=null==p?void 0:p.defaults.rails.find(i=>i.axis===e.axis);if(null==r)throw Error("No printer default for axis "+e.axis);return(0,n.jsx)(d.l,{errors:(null==w?void 0:null===(s=w.rails)||void 0===s?void 0:s[i])!=null?w.rails[i]:{_errors:[]},selectedBoard:v,printerRail:e,printerRailDefault:(0,g.Oj)(r),performanceMode:b,isVisible:!0},e.axis)})})}),(0,n.jsx)(a.i,{children:(null!==(s=null===(i=L.data)||void 0===i?void 0:i.filter(e=>"unchanged"!==e.state).length)&&void 0!==s?s:0)>0&&(0,n.jsxs)(t.Card,{children:[(0,n.jsx)(u.Ol,{children:(0,n.jsx)(u.ll,{children:"File Changes"})}),(0,n.jsx)(u.aY,{children:(0,n.jsx)(c.o,{serializedConfig:N.success?F:null,onFilesToIgnoreChange:z,onFilesToOverwriteChange:k})}),(0,n.jsx)(u.eW,{children:(0,n.jsxs)(l.z,{onClick:P,disabled:O.isLoading||!N.success||M,children:[O.isLoading&&(0,n.jsx)(o.$,{})," Save Configuration"]})})]})})]})};var v=s(91302),p=s(56445),b=s(3050);let LoadScreen=()=>(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"mb-5 border-b border-zinc-200 pb-5 dark:border-zinc-700",children:[(0,n.jsx)("h3",{className:"text-lg font-medium leading-6 text-zinc-900 dark:text-zinc-100",children:"Loading printer configuration..."}),(0,n.jsx)("p",{className:"mt-2 max-w-4xl text-sm text-zinc-500 dark:text-zinc-400",children:"Please wait while RatOS loads your printer configuration"})]}),(0,n.jsx)("div",{className:"mt-4 flex h-48 items-center justify-center",children:(0,n.jsx)(o.$,{})})]});function Page(){let e=(0,v.O)();return e?(0,n.jsxs)("div",{className:"grid grid-cols-1 gap-6 @container",children:[(0,n.jsx)(b.Ch,{title:"Motion Settings",description:"You can change your motion settings below, be aware that any change will require the config to be regenerated"}),(0,n.jsx)("div",{className:"mx-auto w-full max-w-7xl px-4",children:(0,n.jsx)(r.Suspense,{fallback:(0,n.jsx)(LoadScreen,{}),children:(0,n.jsx)(p.NoSSR,{fallback:(0,n.jsx)(LoadScreen,{}),children:(0,n.jsx)(Motion,{})})})})]}):null}}},function(e){e.O(0,[6545,9996,966,8965,5360,3790,453,2705,9754,3150,5591,6645,8367,4535,907,6792,4595,7652,6375,6079,2948,9321,8458,1744],function(){return e(e.s=41817)}),_N_E=e.O()}]);
//# sourceMappingURL=page-f60d461305b06442.js.map