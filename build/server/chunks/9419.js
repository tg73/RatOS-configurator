(()=>{"use strict";var e={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{e.exports=require("assert")},50852:e=>{e.exports=require("async_hooks")},14300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},82361:e=>{e.exports=require("events")},57147:e=>{e.exports=require("fs")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},98188:e=>{e.exports=require("module")},22037:e=>{e.exports=require("os")},71017:e=>{e.exports=require("path")},4074:e=>{e.exports=require("perf_hooks")},85477:e=>{e.exports=require("punycode")},12781:e=>{e.exports=require("stream")},71576:e=>{e.exports=require("string_decoder")},57310:e=>{e.exports=require("url")},73837:e=>{e.exports=require("util")},26144:e=>{e.exports=require("vm")},71267:e=>{e.exports=require("worker_threads")},59796:e=>{e.exports=require("zlib")},16432:(e,r,t)=>{var a=t(12530),s=t(40401),i=t(50509),u=t(24906),n=t(74934),_=t(90345),o=t(1458),c=t(63969),l=t(84518),p=t(83600),h=t(68653),b=t(6704),f=t(95754),m=t(75427),d=t(22212),w=t(34353),g=t(33183),q=t(58966),y=t(328),x=t(52013),k=t(63147),v=t(61014);let detrendSignal=e=>(0,x.tidy)(()=>(0,x.sub)(e,(0,x.mean)(e,0,!0))),getFFTSize=(e,r=v.vy.WINDOW_T_SEC)=>1<<Math.floor(e*r-1).toString(2).length;async function powerSpectralDensity(e,r,t){let{fftSize:a,_scaling:s}=Object.assign({fftSize:getFFTSize(r,v.vy.WINDOW_T_SEC),_scaling:"psd"},t);if("psd"!=s&&"none"!=s)throw Error("Unknown scaling");let i="none"===s?1:2,u=(0,x.tidy)(()=>x.signal.hannWindow(a)),n=await (0,x.tidy)(()=>(0,x.div)((0,x.div)(1,(0,x.sum)((0,x.pow)(u,2))),r)).array(),_=t?.isDetrended?e:detrendSignal(e),o=(0,x.tidy)(()=>x.signal.stft(_,a,Math.floor(a/2),a,x.signal.hannWindow)),c=await o.array();o.dispose(),_.dispose(),u.dispose();let l=c.map(e=>{let t=[],u=[],_=0,o=0,c=r/a;for(var l=0;l<e.length-1;l+=2){let r=(0===l?0:l/2)*c;if(r>v.vy.MAX_FREQ)continue;let a=(l+2)/2*c,p=e[l]**2+e[l+1]**2;p*=n,"psd"==s&&l>0&&a<v.vy.MAX_FREQ&&(p*=i),p>_&&(_=p),p<o&&(o=p),t.push(p),u.push(r)}return{estimates:t,frequencies:u,powerRange:new k.NumberRange(o,_)}}),p=welch(l);return p}let WelchError=class WelchError extends Error{constructor(e){super(e),this.name="WelchError"}};let welch=async e=>{if(0==e.length)throw new WelchError("Unable to calculate any PSD estimates");let r=e[0].estimates.length,t=new Float64Array(r).fill(0);for(let a=0;a<e.length;a++)for(let s=0;s<r;s++)t[s]+=e[a].estimates[s];let a=0,s=0;for(let i=0;i<r;i++)t[i]=t[i]/e.length,t[i]>a&&(a=t[i]),t[i]<s&&(s=t[i]);return{estimates:t,frequencies:Float64Array.from(e[0].frequencies),powerRange:new k.NumberRange(s,a)}},sumPSDs=e=>{let r=e[0].estimates.length,t=new Float64Array(r).fill(0);for(let a=0;a<e.length;a++)for(let s=0;s<r;s++)t[s]+=e[a].estimates[s];return{estimates:t,frequencies:Float64Array.from(e[0].frequencies),powerRange:new k.NumberRange(Math.min(...t),Math.max(...t))}};var S=t(41060),P=t(253),j=t(72201);let bufferFifo=e=>(0,j.z)((0,n.R)((r,t)=>{let a=[...r,t].slice(-e);return a},[]),(0,_.h)(r=>r.length>=e));var O=t(83926);let runPSD=async e=>{await (0,x.ready)();let r=new S.Z(e.length).div(new S.Z(e[e.length-1][0]).minus(e[0][0]).shiftedBy(-3)).shiftedBy(-1).decimalPlaces(0,S.Z.ROUND_HALF_DOWN).shiftedBy(1).toNumber(),t=(0,x.tidy)(()=>{let r=(0,x.tensor2d)(e.map(e=>[e[1],e[2],e[3]])),[t,a,s]=(0,x.split)(r,3,1),i=(0,x.reshape)(t,[t.shape[0]]),u=(0,x.reshape)(a,[a.shape[0]]),n=(0,x.reshape)(s,[s.shape[0]]);return{x:i,y:u,z:n}});try{let[e,a,s]=await Promise.all([powerSpectralDensity(t.x,r,{isDetrended:!0}),powerSpectralDensity(t.y,r,{isDetrended:!0}),powerSpectralDensity(t.z,r,{isDetrended:!0})]);if(Object.values(t).forEach(e=>{e.dispose()}),"webgpu"===(0,x.getBackend)()){let e=(0,x.backend)();e.bufferManager.dispose()}else if("webgl"===(0,x.getBackend)()){let e=(0,x.backend)(),r=e.getTextureManager();r.dispose(),r.freeTextures={},r.usedTextures={}}return{x:e,y:a,z:s,total:sumPSDs([e,a,s])}}catch(e){if(e instanceof WelchError)return null;throw e}},createPSDProcessor=async(e,r,t)=>{let g=new a.x,q=g.asObservable().pipe((0,s.d)({bufferSize:1,refCount:!1}));q.subscribe();let y=!0;return t.pipe((0,i.x)(),(0,u.w)((t,a)=>a?e.pipe((0,n.R)((e,r)=>(e.push(r),e),[]),(0,_.h)(e=>e.length>3200),(0,o.U)(e=>({samples:e,onAccumulationComplete:a,accumulationComplete:!1}))):!a&&t.onAccumulationComplete?(t.accumulationComplete=!0,(0,c.of)(t)):r.pipe((0,l.w)(r=>e.pipe(bufferFifo(r))),(0,o.U)(e=>({samples:e,onAccumulationComplete:!1,accumulationComplete:!1}))),{samples:[],onAccumulationComplete:!1,accumulationComplete:!1}),(0,p.P)(()=>q,{leading:y,trailing:!0}),(0,h.b)(e=>{let{samples:r,onAccumulationComplete:t,accumulationComplete:a}=e;return y&&(y=!1),(0,b.x)((0,f.D)(runPSD(r).then(e=>a&&"function"==typeof t?((0,O.j)().info("Accumulation completed, psd was run on "+r.length+" samples"),t(e),g.next({}),m.E):null==e?(g.next({}),m.E):(g.next({}),(0,c.of)(e)))),d.z).pipe((0,w.J)())}))};(0,P.YX)(class{constructor(){this.isAccumulating=!1,this.processor=null,this.signalPassThroughSubject=new a.x,this.signalPassThrough$=this.signalPassThroughSubject.asObservable(),this.sampleRatePassThroughSubject=new a.x,this.sampleRatePassThrough$=this.sampleRatePassThroughSubject.asObservable().pipe((0,s.d)({bufferSize:1,refCount:!1})),this.accumulationSubject=new a.x,this.accumulation$=this.accumulationSubject.asObservable().pipe((0,s.d)({bufferSize:1,refCount:!1})),this.signalPassThroughSubject=new a.x,this.signalPassThrough$=this.signalPassThroughSubject.asObservable(),this.sampleRatePassThroughSubject=new a.x,this.sampleRatePassThrough$=this.sampleRatePassThroughSubject.asObservable().pipe((0,s.d)({bufferSize:1,refCount:!1})),this.sampleRatePassThrough$.subscribe(),this.accumulationSubject=new a.x,this.accumulation$=this.accumulationSubject.asObservable().pipe((0,s.d)({bufferSize:1,refCount:!1}))}work(e){return e.pipe((0,g.z)(e=>{switch(e.command){case"accumulate":if(!this.isAccumulating&&!0===e.payload)return(0,O.j)().info("PSD Worker Command: Starting accumulation"),this.isAccumulating=!0,(0,q.T)((0,c.of)({type:"accumulation_started"}),(0,b.x)((0,f.D)(new Promise((e,r)=>{this.accumulationSubject.next(t=>{if(null==t){r("Accumulation failed");return}e(t)})})).pipe((0,o.U)(e=>({type:"accumulation_finished",psd:e}))),d.z));return this.isAccumulating=!1,this.accumulationSubject.next(!1),m.E;case"sampleInput":if(this.signalPassThroughSubject.next(e.payload),null==this.processor){this.processor=createPSDProcessor(this.signalPassThrough$,this.sampleRatePassThrough$,this.accumulation$);let e=(0,f.D)(this.processor).pipe((0,g.z)(e=>e.pipe((0,o.U)(e=>({type:"psd",psd:e})),(0,s.d)({bufferSize:1,refCount:!1}))));return(0,y.z)((0,f.D)(this.processor)).then(()=>{this.isAccumulating||this.accumulationSubject.next(!1)}),e}return m.E;case"specSampleRateInput":return this.isAccumulating||this.accumulationSubject.next(!1),this.sampleRatePassThroughSubject.next(e.payload),m.E;default:return m.E}}))}selectTransferables(e){switch(e.type){case"psd":case"accumulation_finished":return[e.psd.x.estimates.buffer,e.psd.x.frequencies.buffer,e.psd.y.estimates.buffer,e.psd.y.frequencies.buffer,e.psd.z.estimates.buffer,e.psd.z.frequencies.buffer,e.psd.total.estimates.buffer,e.psd.total.frequencies.buffer];default:return[]}}})},94369:(e,r,t)=>{t.d(r,{N:()=>a});let a={timestamp:!0,level:"info"}},46164:(e,r,t)=>{t.d(r,{s:()=>i});var a=t(13728);let s=a.z.enum(["trace","debug","info","warn","error","fatal"]),i=a.z.object({ts:a.z.number(),messages:a.z.array(a.z.any()),bindings:a.z.array(a.z.record(a.z.string(),a.z.any())),level:a.z.object({label:s,value:a.z.number()})})}},r={};function __webpack_require__(t){var a=r[t];if(void 0!==a)return a.exports;var s=r[t]={exports:{}},i=!0;try{e[t].call(s.exports,s,s.exports,__webpack_require__),i=!1}finally{i&&delete r[t]}return s.exports}__webpack_require__.m=e,__webpack_require__.x=()=>{var e=__webpack_require__.O(void 0,[7013,2689,5005,8909,5417,8105,7925,8509,1014,3926,1866],()=>__webpack_require__(16432));return __webpack_require__.O(e)},(()=>{var e=[];__webpack_require__.O=(r,t,a,s)=>{if(t){s=s||0;for(var i=e.length;i>0&&e[i-1][2]>s;i--)e[i]=e[i-1];e[i]=[t,a,s];return}for(var u=1/0,i=0;i<e.length;i++){for(var[t,a,s]=e[i],n=!0,_=0;_<t.length;_++)u>=s&&Object.keys(__webpack_require__.O).every(e=>__webpack_require__.O[e](t[_]))?t.splice(_--,1):(n=!1,s<u&&(u=s));if(n){e.splice(i--,1);var o=a();void 0!==o&&(r=o)}}return r}})(),__webpack_require__.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(r,{a:r}),r},(()=>{var e,r=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;__webpack_require__.t=function(t,a){if(1&a&&(t=this(t)),8&a||"object"==typeof t&&t&&(4&a&&t.__esModule||16&a&&"function"==typeof t.then))return t;var s=Object.create(null);__webpack_require__.r(s);var i={};e=e||[null,r({}),r([]),r(r)];for(var u=2&a&&t;"object"==typeof u&&!~e.indexOf(u);u=r(u))Object.getOwnPropertyNames(u).forEach(e=>i[e]=()=>t[e]);return i.default=()=>t,__webpack_require__.d(s,i),s}})(),__webpack_require__.d=(e,r)=>{for(var t in r)__webpack_require__.o(r,t)&&!__webpack_require__.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},__webpack_require__.f={},__webpack_require__.e=e=>Promise.all(Object.keys(__webpack_require__.f).reduce((r,t)=>(__webpack_require__.f[t](e,r),r),[])),__webpack_require__.u=e=>""+e+".js",__webpack_require__.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={9419:1};__webpack_require__.O.require=r=>e[r];var installChunk=r=>{var t=r.modules,a=r.ids,s=r.runtime;for(var i in t)__webpack_require__.o(t,i)&&(__webpack_require__.m[i]=t[i]);s&&s(__webpack_require__);for(var u=0;u<a.length;u++)e[a[u]]=1;__webpack_require__.O()};__webpack_require__.f.require=(r,t)=>{e[r]||installChunk(require("./"+__webpack_require__.u(r)))}})(),(()=>{var e=__webpack_require__.x;__webpack_require__.x=()=>(__webpack_require__.e(7013),__webpack_require__.e(2689),__webpack_require__.e(5005),__webpack_require__.e(8909),__webpack_require__.e(5417),__webpack_require__.e(8105),__webpack_require__.e(7925),__webpack_require__.e(8509),__webpack_require__.e(1014),__webpack_require__.e(3926),__webpack_require__.e(1866),e())})();var t=__webpack_require__.x();module.exports=t})();